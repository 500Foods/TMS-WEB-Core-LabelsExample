var pas={$libimports:{}},rtl={version:20301,quiet:!1,debug_load_units:!1,debug_rtti:!1,$res:{},debug:function(){!rtl.quiet&&console&&console.log&&console.log(arguments)},error:function(t){throw rtl.debug("Error: ",t),t},warn:function(t){rtl.debug("Warn: ",t)},checkVersion:function(t){if(rtl.version!=t)throw"expected rtl version "+t+", but found "+rtl.version},hiInt:Math.pow(2,53),hasString:function(t){return rtl.isString(t)&&t.length>0},isArray:function(t){return Array.isArray(t)},isFunction:function(t){return"function"==typeof t},isModule:function(t){return rtl.isObject(t)&&rtl.hasString(t.$name)&&pas[t.$name]===t},isImplementation:function(t){return rtl.isObject(t)&&rtl.isModule(t.$module)&&t.$module.$impl===t},isNumber:function(t){return"number"==typeof t},isObject:function(t){return"object"==typeof t&&null!=t},isString:function(t){return"string"==typeof t},getNumber:function(t){return"number"==typeof t?t:NaN},getChar:function(t){return"string"==typeof t&&1===t.length?t:""},getObject:function(t){return"object"==typeof t||"function"==typeof t?t:null},isTRecord:function(t){return rtl.isObject(t)&&t.hasOwnProperty("$new")&&"function"==typeof t.$new},isPasClass:function(t){return rtl.isObject(t)&&t.hasOwnProperty("$classname")&&rtl.isObject(t.$module)},isPasClassInstance:function(t){return rtl.isObject(t)&&rtl.isPasClass(t.$class)},hexStr:function(t,e){return("000000000000000"+t.toString(16).toUpperCase()).slice(-e)},m_loading:0,m_loading_intf:1,m_intf_loaded:2,m_loading_impl:3,m_initializing:4,m_initialized:5,module:function(t,e,i,s){rtl.debug_load_units&&rtl.debug('rtl.module name="'+t+'" intfuses='+e+" impluses="+s),rtl.hasString(t)||rtl.error('invalid module name "'+t+'"'),rtl.isArray(e)||rtl.error('invalid interface useslist of "'+t+'"'),rtl.isFunction(i)||rtl.error('invalid interface code of "'+t+'"'),null==s||rtl.isArray(s)||rtl.error('invalid implementation useslist of "'+t+'"'),pas[t]&&rtl.error('module "'+t+'" is already registered');var n=Object.create(rtl.tSectionRTTI),r=n.$module=pas[t]={$name:t,$intfuseslist:e,$impluseslist:s,$state:rtl.m_loading,$intfcode:i,$implcode:null,$impl:null,$rtti:n};s&&(r.$impl={$module:r,$rtti:n})},exitcode:0,run:function(t){try{rtl.hasString(t)||(t="program"),rtl.debug_load_units&&rtl.debug('rtl.run module="'+t+'"'),rtl.initRTTI();var e=pas[t];if(e||rtl.error('rtl.run module "'+t+'" missing'),rtl.loadintf(e),rtl.loadimpl(e),"program"==t||"library"==t){rtl.debug_load_units&&rtl.debug("running $main");var i=pas[t].$main();rtl.isNumber(i)&&(rtl.exitcode=i)}}catch(t){if(!rtl.showUncaughtExceptions)throw t;rtl.handleUncaughtException(t)||(rtl.showException(t),rtl.exitcode=216)}return rtl.exitcode},showException:function(t){var e=rtl.hasString(t.$classname)?t.$classname:"";e+=(e?": ":"")+(t.hasOwnProperty("fMessage")?t.fMessage:t),alert("Uncaught Exception : "+e)},handleUncaughtException:function(t){if(!rtl.onUncaughtException)return!1;try{return rtl.onUncaughtException(t),!0}catch(t){return!1}},loadintf:function(t){t.$state>rtl.m_loading_intf||(rtl.debug_load_units&&rtl.debug('loadintf: "'+t.$name+'"'),t.$state===rtl.m_loading_intf&&rtl.error('unit cycle detected "'+t.$name+'"'),t.$state=rtl.m_loading_intf,rtl.loaduseslist(t,t.$intfuseslist,rtl.loadintf),rtl.debug_load_units&&rtl.debug('loadintf: run intf of "'+t.$name+'"'),t.$intfcode(t.$intfuseslist),t.$state=rtl.m_intf_loaded)},loaduseslist:function(t,e,i){if(null!=e)for(var s=e.length,n=0;n<s;n++){var r=e[n];rtl.debug_load_units&&rtl.debug('loaduseslist of "'+t.$name+'" uses="'+r+'"'),null==pas[r]&&rtl.error('module "'+t.$name+'" misses "'+r+'"'),i(pas[r])}},loadimpl:function(t){t.$state>=rtl.m_loading_impl||(t.$state<rtl.m_intf_loaded&&rtl.error('loadimpl: interface not loaded of "'+t.$name+'"'),rtl.debug_load_units&&rtl.debug('loadimpl: load uses of "'+t.$name+'"'),t.$state=rtl.m_loading_impl,rtl.loaduseslist(t,t.$impluseslist,rtl.loadintf),rtl.loaduseslist(t,t.$intfuseslist,rtl.loadimpl),rtl.loaduseslist(t,t.$impluseslist,rtl.loadimpl),rtl.debug_load_units&&rtl.debug('loadimpl: run impl of "'+t.$name+'"'),rtl.isFunction(t.$implcode)&&t.$implcode(t.$impluseslist),rtl.debug_load_units&&rtl.debug('loadimpl: run init of "'+t.$name+'"'),t.$state=rtl.m_initializing,rtl.isFunction(t.$init)&&t.$init(),t.$state=rtl.m_initialized)},createCallback:function(t,e){var i;if("string"==typeof e){if(t.hasOwnProperty("$events")||(t.$events={}),i=t.$events[e])return i;t.$events[e]=i=function(){return t[e].apply(t,arguments)}}else i=function(){return e.apply(t,arguments)};return i.scope=t,i.fn=e,i},createSafeCallback:function(t,e){var i;if("string"==typeof e){if(t.hasOwnProperty("$events")||(t.$events={}),i=t.$events[e])return i;t.$events[e]=i=function(){try{return t[e].apply(t,arguments)}catch(t){if(!rtl.handleUncaughtException(t))throw t}}}else i=function(){try{return e.apply(t,arguments)}catch(t){if(!rtl.handleUncaughtException(t))throw t}};return i.scope=t,i.fn=e,i},eqCallback:function(t,e){return t===e||null!=t&&null!=e&&t.fn&&t.scope===e.scope&&t.fn===e.fn},initStruct:function(t,e,i){return e.$module&&e.$module.$impl===e&&(e=e.$module),t.$parent=e,rtl.isModule(e)?(t.$module=e,t.$name=i):(t.$module=e.$module,t.$name=e.$name+"."+i),e},initClass:function(t,e,i,s,n){e[i]=t,t.$class=t,t.$classname=n||i,e=rtl.initStruct(t,e,i),t.$fullname=e.$name+"."+i,rtl.debug_rtti&&rtl.debug("initClass "+t.$fullname);var r=t.$module.$rtti.$Class(t.$classname,{class:t});t.$rtti=r,rtl.isObject(t.$ancestor)&&(r.ancestor=t.$ancestor.$rtti),r.ancestor||(r.ancestor=null),s.call(t)},createClass:function(t,e,i,s,n){var r=null;null!=i?(r=Object.create(i)).$ancestor=i:((r={$ancestor:null}).$create=function(t,e){null==e&&(e=[]);var i=Object.create(this);i.$init();try{"string"==typeof t?i[t].apply(i,e):t.apply(i,e),i.AfterConstruction()}catch(t){throw i.Destroy&&i.Destroy(),i.$final(),t}return i},r.$destroy=function(t){this.BeforeDestruction(),this[t]&&this[t](),this.$final()}),rtl.initClass(r,t,e,s,n)},createClassExt:function(t,e,i,s,n,r){var o=rtl.isFunction(i),a=null;if(o?((a=Object.create(i.prototype)).$ancestorfunc=i,a.$ancestor=null):i.$func?(o=!0,(a=Object.create(i)).$ancestor=i):(a=Object.create(i)).$ancestor=null,a.$create=function(t,e){null==e&&(e=[]);var i=null;(i=s.length>0?this[s](t,e):o?new this.$func(e):Object.create(a)).$init&&i.$init();try{"string"==typeof t?this[t].apply(i,e):t.apply(i,e),i.AfterConstruction&&i.AfterConstruction()}catch(t){throw i.Destroy&&i.Destroy(),i.$final&&i.$final(),t}return i},a.$destroy=function(t){this.BeforeDestruction&&this.BeforeDestruction(),this[t]&&this[t](),this.$final&&this.$final()},rtl.initClass(a,t,e,n,r),o){function l(){}l.prototype=a,a.$func=l}},createHelper:function(t,e,i,s,n){var r=null;null!=i?(r=Object.create(i)).$ancestor=i:r={$ancestor:null},t[e]=r,r.$class=r,r.$classname=n||e,t=rtl.initStruct(r,t,e),r.$fullname=t.$name+"."+e;var o=r.$module.$rtti.$Helper(r.$classname,{helper:r});r.$rtti=o,rtl.isObject(i)&&(o.ancestor=i.$rtti),o.ancestor||(o.ancestor=null),s.call(r)},tObjectDestroy:"Destroy",free:function(t,e){if(null==t[e])return null;t[e].$destroy(rtl.tObjectDestroy),t[e]=null},freeLoc:function(t){return null==t||t.$destroy(rtl.tObjectDestroy),null},hideProp:function(t,e,i){Object.defineProperty(t,e,{enumerable:!1,configurable:!0,writable:!0}),arguments.length>2&&(t[e]=i)},recNewT:function(t,e,i,s){var n={};t&&(t[e]=n);var r=rtl.hideProp;return s&&(rtl.initStruct(n,t,e),n.$record=n,r(n,"$record"),r(n,"$name"),r(n,"$parent"),r(n,"$module"),r(n,"$initSpec")),i.call(n),n.$new||(n.$new=function(){return Object.create(n)}),n.$clone=function(t){return n.$new().$assign(t)},r(n,"$new"),r(n,"$clone"),r(n,"$eq"),r(n,"$assign"),n},is:function(t,e){return e.isPrototypeOf(t)||t===e},isExt:function(t,e,i){return null!=t&&(("object"==typeof e||"function"==typeof e)&&(t===e?1!==i&&(2!==i||rtl.isPasClass(t)):e.isPrototypeOf&&e.isPrototypeOf(t)?1===i?rtl.isPasClassInstance(t):2!==i||rtl.isPasClass(t):"function"==typeof e&&t instanceof e))},Exception:null,EInvalidCast:null,EAbstractError:null,ERangeError:null,EIntOverflow:null,EPropWriteOnly:null,raiseE:function(t){var e=rtl[t];if(null==e){var i=pas.SysUtils;i||(i=pas.sysutils),i&&((e=i[t])||(e=i[t.toLowerCase()]),e||(e=i.Exception),e||(e=i.exception))}if(e){if(e.Create)throw e.$create("Create");if(e.create)throw e.$create("create")}if("EInvalidCast"===t)throw"invalid type cast";if("EAbstractError"===t)throw"Abstract method called";if("ERangeError"===t)throw"range error";throw t},as:function(t,e){if(null===t||rtl.is(t,e))return t;rtl.raiseE("EInvalidCast")},asExt:function(t,e,i){if(null===t||rtl.isExt(t,e,i))return t;rtl.raiseE("EInvalidCast")},createInterface:function(t,e,i,s,n,r){var o=n?Object.create(n):{};if(t[e]=o,o.$module=t,o.$name=e,o.$fullname=t.$name+"."+e,o.$guid=i,o.$guidr=null,o.$names=s||[],rtl.isFunction(r)){rtl.debug_rtti&&rtl.debug("createInterface "+o.$fullname);var a=o.$module.$rtti.$Interface(e,{interface:o,module:t});o.$rtti=a,n&&(a.ancestor=n.$rtti),a.ancestor||(a.ancestor=null),r.call(o)}return o},strToGUIDR:function(t,e){var i=0;function s(e){var s=t.substr(i,e);return i+=e,parseInt(s,16)}i+=1,e.D1=s(8),i+=1,e.D2=s(4),i+=1,e.D3=s(4),i+=1,e.D4||(e.D4=[]),e.D4[0]=s(2),e.D4[1]=s(2),i+=1;for(var n=2;n<8;n++)e.D4[n]=s(2);return e},guidrToStr:function(t){if(t.$intf)return t.$intf.$guid;for(var e=rtl.hexStr,i="{"+e(t.D1,8)+"-"+e(t.D2,4)+"-"+e(t.D3,4)+"-"+e(t.D4[0],2)+e(t.D4[1],2)+"-",s=2;s<8;s++)i+=e(t.D4[s],2);return i+="}"},createTGUID:function(t){var e=pas.System?pas.System.TGuid:pas.system.tguid;return rtl.strToGUIDR(t,e.$new())},getIntfGUIDR:function(t){if(!t)return null;if(!t.$guidr){var e=rtl.createTGUID(t.$guid);t.hasOwnProperty("$guid")||(t=Object.getPrototypeOf(t)),e.$intf=t,t.$guidr=e}return t.$guidr},addIntf:function(t,e,i){function s(t){return"function"==typeof t?function(){return t.apply(this.$o,arguments)}:function(){rtl.raiseE("EAbstractError")}}i||(i={});var n=e,r=Object.create(n);t.hasOwnProperty("$intfmaps")||(t.$intfmaps={}),t.$intfmaps[e.$guid]=r;do{var o=n.$names;if(!o)break;for(var a=0;a<o.length;a++){var l=o[a],h=i[l];h||(h=l),r[l]=s(t[h])}n=Object.getPrototypeOf(n)}while(null!=n)},getIntfG:function(t,e,i){if(!t)return null;var s=t.$intfmaps;if(!s)return null;var n=s[e];if(!n)return null;if("function"==typeof n)return n.call(t);var r=null;if(t.$interfaces&&(r=t.$interfaces[e]),r||((r=Object.create(n)).$o=t,t.$interfaces||(t.$interfaces={}),t.$interfaces[e]=r),"object"==typeof i){var o=null;return 0===r.QueryInterface(rtl.getIntfGUIDR(i),{get:function(){return o},set:function(t){o=t}})?o:null}return 2===i&&"com"===r.$kind&&r._AddRef(),r},getIntfT:function(t,e){return rtl.getIntfG(t,e.$guid)},queryIntfT:function(t,e){return rtl.getIntfG(t,e.$guid,e)},queryIntfIsT:function(t,e){var i=rtl.getIntfG(t,e.$guid);return!!i&&("com"===i.$kind&&i._Release(),!0)},asIntfT:function(t,e){var i=rtl.getIntfG(t,e.$guid);if(null!==i)return i;rtl.raiseEInvalidCast()},intfIsIntfT:function(t,e){return null!==t&&rtl.queryIntfIsT(t.$o,e)},intfAsIntfT:function(t,e){if(!t)return null;var i=rtl.getIntfG(t.$o,e.$guid);if(i)return i;rtl.raiseEInvalidCast()},intfIsClass:function(t,e){return null!=t&&rtl.is(t.$o,e)},intfAsClass:function(t,e){return null==t?null:rtl.as(t.$o,e)},intfToClass:function(t,e){return null!==t&&rtl.is(t.$o,e)?t.$o:null},intfRefs:{ref:function(t,e){var i=this[t];return i&&(delete this[t],i._Release()),e&&(this[t]=e),e},free:function(){for(var t in this)if(this.hasOwnProperty(t)){var e=this[t];e&&e._Release()}}},createIntfRefs:function(){return Object.create(rtl.intfRefs)},setIntfP:function(t,e,i,s){var n=t[e];n!==i&&(null!==n&&(t[e]=null,n._Release()),null!==i&&(s||i._AddRef(),t[e]=i))},setIntfL:function(t,e,i){return t!==e?(null!==e&&(i||e._AddRef()),null!==t&&t._Release()):i&&null!==t&&t._Release(),e},_AddRef:function(t){return t&&t._AddRef(),t},_Release:function(t){return t&&t._Release(),t},_ReleaseArray:function(t,e){if(!t)return null;for(var i=0;i<t.length;i++)e<=1?t[i]&&t[i]._Release():rtl._ReleaseArray(t[i],e-1);return null},trunc:function(t){return t<0?Math.ceil(t):Math.floor(t)},checkMethodCall:function(t,e){rtl.isObject(t)&&rtl.is(t,e)||rtl.raiseE("EInvalidCast")},oc:function(t){if(Math.floor(t)===t&&t>=-9007199254740991&&t<=9007199254740991)return t;rtl.raiseE("EIntOverflow")},rc:function(t,e,i){if(Math.floor(t)===t&&t>=e&&t<=i)return t;rtl.raiseE("ERangeError")},rcc:function(t,e,i){if("string"==typeof t&&1===t.length){var s=t.charCodeAt(0);if(s>=e&&s<=i)return t}rtl.raiseE("ERangeError")},rcSetCharAt:function(t,e,i){return("string"!=typeof t||e<0||e>=t.length)&&rtl.raiseE("ERangeError"),rtl.setCharAt(t,e,i)},rcCharAt:function(t,e){return("string"!=typeof t||e<0||e>=t.length)&&rtl.raiseE("ERangeError"),t.charAt(e)},rcArrR:function(t,e){if(Array.isArray(t)&&"number"==typeof e&&e>=0&&e<t.length){if(arguments.length>2){t=t[e];for(var i=2;i<arguments.length;i++)t=rtl.rcArrR(t,arguments[i]);return t}return t[e]}rtl.raiseE("ERangeError")},rcArrW:function(t,e,i){for(var s=3;s<arguments.length;s++)t=rtl.rcArrR(t,e),e=arguments[s-1],i=arguments[s];if(Array.isArray(t)&&"number"==typeof e&&e>=0&&e<t.length)return t[e]=i;rtl.raiseE("ERangeError")},length:function(t){return null==t?0:t.length},arrayRef:function(t){return null!=t&&rtl.hideProp(t,"$pas2jsrefcnt",1),t},arraySetLength:function(t,e,i){for(var s=[],n=9999,r=2;r<arguments.length;r++){var o=arguments[r];"s"===o?n=r-2:s.push({dim:o+0,a:null,i:0,src:null})}for(var a=s.length-1,l=0,h=0,F=null,p=null,c=t,u=0,d=0;;)if(l>0&&(c=(F=s[l-1]).src&&F.src.length>F.i?F.src[F.i]:null),c?c.$pas2jsrefcnt>0||l>=n?(p=[],d=u=c.length):(u=0,d=(p=c).length):(p=[],u=0,d=0),h=s[l].dim,p.length=h,!(l>0&&(F.a[F.i]=p,F.i++,0===h&&F.i<F.a.length))){if(h>0){if(l<a){(F=s[l]).a=p,F.i=0,F.src=c,l++;continue}if(u>h&&(u=h),rtl.isArray(e)){for(r=0;r<u;r++)p[r]=c[r];for(r=d;r<h;r++)p[r]=[]}else if(rtl.isObject(e))if(rtl.isTRecord(e)){for(r=0;r<u;r++)p[r]=e.$clone(c[r]);for(r=d;r<h;r++)p[r]=e.$new()}else{for(r=0;r<u;r++)p[r]=rtl.refSet(c[r]);for(r=d;r<h;r++)p[r]={}}else{for(r=0;r<u;r++)p[r]=c[r];for(r=d;r<h;r++)p[r]=e}}for(;l>0&&s[l-1].i>=s[l-1].dim;)l--;if(0===l)return 0===a?p:s[0].a}},arrayEq:function(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.length!==e.length)return!1;for(var i=0;i<t.length;i++)if(t[i]!==e[i])return!1;return!0},arrayClone:function(t,e,i,s,n,r){if("refSet"===t)for(;i<s;i++)n[r++]=rtl.refSet(e[i]);else if("slice"===t)for(;i<s;i++)n[r++]=e[i].slice(0);else if("function"==typeof t)for(;i<s;i++)n[r++]=t(e[i]);else if(rtl.isTRecord(t))for(;i<s;i++)n[r++]=t.$clone(e[i]);else for(;i<s;i++)n[r++]=e[i]},arrayConcat:function(t){for(var e=[],i=0,s=1;s<arguments.length;s++){null!==(n=arguments[s])&&(i+=n.length)}e.length=i,i=0;for(s=1;s<arguments.length;s++){var n;null!==(n=arguments[s])&&(rtl.arrayClone(t,n,0,n.length,e,i),i+=n.length)}return e},arrayConcatN:function(){for(var t=null,e=0;e<arguments.length;e++){var i=arguments[e];if(null!==i)if(null===t)t=rtl.arrayRef(i);else if(t.$pas2jsrefcnt)t=t.concat(i);else for(e=0;e<i.length;e++)t.push(i[e])}return t},arrayPush:function(t,e){return null===e?e=[]:e.$pas2jsrefcnt&&(e=rtl.arrayCopy(t,e,0,e.length)),rtl.arrayClone(t,arguments,2,arguments.length,e,e.length),e},arrayPushN:function(t){null===t?t=[]:t.$pas2jsrefcnt&&(t=t.concat());for(var e=1;e<arguments.length;e++)t.push(arguments[e]);return t},arrayCopy:function(t,e,i,s){if(null===e)return[];i<0&&(i=0),void 0===s&&(s=e.length);var n=i+s;if(n>e.length&&(n=e.length),i>=n)return[];if(0===t)return e.slice(i,n);var r=[];return r.length=n-i,rtl.arrayClone(t,e,i,n,r,0),r},arrayInsert:function(t,e,i){return e?(e.splice(i,0,t),e):[t]},setCharAt:function(t,e,i){return t.substr(0,e)+i+t.substr(e+1)},getResStr:function(t,e){var i=t.$resourcestrings[e];return i.current?i.current:i.org},createSet:function(){for(var t={},e=0;e<arguments.length;e++)if(null!=arguments[e])t[arguments[e]]=!0;else for(var i=arguments[e+=1],s=arguments[e+=1],n=i;n<=s;n++)t[n]=!0;return t},cloneSet:function(t){var e={};for(var i in t)e[i]=!0;return e},refSet:function(t){return rtl.hideProp(t,"$shared",!0),t},includeSet:function(t,e){return t.$shared&&(t=rtl.cloneSet(t)),t[e]=!0,t},excludeSet:function(t,e){return t.$shared&&(t=rtl.cloneSet(t)),delete t[e],t},diffSet:function(t,e){var i={};for(var s in t)e[s]||(i[s]=!0);return i},unionSet:function(t,e){var i={};for(var s in t)i[s]=!0;for(var s in e)i[s]=!0;return i},intersectSet:function(t,e){var i={};for(var s in t)e[s]&&(i[s]=!0);return i},symDiffSet:function(t,e){var i={};for(var s in t)e[s]||(i[s]=!0);for(var s in e)t[s]||(i[s]=!0);return i},eqSet:function(t,e){for(var i in t)if(!e[i])return!1;for(var i in e)if(!t[i])return!1;return!0},neSet:function(t,e){return!rtl.eqSet(t,e)},leSet:function(t,e){for(var i in t)if(!e[i])return!1;return!0},geSet:function(t,e){for(var i in e)if(!t[i])return!1;return!0},strSetLength:function(t,e){var i=t.length;if(i>e)return t.substring(0,e);if(t.repeat)return t+" ".repeat(e-i);for(;i<e;)t+=" ",i++;return t},spaceLeft:function(t,e){var i=t.length;if(i>=e)return t;if(t.repeat)return" ".repeat(e-i)+t;for(;i<e;)t=" "+t,i++;return t},floatToStr:function(t,e,i){if(arguments.length>2)return rtl.spaceLeft(t.toFixed(i),e);var s="",n=Math.abs(t);n>1&&n<1e10||n>1e-10&&n<1?s="00":(n>1&&n<1e100||n<1e-10)&&(s="0"),arguments.length<2?e=24:e<9&&(e=9);i=e-8;var r=(t>0?" ":"")+t.toExponential(i);return r=r.replace(/e(.)/,"E$1"+s),rtl.spaceLeft(r,e)},valEnum:function(t,e,i){for(var s in t=t.toLowerCase(),e)if("string"==typeof s&&s.toLowerCase()===t)return i(0),e[s];return i(1),0},lw:function(t){return t<0?t+4294967296:t},and:function(t,e){var i=2147483648;return(t/i&e/i)*i+(2147483647&t&e)},or:function(t,e){var i=2147483648;return(t/i|e/i)*i+(2147483647&t|2147483647&e)},xor:function(t,e){var i=2147483648;return(t/i^e/i)*i+(2147483647&t^2147483647&e)},shr:function(t,e){return t<0&&(t+=rtl.hiInt),t<2147483648?t>>e:e<=0?t:e>54?0:Math.floor(t/Math.pow(2,e))},shl:function(t,e){if(t<0&&(t+=rtl.hiInt),e<=0)return t;if(e>54)return 0;var i=t*Math.pow(2,e);return i<=rtl.hiInt?i:i%rtl.hiInt},initRTTI:function(){function t(t,e,i){i||(i=rtl.tTypeInfo),rtl.debug_rtti&&rtl.debug('initRTTI.newBaseTI "'+t+'" '+e+' ("'+i.name+'")');var s=Object.create(i);return s.name=t,s.kind=e,rtl[t]=s,s}function e(e,i,s,n){var r=t(e,1,rtl.tTypeInfoInteger);return r.minvalue=i,r.maxvalue=s,r.ordtype=n,r}function i(t,e){var i=Object.create(rtl.tTypeMember);i.name=t,i.kind=e,rtl[t]=i}rtl.debug_rtti&&rtl.debug("initRTTI"),rtl.tTypeInfo={name:"tTypeInfo",kind:0,$module:null,attr:null},t("tTypeInfoInteger",1),e("shortint",-128,127,0),e("byte",0,255,1),e("smallint",-32768,32767,2),e("word",0,65535,3),e("longint",-2147483648,2147483647,4),e("longword",0,4294967295,5),e("nativeint",-4503599627370496,0xfffffffffffff,6),e("nativeuint",0,0xfffffffffffff,7),t("char",2),t("string",3),t("tTypeInfoEnum",4,rtl.tTypeInfoInteger),t("tTypeInfoSet",5),t("double",6),t("boolean",7),t("tTypeInfoProcVar",8),t("tTypeInfoMethodVar",9,rtl.tTypeInfoProcVar),t("tTypeInfoArray",10),t("tTypeInfoDynArray",11),t("tTypeInfoPointer",15),t("pointer",15,rtl.tTypeInfoPointer).reftype=null,t("jsvalue",16),t("tTypeInfoRefToProcVar",17,rtl.tTypeInfoProcVar),rtl.tTypeMember={attr:null},i("tTypeMemberField",1),i("tTypeMemberMethod",2),i("tTypeMemberProperty",3),rtl.tTypeMembers={};var s=t("tTypeInfoStruct",0);s.$addMember=function(t,e,i){if(rtl.debug_rtti){if(!rtl.hasString(t)||"$"===t.charAt())throw'invalid member "'+t+'", this="'+this.name+'"';if(!rtl.is(e,rtl.tTypeMember))throw'invalid ancestor "'+e+":"+e.name+'", "'+this.name+"."+t+'"';if(null!=i&&"object"!=typeof i)throw'invalid options "'+i+'", "'+this.name+"."+t+'"'}var s=Object.create(e);if(s.name=t,this.members[t]=s,this.names.push(t),rtl.isObject(i))for(var n in i)i.hasOwnProperty(n)&&(s[n]=i[n]);return s},s.addField=function(t,e,i){var s=this.$addMember(t,rtl.tTypeMemberField,i);if(rtl.debug_rtti&&!rtl.is(e,rtl.tTypeInfo))throw'invalid type "'+e+'", "'+this.name+"."+t+'"';return s.typeinfo=e,this.fields.push(t),s},s.addFields=function(){for(var t=0;t<arguments.length;){var e=arguments[t++],i=arguments[t++];t<arguments.length&&"object"==typeof arguments[t]?this.addField(e,i,arguments[t++]):this.addField(e,i)}},s.addMethod=function(t,e,i,s,n,r){var o=this.$addMember(t,rtl.tTypeMemberMethod,r);return o.methodkind=e,o.procsig=rtl.newTIProcSig(i,s,n),this.methods.push(t),o},s.addProperty=function(t,e,i,s,n,r){var o=this.$addMember(t,rtl.tTypeMemberProperty,r);return o.flags=e,o.typeinfo=i,o.getter=s,o.setter=n,o.params=rtl.isArray(o.params)?rtl.newTIParams(o.params):null,this.properties.push(t),rtl.isString(o.stored)||(o.stored=""),o},s.getField=function(t){return this.members[this.fields[t]]},s.getMethod=function(t){return this.members[this.methods[t]]},s.getProperty=function(t){return this.members[this.properties[t]]},t("tTypeInfoRecord",12,rtl.tTypeInfoStruct),t("tTypeInfoClass",13,rtl.tTypeInfoStruct),t("tTypeInfoClassRef",14),t("tTypeInfoInterface",18,rtl.tTypeInfoStruct),t("tTypeInfoHelper",19,rtl.tTypeInfoStruct),t("tTypeInfoExtClass",20,rtl.tTypeInfoClass)},tSectionRTTI:{$module:null,$inherited:function(t,e,i){rtl.debug_rtti&&rtl.debug('tSectionRTTI.newTI "'+(this.$module?this.$module.$name:"(no module)")+'"."'+t+'" ('+e.name+") "+(i?"init":"forward"));var s=this[t];if(s){if(!s.$forward)throw'duplicate type "'+t+'"';if(!e.isPrototypeOf(s))throw'typeinfo ancestor mismatch "'+t+'" ancestor="'+e.name+'" t.name="'+s.name+'"'}else(s=Object.create(e)).name=t,s.$module=this.$module,this[t]=s;if(i)for(var n in delete s.$forward,i)i.hasOwnProperty(n)&&(s[n]=i[n]);else s.$forward=!0;return s},$Scope:function(t,e,i){var s=this.$inherited(t,e,i);return s.members={},s.names=[],s.fields=[],s.methods=[],s.properties=[],s},$TI:function(t,e,i){var s=this.$inherited(t,rtl.tTypeInfo,i);return s.kind=e,s},$Int:function(t,e){return this.$inherited(t,rtl.tTypeInfoInteger,e)},$Enum:function(t,e){return this.$inherited(t,rtl.tTypeInfoEnum,e)},$Set:function(t,e){return this.$inherited(t,rtl.tTypeInfoSet,e)},$StaticArray:function(t,e){return this.$inherited(t,rtl.tTypeInfoArray,e)},$DynArray:function(t,e){return this.$inherited(t,rtl.tTypeInfoDynArray,e)},$ProcVar:function(t,e){return this.$inherited(t,rtl.tTypeInfoProcVar,e)},$RefToProcVar:function(t,e){return this.$inherited(t,rtl.tTypeInfoRefToProcVar,e)},$MethodVar:function(t,e){return this.$inherited(t,rtl.tTypeInfoMethodVar,e)},$Record:function(t,e){return this.$Scope(t,rtl.tTypeInfoRecord,e)},$Class:function(t,e){return this.$Scope(t,rtl.tTypeInfoClass,e)},$ClassRef:function(t,e){return this.$inherited(t,rtl.tTypeInfoClassRef,e)},$Pointer:function(t,e){return this.$inherited(t,rtl.tTypeInfoPointer,e)},$Interface:function(t,e){return this.$Scope(t,rtl.tTypeInfoInterface,e)},$Helper:function(t,e){return this.$Scope(t,rtl.tTypeInfoHelper,e)},$ExtClass:function(t,e){return this.$Scope(t,rtl.tTypeInfoExtClass,e)}},newTIParam:function(t){return{name:t[0],typeinfo:t[1],flags:rtl.isNumber(t[2])?t[2]:0}},newTIParams:function(t){var e=[];if(rtl.isArray(t))for(var i=0;i<t.length;i++)e.push(rtl.newTIParam(t[i]));return e},newTIProcSig:function(t,e,i){return{params:rtl.newTIParams(t),resulttype:e||null,flags:i||0}},addResource:function(t){rtl.$res[t.name]=t},getResource:function(t){var e=rtl.$res[t];return void 0!==e?e:null},getResourceList:function(){return Object.keys(rtl.$res)}};rtl.module("System",[],(function(){"use strict";var t=this,e=t.$impl;this.LineEnding="\n",this.sLineBreak=this.LineEnding,this.MaxLongint=2147483647,this.Maxint=2147483647,this.TTextLineBreakStyle={0:"tlbsLF",tlbsLF:0,1:"tlbsCRLF",tlbsCRLF:1,2:"tlbsCR",tlbsCR:2},rtl.recNewT(this,"TGuid",(function(){this.D1=0,this.D2=0,this.D3=0,this.$new=function(){var t=Object.create(this);return t.D4=rtl.arraySetLength(null,0,8),t},this.$eq=function(t){return this.D1===t.D1&&this.D2===t.D2&&this.D3===t.D3&&rtl.arrayEq(this.D4,t.D4)},this.$assign=function(t){return this.D1=t.D1,this.D2=t.D2,this.D3=t.D3,this.D4=t.D4.slice(0),this}})),rtl.recNewT(this,"TMethod",(function(){this.Code=null,this.Data=null,this.$eq=function(t){return this.Code===t.Code&&this.Data===t.Data},this.$assign=function(t){return this.Code=t.Code,this.Data=t.Data,this}})),rtl.createClass(this,"TObject",null,(function(){this.$init=function(){},this.$final=function(){},this.Create=function(){return this},this.Destroy=function(){},this.Free=function(){this.$destroy("Destroy")},this.ClassType=function(){return this},this.InheritsFrom=function(t){return null!=t&&(this==t||t.isPrototypeOf(this))},this.MethodName=function(t){var e="";if(e="",null===t)return e;if("function"!=typeof t)return"";var i=0,s=this.$rtti;if(rtl.isObject(t.scope)){if("string"==typeof t.fn)return t.fn;t=t.fn}for(;""===e&&null!=s;){for(i=0;""===e&&i<s.methods.length;)this[s.getMethod(i).name]===t&&(e=s.getMethod(i).name),i+=1;""===e&&(s=s.ancestor)}return e},this.MethodAddress=function(t){var e=null;if(e=null,""===t)return e;var i,s=0,n=this.$rtti,r="";for(i=t.toLowerCase();""===r&&null!=n;){for(s=0;""===r&&s<n.methods.length;)n.getMethod(s).name.toLowerCase()===i&&(r=n.getMethod(s).name),s+=1;""===r&&(n=n.ancestor)}return""!==r&&(e=this[r]),e},this.FieldAddress=function(t){if(null,""===t)return null;for(var e=this.$class,i=null,s=t.toLowerCase(),n=null;null!==e;){for(var r=0,o=(i=e.$rtti).fields.length-1;r<=o;r++)if((n=i.getField(r)).name.toLowerCase()===s)return n;e=e.$ancestor?e.$ancestor:null}return null},this.ClassInfo=function(){return this.$rtti},this.AfterConstruction=function(){},this.BeforeDestruction=function(){},this.GetInterface=function(t,e){var i=t.$intf;return i&&(i=rtl.getIntfG(this,i.$guid,2))?(e.set(i),!0):this.GetInterfaceByStr(rtl.guidrToStr(t),e)},this.GetInterfaceByStr=function(e,i){if(!1,t.IObjectInstance.$str||(t.IObjectInstance.$str=rtl.guidrToStr(t.IObjectInstance)),e==t.IObjectInstance.$str)return i.set(this),!0;var s=rtl.getIntfG(this,e,2);return i.set(s),null!==s}})),rtl.createClass(this,"TCustomAttribute",this.TObject,(function(){})),this.S_OK=0,this.E_NOINTERFACE=-2147467262,rtl.createInterface(this,"IUnknown","{00000000-0000-0000-C000-000000000046}",["QueryInterface","_AddRef","_Release"],null,(function(){this.$kind="com"})),rtl.createClass(this,"TInterfacedObject",this.TObject,(function(){this.$init=function(){t.TObject.$init.call(this),this.fRefCount=0},this.QueryInterface=function(t,e){return this.GetInterface(t,e)?0:-2147467262},this._AddRef=function(){return this.fRefCount+=1,this.fRefCount},this._Release=function(){var t;return this.fRefCount-=1,t=this.fRefCount,0===this.fRefCount&&this.$destroy("Destroy"),t},this.BeforeDestruction=function(){0!==this.fRefCount&&rtl.raiseE("EHeapMemoryError")},rtl.addIntf(this,t.IUnknown)})),this.IObjectInstance=this.TGuid.$clone({D1:3642530548,D2:15507,D3:16911,D4:[163,3,191,91,168,43,253,35]}),this.TTypeKind={0:"tkUnknown",tkUnknown:0,1:"tkInteger",tkInteger:1,2:"tkChar",tkChar:2,3:"tkString",tkString:3,4:"tkEnumeration",tkEnumeration:4,5:"tkSet",tkSet:5,6:"tkDouble",tkDouble:6,7:"tkBool",tkBool:7,8:"tkProcVar",tkProcVar:8,9:"tkMethod",tkMethod:9,10:"tkArray",tkArray:10,11:"tkDynArray",tkDynArray:11,12:"tkRecord",tkRecord:12,13:"tkClass",tkClass:13,14:"tkClassRef",tkClassRef:14,15:"tkPointer",tkPointer:15,16:"tkJSValue",tkJSValue:16,17:"tkRefToProcVar",tkRefToProcVar:17,18:"tkInterface",tkInterface:18,19:"tkHelper",tkHelper:19,20:"tkExtClass",tkExtClass:20},this.$rtti.$Enum("TTypeKind",{minvalue:0,maxvalue:20,ordtype:1,enumtype:this.TTypeKind}),this.tkFloat=6,this.tkAny=rtl.createSet(null,this.TTypeKind.tkUnknown,this.TTypeKind.tkExtClass),this.vtInteger=0,this.vtExtended=3,this.vtWideChar=9,this.vtCurrency=12,this.vtUnicodeString=18,this.vtNativeInt=19,rtl.recNewT(this,"TVarRec",(function(){this.VType=0,this.VJSValue=void 0,this.$eq=function(t){return this.VType===t.VType&&this.VJSValue===t.VJSValue&&this.VJSValue===t.VJSValue&&this.VJSValue===t.VJSValue&&this.VJSValue===t.VJSValue&&this.VJSValue===t.VJSValue&&this.VJSValue===t.VJSValue&&this.VJSValue===t.VJSValue},this.$assign=function(t){return this.VType=t.VType,this.VJSValue=t.VJSValue,this.VJSValue=t.VJSValue,this.VJSValue=t.VJSValue,this.VJSValue=t.VJSValue,this.VJSValue=t.VJSValue,this.VJSValue=t.VJSValue,this.VJSValue=t.VJSValue,this}})),this.VarRecs=function(){var e=[],i=0,s=null;for(e=[];i<arguments.length;)(s=t.TVarRec.$new()).VType=rtl.trunc(arguments[i]),i+=1,s.VJSValue=arguments[i],i+=1,e.push(t.TVarRec.$clone(s));return e},this.Frac=function(t){return t%1},this.Odd=function(t){return!0&t},this.Random=function(t){return Math.floor(Math.random()*t)},this.Trunc=function(e){return Math.trunc||(Math.trunc=function(t){return t=+t,isFinite(t)?t-t%1||(t<0?-0:0===t?t:0):t}),t.Trunc=Math.trunc,Math.trunc(e)},this.DefaultTextLineBreakStyle=0,this.Int=function(e){return t.Trunc(e)},this.Copy=function(t,e,i){return e<1&&(e=1),i>0?t.substring(e-1,e+i-1):""},this.Copy$1=function(t,e){return e<1&&(e=1),t.substr(e-1)},this.Delete=function(e,i,s){var n;i<1||i>e.get().length||s<=0||(n=e.get(),e.set(t.Copy(n,1,i-1)+t.Copy$1(n,i+s)))},this.Pos=function(t,e){return e.indexOf(t)+1},this.Pos$1=function(t,e,i){return e.indexOf(t,i-1)+1},this.Insert=function(e,i,s){var n;""!==e&&(n=i.get(),s<1?i.set(e+n):s>n.length?i.set(n+e):i.set(t.Copy(n,1,s-1)+e+t.Copy(n,s,n.length)))},this.upcase=function(t){return t.toUpperCase()},this.val=function(t,i,s){i.set(e.valint(t,-9007199254740991,9007199254740991,s))},this.val$6=function(t,i,s){i.set(e.valint(t,-2147483648,2147483647,s))},this.val$8=function(t,e,i){var s;""!==t?(s=Number(t),isNaN(s)?i.set(1):(i.set(0),e.set(s))):i.set(1)},this.StringOfChar=function(t,e){var i="";if(e>0&&t.repeat)return t.repeat(e);i="";for(var s=1,n=e;s<=n;s++)s,i+=t;return i},this.Writeln=function(){var t=0,i=0,s="";if(i=arguments.length-1,null!=e.WriteCallBack)for(var n=0,r=i;n<=r;n++)t=n,e.WriteCallBack(arguments[t],t===i);else{s=e.WriteBuf;for(var o=0,a=i;o<=a;o++)s=s+""+arguments[t=o];console.log(s),e.WriteBuf=""}},this.Assigned=function(t){return null!=t&&null!=t&&(!rtl.isArray(t)||t.length>0)},t.$implcode=function(){e.WriteBuf="",e.WriteCallBack=null,e.valint=function(e,i,s,n){var r=0,o=0;if(""===e)return n.set(1),r;if(o=Number(e),isNaN(o)){var a=t.Copy(e,1,1);if("$"===a)o=Number("0x"+t.Copy$1(e,2));else if("&"===a)o=Number("0o"+t.Copy$1(e,2));else{if("%"!==a)return n.set(1),r;o=Number("0b"+t.Copy$1(e,2))}}return isNaN(o)||o!==t.Int(o)?n.set(1):o<i||o>s?n.set(2):(r=t.Trunc(o),n.set(0)),r}},t.$init=function(){rtl.exitcode=0}}),[]),rtl.module("RTLConsts",["System"],(function(){"use strict";this.$resourcestrings={SArgumentMissing:{org:'Missing argument in format "%s"'},SInvalidFormat:{org:'Invalid format specifier : "%s"'},SInvalidArgIndex:{org:'Invalid argument index in format: "%s"'},SListCapacityError:{org:"List capacity (%s) exceeded."},SListCountError:{org:"List count (%s) out of bounds."},SListIndexError:{org:"List index (%s) out of bounds"},SSortedListError:{org:"Operation not allowed on sorted list"},SDuplicateString:{org:"String list does not allow duplicates"},SErrFindNeedsSortedList:{org:"Cannot use find on unsorted list"},SInvalidName:{org:'Invalid component name: "%s"'},SDuplicateName:{org:'Duplicate component name: "%s"'},SCantReadPropertyS:{org:'Cannot read property "%s"'},SCantWritePropertyS:{org:'Cannot write property "%s"'},SErrPropertyNotFound:{org:'Unknown property: "%s"'},SIndexedPropertyNeedsParams:{org:'Indexed property "%s" needs parameters'},SErrInvalidInteger:{org:'Invalid integer value: "%s"'},SErrInvalidFloat:{org:'Invalid floating-point value: "%s"'}}})),rtl.module("Types",["System"],(function(){"use strict";var t=this;this.TDirection={0:"FromBeginning",FromBeginning:0,1:"FromEnd",FromEnd:1},this.TDuplicates={0:"dupIgnore",dupIgnore:0,1:"dupAccept",dupAccept:1,2:"dupError",dupError:2},rtl.recNewT(this,"TPoint",(function(){this.x=0,this.y=0,this.$eq=function(t){return this.x===t.x&&this.y===t.y},this.$assign=function(t){return this.x=t.x,this.y=t.y,this};var e=t.$rtti.$Record("TPoint",{});e.addField("x",rtl.longint),e.addField("y",rtl.longint)})),rtl.recNewT(this,"TRect",(function(){this.Left=0,this.Top=0,this.Right=0,this.Bottom=0,this.$eq=function(t){return this.Left===t.Left&&this.Top===t.Top&&this.Right===t.Right&&this.Bottom===t.Bottom},this.$assign=function(t){return this.Left=t.Left,this.Top=t.Top,this.Right=t.Right,this.Bottom=t.Bottom,this};var e=t.$rtti.$Record("TRect",{});e.addField("Left",rtl.longint),e.addField("Top",rtl.longint),e.addField("Right",rtl.longint),e.addField("Bottom",rtl.longint)})),this.Rect=function(e,i,s,n){var r=t.TRect.$new();return r.Left=e,r.Top=i,r.Right=s,r.Bottom=n,r},this.Bounds=function(e,i,s,n){var r=t.TRect.$new();return r.Left=e,r.Top=i,r.Right=e+s,r.Bottom=i+n,r},this.Point=function(e,i){var s=t.TPoint.$new();return s.x=e,s.y=i,s}})),rtl.module("JS",["System","Types"],(function(){"use strict";var t=this;rtl.createClass(this,"AsyncAttribute",pas.System.TCustomAttribute,(function(){})),this.$rtti.$ExtClass("TJSArrayBuffer",{ancestor:this.$rtti.TJSObject,jsclass:"ArrayBuffer"}),this.isBoolean=function(t){return"boolean"==typeof t},this.isNull=function(t){return null===t},this.isUndefined=function(t){return null==t},this.toBoolean=function(e){return!!t.isBoolean(e)&&!(0==e)}})),rtl.module("SysUtils",["System","RTLConsts","JS"],(function(){"use strict";var t=this,e=t.$impl;this.FreeAndNil=function(t){var e=null;null!==(e=t.get())&&(t.set(null),e.$destroy("Destroy"))},this.FloatRecDigits=19,rtl.recNewT(this,"TFloatRec",(function(){this.Exponent=0,this.Negative=!1,this.$new=function(){var t=Object.create(this);return t.Digits=rtl.arraySetLength(null,"",19),t},this.$eq=function(t){return this.Exponent===t.Exponent&&this.Negative===t.Negative&&rtl.arrayEq(this.Digits,t.Digits)},this.$assign=function(t){return this.Exponent=t.Exponent,this.Negative=t.Negative,this.Digits=t.Digits.slice(0),this}})),rtl.recNewT(this,"TFormatSettings",(function(){this.CurrencyDecimals=0,this.CurrencyFormat=0,this.CurrencyString="",this.DateSeparator="",this.DecimalSeparator="",this.LongDateFormat="",this.LongTimeFormat="",this.NegCurrFormat=0,this.ShortDateFormat="",this.ShortTimeFormat="",this.ThousandSeparator="",this.TimeAMString="",this.TimePMString="",this.TimeSeparator="",this.TwoDigitYearCenturyWindow=0,this.InitLocaleHandler=null,this.$new=function(){var t=Object.create(this);return t.DateTimeToStrFormat=rtl.arraySetLength(null,"",2),t.LongDayNames=rtl.arraySetLength(null,"",7),t.LongMonthNames=rtl.arraySetLength(null,"",12),t.ShortDayNames=rtl.arraySetLength(null,"",7),t.ShortMonthNames=rtl.arraySetLength(null,"",12),t},this.$eq=function(t){return this.CurrencyDecimals===t.CurrencyDecimals&&this.CurrencyFormat===t.CurrencyFormat&&this.CurrencyString===t.CurrencyString&&this.DateSeparator===t.DateSeparator&&rtl.arrayEq(this.DateTimeToStrFormat,t.DateTimeToStrFormat)&&this.DecimalSeparator===t.DecimalSeparator&&this.LongDateFormat===t.LongDateFormat&&rtl.arrayEq(this.LongDayNames,t.LongDayNames)&&rtl.arrayEq(this.LongMonthNames,t.LongMonthNames)&&this.LongTimeFormat===t.LongTimeFormat&&this.NegCurrFormat===t.NegCurrFormat&&this.ShortDateFormat===t.ShortDateFormat&&rtl.arrayEq(this.ShortDayNames,t.ShortDayNames)&&rtl.arrayEq(this.ShortMonthNames,t.ShortMonthNames)&&this.ShortTimeFormat===t.ShortTimeFormat&&this.ThousandSeparator===t.ThousandSeparator&&this.TimeAMString===t.TimeAMString&&this.TimePMString===t.TimePMString&&this.TimeSeparator===t.TimeSeparator&&this.TwoDigitYearCenturyWindow===t.TwoDigitYearCenturyWindow},this.$assign=function(t){return this.CurrencyDecimals=t.CurrencyDecimals,this.CurrencyFormat=t.CurrencyFormat,this.CurrencyString=t.CurrencyString,this.DateSeparator=t.DateSeparator,this.DateTimeToStrFormat=t.DateTimeToStrFormat.slice(0),this.DecimalSeparator=t.DecimalSeparator,this.LongDateFormat=t.LongDateFormat,this.LongDayNames=t.LongDayNames.slice(0),this.LongMonthNames=t.LongMonthNames.slice(0),this.LongTimeFormat=t.LongTimeFormat,this.NegCurrFormat=t.NegCurrFormat,this.ShortDateFormat=t.ShortDateFormat,this.ShortDayNames=t.ShortDayNames.slice(0),this.ShortMonthNames=t.ShortMonthNames.slice(0),this.ShortTimeFormat=t.ShortTimeFormat,this.ThousandSeparator=t.ThousandSeparator,this.TimeAMString=t.TimeAMString,this.TimePMString=t.TimePMString,this.TimeSeparator=t.TimeSeparator,this.TwoDigitYearCenturyWindow=t.TwoDigitYearCenturyWindow,this},this.GetJSLocale=function(){return Intl.DateTimeFormat().resolvedOptions().locale},this.GetLocaleDecimalSeparator=function(t){var e=1.1;return e=e.toLocaleString(t).substring(1,2)},this.GetLocaleLongDayName=function(t,e){var i=new Date(2017,0,1);return i.setDate(i.getDate()+t-1),i.toLocaleDateString(e,{weekday:"long"})},this.GetLocaleLongMonthName=function(t,e){return new Date(2017,t-1,1).toLocaleDateString(e,{month:"long"})},this.GetLocaleLongTimeFormat=function(e){var i="";return i="hh:nn:ss","EN-US"===t.UpperCase(e)&&(i="hh:nn:ss AMPM"),i};this.GetLocaleShortDateFormat=function(e){var i;t.TStringHelper.Empty,e=t.TStringHelper.ToLower.call({get:function(){return e},set:function(t){e=t}}),(i=t.TStringHelper.IndexOf.call({get:function(){return e},set:function(t){e=t}},"-"))>=0?e=t.TStringHelper.Substring$1.call({get:function(){return e},set:function(t){e=t}},0,i)+t.TStringHelper.ToUpper.call({a:t.TStringHelper.Substring.call({get:function(){return e},set:function(t){e=t}},i),get:function(){return this.a},set:function(t){this.a=t}}):2===t.TStringHelper.GetLength.call({get:function(){return e},set:function(t){e=t}})&&(e=e+"-"+t.TStringHelper.ToUpper.call({get:function(){return e},set:function(t){e=t}}));return{"ar-SA":"dd/MM/yy","bg-BG":"dd.M.yyyy","ca-ES":"dd/MM/yyyy","zh-TW":"yyyy/M/d","cs-CZ":"d.M.yyyy","da-DK":"dd-MM-yyyy","de-DE":"dd.MM.yyyy","el-GR":"d/M/yyyy","en-US":"M/d/yyyy","fi-FI":"d.M.yyyy","fr-FR":"dd/MM/yyyy","he-IL":"dd/MM/yyyy","hu-HU":"yyyy. MM. dd.","is-IS":"d.M.yyyy","it-IT":"dd/MM/yyyy","ja-JP":"yyyy/MM/dd","ko-KR":"yyyy-MM-dd","nl-NL":"d-M-yyyy","nb-NO":"dd.MM.yyyy","pl-PL":"yyyy-MM-dd","pt-BR":"d/M/yyyy","ro-RO":"dd.MM.yyyy","ru-RU":"dd.MM.yyyy","hr-HR":"d.M.yyyy","sk-SK":"d. M. yyyy","sq-AL":"yyyy-MM-dd","sv-SE":"yyyy-MM-dd","th-TH":"d/M/yyyy","tr-TR":"dd.MM.yyyy","ur-PK":"dd/MM/yyyy","id-ID":"dd/MM/yyyy","uk-UA":"dd.MM.yyyy","be-BY":"dd.MM.yyyy","sl-SI":"d.M.yyyy","et-EE":"d.MM.yyyy","lv-LV":"yyyy.MM.dd.","lt-LT":"yyyy.MM.dd","fa-IR":"MM/dd/yyyy","vi-VN":"dd/MM/yyyy","hy-AM":"dd.MM.yyyy","az-Latn-AZ":"dd.MM.yyyy","eu-ES":"yyyy/MM/dd","mk-MK":"dd.MM.yyyy","af-ZA":"yyyy/MM/dd","ka-GE":"dd.MM.yyyy","fo-FO":"dd-MM-yyyy","hi-IN":"dd-MM-yyyy","ms-MY":"dd/MM/yyyy","kk-KZ":"dd.MM.yyyy","ky-KG":"dd.MM.yy","sw-KE":"M/d/yyyy","uz-Latn-UZ":"dd/MM yyyy","tt-RU":"dd.MM.yyyy","pa-IN":"dd-MM-yy","gu-IN":"dd-MM-yy","ta-IN":"dd-MM-yyyy","te-IN":"dd-MM-yy","kn-IN":"dd-MM-yy","mr-IN":"dd-MM-yyyy","sa-IN":"dd-MM-yyyy","mn-MN":"yy.MM.dd","gl-ES":"dd/MM/yy","kok-IN":"dd-MM-yyyy","syr-SY":"dd/MM/yyyy","dv-MV":"dd/MM/yy","ar-IQ":"dd/MM/yyyy","zh-CN":"yyyy/M/d","de-CH":"dd.MM.yyyy","en-GB":"dd/MM/yyyy","es-MX":"dd/MM/yyyy","fr-BE":"d/MM/yyyy","it-CH":"dd.MM.yyyy","nl-BE":"d/MM/yyyy","nn-NO":"dd.MM.yyyy","pt-PT":"dd-MM-yyyy","sr-Latn-CS":"d.M.yyyy","sv-FI":"d.M.yyyy","az-Cyrl-AZ":"dd.MM.yyyy","ms-BN":"dd/MM/yyyy","uz-Cyrl-UZ":"dd.MM.yyyy","ar-EG":"dd/MM/yyyy","zh-HK":"d/M/yyyy","de-AT":"dd.MM.yyyy","en-AU":"d/MM/yyyy","es-ES":"dd/MM/yyyy","fr-CA":"yyyy-MM-dd","sr-Cyrl-CS":"d.M.yyyy","ar-LY":"dd/MM/yyyy","zh-SG":"d/M/yyyy","de-LU":"dd.MM.yyyy","en-CA":"dd/MM/yyyy","es-GT":"dd/MM/yyyy","fr-CH":"dd.MM.yyyy","ar-DZ":"dd-MM-yyyy","zh-MO":"d/M/yyyy","de-LI":"dd.MM.yyyy","en-NZ":"d/MM/yyyy","es-CR":"dd/MM/yyyy","fr-LU":"dd/MM/yyyy","ar-MA":"dd-MM-yyyy","en-IE":"dd/MM/yyyy","es-PA":"MM/dd/yyyy","fr-MC":"dd/MM/yyyy","ar-TN":"dd-MM-yyyy","en-ZA":"yyyy/MM/dd","es-DO":"dd/MM/yyyy","ar-OM":"dd/MM/yyyy","en-JM":"dd/MM/yyyy","es-VE":"dd/MM/yyyy","ar-YE":"dd/MM/yyyy","en-029":"MM/dd/yyyy","es-CO":"dd/MM/yyyy","ar-SY":"dd/MM/yyyy","en-BZ":"dd/MM/yyyy","es-PE":"dd/MM/yyyy","ar-JO":"dd/MM/yyyy","en-TT":"dd/MM/yyyy","es-AR":"dd/MM/yyyy","ar-LB":"dd/MM/yyyy","en-ZW":"M/d/yyyy","es-EC":"dd/MM/yyyy","ar-KW":"dd/MM/yyyy","en-PH":"M/d/yyyy","es-CL":"dd-MM-yyyy","ar-AE":"dd/MM/yyyy","es-UY":"dd/MM/yyyy","ar-BH":"dd/MM/yyyy","es-PY":"dd/MM/yyyy","ar-QA":"dd/MM/yyyy","es-BO":"dd/MM/yyyy","es-SV":"dd/MM/yyyy","es-HN":"dd/MM/yyyy","es-NI":"dd/MM/yyyy","es-PR":"dd/MM/yyyy","am-ET":"d/M/yyyy","tzm-Latn-DZ":"dd-MM-yyyy","iu-Latn-CA":"d/MM/yyyy","sma-NO":"dd.MM.yyyy","mn-Mong-CN":"yyyy/M/d","gd-GB":"dd/MM/yyyy","en-MY":"d/M/yyyy","prs-AF":"dd/MM/yy","bn-BD":"dd-MM-yy","wo-SN":"dd/MM/yyyy","rw-RW":"M/d/yyyy","qut-GT":"dd/MM/yyyy","sah-RU":"MM.dd.yyyy","gsw-FR":"dd/MM/yyyy","co-FR":"dd/MM/yyyy","oc-FR":"dd/MM/yyyy","mi-NZ":"dd/MM/yyyy","ga-IE":"dd/MM/yyyy","se-SE":"yyyy-MM-dd","br-FR":"dd/MM/yyyy","smn-FI":"d.M.yyyy","moh-CA":"M/d/yyyy","arn-CL":"dd-MM-yyyy","ii-CN":"yyyy/M/d","dsb-DE":"d. M. yyyy","ig-NG":"d/M/yyyy","kl-GL":"dd-MM-yyyy","lb-LU":"dd/MM/yyyy","ba-RU":"dd.MM.yy","nso-ZA":"yyyy/MM/dd","quz-BO":"dd/MM/yyyy","yo-NG":"d/M/yyyy","ha-Latn-NG":"d/M/yyyy","fil-PH":"M/d/yyyy","ps-AF":"dd/MM/yy","fy-NL":"d-M-yyyy","ne-NP":"M/d/yyyy","se-NO":"dd.MM.yyyy","iu-Cans-CA":"d/M/yyyy","sr-Latn-RS":"d.M.yyyy","si-LK":"yyyy-MM-dd","sr-Cyrl-RS":"d.M.yyyy","lo-LA":"dd/MM/yyyy","km-KH":"yyyy-MM-dd","cy-GB":"dd/MM/yyyy","bo-CN":"yyyy/M/d","sms-FI":"d.M.yyyy","as-IN":"dd-MM-yyyy","ml-IN":"dd-MM-yy","en-IN":"dd-MM-yyyy","or-IN":"dd-MM-yy","bn-IN":"dd-MM-yy","tk-TM":"dd.MM.yy","bs-Latn-BA":"d.M.yyyy","mt-MT":"dd/MM/yyyy","sr-Cyrl-ME":"d.M.yyyy","se-FI":"d.M.yyyy","zu-ZA":"yyyy/MM/dd","xh-ZA":"yyyy/MM/dd","tn-ZA":"yyyy/MM/dd","hsb-DE":"d. M. yyyy","bs-Cyrl-BA":"d.M.yyyy","tg-Cyrl-TJ":"dd.MM.yy","sr-Latn-BA":"d.M.yyyy","smj-NO":"dd.MM.yyyy","rm-CH":"dd/MM/yyyy","smj-SE":"yyyy-MM-dd","quz-EC":"dd/MM/yyyy","quz-PE":"dd/MM/yyyy","hr-BA":"d.M.yyyy.","sr-Latn-ME":"d.M.yyyy","sma-SE":"yyyy-MM-dd","en-SG":"d/M/yyyy","ug-CN":"yyyy-M-d","sr-Cyrl-BA":"d.M.yyyy","es-US":"M/d/yyyy"}[e]||"dd/MM/yyyy"},this.GetLocaleShortDayName=function(t,e){var i=new Date(2017,0,1);i.setDate(i.getDate()+t-1);var s="";return s=""==e?navigator.language:e,i.toLocaleDateString(s,{weekday:"short"})},this.GetLocaleShortMonthName=function(t,e){var i=new Date(2017,t-1,1),s="";return s=""==e?navigator.language:e,i.toLocaleDateString(s,{month:"short"})},this.GetLocaleShortTimeFormat=function(e){var i="";return i="hh:nn","EN-US"===t.UpperCase(e)&&(i="h:nn AMPM"),i},this.Create=function(){var e=t.TFormatSettings.$new();return e.$assign(t.TFormatSettings.Create$1(t.TFormatSettings.GetJSLocale())),e};var i=["/",".","-"],s=[":",".","-"],n=[",","."],r=[".",","];this.Create$1=function(e){var o=t.TFormatSettings.$new(),a="",l=0,h="";h=t.UpperCase(e),1===pas.System.Pos("DE-",h)?(o.LongDayNames[0]="Sonntag",o.LongDayNames[1]="Montag",o.LongDayNames[2]="Dienstag",o.LongDayNames[3]="Mittwoch",o.LongDayNames[4]="Donnerstag",o.LongDayNames[5]="Freitag",o.LongDayNames[6]="Samstag",o.ShortDayNames[0]="Son",o.ShortDayNames[1]="Mon",o.ShortDayNames[2]="Die",o.ShortDayNames[3]="Mit",o.ShortDayNames[4]="Don",o.ShortDayNames[5]="Fre",o.ShortDayNames[6]="Sam",o.ShortMonthNames[0]="Jan",o.ShortMonthNames[1]="Feb",o.ShortMonthNames[2]="M�r",o.ShortMonthNames[3]="Apr",o.ShortMonthNames[4]="Mai",o.ShortMonthNames[5]="Jun",o.ShortMonthNames[6]="Jul",o.ShortMonthNames[7]="Aug",o.ShortMonthNames[8]="Sep",o.ShortMonthNames[9]="Okt",o.ShortMonthNames[10]="Nov",o.ShortMonthNames[11]="Dez",o.LongMonthNames[0]="Januar",o.LongMonthNames[1]="Februar",o.LongMonthNames[2]="M�rz",o.LongMonthNames[3]="April",o.LongMonthNames[4]="Mai",o.LongMonthNames[5]="Juni",o.LongMonthNames[6]="Juli",o.LongMonthNames[7]="August",o.LongMonthNames[8]="September",o.LongMonthNames[9]="Oktober",o.LongMonthNames[10]="November",o.LongMonthNames[11]="Dezember"):1===pas.System.Pos("FR-",t.UpperCase(e))?(o.LongDayNames[0]="Dimanche",o.LongDayNames[1]="Lundi",o.LongDayNames[2]="Mardi",o.LongDayNames[3]="Mecredi",o.LongDayNames[4]="Jeudi",o.LongDayNames[5]="Vendredi",o.LongDayNames[6]="Samedi",o.ShortDayNames[0]="Dim",o.ShortDayNames[1]="Lun",o.ShortDayNames[2]="Mar",o.ShortDayNames[3]="Mer",o.ShortDayNames[4]="Jeu",o.ShortDayNames[5]="Ven",o.ShortDayNames[6]="Sam",o.ShortMonthNames[0]="Jan",o.ShortMonthNames[1]="F�v",o.ShortMonthNames[2]="Mar",o.ShortMonthNames[3]="Avr",o.ShortMonthNames[4]="Mai",o.ShortMonthNames[5]="Jun",o.ShortMonthNames[6]="Jul",o.ShortMonthNames[7]="Ao�",o.ShortMonthNames[8]="Sep",o.ShortMonthNames[9]="Oct",o.ShortMonthNames[10]="Nov",o.ShortMonthNames[11]="Dec",o.LongMonthNames[0]="Janvier",o.LongMonthNames[1]="F�vrier",o.LongMonthNames[2]="Mars",o.LongMonthNames[3]="Avril",o.LongMonthNames[4]="Mai",o.LongMonthNames[5]="Juin",o.LongMonthNames[6]="Juillet",o.LongMonthNames[7]="Ao�t",o.LongMonthNames[8]="Septembre",o.LongMonthNames[9]="Octobre",o.LongMonthNames[10]="Novembre",o.LongMonthNames[11]="D�cembre"):1===pas.System.Pos("ES-",t.UpperCase(e))?(o.LongDayNames[0]="Domingo",o.LongDayNames[1]="Lunes",o.LongDayNames[2]="Martes",o.LongDayNames[3]="Mi�rcoles",o.LongDayNames[4]="Jueves",o.LongDayNames[5]="Viernes",o.LongDayNames[6]="S�bado",o.ShortDayNames[0]="Dom",o.ShortDayNames[1]="Lun",o.ShortDayNames[2]="Mar",o.ShortDayNames[3]="Mi�",o.ShortDayNames[4]="Jue",o.ShortDayNames[5]="Vie",o.ShortDayNames[6]="Sab",o.ShortMonthNames[0]="Ene",o.ShortMonthNames[1]="Feb",o.ShortMonthNames[2]="Mar",o.ShortMonthNames[3]="Abr",o.ShortMonthNames[4]="May",o.ShortMonthNames[5]="Jun",o.ShortMonthNames[6]="Jul",o.ShortMonthNames[7]="Ago",o.ShortMonthNames[8]="Sep",o.ShortMonthNames[9]="Oct",o.ShortMonthNames[10]="Nov",o.ShortMonthNames[11]="Dic",o.LongMonthNames[0]="January",o.LongMonthNames[1]="Febrero",o.LongMonthNames[2]="Marzi",o.LongMonthNames[3]="Abril",o.LongMonthNames[4]="Mayo",o.LongMonthNames[5]="Junio",o.LongMonthNames[6]="Julio",o.LongMonthNames[7]="Agusto",o.LongMonthNames[8]="Septiembre",o.LongMonthNames[9]="Octubre",o.LongMonthNames[10]="Noviembre",o.LongMonthNames[11]="Diciembre"):(o.LongDayNames[0]="Sunday",o.LongDayNames[1]="Monday",o.LongDayNames[2]="Tuesday",o.LongDayNames[3]="Wednesday",o.LongDayNames[4]="Thursday",o.LongDayNames[5]="Friday",o.LongDayNames[6]="Saturday",o.ShortDayNames[0]="Sun",o.ShortDayNames[1]="Mon",o.ShortDayNames[2]="Tue",o.ShortDayNames[3]="Wed",o.ShortDayNames[4]="Thu",o.ShortDayNames[5]="Fri",o.ShortDayNames[6]="Sat",o.ShortMonthNames[0]="Jan",o.ShortMonthNames[1]="Feb",o.ShortMonthNames[2]="Mar",o.ShortMonthNames[3]="Apr",o.ShortMonthNames[4]="May",o.ShortMonthNames[5]="Jun",o.ShortMonthNames[6]="Jul",o.ShortMonthNames[7]="Aug",o.ShortMonthNames[8]="Sep",o.ShortMonthNames[9]="Oct",o.ShortMonthNames[10]="Nov",o.ShortMonthNames[11]="Dec",o.LongMonthNames[0]="January",o.LongMonthNames[1]="February",o.LongMonthNames[2]="March",o.LongMonthNames[3]="April",o.LongMonthNames[4]="May",o.LongMonthNames[5]="June",o.LongMonthNames[6]="July",o.LongMonthNames[7]="August",o.LongMonthNames[8]="September",o.LongMonthNames[9]="October",o.LongMonthNames[10]="November",o.LongMonthNames[11]="December"),o.DateTimeToStrFormat[0]="c",o.DateTimeToStrFormat[1]="f",o.DateSeparator="-",o.TimeSeparator=":",o.ShortDateFormat="yyyy-mm-dd",o.LongDateFormat="ddd, yyyy-mm-dd",o.DecimalSeparator=".",o.ThousandSeparator=",",o.TimeAMString="AM",o.TimePMString="PM",o.TwoDigitYearCenturyWindow=50,o.ShortTimeFormat=t.TFormatSettings.GetLocaleShortTimeFormat(e),o.LongTimeFormat=t.TFormatSettings.GetLocaleLongTimeFormat(e),o.ShortDateFormat=t.TFormatSettings.GetLocaleShortDateFormat(e);for(var F=0,p=rtl.length(i)-1;F<=p;F++)l=F,t.TStringHelper.IndexOf.call({p:o,get:function(){return this.p.ShortDateFormat},set:function(t){this.p.ShortDateFormat=t}},i[l])>=0&&(o.DateSeparator=i[l]);var c=new Date("Jan 1, 1980 06:07:08 GMT+00:00");h="";h=""==e?navigator.language:e,a=c.toLocaleTimeString(h);for(var u=0,d=rtl.length(s)-1;u<=d;u++)l=u,t.TStringHelper.IndexOf.call({get:function(){return a},set:function(t){a=t}},s[l])>=0&&(o.TimeSeparator=s[l]);for(l=1;l<=7;l++)o.ShortDayNames[l-1]=t.TFormatSettings.GetLocaleShortDayName(l,e);for(l=1;l<=7;l++)o.LongDayNames[l-1]=t.TFormatSettings.GetLocaleLongDayName(l,e);for(l=1;l<=12;l++)o.ShortMonthNames[l-1]=t.TFormatSettings.GetLocaleShortMonthName(l,e);for(l=1;l<=12;l++)o.LongMonthNames[l-1]=t.TFormatSettings.GetLocaleLongMonthName(l,e);o.DecimalSeparator=t.TFormatSettings.GetLocaleDecimalSeparator(e);for(var S=0,C=rtl.length(n)-1;S<=C;S++)if(l=S,o.DecimalSeparator===n[l]){o.ThousandSeparator=r[l];break}return null!=t.TFormatSettings.InitLocaleHandler&&t.TFormatSettings.InitLocaleHandler(t.UpperCase(e),t.TFormatSettings.$clone(o)),o},this.Invariant=function(){var i=t.TFormatSettings.$new();return e.FInvariantCreated||(e.FInvariant.$assign(t.TFormatSettings.Create$1("EN-US")),e.FInvariant.CurrencyString="¤",e.FInvariant.CurrencyFormat=0,e.FInvariant.CurrencyDecimals=2,e.FInvariant.DateSeparator="/",e.FInvariant.TimeSeparator=":",e.FInvariant.ShortDateFormat="MM/dd/yyyy",e.FInvariant.LongDateFormat="dddd, dd MMMMM yyyy HH:mm:ss",e.FInvariant.TimeAMString="AM",e.FInvariant.TimePMString="PM",e.FInvariant.ShortTimeFormat="HH:mm",e.FInvariant.LongTimeFormat="HH:mm:ss",e.FInvariant.ShortMonthNames=e.DefaultShortMonthNames.slice(0),e.FInvariant.LongMonthNames=e.DefaultLongMonthNames.slice(0),e.FInvariant.ShortDayNames=e.DefaultShortDayNames.slice(0),e.FInvariant.LongDayNames=e.DefaultLongDayNames.slice(0),e.FInvariant.ThousandSeparator=",",e.FInvariant.DecimalSeparator=".",e.FInvariant.TwoDigitYearCenturyWindow=50,e.FInvariant.NegCurrFormat=0,e.FInvariantCreated=!0),i.$assign(e.FInvariant),i}}),!0),rtl.createClass(this,"Exception",pas.System.TObject,(function(){this.LogMessageOnCreate=!1,this.$init=function(){pas.System.TObject.$init.call(this),this.fMessage=""},this.Create$1=function(t){return this.fMessage=t,this.LogMessageOnCreate&&pas.System.Writeln("Created exception ",this.$classname," with message: ",t),this},this.CreateFmt=function(e,i){return this.Create$1(t.Format(e,i)),this}})),rtl.createClass(this,"EExternal",this.Exception,(function(){})),rtl.createClass(this,"EConvertError",this.Exception,(function(){})),rtl.createClass(this,"EIntError",this.EExternal,(function(){})),rtl.createClass(this,"ERangeError",this.EIntError,(function(){})),rtl.createClass(this,"EArgumentException",this.Exception,(function(){})),rtl.createClass(this,"EArgumentOutOfRangeException",this.EArgumentException,(function(){})),this.CharInSet=function(t,e){var i=!1,s=0;for(i=!1,s=rtl.length(e)-1;!i&&s>=0;)i=t===e[s],s-=1;return i},this.Trim=function(t){return t.replace(/^[\s\uFEFF\xA0\x00-\x1f]+/,"").replace(/[\s\uFEFF\xA0\x00-\x1f]+$/,"")},this.TrimLeft=function(t){return t.replace(/^[\s\uFEFF\xA0\x00-\x1f]+/,"")},this.UpperCase=function(t){return t.toUpperCase()},this.LowerCase=function(t){return t.toLowerCase()},this.CompareStr=function(t,e){var i,s=t.length,n=e.length;return s<=n?t<(i=e.substr(0,s))?-1:t>i?1:s<n?-1:0:(i=t.substr(0,n))<e?-1:1},this.CompareText=function(t,e){var i=t.toLowerCase(),s=e.toLowerCase();return i>s?1:i<s?-1:0},this.SameText=function(t,e){return t.toLowerCase()==e.toLowerCase()},this.Format=function(e,i){return t.Format$1(e,i,t.FormatSettings)},this.Format$1=function(i,s,n){var r="",o=0,a=0,l=0,h=0,F=0,p="",c="",u=0,d=0,S=0,C=!1,T=0;function m(){var t=0;function n(){var n=0,r=0;if(-1===t){for(a=o;o<=F&&i.charAt(o-1)<="9"&&i.charAt(o-1)>="0";)o+=1;if(o>F&&e.DoFormatError(1,i),"*"===i.charAt(o-1)){255===u?r=l:(r=u,u+=1),(o>a||r>rtl.length(s)-1)&&e.DoFormatError(1,i),l=r+1;var h=s[r].VType;0===h||19===h?t=s[r].VJSValue:e.DoFormatError(1,i),o+=1}else a<o?(pas.System.val(pas.System.Copy(i,a,o-a),{get:function(){return t},set:function(e){t=e}},{get:function(){return n},set:function(t){n=t}}),n>0&&e.DoFormatError(1,i)):t=-1}}return u=255,d=-1,S=-1,t=-1,o+=1,"%"===i.charAt(o-1)?"%":(":"!==i.charAt(o-1)?n():t=0,":"===i.charAt(o-1)&&(-1===t&&e.DoFormatError(2,i),u=t,t=-1,o+=1),"-"===i.charAt(o-1)?(C=!0,o+=1):C=!1,n(),-1!==t&&(d=t,t=-1),"."===i.charAt(o-1)&&(o+=1,n(),-1===t&&(t=0),S=t),pas.System.upcase(i.charAt(o-1)))}function g(t,n){var r=!1;return r=!1,l=(h=255===u?l:u)+1,h>rtl.length(s)-1||s[h].VType!==t?(n&&e.DoFormatError(3,i),l-=1,r):r=!0}for(r="",F=i.length,o=1,a=1,l=0;o<=F;){for(;o<=F&&"%"!==i.charAt(o-1);)o+=1;if(o>a&&(r+=pas.System.Copy(i,a,o-a)),o<F){var f=m();if("D"===f)(g(0,!1)||g(19,!0))&&(c=t.IntToStr(s[h].VJSValue)),d=Math.abs(d),u=S-c.length,"-"!==c.charAt(0)?c=pas.System.StringOfChar("0",u)+c:pas.System.Insert(pas.System.StringOfChar("0",u+1),{get:function(){return c},set:function(t){c=t}},2);else if("U"===f)g(0,!1)?c=t.IntToStr(s[h].VJSValue>>>0):g(19,!0)&&(c=t.IntToStr(s[h].VJSValue)),d=Math.abs(d),u=S-c.length,c=pas.System.StringOfChar("0",u)+c;else if("E"===f)g(12,!1)?c=t.FloatToStrF$1(s[h].VJSValue/1e4,2,3,S,n):g(3,!0)&&(c=t.FloatToStrF$1(s[h].VJSValue,2,3,S,n));else if("F"===f)g(12,!1)?c=t.FloatToStrF$1(s[h].VJSValue/1e4,0,9999,S,n):(g(0,!1)||g(3,!0))&&(c=t.FloatToStrF$1(s[h].VJSValue,0,9999,S,n));else if("G"===f)g(12,!1)?c=t.FloatToStrF$1(s[h].VJSValue/1e4,1,S,3,n):g(3,!0)&&(c=t.FloatToStrF$1(s[h].VJSValue,1,S,3,n));else if("N"===f)g(12,!1)?c=t.FloatToStrF$1(s[h].VJSValue/1e4,3,9999,S,n):g(3,!0)&&(c=t.FloatToStrF$1(s[h].VJSValue,3,9999,S,n));else if("M"===f)g(12,!1)?c=t.FloatToStrF$1(s[h].VJSValue/1e4,4,9999,S,n):g(3,!0)&&(c=t.FloatToStrF$1(s[h].VJSValue,4,9999,S,n));else if("S"===f)(g(18,!1)||g(9,!0))&&(p=s[h].VJSValue),u=p.length,-1!==S&&u>S&&(u=S),c=pas.System.Copy(p,1,u);else if("P"===f)g(0,!1)?c=t.IntToHex(s[h].VJSValue,8):g(0,!0)&&(c=t.IntToHex(s[h].VJSValue,16));else if("X"===f)if(g(0,!1)?(T=s[h].VJSValue,u=16):g(19,!0)&&(T=s[h].VJSValue,u=31),S>u)c=t.IntToHex(T,u);else{for(u=1;rtl.shl(1,4*u)<=T&&u<16;)u+=1;u>S&&(S=u),c=t.IntToHex(T,S)}else"%"===f&&(c="%");-1!==d&&c.length<d&&(C?c+=pas.System.StringOfChar(" ",d-c.length):c=pas.System.StringOfChar(" ",d-c.length)+c),r+=c}a=o+=1}return r};var i=rtl.createSet(null,65,90,null,97,122,95),s=rtl.unionSet(i,rtl.createSet(null,48,57));this.IsValidIdent=function(t,e,n){var r,o=!1,a=!1,l=0;if((r=t.length)<1)return!1;for(a=!0,o=!1,l=1;l<=r;){if(a){if(!(t.charCodeAt(l-1)in i))return o;a=!1}else if(e&&"."===t.charAt(l-1)){if(n){if(l>=r)return o;a=!0}}else if(!(t.charCodeAt(l-1)in s))return o;l+=1}return o=!0},this.TStringReplaceFlag={0:"rfReplaceAll",rfReplaceAll:0,1:"rfIgnoreCase",rfIgnoreCase:1},this.StringReplace=function(t,i,s,n){var r,o="";return o="",0 in n&&(o="g"),1 in n&&(o+="i"),r=i.replace(new RegExp(e.RESpecials,"g"),"\\$1"),t.replace(new RegExp(r,o),s)},this.IntToStr=function(t){return""+t},this.TryStrToInt=function(e,i){var s=!1,n=0;return(s=(s=t.TryStrToInt$1(e,{get:function(){return n},set:function(t){n=t}}))&&-2147483648<=n&&n<=2147483647)&&i.set(n),s},this.TryStrToInt$1=function(i,s){return e.IntTryStrToInt(i,s,t.FormatSettings.DecimalSeparator)},this.StrToInt=function(e){var i=0;if(!t.TryStrToInt$1(e,{get:function(){return i},set:function(t){i=t}}))throw t.EConvertError.$create("CreateFmt",[rtl.getResStr(pas.RTLConsts,"SErrInvalidInteger"),pas.System.VarRecs(18,e)]);return i},this.StrToInt64=function(e){var i=0;if(!t.TryStrToInt$1(e,{get:function(){return i},set:function(t){i=t}}))throw t.EConvertError.$create("CreateFmt",[rtl.getResStr(pas.RTLConsts,"SErrInvalidInteger"),pas.System.VarRecs(18,e)]);return i},this.IntToHex=function(e,i){var s="";for(s="",e<0&&e<0&&(e=4294967295+e+1),s=e.toString(16),s=t.UpperCase(s);s.length<i;)s="0"+s;return s},this.TFloatFormat={0:"ffFixed",ffFixed:0,1:"ffGeneral",ffGeneral:1,2:"ffExponent",ffExponent:2,3:"ffNumber",ffNumber:3,4:"ffCurrency",ffCurrency:4};this.FloatToDecimal=function(e,i,s){var n=t.TFloatRec.$new(),r="",o="",a=0,l=0,h=0,F=0,p=0,c=!1,u=!1;for(n.Negative=!1,n.Exponent=0,p=0;p<=19;p++)n.Digits[p]="0";if(0===e)return n;for(h=1,F=(r=e.toPrecision(21)).length;" "===r.charAt(h-1);)h+=1;if(n.Negative="-"===r.charAt(h-1),(n.Negative||"+"===r.charAt(h-1))&&(h+=1),F>=h+2){if("Inf"===(o=pas.System.Copy(r,h,3)))return n.Digits[0]="\0",n.Exponent=32767,n;if("Nan"===o)return n.Digits[0]="\0",n.Exponent=-32768,n}for(a=0,n.Exponent=0,u=!0,c=!1;F>=h&&"E"!==r.charAt(h-1);)"."===r.charAt(h-1)?u=!1:(u?(n.Exponent+=1,n.Digits[a]=r.charAt(h-1),"0"!==r.charAt(h-1)&&(c=!0)):n.Digits[a]=r.charAt(h-1),a+=1),h+=1;for((h+=1)<=F&&(pas.System.val$6(pas.System.Copy(r,h,F-h+1),{get:function(){return p},set:function(t){p=t}},{get:function(){return l},set:function(t){l=t}}),n.Exponent+=p),h=a,F=19;h<F;)n.Digits[h]="0",h+=1;if((h=s+n.Exponent<i?s+n.Exponent:i)>=F&&(h=F-1),0===h)n.Digits[0]>="5"?(n.Digits[0]="1",n.Digits[1]="\0",n.Exponent+=1):n.Digits[0]="\0";else if(h>0)if(n.Digits[h]>="5"){do{n.Digits[h]="\0",h-=1,n.Digits[h]="123456789:".charAt(t.StrToInt(n.Digits[h])+1-1)}while(!(0===h||n.Digits[h]<":"));":"===n.Digits[0]&&(n.Digits[0]="1",n.Exponent+=1)}else for(n.Digits[h]="0";h>-1&&"0"===n.Digits[h];)n.Digits[h]="\0",h-=1;else n.Digits[0]="\0";return"\0"!==n.Digits[0]||c||(n.Exponent=0,n.Negative=!1),n},this.FloatToStr=function(e){return t.FloatToStr$1(e,t.FormatSettings)},this.FloatToStr$1=function(e,i){return t.FloatToStrF$1(e,1,15,0,i)},this.FloatToStrF$1=function(t,i,s,n,r){var o,a,l="";a=r.DecimalSeparator,o=r.ThousandSeparator;var h=i;return 1===h?l=e.FormatGeneralFloat(t,s,a):2===h?l=e.FormatExponentFloat(t,s,n,a):0===h?l=e.FormatFixedFloat(t,n,a):3===h?l=e.FormatNumberFloat(t,n,a,o):4===h&&(l=e.FormatNumberCurrency(1e4*t,n,r)),4!==i&&l.length>1&&"-"===l.charAt(0)&&e.RemoveLeadingNegativeSign({get:function(){return l},set:function(t){l=t}},a,o),l},this.TryStrToFloat$2=function(e,i){return t.TryStrToFloat$3(e,i,t.FormatSettings)},this.TryStrToFloat$3=function(e,i,s){var n,r,o="";return o=e,""!==s.ThousandSeparator&&(o=t.StringReplace(o,s.ThousandSeparator,"",rtl.createSet(0))),"."!==s.DecimalSeparator&&(o=t.StringReplace(o,s.DecimalSeparator,".",{})),r=parseFloat(o),(n=!isNaN(r))&&i.set(rtl.getNumber(r)),n},this.StrToFloat=function(e){return t.StrToFloat$1(e,t.FormatSettings)},this.StrToFloat$1=function(e,i){var s=0;if(!t.TryStrToFloat$3(e,{get:function(){return s},set:function(t){s=t}},i))throw t.EConvertError.$create("CreateFmt",[rtl.getResStr(pas.RTLConsts,"SErrInvalidFloat"),pas.System.VarRecs(18,e)]);return s},this.FormatFloat=function(e,i){return t.FormatFloat$1(e,i,t.TFormatSettings.$clone(t.FormatSettings))};this.FormatFloat$1=function(e,i,s){var n="",r=0,o=t.TFloatRec.$new(),a="",l=0,h=!1,F=!1,p=0,c=0,u=0,d=0,S=0,C=0,T=0,m=0,g=0;function f(t){n+=t}function b(t){n+=t}function y(t){"\0"!==t&&(-1===(g-=1)?(b(s.DecimalSeparator),f(t)):(f(t),h&&g%3==0&&g>1&&b(s.ThousandSeparator)))}function L(){var t="";return t="\0",T<=C?(t=o.Digits[T],T+=1):g<=u?g-=1:t="0",t}function M(){if(0===m)y(L());else if(m<0)m+=1,g<=c?y("0"):g-=1;else{for(;m>0;)y(L()),m-=1;y(L())}}function E(e,i){var s="";return s=t.IntToStr(i),s=pas.System.StringOfChar("0",S-s.length)+s,i<0?s="-"+s:i>0&&"+"===e&&(s=e+s),s}var P=0,B=0,D="",N="",v=[],O=!1;for(v=rtl.arraySetLength(v,0,4),n="",a="",l=0,h=!1,F=!1,p=0,c=2147483647,u=0,d=0,S=0,C=-1,B=(r=i)>0?1:r<0?2:3,v[0]=0,((P=function(i){var s,n=0,r=0,o="",a="",l=!1;for(n=1,i.get()[1]=-1,i.get()[2]=-1,i.get()[3]=-1,l=!1,a="\0",r=1,s=e.length;r<=s;){var h=o=e.charAt(r-1);if(";"===h){if(!l){if(n>3)throw t.Exception.$create("Create$1",["Invalid float format"]);i.get()[n]=r,n+=1}}else'"'!==h&&"'"!==h||(l?l=o!==a:(l=!0,a=o));r+=1}return-1===i.get()[n]&&(i.get()[n]=s+1),n}({get:function(){return v},set:function(t){v=t}}))<B||v[B]-v[B-1]==0)&&(B=1),l=v[B]-v[B-1]-1,a=pas.System.Copy(e,v[B-1]+1,l),a=rtl.strSetLength(a,l),function(){var t,e=0,i="",n="",r=!1;for(t=a.length,e=1,r=!1,i="\0";e<=t;){if((n=a.charAt(e-1)).charCodeAt()in rtl.createSet(34,39))r?r=n!==i:(r=!0,i=n);else if(!r){var o=n;if("."===o)0===p&&(p=d+1);else if(","===o)h="\0"!==s.ThousandSeparator;else if("e"===o||"E"===o){if((e+=1)<t){if(n=a.charAt(e-1),F=n.charCodeAt()in rtl.createSet(45,43))for(;e<t&&"0"===a.charAt(e+1-1);)S+=1,e+=1;S>4&&(S=4)}}else"#"===o?d+=1:"0"===o&&(d<c&&(c=d+1),u=(d+=1)+1)}e+=1}0===p&&(p=d+1),(u=p-u)>0&&(u=0),(c=p-c)<0&&(c=0)}(),function(){var e=0,s=0;for(F?(s=d,e=9999):(s=18,e=d-p+1),o.$assign(t.FloatToDecimal(i,s,e)),g=p-1,F?m=0:(m=o.Exponent-(p-1))>=0&&(g=o.Exponent),C=-1;C<18&&"\0"!==o.Digits[C+1];)C+=1}(),(0===l||o.Exponent>=18&&!F||2047===o.Exponent||2048===o.Exponent)&&(a=r.toPrecision(15),n=a),P=1,T=0,N=" ",O=!1,o.Negative&&1===B&&f("-");P<=l;){if((D=a.charAt(P-1)).charCodeAt()in rtl.createSet(34,39))O?O=D!==N:(O=!0,N=D);else if(O)f(D);else{var I=D;if("0"===I||"#"===I)M();else if("."===I||","===I);else if("e"===I||"E"===I){if(f(D),(P+=1)<=a.length&&(D=a.charAt(P-1)).charCodeAt()in rtl.createSet(43,45))for(b(E(D,o.Exponent-p+1));P<l&&"0"===a.charAt(P+1-1);)P+=1}else f(D)}P+=1}return n},this.BoolToStr$1=function(t,e,i){return t?e:i},rtl.recNewT(this,"TTimeStamp",(function(){this.Time=0,this.Date=0,this.$eq=function(t){return this.Time===t.Time&&this.Date===t.Date},this.$assign=function(t){return this.Time=t.Time,this.Date=t.Date,this}})),this.TimeSeparator="",this.DateSeparator="",this.ShortDateFormat="",this.LongDateFormat="",this.ShortTimeFormat="",this.LongTimeFormat="",this.DecimalSeparator="",this.ThousandSeparator="",this.TimeAMString="",this.TimePMString="",this.HoursPerDay=24,this.MinsPerHour=60,this.SecsPerMin=60,this.MSecsPerSec=1e3,this.MinsPerDay=1440,this.SecsPerDay=86400,this.MSecsPerDay=864e5,this.MaxDateTime=2958465.99999999,this.DateDelta=693594,this.MonthDays$a$clone=function(t){var e=[];e.length=2;for(var i=0;i<2;i++)e[i]=t[i].slice(0);return e},this.MonthDays=[[31,28,31,30,31,30,31,31,30,31,30,31],[31,29,31,30,31,30,31,31,30,31,30,31]],this.ShortMonthNames=rtl.arraySetLength(null,"",12),this.LongMonthNames=rtl.arraySetLength(null,"",12),this.ShortDayNames=rtl.arraySetLength(null,"",7),this.LongDayNames=rtl.arraySetLength(null,"",7),this.FormatSettings=this.TFormatSettings.$new(),this.JSDateToDateTime=function(e){return t.EncodeDate(e.getFullYear(),e.getMonth()+1,e.getDate())+t.EncodeTime(e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())},this.DateTimeToTimeStamp=function(e){var i=t.TTimeStamp.$new(),s=0;return(s=864e5*e)<0?s-=.5:s+=.5,i.Time=pas.System.Trunc(Math.abs(pas.System.Trunc(s))%864e5),i.Date=693594+rtl.trunc(pas.System.Trunc(s)/864e5),i},this.TryEncodeDate=function(e,i,s,n){var r,o=0,a=0;return(r=e>0&&e<1e4&&i>=1&&i<=12&&s>0&&s<=t.MonthDays[+t.IsLeapYear(e)][i-1])&&(i>2?i-=3:(i+=9,e-=1),a=e-100*(o=rtl.trunc(e/100)),n.set((146097*o>>>2)+(1461*a>>>2)+rtl.trunc((153*i+2)/5)+s),n.set(n.get()-693900)),r},this.TryEncodeTime=function(t,e,i,s,n){var r;return(r=t<24&&e<60&&i<60&&s<1e3)&&n.set((36e5*t+6e4*e+1e3*i+s)/864e5),r},this.EncodeDate=function(e,i,s){var n=0;if(!t.TryEncodeDate(e,i,s,{get:function(){return n},set:function(t){n=t}}))throw t.EConvertError.$create("CreateFmt",["%s-%s-%s is not a valid date specification",pas.System.VarRecs(18,t.IntToStr(e),18,t.IntToStr(i),18,t.IntToStr(s))]);return n},this.EncodeTime=function(e,i,s,n){var r=0;if(!t.TryEncodeTime(e,i,s,n,{get:function(){return r},set:function(t){r=t}}))throw t.EConvertError.$create("CreateFmt",["%s:%s:%s.%s is not a valid time specification",pas.System.VarRecs(18,t.IntToStr(e),18,t.IntToStr(i),18,t.IntToStr(s),18,t.IntToStr(n))]);return r},this.DecodeDate=function(e,i,s,n){var r=0,o=0,a=0,l=0;e<=-693594?(i.set(0),s.set(0),n.set(0)):(e>0?e+=1/1728e5:e-=1/1728e5,e>t.MaxDateTime&&(e=t.MaxDateTime),l=rtl.shl(pas.System.Trunc(e)+693900,2)-1,l-=146097*(r=rtl.trunc(l/146097)),o=rtl.lw(l>>>2),l=rtl.trunc((rtl.lw(o<<2)+3)/1461),o=rtl.lw(rtl.lw(o<<2)+7-1461*l>>>2),a=rtl.trunc((5*o-3)/153),o=rtl.trunc((5*o+2-153*a)/5),r=100*r+l,a<10?a+=3:(a-=9,r+=1),i.set(r),s.set(a),n.set(o))},this.DecodeTime=function(e,i,s,n,r){var o=0;o=t.DateTimeToTimeStamp(e).Time,i.set(rtl.trunc(o/36e5)),o%=36e5,s.set(rtl.trunc(o/6e4)),o%=6e4,n.set(rtl.trunc(o/1e3)),o%=1e3,r.set(o)},this.Now=function(){return t.JSDateToDateTime(new Date)},this.IsLeapYear=function(t){return t%4==0&&(t%100!=0||t%400==0)},this.CurrencyFormat=0,this.NegCurrFormat=0,this.CurrencyDecimals=0,this.CurrencyString="",this.Supports$1=function(t,e,i){return null!==t&&0===t.QueryInterface(e,i)},this.Supports$3=function(t,e,i){return null!==t&&t.GetInterfaceByStr(e,i)},this.GUIDToString=function(t){return rtl.guidrToStr(t)},this.CreateGUID=function(t){function e(t){var e=0;for(e=pas.System.Random(256);t>1;)e=256*e+pas.System.Random(256),t-=1;return e}var i=0;for(0,t.D1=e(4),t.D2=e(2),t.D3=e(2),i=0;i<=7;i++)t.D4[i]=e(1);return 0},rtl.createHelper(this,"TGuidHelper",null,(function(){this.NewGuid=function(){var e=pas.System.TGuid.$new();return t.CreateGUID(e),e},this.ToString=function(e){var i="";return i=t.GUIDToString(this),e&&(i=pas.System.Copy(i,2,i.length-2)),i}})),rtl.createHelper(this,"TStringHelper",null,(function(){this.Empty="",this.GetLength=function(){return this.get().length},this.LowerCase=function(e){return t.LowerCase(e)},this.UpperCase=function(e){return t.UpperCase(e)},this.IndexOf=function(e){return t.TStringHelper.IndexOf$4.call(this,e,0,t.TStringHelper.GetLength.call(this))},this.IndexOf$4=function(t,e,i){var s,n=0;return s=pas.System.Copy(this.get(),e+1,i),-1!==(n=pas.System.Pos(t,s)-1)&&(n+=e),n},this.Substring=function(e){return t.TStringHelper.Substring$1.call(this,e,t.TStringHelper.GetLength.call(this)-e)},this.Substring$1=function(t,e){return pas.System.Copy(this.get(),t+1,e)},this.ToLower=function(){return t.TStringHelper.LowerCase(this.get())},this.ToUpper=function(){return t.TStringHelper.UpperCase(this.get())}})),rtl.createHelper(this,"TDoubleHelper",null,(function(){this.ToString$3=function(){return t.FloatToStr(this.get())}})),rtl.createHelper(this,"TIntegerHelper",null,(function(){this.ToString$1=function(){return t.IntToStr(this.get())}})),t.$implcode=function(){e.DefaultShortMonthNames=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],e.DefaultLongMonthNames=["January","February","March","April","May","June","July","August","September","October","November","December"],e.DefaultShortDayNames=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],e.DefaultLongDayNames=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],e.FInvariant=t.TFormatSettings.$new(),e.FInvariantCreated=!1,e.feInvalidFormat=1,e.feMissingArgument=2,e.feInvalidArgIndex=3,e.DoFormatError=function(e,i){var s=e;if(1===s)throw t.EConvertError.$create("CreateFmt",[rtl.getResStr(pas.RTLConsts,"SInvalidFormat"),pas.System.VarRecs(18,i)]);if(2===s)throw t.EConvertError.$create("CreateFmt",[rtl.getResStr(pas.RTLConsts,"SArgumentMissing"),pas.System.VarRecs(18,i)]);if(3===s)throw t.EConvertError.$create("CreateFmt",[rtl.getResStr(pas.RTLConsts,"SInvalidArgIndex"),pas.System.VarRecs(18,i)])},e.maxdigits=15,e.ReplaceDecimalSep=function(t,e){var i;return(i=pas.System.Pos(".",t))>0?pas.System.Copy(t,1,i-1)+e+pas.System.Copy(t,i+1,t.length-i):t},e.FormatGeneralFloat=function(i,s,n){var r="",o=0,a=0,l=0,h=0;if((-1===s||s>15)&&(s=15),r=rtl.floatToStr(i,s+7),r=t.TrimLeft(r),0===(o=pas.System.Pos(".",r)))return r;if(0===(a=pas.System.Pos("E",r)))return r=e.ReplaceDecimalSep(r,n);for(l=a+2,h=0;l<=r.length;)h=10*h+r.charCodeAt(l-1)-48,l+=1;if("-"===r.charAt(a+1-1)&&(h=-h),o+h<a&&h>-6){if(r=rtl.strSetLength(r,a-1),h>=0){for(var F=0,p=h-1;F<=p;F++)l=F,r=rtl.setCharAt(r,o-1,r.charAt(o+1-1)),o+=1;for(r=rtl.setCharAt(r,o-1,"."),o=1,"-"===r.charAt(o-1)&&(o+=1);"0"===r.charAt(o-1)&&o<r.length&&pas.System.Copy(r,o+1,n.length)!==n;)pas.System.Delete({get:function(){return r},set:function(t){r=t}},o,1)}else pas.System.Insert(pas.System.Copy("00000",1,-h),{get:function(){return r},set:function(t){r=t}},o-1),r=rtl.setCharAt(r,o-h-1,r.charAt(o-h-1-1)),r=rtl.setCharAt(r,o-1,"."),-1!==h&&(r=rtl.setCharAt(r,o-h-1-1,"0"));for(l=r.length;l>0&&"0"===r.charAt(l-1);)l-=1;"."===r.charAt(l-1)&&(l-=1),r=0===l||1===l&&"-"===r.charAt(0)?"0":rtl.strSetLength(r,l)}else{for(;"0"===r.charAt(a-1-1);)pas.System.Delete({get:function(){return r},set:function(t){r=t}},a-1,1),a-=1;for(r.charAt(a-1-1)===n&&(pas.System.Delete({get:function(){return r},set:function(t){r=t}},a-1,1),a-=1),"+"===r.charAt(a+1-1)?pas.System.Delete({get:function(){return r},set:function(t){r=t}},a+1,1):a+=1;"0"===r.charAt(a+1-1);)pas.System.Delete({get:function(){return r},set:function(t){r=t}},a+1,1)}return r=e.ReplaceDecimalSep(r,n)},e.FormatExponentFloat=function(i,s,n,r){var o="",a=0;for(r=t.FormatSettings.DecimalSeparator,(-1===s||s>15)&&(s=15),o=rtl.floatToStr(i,s+7);" "===o.charAt(0);)pas.System.Delete({get:function(){return o},set:function(t){o=t}},1,1);if(0===(a=pas.System.Pos("E",o)))return o=e.ReplaceDecimalSep(o,r);if(a+=2,n>4&&(n=4),(n=o.length-a-n+1)<0)pas.System.Insert(pas.System.Copy("0000",1,-n),{get:function(){return o},set:function(t){o=t}},a);else for(;n>0&&"0"===o.charAt(a-1);){if(pas.System.Delete({get:function(){return o},set:function(t){o=t}},a,1),a>o.length){pas.System.Delete({get:function(){return o},set:function(t){o=t}},a-2,2);break}n-=1}return o=e.ReplaceDecimalSep(o,r)},e.FormatFixedFloat=function(t,i,s){var n="";return-1===i?i=2:i>18&&(i=18),""!==(n=rtl.floatToStr(t,0,i))&&" "===n.charAt(0)&&pas.System.Delete({get:function(){return n},set:function(t){n=t}},1,1),n=e.ReplaceDecimalSep(n,s)},e.FormatNumberFloat=function(t,i,s,n){var r="",o=0;if(-1===i?i=2:i>15&&(i=15),""!==(r=rtl.floatToStr(t,0,i))&&" "===r.charAt(0)&&pas.System.Delete({get:function(){return r},set:function(t){r=t}},1,1),(o=pas.System.Pos(".",r))<=0&&(o=r.length+1),r=e.ReplaceDecimalSep(r,s),o-=3,""!==n&&"\0"!==n)for(;o>1;)"-"!==r.charAt(o-1-1)&&pas.System.Insert(n,{get:function(){return r},set:function(t){r=t}},o),o-=3;return r},e.RemoveLeadingNegativeSign=function(t,e,i){var s,n=!1,r=0;n=!1,s=i;for(var o=2,a=t.get().length;o<=a&&(r=o,n=t.get().charCodeAt(r-1)in rtl.createSet(48,e.charCodeAt(),69,43)||t.get().charAt(r-1)===s);o++);return n&&"-"===t.get().charAt(0)&&pas.System.Delete(t,1,1),n},e.FormatNumberCurrency=function(t,i,s){var n,r,o,a,l="",h=0;if(o=s.DecimalSeparator,a=s.ThousandSeparator,r=s.CurrencyString,-1===i?i=s.CurrencyDecimals:i>18&&(i=18),(n="-"===(l=rtl.floatToStr(t/1e4,0,i)).charAt(0))&&pas.System.Delete({get:function(){return l},set:function(t){l=t}},1,1),h=pas.System.Pos(".",l),""!==a)for(0!==h?l=e.ReplaceDecimalSep(l,o):h=l.length+1,h-=3;h>1;)pas.System.Insert(a,{get:function(){return l},set:function(t){l=t}},h),h-=3;if(n&&e.RemoveLeadingNegativeSign({get:function(){return l},set:function(t){l=t}},o,a),n){var F=s.NegCurrFormat;0===F?l="("+r+l+")":1===F?l="-"+r+l:2===F?l=r+"-"+l:3===F?l=r+l+"-":4===F?l="("+l+r+")":5===F?l="-"+l+r:6===F?l=l+"-"+r:7===F?l=l+r+"-":8===F?l="-"+l+" "+r:9===F?l="-"+r+" "+l:10===F?l=l+" "+r+"-":11===F?l=r+" "+l+"-":12===F?l=r+" -"+l:13===F?l=l+"- "+r:14===F?l="("+r+" "+l+")":15===F&&(l="("+l+" "+r+")")}else{var p=s.CurrencyFormat;0===p?l=r+l:1===p?l+=r:2===p?l=r+" "+l:3===p&&(l=l+" "+r)}return l},e.RESpecials="([\\$\\+\\[\\]\\(\\)\\\\\\.\\*\\^\\?\\|])",e.IntTryStrToInt=function(e,i,s){var n,r,o=10,a="";if(a=e,0!==pas.System.Pos(s,a)||0!==pas.System.Pos(".",a))return!1;var l=pas.System.Copy(a,1,1);return"$"===l?o=16:"&"===l?o=8:"%"===l&&(o=2),(16===o||0===pas.System.Pos("e",t.LowerCase(a)))&&(10!==o&&pas.System.Delete({get:function(){return a},set:function(t){a=t}},1,1),r=parseInt(a,o),(n=!isNaN(r))&&i.set(rtl.trunc(r)),n)},e.InitGlobalFormatSettings=function(){t.FormatSettings.$assign(t.TFormatSettings.Create()),t.TimeSeparator=t.FormatSettings.TimeSeparator,t.DateSeparator=t.FormatSettings.DateSeparator,t.ShortDateFormat=t.FormatSettings.ShortDateFormat,t.LongDateFormat=t.FormatSettings.LongDateFormat,t.ShortTimeFormat=t.FormatSettings.ShortTimeFormat,t.LongTimeFormat=t.FormatSettings.LongTimeFormat,t.DecimalSeparator=t.FormatSettings.DecimalSeparator,t.ThousandSeparator=t.FormatSettings.ThousandSeparator,t.TimeAMString=t.FormatSettings.TimeAMString,t.TimePMString=t.FormatSettings.TimePMString,t.CurrencyFormat=t.FormatSettings.CurrencyFormat,t.NegCurrFormat=t.FormatSettings.NegCurrFormat,t.CurrencyDecimals=t.FormatSettings.CurrencyDecimals,t.CurrencyString=t.FormatSettings.CurrencyString}},t.$init=function(){e.InitGlobalFormatSettings(),t.ShortMonthNames=e.DefaultShortMonthNames.slice(0),t.LongMonthNames=e.DefaultLongMonthNames.slice(0),t.ShortDayNames=e.DefaultShortDayNames.slice(0),t.LongDayNames=e.DefaultLongDayNames.slice(0)}}),[]),rtl.module("TypInfo",["System","SysUtils","Types","RTLConsts","JS"],(function(){"use strict";var t=this,e=t.$impl;this.pfGetFunction=1,this.pfSetProcedure=2,this.pfHasIndex=16,rtl.createClass(this,"EPropertyError",pas.SysUtils.Exception,(function(){})),this.GetPropList=function(t,e,i){var s=[];var n=null,r=0,o=null,a="",l=null;for(s=[],n=t,o=new Object;null!==n;){for(var h=0,F=n.properties.length-1;h<=F;h++)r=h,a=n.properties[r],o.hasOwnProperty(a)||(l=n.members[a]).typeinfo.kind in e&&(s.push(l),o[a]=!0);if(!rtl.isExt(n,rtl.tTypeInfoClass))break;n=n.ancestor}return i&&s.sort((function(t,e){return t.name<e.name?-1:t.name>e.name?1:0})),s},this.GetPropInfo=function(t,e){var i=null,s=null,n=0,r=null;for(r=t;null!==r;){if(s=r.members[e],rtl.isExt(s,rtl.tTypeMemberProperty))return s;if(!rtl.isExt(r,rtl.tTypeInfoClass))break;r=r.ancestor}i=null;do{for(var o=0,a=t.properties.length-1;o<=a;o++)if(n=o,0===pas.SysUtils.CompareText(e,t.properties[n]))return s=t.members[t.properties[n]],rtl.isExt(s,rtl.tTypeMemberProperty)&&(i=s),i;if(!rtl.isExt(t,rtl.tTypeInfoClass))break;t=t.ancestor}while(null!==t);return i},this.GetPropInfo$1=function(e,i,s){var n=null;return n=t.GetPropInfo(e,i),rtl.neSet(s,{})&&null!==n&&!(n.typeinfo.kind in s)&&(n=null),n},this.GetPropInfo$2=function(e,i){return t.GetPropInfo$1(e.$rtti,i,{})},this.FindPropInfo=function(e,i){var s;if(null===(s=t.GetPropInfo(e.$rtti,i)))throw t.EPropertyError.$create("CreateFmt",[rtl.getResStr(pas.RTLConsts,"SErrPropertyNotFound"),pas.System.VarRecs(18,i)]);return s},this.GetJSValueProp$1=function(i,s){var n=void 0,r=e.GetPropGetterKind(s);if(0===r)throw t.EPropertyError.$create("CreateFmt",[rtl.getResStr(pas.RTLConsts,"SCantReadPropertyS"),pas.System.VarRecs(18,s.name)]);if(1===r)n=i[s.getter];else if(2===r)n=(16&s.flags)>0?i[s.getter](s.index):i[s.getter]();else if(3===r)throw t.EPropertyError.$create("CreateFmt",[rtl.getResStr(pas.RTLConsts,"SIndexedPropertyNeedsParams"),pas.System.VarRecs(18,s.name)]);return n},this.GetJSValueProp$3=function(e,i){return t.GetJSValueProp$1(e,i)},this.SetJSValueProp$1=function(i,s,n){var r=e.GetPropSetterKind(s);if(0===r)throw t.EPropertyError.$create("CreateFmt",[rtl.getResStr(pas.RTLConsts,"SCantWritePropertyS"),pas.System.VarRecs(18,s.name)]);if(1===r)i[s.setter]=n;else if(2===r)(16&s.flags)>0?i[s.setter](s.index,n):i[s.setter](n);else if(3===r)throw t.EPropertyError.$create("CreateFmt",[rtl.getResStr(pas.RTLConsts,"SIndexedPropertyNeedsParams"),pas.System.VarRecs(18,s.name)])},this.SetJSValueProp$3=function(e,i,s){t.SetJSValueProp$1(e,i,s)},this.GetOrdProp$1=function(e,i){var s=0,n="",r=0,o=void 0;if(5===i.typeinfo.kind)for(n in s=0,t.GetJSValueProp$3(e,i))(r=parseInt(n,10))<32&&(s+=1<<r);else 2===i.typeinfo.kind?(o=t.GetJSValueProp$3(e,i),s=rtl.isNumber(o)?rtl.trunc(o):""===(n=""+o)?0:n.charCodeAt(0)):s=rtl.trunc(t.GetJSValueProp$3(e,i));return s},this.SetOrdProp=function(e,i,s){t.SetOrdProp$1(e,t.FindPropInfo(e,i),s)},this.SetOrdProp$1=function(e,i,s){var n=null,r=0;if(5===i.typeinfo.kind){for(n=new Object,r=0;r<=31;r++)(1<<r&s)>0&&(n[""+r]=!0);t.SetJSValueProp$3(e,i,n)}else 2===i.typeinfo.kind?t.SetJSValueProp$3(e,i,String.fromCharCode(s)):t.SetJSValueProp$3(e,i,s)},this.GetStrProp$1=function(e,i){return""+t.GetJSValueProp$3(e,i)},this.SetStrProp$1=function(e,i,s){t.SetJSValueProp$3(e,i,s)},this.GetFloatProp$1=function(e,i){return rtl.getNumber(t.GetJSValueProp$3(e,i))},this.SetFloatProp$1=function(e,i,s){t.SetJSValueProp$3(e,i,s)},this.GetObjectProp=function(e,i){return t.GetObjectProp$2(e,t.FindPropInfo(e,i))},this.GetObjectProp$2=function(e,i){return t.GetObjectProp$3(e,i,null)},this.GetObjectProp$3=function(e,i,s){var n=null;return n=rtl.getObject(t.GetJSValueProp$3(e,i)),null===s||n.$class.InheritsFrom(s)?n:null},this.SetObjectProp=function(e,i,s){t.SetObjectProp$1(e,t.FindPropInfo(e,i),s)},this.SetObjectProp$1=function(e,i,s){t.SetJSValueProp$3(e,i,s)},this.GetMethodProp=function(e,i){var s,n,r=pas.System.TMethod.$new();return r.Code=null,r.Data=null,s=t.GetJSValueProp$3(e,i),rtl.isFunction(s)?(r.Data=s.scope,n=s.fn,rtl.isString(n)?null!==r.Data?r.Code=r.Data[""+n]:r.Code=s:r.Code=n,r):r},this.SetMethodProp=function(e,i,s){var n,r=null;r=null===(n=s.Code)?null:rtl.isFunction(n)?n.scope===s.Data&&(rtl.isFunction(n.fn)||rtl.isString(n.fn))?n:rtl.isString(n.fn)?rtl.createCallback(s.Data,""+n.fn):rtl.createCallback(s.Data,n):rtl.createCallback(s.Data,n),t.SetJSValueProp$3(e,i,r)},this.SetMethodProp$1=function(e,i,s){t.SetMethodProp(e,t.FindPropInfo(e,i),s)},t.$implcode=function(){e.TGetterKind={0:"gkNone",gkNone:0,1:"gkField",gkField:1,2:"gkFunction",gkFunction:2,3:"gkFunctionWithParams",gkFunctionWithParams:3},e.GetPropGetterKind=function(t){return""===t.getter?0:(1&t.flags)>0?rtl.length(t.params)>0?3:2:1},e.TSetterKind={0:"skNone",skNone:0,1:"skField",skField:1,2:"skProcedure",skProcedure:2,3:"skProcedureWithParams",skProcedureWithParams:3},e.GetPropSetterKind=function(t){return""===t.setter?0:(2&t.flags)>0?rtl.length(t.params)>0?3:2:1}}}),[]),rtl.module("Web",["System","Types","JS"],(function(){"use strict";rtl.createClassExt(this,"TJSFocusEvent",Event,"",(function(){this.$init=function(){},this.$final=function(){}})),this.$rtti.$ExtClass("TJSXMLHttpRequest",{ancestor:this.$rtti.TJSXMLHttpRequestEventTarget,jsclass:"XMLHttpRequest"}),rtl.createClass(this,"TJSKeyNames",pas.System.TObject,(function(){this.Alt="Alt",this.CapsLock="CapsLock",this.Control="Control",this.Shift="Shift",this.Enter="Enter",this.Tab="Tab",this.ArrowDown="ArrowDown",this.ArrowLeft="ArrowLeft",this.ArrowRight="ArrowRight",this.ArrowUp="ArrowUp",this._End="End",this.Home="Home",this.PageDown="PageDown",this.PageUp="PageUp",this.BackSpace="Backspace",this.Delete="Delete",this.Insert="Insert",this.Escape="Escape",this.Pause="Pause",this.F1="F1",this.F2="F2",this.F3="F3",this.F4="F4",this.F5="F5",this.F6="F6",this.F7="F7",this.F8="F8",this.F9="F9",this.F10="F10",this.F11="F11",this.F12="F12",this.F13="F13",this.F14="F14",this.F15="F15",this.F16="F16",this.F17="F17",this.F18="F18",this.F19="F19",this.F20="F20"}))})),rtl.module("Classes",["System","RTLConsts","Types","SysUtils","JS","TypInfo"],(function(){"use strict";var t=this,e=t.$impl;this.$rtti.$MethodVar("TNotifyEvent",{procsig:rtl.newTIProcSig([["Sender",pas.System.$rtti.TObject]]),methodkind:0}),rtl.createClass(this,"EStreamError",pas.SysUtils.Exception,(function(){})),rtl.createClass(this,"EListError",pas.SysUtils.Exception,(function(){})),rtl.createClass(this,"EStringListError",this.EListError,(function(){})),rtl.createClass(this,"EComponentError",pas.SysUtils.Exception,(function(){})),this.TAlignment={0:"taLeftJustify",taLeftJustify:0,1:"taRightJustify",taRightJustify:1,2:"taCenter",taCenter:2},this.$rtti.$Enum("TAlignment",{minvalue:0,maxvalue:2,ordtype:1,enumtype:this.TAlignment}),rtl.createClass(this,"TFPList",pas.System.TObject,(function(){this.$init=function(){pas.System.TObject.$init.call(this),this.FList=[],this.FCount=0,this.FCapacity=0},this.$final=function(){this.FList=void 0,pas.System.TObject.$final.call(this)},this.Get=function(t){return(t<0||t>=this.FCount)&&this.RaiseIndexError(t),this.FList[t]},this.Put=function(t,e){(t<0||t>=this.FCount)&&this.RaiseIndexError(t),this.FList[t]=e},this.SetCapacity=function(t){t<this.FCount&&this.$class.Error(rtl.getResStr(pas.RTLConsts,"SListCapacityError"),""+t),t!==this.FCapacity&&(this.FList=rtl.arraySetLength(this.FList,void 0,t),this.FCapacity=t)},this.SetCount=function(t){t<0&&this.$class.Error(rtl.getResStr(pas.RTLConsts,"SListCountError"),""+t),t>this.FCount&&t>this.FCapacity&&this.SetCapacity(t),this.FCount=t},this.RaiseIndexError=function(t){this.$class.Error(rtl.getResStr(pas.RTLConsts,"SListIndexError"),""+t)},this.Destroy=function(){this.Clear(),pas.System.TObject.Destroy.call(this)},this.Add=function(t){var e;return this.FCount===this.FCapacity&&this.Expand(),this.FList[this.FCount]=t,e=this.FCount,this.FCount+=1,e},this.Clear=function(){rtl.length(this.FList)>0&&(this.SetCount(0),this.SetCapacity(0))},this.Delete=function(t){(t<0||t>=this.FCount)&&this.$class.Error(rtl.getResStr(pas.RTLConsts,"SListIndexError"),""+t),this.FCount=this.FCount-1,this.FList.splice(t,1),this.FCapacity-=1},this.Error=function(e,i){throw t.EListError.$create("CreateFmt",[e,pas.System.VarRecs(18,i)])},this.Expand=function(){var t=0;return this.FCount<this.FCapacity||(t=4,this.FCapacity>3&&(t+=4),this.FCapacity>8&&(t+=8),this.FCapacity>127&&(t+=this.FCapacity>>>2),this.SetCapacity(this.FCapacity+t),this),this},this.IndexOf=function(t){var e,i=0;for(i=0,e=this.FCount;i<e&&this.FList[i]!=t;)i+=1;return i>=e&&(i=-1),i},this.IndexOfItem=function(t,e){var i=0;if(0===e)i=this.IndexOf(t);else for(i=this.FCount-1;i>=0&&this.FList[i]!=t;)i-=1;return i},this.Insert=function(t,e){(t<0||t>this.FCount)&&this.$class.Error(rtl.getResStr(pas.RTLConsts,"SListIndexError"),""+t),this.FList.splice(t,0,e),this.FCapacity+=1,this.FCount+=1},this.Last=function(){return 0===this.FCount?null:this.Get(this.FCount-1)},this.Remove=function(t){var e;return-1!==(e=this.IndexOf(t))&&this.Delete(e),e},this.Sort=function(t){rtl.length(this.FList)>0&&!(this.FCount<2)&&e.QuickSort(rtl.arrayRef(this.FList),0,this.FCount-1,(function(e,i){return t(e,i)}))}})),this.TListNotification={0:"lnAdded",lnAdded:0,1:"lnExtracted",lnExtracted:1,2:"lnDeleted",lnDeleted:2},this.$rtti.$Class("TList"),rtl.createClass(this,"TListEnumerator",pas.System.TObject,(function(){this.$init=function(){pas.System.TObject.$init.call(this),this.FList=null,this.FPosition=0},this.$final=function(){this.FList=void 0,pas.System.TObject.$final.call(this)},this.Create$1=function(t){return pas.System.TObject.Create.call(this),this.FList=t,this.FPosition=-1,this},this.GetCurrent=function(){return this.FList.Get(this.FPosition)},this.MoveNext=function(){return this.FPosition+=1,this.FPosition<this.FList.GetCount()}})),rtl.createClass(this,"TList",pas.System.TObject,(function(){this.$init=function(){pas.System.TObject.$init.call(this),this.FList=null},this.$final=function(){this.FList=void 0,pas.System.TObject.$final.call(this)},this.Get=function(t){return this.FList.Get(t)},this.Put=function(t,e){var i;i=this.Get(t),this.FList.Put(t,e),pas.System.Assigned(i)&&this.Notify(i,2),pas.System.Assigned(e)&&this.Notify(e,0)},this.Notify=function(t,e){pas.System.Assigned(t)},this.SetCount=function(t){if(t<this.FList.FCount)for(;this.FList.FCount>t;)this.Delete(this.FList.FCount-1);else this.FList.SetCount(t)},this.GetCount=function(){return this.FList.FCount},this.Create$1=function(){return pas.System.TObject.Create.call(this),this.FList=t.TFPList.$create("Create"),this},this.Destroy=function(){null!=this.FList&&this.Clear(),pas.SysUtils.FreeAndNil({p:this,get:function(){return this.p.FList},set:function(t){this.p.FList=t}})},this.Add=function(t){var e;return e=this.FList.Add(t),pas.System.Assigned(t)&&this.Notify(t,0),e},this.Clear=function(){for(;this.FList.FCount>0;)this.Delete(this.GetCount()-1)},this.Delete=function(t){var e;e=this.FList.Get(t),this.FList.Delete(t),pas.System.Assigned(e)&&this.Notify(e,2)},this.GetEnumerator=function(){return t.TListEnumerator.$create("Create$1",[this])},this.IndexOf=function(t){return this.FList.IndexOf(t)},this.Insert=function(t,e){this.FList.Insert(t,e),pas.System.Assigned(e)&&this.Notify(e,0)},this.Remove=function(t){var e;return-1!==(e=this.IndexOf(t))&&this.Delete(e),e},this.Sort=function(t){this.FList.Sort(t)}})),rtl.createClass(this,"TPersistent",pas.System.TObject,(function(){this.AssignError=function(t){var e="";throw e=null!==t?t.$classname:"Nil",pas.SysUtils.EConvertError.$create("Create$1",["Cannot assign a "+e+" to a "+this.$classname+"."])},this.AssignTo=function(t){t.AssignError(this)},this.Assign=function(t){null!==t?t.AssignTo(this):this.AssignError(null)},this.SetEvent=function(t,e,i){this.SetEvent$1(this,t,e,i)},this.SetEvent$1=function(t,e,i,s){var n=pas.System.TMethod.$new();if(n.Code=e.$class.MethodAddress(s),null===n.Code)throw pas.SysUtils.Exception.$create("Create$1",[e.$classname+' has no published method "'+s+'"']);n.Data=e,pas.TypInfo.SetMethodProp$1(t,i,n)}})),this.$rtti.$Class("TStrings"),rtl.createClass(this,"TStringsEnumerator",pas.System.TObject,(function(){this.$init=function(){pas.System.TObject.$init.call(this),this.FStrings=null,this.FPosition=0},this.$final=function(){this.FStrings=void 0,pas.System.TObject.$final.call(this)},this.Create$1=function(t){return pas.System.TObject.Create.call(this),this.FStrings=t,this.FPosition=-1,this},this.GetCurrent=function(){return this.FStrings.Get(this.FPosition)},this.MoveNext=function(){return this.FPosition+=1,this.FPosition<this.FStrings.GetCount()}})),rtl.createClass(this,"TStrings",this.TPersistent,(function(){this.$init=function(){t.TPersistent.$init.call(this),this.FSpecialCharsInited=!1,this.FAlwaysQuote=!1,this.FQuoteChar="",this.FDelimiter="",this.FNameValueSeparator="",this.FUpdateCount=0,this.FLBS=0,this.FSkipLastLineBreak=!1,this.FStrictDelimiter=!1,this.FLineBreak=""},this.GetName=function(t){var e="",i="";return this.GetNameValue(t,{get:function(){return e},set:function(t){e=t}},{get:function(){return i},set:function(t){i=t}}),e},this.GetValue=function(t){var e,i="",s="";return i="",-1!==(e=this.IndexOfName(t))&&this.GetNameValue(e,{get:function(){return s},set:function(t){s=t}},{get:function(){return i},set:function(t){i=t}}),i},this.SetDelimiter=function(t){this.CheckSpecialChars(),this.FDelimiter=t},this.DoSetTextStr=function(t,e){var i="",s=0;try{for(this.BeginUpdate(),e&&this.Clear(),s=1;this.GetNextLinebreak(t,{get:function(){return i},set:function(t){i=t}},{get:function(){return s},set:function(t){s=t}});)this.Add(i)}finally{this.EndUpdate()}},this.GetNameValueSeparator=function(){return this.CheckSpecialChars(),this.FNameValueSeparator},this.SetLineBreak=function(t){this.CheckSpecialChars(),this.FLineBreak=t},this.GetSkipLastLineBreak=function(){return this.CheckSpecialChars(),this.FSkipLastLineBreak},this.SetSkipLastLineBreak=function(t){this.CheckSpecialChars(),this.FSkipLastLineBreak=t},this.Error=function(e,i){throw t.EStringListError.$create("CreateFmt",[e,pas.System.VarRecs(18,pas.SysUtils.IntToStr(i))])},this.GetCapacity=function(){return this.GetCount()},this.GetObject=function(t){return null,null},this.GetTextStr=function(){var t="",e=0,i="";if(this.CheckSpecialChars(),this.FLineBreak!==pas.System.sLineBreak)i=this.FLineBreak;else{var s=this.FLBS;0===s?i="\n":1===s?i="\r\n":2===s&&(i="\r")}t="";for(var n=0,r=this.GetCount()-1;n<=r;n++)e=n,t+=this.Get(e),(e<this.GetCount()-1||!this.GetSkipLastLineBreak())&&(t+=i);return t},this.PutObject=function(t,e){},this.SetTextStr=function(t){this.CheckSpecialChars(),this.DoSetTextStr(t,!0)},this.SetUpdateState=function(t){},this.DoCompareText=function(t,e){return pas.SysUtils.CompareText(t,e)},this.SetDelimitedText=function(t){var e=0,i=0,s=!1;this.CheckSpecialChars(),this.BeginUpdate(),e=1,i=1,s=!1;try{if(this.Clear(),this.FStrictDelimiter)for(;e<=t.length;){if(s&&e<=t.length&&t.charAt(e-1)===this.FDelimiter&&(e+=1),e<=t.length)if(t.charAt(e-1)===this.FQuoteChar){for(i=e+1;i<=t.length&&(t.charAt(i-1)!==this.FQuoteChar||i+1<=t.length&&t.charAt(i+1-1)===this.FQuoteChar);)i<=t.length&&t.charAt(i-1)===this.FQuoteChar?i+=2:i+=1;this.Add(pas.SysUtils.StringReplace(pas.System.Copy(t,e+1,i-e-1),this.FQuoteChar+this.FQuoteChar,this.FQuoteChar,rtl.createSet(0))),e=i+1}else{for(i=e;i<=t.length&&t.charAt(i-1)!==this.FDelimiter;)i+=1;this.Add(pas.System.Copy(t,e,i-e)),e=i}else s&&this.Add("");s=!0}else for(;e<=t.length;){for(s&&e<=t.length&&t.charAt(e-1)===this.FDelimiter&&(e+=1);e<=t.length&&t.charCodeAt(e-1)<=32;)e+=1;if(e<=t.length)if(t.charAt(e-1)===this.FQuoteChar){for(i=e+1;i<=t.length&&(t.charAt(i-1)!==this.FQuoteChar||i+1<=t.length&&t.charAt(i+1-1)===this.FQuoteChar);)i<=t.length&&t.charAt(i-1)===this.FQuoteChar?i+=2:i+=1;this.Add(pas.SysUtils.StringReplace(pas.System.Copy(t,e+1,i-e-1),this.FQuoteChar+this.FQuoteChar,this.FQuoteChar,rtl.createSet(0))),e=i+1}else{for(i=e;i<=t.length&&t.charCodeAt(i-1)>32&&t.charAt(i-1)!==this.FDelimiter;)i+=1;this.Add(pas.System.Copy(t,e,i-e)),e=i}else s&&this.Add("");for(;e<=t.length&&t.charCodeAt(e-1)<=32;)e+=1;s=!0}}finally{this.EndUpdate()}},this.GetValueFromIndex=function(t){var e="",i="";return this.GetNameValue(t,{get:function(){return i},set:function(t){i=t}},{get:function(){return e},set:function(t){e=t}}),e},this.CheckSpecialChars=function(){this.FSpecialCharsInited||(this.FQuoteChar='"',this.FDelimiter=",",this.FNameValueSeparator="=",this.FLBS=pas.System.DefaultTextLineBreakStyle,this.FSpecialCharsInited=!0,this.FLineBreak=pas.System.sLineBreak)},this.GetNextLinebreak=function(t,e,i){var s,n,r=!1,o=0,a=0;return e.set(""),r=!1,t.length-i.get()<0?r:(s=t.indexOf("\n",i.get()-1)+1,n=t.indexOf("\r",i.get()-1)+1,a=1,s>0&&n>0?(s-n==1&&(a=2),o=s<n?s:n):o=s>0&&n<1?s:n>0&&s<1?n:t.length+1,e.set(pas.System.Copy(t,i.get(),o-i.get())),i.set(o+a),r=!0)},this.Create$1=function(){return pas.System.TObject.Create.call(this),this.FAlwaysQuote=!1,this},this.Destroy=function(){pas.System.TObject.Destroy.call(this)},this.Add=function(t){var e;return e=this.GetCount(),this.Insert(this.GetCount(),t),e},this.AddObject=function(t,e){var i;return i=this.Add(t),this.PutObject(i,e),i},this.AddStrings=function(t){for(var e=0,i=0,s=t.GetCount()-1;i<=s;i++)e=i,this.AddObject(t.Get(e),t.GetObject(e))},this.Assign=function(e){var i=null;if(t.TStrings.isPrototypeOf(e)){i=e,this.BeginUpdate();try{this.Clear(),this.FSpecialCharsInited=i.FSpecialCharsInited,this.FQuoteChar=i.FQuoteChar,this.FDelimiter=i.FDelimiter,this.FNameValueSeparator=i.FNameValueSeparator,this.FLBS=i.FLBS,this.FLineBreak=i.FLineBreak,this.AddStrings(i)}finally{this.EndUpdate()}}else t.TPersistent.Assign.call(this,e)},this.BeginUpdate=function(){0===this.FUpdateCount&&this.SetUpdateState(!0),this.FUpdateCount+=1},this.EndUpdate=function(){this.FUpdateCount>0&&(this.FUpdateCount-=1),0===this.FUpdateCount&&this.SetUpdateState(!1)},this.GetEnumerator=function(){return t.TStringsEnumerator.$create("Create$1",[this])},this.IndexOf=function(t){var e=0;for(e=0;e<this.GetCount()&&0!==this.DoCompareText(this.Get(e),t);)e+=1;return e===this.GetCount()&&(e=-1),e},this.IndexOfName=function(t){var e=0,i=0,s="";for(this.CheckSpecialChars(),e=0;e<this.GetCount();){if(s=this.Get(e),(i=pas.System.Pos(this.FNameValueSeparator,s)-1)>=0&&0===this.DoCompareText(t,pas.System.Copy(s,1,i)))return e;e+=1}return e=-1},this.GetNameValue=function(t,e,i){var s;this.CheckSpecialChars(),i.set(this.Get(t)),0!==(s=pas.System.Pos(this.FNameValueSeparator,i.get()))?(e.set(pas.System.Copy(i.get(),1,s-1)),i.set(pas.System.Copy(i.get(),s+1,i.get().length-s))):e.set("")},this.SaveToFile=function(t){var e;e=this.GetTextStr();var i=document.createElement("a");i.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(e)),""!=t&&i.setAttribute("download",t),i.style.display="none",document.body.appendChild(i),i.click(),document.body.removeChild(i)}})),rtl.recNewT(this,"TStringItem",(function(){this.FString="",this.FObject=null,this.$eq=function(t){return this.FString===t.FString&&this.FObject===t.FObject},this.$assign=function(t){return this.FString=t.FString,this.FObject=t.FObject,this}})),this.$rtti.$Class("TStringList"),this.TStringsSortStyle={0:"sslNone",sslNone:0,1:"sslUser",sslUser:1,2:"sslAuto",sslAuto:2},rtl.createClass(this,"TStringList",this.TStrings,(function(){this.$init=function(){t.TStrings.$init.call(this),this.FList=[],this.FCount=0,this.FOnChange=null,this.FOnChanging=null,this.FDuplicates=0,this.FCaseSensitive=!1,this.FForceSort=!1,this.FOwnsObjects=!1,this.FSortStyle=0},this.$final=function(){this.FList=void 0,this.FOnChange=void 0,this.FOnChanging=void 0,t.TStrings.$final.call(this)},this.ExchangeItemsInt=function(t,e){var i,s;i=this.FList[t].FString,s=this.FList[t].FObject,this.FList[t].FString=this.FList[e].FString,this.FList[t].FObject=this.FList[e].FObject,this.FList[e].FString=i,this.FList[e].FObject=s},this.GetSorted=function(){return this.FSortStyle in rtl.createSet(1,2)},this.Grow=function(){var t=0;(t=this.GetCapacity())>=256?t+=rtl.trunc(t/4):0===t?t=4:t*=4,this.SetCapacity(t)},this.InternalClear=function(t,e){var i=0;if(t<this.FCount){if(this.FOwnsObjects)for(var s=t,n=this.FCount-1;s<=n;s++)i=s,this.FList[i].FString="",pas.SysUtils.FreeAndNil({p:this.FList[i],get:function(){return this.p.FObject},set:function(t){this.p.FObject=t}});else for(var r=t,o=this.FCount-1;r<=o;r++)i=r,this.FList[i].FString="";this.FCount=t}e||this.SetCapacity(0)},this.QuickSort=function(t,e,i){var s=0,n=0,r=0;if(e-t<=1)t<e&&i(this,t,e)>0&&this.ExchangeItems(t,e);else{for(n=t,r=e,s=t+pas.System.Random(e-t);n<r;){for(;n<s&&i(this,n,s)<=0;)n+=1;for(;r>s&&i(this,r,s)>0;)r-=1;this.ExchangeItems(n,r),s===n?s=r:s===r&&(s=n)}s-1>=t&&this.QuickSort(t,s-1,i),s+1<=e&&this.QuickSort(s+1,e,i)}},this.SetSorted=function(t){t?this.SetSortStyle(2):this.SetSortStyle(0)},this.SetCaseSensitive=function(t){if(t!==this.FCaseSensitive&&(this.FCaseSensitive=t,2===this.FSortStyle)){this.FForceSort=!0;try{this.Sort()}finally{this.FForceSort=!1}}},this.SetSortStyle=function(t){this.FSortStyle!==t&&(2===t&&this.Sort(),this.FSortStyle=t)},this.CheckIndex=function(t){(t<0||t>=this.FCount)&&this.Error(rtl.getResStr(pas.RTLConsts,"SListIndexError"),t)},this.ExchangeItems=function(t,e){this.ExchangeItemsInt(t,e)},this.Changed=function(){0===this.FUpdateCount&&null!=this.FOnChange&&this.FOnChange(this)},this.Changing=function(){0===this.FUpdateCount&&null!=this.FOnChanging&&this.FOnChanging(this)},this.Get=function(t){return this.CheckIndex(t),this.FList[t].FString},this.GetCapacity=function(){return rtl.length(this.FList)},this.GetCount=function(){return this.FCount},this.GetObject=function(t){return this.CheckIndex(t),this.FList[t].FObject},this.PutObject=function(t,e){this.CheckIndex(t),this.Changing(),this.FList[t].FObject=e,this.Changed()},this.SetCapacity=function(e){e<0&&this.Error(rtl.getResStr(pas.RTLConsts,"SListCapacityError"),e),e!==this.GetCapacity()&&(this.FList=rtl.arraySetLength(this.FList,t.TStringItem,e))},this.SetUpdateState=function(t){t?this.Changing():this.Changed()},this.InsertItem=function(t,e){this.InsertItem$1(t,e,null)},this.InsertItem$1=function(e,i,s){var n=t.TStringItem.$new();this.Changing(),this.FCount===this.GetCapacity()&&this.Grow(),n.FString=i,n.FObject=s,this.FList.splice(e,0,n),this.FCount+=1,this.Changed()},this.DoCompareText=function(t,e){return this.FCaseSensitive?pas.SysUtils.CompareStr(t,e):pas.SysUtils.CompareText(t,e)},this.Destroy=function(){this.InternalClear(0,!1),t.TStrings.Destroy.call(this)},this.Add=function(t){var e=0;if(2!==this.FSortStyle)e=this.FCount;else if(this.Find(t,{get:function(){return e},set:function(t){e=t}})){var i=this.FDuplicates;if(0===i)return e;2===i&&this.Error(rtl.getResStr(pas.RTLConsts,"SDuplicateString"),0)}return this.InsertItem(e,t),e},this.Clear=function(){0!==this.FCount&&(this.Changing(),this.InternalClear(0,!1),this.Changed())},this.Delete=function(t){this.CheckIndex(t),this.Changing(),this.FOwnsObjects&&pas.SysUtils.FreeAndNil({p:this.FList[t],get:function(){return this.p.FObject},set:function(t){this.p.FObject=t}}),this.FList.splice(t,1),this.FList[this.GetCount()-1].FString="",this.FList[this.GetCount()-1].FObject=null,this.FCount-=1,this.Changed()},this.Find=function(e,i){var s=!1,n=0,r=0,o=0,a=0;if(s=!1,i.set(-1),!this.GetSorted())throw t.EListError.$create("Create$1",[rtl.getResStr(pas.RTLConsts,"SErrFindNeedsSortedList")]);for(n=0,r=this.GetCount()-1;n<=r;)o=n+rtl.trunc((r-n)/2),(a=this.DoCompareText(e,this.FList[o].FString))>0?n=o+1:(r=o-1,0===a&&(s=!0,1!==this.FDuplicates&&(n=o)));return i.set(n),s},this.IndexOf=function(e){var i=0;return this.GetSorted()?this.Find(e,{get:function(){return i},set:function(t){i=t}})||(i=-1):i=t.TStrings.IndexOf.call(this,e),i},this.Insert=function(t,e){2===this.FSortStyle?this.Error(rtl.getResStr(pas.RTLConsts,"SSortedListError"),0):((t<0||t>this.FCount)&&this.Error(rtl.getResStr(pas.RTLConsts,"SListIndexError"),t),this.InsertItem(t,e))},this.Sort=function(){this.CustomSort(e.StringListAnsiCompare)},this.CustomSort=function(t){(this.FForceSort||2!==this.FSortStyle)&&this.FCount>1&&(this.Changing(),this.QuickSort(0,this.FCount-1,t),this.Changed())}})),rtl.createClass(this,"TCollectionItem",this.TPersistent,(function(){this.$init=function(){t.TPersistent.$init.call(this),this.FCollection=null,this.FID=0},this.$final=function(){this.FCollection=void 0,t.TPersistent.$final.call(this)},this.GetIndex=function(){return null!=this.FCollection?this.FCollection.FItems.IndexOf(this):-1},this.SetCollection=function(t){t!==this.FCollection&&(null!=this.FCollection&&this.FCollection.RemoveItem(this),null!=t&&t.InsertItem(this))},this.Create$1=function(t){return pas.System.TObject.Create.call(this),this.SetCollection(t),this},this.Destroy=function(){this.SetCollection(null),pas.System.TObject.Destroy.call(this)}})),this.TCollectionNotification={0:"cnAdded",cnAdded:0,1:"cnExtracting",cnExtracting:1,2:"cnDeleting",cnDeleting:2},rtl.createClass(this,"TCollection",this.TPersistent,(function(){this.$init=function(){t.TPersistent.$init.call(this),this.FItemClass=null,this.FItems=null,this.FUpdateCount=0,this.FNextID=0,this.FPropName=""},this.$final=function(){this.FItemClass=void 0,this.FItems=void 0,t.TPersistent.$final.call(this)},this.GetCount=function(){return this.FItems.FCount},this.InsertItem=function(t){this.FItemClass.isPrototypeOf(t)&&(this.FItems.Add(t),t.FCollection=this,t.FID=this.FNextID,this.FNextID+=1,this.SetItemName(t),this.Notify(t,0),this.Changed())},this.RemoveItem=function(t){var e;this.Notify(t,1),-1!==(e=this.FItems.IndexOfItem(t,1))&&this.FItems.Delete(e),t.FCollection=null,this.Changed()},this.DoClear=function(){for(var t=null;this.FItems.FCount>0;)null!=(t=rtl.getObject(this.FItems.Last()))&&t.$destroy("Destroy")},this.Changed=function(){0===this.FUpdateCount&&this.Update(null)},this.GetItem=function(t){return rtl.getObject(this.FItems.Get(t))},this.SetItemName=function(t){},this.Update=function(t){},this.Notify=function(t,e){},this.Create$1=function(e){return pas.System.TObject.Create.call(this),this.FItemClass=e,this.FItems=t.TFPList.$create("Create"),this},this.Destroy=function(){this.FUpdateCount=1;try{this.DoClear()}finally{this.FUpdateCount=0}null!=this.FItems&&this.FItems.$destroy("Destroy"),pas.System.TObject.Destroy.call(this)},this.Add=function(){return this.FItemClass.$create("Create$1",[this])},this.Assign=function(e){var i=0;if(t.TCollection.isPrototypeOf(e)){this.Clear();for(var s=0,n=e.GetCount()-1;s<=n;s++)i=s,this.Add().Assign(e.GetItem(i))}else t.TPersistent.Assign.call(this,e)},this.BeginUpdate=function(){this.FUpdateCount+=1},this.Clear=function(){if(0!==this.FItems.FCount){this.BeginUpdate();try{this.DoClear()}finally{this.EndUpdate()}}},this.EndUpdate=function(){this.FUpdateCount>0&&(this.FUpdateCount-=1),0===this.FUpdateCount&&this.Changed()},this.Delete=function(t){var e=null;e=rtl.getObject(this.FItems.Get(t)),this.Notify(e,2),null!=e&&e.$destroy("Destroy")}})),rtl.createClass(this,"TOwnedCollection",this.TCollection,(function(){this.$init=function(){t.TCollection.$init.call(this),this.FOwner=null},this.$final=function(){this.FOwner=void 0,t.TCollection.$final.call(this)},this.Create$2=function(e,i){return this.FOwner=e,t.TCollection.Create$1.call(this,i),this}})),this.TOperation={0:"opInsert",opInsert:0,1:"opRemove",opRemove:1},this.TComponentStateItem={0:"csLoading",csLoading:0,1:"csReading",csReading:1,2:"csWriting",csWriting:2,3:"csDestroying",csDestroying:3,4:"csDesigning",csDesigning:4,5:"csAncestor",csAncestor:5,6:"csUpdating",csUpdating:6,7:"csFixups",csFixups:7,8:"csFreeNotification",csFreeNotification:8,9:"csInline",csInline:9,10:"csDesignInstance",csDesignInstance:10},this.TComponentStyleItem={0:"csInheritable",csInheritable:0,1:"csCheckPropAvail",csCheckPropAvail:1,2:"csSubComponent",csSubComponent:2,3:"csTransient",csTransient:3},rtl.createClass(this,"TComponent",this.TPersistent,(function(){this.$init=function(){t.TPersistent.$init.call(this),this.FOwner=null,this.FName="",this.FTag=0,this.FComponents=null,this.FFreeNotifies=null,this.FComponentState={},this.FComponentStyle={},this.FLeft=0,this.FTop=0},this.$final=function(){this.FOwner=void 0,this.FComponents=void 0,this.FFreeNotifies=void 0,this.FComponentState=void 0,this.FComponentStyle=void 0,t.TPersistent.$final.call(this)},this.GetComponent=function(t){return null==this.FComponents?null:rtl.getObject(this.FComponents.Get(t))},this.GetComponentCount=function(){return null==this.FComponents?0:this.FComponents.FCount},this.Insert=function(e){null==this.FComponents&&(this.FComponents=t.TFPList.$create("Create")),this.FComponents.Add(e),e.FOwner=this},this.Remove=function(t){t.FOwner=null,null!=this.FComponents&&(this.FComponents.Remove(t),0===this.FComponents.FCount&&(this.FComponents.$destroy("Destroy"),this.FComponents=null))},this.RemoveNotification=function(t){null!==this.FFreeNotifies&&(this.FFreeNotifies.Remove(t),0===this.FFreeNotifies.FCount&&(this.FFreeNotifies.$destroy("Destroy"),this.FFreeNotifies=null,this.FComponentState=rtl.excludeSet(this.FComponentState,8)))},this.SetReference=function(t){var e=null,i=null,s=null;""!==this.FName&&null!=this.FOwner&&(s=this.FOwner,null!=(e=this.FOwner.$class.FieldAddress(this.FName))&&(i=t?this:null,s[""+e.name]=i))},this.ChangeName=function(t){this.FName=t},this.Loaded=function(){this.FComponentState=rtl.excludeSet(this.FComponentState,0)},this.Loading=function(){this.FComponentState=rtl.includeSet(this.FComponentState,0)},this.Notification=function(t,e){var i=0;if(1===e&&this.RemoveFreeNotification(t),null!=this.FComponents)for(i=this.FComponents.FCount-1;i>=0;)rtl.getObject(this.FComponents.Get(i)).Notification(t,e),(i-=1)>=this.FComponents.FCount&&(i=this.FComponents.FCount-1)},this.SetDesigning=function(t,e){var i=0;if(this.FComponentState=t?rtl.includeSet(this.FComponentState,4):rtl.excludeSet(this.FComponentState,4),null!=this.FComponents&&e)for(var s=0,n=this.FComponents.FCount-1;s<=n;s++)i=s,rtl.getObject(this.FComponents.Get(i)).SetDesigning(t,!0)},this.SetName=function(e){if(this.FName!==e){if(""!==e&&!pas.SysUtils.IsValidIdent(e,!1,!1))throw t.EComponentError.$create("CreateFmt",[rtl.getResStr(pas.RTLConsts,"SInvalidName"),pas.System.VarRecs(18,e)]);null!=this.FOwner?this.FOwner.ValidateRename(this,this.FName,e):this.ValidateRename(null,this.FName,e),this.SetReference(!1),this.ChangeName(e),this.SetReference(!0)}},this.SetParentComponent=function(t){},this.ValidateRename=function(e,i,s){if(null!==e&&0!==pas.SysUtils.CompareText(i,s)&&e.FOwner===this&&null!==this.FindComponent(s))throw t.EComponentError.$create("CreateFmt",[rtl.getResStr(pas.RTLConsts,"SDuplicateName"),pas.System.VarRecs(18,s)]);4 in this.FComponentState&&null!==this.FOwner&&this.FOwner.ValidateRename(e,i,s)},this.ValidateContainer=function(t){t.ValidateInsert(this)},this.ValidateInsert=function(t){},this._AddRef=function(){return-1,-1},this.GetLeft=function(){return this.FLeft},this.GetTop=function(){return this.FTop},this.SetLeft=function(t){this.FLeft=t},this.SetTop=function(t){this.FTop=t},this._Release=function(){return-1,-1},this.Create$1=function(t){return this.FComponentStyle=rtl.createSet(0),null!=t&&t.InsertComponent(this),this},this.Destroy=function(){var t=0,e=null;if(this.Destroying(),null!=this.FFreeNotifies){for(t=this.FFreeNotifies.FCount-1;t>=0;)e=rtl.getObject(this.FFreeNotifies.Get(t)),this.FFreeNotifies.Delete(t),e.Notification(this,1),null===this.FFreeNotifies?t=0:t>this.FFreeNotifies.FCount&&(t=this.FFreeNotifies.FCount),t-=1;pas.SysUtils.FreeAndNil({p:this,get:function(){return this.p.FFreeNotifies},set:function(t){this.p.FFreeNotifies=t}})}this.DestroyComponents(),null!==this.FOwner&&this.FOwner.RemoveComponent(this),pas.System.TObject.Destroy.call(this)},this.BeforeDestruction=function(){3 in this.FComponentState||this.Destroying()},this.DestroyComponents=function(){for(var t=null;null!=this.FComponents;)t=rtl.getObject(this.FComponents.Last()),this.Remove(t),t.$destroy("Destroy")},this.Destroying=function(){var t=0;if(!(3 in this.FComponentState)&&(this.FComponentState=rtl.includeSet(this.FComponentState,3),null!=this.FComponents))for(var e=0,i=this.FComponents.FCount-1;e<=i;e++)t=e,rtl.getObject(this.FComponents.Get(t)).Destroying()},this.QueryInterface=function(t,e){return this.GetInterface(t,e)?0:-2147467262},this.AfterLoadDFMValues=function(){this.EndUpdate(),this.Loaded()},this.BeforeLoadDFMValues=function(){4 in this.FComponentState||this.Loading(),this.BeginUpdate()},this.BeginUpdate=function(){},this.EndUpdate=function(){},this.FindComponent=function(t){var e=null,i=0;if(e=null,""===t||null==this.FComponents)return e;for(var s=0,n=this.FComponents.FCount-1;s<=n;s++)if(i=s,0===pas.SysUtils.CompareText(rtl.getObject(this.FComponents.Get(i)).FName,t))return e=rtl.getObject(this.FComponents.Get(i));return e},this.RemoveFreeNotification=function(t){this.RemoveNotification(t),t.RemoveNotification(this)},this.InsertComponent=function(t){t.ValidateContainer(this),this.ValidateRename(t,"",t.FName),null!==t.FOwner&&t.FOwner.RemoveComponent(t),this.Insert(t),4 in this.FComponentState&&t.SetDesigning(!0,!0),this.Notification(t,0)},this.RemoveComponent=function(t){this.Notification(t,1),this.Remove(t),t.SetDesigning(!1,!0),this.ValidateRename(t,t.FName,"")},rtl.addIntf(this,pas.System.IUnknown);var e=this.$rtti;e.addProperty("Name",6,rtl.string,"FName","SetName"),e.addProperty("Tag",0,rtl.nativeint,"FTag","FTag",{Default:0})})),this.TSeekOrigin={0:"soBeginning",soBeginning:0,1:"soCurrent",soCurrent:1,2:"soEnd",soEnd:2},rtl.createClass(this,"TStream",pas.System.TObject,(function(){this.GetPosition=function(){return this.Seek(0,1)},this.SetPosition=function(t){this.Seek(t,0)},this.GetSize=function(){var t,e;return e=this.Seek(0,1),t=this.Seek(0,2),this.Seek(e,0),t},this.SetSize=function(e){if(e<0)throw t.EStreamError.$create("Create$1",[rtl.getResStr(t,"SerrInvalidStreamSize")])},this.SetSize64=function(t){this.SetSize(t)},this.Read=function(t,e){return this.Read$1(rtl.arrayRef(t.get()),0,e)},this.Write=function(t,e){return this.Write$1(t,0,e)},this.ReadBuffer=function(t,e){this.ReadBuffer$1(t,0,e)},this.ReadBuffer$1=function(e,i,s){if(this.Read$1(rtl.arrayRef(e.get()),i,s)!==s)throw t.EStreamError.$create("Create$1",[rtl.getResStr(t,"SReadError")])},this.WriteBuffer=function(t,e){this.WriteBuffer$1(t,0,e)},this.WriteBuffer$1=function(e,i,s){if(this.Write$1(e,i,s)!==s)throw t.EStreamError.$create("Create$1",[rtl.getResStr(t,"SWriteError")])};this.CopyFrom=function(t,e){var i=0,s=[],n=0,r=0;if(i=0,0===e&&t.SetPosition(0),n=131072,e>0&&e<n&&(n=e),s=rtl.arraySetLength(s,0,n),0===e)do{(r=t.Read({get:function(){return s},set:function(t){s=t}},n))>0&&this.WriteBuffer(s,r),i+=r}while(!(r<n));else for(;e>0;)r=e>n?n:e,t.ReadBuffer({get:function(){return s},set:function(t){s=t}},r),this.WriteBuffer(s,r),e-=r,i+=r;return i}})),rtl.createClass(this,"TCustomMemoryStream",this.TStream,(function(){this.$init=function(){t.TStream.$init.call(this),this.FMemory=null,this.FDataView=null,this.FDataArray=null,this.FSize=0,this.FPosition=0,this.FSizeBoundsSeek=!1},this.$final=function(){this.FMemory=void 0,this.FDataView=void 0,this.FDataArray=void 0,t.TStream.$final.call(this)},this.GetDataArray=function(){return null===this.FDataArray&&(this.FDataArray=new Uint8Array(this.FMemory)),this.FDataArray},this.GetDataView=function(){return null===this.FDataView&&(this.FDataView=new DataView(this.FMemory)),this.FDataView},this.GetSize=function(){return this.FSize},this.GetPosition=function(){return this.FPosition},this.SetPointer=function(t,e){this.FMemory=t,this.FSize=e,this.FDataView=null,this.FDataArray=null},this.MemoryToBytes=function(t){return this.MemoryToBytes$1(new Uint8Array(t))},this.MemoryToBytes$1=function(t){for(var e=[],i=0,s=0,n=t.length-1;s<=n;s++)e[i=s]=t[i];return e},this.BytesToMemory=function(t){var e;return e=new ArrayBuffer(rtl.length(t)),new Uint8Array(e).set(t),e},this.Read$1=function(t,e,i){var s=0,n=0,r=0,o=0;if(s=0,this.FSize>0&&this.FPosition<this.FSize&&this.FPosition>=0){for((s=i)>this.FSize-this.FPosition&&(s=this.FSize-this.FPosition),r=this.FPosition,o=e,n=0;n<s;)t[o]=this.GetDataView().getUint8(r),r+=1,o+=1,n+=1;this.FPosition=this.FPosition+s}return s},this.Seek=function(t,e){var i=e;return 0===i?this.FPosition=t:2===i?this.FPosition=this.FSize+t:1===i&&(this.FPosition=this.FPosition+t),this.FSizeBoundsSeek&&this.FPosition>this.FSize&&(this.FPosition=this.FSize),this.FPosition}})),rtl.createClass(this,"TMemoryStream",this.TCustomMemoryStream,(function(){this.$init=function(){t.TCustomMemoryStream.$init.call(this),this.FCapacity=0},this.SetCapacity=function(t){this.SetPointer(this.Realloc({get:function(){return t},set:function(e){t=e}}),this.FSize),this.FCapacity=t},this.Realloc=function(e){var i=null,s=0;if(e.get()<0?e.set(0):(s=this.FCapacity+rtl.trunc(this.FCapacity/4),e.get()>this.FCapacity&&e.get()<s&&e.set(s),e.set(e.get()+4095&-4096)),e.get()===this.FCapacity)i=this.FMemory;else if(0===e.get())i=null;else{if(null===(i=new ArrayBuffer(e.get())))throw t.EStreamError.$create("Create$1",[rtl.getResStr(t,"SMemoryStreamError")]);new Uint8Array(i).set(this.GetDataArray())}return i},this.Destroy=function(){this.Clear(),pas.System.TObject.Destroy.call(this)},this.Clear=function(){this.FSize=0,this.FPosition=0,this.SetCapacity(0)},this.LoadFromStream=function(t){this.SetPosition(0),t.SetPosition(0),this.SetSize(t.GetSize()),this.GetSize()>0&&this.CopyFrom(t,0)},this.SetSize=function(t){this.SetCapacity(t),this.FSize=t,this.FPosition>this.FSize&&(this.FPosition=this.FSize)},this.Write$1=function(t,e,i){var s;return 0===i||this.FPosition<0?0:((s=this.FPosition+i)>this.FSize&&(s>this.FCapacity&&this.SetCapacity(s),this.FSize=s),this.GetDataArray().set(rtl.arrayCopy(0,t,e,i),this.FPosition),this.FPosition=s,i)},this.Write=function(t,e){return this.Write$1(t,0,e)}})),rtl.createClass(this,"TStringStream",this.TMemoryStream,(function(){this.$init=function(){t.TMemoryStream.$init.call(this),this.FEncoding=null,this.FOwnsEncoding=!1},this.$final=function(){this.FEncoding=void 0,t.TMemoryStream.$final.call(this)};this.GetDataString=function(){var e="",i=null,s=null,n=0;if(e="",this.FEncoding===t.TEncoding.GetUnicode()){if(null!==(i=new Uint16Array(this.FMemory.slice(0,this.GetSize()))))for(var r=0,o=rtl.trunc(i.length/8192);r<=o;r++)n=r,e+=String.fromCharCode.apply(null,i.slice(8192*n,8192*(n+1)))}else if(null!==(s=new Uint8Array(this.FMemory.slice(0,this.GetSize()))))return s.reduce((function(t,e){return t+String.fromCharCode(e)}),"");return e},this.Create$3=function(e,i,s){var n;return pas.System.TObject.Create.call(this),this.FEncoding=i,n=e.length,this.FEncoding===t.TEncoding.GetUnicode()?(this.SetPointer(t.StringToBuffer$1(e,n,this.FEncoding),2*n),this.FCapacity=2*n):(this.SetPointer(t.StringToBuffer$1(e,n,this.FEncoding),n),this.FCapacity=n),this},this.Destroy=function(){this.FOwnsEncoding&&rtl.free(this,"FEncoding"),t.TMemoryStream.Destroy.call(this)},this.ReadString=function(e){var i,s="",n=[],r=null;return i=this.GetSize()-this.GetPosition(),this.FEncoding===t.TEncoding.GetUnicode()?(i<2*e&&(e=i),n=rtl.arraySetLength(n,0,2*e),this.ReadBuffer$1({get:function(){return n},set:function(t){n=t}},0,2*e),r=this.$class.BytesToMemory(rtl.arrayRef(n)),s=t.BufferToString$1(r,0,2*e,this.FEncoding)):(i<e&&(e=i),n=rtl.arraySetLength(n,0,e),this.ReadBuffer$1({get:function(){return n},set:function(t){n=t}},0,e),r=this.$class.BytesToMemory(rtl.arrayRef(n)),s=t.BufferToString$1(r,0,e,this.FEncoding)),s},this.WriteString=function(e){var i,s;i=t.StringToBuffer$1(e,e.length,this.FEncoding),s=this.$class.MemoryToBytes(i),this.WriteBuffer(s,rtl.length(s))}})),rtl.createClass(this,"TLoadHelper",pas.System.TObject,(function(){})),rtl.createClass(this,"TEncoding",pas.System.TObject,(function(){this.FANSI=null,this.FUnicode=null,this.GetANSI=function(){return null==this.FANSI&&(t.TEncoding.FANSI=t.TANSIEncoding.$create("Create")),this.FANSI},this.GetUnicode=function(){return null==this.FUnicode&&(t.TEncoding.FUnicode=t.TUnicodeEncoding.$create("Create")),this.FUnicode}})),rtl.createClass(this,"TANSIEncoding",this.TEncoding,(function(){})),rtl.createClass(this,"TUnicodeEncoding",this.TEncoding,(function(){})),rtl.createClass(this,"ComponentPlatformsAttribute",pas.System.TCustomAttribute,(function(){this.$init=function(){pas.System.TCustomAttribute.$init.call(this),this.FPlatforms=0},this.Create$1=function(t){return this.FPlatforms=t,this}})),this.TShiftState$a={0:"ssShift",ssShift:0,1:"ssAlt",ssAlt:1,2:"ssCtrl",ssCtrl:2,3:"ssLeft",ssLeft:3,4:"ssRight",ssRight:4,5:"ssMIDdle",ssMIDdle:5,6:"ssDouble",ssDouble:6,7:"ssTouch",ssTouch:7,8:"ssPen",ssPen:8,9:"ssCommand",ssCommand:9},this.$rtti.$Enum("TShiftState$a",{minvalue:0,maxvalue:9,ordtype:1,enumtype:this.TShiftState$a}),this.$rtti.$Set("TShiftState",{comptype:this.$rtti.TShiftState$a}),this.RegisterClass=function(t){e.ClassList[t.$classname]=t},this.GetClass=function(t){var i=null;return i=null,""===t?i:e.ClassList.hasOwnProperty(t)?i=rtl.getObject(e.ClassList[t]):i},this.SetLoadHelperClass=function(t){var i;return i=e.GlobalLoadHelper,e.GlobalLoadHelper=t,i},this.StringToBuffer$1=function(e,i,s){var n=null,r=0;if(s===t.TEncoding.GetUnicode()){n=new ArrayBuffer(2*i);for(var o=new Uint16Array(n),a=0,l=i-1;a<=l;a++)o[r=a]=e.charCodeAt(r)}else{n=new ArrayBuffer(i);for(var h=new Uint8Array(n),F=0,p=i-1;F<=p;F++)h[r=F]=e.charCodeAt(r)}return n},this.BufferToString$1=function(e,i,s,n){var r="",o=null,a=null;return r="",n===t.TEncoding.GetUnicode()?null!==(o=new Uint16Array(e.slice(i,s)))&&(r=""+String.fromCharCode.apply(null,o)):null!==(a=new Uint8Array(e.slice(i,s)))&&(r=""+String.fromCharCode.apply(null,a)),r},t.$implcode=function(){e.GlobalLoadHelper=null,e.QuickSort=function(t,i,s,n){var r=0,o=0,a=0,l=void 0,h=void 0;do{r=i,o=s,l=t[a=i+(s-i>>>1)];do{for(;r<a&&n(l,t[r])>0;)r+=1;for(;o>a&&n(l,t[o])<0;)o-=1;r<o&&(h=t[r],t[r]=t[o],t[o]=h,a===r?(a=o,r+=1):a===o?(a=r,o-=1):(r+=1,o-=1))}while(!(r>=o));if(a-i<s-a)i+1<a&&e.QuickSort(rtl.arrayRef(t),i,a-1,n),i=a+1;else{if(a+1<s&&e.QuickSort(rtl.arrayRef(t),a+1,s,n),!(i+1<a))return;s=a-1}}while(!(i>=s))},e.StringListAnsiCompare=function(t,e,i){return t.DoCompareText(t.FList[e].FString,t.FList[i].FString)},e.TMSGrow=4096,e.ClassList=null,t.$resourcestrings={SReadError:{org:"Could not read data from stream"},SWriteError:{org:"Could not write data to stream"},SMemoryStreamError:{org:"Could not allocate memory"},SerrInvalidStreamSize:{org:"Invalid Stream size"}}},t.$init=function(){e.ClassList=new Object}}),["Web"]),rtl.module("WEBLib.Menus",["System","Classes","SysUtils","WEBLib.Controls","WEBLib.Graphics","Web"],(function(){"use strict";var t=this,e=t.$impl;this.$rtti.$Class("TMainMenu"),this.$rtti.$Class("TMenuItem"),this.$rtti.$Class("TCustomMainMenu"),this.TMenuItemAutoFlag={0:"maAutomatic",maAutomatic:0,1:"maManual",maManual:1,2:"maParent",maParent:2},this.$rtti.$Enum("TMenuItemAutoFlag",{minvalue:0,maxvalue:2,ordtype:1,enumtype:this.TMenuItemAutoFlag}),this.TMenuBreak={0:"mbNone",mbNone:0,1:"mbBreak",mbBreak:1,2:"mbBarBreak",mbBarBreak:2},this.$rtti.$Enum("TMenuBreak",{minvalue:0,maxvalue:2,ordtype:1,enumtype:this.TMenuBreak}),this.$rtti.$Int("THelpContext",{minvalue:-2147483647,maxvalue:2147483647,ordtype:4}),this.$rtti.$inherited("TShortCut",rtl.word,{}),this.TMainMenuHamburgerMenuVisible={0:"hmAlways",hmAlways:0,1:"hmNever",hmNever:1,2:"hmResponsive",hmResponsive:2},this.$rtti.$Enum("TMainMenuHamburgerMenuVisible",{minvalue:0,maxvalue:2,ordtype:1,enumtype:this.TMainMenuHamburgerMenuVisible}),this.$rtti.$MethodVar("TMainMenuChangeEvent",{procsig:rtl.newTIProcSig([["Sender",pas.System.$rtti.TObject],["Source",this.$rtti.TMenuItem],["Rebuild",rtl.boolean]]),methodkind:0}),rtl.createClass(this,"TMenuItemList",pas.Classes.TList,(function(){this.GetItem=function(t){return rtl.getObject(this.Get(t))}})),rtl.createClass(this,"TMenuItem",pas.Classes.TComponent,(function(){this.$init=function(){pas.Classes.TComponent.$init.call(this),this.FOwner$1=null,this.FCaption="",this.FItems=null,this.FParentItem=null,this.FOnClick=null,this.FChecked=!1,this.FEnabled=!1,this.FDefault=!1,this.FAutoCheck=!1,this.FHint="",this.FAutoHotkeys=0,this.FRadioItem=!1,this.FGroupIndex=0,this.FVisible=!1,this.FShortCut=0,this.FBreak=0,this.FImageIndex=0,this.FAutoLineReduction=0,this.FHelpContext=0,this.FElementClassName="",this.FParentMenu=null},this.$final=function(){this.FOwner$1=void 0,this.FItems=void 0,this.FParentItem=void 0,this.FOnClick=void 0,this.FParentMenu=void 0,pas.Classes.TComponent.$final.call(this)},this.SetChecked=function(e){var i=null,s=null,n=null,r=null,o=0;if(this.FChecked!==e){if(this.FChecked=e,null!=(r=this.FParentMenu)){if(t.TMenuItem.isPrototypeOf(r)&&e)for(var a=0,l=(s=r).FItems.GetCount()-1;a<=l;a++)o=a,(n=s.FItems.GetItem(o)).FRadioItem&&n!==this&&n.SetChecked(!1);for(;!t.TCustomMainMenu.isPrototypeOf(r)&&null!=r;)r=r.FOwner}null!=(i=this.GetParentMenu())&&i.UpdateElement()}},this.SetCaption=function(t){var e=null;this.FCaption=t,null!=(e=this.GetParentMenu())&&e.UpdateElement()},this.SetImageIndex=function(t){var e=null;this.FImageIndex=t,null!=(e=this.GetParentMenu())&&e.UpdateElement()},this.SetEnabled=function(t){this.FEnabled!==t&&(this.FEnabled=t,this.GetParentMenu().UpdateElement())},this.GetCount=function(){return null===this.FItems?0:this.FItems.GetCount()},this.Create$1=function(e){return this.FParentMenu=null,t.TMainMenu.isPrototypeOf(e)&&(this.FParentMenu=e),pas.Classes.TComponent.Create$1.call(this,e),this.FAutoHotkeys=2,this.FAutoLineReduction=2,this.FImageIndex=-1,this.FHint="",this.FCaption="MenuItem",this.FChecked=!1,this.FEnabled=!0,this.FDefault=!1,this.FRadioItem=!1,this.FVisible=!0,this.FOwner$1=e,this},this.Destroy=function(){var t=0,e=null,i=null;if(e=this.GetParentMenu(),null!=this.FParentItem&&null!=e){e.BeginUpdate();for(var s=this.FParentItem.FItems.GetCount()-1;s>=0;s--)t=s,this.FParentItem.FItems.GetItem(t)===this&&this.FParentItem.FItems.Delete(t);e.EndUpdate()}if(null!=this.FItems)for(var n=this.FItems.GetCount()-1;n>=0;n--)t=n,(i=this.FItems.GetItem(t)).FParentItem=null,i=rtl.freeLoc(i),this.FItems.Delete(t);pas.Classes.TComponent.Destroy.call(this)},this.Assign=function(e){var i=0,s=null,n=null,r=null;if(t.TMenuItem.isPrototypeOf(e)&&(s=rtl.as(e,t.TMenuItem),this.FAutoCheck=s.FAutoCheck,this.FAutoHotkeys=s.FAutoHotkeys,this.FAutoLineReduction=s.FAutoLineReduction,this.FBreak=s.FBreak,this.FCaption=s.FCaption,this.FChecked=s.FChecked,this.FDefault=s.FDefault,this.FEnabled=s.FEnabled,this.FGroupIndex=s.FGroupIndex,this.FHelpContext=s.FHelpContext,this.FHint=s.FHint,this.FImageIndex=s.FImageIndex,this.FRadioItem=s.FRadioItem,this.FShortCut=s.FShortCut,this.FVisible=s.FVisible,this.FElementClassName=s.FElementClassName,r=this.GetParentMenu(),null!=this.FParentItem&&this.SetName(r.GetUniqueName(s.FCaption)),null!=s.FItems)){if(null!=this.FItems){for(var o=this.FItems.GetCount()-1;o>=0;o--)i=o,this.RemoveItem(this.GetParentMenu().FParent,this.FItems.GetItem(i));this.FItems.Clear()}else this.FItems=t.TMenuItemList.$create("Create$1");for(var a=0,l=s.FItems.GetCount()-1;a<=l;a++)i=a,(n=t.TMenuItem.$create("Create$1",[r.FOwner])).FParentMenu=r,n.FParentItem=this,n.Assign(s.FItems.GetItem(i)),this.FItems.Add(n)}},this.SetParentComponent=function(e){pas.Classes.TComponent.SetParentComponent.apply(this,arguments),this.FParentMenu=e,null!==e&&(t.TCustomMainMenu.isPrototypeOf(e)?e.FItems.IsChild(this)||e.FItems.Add(this):t.TMenuItem.isPrototypeOf(e)&&(e.IsChild(this)||e.Add(this)))},this.Add=function(t){this.Insert$1(this.GetCount(),t)},this.Insert$1=function(e,i){null===this.FItems&&(this.FItems=t.TMenuItemList.$create("Create$1")),this.FItems.Insert(e,i),i.FParentItem=this,null!=i.GetParentMenu()&&i.GetParentMenu().UpdateElement()},this.IsChild=function(t){var e=!1,i=0;if(e=!1,null==this.FItems)return e;for(var s=0,n=this.FItems.GetCount()-1;s<=n;s++)i=s,this.FItems.GetItem(i)===t&&(e=!0);return e},this.GetParentMenu=function(){var e=null,i=null;for(e=null,i=this.FParentMenu;null!=i&&t.TMenuItem.isPrototypeOf(i);)i=i.FParentMenu;return null!=i&&(e=i),e},this.RemoveItem=function(t,e){var i=0;if(null!=e.FItems)for(var s=e.FItems.GetCount()-1;s>=0;s--)i=s,this.RemoveItem(t,e.FItems.GetItem(i));t.RemoveComponent(e)},this.Click=function(){null!=this.FOnClick&&this.FOnClick(this)},rtl.addIntf(this,pas.System.IUnknown);var e=this.$rtti;e.addProperty("AutoCheck",0,rtl.boolean,"FAutoCheck","FAutoCheck",{Default:!1}),e.addProperty("AutoHotkeys",0,t.$rtti.TMenuItemAutoFlag,"FAutoHotkeys","FAutoHotkeys",{Default:t.TMenuItemAutoFlag.maParent}),e.addProperty("AutoLineReduction",0,t.$rtti.TMenuItemAutoFlag,"FAutoLineReduction","FAutoLineReduction",{Default:t.TMenuItemAutoFlag.maParent}),e.addProperty("Break",0,t.$rtti.TMenuBreak,"FBreak","FBreak",{Default:t.TMenuBreak.mbNone}),e.addProperty("Caption",2,rtl.string,"FCaption","SetCaption"),e.addProperty("Checked",2,rtl.boolean,"FChecked","SetChecked",{Default:!1}),e.addProperty("Default",0,rtl.boolean,"FDefault","FDefault",{Default:!1}),e.addProperty("Enabled",2,rtl.boolean,"FEnabled","SetEnabled",{Default:!0}),e.addProperty("GroupIndex",0,rtl.byte,"FGroupIndex","FGroupIndex",{Default:0}),e.addProperty("HelpContext",0,t.$rtti.THelpContext,"FHelpContext","FHelpContext",{Default:0}),e.addProperty("Hint",0,rtl.string,"FHint","FHint"),e.addProperty("ImageIndex",2,rtl.longint,"FImageIndex","SetImageIndex",{Default:-1}),e.addProperty("RadioItem",0,rtl.boolean,"FRadioItem","FRadioItem",{Default:!1}),e.addProperty("ShortCut",0,t.$rtti.TShortCut,"FShortCut","FShortCut",{Default:0}),e.addProperty("Visible",0,rtl.boolean,"FVisible","FVisible",{Default:!0}),e.addProperty("ElementClassName",0,pas["WEBLib.Controls"].$rtti.TElementClassName,"FElementClassName","FElementClassName"),e.addProperty("OnClick",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnClick","FOnClick")})),this.$rtti.$Class("TMainMenuAppearance"),rtl.createClass(this,"THamburgerMenu",pas.Classes.TPersistent,(function(){this.$init=function(){pas.Classes.TPersistent.$init.call(this),this.FOwner=null,this.FVisible=0,this.FCaption="",this.FBackgroundColor=0,this.FCaptionColor=0,this.FResponsiveMaxWidth=0},this.$final=function(){this.FOwner=void 0,pas.Classes.TPersistent.$final.call(this)},this.SetVisible=function(t){this.FVisible!==t&&(this.FVisible=t,this.FOwner.FOwner.UpdateElement())},this.SetBackgroundColor=function(t){this.FBackgroundColor!==t&&(this.FBackgroundColor=t,this.FOwner.FOwner.UpdateElement())},this.SetCaption=function(t){this.FCaption!==t&&(this.FCaption=t,this.FOwner.FOwner.UpdateElement())},this.SetCaptionColor=function(t){this.FCaptionColor!==t&&(this.FCaptionColor=t,this.FOwner.FOwner.UpdateElement())},this.SetResponsiveMaxWidth=function(t){this.FResponsiveMaxWidth!==t&&(this.FResponsiveMaxWidth=t,this.FOwner.FOwner.UpdateElement())},this.Create$1=function(t){return this.FBackgroundColor=12632256,this.FCaption="Menu",this.FCaptionColor=16777215,this.FVisible=2,this.FResponsiveMaxWidth=768,this.FOwner=t,this},this.Destroy=function(){pas.System.TObject.Destroy.call(this)},this.Assign=function(e){pas.Classes.TPersistent.Assign.apply(this,arguments),t.THamburgerMenu.isPrototypeOf(e)&&(this.FBackgroundColor=rtl.as(e,t.THamburgerMenu).FBackgroundColor,this.FCaption=rtl.as(e,t.THamburgerMenu).FCaption,this.FCaptionColor=rtl.as(e,t.THamburgerMenu).FCaptionColor,this.FVisible=rtl.as(e,t.THamburgerMenu).FVisible,this.FResponsiveMaxWidth=rtl.as(e,t.THamburgerMenu).FResponsiveMaxWidth)};var e=this.$rtti;e.addProperty("Caption",2,rtl.string,"FCaption","SetCaption"),e.addProperty("CaptionColor",2,pas["WEBLib.Graphics"].$rtti.TColor,"FCaptionColor","SetCaptionColor",{Default:16777215}),e.addProperty("BackgroundColor",2,pas["WEBLib.Graphics"].$rtti.TColor,"FBackgroundColor","SetBackgroundColor",{Default:12632256}),e.addProperty("Visible",2,t.$rtti.TMainMenuHamburgerMenuVisible,"FVisible","SetVisible",{Default:t.TMainMenuHamburgerMenuVisible.hmResponsive}),e.addProperty("ResponsiveMaxWidth",2,rtl.longint,"FResponsiveMaxWidth","SetResponsiveMaxWidth",{Default:768})})),rtl.createClass(this,"TMainMenuAppearance",pas.Classes.TPersistent,(function(){this.$init=function(){pas.Classes.TPersistent.$init.call(this),this.FOwner=null,this.FBackgroundColor=0,this.FHoverFontColor=0,this.FHoverColor=0,this.FImageURLs=null,this.FHamburgerMenu=null,this.FImageSize=0,this.FSubmenuIndicator=""},this.$final=function(){this.FOwner=void 0,this.FImageURLs=void 0,this.FHamburgerMenu=void 0,pas.Classes.TPersistent.$final.call(this)},this.SetBackgroundColor=function(t){this.FBackgroundColor!==t&&(this.FBackgroundColor=t,this.FOwner.UpdateElement())},this.SetHoverColor=function(t){this.FHoverColor!==t&&(this.FHoverColor=t,this.FOwner.UpdateElement())},this.SetHoverFontColor=function(t){this.FHoverFontColor!==t&&(this.FHoverFontColor=t,this.FOwner.UpdateElement())},this.SetImageURLs=function(t){this.FImageURLs.Assign(t)},this.SetImageSize=function(t){this.FImageSize!==t&&(this.FImageSize=t,this.FOwner.UpdateElement())},this.SetSubmenuIndicator=function(t){this.FSubmenuIndicator!==t&&(this.FSubmenuIndicator=t,this.FOwner.UpdateElement())},this.HandleImageURLsChanged=function(t){this.FOwner.UpdateElement()},this.Create$1=function(e){return this.FBackgroundColor=15790320,this.FHoverColor=14120960,this.FHoverFontColor=197379,this.FHamburgerMenu=t.THamburgerMenu.$create("Create$1",[this]),this.FImageURLs=pas.Classes.TStringList.$create("Create$1"),this.FImageURLs.SetSkipLastLineBreak(!0),this.FImageURLs.FOnChange=rtl.createCallback(this,"HandleImageURLsChanged"),this.FImageSize=16,this.FSubmenuIndicator="&#9658;",this.FOwner=e,this},this.Destroy=function(){rtl.free(this,"FHamburgerMenu"),rtl.free(this,"FImageURLs"),pas.System.TObject.Destroy.call(this)},this.Assign=function(e){pas.Classes.TPersistent.Assign.apply(this,arguments),t.TMainMenu.isPrototypeOf(e)&&(this.FBackgroundColor=rtl.as(e,t.TMainMenuAppearance).FBackgroundColor,this.FHoverColor=rtl.as(e,t.TMainMenuAppearance).FHoverColor,this.FHoverFontColor=rtl.as(e,t.TMainMenuAppearance).FHoverFontColor,this.FHamburgerMenu.Assign(rtl.as(e,t.TMainMenuAppearance).FHamburgerMenu),this.FImageURLs.Assign(rtl.as(e,t.TMainMenuAppearance).FImageURLs),this.FImageSize=rtl.as(e,t.TMainMenuAppearance).FImageSize,this.FSubmenuIndicator=rtl.as(e,t.TMainMenuAppearance).FSubmenuIndicator)};var e=this.$rtti;e.addProperty("BackgroundColor",2,pas["WEBLib.Graphics"].$rtti.TColor,"FBackgroundColor","SetBackgroundColor",{Default:15790320}),e.addProperty("HamburgerMenu",0,t.$rtti.THamburgerMenu,"FHamburgerMenu","FHamburgerMenu"),e.addProperty("HoverColor",2,pas["WEBLib.Graphics"].$rtti.TColor,"FHoverColor","SetHoverColor",{Default:14120960}),e.addProperty("HoverFontColor",2,pas["WEBLib.Graphics"].$rtti.TColor,"FHoverFontColor","SetHoverFontColor",{Default:197379}),e.addProperty("ImageURLs",2,pas.Classes.$rtti.TStringList,"FImageURLs","SetImageURLs"),e.addProperty("ImageSize",2,rtl.longint,"FImageSize","SetImageSize",{Default:16}),e.addProperty("SubmenuIndicator",2,rtl.string,"FSubmenuIndicator","SetSubmenuIndicator")})),rtl.createClass(this,"TCustomMainMenu",pas["WEBLib.Controls"].TCustomControl,(function(){this.$init=function(){pas["WEBLib.Controls"].TCustomControl.$init.call(this),this.FItems=null,this.FOnChange=null},this.$final=function(){this.FItems=void 0,this.FOnChange=void 0,pas["WEBLib.Controls"].TCustomControl.$final.call(this)},this.Loaded=function(){pas["WEBLib.Controls"].TCustomControl.Loaded.call(this),this.IsUpdating()||null!=this.GetElementHandle()&&this.UpdateElement()},this.UpdateElement=function(){pas["WEBLib.Controls"].TControl.UpdateElement.call(this),this.IsUpdating()},this.GetUniqueName=function(t){var i="",s=0,n=0,r=!1;n=1,""===t&&(t=this.FName+"item"),t=e.MakeValidName(t);do{i=t+pas.SysUtils.IntToStr(n),r=!0;for(var o=0,a=this.FOwner.GetComponentCount()-1;o<=a;o++)if(s=o,this.FOwner.GetComponent(s).FName===i){r=!1,n+=1;break}}while(!r);return i},this.SetName=function(t){pas["WEBLib.Controls"].TCustomControl.SetName.apply(this,arguments),this.IsUpdating()||0 in this.FComponentState||this.UpdateElement()},this.CreateInitialize=function(){pas["WEBLib.Controls"].TCustomControl.CreateInitialize.call(this),this.FItems=t.TMenuItem.$create("Create$1",[this]),this.FItems.FParentMenu=this,this.SetWidthStyle(2),this.SetHeight(30)},this.Destroy=function(){rtl.free(this,"FItems"),pas["WEBLib.Controls"].TCustomControl.Destroy.call(this)},rtl.addIntf(this,pas.System.IUnknown);var i=this.$rtti;i.addProperty("Items",0,t.$rtti.TMenuItem,"FItems",""),i.addProperty("OnChange",0,t.$rtti.TMainMenuChangeEvent,"FOnChange","FOnChange")})),rtl.createClass(this,"TMainMenu",this.TCustomMainMenu,(function(){this.$init=function(){t.TCustomMainMenu.$init.call(this),this.FMenu=null,this.FMainMenu=!1,this.FMenuIndex=0,this.FAppearance=null,this.FContainer$1=null,this.FIsPopupMenu=!1,this.FShowPopup=!1},this.$final=function(){this.FMenu=void 0,this.FAppearance=void 0,this.FContainer$1=void 0,t.TCustomMainMenu.$final.call(this)},this.HandleChange=function(t){var e=null,i=null;return!0,this.FIsPopupMenu&&(this.FShowPopup=!1,this.UpdateElement()),(e=t.target).hasAttribute("id")||(e=e.parentElement),null!=(i=this.GetItemByName(this.FItems,e.id))&&(i.FAutoCheck&&i.SetChecked(!i.FChecked),null!=this.FOnChange&&this.FOnChange(this,i,!1),i.Click()),!0},this.Loaded=function(){t.TCustomMainMenu.Loaded.call(this),this.IsUpdating()||null!=this.GetElementHandle()&&this.UpdateElement()},this.UpdateElement=function(){var e,i="",s="",n="",r="",o="",a=null,l=null,h=null,F=null,p=null,c=null,u=null;t.TCustomMainMenu.UpdateElement.call(this),this.IsUpdating()||null==this.GetElementHandle()&&null==this.FContainer$1||(null!=this.FContainer$1?(a=this.FContainer$1.GetElementHandle(),this.SetVisible(!1)):((a=this.GetElementHandle()).style.setProperty("top",pas.SysUtils.IntToStr(this.GetTop())+"px"),a.style.setProperty("left",pas.SysUtils.IntToStr(this.GetLeft())+"px"),4 in this.FComponentState&&null==this.FContainer$1&&this.GetElementHandle().style.setProperty("background-color","silver")),this.FMenu=a.firstChild,null!=this.FMenu&&this.FMenu.parentElement.removeChild(this.FMenu),3 in this.FComponentState||(this.FMenu=document.createElement("NAV"),this.FMenu.setAttribute("id",this.GetID()+"menu"),this.FMenu.innerHTML="",null!=this.FContainer$1&&(this.FMenu.style.setProperty("top","0"),this.FMenu.style.setProperty("left","0"),this.FMenu.style.setProperty("position","absolute"),this.FMenu.style.setProperty("width","100%"),this.FMenu.style.setProperty("z-index","999997")),a.innerHTML="",a.style.setProperty("overflow","visible"),0!==this.FAppearance.FHamburgerMenu.FVisible&&(o=this.FShowPopup?"block":"none",n="  #"+this.GetID()+"menu .main-menu {\r    display: block;\r  }\r  #"+this.GetID()+"menu #toggle-menu {\r    display: none;\r  }\r  #"+this.GetID()+"menu ul span.drop-label {\r    display: inline-block;\r  }\r  #"+this.GetID()+"menu li {\r    float: left;\r    border-width: 0 1px 0 0;\r  }\r  #"+this.GetID()+"menu .popup-menu li, \r  #"+this.GetID()+"menu .sub-menu li {\r    float: none;\r  }\r  #"+this.GetID()+"menu .sub-menu {\r    top: 100%;\r  }\r  #"+this.GetID()+"menu .popup-menu { \r    top: 0;\r  }\r  #"+this.GetID()+"menu .popup-menu, \r  #"+this.GetID()+"menu .sub-menu {\r    border-width: 0;\r    margin: 0;\r    position: absolute;\r    left: 0;\r    min-width: 12em;\r    z-index: 9999999;\r\t   white-space: nowrap;\r  }\r  #"+this.GetID()+"menu .sub-menu {\r    top: 100%;\r  }\r  #"+this.GetID()+"menu .popup-menu { \r    display: "+o+";\r  }\r  #"+this.GetID()+"menu .sub-menu,\r  #"+this.GetID()+'menu input[type="checkbox"]:checked + .popup-menu,\r  #'+this.GetID()+'menu input[type="checkbox"]:checked + .sub-menu {\r    display: none;\r  }\r  #'+this.GetID()+"menu .popup-menu li, \r  #"+this.GetID()+"menu .sub-menu li {\r    border-width: 1px;\r  }\r  #"+this.GetID()+"menu .popup-menu .sub-menu, \r  #"+this.GetID()+"menu .sub-menu .sub-menu {\r    top: 0;\r    left: 100%;\r  }\r  #"+this.GetID()+'menu li:hover > input[type="checkbox"] + .popup-menu, \r  #'+this.GetID()+'menu li:hover > input[type="checkbox"] + .sub-menu {\r    display: block;\r  }\r',2===this.FAppearance.FHamburgerMenu.FVisible&&(n="@media only screen and (min-width: "+pas.SysUtils.IntToStr(this.FAppearance.FHamburgerMenu.FResponsiveMaxWidth)+"px) {\r"+n+"}")),this.FAppearance.FImageSize>0&&(r="  width: "+pas.SysUtils.IntToStr(this.FAppearance.FImageSize)+"px;\r  height: "+pas.SysUtils.IntToStr(this.FAppearance.FImageSize)+"px;\r"),i="#"+this.GetID()+"menu ul {\r  margin: 0;\r  padding: 0;\r}\r#"+this.GetID()+"menu .main-menu {\r  display: none;\r}\r#"+this.GetID()+"menu .popup-menu {\r  display: block;\r}\r#"+this.GetID()+"menu label img.icon,#"+this.GetID()+"menu label span.checked {\r"+r+"  margin-right: 10px;\r  pointer-events: none;\r}\r#tm:checked + .main-menu {\r  display: block;\r}\r#"+this.GetID()+'menu input[type="checkbox"],\r#'+this.GetID()+"menu ul span.drop-label {\r  display: none;\r}\r#"+this.GetID()+"menu li,\r#"+this.GetID()+"menu #toggle-menu,\r#"+this.GetID()+"menu .popup-menu,\r#"+this.GetID()+"menu .sub-menu {\r  border-width: 1px;\r  border-style: solid;\r  border-color: rgba(0, 0, 0, .05);\r  border-bottom: 0px;\r  border-top: 0px;\r}\r#"+this.GetID()+"menu li,\r#"+this.GetID()+"menu #toggle-menu {\r  border-width: 0 0 3px;\r}\r#"+this.GetID()+"menu .popup-menu,\r#"+this.GetID()+"menu .sub-menu {\r  border-width: 1px 1px 0;\r  margin: 0 1em;\r}\r#"+this.GetID()+"menu .popup-menu li:first-child,\r#"+this.GetID()+"menu .sub-menu li:first-child {\r  border-top: 1px solid;\r  border-color: rgba(0, 0, 0, .05);\r}\r#"+this.GetID()+"menu .popup-menu li:last-child,\r#"+this.GetID()+"menu .sub-menu li:last-child {\r  border-bottom: 1px solid;\r  border-color: rgba(0, 0, 0, .05);\r}\r#"+this.GetID()+"menu li,\r#"+this.GetID()+"menu #toggle-menu,\r#"+this.GetID()+"menu li label {\r  position: relative;\r  display: block;\r}\r#"+this.GetID()+"menu #toggle-menu,\r#"+this.GetID()+"menu li label { \r  padding: 0.75em 1.5em;\r  text-decoration: none;\r}\r#"+this.GetID()+"menu li span.menu-separator { \r  display: block;\r  width: 100%;\r  height: 1px;\r  background-color: rgba(0, 0, 0, .05);\r}\r#"+this.GetID()+"menu .popup-menu, \r#"+this.GetID()+"menu .sub-menu {\r  display: none;\r}\r#"+this.GetID()+'menu input[type="checkbox"]:checked + .popup-menu,\r#'+this.GetID()+'menu input[type="checkbox"]:checked + .sub-menu {\r  display: block;\r  z-index: 3000;\r}\r#'+this.GetID()+"menu span.drop-icon {\r  margin-left: 10px;}\r#"+this.GetID()+"menu span.hamburger-icon {\r  float: right;\r  padding: 0;\r  margin: 0;\r  font-weight: 900;\r}\r@media only screen and (max-width: 64em) and (min-width: 52.01em) {\r  #"+this.GetID()+"menu li {\r    width: auto;\r  }\r  #"+this.GetID()+"menu .sub-menu li {\r    width: auto;\r  }\r}\r",""===this.FElementClassName&&(s="#"+this.GetID()+"menu .popup-menu, \r#"+this.GetID()+"menu .sub-menu {\r  background-color: "+pas["WEBLib.Graphics"].ColorToHTML(this.FAppearance.FBackgroundColor)+";\r}\r@media only screen and (max-width: 64em) and (min-width: 52.01em) {\r#"+this.GetID()+"menu .sub-menu {\r  background-color: "+pas["WEBLib.Graphics"].ColorToHTML(this.FAppearance.FHamburgerMenu.FBackgroundColor)+";\r}\r}\r#"+this.GetID()+"menu li,\r#"+this.GetID()+"menu #toggle-menu,\r#"+this.GetID()+"menu li label {\r}\r#"+this.GetID()+"menu #toggle-menu {\r  background-color: "+pas["WEBLib.Graphics"].ColorToHTML(this.FAppearance.FHamburgerMenu.FBackgroundColor)+";\r  color: "+pas["WEBLib.Graphics"].ColorToHTML(this.FAppearance.FHamburgerMenu.FCaptionColor)+";\r}\r#"+this.GetID()+"menu .main-menu li label {\r  background-color: "+pas["WEBLib.Graphics"].ColorToHTML(this.FAppearance.FBackgroundColor)+";\r}\r#"+this.GetID()+"menu li label:hover {\r  background-color: "+pas["WEBLib.Graphics"].ColorToHTML(this.FAppearance.FHoverColor)+";\r  color: "+pas["WEBLib.Graphics"].ColorToHTML(this.FAppearance.FHoverFontColor)+";\r}\r#"+this.GetID()+"menu .popup-menu label:hover, \r#"+this.GetID()+"menu .sub-menu label:hover {\r  background-color: "+pas["WEBLib.Graphics"].ColorToHTML(this.FAppearance.FHoverColor)+";\r  color: "+pas["WEBLib.Graphics"].ColorToHTML(this.FAppearance.FHoverFontColor)+";\r}\r"),i=i+s+n,this.FMainMenu=!0,this.FMenuIndex=0,(c=document.createElement("STYLE")).innerHTML=i,(u=document.createElement("SCRIPT")).innerHTML="function "+this.GetID()+'MenuClick(ctrl){  el = ctrl.parentElement.parentElement;  el.style.display = "none";  setTimeout(function(){el.style.removeProperty("display")}, 25);}function '+this.GetID()+'MenuOut(ctrl){  menuel = document.getElementById("'+this.GetID()+'");  if(menuel) {     popupel = menuel.getElementsByClassName("popup-menu");    if(popupel)       setTimeout(function(){popupel[0].style.display = "none"}, 25);  }}',(l=document.createElement("LABEL")).setAttribute("for","tm"),l.setAttribute("id","toggle-menu"),l.innerHTML=this.FAppearance.FHamburgerMenu.FCaption,(h=document.createElement("SPAN")).setAttribute("class","drop-label"),l.appendChild(h),(F=document.createElement("SPAN")).setAttribute("class","hamburger-icon"),F.innerHTML="&#9776;",h.appendChild(F),(p=document.createElement("INPUT")).setAttribute("type","checkbox"),p.setAttribute("id","tm"),this.FMenu.appendChild(c),this.FMenu.appendChild(u),this.FMenu.appendChild(l),this.FMenu.appendChild(p),null!==(e=this.GetMenuSource(this.FItems))&&this.FMenu.appendChild(e),a.appendChild(this.FMenu)))},this.GetMenuSource=function(t){var i=null,s=0,n=null,r="",o=null,a=null,l=null,h=null,F=0,p="";if(i=null,null!=t.FItems&&t.FItems.GetCount()>0){i=document.createElement("UL"),this.FMainMenu?(this.FMainMenu=!1,r=this.FIsPopupMenu?"popup-menu":"main-menu"):r="sub-menu",this.FMenuIndex=this.FMenuIndex+1,i.setAttribute("class",r);for(var c=0,u=t.FItems.GetCount()-1;c<=u;c++)s=c,F+=1,""===(n=t.FItems.GetItem(s)).FName&&(p=pas.SysUtils.StringReplace(n.FCaption," ","",rtl.createSet(0)),""===(p=e.MakeValidName(p))&&(p="MenuItem"+pas.SysUtils.IntToStr(F)),n.SetName(p+pas.SysUtils.IntToStr(F))),n.FVisible&&(o=document.createElement("LI"),"-"!==n.FCaption?((a=document.createElement("LABEL")).setAttribute("class","drop-label"),a.setAttribute("title",n.FHint),n.FImageIndex>=0&&this.FAppearance.FImageURLs.GetCount()>n.FImageIndex?a.innerHTML='<img class="icon" src="'+this.FAppearance.FImageURLs.Get(n.FImageIndex)+'">':n.FChecked&&(n.FRadioItem?a.innerHTML='<span class="checked">&#9679;</span>':a.innerHTML='<span class="checked">&#10004;</span>'),a.innerHTML=a.innerHTML+n.FCaption):((a=document.createElement("SPAN")).setAttribute("class","menu-separator"),a.innerHTML=""),null!=n.FItems&&n.FItems.GetCount()>0?((h=document.createElement("SPAN")).setAttribute("class","drop-icon"),h.innerHTML=this.FAppearance.FSubmenuIndicator,a.setAttribute("for","sm"+pas.SysUtils.IntToStr(this.FMenuIndex)),a.appendChild(h),(l=document.createElement("INPUT")).setAttribute("type","checkbox"),l.setAttribute("id","sm"+pas.SysUtils.IntToStr(this.FMenuIndex)),o.appendChild(a),o.appendChild(l),o.appendChild(this.GetMenuSource(n))):(a.setAttribute("for","tm"),a.setAttribute("id",n.FName),n.FEnabled?("sub-menu"===r&&n.FEnabled&&a.setAttribute("onMouseUp",this.GetID()+"MenuClick(this);"),a.addEventListener("click",rtl.createSafeCallback(this,"HandleChange"))):a.style.setProperty("color","gray"),o.appendChild(a)),i.appendChild(o))}return i},this.GetItemByName=function(t,e){var i=null,s=0,n=null;if(i=null,null!=t.FItems)for(var r=0,o=t.FItems.GetCount()-1;r<=o;r++){if(s=r,(n=t.FItems.GetItem(s)).FName===e)return i=n,null!=n.FOnClick&&(i.FOnClick=n.FOnClick),i;null==i&&(i=this.GetItemByName(n,e))}return i},this.CreateInitialize=function(){t.TCustomMainMenu.CreateInitialize.call(this),this.FAppearance=t.TMainMenuAppearance.$create("Create$1",[this]),this.FContainer$1=null,this.FMainMenu=!0,this.FMenuIndex=0,this.FIsPopupMenu=!1,this.FShowPopup=!1,this.SetTop(0),this.SetLeft(0),this.SetWidth(100),4 in this.FComponentState&&(this.SetElementPosition(1),this.SetWidthPercent(100),this.SetWidthStyle(0))},this.CreateElement=function(){var t=null,e=null;return 4 in this.FComponentState?(t=document.createElement("DIV"),(e=document.createElement("DIV")).innerHTML="TWebMainMenu",this.SetBorderStyle(1),e.setAttribute("align","center"),e.style.setProperty("border","1px solid gray"),e.style.setProperty("vertical-align","middle"),e.style.setProperty("display","table-cell"),t.appendChild(e)):(t=document.createElement("DIV"),this.FIsPopupMenu&&t.setAttribute("onMouseLeave",this.GetID()+"MenuOut(this);")),t},this.Destroy=function(){rtl.free(this,"FAppearance"),t.TCustomMainMenu.Destroy.call(this)},rtl.addIntf(this,pas.System.IUnknown);var i=this.$rtti;i.addProperty("Appearance",0,t.$rtti.TMainMenuAppearance,"FAppearance","FAppearance"),i.addProperty("Container",0,pas["WEBLib.Controls"].$rtti.TControl,"FContainer$1","FContainer$1")})),rtl.createClass(this,"TPopupMenu",this.TMainMenu,(function(){this.CreateInitialize=function(){t.TMainMenu.CreateInitialize.call(this),this.FAppearance.FHamburgerMenu.SetVisible(1),this.FIsPopupMenu=!0},this.Popup=function(t,e){this.SetTop(e),this.SetLeft(t),this.FShowPopup=!0,this.UpdateElement(),this.FShowPopup=!1},rtl.addIntf(this,pas.System.IUnknown)})),rtl.createClass(this,"TWebCustomControl",pas["WEBLib.Controls"].TCustomControl,(function(){this.$init=function(){pas["WEBLib.Controls"].TCustomControl.$init.call(this),this.FPopupMenu=null},this.$final=function(){this.FPopupMenu=void 0,pas["WEBLib.Controls"].TCustomControl.$final.call(this)},this.HandleDoContextMenu=function(t){var e=!1,i=pas.Types.TPoint.$new(),s=null,n=null;return pas["WEBLib.Controls"].TControl.HandleDoContextMenu.apply(this,arguments),null!=this.FPopupMenu&&(t.stopPropagation(),t.preventDefault(),i.$assign(pas.Types.Point(Math.round(t.clientX),Math.round(t.clientY))),null!=(s=pas["WEBLib.Forms"].GetParentForm(this))&&null!=s.GetContainer()&&(n=s.GetContainer().getBoundingClientRect(),i.x=i.x-Math.round(n.left),i.y=i.y-Math.round(n.top)),this.FPopupMenu.Popup(i.x,i.y),e=!0),e},this.Notification=function(t,e){pas.Classes.TComponent.Notification.apply(this,arguments),1===e&&t===this.FPopupMenu&&(this.FPopupMenu=null)},rtl.addIntf(this,pas.System.IUnknown)})),t.$implcode=function(){var t=rtl.createSet(null,65,90,null,97,122,95),i=rtl.unionSet(t,rtl.createSet(null,48,57));e.MakeValidName=function(t){var e="",s=0;e="";for(var n=1,r=t.length;n<=r;n++)s=n,t.charCodeAt(s-1)in i&&(e+=t.charAt(s-1));return e}}}),["Types","WEBLib.Forms"]),rtl.module("WEBLib.WebCtrls",["System","Classes","WEBLib.Controls","WEBLib.Graphics","SysUtils","Web","JS","WEBLib.Menus"],(function(){"use strict";var t=this,e=t.$impl;this.$rtti.$MethodVar("TFilesDroppedEvent",{procsig:rtl.newTIProcSig([["Sender",pas.System.$rtti.TObject],["AFileList",pas.Classes.$rtti.TStringList]]),methodkind:0}),this.$rtti.$MethodVar("TFileAsTextEvent",{procsig:rtl.newTIProcSig([["Sender",pas.System.$rtti.TObject],["AFileIndex",rtl.longint],["AText",rtl.string]]),methodkind:0}),this.$rtti.$MethodVar("TFileAsBase64Event",{procsig:rtl.newTIProcSig([["Sender",pas.System.$rtti.TObject],["AFileIndex",rtl.longint],["ABase64",rtl.string]]),methodkind:0}),this.$rtti.$MethodVar("TFileAsDataURLEvent",{procsig:rtl.newTIProcSig([["Sender",pas.System.$rtti.TObject],["AFileIndex",rtl.longint],["AURL",rtl.string]]),methodkind:0}),this.$rtti.$MethodVar("TFileAsArrayBufferEvent",{procsig:rtl.newTIProcSig([["Sender",pas.System.$rtti.TObject],["AFileIndex",rtl.longint],["ABuffer",pas["WEBLib.Controls"].$rtti.TJSArrayBufferRecord]]),methodkind:0}),this.$rtti.$MethodVar("TFileAsStreamEvent",{procsig:rtl.newTIProcSig([["Sender",pas.System.$rtti.TObject],["AFileIndex",rtl.longint],["AStream",pas.Classes.$rtti.TStream]]),methodkind:0}),this.$rtti.$MethodVar("TFileUploadEvent",{procsig:rtl.newTIProcSig([["Sender",pas.System.$rtti.TObject],["AFileIndex",rtl.longint]]),methodkind:0}),this.$rtti.$MethodVar("TFileUploadResponseEvent",{procsig:rtl.newTIProcSig([["Sender",pas.System.$rtti.TObject],["AFileIndex",rtl.longint],["ARequest",pas["WEBLib.Controls"].$rtti.TJSXMLHttpRequestRecord],["AResponse",rtl.string]]),methodkind:0}),this.$rtti.$MethodVar("TFileUploadErrorEvent",{procsig:rtl.newTIProcSig([["Sender",pas.System.$rtti.TObject],["AFileIndex",rtl.longint],["AError",rtl.string]]),methodkind:0}),this.$rtti.$MethodVar("TFileUploadProgressEvent",{procsig:rtl.newTIProcSig([["Sender",pas.System.$rtti.TObject],["AFileIndex",rtl.longint],["APosition",rtl.longint],["ATotalSize",rtl.longint]]),methodkind:0}),rtl.createClass(this,"TFile",pas.Classes.TCollectionItem,(function(){this.$init=function(){pas.Classes.TCollectionItem.$init.call(this),this.FModified=0,this.FName="",this.FMimeType="",this.FSize=0,this.FFileObject=null,this.FOnGetFileAsBase64=null,this.FGetAsString=null},this.$final=function(){this.FFileObject=void 0,this.FOnGetFileAsBase64=void 0,this.FGetAsString=void 0,pas.Classes.TCollectionItem.$final.call(this)},this.HandleFileLoadAsBase64=function(e){var i,s;return!0,i=function(t){for(var e="",i=new Uint8Array(t),s=i.byteLength,n=0;n<s;n++)e+=String.fromCharCode(i[n]);return window.btoa(e)}(event.target.result),null!=this.FGetAsString&&this.FGetAsString(i),this.FGetAsString=null,null!=this.FOnGetFileAsBase64&&this.FOnGetFileAsBase64(this,i),null!=(s=this.GetControl())&&(t.TFilePicker.isPrototypeOf(s)&&null!=rtl.as(s,t.TFilePicker).FOnFileAsBase64&&rtl.as(s,t.TFilePicker).FOnFileAsBase64(s,this.GetIndex(),i),t.TFileUpload.isPrototypeOf(s)&&null!=rtl.as(s,t.TFileUpload).FOnFileAsBase64&&rtl.as(s,t.TFileUpload).FOnFileAsBase64(s,this.GetIndex(),i),pas["WEBLib.Dialogs"].TWebOpenDialog.isPrototypeOf(s)&&null!=rtl.as(s,pas["WEBLib.Dialogs"].TWebOpenDialog).FOnFileAsBase64&&rtl.as(s,pas["WEBLib.Dialogs"].TWebOpenDialog).FOnFileAsBase64(s,this.GetIndex(),i)),!0},this.GetControl=function(){var e=null;return e=null,null!=this.FCollection&&null!=rtl.as(this.FCollection,t.TFiles).Owner$1()&&pas.Classes.TComponent.isPrototypeOf(rtl.as(this.FCollection,t.TFiles).Owner$1())&&(e=rtl.as(rtl.as(this.FCollection,t.TFiles).Owner$1(),pas.Classes.TComponent)),e},this.FileAsBase64=function(){var t=this,e=null;return new Promise((function(i,s){(e=new FileReader).onload=rtl.createSafeCallback(null,(function(t){var e;return e=function(t){for(var e="",i=new Uint8Array(t),s=i.byteLength,n=0;n<s;n++)e+=String.fromCharCode(i[n]);return window.btoa(e)}(t.target.result),i(e),!1})),e.readAsArrayBuffer(t.FFileObject)}))},this.GetFileAsBase64=function(){var t,e;t=rtl.createCallback(this,"HandleFileLoadAsBase64"),e=this.FFileObject;var i=new FileReader;i.addEventListener("load",t),i.readAsArrayBuffer(e)}})),rtl.createClass(this,"TFiles",pas.Classes.TCollection,(function(){this.$init=function(){pas.Classes.TCollection.$init.call(this),this.FOwner=null},this.$final=function(){this.FOwner=void 0,pas.Classes.TCollection.$final.call(this)},this.GetItem$1=function(t){return this.GetItem(t)},this.Create$2=function(e){return pas.Classes.TCollection.Create$1.call(this,t.TFile),this.FOwner=e,this},this.Owner$1=function(){return this.FOwner},this.Add$1=function(){return pas.Classes.TCollection.Add.call(this)}})),rtl.createClass(this,"TFileUpload",pas["WEBLib.Controls"].TCustomControl,(function(){this.$init=function(){pas["WEBLib.Controls"].TCustomControl.$init.call(this),this.FAccept="",this.FCreateRef="",this.FEventInit=!1,this.FFiles=null,this.FFileList=null,this.FOnDroppedFiles=null,this.FMultiFile=!1,this.FShowFiles=!1,this.FDragCaption="",this.FOnGetFileAsArrayBuffer=null,this.FOnFileAsText=null,this.FOnFileAsBase64=null,this.FOnFileAsDataURL=null,this.FOnUploadFileAbort=null,this.FOnUploadFileComplete=null,this.FOnUploadFileProgress=null,this.FOnUploadFileError=null,this.FOnUploadFileResponseComplete=null,this.FOnGetFileAsStream=null,this.FFontHoverColor=0,this.FShowPicture=!1,this.FDragColor=0},this.$final=function(){this.FFiles=void 0,this.FFileList=void 0,this.FOnDroppedFiles=void 0,this.FOnGetFileAsArrayBuffer=void 0,this.FOnFileAsText=void 0,this.FOnFileAsBase64=void 0,this.FOnFileAsDataURL=void 0,this.FOnUploadFileAbort=void 0,this.FOnUploadFileComplete=void 0,this.FOnUploadFileProgress=void 0,this.FOnUploadFileError=void 0,this.FOnUploadFileResponseComplete=void 0,this.FOnGetFileAsStream=void 0,pas["WEBLib.Controls"].TCustomControl.$final.call(this)},this.SetDragCaption=function(t){this.FDragCaption=t,this.UpdateElement()},this.SetAccept=function(t){this.FAccept!==t&&(this.FAccept=t,this.UpdateElement())},this.SetShowPicture=function(t){this.FShowPicture!==t&&(this.FShowPicture=t,this.UpdateElement())},this.SetCaption=function(t){this.FCaption!==t&&(pas["WEBLib.Controls"].TCustomControl.SetCaption.call(this,t),this.UpdateElement())},this.HandleFiles=function(t){var e,i=0,s=0,n=null,r="",o="",a=null;for(r="";this.FFiles.GetCount()>0;)this.FFiles.Delete(0);for(;this.FFileList.GetCount()>0;)this.FFileList.Delete(0);for(var l=0,h=t.length-1;l<=h;l++){i=l,n=t.item(i),a=new Date(n.lastModified),o=n.type,s=n.size;var F=this.FFiles.Add$1();if(F.FFileObject=n,F.FName=n.name,F.FMimeType=o,F.FSize=s,F.FModified=pas.SysUtils.EncodeDate(a.getYear()+1900,a.getMonth()+1,a.getDate())+pas.SysUtils.EncodeTime(a.getHours(),a.getMinutes(),a.getSeconds(),a.getMilliseconds()),null!=this.FFileList&&this.FFileList.Add(n.name),this.FShowFiles&&(i>0&&(r+="<br>"),r+=n.name),!this.FMultiFile)break}return e=r,null!=this.FOnDroppedFiles&&this.FOnDroppedFiles(this,this.FFileList),e},this.DoHandleChange=function(t){var e=null,i=null,s="";return!0,null!=this.GetElementHandle()&&null!=(e=t.target)&&(i=e.files,s=this.HandleFiles(i),this.FShowFiles&&(document.getElementById(this.GetID()+"fileslist").innerHTML=s)),!0},this.HandleDroppedFiles=function(t){var e,i;return!0,t.preventDefault(),t.stopPropagation(),e=t.dataTransfer.files,i=this.HandleFiles(e),this.FShowFiles&&(document.getElementById(this.GetID()+"fileslist").innerHTML=i),this.GetContainer().setAttribute("class","box has-advanced-upload"),!0},this.HandleDragOver=function(t){return!0,t.preventDefault(),t.stopPropagation(),null!=this.GetContainer()&&this.GetContainer().setAttribute("class","box has-advanced-upload is-dragover"),null!=this.GetElementHandle()&&-1!==this.FDragColor&&this.GetElementHandle().style.setProperty("background-color",pas["WEBLib.Graphics"].ColorToHTML(this.FDragColor)),!0},this.HandleDragEnd=function(t){return!0,t.preventDefault(),t.stopPropagation(),null!=this.GetContainer()&&this.GetContainer().setAttribute("class","box has-advanced-upload"),null!=this.GetElementHandle()&&(-1!==this.FColor&&-1!==this.FDragColor?this.GetElementHandle().style.setProperty("background-color",pas["WEBLib.Graphics"].ColorToHTML(this.FColor)):this.GetElementHandle().style.removeProperty("background-color")),!0},this.CreateElement=function(){var t=null;return this.CreateCSS(),this.FCreateRef=this.FName,(t=document.createElement("FORM")).setAttribute("method","post"),t.setAttribute("class","box"),t.setAttribute("enctype","multipart/form-data"),t.style.setProperty("display","flex"),t.style.setProperty("justify-content","center"),t.style.setProperty("align-items","center"),t.innerHTML='<div class="box__input" style="text-align: center"><svg class="box__icon" xmlns="http://www.w3.org/2000/svg" width="50" height="43" viewBox="0 0 50 43"><path d="M48.4 26.5c-.9 0-1.7.7-1.7 1.7v11.6h-43.3v-11.6c0-.9-.7-1.7-1.7-1.7s-1.7.7-1.7 1.7v13.2c0 .9.7 1.7 1.7 1.7h46.7c.9 0 1.7-.7 1.7-1.7v-13.2c0-1-.7-1.7-1.7-1.7zm-24.5 6.1c.3.3.8.5 1.2.5.4 0 .9-.2 1.2-.5l10-11.6c.7-.7.7-1.7 0-2.4s-1.7-.7-2.4 0l-7.1 8.3v-25.3c0-.9-.7-1.7-1.7-1.7s-1.7.7-1.7 1.7v25.3l-7.1-8.3c-.7-.7-1.7-.7-2.4 0s-.7 1.7 0 2.4l10 11.6z"/></svg><input class="box__file" type="file" name="files[]" id="FP'+this.FName+'" data-multiple-caption="{count} files selected" multiple/><label for="FP'+this.FName+'" style="outline:none"><strong id="'+this.FName+'lbl">'+this.FCaption+'</strong>&nbsp;<span class="box__dragndrop" id="'+this.FName+'drag">'+this.FDragCaption+'</span>.</label><button class="box__button" type="submit">Upload</button><br><span style="display:inline-block;" id="'+this.FName+'fileslist"></span></div><div class="box__uploading">Uploading&hellip;</div>',t.addEventListener("drop",rtl.createCallback(this,"HandleDroppedFiles")),t.addEventListener("dragenter",rtl.createCallback(this,"HandleDragOver")),t.addEventListener("dragover",rtl.createCallback(this,"HandleDragOver")),t.addEventListener("dragend",rtl.createCallback(this,"HandleDragEnd")),t.addEventListener("dragleave",rtl.createCallback(this,"HandleDragEnd")),e.isAdvancedUpload()&&t.classList.add("has-advanced-upload"),t},this.UpdateElement=function(){var t=null;pas["WEBLib.Controls"].TControl.UpdateElement.call(this),this.CreateCSS(),null!=this.GetElementHandle()&&(this.GetElementHandle().style.setProperty("display","flex"),t=(t=this.GetElementHandle().children.item(0)).children.item(0),this.FShowPicture?t.style.removeProperty("display"):t.style.setProperty("display","none"),1!==this.FElementFont?t.style.setProperty("color",pas["WEBLib.Graphics"].ColorToHTML(this.FFont.FColor)):t.style.removeProperty("color"),null!=(t=document.getElementById("FP"+this.FCreateRef))&&(this.FEventInit||(this.FEventInit=!0,t.addEventListener("change",rtl.createSafeCallback(this,"DoHandleChange"))),this.FMultiFile?t.setAttribute("multiple",""):t.removeAttribute("multiple"),""!==this.FAccept?t.setAttribute("accept",this.FAccept):t.removeAttribute("accept")),null!=(t=document.getElementById(this.FCreateRef+"lbl"))&&(t.innerHTML=this.FCaption),null!=(t=document.getElementById(this.FCreateRef+"drag"))&&(t.innerHTML=this.FDragCaption))},this.ColorChanging=function(){pas["WEBLib.Controls"].TControl.ColorChanging.call(this),this.UpdateElement()},this.CreateCSS=function(){this.AddControlStyle("  \t.box\t\t\t{ \t\t\tposition: relative;\t    \tpadding: 2px 2px;\t\t}\t\t.box.has-advanced-upload\t\t{\t\t\toutline: 2px dashed #92b0b3;\t\t\toutline-offset: -10px;\t\t\t-webkit-transition: outline-offset .15s ease-in-out, background-color .15s linear;\t\t\ttransition: outline-offset .15s ease-in-out, background-color .15s linear;\t\t}\t\t.box.is-dragover\t\t{\t\t\toutline-offset: -20px;\t\t\toutline-color: #c8dadf;\t\t\tbackground-color: #fff;\t\t}\t\t\t.box__dragndrop,\t\t\t.box__icon\t\t\t{\t\t\t\tdisplay: none;\t\t\t}\t\t\t.box.has-advanced-upload .box__dragndrop\t\t\t{\t\t\t\tdisplay: inline;\t\t\t}\t\t\t.box.has-advanced-upload .box__icon\t\t\t{\t\t\t\twidth: 100%;\t\t\t\theight: 80px;\t\t\t\tfill: #92b0b3;\t\t\t\tdisplay: block;\t\t\t\tmargin-bottom: 40px;\t\t\t}\t\t\t.box.is-uploading .box__input,\t\t\t.box.is-success .box__input,\t\t\t.box.is-error .box__input\t\t\t{\t\t\t\tvisibility: hidden;\t\t\t}\t\t\t.box__uploading,\t\t\t.box__success,\t\t\t.box__error\t\t\t{\t\t\tdisplay: none;\t\t\t}\t\t\t.box.is-uploading .box__uploading,\t\t\t.box.is-success .box__success,\t\t\t.box.is-error .box__error\t\t\t{\t\t\t\tdisplay: block;\t\t\t\tposition: absolute;\t\t\t\ttop: 50%;       right: 0;\t\t\t\tleft: 0;\t   \t\t-webkit-transform: translateY( -50% );\t\t\t\t\ttransform: translateY( -50% );\t\t\t\t}\t\t\t\t.box__uploading\t\t\t\t{\t\t\t\t\tfont-style: italic;\t\t\t\t}\t\t\t\t.box__success\t\t\t\t{\t\t\t\t\t-webkit-animation: appear-from-inside .25s ease-in-out;\t\t\t\t\tanimation: appear-from-inside .25s ease-in-out;\t\t\t\t}\t\t\t\t\t@-webkit-keyframes appear-from-inside\t\t\t\t\t{\t\t\t\t\t\tfrom\t{ -webkit-transform: translateY( -50% ) scale( 0 ); }\t\t\t\t\t\t75%\t\t{ -webkit-transform: translateY( -50% ) scale( 1.1 ); }\t\t\t\t\t\tto\t\t{ -webkit-transform: translateY( -50% ) scale( 1 ); }\t\t\t\t\t}\t\t\t\t\t@keyframes appear-from-inside\t\t\t\t\t{\t\t\t\t\t\tfrom\t{ transform: translateY( -50% ) scale( 0 ); }\t\t\t\t\t\t75%\t\t{ transform: translateY( -50% ) scale( 1.1 ); }\t\t\t\t\t\tto\t\t{ transform: translateY( -50% ) scale( 1 ); }\t\t\t\t\t}\t\t\t\t.box__restart\t\t\t\t{\t\t\t\t\tfont-weight: 700;\t\t\t\t}\t\t\t\t.box__restart:focus,\t\t\t\t.box__restart:hover\t\t\t\t{\t\t\t\t\tcolor: "+pas["WEBLib.Graphics"].ColorToHTML(this.FFontHoverColor)+";\t\t\t\t}\t\t\t\t.box__file\t\t\t\t{\t\t\t\t\twidth: 0.1px;\t\t\t\t\theight: 0.1px;\t\t\t\t\topacity: 0;\t\t\t\t\toverflow: hidden;\t\t\t\t\tposition: absolute;\t\t\t\t\tz-index: -1;\t\t\t\t}\t\t\t\t.box__file + label\t\t\t\t{\t\t\t\t\ttext-overflow: ellipsis;\t\t\t\t\twhite-space: nowrap;\t\t\t\t\tcursor: pointer;\t\t\t\t\tdisplay: inline-block;\t\t\t\t\toverflow: hidden;\t\t\t\t}\t\t\t\t.box__file + label:hover strong,\t\t\t\t.box__file:focus + label strong,\t\t\t\t.box__file.has-focus + label strong\t\t\t\t{\t\t\t\t\tcolor: "+pas["WEBLib.Graphics"].ColorToHTML(this.FFontHoverColor)+";\t\t\t\t}\t\t\t\t.box__file:focus + label,\t\t\t\t.box__file.has-focus + label\t\t\t\t{ \t\t\t\toutline: 1px dotted #000;\t\t\t\t\toutline: -webkit-focus-ring-color auto 5px;\t\t\t\t}\t\t\t\t.box__button\t\t\t\t{\t\t\t\t\tfont-weight: 700;\t\t\t\t\tcolor: #e5edf1;\t\t\t\t\tbackground-color: #39bfd3;\t\t\t\t\tdisplay: none;\t\t\t\t\tpadding: 8px 16px;\t\t\t\t\tmargin: 10px auto 0;\t\t\t\t}\t\t\t\t\t.box__button:hover,\t\t\t\t\t.box__button:focus\t\t\t\t\t{\t\t\t\t\t\tbackground-color: #0f3c4b;\t\t\t\t\t}")},this.Create$1=function(e){return pas["WEBLib.Controls"].TControl.Create$1.apply(this,arguments),this.SetColor(14670536),this.FFontHoverColor=13877049,this.SetCaption("Choose a file"),this.FDragCaption="or drag it here",this.FDragColor=-1,this.FShowPicture=!0,this.FFiles=t.TFiles.$create("Create$2",[this]),this.FFileList=pas.Classes.TStringList.$create("Create$1"),this.FFileList.SetSkipLastLineBreak(!0),this},this.Destroy=function(){rtl.free(this,"FFiles"),rtl.free(this,"FFileList"),pas["WEBLib.Controls"].TCustomControl.Destroy.call(this)},this.CreateInitialize=function(){pas["WEBLib.Controls"].TCustomControl.CreateInitialize.call(this),this.FMultiFile=!1,this.FShowFiles=!1,this.FEventInit=!1,this.SetWidth(170),this.SetHeight(190)},rtl.addIntf(this,pas.System.IUnknown);var i=this.$rtti;i.addProperty("Accept",2,rtl.string,"FAccept","SetAccept"),i.addProperty("Caption",2,rtl.string,"FCaption","SetCaption"),i.addProperty("ChildOrder",2,rtl.longint,"FChildOrder","SetChildOrderEx",{Default:0}),i.addProperty("Color",2,pas["WEBLib.Graphics"].$rtti.TColor,"FColor","SetColor",{Default:14670536}),i.addProperty("DragCaption",2,rtl.string,"FDragCaption","SetDragCaption"),i.addProperty("DragColor",0,pas["WEBLib.Graphics"].$rtti.TColor,"FDragColor","FDragColor",{Default:-1}),i.addProperty("ElementFont",2,pas["WEBLib.Controls"].$rtti.TElementFont,"FElementFont","SetElementFont",{Default:pas["WEBLib.Controls"].TElementFont.efProperty}),i.addProperty("Font",2,pas["WEBLib.Graphics"].$rtti.TFont,"FFont","SetFont"),i.addProperty("FontHoverColor",0,pas["WEBLib.Graphics"].$rtti.TColor,"FFontHoverColor","FFontHoverColor",{Default:13877049}),i.addProperty("HeightPercent",2,rtl.double,"FHeightPercent","SetHeightPercent",{Default:100}),i.addProperty("HeightStyle",2,pas["WEBLib.Controls"].$rtti.TSizeStyle,"FHeightStyle","SetHeightStyle",{Default:pas["WEBLib.Controls"].TSizeStyle.ssAbsolute}),i.addProperty("Multifile",0,rtl.boolean,"FMultiFile","FMultiFile",{Default:!1}),i.addProperty("ParentFont",2,rtl.boolean,"FParentFont","SetParentFont",{Default:!0}),i.addProperty("ShowFiles",0,rtl.boolean,"FShowFiles","FShowFiles",{Default:!1}),i.addProperty("ShowPicture",2,rtl.boolean,"FShowPicture","SetShowPicture",{Default:!0}),i.addProperty("WidthPercent",2,rtl.double,"FWidthPercent","SetWidthPercent",{Default:100}),i.addProperty("WidthStyle",2,pas["WEBLib.Controls"].$rtti.TSizeStyle,"FWidthStyle","SetWidthStyle",{Default:pas["WEBLib.Controls"].TSizeStyle.ssAbsolute}),i.addProperty("OnDroppedFiles",0,t.$rtti.TFilesDroppedEvent,"FOnDroppedFiles","FOnDroppedFiles"),i.addProperty("OnGetFileAsText",0,t.$rtti.TFileAsTextEvent,"FOnFileAsText","FOnFileAsText"),i.addProperty("OnGetFileAsArrayBuffer",0,t.$rtti.TFileAsArrayBufferEvent,"FOnGetFileAsArrayBuffer","FOnGetFileAsArrayBuffer"),i.addProperty("OnGetFileAsStream",0,t.$rtti.TFileAsStreamEvent,"FOnGetFileAsStream","FOnGetFileAsStream"),i.addProperty("OnGetFileAsBase64",0,t.$rtti.TFileAsBase64Event,"FOnFileAsBase64","FOnFileAsBase64"),i.addProperty("OnGetFileAsDataURL",0,t.$rtti.TFileAsDataURLEvent,"FOnFileAsDataURL","FOnFileAsDataURL"),i.addProperty("OnUploadFileComplete",0,t.$rtti.TFileUploadEvent,"FOnUploadFileComplete","FOnUploadFileComplete"),i.addProperty("OnUploadFileResponseComplete",0,t.$rtti.TFileUploadResponseEvent,"FOnUploadFileResponseComplete","FOnUploadFileResponseComplete"),i.addProperty("OnUploadFileAbort",0,t.$rtti.TFileUploadEvent,"FOnUploadFileAbort","FOnUploadFileAbort"),i.addProperty("OnUploadFileError",0,t.$rtti.TFileUploadErrorEvent,"FOnUploadFileError","FOnUploadFileError"),i.addProperty("OnUploadFileProgress",0,t.$rtti.TFileUploadProgressEvent,"FOnUploadFileProgress","FOnUploadFileProgress")})),rtl.createClass(this,"TFilePicker",pas["WEBLib.Controls"].TCustomControl,(function(){this.$init=function(){pas["WEBLib.Controls"].TCustomControl.$init.call(this),this.FOnChange=null,this.FMultiFile=!1,this.FFiles=null,this.FOnFileAsText=null,this.FOnGetFileAsArrayBuffer=null,this.FAccept="",this.FOnFileAsBase64=null,this.FChangePtr=null,this.FOnFileAsDataURL=null,this.FOnUploadFileAbort=null,this.FOnUploadFileComplete=null,this.FOnUploadFileProgress=null,this.FOnUploadFileError=null,this.FOnUploadFileResponseComplete=null,this.FOnGetFileAsStream=null},this.$final=function(){this.FOnChange=void 0,this.FFiles=void 0,this.FOnFileAsText=void 0,this.FOnGetFileAsArrayBuffer=void 0,this.FOnFileAsBase64=void 0,this.FOnFileAsDataURL=void 0,this.FOnUploadFileAbort=void 0,this.FOnUploadFileComplete=void 0,this.FOnUploadFileProgress=void 0,this.FOnUploadFileError=void 0,this.FOnUploadFileResponseComplete=void 0,this.FOnGetFileAsStream=void 0,pas["WEBLib.Controls"].TCustomControl.$final.call(this)},this.SetMultiFile=function(t){this.FMultiFile!==t&&(this.FMultiFile=t,this.UpdateElement())},this.DoHandleChange=function(t){var e=0,i=0,s="",n="",r=null,o=null,a=null;for(!0;this.FFiles.GetCount()>0;)this.FFiles.Delete(0);for(var l=this.GetElementHandle().files,h=0,F=l.length-1;h<=F;h++)e=h,r=this.FFiles.Add$1(),a=l[e],s=l[e].name,n=l[e].type,i=l[e].size,o=new Date(l[e].lastModified),r.FFileObject=a,r.FName=s,r.FMimeType=n,r.FSize=i,r.FModified=pas.SysUtils.EncodeDate(o.getYear()+1900,o.getMonth()+1,o.getDate())+pas.SysUtils.EncodeTime(o.getHours(),o.getMinutes(),o.getSeconds(),o.getMilliseconds());return null!=this.FOnChange&&this.FOnChange(this),!0},this.SetAccept=function(t){this.FAccept!==t&&(this.FAccept=t,this.UpdateElement())},this.UpdateElement=function(){pas["WEBLib.Controls"].TControl.UpdateElement.call(this),null!=this.GetElementHandle()&&(this.FMultiFile?this.GetElementHandle().setAttribute("multiple",""):this.GetElementHandle().removeAttribute("multiple"),""!==this.FAccept?this.GetElementHandle().setAttribute("accept",this.FAccept):this.GetElementHandle().removeAttribute("accept"))},this.CreateElement=function(){var t=null;return(t=document.createElement("INPUT")).setAttribute("type","file"),t},this.GetMethodPointers=function(){null===this.FChangePtr&&(this.FChangePtr=rtl.createCallback(this,"DoHandleChange"),pas["WEBLib.Controls"].TControl.GetMethodPointers.call(this))},this.BindEvents=function(){pas["WEBLib.Controls"].TCustomControl.BindEvents.call(this),null!=this.GetElementBindHandle()&&this.GetElementBindHandle().addEventListener("change",rtl.createSafeCallback(this,"DoHandleChange"))},this.CreateInitialize=function(){pas["WEBLib.Controls"].TCustomControl.CreateInitialize.call(this),this.FFiles=t.TFiles.$create("Create$2",[this]),this.SetWidth(160),this.SetHeight(40)},this.Destroy=function(){rtl.free(this,"FFiles"),pas["WEBLib.Controls"].TCustomControl.Destroy.call(this)},rtl.addIntf(this,pas.System.IUnknown);var e=this.$rtti;e.addProperty("Accept",2,rtl.string,"FAccept","SetAccept"),e.addProperty("ChildOrder",2,rtl.longint,"FChildOrder","SetChildOrderEx",{Default:0}),e.addProperty("ElementClassName",2,pas["WEBLib.Controls"].$rtti.TElementClassName,"FElementClassName","SetElementClassName"),e.addProperty("ElementFont",2,pas["WEBLib.Controls"].$rtti.TElementFont,"FElementFont","SetElementFont",{Default:pas["WEBLib.Controls"].TElementFont.efProperty}),e.addProperty("ElementID",3,pas["WEBLib.Controls"].$rtti.TElementID,"GetID","SetID"),e.addProperty("ElementPosition",2,pas["WEBLib.Controls"].$rtti.TElementPosition,"FElementPosition","SetElementPosition",{Default:pas["WEBLib.Controls"].TElementPosition.epAbsolute}),e.addProperty("HeightPercent",2,rtl.double,"FHeightPercent","SetHeightPercent",{Default:100}),e.addProperty("HeightStyle",2,pas["WEBLib.Controls"].$rtti.TSizeStyle,"FHeightStyle","SetHeightStyle",{Default:pas["WEBLib.Controls"].TSizeStyle.ssAbsolute}),e.addProperty("Multifile",2,rtl.boolean,"FMultiFile","SetMultiFile"),e.addProperty("WidthPercent",2,rtl.double,"FWidthPercent","SetWidthPercent",{Default:100}),e.addProperty("WidthStyle",2,pas["WEBLib.Controls"].$rtti.TSizeStyle,"FWidthStyle","SetWidthStyle",{Default:pas["WEBLib.Controls"].TSizeStyle.ssAbsolute}),e.addProperty("OnChange",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnChange","FOnChange"),e.addProperty("OnGetFileAsText",0,t.$rtti.TFileAsTextEvent,"FOnFileAsText","FOnFileAsText"),e.addProperty("OnGetFileAsArrayBuffer",0,t.$rtti.TFileAsArrayBufferEvent,"FOnGetFileAsArrayBuffer","FOnGetFileAsArrayBuffer"),e.addProperty("OnGetFileAsBase64",0,t.$rtti.TFileAsBase64Event,"FOnFileAsBase64","FOnFileAsBase64"),e.addProperty("OnGetFileAsDataURL",0,t.$rtti.TFileAsDataURLEvent,"FOnFileAsDataURL","FOnFileAsDataURL"),e.addProperty("OnGetFileAsStream",0,t.$rtti.TFileAsStreamEvent,"FOnGetFileAsStream","FOnGetFileAsStream"),e.addProperty("OnUploadFileComplete",0,t.$rtti.TFileUploadEvent,"FOnUploadFileComplete","FOnUploadFileComplete"),e.addProperty("OnUploadFileResponseComplete",0,t.$rtti.TFileUploadResponseEvent,"FOnUploadFileResponseComplete","FOnUploadFileResponseComplete"),e.addProperty("OnUploadFileAbort",0,t.$rtti.TFileUploadEvent,"FOnUploadFileAbort","FOnUploadFileAbort"),e.addProperty("OnUploadFileError",0,t.$rtti.TFileUploadErrorEvent,"FOnUploadFileError","FOnUploadFileError"),e.addProperty("OnUploadFileProgress",0,t.$rtti.TFileUploadProgressEvent,"FOnUploadFileProgress","FOnUploadFileProgress")})),rtl.createClass(this,"THTMLDiv",pas["WEBLib.Controls"].TCustomControl,(function(){this.$init=function(){pas["WEBLib.Controls"].TCustomControl.$init.call(this),this.FHTML=null,this.FOldText=""},this.$final=function(){this.FHTML=void 0,pas["WEBLib.Controls"].TCustomControl.$final.call(this)},this.SetHTML=function(t){this.FHTML.Assign(t)},this.UpdateElementData=function(){pas["WEBLib.Controls"].TControl.UpdateElementData.call(this),null!=this.GetElementHandle()?(""===this.FOldText&&""===this.FHTML.GetTextStr()||(this.GetElementHandle().innerHTML=this.FHTML.GetTextStr()),this.FOldText=this.FHTML.GetTextStr()):!this.GetIsLinked()&&4 in this.FComponentState&&this.RenderDesigning(this.$classname,this.GetContainer(),this,!0,"")},this.HTMLChanged=function(t){this.UpdateElementData()},this.CreateElement=function(){return document.createElement("DIV")},this.CreateInitialize=function(){this.FHTML=pas.Classes.TStringList.$create("Create$1"),this.FHTML.SetSkipLastLineBreak(!0),rtl.as(this.FHTML,pas.Classes.TStringList).FOnChange=rtl.createCallback(this,"HTMLChanged"),pas["WEBLib.Controls"].TCustomControl.CreateInitialize.call(this),this.FControlStyle=rtl.unionSet(this.FControlStyle,rtl.createSet(0)),this.SetClipChildren(!1),this.SetTabStop(!1)},this.Destroy=function(){rtl.free(this,"FHTML"),pas["WEBLib.Controls"].TCustomControl.Destroy.call(this)},rtl.addIntf(this,pas.System.IUnknown);var t=this.$rtti;t.addProperty("Align",2,pas["WEBLib.Controls"].$rtti.TAlign,"FAlign","SetAlign",{Default:pas["WEBLib.Controls"].TAlign.alNone}),t.addProperty("AlignWithMargins",2,rtl.boolean,"FAlignWithMargins","SetAlignWithMargins",{Default:!1}),t.addProperty("Anchors",2,pas["WEBLib.Controls"].$rtti.TAnchors,"FAnchors","SetAnchors",{Default:rtl.createSet(0,1)}),t.addProperty("ChildOrder",2,rtl.longint,"FChildOrder","SetChildOrderEx",{Default:0}),t.addProperty("DragMode",2,pas["WEBLib.Controls"].$rtti.TDragMode,"FDragMode","SetDragMode",{Default:pas["WEBLib.Controls"].TDragMode.dmManual}),t.addProperty("ElementClassName",2,pas["WEBLib.Controls"].$rtti.TElementClassName,"FElementClassName","SetElementClassName"),t.addProperty("ElementFont",2,pas["WEBLib.Controls"].$rtti.TElementFont,"FElementFont","SetElementFont",{Default:pas["WEBLib.Controls"].TElementFont.efProperty}),t.addProperty("ElementID",3,pas["WEBLib.Controls"].$rtti.TElementID,"GetID","SetID"),t.addProperty("ElementPosition",2,pas["WEBLib.Controls"].$rtti.TElementPosition,"FElementPosition","SetElementPosition",{Default:pas["WEBLib.Controls"].TElementPosition.epAbsolute}),t.addProperty("HeightPercent",2,rtl.double,"FHeightPercent","SetHeightPercent",{Default:100}),t.addProperty("HeightStyle",2,pas["WEBLib.Controls"].$rtti.TSizeStyle,"FHeightStyle","SetHeightStyle",{Default:pas["WEBLib.Controls"].TSizeStyle.ssAbsolute}),t.addProperty("HTML",2,pas.Classes.$rtti.TStrings,"FHTML","SetHTML"),t.addProperty("Role",3,rtl.string,"GetRole","SetRole"),t.addProperty("Visible",2,rtl.boolean,"FVisible","SetVisible",{Default:!0}),t.addProperty("WidthPercent",2,rtl.double,"FWidthPercent","SetWidthPercent",{Default:100}),t.addProperty("WidthStyle",2,pas["WEBLib.Controls"].$rtti.TSizeStyle,"FWidthStyle","SetWidthStyle",{Default:pas["WEBLib.Controls"].TSizeStyle.ssAbsolute}),t.addProperty("OnClick",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnClick","FOnClick"),t.addProperty("OnDblClick",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnDblClick","FOnDblClick"),t.addProperty("OnMouseDown",0,pas["WEBLib.Controls"].$rtti.TMouseEvent,"FOnMouseDown","FOnMouseDown"),t.addProperty("OnMouseUp",0,pas["WEBLib.Controls"].$rtti.TMouseEvent,"FOnMouseUp","FOnMouseUp"),t.addProperty("OnMouseMove",0,pas["WEBLib.Controls"].$rtti.TMouseMoveEvent,"FOnMouseMove","FOnMouseMove"),t.addProperty("OnMouseLeave",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnMouseLeave","FOnMouseLeave"),t.addProperty("OnMouseEnter",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnMouseEnter","FOnMouseEnter"),t.addProperty("OnTouchStart",0,pas["WEBLib.Controls"].$rtti.TTouchEvent,"FOnTouchStart","FOnTouchStart"),t.addProperty("OnTouchEnd",0,pas["WEBLib.Controls"].$rtti.TTouchEvent,"FOnTouchEnd","FOnTouchEnd"),t.addProperty("OnTouchMove",0,pas["WEBLib.Controls"].$rtti.TTouchEvent,"FOnTouchMove","FOnTouchMove"),t.addProperty("OnTouchCancel",0,pas["WEBLib.Controls"].$rtti.TTouchEvent,"FOnTouchCancel","FOnTouchCancel"),t.addProperty("OnDragDrop",0,pas["WEBLib.Controls"].$rtti.TDragDropEvent,"FOnDragDrop","FOnDragDrop"),t.addProperty("OnDragOver",0,pas["WEBLib.Controls"].$rtti.TDragOverEvent,"FOnDragOver","FOnDragOver"),t.addProperty("OnEndDrag",0,pas["WEBLib.Controls"].$rtti.TEndDragEvent,"FonEndDrag","FonEndDrag"),t.addProperty("OnStartDrag",0,pas["WEBLib.Controls"].$rtti.TStartDragEvent,"FOnStartDrag","FOnStartDrag")})),t.$implcode=function(){e.isAdvancedUpload=function(){var t=document.createElement("div");return("draggable"in t||"ondragstart"in t&&"ondrop"in t)&&"FormData"in window&&"FileReader"in window}}}),["WEBLib.Dialogs","WEBLib.WebTools"]),rtl.module("WEBLib.Consts",["System"],(function(){"use strict";this.$resourcestrings={SWarning:{org:"Warning"},SError:{org:"Error"},SInformation:{org:"Information"},SConfirm:{org:"Confirm"},SOK:{org:"OK"},SCancel:{org:"Cancel"},SYes:{org:"Yes"},SNo:{org:"No"},SAbort:{org:"Abort"},SRetry:{org:"Retry"},SIgnore:{org:"Ignore"},SHelp:{org:"Help"},SClose:{org:"Close"},SAll:{org:"All"},SYesToAll:{org:"Yes to all"},SNoToAll:{org:"No to all"},SWarningFR:{org:"Avertissement"},SErrorFR:{org:"Erreur"},SInformationFR:{org:"Information"},SConfirmFR:{org:"Confirmer"},SOKFR:{org:"OK"},SCancelFR:{org:"Annuler"},SYesFR:{org:"Oui"},SNoFR:{org:"Non"},SAbortFR:{org:"Interrompre"},SRetryFR:{org:"Réessayer"},SIgnoreFR:{org:"Ignorer"},SHelpFR:{org:"Aide"},SCloseFR:{org:"Fermer"},SAllFR:{org:"Tout"},SYesToAllFR:{org:"Oui à tout"},SNoToAllFR:{org:"Non à tout"},SWarningDE:{org:"Warnung"},SErrorDE:{org:"Fehler"},SInformationDE:{org:"Information"},SConfirmDE:{org:"Bestätigen"},SOKDE:{org:"OK"},SCancelDE:{org:"Verzögern"},SYesDE:{org:"Ja"},SNoDE:{org:"Nein"},SAbortDE:{org:"Abbrechen"},SRetryDE:{org:"Wiederholen"},SIgnoreDE:{org:"Ignorieren"},SHelpDE:{org:"Hilfe"},SCloseDE:{org:"Schließen"},SAllDE:{org:"Alles"},SYesToAllDE:{org:"Ja auf Alles"},SNoToAllDE:{org:"Nein auf Alles"},SWarningES:{org:"Advertencia"},SErrorES:{org:"Error"},SInformationES:{org:"Información"},SConfirmES:{org:"Confirmado"},SOKES:{org:"OK"},SCancelES:{org:"Cancelar"},SYesES:{org:"Sí"},SNoES:{org:"No"},SAbortES:{org:"Abortar"},SRetryES:{org:"Rever"},SIgnoreES:{org:"Ignorar"},SHelpES:{org:"Ayudar"},SCloseES:{org:"Cerrar"},SAllES:{org:"Todos"},SYesToAllES:{org:"Sí a todo"},SNoToAllES:{org:"No a todo"},SWarningNL:{org:"Waarschuwing"},SErrorNL:{org:"Fout"},SInformationNL:{org:"Informatie"},SConfirmNL:{org:"Bevestiging"},SOKNL:{org:"OK"},SCancelNL:{org:"Afbreken"},SYesNL:{org:"Ja"},SNoNL:{org:"Nee"},SAbortNL:{org:"Afbreken"},SRetryNL:{org:"Opnieuw"},SIgnoreNL:{org:"Negeren"},SHelpNL:{org:"Hulp"},SCloseNL:{org:"Sluiten"},SAllNL:{org:"Alles"},SYesToAllNL:{org:"Ja op alles"},SNoToAllNL:{org:"Nee op alles"}}})),rtl.module("WEBLib.Dialogs",["System","Classes","WEBLib.Controls","Web","JS","SysUtils","WEBLib.WebTools","WEBLib.WebCtrls","WEBLib.Graphics"],(function(){"use strict";var t=this,e=t.$impl;this.TMsgDlgType={0:"mtWarning",mtWarning:0,1:"mtError",mtError:1,2:"mtInformation",mtInformation:2,3:"mtConfirmation",mtConfirmation:3,4:"mtCustom",mtCustom:4},this.$rtti.$Enum("TMsgDlgType",{minvalue:0,maxvalue:4,ordtype:1,enumtype:this.TMsgDlgType}),this.TMsgDlgBtn={0:"mbYes",mbYes:0,1:"mbNo",mbNo:1,2:"mbOK",mbOK:2,3:"mbCancel",mbCancel:3,4:"mbAbort",mbAbort:4,5:"mbRetry",mbRetry:5,6:"mbIgnore",mbIgnore:6,7:"mbAll",mbAll:7,8:"mbNoToAll",mbNoToAll:8,9:"mbYesToAll",mbYesToAll:9,10:"mbHelp",mbHelp:10,11:"mbClose",mbClose:11},this.$rtti.$Enum("TMsgDlgBtn",{minvalue:0,maxvalue:11,ordtype:1,enumtype:this.TMsgDlgBtn}),this.$rtti.$Set("TMsgDlgButtons",{comptype:this.$rtti.TMsgDlgBtn}),rtl.createClass(this,"TCustomDialogButton",pas.Classes.TCollectionItem,(function(){this.$init=function(){pas.Classes.TCollectionItem.$init.call(this),this.FCaption="",this.FTag=0,this.FElementClassName=""};var t=this.$rtti;t.addProperty("Caption",0,rtl.string,"FCaption","FCaption"),t.addProperty("ElementClassName",0,pas["WEBLib.Controls"].$rtti.TElementClassName,"FElementClassName","FElementClassName"),t.addProperty("Tag",0,rtl.longint,"FTag","FTag",{Default:0})})),rtl.createClass(this,"TCustomDialogButtons",pas.Classes.TOwnedCollection,(function(){this.GetItem$1=function(t){return this.GetItem(t)}})),rtl.createClass(this,"TMessageDlg",pas["WEBLib.Controls"].TCustomControl,(function(){this.$init=function(){pas["WEBLib.Controls"].TCustomControl.$init.call(this),this.FOpacity=0,this.FLayer$1=null,this.FDlg=null,this.FCancel=null,this.FMessage="",this.FTitle="",this.FMsgDlgType=0,this.FOnButtonClick=null,this.FOnClose=null,this.FButtons={},this.FDialogProc=null,this.FDialogResult=0,this.FMdx=0,this.FMdy=0,this.FDlgX=0,this.FDlgY=0,this.FCaptured$1=!1,this.FDown=!1,this.FElementTitleClassName="",this.FElementButtonClassName="",this.FElementContentClassName="",this.FDialogText=null,this.FCustomButtons=null,this.FElementDialogClassName="",this.FAutoLanguage=!1},this.$final=function(){this.FLayer$1=void 0,this.FDlg=void 0,this.FCancel=void 0,this.FOnButtonClick=void 0,this.FOnClose=void 0,this.FButtons=void 0,this.FDialogProc=void 0,this.FDialogText=void 0,this.FCustomButtons=void 0,pas["WEBLib.Controls"].TCustomControl.$final.call(this)},this.SetDialogText=function(t){this.FDialogText.Assign(t)},this.SetCustomButtons=function(t){this.FCustomButtons.Assign(t)},this.CreateElement=function(){var t=null;return 4 in this.FComponentState?t=null:pas["WEBLib.Controls"].TCustomControl.CreateElement.call(this),t};this.GetDialogText=function(t){var e="",i="",s=0;if(e="Undefined",t<this.FDialogText.GetCount()&&(e=this.FDialogText.Get(t)),this.FAutoLanguage){i=pas["WEBLib.WebTools"].GetBrowserLocale(),s=0,1===pas.System.Pos("es",i)&&(s=3),1===pas.System.Pos("fr",i)&&(s=1),1===pas.System.Pos("de",i)&&(s=2),1===pas.System.Pos("nl",i)&&(s=4);var n=s;if(3===n){var r=t;0===r?e=rtl.getResStr(pas["WEBLib.Consts"],"SWarningES"):1===r?e=rtl.getResStr(pas["WEBLib.Consts"],"SErrorES"):2===r?e=rtl.getResStr(pas["WEBLib.Consts"],"SInformationES"):3===r?e=rtl.getResStr(pas["WEBLib.Consts"],"SConfirmES"):5===r?e=rtl.getResStr(pas["WEBLib.Consts"],"SOKES"):6===r?e=rtl.getResStr(pas["WEBLib.Consts"],"SCancelES"):7===r?e=rtl.getResStr(pas["WEBLib.Consts"],"SYesES"):8===r?e=rtl.getResStr(pas["WEBLib.Consts"],"SNoES"):9===r?e=rtl.getResStr(pas["WEBLib.Consts"],"SAbortES"):10===r?e=rtl.getResStr(pas["WEBLib.Consts"],"SRetryES"):11===r?e=rtl.getResStr(pas["WEBLib.Consts"],"SIgnoreES"):12===r?e=rtl.getResStr(pas["WEBLib.Consts"],"SAllES"):13===r?e=rtl.getResStr(pas["WEBLib.Consts"],"SYesToAllES"):14===r?e=rtl.getResStr(pas["WEBLib.Consts"],"SNoToAllES"):15===r?e=rtl.getResStr(pas["WEBLib.Consts"],"SHelpES"):16===r&&(e=rtl.getResStr(pas["WEBLib.Consts"],"SCloseES"))}else if(1===n){var o=t;0===o?e=rtl.getResStr(pas["WEBLib.Consts"],"SWarningFR"):1===o?e=rtl.getResStr(pas["WEBLib.Consts"],"SErrorFR"):2===o?e=rtl.getResStr(pas["WEBLib.Consts"],"SInformationFR"):3===o?e=rtl.getResStr(pas["WEBLib.Consts"],"SConfirmFR"):5===o?e=rtl.getResStr(pas["WEBLib.Consts"],"SOKFR"):6===o?e=rtl.getResStr(pas["WEBLib.Consts"],"SCancelFR"):7===o?e=rtl.getResStr(pas["WEBLib.Consts"],"SYesFR"):8===o?e=rtl.getResStr(pas["WEBLib.Consts"],"SNoFR"):9===o?e=rtl.getResStr(pas["WEBLib.Consts"],"SAbortFR"):10===o?e=rtl.getResStr(pas["WEBLib.Consts"],"SRetryFR"):11===o?e=rtl.getResStr(pas["WEBLib.Consts"],"SIgnoreFR"):12===o?e=rtl.getResStr(pas["WEBLib.Consts"],"SAllFR"):13===o?e=rtl.getResStr(pas["WEBLib.Consts"],"SYesToAllFR"):14===o?e=rtl.getResStr(pas["WEBLib.Consts"],"SNoToAllFR"):15===o?e=rtl.getResStr(pas["WEBLib.Consts"],"SHelpFR"):16===o&&(e=rtl.getResStr(pas["WEBLib.Consts"],"SCloseFR"))}else if(2===n){var a=t;0===a?e=rtl.getResStr(pas["WEBLib.Consts"],"SWarningDE"):1===a?e=rtl.getResStr(pas["WEBLib.Consts"],"SErrorDE"):2===a?e=rtl.getResStr(pas["WEBLib.Consts"],"SInformationDE"):3===a?e=rtl.getResStr(pas["WEBLib.Consts"],"SConfirmDE"):5===a?e=rtl.getResStr(pas["WEBLib.Consts"],"SOKDE"):6===a?e=rtl.getResStr(pas["WEBLib.Consts"],"SCancelDE"):7===a?e=rtl.getResStr(pas["WEBLib.Consts"],"SYesDE"):8===a?e=rtl.getResStr(pas["WEBLib.Consts"],"SNoDE"):9===a?e=rtl.getResStr(pas["WEBLib.Consts"],"SAbortDE"):10===a?e=rtl.getResStr(pas["WEBLib.Consts"],"SRetryDE"):11===a?e=rtl.getResStr(pas["WEBLib.Consts"],"SIgnoreDE"):12===a?e=rtl.getResStr(pas["WEBLib.Consts"],"SAllDE"):13===a?e=rtl.getResStr(pas["WEBLib.Consts"],"SYesToAllDE"):14===a?e=rtl.getResStr(pas["WEBLib.Consts"],"SNoToAllDE"):15===a?e=rtl.getResStr(pas["WEBLib.Consts"],"SHelpDE"):16===a&&(e=rtl.getResStr(pas["WEBLib.Consts"],"SCloseDE"))}else if(4===n){var l=t;0===l?e=rtl.getResStr(pas["WEBLib.Consts"],"SWarningNL"):1===l?e=rtl.getResStr(pas["WEBLib.Consts"],"SErrorNL"):2===l?e=rtl.getResStr(pas["WEBLib.Consts"],"SInformationNL"):3===l?e=rtl.getResStr(pas["WEBLib.Consts"],"SConfirmNL"):5===l?e=rtl.getResStr(pas["WEBLib.Consts"],"SOKNL"):6===l?e=rtl.getResStr(pas["WEBLib.Consts"],"SCancelNL"):7===l?e=rtl.getResStr(pas["WEBLib.Consts"],"SYesNL"):8===l?e=rtl.getResStr(pas["WEBLib.Consts"],"SNoNL"):9===l?e=rtl.getResStr(pas["WEBLib.Consts"],"SAbortNL"):10===l?e=rtl.getResStr(pas["WEBLib.Consts"],"SRetryNL"):11===l?e=rtl.getResStr(pas["WEBLib.Consts"],"SIgnoreNL"):12===l?e=rtl.getResStr(pas["WEBLib.Consts"],"SAllNL"):13===l?e=rtl.getResStr(pas["WEBLib.Consts"],"SYesToAllNL"):14===l?e=rtl.getResStr(pas["WEBLib.Consts"],"SNoToAllNL"):15===l?e=rtl.getResStr(pas["WEBLib.Consts"],"SHelpNL"):16===l&&(e=rtl.getResStr(pas["WEBLib.Consts"],"SCloseNL"))}}return e},this.BindEvents=function(){},this.SetDialogResult=function(t){this.FDialogResult=t,0!==this.FDialogResult&&this.Close()},this.CreateButton=function(t,e,i){var s=null;return(s=document.createElement("BUTTON")).innerHTML=t,1===pas["WEBLib.Forms"].Application.FMainForm.FCSSLibrary?(s.setAttribute("type","BUTTON"),s.setAttribute("class","btn "+i),s.setAttribute("data-dismiss","modal-dialog")):(s.style.setProperty("width","100px"),s.style.setProperty("margin-left","5px"),""!==this.FElementButtonClassName?s.setAttribute("class",this.FElementButtonClassName+" "+i):""!==pas["WEBLib.Forms"].Application.FThemeButtonClassName&&s.setAttribute("class",pas["WEBLib.Forms"].Application.FThemeButtonClassName+" "+i)),s.id=t,s.addEventListener("click",rtl.createCallback(this,"HandleButtonClick")),s.addEventListener("keydown",rtl.createCallback(this,"HandleKeyDown")),e.get()&&(setTimeout((function(){s.focus()}),1),e.set(!1)),s},this.HandleDocMouseMove=function(t){var e=0,i=0,s=null;return this.FDown&&(e=t.screenX-this.FMdx,i=t.screenY-this.FMdy,(s=this.FDlg).style.setProperty("transform",""),s.style.setProperty("position","absolute"),s.style.setProperty("left",pas.SysUtils.IntToStr(Math.round(this.FDlgX+e))+"px"),s.style.setProperty("top",pas.SysUtils.IntToStr(Math.round(this.FDlgY+i))+"px"),(s=this.FCancel).style.setProperty("position","absolute"),s.style.setProperty("top","0"),s.style.setProperty("right","0")),!0,!0},this.HandleDocMouseUp=function(t){return this.FDown=!1,document.body.removeEventListener("mousemove",rtl.createCallback(this,"HandleDocMouseMove")),document.body.removeEventListener("mouseup",rtl.createCallback(this,"HandleDocMouseUp")),!0,!0},this.HandleMouseDown=function(t){var e;return this.FMdx=Math.round(t.screenX),this.FMdy=Math.round(t.screenY),e=this.FDlg.getBoundingClientRect(),this.FDlgX=Math.round(pas.System.Int(e.left)),this.FDlgY=Math.round(pas.System.Int(e.top)),this.FDown=!0,this.FCaptured$1||(this.FCaptured$1=!0,document.body.addEventListener("mousemove",rtl.createCallback(this,"HandleDocMouseMove")),document.body.addEventListener("mouseup",rtl.createCallback(this,"HandleDocMouseUp"))),!0,!0},this.HandleButtonClick=function(t){var e,i=0;if(this.SetDialogResult(0),(e=t.target.getAttribute("id"))===this.GetDialogText(7)?this.SetDialogResult(6):e===this.GetDialogText(8)?this.SetDialogResult(7):e===this.GetDialogText(5)?this.SetDialogResult(1):e===this.GetDialogText(6)?this.SetDialogResult(2):e===this.GetDialogText(9)?this.SetDialogResult(3):e===this.GetDialogText(10)?this.SetDialogResult(4):e===this.GetDialogText(11)?this.SetDialogResult(5):e===this.GetDialogText(12)?this.SetDialogResult(12):e===this.GetDialogText(13)?this.SetDialogResult(13):e===this.GetDialogText(14)?this.SetDialogResult(14):e===this.GetDialogText(15)?this.SetDialogResult(9):e===this.GetDialogText(16)&&this.SetDialogResult(8),0===this.FDialogResult&&this.FCustomButtons.GetCount()>0)for(var s=0,n=this.FCustomButtons.GetCount()-1;s<=n;s++)if(i=s,e===this.FCustomButtons.GetItem$1(i).FCaption){this.SetDialogResult(100+i);break}return null!=this.FOnButtonClick&&this.FOnButtonClick(this),!0,!0},this.HandleKeyDown=function(t){var e,i=!1;return e=this.GetKeyCode(t.key,!0),pas.System.Assigned(e)?(27===e&&this.SetDialogResult(2),i=!0):i},this.InitBootstrapStyle=function(){this.FElementButtonClassName="btn",this.FElementContentClassName="text-body",this.FElementTitleClassName="text-body",this.FElementDialogClassName="shadow-lg p-3 mb-5 bg-white rounded"},this.CreateInitialize=function(){pas["WEBLib.Controls"].TCustomControl.CreateInitialize.call(this),this.FOpacity=.2,this.FMessage="",this.FAutoLanguage=!0,this.FMsgDlgType=2,this.FDialogText=pas.Classes.TStringList.$create("Create$1"),this.FDialogText.SetSkipLastLineBreak(!0),this.FDialogText.Add(rtl.getResStr(pas["WEBLib.Consts"],"SWarning")),this.FDialogText.Add(rtl.getResStr(pas["WEBLib.Consts"],"SError")),this.FDialogText.Add(rtl.getResStr(pas["WEBLib.Consts"],"SInformation")),this.FDialogText.Add(rtl.getResStr(pas["WEBLib.Consts"],"SConfirm")),this.FDialogText.Add("Custom"),this.FDialogText.Add(rtl.getResStr(pas["WEBLib.Consts"],"SOK")),this.FDialogText.Add(rtl.getResStr(pas["WEBLib.Consts"],"SCancel")),this.FDialogText.Add(rtl.getResStr(pas["WEBLib.Consts"],"SYes")),this.FDialogText.Add(rtl.getResStr(pas["WEBLib.Consts"],"SNo")),this.FDialogText.Add(rtl.getResStr(pas["WEBLib.Consts"],"SAbort")),this.FDialogText.Add(rtl.getResStr(pas["WEBLib.Consts"],"SRetry")),this.FDialogText.Add(rtl.getResStr(pas["WEBLib.Consts"],"SIgnore")),this.FDialogText.Add(rtl.getResStr(pas["WEBLib.Consts"],"SAll")),this.FDialogText.Add(rtl.getResStr(pas["WEBLib.Consts"],"SYesToAll")),this.FDialogText.Add(rtl.getResStr(pas["WEBLib.Consts"],"SNoToAll")),this.FDialogText.Add(rtl.getResStr(pas["WEBLib.Consts"],"SHelp")),this.FDialogText.Add(rtl.getResStr(pas["WEBLib.Consts"],"SClose")),this.FMsgDlgType=4,this.FCustomButtons=t.TCustomDialogButtons.$create("Create$2",[this,t.TCustomDialogButton]),this.FCustomButtons.FPropName="CustomButtons"},this.Destroy=function(){rtl.free(this,"FDialogText"),rtl.free(this,"FCustomButtons"),pas["WEBLib.Controls"].TCustomControl.Destroy.call(this)},this.Close=function(){pas["WEBLib.Forms"].Application.UnLockForm(pas["WEBLib.Forms"].Application.FMainForm),document.body.removeChild(this.FLayer$1),document.body.removeChild(this.FDlg),this.FDown=!1,this.FCaptured$1=!1,null!=this.FOnClose&&this.FOnClose(this),null!=this.FDialogProc&&this.FDialogProc(this.FDialogResult)},this.Show$1=function(){var t=null,i=null,s=null,n=null,r=null,o=null,a=null,l=null,h=null,F=null,p=null,c=null,u="",d="",S="",C="",T="",m="",g="",f=!1,b=0;if(null!==pas["WEBLib.Forms"].Application&&null!==pas["WEBLib.Forms"].Application.FMainForm){pas["WEBLib.Forms"].Application.HasCSS(e.lMaterial)||this.AddControlLink("material",e.lMaterial),pas["WEBLib.Forms"].Application.LockForm(pas["WEBLib.Forms"].Application.FMainForm),this.FLayer$1=document.createElement("SPAN"),document.body.appendChild(this.FLayer$1),this.FLayer$1.setAttribute("tabindex","0"),this.FLayer$1.addEventListener("keydown",rtl.createCallback(this,"HandleKeyDown")),f=!0,S=this.FTitle,this.FMessage=e.StringToHTML(this.FMessage);var y=this.FMsgDlgType;0===y?(u="warning",d="orange",S=this.GetDialogText(0)):1===y?(u="cancel",d="red",S=this.GetDialogText(1)):2===y?(u="info",d="blue",S=this.GetDialogText(2)):3===y?(u="help",d="blue",S=this.GetDialogText(3)):4===y&&(u="",d="",S=this.GetDialogText(4)),1===pas["WEBLib.Forms"].Application.FMainForm.FCSSLibrary?(this.FDlg=document.createElement("DIV"),this.FDlg.setAttribute("class","modal-dialog"),this.FDlg.setAttribute("role","document"),this.FDlg.style.setProperty("z-index","1999998"),(l=document.createElement("SPAN")).style.setProperty("position","absolute"),l.style.setProperty("top","0"),l.style.setProperty("left","0"),l.style.setProperty("right","0"),l.style.setProperty("bottom","0"),l.style.setProperty("z-index","1999997"),document.body.appendChild(l),l.appendChild(this.FDlg),p=this.FDlg,(F=document.createElement("DIV")).setAttribute("class","modal-content "+this.FElementDialogClassName),p.appendChild(F),c=F,p=F,(F=document.createElement("DIV")).setAttribute("class","modal-header"),c.appendChild(F),p=F,(F=document.createElement("H5")).setAttribute("class","modal-title"),F.innerHTML=S,p.appendChild(F),3 in this.FButtons&&((F=document.createElement("BUTTON")).setAttribute("type","button"),F.setAttribute("class","close btn btn-danger"),F.setAttribute("data-dismiss","modal-dialog"),F.setAttribute("aria-label","Close"),F.setAttribute("id",this.GetDialogText(6)),F.addEventListener("click",rtl.createCallback(this,"HandleButtonClick")),p.appendChild(F),p=F,(F=document.createElement("SPAN")).setAttribute("aria-hidden","true"),F.setAttribute("id",this.GetDialogText(6)),F.innerHTML="&times;",p.appendChild(F)),(F=document.createElement("DIV")).setAttribute("class","modal-body"),c.appendChild(F),p=F,4!==this.FMsgDlgType&&((s=document.createElement("SPAN")).innerHTML='<i class="material-icons" style="color:'+d+'!important;font-size:48px!important">'+u+"</i>",s.style.setProperty("display","inline-block"),s.style.setProperty("float","left"),s.style.setProperty("padding-right","15px"),p.appendChild(s)),(F=document.createElement("H6")).innerHTML=this.FMessage,p.appendChild(F),(F=document.createElement("DIV")).setAttribute("class","modal-footer"),c.appendChild(F),o=p=F,this.FDlg=l):(g="5",m="26",T="#f1f1f1",C="#ababab",this.FDlg=document.createElement("DIV"),document.body.appendChild(this.FDlg),a=this.FDlg,""!==this.FElementDialogClassName?a.setAttribute("class",this.FElementDialogClassName):(a.style.setProperty("background-color","white"),a.style.setProperty("border","1px solid "+C),a.style.setProperty("font-family","Arial"),a.style.setProperty("font-size","10pt")),a.style.setProperty("cursor","default"),a.style.setProperty("position","fixed"),a.style.setProperty("min-width","300px"),a.style.setProperty("min-height","125px"),a.style.setProperty("max-width","100%"),a.style.setProperty("max-height","100%"),a.style.setProperty("top","50%"),a.style.setProperty("left","50%"),a.style.setProperty("transform","translate(-50%, -50%)"),a.style.setProperty("z-index","1999998"),a.style.setProperty("box-shadow","5px 5px 5px gray"),h=document.createElement("DIV"),this.FCancel=h,h.innerHTML='<i id="Cancel" class="material-icons" style="font-size:16px!important">clear</i>',h.id="Cancel",h.style.setProperty("color",pas["WEBLib.Graphics"].ColorToHTML(pas["WEBLib.Forms"].Application.FThemeTextColor)),h.style.setProperty("position","fixed"),h.style.setProperty("top","0"),h.style.setProperty("right","0"),h.style.setProperty("padding",g+"px"),h.style.setProperty("height",m+"px"),h.style.setProperty("line-height",m+"px"),h.addEventListener("click",rtl.createCallback(this,"HandleButtonClick")),a.appendChild(h),(t=document.createElement("DIV")).innerHTML=S,""!==this.FElementTitleClassName?t.setAttribute("class",this.FElementTitleClassName):(t.style.setProperty("background-color",pas["WEBLib.Graphics"].ColorToHTML(pas["WEBLib.Forms"].Application.FThemeColor)),t.style.setProperty("color",pas["WEBLib.Graphics"].ColorToHTML(pas["WEBLib.Forms"].Application.FThemeTextColor))),t.style.setProperty("cursor","move"),t.style.setProperty("padding-left",g+"px"),t.style.setProperty("height",m+"px"),t.style.setProperty("vertical-align","middle"),t.style.setProperty("line-height",m+"px"),t.style.setProperty("border-bottom","1px solid "+C),t.style.setProperty("-moz-user-select","none"),t.style.setProperty("-webkit-user-select","none"),t.style.setProperty("-ms-user-select","none"),t.style.setProperty("user-select","none"),t.style.setProperty("-o-user-select","none"),t.addEventListener("mousedown",rtl.createCallback(this,"HandleMouseDown")),a.appendChild(t),(i=document.createElement("DIV")).style.setProperty("padding",g+"px"),i.style.setProperty("height","auto"),i.style.setProperty("min-height","50px"),i.style.setProperty("border-bottom","1px solid "+C),4!==this.FMsgDlgType&&((s=document.createElement("DIV")).innerHTML='<i class="material-icons" style="color:'+d+'!important;font-size:48px!important">'+u+"</i>",s.style.setProperty("display","inline-block"),s.style.setProperty("float","left"),s.style.setProperty("padding-right","15px"),i.appendChild(s)),this.FMessage=pas.SysUtils.StringReplace(this.FMessage,pas.System.sLineBreak,"<BR>",rtl.createSet(0)),(r=document.createElement("DIV")).innerHTML=this.FMessage,r.style.setProperty("height","auto"),r.style.setProperty("min-height","50px"),r.style.setProperty("white-space","pre-wrap"),(n=document.createElement("LABEL")).innerHTML=this.FMessage,""!==this.FElementTitleClassName&&n.setAttribute("class",this.FElementContentClassName),r.appendChild(n),i.appendChild(n),a.appendChild(i),(o=document.createElement("DIV")).style.setProperty("background-color",T),o.style.setProperty("padding",g+"px"),o.style.setProperty("min-height",m+"px"),o.style.setProperty("height","auto"),o.style.setProperty("line-height",m+"px"),o.style.setProperty("text-align","right"),a.appendChild(o)),rtl.eqSet(this.FButtons,{})&&0===this.FCustomButtons.GetCount()?o.appendChild(this.CreateButton(this.GetDialogText(5),{get:function(){return f},set:function(t){f=t}},"")):(0 in this.FButtons&&o.appendChild(this.CreateButton(this.GetDialogText(7),{get:function(){return f},set:function(t){f=t}},"")),1 in this.FButtons&&o.appendChild(this.CreateButton(this.GetDialogText(8),{get:function(){return f},set:function(t){f=t}},"")),2 in this.FButtons&&o.appendChild(this.CreateButton(this.GetDialogText(5),{get:function(){return f},set:function(t){f=t}},"")),3 in this.FButtons&&o.appendChild(this.CreateButton(this.GetDialogText(6),{get:function(){return f},set:function(t){f=t}},"")),4 in this.FButtons&&o.appendChild(this.CreateButton(this.GetDialogText(9),{get:function(){return f},set:function(t){f=t}},"")),5 in this.FButtons&&o.appendChild(this.CreateButton(this.GetDialogText(10),{get:function(){return f},set:function(t){f=t}},"")),6 in this.FButtons&&o.appendChild(this.CreateButton(this.GetDialogText(11),{get:function(){return f},set:function(t){f=t}},"")),7 in this.FButtons&&o.appendChild(this.CreateButton(this.GetDialogText(12),{get:function(){return f},set:function(t){f=t}},"")),9 in this.FButtons&&o.appendChild(this.CreateButton(this.GetDialogText(13),{get:function(){return f},set:function(t){f=t}},"")),8 in this.FButtons&&o.appendChild(this.CreateButton(this.GetDialogText(14),{get:function(){return f},set:function(t){f=t}},"")),10 in this.FButtons&&o.appendChild(this.CreateButton(this.GetDialogText(15),{get:function(){return f},set:function(t){f=t}},"")),11 in this.FButtons&&o.appendChild(this.CreateButton(this.GetDialogText(16),{get:function(){return f},set:function(t){f=t}},"")));for(var L=0,M=this.FCustomButtons.GetCount()-1;L<=M;L++)b=L,o.appendChild(this.CreateButton(this.FCustomButtons.GetItem$1(b).FCaption,{get:function(){return f},set:function(t){f=t}},this.FCustomButtons.GetItem$1(b).FElementClassName));(l=this.FLayer$1).style.setProperty("background-color","black"),l.style.setProperty("opacity",pas["WEBLib.WebTools"].DoubleToHTML(this.FOpacity)),l.style.setProperty("top","0"),l.style.setProperty("left","0"),l.style.setProperty("right","0"),l.style.setProperty("bottom","0"),l.style.setProperty("z-index","19990"),l.style.setProperty("webkit-user-select","none"),l.style.setProperty("moz-user-select","none"),l.style.setProperty("khtml-user-select","none"),l.style.setProperty("ms-user-select","none"),l.style.setProperty("user-select","none"),l.style.setProperty("position","fixed")}},this.ShowDialog$1=function(t,e,i,s){return 0,this.FButtons=rtl.refSet(i),this.FMessage=t,this.FMsgDlgType=e,this.FDialogProc=s,this.SetDialogResult(0),this.Show$1(),0},rtl.addIntf(this,pas.System.IUnknown);var i=this.$rtti;i.addProperty("AutoLanguage",0,rtl.boolean,"FAutoLanguage","FAutoLanguage",{Default:!0}),i.addProperty("Buttons",0,t.$rtti.TMsgDlgButtons,"FButtons","FButtons",{Default:{}}),i.addProperty("CustomButtons",2,t.$rtti.TCustomDialogButtons,"FCustomButtons","SetCustomButtons"),i.addProperty("DialogText",2,pas.Classes.$rtti.TStringList,"FDialogText","SetDialogText"),i.addProperty("DialogType",0,t.$rtti.TMsgDlgType,"FMsgDlgType","FMsgDlgType",{Default:t.TMsgDlgType.mtCustom}),i.addProperty("Message",0,rtl.string,"FMessage","FMessage"),i.addProperty("Opacity",0,rtl.double,"FOpacity","FOpacity"),i.addProperty("ElementButtonClassName",0,pas["WEBLib.Controls"].$rtti.TElementClassName,"FElementButtonClassName","FElementButtonClassName"),i.addProperty("ElementDialogClassName",0,pas["WEBLib.Controls"].$rtti.TElementClassName,"FElementDialogClassName","FElementDialogClassName"),i.addProperty("ElementTitleClassName",0,pas["WEBLib.Controls"].$rtti.TElementClassName,"FElementTitleClassName","FElementTitleClassName"),i.addProperty("ElementContentClassName",0,pas["WEBLib.Controls"].$rtti.TElementClassName,"FElementContentClassName","FElementContentClassName"),i.addProperty("Title",0,rtl.string,"FTitle","FTitle"),i.addProperty("OnButtonClick",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnButtonClick","FOnButtonClick"),i.addProperty("OnClose",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnClose","FOnClose")})),this.TOpenOption={0:"ofReadOnly",ofReadOnly:0,1:"ofOverwritePrompt",ofOverwritePrompt:1,2:"ofHideReadOnly",ofHideReadOnly:2,3:"ofNoChangeDir",ofNoChangeDir:3,4:"ofShowHelp",ofShowHelp:4,5:"ofNoValidate",ofNoValidate:5,6:"ofAllowMultiSelect",ofAllowMultiSelect:6,7:"ofExtensionDifferent",ofExtensionDifferent:7,8:"ofPathMustExist",ofPathMustExist:8,9:"ofFileMustExist",ofFileMustExist:9,10:"ofCreatePrompt",ofCreatePrompt:10,11:"ofShareAware",ofShareAware:11,12:"ofNoReadOnlyReturn",ofNoReadOnlyReturn:12,13:"ofNoTestFileCreate",ofNoTestFileCreate:13,14:"ofNoNetworkButton",ofNoNetworkButton:14,15:"ofNoLongNames",ofNoLongNames:15,16:"ofOldStyleDialog",ofOldStyleDialog:16,17:"ofNoDereferenceLinks",ofNoDereferenceLinks:17,18:"ofEnableIncludeNotify",ofEnableIncludeNotify:18,19:"ofEnableSizing",ofEnableSizing:19,20:"ofDontAddToRecent",ofDontAddToRecent:20,21:"ofForceShowHidden",ofForceShowHidden:21},rtl.createClass(this,"TOpenDialog",pas.Classes.TComponent,(function(){this.$init=function(){pas.Classes.TComponent.$init.call(this),this.FFiles=null,this.FOnChange=null,this.FFileName="",this.FMultiFile=!1,this.FAccept="",this.FOpenDialogProc=null,this.FOptions={},this.FOnFileAsBase64=null,this.FOnGetFileAsArrayBuffer=null,this.FOnFileAsDataURL=null,this.FOnFileAsText=null,this.FOnGetFileAsStream=null},this.$final=function(){this.FFiles=void 0,this.FOnChange=void 0,this.FOpenDialogProc=void 0,this.FOptions=void 0,this.FOnFileAsBase64=void 0,this.FOnGetFileAsArrayBuffer=void 0,this.FOnFileAsDataURL=void 0,this.FOnFileAsText=void 0,this.FOnGetFileAsStream=void 0,pas.Classes.TComponent.$final.call(this)},this.HandleInputChange=function(t){for(var e=0,i=0,s="",n="",r=null,o=null,a=null;this.FFiles.GetCount()>0;)this.FFiles.Delete(0);for(var l=t.target.files,h=0,F=l.length-1;h<=F;h++)e=h,r=this.FFiles.Add$1(),a=l[e],s=l[e].name,n=l[e].type,i=l[e].size,o=new Date(l[e].lastModified),0===e&&(this.FFileName=s),r.FFileObject=a,r.FName=s,r.FMimeType=n,r.FSize=i,r.FModified=pas.SysUtils.EncodeDate(o.getYear()+1900,o.getMonth()+1,o.getDate())+pas.SysUtils.EncodeTime(o.getHours(),o.getMinutes(),o.getSeconds(),o.getMilliseconds());null!=this.FOpenDialogProc&&this.FOpenDialogProc(this.FFileName),this.FOpenDialogProc=null,null!=this.FOnChange&&this.FOnChange(this)},this.Create$1=function(t){return pas.Classes.TComponent.Create$1.call(this,t),this.FFiles=pas["WEBLib.WebCtrls"].TFiles.$create("Create$2",[this]),this},this.Destroy=function(){rtl.free(this,"FFiles"),pas.Classes.TComponent.Destroy.call(this)},this.Execute=function(){var t,e=null;t=rtl.createCallback(this,"HandleInputChange"),(e=document.createElement("input")).setAttribute("type","file"),(this.FMultiFile||6 in this.FOptions)&&e.setAttribute("multiple",""),""!==this.FAccept&&e.setAttribute("accept",this.FAccept),e.addEventListener("change",t),e.click()},this.Execute$1=function(t){this.FOpenDialogProc=t,this.Execute()},this.Perform=function(){var t=this;return new Promise((function(e,i){t.Execute$1((function(t){e(t)}))}))},rtl.addIntf(this,pas.System.IUnknown);var t=this.$rtti;t.addProperty("Accept",0,rtl.string,"FAccept","FAccept"),t.addProperty("MultiFile",0,rtl.boolean,"FMultiFile","FMultiFile",{Default:!1}),t.addProperty("OnChange",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnChange","FOnChange"),t.addProperty("OnGetFileAsText",0,pas["WEBLib.WebCtrls"].$rtti.TFileAsTextEvent,"FOnFileAsText","FOnFileAsText"),t.addProperty("OnGetFileAsArrayBuffer",0,pas["WEBLib.WebCtrls"].$rtti.TFileAsArrayBufferEvent,"FOnGetFileAsArrayBuffer","FOnGetFileAsArrayBuffer"),t.addProperty("OnGetFileAsStream",0,pas["WEBLib.WebCtrls"].$rtti.TFileAsStreamEvent,"FOnGetFileAsStream","FOnGetFileAsStream"),t.addProperty("OnGetFileAsBase64",0,pas["WEBLib.WebCtrls"].$rtti.TFileAsBase64Event,"FOnFileAsBase64","FOnFileAsBase64"),t.addProperty("OnGetFileAsDataURL",0,pas["WEBLib.WebCtrls"].$rtti.TFileAsDataURLEvent,"FOnFileAsDataURL","FOnFileAsDataURL")})),rtl.createClass(this,"TWebOpenDialog",this.TOpenDialog,(function(){rtl.addIntf(this,pas.System.IUnknown)})),this.MessageDlg=function(i,s,n,r){null==e.WebLibDlg&&(e.WebLibDlg=t.TMessageDlg.$create("Create$1",[null]),1===pas["WEBLib.Forms"].Application.FMainForm.FCSSLibrary&&e.WebLibDlg.InitBootstrapStyle()),e.WebLibDlg.ShowDialog$1(i,s,rtl.refSet(n),r)},this.ShowMessage=function(e){null!==pas["WEBLib.Forms"].Application&&null!==pas["WEBLib.Forms"].Application.FMainForm&&1===pas["WEBLib.Forms"].Application.FMainForm.FCSSLibrary?t.MessageDlg(e,2,rtl.createSet(2),null):alert(e)},t.$implcode=function(){e.lMaterial="https://fonts.googleapis.com/icon?family=Material+Icons",e.WebLibDlg=null,e.StringToHTML=function(t){var e="";return e=pas.SysUtils.StringReplace(t,"\r","<BR>",rtl.createSet(0)),e=pas.SysUtils.StringReplace(e,"\n","",rtl.createSet(0))}},t.$init=function(){e.WebLibDlg=null}}),["WEBLib.Forms","WEBLib.Consts"]),rtl.module("Math",["System"],(function(){"use strict";var t=this.$impl;this.InRange=function(t,e,i){return t>=e&&t<=i},this.SameValue=function(t,e,i){return 0===i&&(i=Math.max(1e-12*Math.min(Math.abs(t),Math.abs(e)),1e-12)),t>e?t-e<=i:e-t<=i},this.Floor=function(t){return pas.System.Trunc(Math.floor(t))},this.DegToRad=function(t){return t*(Math.PI/180)},this.EqualsValue=0,this.LessThanValue=-1,this.GreaterThanValue=1,this.CompareValue=function(t,e){var i=0;return i=1,t===e?i=0:t<e&&(i=-1),i},this.$implcode=function(){t.DZeroResolution=1e-12}}),[]),rtl.module("WEBLib.Utils",["System","Types","Web","SysUtils","Math","Classes","JS"],(function(){"use strict";this.FormatProp=function(t,e){return pas.SysUtils.Format$1(t,e,pas.SysUtils.TFormatSettings.Invariant())}}),["RTLConsts","WEBLib.Consts"]),rtl.module("WEBLib.Controls",["System","Classes","WEBLib.Graphics","Types","SysUtils","Web","JS"],(function(){"use strict";var t=this,e=t.$impl;this.VK_TAB=9,this.VK_RETURN=13,this.VK_ESCAPE=27,this.VK_PRIOR=33,this.VK_NEXT=34,this.VK_END=35,this.VK_HOME=36,this.VK_LEFT=37,this.VK_UP=38,this.VK_RIGHT=39,this.VK_DOWN=40,this.WHEEL_DELTA=120,this.$rtti.$inherited("TCursor",rtl.longint,{}),this.crDefault=0,this.crNone=1,this.crArrow=2,this.crCross=3,this.crIBeam=4,this.crSize=5,this.crSizeNESW=6,this.crSizeNS=7,this.crSizeNWSE=8,this.crSizeWE=9,this.crUpArrow=10,this.crHourGlass=11,this.crDrag=12,this.crNoDrop=13,this.crHSplit=14,this.crVSplit=15,this.crMultIDrag=16,this.crSQLWait=17,this.crNo=18,this.crAppStart=19,this.crHelp=20,this.crHandPoint=21,this.crSizeAll=22,this.CSSBackground="background-color",this.CSSZIndex="z-index",this.TDragState={0:"dsDragEnter",dsDragEnter:0,1:"dsDragLeave",dsDragLeave:1,2:"dsDragMove",dsDragMove:2},this.$rtti.$Enum("TDragState",{minvalue:0,maxvalue:2,ordtype:1,enumtype:this.TDragState}),this.TDragMode={0:"dmManual",dmManual:0,1:"dmAutomatic",dmAutomatic:1},this.$rtti.$Enum("TDragMode",{minvalue:0,maxvalue:1,ordtype:1,enumtype:this.TDragMode}),this.TDragKind={0:"dkDrag",dkDrag:0,1:"dkDock",dkDock:1},this.$rtti.$Enum("TDragKind",{minvalue:0,maxvalue:1,ordtype:1,enumtype:this.TDragKind}),rtl.createClass(this,"TDragObject",pas.System.TObject,(function(){})),this.TAlign={0:"alNone",alNone:0,1:"alTop",alTop:1,2:"alBottom",alBottom:2,3:"alLeft",alLeft:3,4:"alRight",alRight:4,5:"alClient",alClient:5,6:"alCustom",alCustom:6},this.$rtti.$Enum("TAlign",{minvalue:0,maxvalue:6,ordtype:1,enumtype:this.TAlign}),this.TMouseButton={0:"mbLeft",mbLeft:0,1:"mbRight",mbRight:1,2:"mbMiddle",mbMiddle:2},this.$rtti.$Enum("TMouseButton",{minvalue:0,maxvalue:2,ordtype:1,enumtype:this.TMouseButton}),this.TBorderStyle={0:"bsNone",bsNone:0,1:"bsSingle",bsSingle:1},this.$rtti.$Enum("TBorderStyle",{minvalue:0,maxvalue:1,ordtype:1,enumtype:this.TBorderStyle}),this.TSizeStyle={0:"ssPercent",ssPercent:0,1:"ssAbsolute",ssAbsolute:1,2:"ssAuto",ssAuto:2},this.$rtti.$Enum("TSizeStyle",{minvalue:0,maxvalue:2,ordtype:1,enumtype:this.TSizeStyle}),this.TAnchorKind={0:"akLeft",akLeft:0,1:"akTop",akTop:1,2:"akRight",akRight:2,3:"akBottom",akBottom:3},this.$rtti.$Enum("TAnchorKind",{minvalue:0,maxvalue:3,ordtype:1,enumtype:this.TAnchorKind}),this.$rtti.$Set("TAnchors",{comptype:this.$rtti.TAnchorKind}),this.$rtti.$inherited("TElementClassName",rtl.string,{}),this.$rtti.$inherited("TElementID",rtl.string,{}),this.TElementFont={0:"efProperty",efProperty:0,1:"efCSS",efCSS:1},this.$rtti.$Enum("TElementFont",{minvalue:0,maxvalue:1,ordtype:1,enumtype:this.TElementFont}),this.TElementPosition={0:"epAbsolute",epAbsolute:0,1:"epRelative",epRelative:1,2:"epIgnore",epIgnore:2},this.$rtti.$Enum("TElementPosition",{minvalue:0,maxvalue:2,ordtype:1,enumtype:this.TElementPosition}),this.TElementEvent={0:"eeClick",eeClick:0,1:"eeMouseDown",eeMouseDown:1,2:"eeMouseUp",eeMouseUp:2,3:"eeMouseMove",eeMouseMove:3,4:"eeDblClick",eeDblClick:4,5:"eeKeyPress",eeKeyPress:5,6:"eeKeyDown",eeKeyDown:6,7:"eeKeyUp",eeKeyUp:7},this.TTextDirection={0:"tdDefault",tdDefault:0,1:"tdLeftToRight",tdLeftToRight:1,2:"tdRightToLeft",tdRightToLeft:2,3:"tdInherit",tdInherit:3},this.$rtti.$Enum("TTextDirection",{minvalue:0,maxvalue:3,ordtype:1,enumtype:this.TTextDirection}),this.TBevelCut={0:"bvNone",bvNone:0,1:"bvLowered",bvLowered:1,2:"bvRaised",bvRaised:2,3:"bvSpace",bvSpace:3},this.TBevelEdge={0:"beLeft",beLeft:0,1:"beTop",beTop:1,2:"beRight",beRight:2,3:"beBottom",beBottom:3},this.TMaterialGlyphType={0:"mgNormal",mgNormal:0,1:"mgOutlined",mgOutlined:1,2:"mgTwoTone",mgTwoTone:2,3:"mgRound",mgRound:3,4:"mgSharp",mgSharp:4},this.$rtti.$Enum("TMaterialGlyphType",{minvalue:0,maxvalue:4,ordtype:1,enumtype:this.TMaterialGlyphType}),rtl.recNewT(this,"TJSXMLHttpRequestRecord",(function(){this.req=null,this.$eq=function(t){return this.req===t.req},this.$assign=function(t){return this.req=t.req,this},t.$rtti.$Record("TJSXMLHttpRequestRecord",{}).addField("req",pas.Web.$rtti.TJSXMLHttpRequest)})),rtl.recNewT(this,"TJSArrayBufferRecord",(function(){this.jsarraybuffer=null,this.$eq=function(t){return this.jsarraybuffer===t.jsarraybuffer},this.$assign=function(t){return this.jsarraybuffer=t.jsarraybuffer,this},t.$rtti.$Record("TJSArrayBufferRecord",{}).addField("jsarraybuffer",pas.JS.$rtti.TJSArrayBuffer)})),this.$rtti.$MethodVar("TNotifyEvent",{procsig:rtl.newTIProcSig([["Sender",pas.System.$rtti.TObject]]),methodkind:0}),this.$rtti.$MethodVar("TMouseEvent",{procsig:rtl.newTIProcSig([["Sender",pas.System.$rtti.TObject],["Button",this.$rtti.TMouseButton],["Shift",pas.Classes.$rtti.TShiftState],["X",rtl.longint],["Y",rtl.longint]]),methodkind:0}),this.$rtti.$MethodVar("TMouseWheelEvent",{procsig:rtl.newTIProcSig([["Sender",pas.System.$rtti.TObject],["Shift",pas.Classes.$rtti.TShiftState],["WheelDelta",rtl.longint],["MousePos",pas.Types.$rtti.TPoint],["Handled",rtl.boolean,1]]),methodkind:0}),this.$rtti.$MethodVar("TMouseWheelUpDownEvent",{procsig:rtl.newTIProcSig([["Sender",pas.System.$rtti.TObject],["Shift",pas.Classes.$rtti.TShiftState],["MousePos",pas.Types.$rtti.TPoint],["Handled",rtl.boolean,1]]),methodkind:0}),this.$rtti.$MethodVar("TMouseMoveEvent",{procsig:rtl.newTIProcSig([["Sender",pas.System.$rtti.TObject],["Shift",pas.Classes.$rtti.TShiftState],["X",rtl.longint],["Y",rtl.longint]]),methodkind:0}),this.$rtti.$MethodVar("TKeyEvent",{procsig:rtl.newTIProcSig([["Sender",pas.System.$rtti.TObject],["AKey",rtl.word,1],["Shift",pas.Classes.$rtti.TShiftState]]),methodkind:0}),this.$rtti.$MethodVar("TKeyPressEvent",{procsig:rtl.newTIProcSig([["Sender",pas.System.$rtti.TObject],["AChar",rtl.char,1]]),methodkind:0}),this.$rtti.$MethodVar("TTouchEvent",{procsig:rtl.newTIProcSig([["Sender",pas.System.$rtti.TObject],["X",rtl.longint],["Y",rtl.longint]]),methodkind:0}),this.TBiDiMode={0:"bdLeftToRight",bdLeftToRight:0,1:"bdRightToLeft",bdRightToLeft:1,2:"bdRightToLeftNoAlign",bdRightToLeftNoAlign:2,3:"bdRightToLeftReadingOnly",bdRightToLeftReadingOnly:3},this.$rtti.$Enum("TBiDiMode",{minvalue:0,maxvalue:3,ordtype:1,enumtype:this.TBiDiMode}),this.$rtti.$MethodVar("TDragOverEvent",{procsig:rtl.newTIProcSig([["Sender",pas.System.$rtti.TObject],["Source",pas.System.$rtti.TObject],["X",rtl.longint],["Y",rtl.longint],["State",this.$rtti.TDragState],["Accept",rtl.boolean,1]]),methodkind:0}),this.$rtti.$MethodVar("TDragDropEvent",{procsig:rtl.newTIProcSig([["Sender",pas.System.$rtti.TObject],["Source",pas.System.$rtti.TObject],["X",rtl.longint],["Y",rtl.longint]]),methodkind:0}),this.$rtti.$MethodVar("TStartDragEvent",{procsig:rtl.newTIProcSig([["Sender",pas.System.$rtti.TObject],["DragObject",this.$rtti.TDragObject,1]]),methodkind:0}),this.$rtti.$MethodVar("TEndDragEvent",{procsig:rtl.newTIProcSig([["Sender",pas.System.$rtti.TObject],["Target",pas.System.$rtti.TObject],["X",rtl.longint],["Y",rtl.longint]]),methodkind:0}),this.TControlStyleValue={0:"csAcceptsControls",csAcceptsControls:0,1:"csSetCaption",csSetCaption:1},rtl.createClass(this,"TMargins",pas.Classes.TPersistent,(function(){this.$init=function(){pas.Classes.TPersistent.$init.call(this),this.FOnChange=null,this.FLeft=0,this.FTop=0,this.FRight=0,this.FBottom=0},this.$final=function(){this.FOnChange=void 0,pas.Classes.TPersistent.$final.call(this)},this.SetLeft=function(t){t!==this.FLeft&&(this.FLeft=t,this.DoChange())},this.SetTop=function(t){t!==this.FTop&&(this.FTop=t,this.DoChange())},this.SetRight=function(t){t!==this.FRight&&(this.FRight=t,this.DoChange())},this.SetBottom=function(t){t!==this.FBottom&&(this.FBottom=t,this.DoChange())},this.DoChange=function(){null!=this.FOnChange&&this.FOnChange(this)},this.Create$1=function(){return this.FLeft=3,this.FTop=3,this.FBottom=3,this.FRight=3,this},this.Assign=function(e){t.TMargins.isPrototypeOf(e)?(this.FLeft=rtl.as(e,t.TMargins).FLeft,this.FTop=rtl.as(e,t.TMargins).FTop,this.FBottom=rtl.as(e,t.TMargins).FBottom,this.FRight=rtl.as(e,t.TMargins).FRight):pas.Classes.TPersistent.Assign.apply(this,arguments)};var e=this.$rtti;e.addProperty("Left",2,rtl.longint,"FLeft","SetLeft",{Default:3}),e.addProperty("Top",2,rtl.longint,"FTop","SetTop",{Default:3}),e.addProperty("Right",2,rtl.longint,"FRight","SetRight",{Default:3}),e.addProperty("Bottom",2,rtl.longint,"FBottom","SetBottom",{Default:3})})),rtl.createClass(this,"TPadding",pas.Classes.TPersistent,(function(){this.$init=function(){pas.Classes.TPersistent.$init.call(this),this.FOnChange=null,this.FLeft=0,this.FTop=0,this.FRight=0,this.FBottom=0},this.$final=function(){this.FOnChange=void 0,pas.Classes.TPersistent.$final.call(this)},this.SetLeft=function(t){this.FLeft!==t&&(this.FLeft=t,this.DoChange())},this.SetTop=function(t){this.FTop!==t&&(this.FTop=t,this.DoChange())},this.SetRight=function(t){this.FRight!==t&&(this.FRight=t,this.DoChange())},this.SetBottom=function(t){this.FBottom!==t&&(this.FBottom=t,this.DoChange())},this.DoChange=function(){null!=this.FOnChange&&this.FOnChange(this)},this.Create$1=function(){return pas.System.TObject.Create.call(this),this.FLeft=0,this.FTop=0,this.FRight=0,this.FBottom=0,this},this.Assign=function(e){t.TPadding.isPrototypeOf(e)&&(this.FLeft=rtl.as(e,t.TPadding).FLeft,this.FRight=rtl.as(e,t.TPadding).FRight,this.FTop=rtl.as(e,t.TPadding).FTop,this.FBottom=rtl.as(e,t.TPadding).FBottom)};var e=this.$rtti;e.addProperty("Left",2,rtl.longint,"FLeft","SetLeft",{Default:0}),e.addProperty("Top",2,rtl.longint,"FTop","SetTop",{Default:0}),e.addProperty("Right",2,rtl.longint,"FRight","SetRight",{Default:0}),e.addProperty("Bottom",2,rtl.longint,"FBottom","SetBottom",{Default:0})})),rtl.createClass(this,"TControl",pas.Classes.TComponent,(function(){this.$init=function(){pas.Classes.TComponent.$init.call(this),this.FGotFocus=!1,this.FAcceptDrag=!1,this.FCaptureDown=!1,this.FMouseInsideLayer=!1,this.FLayer=null,this.FCaptured=!1,this.FControlCreated=!1,this.FUpdateCount=0,this.FBlockUpdateElement=!1,this.FElement=null,this.FID="",this.FNew=!1,this.FContainer=null,this.FElementEvent=null,this.FLastElementEvent=null,this.FElementClassName="",this.FColor=0,this.FFont=null,this.FParent=null,this.FPrevParent=null,this.FControls=[],this.FOnDragOver=null,this.FOnDragDrop=null,this.FOnStartDrag=null,this.FonEndDrag=null,this.FOnClick=null,this.FOnDblClick=null,this.FOnMouseDown=null,this.FOnMouseUp=null,this.FOnMouseMove=null,this.FOnKeyDown=null,this.FOnKeyUp=null,this.FOnKeyPress=null,this.FOnEnter=null,this.FOnExit=null,this.FEnabled=!1,this.FHint="",this.FRole="",this.FShowHint=!1,this.FTabOrder=0,this.FTabStop=!1,this.FVisible=!1,this.FWidth=0,this.FHeight=0,this.FTag$1=0,this.FAlign=0,this.FAnchors={},this.FAlignWithMargins=!1,this.FIsAligning=!1,this.FOnMouseEnter=null,this.FOnMouseLeave=null,this.FCursor=0,this.FDoubleBuffered=!1,this.FControlStyle={},this.FMargins=null,this.FOnMouseWheel=null,this.FParentDoubleBuffered=!1,this.FParentColor=!1,this.FParentFont=!1,this.FParentBiDiMode=!1,this.FOnTouchMove=null,this.FOnTouchStart=null,this.FOnTouchEnd=null,this.FOnTouchCancel=null,this.FLinkTouchEvents=!1,this.FWidthStyle=0,this.FHeightStyle=0,this.FWidthPercent=0,this.FHeightPercent=0,this.FOrigRect=pas.Types.TRect.$new(),this.FOrigParentRect=pas.Types.TRect.$new(),this.FIsResizing=!1,this.FShowFocus=!1,this.FBorderWidth=0,this.FOrigTop=0,this.FOrigLeft=0,this.FUpdateTopLeft=!1,this.FEnablePropagation=!1,this.FParentShowHint=!1,this.FScriptLoaded=!1,this.FControlScriptCountLoaded=0,this.FRequiredScripts=null,this.FElementFont=0,this.FElementPosition=0,this.FParentElement=null,this.FClipChildren=!1,this.FTextDirection=0,this.FEventStopPropagation={},this.FOnResize=null,this.FMouseMovePtr=null,this.FMouseDownPtr=null,this.FMouseUpPtr=null,this.FMouseEnterPtr=null,this.FMouseLeavePtr=null,this.FClickPtr=null,this.FDblClickPtr=null,this.FKeyDownPtr=null,this.FKeyUpPtr=null,this.FKeyPressPtr=null,this.FInputPtr=null,this.FTouchStartPtr=null,this.FTouchEndPtr=null,this.FTouchMovePtr=null,this.FTouchCancelPtr=null,this.FContextMenuPtr=null,this.FExitPtr=null,this.FEnterPtr=null,this.FWheelPtr=null,this.FLayerMouseEnterPtr=null,this.FLayerMouseLeavePtr=null,this.FScriptLoadedPtr=null,this.FDragStartPtr=null,this.FDragOverPtr=null,this.FDragEnterPtr=null,this.FDragLeavePtr=null,this.FDragEndPtr=null,this.FDragDropPtr=null,this.FChildOrder=0,this.FAllowTouch=!1,this.FWheelAccumulator=0,this.FWheelMousePos=pas.Types.TPoint.$new(),this.FBiDiMode=0,this.FOnMouseWheelDown=null,this.FOnMouseWheelUp=null,this.FNoUserSelect=!1,this.FEventsBound=!1,this.FDragMode=0,this.FToolTip=void 0},this.$final=function(){this.FLayer=void 0,this.FElement=void 0,this.FContainer=void 0,this.FElementEvent=void 0,this.FLastElementEvent=void 0,this.FFont=void 0,this.FParent=void 0,this.FPrevParent=void 0,this.FControls=void 0,this.FOnDragOver=void 0,this.FOnDragDrop=void 0,this.FOnStartDrag=void 0,this.FonEndDrag=void 0,this.FOnClick=void 0,this.FOnDblClick=void 0,this.FOnMouseDown=void 0,this.FOnMouseUp=void 0,this.FOnMouseMove=void 0,this.FOnKeyDown=void 0,this.FOnKeyUp=void 0,this.FOnKeyPress=void 0,this.FOnEnter=void 0,this.FOnExit=void 0,this.FAnchors=void 0,this.FOnMouseEnter=void 0,this.FOnMouseLeave=void 0,this.FControlStyle=void 0,this.FMargins=void 0,this.FOnMouseWheel=void 0,this.FOnTouchMove=void 0,this.FOnTouchStart=void 0,this.FOnTouchEnd=void 0,this.FOnTouchCancel=void 0,this.FOrigRect=void 0,this.FOrigParentRect=void 0,this.FRequiredScripts=void 0,this.FParentElement=void 0,this.FEventStopPropagation=void 0,this.FOnResize=void 0,this.FWheelMousePos=void 0,this.FOnMouseWheelDown=void 0,this.FOnMouseWheelUp=void 0,pas.Classes.TComponent.$final.call(this)},this.GetControlsCount=function(){return rtl.length(this.FControls)},this.GetControls=function(t){return this.FControls[t]},this.SetVisible=function(t){this.FVisible!==t&&(this.VisibleChanging(),this.FVisible=t,this.UpdateElement(),this.DoRealign(),this.AlignControl(this),this.VisibleChanged())},this.SetHint=function(t){this.FHint!==t&&(this.FHint=t,this.UpdateElement())},this.SetShowHint=function(t){this.FShowHint!==t&&(this.FShowHint=t,this.UpdateElement())},this.SetTabOrder=function(t){this.FTabOrder!==t&&(this.FTabOrder=t,this.UpdateElement())},this.SetTabStop=function(t){this.FTabStop!==t&&(this.FTabStop=t,this.UpdateElement())},this.SetAlign=function(t){this.FAlign!==t&&(this.FAlign=t,this.DoRealign())},this.SetAlignWithMargins=function(t){this.FAlignWithMargins!==t&&(this.FAlignWithMargins=t,this.DoRealign())},this.GetBoundsRect=function(){var t=pas.Types.TRect.$new();return t.Left=this.GetLeft(),t.Top=this.GetTop(),t.Right=this.GetLeft()+this.GetWidth(),t.Bottom=this.GetTop()+this.GetHeight(),t},this.SetID=function(t){var e=null,i=null,s=null,n=null,r=0,o=0,a=0,l=0;if(this.FNew&&this.FID!==t&&null!=(e=document.getElementById(t)))return r=this.FLeft,o=this.FTop,a=this.FWidth,l=this.FHeight,i=null,this.UnbindEvents(),null!=this.FContainer&&(this.FParentElement=this.FContainer.parentElement,i=document.createElement("SPAN"),this.MoveElements(this.FContainer,i)),n=this.FParent,this.SetParent(null),this.CreateWithID(t),this.SetParentComponent(n),this.FID=t,this.FWidth=a,this.FHeight=l,this.UpdateElement(),4 in this.FComponentState&&(this.FLeft=r,this.FTop=o),void(null!=i&&this.MoveElementsAndFree(i,this.GetElementHandle()));if(!this.FNew&&this.FID!==t){if(a=this.FWidth,l=this.FHeight,null!=(e=document.getElementById(this.FID))&&(i=document.createElement("SPAN"),this.MoveElements(e,i),this.UnbindEvents()),""!==t&&null!=(e=document.getElementById(t)))return this.CreateWithID(t),this.FID=t,this.FWidth=a,this.FHeight=l,this.UpdateElement(),void this.MoveElementsAndFree(i,this.FContainer);this.FNew=!0,this.FElement=null,this.CreateControl(),""===t&&(this.CreateInitialize(),this.FWidth=a,this.FHeight=l),null!=this.FParentElement?this.FParentElement.appendChild(this.GetContainer()):document.body.appendChild(this.GetContainer()),null!=(s=pas["WEBLib.Forms"].GetParentForm(this))&&(this.SetParent(s),this.SetElementPosition(0),this.SetLeft(0),this.SetTop(0)),null!=i&&this.MoveElementsAndFree(i,this.FContainer),this.UpdateElement(),this.UpdateElementSize()}this.FID=t,null!=this.FContainer&&this.FContainer.setAttribute("id",t)},this.SetMargins=function(t){this.FMargins.Assign(t)},this.SetAnchors=function(t){rtl.neSet(this.FAnchors,t)&&(this.FAnchors=rtl.refSet(t),0 in this.FComponentState||this.UpdateAnchoring())},this.GetElementEvent=function(){return this.FElementEvent},this.GetClientOrigin=function(){var t=pas.Types.TPoint.$new(),e=null;return t.$assign(pas.Types.Point(0,0)),null!=this.GetElementHandle()&&(e=this.GetElementHandle().getBoundingClientRect(),t.$assign(pas.Types.Point(Math.round(e.left),Math.round(e.top)))),t},this.SetHeightStyle=function(t){this.FHeightStyle!==t&&(this.FHeightStyle=t,2===this.FHeightStyle&&null!=this.GetElementHandle()&&this.GetElementStyle().removeProperty("height"),this.UpdateElementSize(),this.ResetAnchoring(),this.DoBoundsChange())},this.SetWidthStyle=function(t){this.FWidthStyle!==t&&(this.FWidthStyle=t,2===this.FWidthStyle&&null!=this.GetElementHandle()&&this.GetElementStyle().removeProperty("width"),this.UpdateElementSize(),this.ResetAnchoring(),this.DoBoundsChange())},this.SetHeightPercent=function(t){this.FHeightPercent!==t&&(this.FHeightPercent=t,this.UpdateElementSize(),this.ResetAnchoring(),this.DoBoundsChange())},this.SetWidthPercent=function(t){this.FWidthPercent!==t&&(this.FWidthPercent=t,this.UpdateElementSize(),this.ResetAnchoring(),this.DoBoundsChange())},this.SetShowFocus=function(t){this.FShowFocus!==t&&(this.FShowFocus=t,this.UpdateElement())},this.GetIsLinked=function(){return!this.FNew},this.SetElementFont=function(t){this.FElementFont!==t&&(this.FElementFont=t,this.UpdateElementVisual())},this.SetElementPosition=function(t){this.FElementPosition!==t&&(this.FElementPosition=t,null!=this.GetElementHandle()&&(this.UpdateElementSize(),this.RecreateCanvas(),this.InternalResize()))},this.SetClipChildren=function(t){this.FClipChildren=t,this.UpdateElement()},this.SetChildOrderEx=function(t){this.FChildOrder=t},this.GetRole=function(){var t="";return t=this.FRole,null!=this.GetElementHandle()&&(t=this.GetElementHandle().getAttribute("role")),t},this.SetRole=function(t){this.FRole=t,null!=this.GetElementHandle()&&(""===t?this.GetElementHandle().removeAttribute("role"):this.GetElementHandle().setAttribute("role",t))},this.GetContainer=function(){return this.FContainer},this.GetChildContainer=function(){return this.FContainer},this.SetParentFont=function(t){t!==this.FParentFont&&t&&null!=this.FParent&&(this.BeginUpdate(),this.FFont.Assign(this.FParent.FFont),this.EndUpdate(),this.UpdateElement()),this.FParentFont=t},this.SetParentColor=function(t){this.FParentColor!==t&&t&&null!=this.FParent&&this.SetColor(this.FParent.FColor),this.FParentColor=t},this.SetDragMode=function(t){this.FDragMode=t,1===t?this.BeginDrag():this.DisableDrag()},this.SetWidth=function(t){this.FWidth!==t&&(this.FWidth=t,this.ResetAnchoring(),this.DoBoundsChange(),this.GetIsLinked()&&!this.IsUpdating()&&null!=this.GetElementHandle()&&(t>=0?this.GetElementStyle().setProperty("width",pas.SysUtils.IntToStr(t)+"px"):this.GetElementStyle().removeProperty("width")))},this.SetHeight=function(t){var e=null;this.FHeight!==t&&(this.FAlign in rtl.createSet(3,4,5)&&null!=this.GetElementHandle()&&(e=this.GetElementHandle().getBoundingClientRect()).top+t>=pas["WEBLib.Forms"].WinHeight()&&(t=Math.round(pas["WEBLib.Forms"].WinHeight()-e.top)),this.FHeight=t,this.ResetAnchoring(),this.DoBoundsChange(),this.GetIsLinked()&&!this.IsUpdating()&&null!=this.GetElementHandle()&&(t>=0?this.GetElementStyle().setProperty("height",pas.SysUtils.IntToStr(t)+"px"):this.GetElementStyle().removeProperty("height")))},this.SetWidthInt=function(t){this.FWidth=t},this.SetHeightInt=function(t){this.FHeight=t},this.SetEnabled=function(t){this.FEnabled!==t&&(this.FEnabled=t,this.UpdateElementData())},this.RecreateCanvas=function(){},this.VisibleChanging=function(){},this.VisibleChanged=function(){for(var t=0,e=0,i=this.GetControlsCount()-1;e<=i;e++)t=e,this.GetControls(t).VisibleChanged()},this.ColorChanging=function(){},this.GetWidth=function(){var t=0,e=null;return t=this.FWidth,null==this.GetElementHandle()||0 in this.FComponentState||(-1===t&&(t=Math.round(pas.System.Int(this.GetElementHandle().offsetWidth))),1!==this.FWidthStyle&&(e=this.GetElementHandle().getBoundingClientRect(),t=Math.round(pas.System.Int(e.right-e.left)))),t},this.GetHeight=function(){var t=0,e=null;return t=this.FHeight,null==this.GetElementHandle()||0 in this.FComponentState||(-1===t&&(t=Math.round(pas.System.Int(this.GetElementHandle().offsetHeight))),1!==this.FHeightStyle&&(e=this.GetElementHandle().getBoundingClientRect(),t=Math.round(pas.System.Int(e.bottom-e.top)))),t},this.GetOuterWidth=function(){return this.FWidth-this.FBorderWidth},this.GetOuterHeight=function(){return this.FHeight-this.FBorderWidth},this.GetDesignWidth=function(){return this.FWidth},this.GetDesignHeight=function(){return this.FHeight},this.GetDesignLeft=function(){return this.FLeft},this.GetDesignTop=function(){return this.FTop},this.GetLeft=function(){var t=0;return-1!==(t=this.FLeft)||null==this.GetElementHandle()||0 in this.FComponentState||(t=Math.round(this.GetElementHandle().offsetLeft)),t},this.GetTop=function(){var t=0;return-1!==(t=this.FTop)||null==this.GetElementHandle()||0 in this.FComponentState||(t=Math.round(this.GetElementHandle().offsetTop)),t},this.CreateElement=function(){return null,null},this.CreateChildElements=function(t){},this.ContainerElement=function(){return document.body},this.IsStructuralElement=function(){return!1,!1},this.IsEnabled=function(){return this.FEnabled},this.GetNewName=function(){var e,i="",s="";return i=this.$classname,pas.System.Delete({get:function(){return i},set:function(t){i=t}},1,1),s="",null!=(e=pas["WEBLib.Forms"].GetParentForm(this))&&(s=e.$classname),s+"_"+t.FindUniqueName(i)},this.IsInputControl=function(){return!1,!1},this.RecreateElement=function(){null!=this.GetContainer()&&(this.UnbindEvents(),this.GetContainer().parentNode.removeChild(this.GetContainer()),this.FElement=null,this.CreateControl(),null!=this.FParent&&null!=this.FParent.GetContainer()&&this.FParent.GetChildContainer().appendChild(this.GetContainer()))},this.BindElement=function(){},this.CreateInitialize=function(){this.FRequiredScripts=pas.Classes.TStringList.$create("Create$1"),this.FOrigRect.$assign(pas.Types.Rect(-1,-1,-1,-1)),this.FClipChildren=!0},this.DestroyControls=function(){for(var t=0,e=null,i=this.GetControlsCount()-1;i>=0;i--)t=i,e=this.GetControls(t),e=rtl.freeLoc(e)},this.ClearControls=function(){this.FControls=rtl.arraySetLength(this.FControls,null,0)},this.GetElementStyle=function(){return this.GetElementHandle().style},this.SetControlCursor=function(t){this.FCursor=t,""===this.FElementClassName&&null!=this.GetElementHandle()&&this.SetElementPointer(this.GetElementHandle(),t)},this.SetBiDiMode=function(t){null!=this.GetElementHandle()&&(0===t?this.GetElementHandle().removeAttribute("dir"):this.GetElementHandle().setAttribute("dir","rtl"))},this.GetMouseEventButton=function(t){var e=0;e=0;var i=t.button;return 0===i?e=0:1===i?e=2:2===i&&(e=1),e},this.GetMouseEventShiftState=function(t){var e={};return e={},t.shiftKey&&(e=rtl.unionSet(e,rtl.createSet(0))),t.ctrlKey&&(e=rtl.unionSet(e,rtl.createSet(2))),t.altKey&&(e=rtl.unionSet(e,rtl.createSet(1))),1==(1&t.buttons)&&(e=rtl.unionSet(e,rtl.createSet(3))),2==(2&t.buttons)&&(e=rtl.unionSet(e,rtl.createSet(4))),4==(4&t.buttons)&&(e=rtl.unionSet(e,rtl.createSet(5))),e},this.GetKeyBoardEventShiftState=function(t){var e={};return e={},t.shiftKey&&(e=rtl.unionSet(e,rtl.createSet(0))),t.ctrlKey&&(e=rtl.unionSet(e,rtl.createSet(2))),t.altKey&&(e=rtl.unionSet(e,rtl.createSet(1))),e},this.GetMouseWheelEventShiftState=function(t){var e={};return e={},t.shiftKey&&(e=rtl.unionSet(e,rtl.createSet(0))),t.ctrlKey&&(e=rtl.unionSet(e,rtl.createSet(2))),t.altKey&&(e=rtl.unionSet(e,rtl.createSet(1))),e},this.GetTouchEventShiftState=function(t){var e={};return e={},t.shiftKey&&(e=rtl.unionSet(e,rtl.createSet(0))),t.ctrlKey&&(e=rtl.unionSet(e,rtl.createSet(2))),t.altKey&&(e=rtl.unionSet(e,rtl.createSet(1))),e},this.HandleDoClick=function(t){return this.FElementEvent=t,0 in this.FEventStopPropagation&&this.StopPropagation(),this.FEnabled&&this.Click(),!0,this.FElementEvent=null,!0},this.HandleDoWheel=function(t){var e,i=!1,s=0,n=0;return this.FElementEvent=t,this.StopPropagation(),this.XYToClient(t.clientX,t.clientY,{get:function(){return s},set:function(t){s=t}},{get:function(){return n},set:function(t){n=t}}),this.FWheelMousePos.x=Math.round(s),this.FWheelMousePos.y=Math.round(n),e=rtl.refSet(this.GetMouseWheelEventShiftState(t)),i=!1,this.MouseWheel(rtl.refSet(e),pas.System.Trunc(-t.deltaY),{get:function(){return i},set:function(t){i=t}}),!0,this.FElementEvent=null,!0},this.HandleDoDblClick=function(t){return this.FElementEvent=t,4 in this.FEventStopPropagation&&this.StopPropagation(),this.FEnabled&&this.DblClick(),!0,this.FElementEvent=null,!0},this.HandleDoMouseDown=function(i){var s,n,r=!1,o=0,a=0;return this.FElementEvent=i,1 in this.FEventStopPropagation&&this.StopPropagation(),this.CanFocus()||this.PreventDefault(),e.FMouseX=Math.round(i.clientX),e.FMouseY=Math.round(i.clientY),this.XYToClient(i.clientX,i.clientY,{get:function(){return o},set:function(t){o=t}},{get:function(){return a},set:function(t){a=t}}),this.HasVertScrollBar()&&o>this.GetWidth()-t.GetScrollBarWidth()||this.HasHorzScrollBar()&&a>this.GetHeight()-t.GetScrollBarHeight()||(s=rtl.refSet(this.GetMouseEventShiftState(i)),n=this.GetMouseEventButton(i),this.MouseDown(n,rtl.refSet(s),pas.System.Trunc(o),pas.System.Trunc(a)),r=!0,this.FElementEvent=null),r},this.HandleDoMouseUp=function(e){var i,s,n=!1,r=0,o=0;return this.FElementEvent=e,2 in this.FEventStopPropagation&&this.StopPropagation(),this.XYToClient(e.clientX,e.clientY,{get:function(){return r},set:function(t){r=t}},{get:function(){return o},set:function(t){o=t}}),this.HasVertScrollBar()&&r>this.GetWidth()-t.GetScrollBarWidth()||this.HasHorzScrollBar()&&o>this.GetHeight()-t.GetScrollBarHeight()?(this.FElementEvent=null,n):(i=rtl.refSet(this.GetMouseEventShiftState(e)),s=this.GetMouseEventButton(e),0===this.FDragMode&&this.DisableDrag(),this.MouseUp(s,rtl.refSet(i),pas.System.Trunc(r),pas.System.Trunc(o)),n=!0,this.FElementEvent=null,n)},this.HandleDoMouseMove=function(t){var i,s=0,n=0;return this.FElementEvent=t,e.FCursorX=Math.round(t.clientX),e.FCursorY=Math.round(t.clientY),3 in this.FEventStopPropagation&&this.StopPropagation(),this.XYToClient(t.clientX,t.clientY,{get:function(){return s},set:function(t){s=t}},{get:function(){return n},set:function(t){n=t}}),i=rtl.refSet(this.GetMouseEventShiftState(t)),this.MouseMove(rtl.refSet(i),pas.System.Trunc(s),pas.System.Trunc(n)),!0,this.FElementEvent=null,!0},this.HandleDoMouseLeave=function(t){var e=!1;return this.Captured()?e:(t.stopPropagation(),this.DoMouseLeave(),e=!0)},this.HandleDoContextMenu=function(t){return!0,!0},this.LayerHandleDoMouseEnter=function(t){return 0===t.buttons&&this.Captured()&&!this.FMouseInsideLayer&&(this.ReleaseCapture(),this.HandleDoMouseUp(t),this.HandleDoMouseLeave(t)),this.FMouseInsideLayer=!0,!0,!0},this.LayerHandleDoMouseLeave=function(t){return this.FMouseInsideLayer=!1,!0,!0},this.HandleDoMouseEnter=function(t){var e=!1;return this.Captured()?e:(t.stopPropagation(),this.DoMouseEnter(),e=!0)},this.HandleDoKeyDown=function(t){var e=0,i={};return this.FElementEvent=t,6 in this.FEventStopPropagation&&this.StopPropagation(),null==t.key||(e=this.GetKeyCode(t.key,!0),i=rtl.refSet(this.GetKeyBoardEventShiftState(t)),this.KeyDown({get:function(){return e},set:function(t){e=t}},rtl.refSet(i))),!0,0===e&&this.PreventDefault(),this.FElementEvent=null,!0},this.HandleDoKeyUp=function(t){var e=0,i={},s="";return this.FElementEvent=t,7 in this.FEventStopPropagation&&this.StopPropagation(),null==t.key||(e=this.GetKeyCode(t.key,!0),i=rtl.refSet(this.GetKeyBoardEventShiftState(t)),27===e&&(s="",this.KeyPress({get:function(){return s},set:function(t){s=t}})),this.KeyUp({get:function(){return e},set:function(t){e=t}},rtl.refSet(i))),!0,0===e&&this.PreventDefault(),this.FElementEvent=null,!0},this.HandleDoKeyPress=function(t){var e="";return this.FElementEvent=t,5 in this.FEventStopPropagation&&this.StopPropagation(),this.IsKeyCharacter(t.key)&&(e=this.GetKeyChar(t.key),this.KeyPress({get:function(){return e},set:function(t){e=t}})),!0,"\0"===e&&this.PreventDefault(),this.FElementEvent=null,!0},this.HandleDoInput=function(e){var i=!1,s="",n="";return t.IsAndroid()&&(this.FElementEvent=e,5 in this.FEventStopPropagation&&this.StopPropagation(),s="\0",""!==e.data&&(n=e.data,s=pas.System.Assigned(n)?n.charAt(n.length-1):"\b",this.KeyPress({get:function(){return s},set:function(t){s=t}})),i=!0,"\0"===s&&this.PreventDefault(),this.FElementEvent=null),i},this.HandleDoExit=function(t){return this.DoExit(),!0,!0},this.HandleDoEnter=function(t){return this.FElementEvent=t,this.StopPropagation(),this.DoEnter(),!0,this.FElementEvent=null,this.FGotFocus=!0,!0},this.HandleDoTouchStart=function(t){var e=0,i=0,s=null,n={};return this.FElementEvent=t,this.FLastElementEvent=t,this.StopPropagation(),this.FAllowTouch||this.PreventDefault(),t.touches.length>0&&(s=t.touches.item(0),this.XYToClient(s.clientX,s.clientY,{get:function(){return e},set:function(t){e=t}},{get:function(){return i},set:function(t){i=t}}),n=rtl.refSet(this.GetTouchEventShiftState(t)),this.FLinkTouchEvents&&this.MouseDown(0,rtl.refSet(n),pas.System.Trunc(e),pas.System.Trunc(i)),this.TouchStart(pas.System.Trunc(e),pas.System.Trunc(i))),!0,this.FElementEvent=null,!0},this.HandleDoTouchMove=function(t){var e=0,i=0,s=null,n={};return this.FElementEvent=t,this.FLastElementEvent=t,this.StopPropagation(),this.FAllowTouch||this.PreventDefault(),this.Captured()&&this.PreventDefault(),t.touches.length>0&&(s=t.touches.item(0),this.XYToClient(s.clientX,s.clientY,{get:function(){return e},set:function(t){e=t}},{get:function(){return i},set:function(t){i=t}}),n=rtl.refSet(this.GetTouchEventShiftState(t)),this.FLinkTouchEvents&&this.MouseMove(rtl.refSet(n),pas.System.Trunc(e),pas.System.Trunc(i)),this.TouchMove(pas.System.Trunc(e),pas.System.Trunc(i))),this.FElementEvent=null,!0,!0},this.HandleDoTouchEnd=function(t){var e=0,i=0,s=null,n={};return this.FElementEvent=t,this.FAllowTouch||this.PreventDefault(),this.ReleaseCapture(),this.StopPropagation(),null!=this.FLastElementEvent&&this.FLastElementEvent.touches.length>0&&(s=this.FLastElementEvent.touches.item(0),this.XYToClient(s.clientX,s.clientY,{get:function(){return e},set:function(t){e=t}},{get:function(){return i},set:function(t){i=t}}),n=rtl.refSet(this.GetTouchEventShiftState(t)),this.FLinkTouchEvents&&this.MouseUp(0,rtl.refSet(n),pas.System.Trunc(e),pas.System.Trunc(i)),this.TouchEnd(pas.System.Trunc(e),pas.System.Trunc(i))),this.FElementEvent=null,!0,!0},this.HandleDoTouchCancel=function(t){var e=0,i=0,s=null,n={};return this.FElementEvent=t,this.ReleaseCapture(),this.StopPropagation(),t.touches.length>0&&(s=t.touches.item(0),this.XYToClient(s.clientX,s.clientY,{get:function(){return e},set:function(t){e=t}},{get:function(){return i},set:function(t){i=t}}),n=rtl.refSet(this.GetTouchEventShiftState(t)),this.FLinkTouchEvents&&this.MouseUp(0,rtl.refSet(n),pas.System.Trunc(e),pas.System.Trunc(i)),this.TouchCancel(pas.System.Trunc(e),pas.System.Trunc(i))),this.FElementEvent=null,!0,!0},this.HandleDoDragStart=function(t){var i=null;return this.FElementEvent=t,t.stopPropagation(),i=null,this.DoStartDrag({get:function(){return i},set:function(t){i=t}}),e.DragObject=null!=i?i:this,!0,!0},this.HandleDoDragOver=function(t){var i;return this.FElementEvent=t,t.stopPropagation(),this.DragOver(e.DragObject,t.clientX,t.clientY,2,{p:this,get:function(){return this.p.FAcceptDrag},set:function(t){this.p.FAcceptDrag=t}}),!this.FAcceptDrag||this.IsInputControl()&&0!==t.dataTransfer.items.length||t.preventDefault(),i=!this.FAcceptDrag,this.FElementEvent=null,i},this.HandleDoDragEnter=function(t){var i;return this.FElementEvent=t,t.stopPropagation(),this.FAcceptDrag=this.IsInputControl(),this.DragOver(e.DragObject,t.clientX,t.clientY,0,{p:this,get:function(){return this.p.FAcceptDrag},set:function(t){this.p.FAcceptDrag=t}}),this.FAcceptDrag&&t.preventDefault(),i=!this.FAcceptDrag,this.FElementEvent=null,i},this.HandledoDragLeave=function(t){return this.FElementEvent=t,t.stopPropagation(),this.DragOver(e.DragObject,t.clientX,t.clientY,1,{p:this,get:function(){return this.p.FAcceptDrag},set:function(t){this.p.FAcceptDrag=t}}),!0,this.FElementEvent=null,!0},this.HandleDoDragEnd=function(t){return this.FElementEvent=t,t.stopPropagation(),this.DoEndDrag(e.DragObject,t.clientX,t.clientY),!0,0===this.FDragMode&&this.DisableDrag(),this.FElementEvent=null,!0},this.HandleDoDragDrop=function(t){var i;return this.FElementEvent=t,t.stopPropagation(),this.FAcceptDrag?(this.IsInputControl()||t.preventDefault(),this.DragDrop(e.DragObject,t.clientX,t.clientY)):t.preventDefault(),i=this.FAcceptDrag,this.FElementEvent=null,i},this.HandleFontChanged=function(t){0===this.FUpdateCount&&(this.SetParentFont(!1),this.ParentFontChanged()),this.FontChanged()},this.ParentFontChanged=function(){for(var t=0,e=0,i=this.GetControlsCount()-1;e<=i;e++)t=e,this.GetControls(t).FParentFont&&(this.GetControls(t).FFont.Assign(this.FFont),this.GetControls(t).FontChanged(),this.GetControls(t).FParentFont=!0,this.GetControls(t).ParentFontChanged())},this.DoExit=function(){null!=this.FOnExit&&this.FOnExit(this)},this.DoEnter=function(){null!=this.FOnEnter&&this.FOnEnter(this)},this.Click=function(){null!=this.FOnClick&&this.IsEnabled()&&this.FOnClick(this)},this.UpdateElement=function(){this.FBlockUpdateElement||this.FUpdateCount>0||null==this.GetElementHandle()||this.GetElementHandle()===this.ContainerElement()||this.IsUpdating()||(this.UpdateElementData(),this.GetIsLinked()||this.UpdateElementVisual())},this.UpdateElementSize=function(){var t=null,e=0,i=0,s=0,n=null,r=null;if(!(this.FBlockUpdateElement||this.FUpdateCount>0||this.GetIsLinked()||null==this.GetElementHandle()||this.GetElementHandle()===this.ContainerElement())){for(t=this.GetElementStyle(),e=0,i=0,n=this.FParent;null!=n&&0===this.FElementPosition&&0!==n.FElementPosition&&!pas["WEBLib.Forms"].TCustomForm.isPrototypeOf(n);){if(n.GetIsLinked()&&null!=n.GetElementHandle()&&"absolute"!==n.GetElementHandle().getAttribute("position")){r=n.GetElementHandle().getBoundingClientRect(),e=Math.round(r.left),i=Math.round(r.top);break}n=n.FParent}null!=this.FParent&&this.FParent.IsStructuralElement()&&(e=this.FParent.GetLeft(),i=this.FParent.GetTop()),0===this.FElementPosition?(-1!==this.FTop?t.setProperty("top",pas.SysUtils.IntToStr(this.FTop+i)+"px"):t.setProperty("top",""),-1!==this.FLeft?t.setProperty("left",pas.SysUtils.IntToStr(this.FLeft+e)+"px"):t.setProperty("left","")):(t.removeProperty("top"),t.removeProperty("left")),1===this.FWidthStyle&&(s=this.GetOuterWidth(),-1!==this.FWidth?t.setProperty("width",pas.SysUtils.IntToStr(s)+"px"):t.removeProperty("width")),2===this.FWidthStyle&&t.removeProperty("width"),1===this.FHeightStyle&&(-1!==this.FHeight?t.setProperty("height",pas.SysUtils.IntToStr(this.GetOuterHeight())+"px"):t.removeProperty("height")),2===this.FHeightStyle&&t.removeProperty("height"),0===this.FWidthStyle&&(-1!==this.FWidth?t.setProperty("width",pas["WEBLib.Utils"].FormatProp("%.2f%%",pas.System.VarRecs(3,this.FWidthPercent))):t.removeProperty("width")),0===this.FHeightStyle&&(-1!==this.FHeight?t.setProperty("height",pas["WEBLib.Utils"].FormatProp("%.2f%%",pas.System.VarRecs(3,this.FHeightPercent))):t.removeProperty("height")),0===this.FElementPosition?t.setProperty("position","absolute"):1===this.FElementPosition?t.setProperty("position","relative"):t.removeProperty("position"),t.setProperty("box-sizing","border-box")}},this.UpdateElementVisual=function(){var e,i,s=null;if(null!=(e=this.GetElementHandle())&&!this.IsUpdating()){s=this.GetElementStyle(),this.FParentFont&&null!=this.FParent&&(this.FFont.FOnChange=null,this.FFont.Assign(this.FParent.FFont),this.FFont.FOnChange=rtl.createCallback(this,"HandleFontChanged")),""===this.FElementClassName&&(this.FClipChildren&&pas.SysUtils.LowerCase(e.tagName)!==pas["WEBLib.WebTools"].cBodyTag?s.setProperty("overflow","hidden"):s.setProperty("overflow",""),this.SetElementPointer(e,this.FCursor)),this.Captured()&&this.FLayer.style.setProperty("cursor",s.getPropertyValue("cursor")),""!==this.FElementClassName||this.CanShowFocus()?s.setProperty("outline",""):s.setProperty("outline","none"),this.UpdateElementSize();var n=this.FTextDirection;0===n?s.removeProperty("direction"):2===n?s.setProperty("direction","rtl"):1===n?s.setProperty("direction","ltr"):3===n&&s.setProperty("direction","inherit"),""===this.FElementClassName&&this.FNoUserSelect&&(s.setProperty("webkit-user-select","none"),s.setProperty("moz-user-select","none"),s.setProperty("khtml-user-select","none"),s.setProperty("ms-user-select","none"),s.setProperty("user-select","none"),s.setProperty("-webkit-tap-highlight-color","transparent")),this.SetElementColor(e,this.FColor),i=!(""===this.FElementClassName&&0===this.FElementFont&&!this.GetIsLinked()),t.SetHTMLElementFont(e,this.FFont,i),i?s.removeProperty("color"):this.IsEnabled()&&s.setProperty("color",pas["WEBLib.Graphics"].ColorToHTML(this.FFont.FColor))}},this.UpdateElementData=function(){var t=null,e=null,i="",s="",n="",r=0,o=0;if(null!=this.GetElementHandle()){if(4 in this.FComponentState||(this.FVisible?this.GetElementStyle().setProperty("display",""):this.GetElementStyle().setProperty("display","none")),this.EnableTab(),this.IsEnabled()?this.FContainer.removeAttribute("disabled"):this.FContainer.setAttribute("disabled",""),this.GetIsLinked()&&""===this.FHint)return;if(""!==this.GetRole()&&this.FContainer.setAttribute("role",this.FRole),null!=(t=pas["WEBLib.Forms"].GetParentForm(this))&&1===t.FCSSLibrary&&this.FShowHint&&""!==this.FHint){e=this.GetElementHandle(),i=this.FHint;var a=pas["WEBLib.Forms"].Application.FHintPosition;0===a?n="left":2===a?n="right":1===a?n="top":3===a&&(n="bottom"),s=pas["WEBLib.Forms"].Application.FHintClassName,r=pas["WEBLib.Forms"].Application.FHintPause,o=pas["WEBLib.Forms"].Application.FHintHidePause,this.FTooltip=new bootstrap.Tooltip(e,{title:i,placement:n,customClass:s,delay:{show:r,hide:o}})}else this.FShowHint&&""!==this.FHint?this.FContainer.setAttribute("title",this.FHint):this.FContainer.removeAttribute("title");this.IsEnabled()?1!==this.FElementFont&&this.GetElementStyle().setProperty("color",pas["WEBLib.Graphics"].ColorToHTML(this.FFont.FColor)):this.GetElementStyle().removeProperty("color")}},this.UpdateParent=function(){this.InternalUpdateParent(),this.UpdateChildren(this.FPrevParent),this.UpdateChildren(this.FParent)},this.UpdateControlSize=function(t,e){this.FWidth=t,this.FHeight=e},this.InternalUpdateParent=function(){var t=null;t=this.FPrevParent,this.FNew&&(this.CreateControl(),null!=this.GetContainer()&&(null!=this.FParent&&null==this.FParent.GetContainer()&&this.FParent.CreateControl(),this.FParent!==t&&null!=t&&null!=t.GetContainer()&&this.GetContainer().parentNode===t.GetChildContainer()&&t.GetChildContainer().removeChild(this.GetContainer()),null!=this.FParent&&null!=this.FParent.GetContainer()&&this.FParent.GetChildContainer().appendChild(this.GetContainer())))},this.UpdateChildren=function(e){var i=0,s=null;if(null!=e&&!(3 in this.FComponentState)){0!==e.FAlign&&e.DoRealign(),t.TCustomControl.isPrototypeOf(e)&&(rtl.as(e,t.TCustomControl).RecreateCanvas(),rtl.as(e,t.TCustomControl).Invalidate());for(var n=0,r=e.GetControlsCount()-1;n<=r;n++)i=n,s=e.GetControls(i),this.UpdateChildren(s)}},this.DisableTab=function(){var t=0;this.FTabStop&&this.CanFocus()||null!=this.GetContainer()&&this.GetContainer().setAttribute("tabindex","-1");for(var e=0,i=this.GetControlsCount()-1;e<=i;e++)t=e,this.GetControls(t).DisableTab()},this.EnableTab=function(){var t=0;null==this.FContainer||this.GetIsLinked()||(this.FTabStop&&this.CanFocus()?this.FContainer.setAttribute("tabindex",pas.SysUtils.IntToStr(this.FTabOrder+1)):this.FContainer.setAttribute("tabindex","-1"));for(var e=0,i=this.GetControlsCount()-1;e<=i;e++)t=e,this.GetControls(t).EnableTab()},this.SetElementClassName=function(t){this.FElementClassName!==t&&(this.FElementClassName=t,null!=this.FContainer&&this.FContainer.setAttribute("class",t),this.UpdateElement())},this.SetColor=function(t){this.FColor=t,this.UpdateElementVisual(),this.ColorChanging()},this.SetFont=function(t){this.FFont.SetName(t.FName),this.FFont.SetSize(t.FSize),this.FFont.SetStyle(rtl.refSet(t.FStyle)),this.FFont.SetColor(t.FColor)},this.SetParent=function(t){var e;null!=t&&(t=t.CanAcceptChild(this)),e=this.FNew,this.FParent!==t&&(null!=this.FParent&&this.FParent.UnRegisterParent(this),this.FPrevParent=this.FParent,this.FParent=t,this.FGotFocus=!1,this.UpdateParent(),3 in this.FComponentState||(e||this.UpdateElement(),this.InitScript()),null!=this.FParent&&this.FParent.RegisterParent(this),0 in this.FComponentState&&null!=this.FParent&&!(0 in this.FParent.FComponentState)&&this.Loaded(),null==t||null==this.FParent||this.FParent.IsUpdating()||this.Realign(),this.Invalidate())},this.RegisterParent=function(t){this.FControls=rtl.arraySetLength(this.FControls,null,rtl.length(this.FControls)+1),this.FControls[rtl.length(this.FControls)-1]=t},this.UnRegisterParent=function(t){var e=0,i=!1;i=!1;for(var s=0,n=rtl.length(this.FControls)-1;s<=n;s++)e=s,this.FControls[e]===t&&(i=!0),i&&e<rtl.length(this.FControls)-1&&(this.FControls[e]=this.FControls[e+1]);i&&(this.FControls=rtl.arraySetLength(this.FControls,null,rtl.length(this.FControls)-1))},this.CanAcceptChild=function(t){return this,this},this.SetLeft=function(t){this.FLeft!==t&&(this.FLeft=t,this.ResetAnchoring(),this.FUpdateTopLeft||(this.FOrigLeft=t),this.UpdateElementSize(),this.RecreateCanvas(),this.InternalResize(),0 in this.FComponentState||0===this.FAlign||null==this.FParent||this.DoRealign())},this.SetTop=function(t){this.FTop!==t&&(this.FTop=t,this.ResetAnchoring(),this.FUpdateTopLeft||(this.FOrigTop=t),this.UpdateElementSize(),this.RecreateCanvas(),this.InternalResize(),0 in this.FComponentState||0===this.FAlign||null==this.FParent||this.DoRealign())},this.MouseUp=function(t,e,i,s){this.FEnabled&&null!=this.FOnMouseUp&&this.FOnMouseUp(this,t,rtl.refSet(e),i,s)},this.MouseDown=function(t,e,i,s){this.FEnabled&&null!=this.FOnMouseDown&&this.FOnMouseDown(this,t,rtl.refSet(e),i,s)},this.MouseMove=function(t,e,i){this.FEnabled&&null!=this.FOnMouseMove&&this.FOnMouseMove(this,rtl.refSet(t),e,i)},this.TouchStart=function(t,e){null!=this.FOnTouchStart&&this.FOnTouchStart(this,t,e)},this.TouchMove=function(t,e){null!=this.FOnTouchMove&&this.FOnTouchMove(this,t,e)},this.TouchEnd=function(t,e){null!=this.FOnTouchEnd&&this.FOnTouchEnd(this,t,e)},this.TouchCancel=function(t,e){null!=this.FOnTouchCancel&&this.FOnTouchCancel(this,t,e)},this.DoMouseEnter=function(){null!=this.FOnMouseEnter&&this.FOnMouseEnter(this)},this.DoMouseLeave=function(){null!=this.FOnMouseLeave&&this.FOnMouseLeave(this)},this.MouseWheel=function(t,e,i){var s=!1;for(null!=this.FOnMouseWheel&&this.FOnMouseWheel(this,rtl.refSet(t),e,pas.Types.TPoint.$clone(pas.Types.Point(0,0)),i),this.FWheelAccumulator+=e;Math.abs(this.FWheelAccumulator)>=120;)s=this.FWheelAccumulator<0,this.FWheelAccumulator=Math.abs(this.FWheelAccumulator)-120,s?(0!==this.FWheelAccumulator&&(this.FWheelAccumulator=-this.FWheelAccumulator),this.DoMouseWheelDown(rtl.refSet(t),pas.Types.TPoint.$clone(this.FWheelMousePos))):this.DoMouseWheelUp(rtl.refSet(t),pas.Types.TPoint.$clone(this.FWheelMousePos))},this.DoMouseWheelDown=function(t,e){var i=!1;return i=!1,null!=this.FOnMouseWheelDown&&this.FOnMouseWheelDown(this,rtl.refSet(t),pas.Types.TPoint.$clone(e),{get:function(){return i},set:function(t){i=t}}),i},this.DoMouseWheelUp=function(t,e){var i=!1;return i=!1,null!=this.FOnMouseWheelUp&&this.FOnMouseWheelUp(this,rtl.refSet(t),pas.Types.TPoint.$clone(e),{get:function(){return i},set:function(t){i=t}}),i},this.DblClick=function(){null!=this.FOnDblClick&&this.FOnDblClick(this)},this.KeyDown=function(t,e){null!=this.FOnKeyDown&&this.FOnKeyDown(this,t,rtl.refSet(e))},this.KeyPress=function(t){null!=this.FOnKeyPress&&this.FOnKeyPress(this,t)},this.KeyUp=function(t,e){null!=this.FOnKeyUp&&this.FOnKeyUp(this,t,rtl.refSet(e))},this.SetFocus=function(){var t=null;this.CanFocus()&&null!=this.GetElementHandle()&&(t=this.GetElementHandle(),this.FGotFocus?t.focus():setTimeout((function(){t.focus()}),1))},this.DoMarginsChanged=function(t){this.DoRealign()},this.DoRealign=function(){null==this.FParent||this.FParent.IsUpdating()||this.FParent.AlignControl(this.FParent)},this.DoBoundsChange=function(){var t,e=!1;this.UpdateElementSize(),this.RecreateCanvas(),this.FIsResizing||(this.FIsResizing=!0,this.InternalResize(),this.DoRealign(),e=!1,null!=(t=pas["WEBLib.Forms"].GetParentForm(this))&&(e=(e=t.FIsResizing$1)||t.FUpdateCount>0),(e=(e=e||this.FUpdateCount>0)||this.FIsAligning)||this.UpdateChildAnchoring(),this.FIsResizing=!1)},this.DoEndDrag=function(t,e,i){null!=this.FonEndDrag&&this.FonEndDrag(this,t,e,i)},this.DoStartDrag=function(t){null!=this.FOnStartDrag&&this.FOnStartDrag(this,t)},this.DragOver=function(t,e,i,s,n){null!=this.FOnDragOver&&this.FOnDragOver(this,t,e,i,s,n)},this.IsFocused=function(){return this.FContainer===document.activeElement},this.GetID=function(){return this.FID},this.GetElementHandle=function(){var t=null;return t=null,null!=this.FContainer&&this.FControlCreated&&(t=this.FContainer),t},this.GetElementBindHandle=function(){return this.GetElementHandle()},this.GetElement=function(){return document.getElementById(this.GetID())},this.GetKeyCode=function(t,e){var i=0;i=-1;var s=t;return"Up"===s?i=38:"Down"===s?i=40:"Left"===s?i=37:"Right"===s?i=39:"!"===s?i=56:'"'===s||"#"===s?i=51:"$"===s?i=186:"%"===s?i=192:"'"===s?i=52:"("===s?i=53:")"===s?i=219:"*"===s?i=106:"+"===s?i=107:"-"===s?i=109:","===s?i=44:"."===s?i=46:"/"===s?i=111:"\\"===s?i=226:"="===s?i=187:"<"===s||">"===s?i=226:s===pas.Web.TJSKeyNames.BackSpace?i=8:s===pas.Web.TJSKeyNames.Tab?i=9:s===pas.Web.TJSKeyNames.Enter?i=13:s===pas.Web.TJSKeyNames.Shift?i=16:s===pas.Web.TJSKeyNames.Control?i=17:s===pas.Web.TJSKeyNames.Alt?i=18:s===pas.Web.TJSKeyNames.Pause?i=19:s===pas.Web.TJSKeyNames.CapsLock?i=20:s===pas.Web.TJSKeyNames.Escape?i=27:s===pas.Web.TJSKeyNames.PageUp?i=33:s===pas.Web.TJSKeyNames.PageDown?i=34:s===pas.Web.TJSKeyNames._End?i=35:s===pas.Web.TJSKeyNames.Home?i=36:s===pas.Web.TJSKeyNames.ArrowLeft?i=37:s===pas.Web.TJSKeyNames.ArrowUp?i=38:s===pas.Web.TJSKeyNames.ArrowRight?i=39:s===pas.Web.TJSKeyNames.ArrowDown?i=40:s===pas.Web.TJSKeyNames.Insert?i=45:s===pas.Web.TJSKeyNames.Delete?i=46:s===pas.Web.TJSKeyNames.F1?i=112:s===pas.Web.TJSKeyNames.F2?i=113:s===pas.Web.TJSKeyNames.F3?i=114:s===pas.Web.TJSKeyNames.F4?i=115:s===pas.Web.TJSKeyNames.F5?i=116:s===pas.Web.TJSKeyNames.F6?i=117:s===pas.Web.TJSKeyNames.F7?i=118:s===pas.Web.TJSKeyNames.F8?i=119:s===pas.Web.TJSKeyNames.F9?i=120:s===pas.Web.TJSKeyNames.F10?i=121:s===pas.Web.TJSKeyNames.F11?i=122:s===pas.Web.TJSKeyNames.F12?i=123:s===pas.Web.TJSKeyNames.F13?i=124:s===pas.Web.TJSKeyNames.F14?i=125:s===pas.Web.TJSKeyNames.F15?i=126:s===pas.Web.TJSKeyNames.F16?i=127:s===pas.Web.TJSKeyNames.F17?i=128:s===pas.Web.TJSKeyNames.F18?i=129:s===pas.Web.TJSKeyNames.F19?i=130:s===pas.Web.TJSKeyNames.F20?i=131:pas.System.Assigned(t)&&t.length>0&&(i=t.charCodeAt(0),e&&i>=97&&i<=122?i&=223:i>=65&&i<=90?i|=64:i>122&&(i|=128)),i},this.GetKeyChar=function(t){var e="",i=0;i=-1,e="\0";var s=t;return s===pas.Web.TJSKeyNames.BackSpace?i=8:s===pas.Web.TJSKeyNames.Tab?i=9:s===pas.Web.TJSKeyNames.Enter?i=13:s===pas.Web.TJSKeyNames.Shift?i=16:s===pas.Web.TJSKeyNames.Control?i=17:s===pas.Web.TJSKeyNames.Alt?i=18:s===pas.Web.TJSKeyNames.Pause?i=19:s===pas.Web.TJSKeyNames.CapsLock?i=20:s===pas.Web.TJSKeyNames.Escape?i=27:s===pas.Web.TJSKeyNames.PageUp?i=33:s===pas.Web.TJSKeyNames.PageDown?i=34:s===pas.Web.TJSKeyNames._End?i=35:s===pas.Web.TJSKeyNames.Home?i=36:s===pas.Web.TJSKeyNames.ArrowLeft?i=37:s===pas.Web.TJSKeyNames.ArrowUp?i=38:s===pas.Web.TJSKeyNames.ArrowRight?i=39:s===pas.Web.TJSKeyNames.ArrowDown?i=40:s===pas.Web.TJSKeyNames.Insert?i=45:s===pas.Web.TJSKeyNames.Delete?i=46:s===pas.Web.TJSKeyNames.F1?i=112:s===pas.Web.TJSKeyNames.F2?i=113:s===pas.Web.TJSKeyNames.F3?i=114:s===pas.Web.TJSKeyNames.F4?i=115:s===pas.Web.TJSKeyNames.F5?i=116:s===pas.Web.TJSKeyNames.F6?i=117:s===pas.Web.TJSKeyNames.F7?i=118:s===pas.Web.TJSKeyNames.F8?i=119:s===pas.Web.TJSKeyNames.F9?i=120:s===pas.Web.TJSKeyNames.F10?i=121:s===pas.Web.TJSKeyNames.F11?i=122:s===pas.Web.TJSKeyNames.F12?i=123:s===pas.Web.TJSKeyNames.F13?i=124:s===pas.Web.TJSKeyNames.F14?i=125:s===pas.Web.TJSKeyNames.F15?i=126:s===pas.Web.TJSKeyNames.F16?i=127:s===pas.Web.TJSKeyNames.F17?i=128:s===pas.Web.TJSKeyNames.F18?i=129:s===pas.Web.TJSKeyNames.F19?i=130:s===pas.Web.TJSKeyNames.F20?i=131:e=t.charAt(0),-1!==i&&(e=String.fromCharCode(i)),e},this.IsKeyCharacter=function(t){var e=t;return"Up"!==e&&"Down"!==e&&"Left"!==e&&"Right"!==e&&e!==pas.Web.TJSKeyNames.Shift&&e!==pas.Web.TJSKeyNames.Control&&e!==pas.Web.TJSKeyNames.Alt&&e!==pas.Web.TJSKeyNames.Pause&&e!==pas.Web.TJSKeyNames.CapsLock&&e!==pas.Web.TJSKeyNames.PageUp&&e!==pas.Web.TJSKeyNames.PageDown&&e!==pas.Web.TJSKeyNames._End&&e!==pas.Web.TJSKeyNames.Home&&e!==pas.Web.TJSKeyNames.ArrowLeft&&e!==pas.Web.TJSKeyNames.ArrowUp&&e!==pas.Web.TJSKeyNames.ArrowRight&&e!==pas.Web.TJSKeyNames.ArrowDown&&e!==pas.Web.TJSKeyNames.Insert&&e!==pas.Web.TJSKeyNames.Delete&&e!==pas.Web.TJSKeyNames.F1&&e!==pas.Web.TJSKeyNames.F2&&e!==pas.Web.TJSKeyNames.F3&&e!==pas.Web.TJSKeyNames.F4&&e!==pas.Web.TJSKeyNames.F5&&e!==pas.Web.TJSKeyNames.F6&&e!==pas.Web.TJSKeyNames.F7&&e!==pas.Web.TJSKeyNames.F8&&e!==pas.Web.TJSKeyNames.F9&&e!==pas.Web.TJSKeyNames.F10&&e!==pas.Web.TJSKeyNames.F11&&e!==pas.Web.TJSKeyNames.F12&&e!==pas.Web.TJSKeyNames.F13&&e!==pas.Web.TJSKeyNames.F14&&e!==pas.Web.TJSKeyNames.F15&&e!==pas.Web.TJSKeyNames.F16&&e!==pas.Web.TJSKeyNames.F17&&e!==pas.Web.TJSKeyNames.F18&&e!==pas.Web.TJSKeyNames.F19&&e!==pas.Web.TJSKeyNames.F20},this.GetClientRect=function(){var t=pas.Types.TRect.$new(),e="",i=0,s=0;return e=pas.SysUtils.UpperCase(this.GetStyle("border-width")),s=0,(i=pas.System.Pos("PX",e))>0&&(pas.System.Delete({get:function(){return e},set:function(t){e=t}},i,2),pas.System.val$6(e,{get:function(){return s},set:function(t){s=t}},{get:function(){return i},set:function(t){i=t}})),t.$assign(pas.Types.Rect(0,0,this.GetWidth()-2*s,this.GetHeight()-2*s)),t},this.CreateControl=function(){null==this.FElement&&(this.FElement=this.CreateElement(),null!=this.FElement&&(this.FControlCreated=!0,this.FContainer=this.FElement,"body"!==this.GetID()&&this.GetContainer().setAttribute("id",this.GetID()),this.GetContainer().setAttribute("zindex","0"),""!==this.FElementClassName&&this.GetContainer().setAttribute("class",this.FElementClassName),this.CreateChildElements(this.FElement),this.BindEvents(),this.UpdateElement()))},this.ClearMethodPointers=function(){this.FWheelPtr=null,this.FClickPtr=null,this.FDblClickPtr=null,this.FMouseDownPtr=null,this.FMouseUpPtr=null,this.FMouseMovePtr=null,this.FMouseLeavePtr=null,this.FMouseEnterPtr=null,this.FKeyDownPtr=null,this.FKeyUpPtr=null,this.FKeyPressPtr=null,this.FInputPtr=null,this.FEnterPtr=null,this.FExitPtr=null,this.FTouchStartPtr=null,this.FTouchEndPtr=null,this.FTouchMovePtr=null,this.FTouchCancelPtr=null,this.FLayerMouseLeavePtr=null,this.FLayerMouseEnterPtr=null,this.FScriptLoadedPtr=null,this.FContextMenuPtr=null},this.GetMethodPointers=function(){null===this.FWheelPtr&&(this.FWheelPtr=rtl.createCallback(this,"HandleDoWheel"),this.FClickPtr=rtl.createCallback(this,"HandleDoClick"),this.FDblClickPtr=rtl.createCallback(this,"HandleDoDblClick"),this.FMouseDownPtr=rtl.createCallback(this,"HandleDoMouseDown"),this.FMouseUpPtr=rtl.createCallback(this,"HandleDoMouseUp"),this.FMouseMovePtr=rtl.createCallback(this,"HandleDoMouseMove"),this.FMouseLeavePtr=rtl.createCallback(this,"HandleDoMouseLeave"),this.FMouseEnterPtr=rtl.createCallback(this,"HandleDoMouseEnter"),this.FKeyDownPtr=rtl.createCallback(this,"HandleDoKeyDown"),this.FKeyUpPtr=rtl.createCallback(this,"HandleDoKeyUp"),this.FKeyPressPtr=rtl.createCallback(this,"HandleDoKeyPress"),this.FInputPtr=rtl.createCallback(this,"HandleDoInput"),this.FEnterPtr=rtl.createCallback(this,"HandleDoEnter"),this.FExitPtr=rtl.createCallback(this,"HandleDoExit"),this.FTouchStartPtr=rtl.createCallback(this,"HandleDoTouchStart"),this.FTouchEndPtr=rtl.createCallback(this,"HandleDoTouchEnd"),this.FTouchMovePtr=rtl.createCallback(this,"HandleDoTouchMove"),this.FTouchCancelPtr=rtl.createCallback(this,"HandleDoTouchCancel"),this.FLayerMouseLeavePtr=rtl.createCallback(this,"LayerHandleDoMouseLeave"),this.FLayerMouseEnterPtr=rtl.createCallback(this,"LayerHandleDoMouseEnter"),this.FScriptLoadedPtr=rtl.createCallback(this,"RequiredScriptLoaded"),this.FDragStartPtr=rtl.createCallback(this,"HandleDoDragStart"),this.FDragOverPtr=rtl.createCallback(this,"HandleDoDragOver"),this.FDragEnterPtr=rtl.createCallback(this,"HandleDoDragEnter"),this.FDragLeavePtr=rtl.createCallback(this,"HandledoDragLeave"),this.FDragEndPtr=rtl.createCallback(this,"HandleDoDragEnd"),this.FDragDropPtr=rtl.createCallback(this,"HandleDoDragDrop"),this.FContextMenuPtr=rtl.createCallback(this,"HandleDoContextMenu"))},this.EventsBound=function(){return this.FEventsBound},this.BindEvents=function(){var t=null;null!=this.GetElementBindHandle()&&(this.GetMethodPointers(),this.FEventsBound=!0,(t=this.GetElementBindHandle()).addEventListener("wheel",this.FWheelPtr),t.addEventListener("click",this.FClickPtr),t.addEventListener("dblclick",this.FDblClickPtr),t.addEventListener("mousedown",this.FMouseDownPtr),t.addEventListener("mouseup",this.FMouseUpPtr),t.addEventListener("mousemove",this.FMouseMovePtr),t.addEventListener("mouseleave",this.FMouseLeavePtr),t.addEventListener("mouseenter",this.FMouseEnterPtr),t.addEventListener("keydown",this.FKeyDownPtr),t.addEventListener("keyup",this.FKeyUpPtr),t.addEventListener("keypress",this.FKeyPressPtr),t.addEventListener("input",this.FInputPtr),t.addEventListener("focus",this.FEnterPtr),t.addEventListener("blur",this.FExitPtr),t.addEventListener("touchstart",this.FTouchStartPtr),t.addEventListener("touchmove",this.FTouchMovePtr),t.addEventListener("touchend",this.FTouchEndPtr),t.addEventListener("touchcancel",this.FTouchCancelPtr),t.addEventListener("contextmenu",this.FContextMenuPtr),t.addEventListener("dragstart",this.FDragStartPtr),t.addEventListener("dragover",this.FDragOverPtr),t.addEventListener("dragenter",this.FDragEnterPtr),t.addEventListener("dragleave",this.FDragLeavePtr),t.addEventListener("dragend",this.FDragEndPtr),t.addEventListener("drop",this.FDragDropPtr))},this.UnbindEvents=function(){var t=null;null!=this.GetElementBindHandle()&&((t=this.GetElementBindHandle()).removeEventListener("wheel",this.FWheelPtr),t.removeEventListener("click",this.FClickPtr),t.removeEventListener("dblclick",this.FDblClickPtr),t.removeEventListener("mousedown",this.FMouseDownPtr),t.removeEventListener("mouseup",this.FMouseUpPtr),t.removeEventListener("mousemove",this.FMouseMovePtr),t.removeEventListener("mouseleave",this.FMouseLeavePtr),t.removeEventListener("mouseenter",this.FMouseEnterPtr),t.removeEventListener("keydown",this.FKeyDownPtr),t.removeEventListener("keyup",this.FKeyUpPtr),t.removeEventListener("keypress",this.FKeyPressPtr),t.removeEventListener("focus",this.FEnterPtr),t.removeEventListener("blur",this.FExitPtr),t.removeEventListener("input",this.FInputPtr),t.removeEventListener("touchstart",this.FTouchStartPtr),t.removeEventListener("touchmove",this.FTouchMovePtr),t.removeEventListener("touchend",this.FTouchEndPtr),t.removeEventListener("touchcancel",this.FTouchEndPtr),t.removeEventListener("contextmenu",this.FContextMenuPtr))},this.AlignControls=function(t,e){var i=this,s=0;function n(t,s){var n=0,r=0,o=0,a=0;t.AnchoringInitialized()||i.InitAnchoring(),t.FUpdateTopLeft=!0,t.FAlignWithMargins?(n=t.FMargins.FLeft,r=t.FMargins.FTop,a=t.FMargins.FBottom,o=t.FMargins.FRight):(n=0,r=0,a=0,o=0);var l=s;1===l?(t.SetBoundsInt(e.Left+n,e.Top+r,e.Right-e.Left-n-o,t.GetHeight()),e.Top=e.Top+t.GetHeight()+r+a):2===l?(t.SetBoundsInt(e.Left+n,e.Bottom-t.GetHeight()-a-1,e.Right-e.Left-n-o-1,t.GetHeight()),e.Bottom=e.Bottom-t.GetHeight()-r-a):3===l?(t.SetBoundsInt(e.Left+n,e.Top+r,t.GetWidth(),e.Bottom-e.Top-r-a),e.Left=e.Left+t.GetWidth()+n+o):4===l?(t.SetBoundsInt(e.Right-t.GetWidth()-o,e.Top+r,t.GetWidth(),e.Bottom-e.Top-a-r),e.Right=e.Right-t.GetWidth()-o-n):5===l&&t.SetBoundsInt(e.Left+n,e.Top+r,e.Right-e.Left-n-o,e.Bottom-e.Top-a-r),t.FUpdateTopLeft=!1}function r(t){var e=0,s=0,r=0,o=null;o=pas.Classes.TList.$create("Create$1");for(var a=0,l=i.GetControlsCount()-1;a<=l;a++)if(e=a,i.GetControls(e).FAlign===t&&(i.GetControls(e).FVisible||4 in i.FComponentState)){r=o.GetCount();for(var h=o.GetCount()-1;h>=0;h--){s=h;var F=t;1===F?i.GetControls(e).FOrigTop<rtl.getObject(o.Get(s)).FOrigTop&&(r=s):3===F?i.GetControls(e).FOrigLeft<rtl.getObject(o.Get(s)).FOrigLeft&&(r=s):4===F?i.GetControls(e).FOrigLeft+i.GetControls(e).GetWidth()>rtl.getObject(o.Get(s)).FOrigLeft+rtl.getObject(o.Get(s)).GetWidth()&&(r=s):2===F&&i.GetControls(e).FOrigTop+i.GetControls(e).GetHeight()>rtl.getObject(o.Get(s)).FOrigTop+rtl.getObject(o.Get(s)).GetHeight()&&(r=s)}o.Insert(r,i.GetControls(e))}for(var p=0,c=o.GetCount()-1;p<=c;p++)e=p,n(rtl.getObject(o.Get(e)),t);o=rtl.freeLoc(o)}r(1),r(2),r(3),r(4),r(5),r(6);for(var o=0,a=this.GetControlsCount()-1;o<=a;o++)s=o,this.GetControls(s).AlignControl(this.GetControls(s))},this.AlignControl=function(t){var e,i=pas.Types.TRect.$new(),s=null,n="",r="",o="",a=null,l=null,h=0,F=0;this.FIsAligning||this.IsUpdating()||0 in this.FComponentState||(null==this.FParent||this.FParent.FVisible)&&(null!=(l=pas["WEBLib.Forms"].GetParentForm(this))&&l.IsUpdating()||(h=0,null!=l&&""!==l.FFormContainer&&pas["WEBLib.Forms"].TCustomForm.isPrototypeOf(t)&&null!=(a=document.getElementById(l.FFormContainer))&&(s=a.getBoundingClientRect(),h=Math.round(s.top+1)),this.FIsAligning=!0,null!=t&&(null!=(e=t.GetElementHandle())&&(n=t.GetElementStyle().getPropertyValue("overflow"),r=t.GetElementStyle().getPropertyValue("overflow-x"),o=t.GetElementStyle().getPropertyValue("overflow-y"),this.FClipChildren&&pas.SysUtils.LowerCase(e.tagName)!==pas["WEBLib.WebTools"].cBodyTag?t.GetElementStyle().setProperty("overflow","hidden"):t.GetElementStyle().setProperty("overflow","")),i.$assign(this.GetClientRect()),this.GetIsLinked()&&(s=this.GetElementHandle().getBoundingClientRect(),i.$assign(pas.Types.Rect(0,0,Math.round(s.right-s.left),Math.round(s.bottom-s.top)))),i.Bottom+h>pas["WEBLib.Forms"].WinHeight()&&1!==this.FHeightStyle&&0!==this.FElementPosition&&!this.GetIsLinked()&&null==pas["WEBLib.Forms"].VSIDE&&(null!=this.FParent&&pas["WEBLib.Forms"].TCustomForm.isPrototypeOf(this.FParent)||pas["WEBLib.Forms"].TCustomForm.isPrototypeOf(this))&&(i.Bottom=pas["WEBLib.Forms"].WinHeight()-h),null!=e&&"BODY"===e.tagName&&(F=0,document.body.scrollHeight>document.body.clientHeight&&!(4 in this.FComponentState)&&(F=16),""!==l.FFormContainer?(i.Bottom=Math.round(Math.min(i.Bottom,pas["WEBLib.Forms"].WinHeight())),i.Right=Math.round(Math.min(i.Right-F,pas["WEBLib.Forms"].WinWidth()))):(i.Bottom=l.GetHeight(),i.Right=l.GetWidth())),pas["WEBLib.Forms"].TCustomForm.isPrototypeOf(t)&&null==pas["WEBLib.Forms"].VSIDE&&(i.Bottom>pas["WEBLib.Forms"].WinHeight()&&(i.Bottom=pas["WEBLib.Forms"].WinHeight()),i.Right>pas["WEBLib.Forms"].WinWidth()&&(i.Right=pas["WEBLib.Forms"].WinWidth())),t.IsStructuralElement()&&i.$assign(this.FParent.GetClientRect()),this.AlignControls(t,i),null!=e&&(t.GetElementStyle().setProperty("overflow",n),t.GetElementStyle().setProperty("overflow-x",r),t.GetElementStyle().setProperty("overflow-y",o)),this.FIsAligning=!1)))},this.InitAnchoring=function(){var t=0,e=0,i=0;function s(e,i,s){var n;i.set(0),s.set(0),null!=(n=pas.TypInfo.GetPropInfo(e.$class.ClassInfo(),"BorderStyle"))&&((t=pas.TypInfo.GetOrdProp$1(e,n))in rtl.createSet(1,4,5)&&(i.set(4),s.set(4)),t in rtl.createSet(2,3)&&(i.set(16),s.set(16)))}if(!this.AnchoringInitialized()){e=0,i=0,pas["WEBLib.Forms"].TForm.isPrototypeOf(this)?(rtl.as(this,pas["WEBLib.Forms"].TForm).IsMiletus()&&s(this,{get:function(){return e},set:function(t){e=t}},{get:function(){return i},set:function(t){i=t}}),this.FOrigRect.$assign(pas.Types.Rect(0,0,this.GetDesignWidth()-e,this.GetDesignHeight()-i))):this.FOrigRect.$assign(pas.Types.Rect(this.GetDesignLeft(),this.GetDesignTop(),this.GetDesignLeft()+this.GetDesignWidth(),this.GetDesignTop()+this.GetDesignHeight())),null!=this.FParent&&(pas["WEBLib.Forms"].TForm.isPrototypeOf(this.FParent)?(rtl.as(this.FParent,pas["WEBLib.Forms"].TForm).IsMiletus()&&s(this.FParent,{get:function(){return e},set:function(t){e=t}},{get:function(){return i},set:function(t){i=t}}),this.FOrigParentRect.$assign(pas.Types.Rect(0,0,this.FParent.GetDesignWidth()-e,this.FParent.GetDesignHeight()-i))):(this.FParent.AnchoringInitialized()||this.FParent.InitAnchoring(),this.FOrigParentRect.$assign(pas.Types.Rect(this.FParent.GetDesignLeft(),this.FParent.GetDesignTop(),this.FParent.GetDesignLeft()+this.FParent.GetDesignWidth(),this.FParent.GetDesignTop()+this.FParent.GetDesignHeight()))));for(var n=0,r=this.GetControlsCount()-1;n<=r;n++)t=n,this.GetControls(t).InitAnchoring()}},this.AnchoringInitialized=function(){return-1!==this.FOrigRect.Left||-1!==this.FOrigRect.Top},this.InitScript=function(){},this.Realign=function(){this.AlignControl(this)},this.Loaded=function(){var t=0;if(0 in this.FComponentState){pas.Classes.TComponent.Loaded.call(this);for(var e=0,i=this.GetControlsCount()-1;e<=i;e++)t=e,this.GetControls(t).FElementPosition in rtl.createSet(1,2)&&!this.GetControls(t).GetIsLinked()&&this.GetControls(t).FChildOrder>=0&&this.GetControls(t).FChildOrder<this.GetChildContainer().childNodes.length&&this.GetChildContainer().insertBefore(this.GetControls(t).GetContainer(),this.GetChildContainer().childNodes.item(this.GetControls(t).FChildOrder)),this.GetControls(t).Loaded();for(var s=0,n=this.GetComponentCount()-1;s<=n;s++)t=s,0 in this.GetComponent(t).FComponentState&&this.GetComponent(t).Loaded();5===this.FAlign&&null!=this.FParent&&this.SetBoundsInt(0,0,this.FParent.FWidth,this.FParent.FHeight),this.Resize(),this.UpdateElement()}},this.InternalResize=function(){0 in this.FComponentState||this.Resize()},this.FontChanged=function(){this.UpdateElementVisual()},this.ClearChildElements=function(){var t=null;if(null!=this.GetElementHandle())for(;this.GetElementHandle().childElementCount>0;)t=this.GetElementHandle().firstChild,this.GetElementHandle().removeChild(t)},this.SetElementColor=function(e,i){var s;s=!(pas["WEBLib.Forms"].Application.FThemed||""!==this.FElementClassName),this.GetIsLinked()||t.SetHTMLElementColor(e,i,!s)},this.MoveElements=function(t,e){if(t&&e)for(;t.childNodes.length;)e.appendChild(t.firstChild)},this.MoveElementsAndFree=function(t,e){if(t&&e){for(;t.childNodes.length;)e.appendChild(t.firstChild);t.remove()}},this.CreateWithID=function(e){var i;this.ClearMethodPointers(),this.FUpdateCount=0,this.FControlCreated=!1,this.FLinkTouchEvents=!0,this.FIsResizing=!1,(null!=this.FOwner&&0 in this.FOwner.FComponentState||null==this.FOwner)&&(null!=this.FOwner&&4 in this.FOwner.FComponentState||this.Loading()),this.FElementPosition=0,this.FWidthStyle=1,this.FHeightStyle=1,i=document.getElementById(e),this.FNew=!(null!=i),this.FFont=pas["WEBLib.Graphics"].TFont.$create("Create$1"),this.FFont.FOnChange=rtl.createCallback(this,"HandleFontChanged"),this.FNew?this.FContainer=null:(this.FContainer=i,this.FControlCreated=!0,this.FElementPosition=1,this.CreateChildElements(i),this.BindElement(),this.BindEvents()),this.FID=e,this.FEnabled=!0,this.FVisible=!0,this.FLeft=0,this.FTop=0,this.FAlign=0,this.FAlignWithMargins=!1,this.FIsAligning=!1,this.FParentFont=!0,this.FParentBiDiMode=!0,this.FParentColor=!1,this.FAnchors=rtl.createSet(0,1),this.FShowFocus=!1,this.FBorderWidth=0,this.FEnablePropagation=!1,this.FToolTip=null,this.FColor=16711422,this.FMargins=t.TMargins.$create("Create$1"),this.FMargins.FOnChange=rtl.createCallback(this,"DoMarginsChanged"),this.FParent=null,this.FPrevParent=null,0 in this.FControlStyle||this.ClearControls(),this.CreateInitialize()},this.AddInstanceStyle=function(t){var e;e=this.FName+"_style",this.$class.AddInstanceStyle$1(e,t)},this.AddInstanceStyle$1=function(t,e){var i,s,n;i=t,s=e,(n=document.getElementById(i))?n.innerHTML=s:((n=document.createElement("style")).type="text/css",n.id=i,n.innerHTML=s,document.getElementsByTagName("head")[0].appendChild(n))},this.AddControlStyle=function(t){var e,i,s,n;e=this.$classname,i=e,s=t,(n=document.getElementById(i))?n.innerHTML=s:((n=document.createElement("style")).type="text/css",n.id=i,n.innerHTML=s,document.getElementsByTagName("head")[0].appendChild(n))},this.AddControlLink=function(t,e){var i,s,n;i=t,s=e,(n=document.getElementById(i))||((n=document.createElement("link")).id=i,n.setAttribute("rel","stylesheet"),n.setAttribute("type","text/css"),n.setAttribute("href",s),document.getElementsByTagName("head")[0].appendChild(n))},this.ResetAnchoring=function(){this.FOrigRect.$assign(pas.Types.Rect(-1,-1,-1,-1)),this.InitAnchoring()},this.UpdateSize=function(){var t=0;this.UpdateElementSize();for(var e=0,i=this.GetControlsCount()-1;e<=i;e++)t=e,this.GetControls(t).UpdateSize()},this.UpdateAnchoring=function(){var t=0,e=0,i=0,s=0,n=0,r=0,o=pas.Types.TRect.$new(),a=pas.Types.TRect.$new();0 in this.FComponentState||this.FControlCreated&&(-1===this.FOrigRect.Left&&-1===this.FOrigRect.Top&&this.InitAnchoring(),(null==this.FParent||this.FParent.AnchoringInitialized())&&(5!==this.FAlign&&(null==this.FParent||pas["WEBLib.Forms"].TForm.isPrototypeOf(this)||(a.$assign(this.FParent.GetBoundsRect()),t=a.Right-a.Left-(this.FOrigParentRect.Right-this.FOrigParentRect.Left),e=a.Bottom-a.Top-(this.FOrigParentRect.Bottom-this.FOrigParentRect.Top),o.$assign(this.FOrigRect),i=0,s=0,n=0,r=0,2 in this.FAnchors&&(0 in this.FAnchors?n=t:i=t),3 in this.FAnchors&&(1 in this.FAnchors?r=e:s=e),(3 in this.FAnchors||2 in this.FAnchors)&&this.SetBoundsInt(o.Left+i,o.Top+s,o.Right-o.Left+n,o.Bottom-o.Top+r))),this.UpdateChildAnchoring()))},this.UpdateChildAnchoring=function(){for(var t=0,e=0,i=this.GetControlsCount()-1;e<=i;e++)t=e,this.GetControls(t).UpdateAnchoring()},this.SetElementPointer=function(e,i){0!==i?e.style.setProperty("cursor",t.GetHTMLCursorName(i)):e.style.removeProperty("cursor")},this.IsUpdating=function(){return this.FUpdateCount>0},this.CanShowFocus=function(){return this.FShowFocus},this.RequiredScriptLoaded=function(t){rtl.asExt(t.target,HTMLScriptElement).title="tmswebloaded",this.FControlScriptCountLoaded+=1},this.StartCapture=function(){var e=null;this.FCaptureDown&&(this.Captured()&&this.ReleaseCapture(),this.FMouseInsideLayer=!0,this.FLayer=document.createElement("SPAN"),document.body.appendChild(this.FLayer),(e=this.FLayer).addEventListener("mouseenter",this.FLayerMouseEnterPtr),e.addEventListener("mouseleave",this.FLayerMouseLeavePtr),e.addEventListener("mousedown",this.FMouseDownPtr),e.addEventListener("mouseup",this.FMouseUpPtr),e.addEventListener("mousemove",this.FMouseMovePtr),e.addEventListener("touchstart",this.FTouchStartPtr),e.addEventListener("touchmove",this.FTouchMovePtr),e.addEventListener("touchend",this.FTouchEndPtr),e.addEventListener("touchcancel",this.FTouchCancelPtr),e.style.setProperty("top","0"),e.style.setProperty("left","0"),e.style.setProperty("right","0"),e.style.setProperty("bottom","0"),e.style.setProperty("webkit-user-select","none"),e.style.setProperty("moz-user-select","none"),e.style.setProperty("khtml-user-select","none"),e.style.setProperty("ms-user-select","none"),e.style.setProperty("user-select","none"),e.style.setProperty("position","absolute"),e.style.setProperty(t.CSSZIndex,"999999"),this.FCaptured=!0,this.UpdateElement())},this.GetStyle=function(t){var e,i="",s="";return s="",null==(e=this.GetElementHandle())?i:(window.getComputedStyle&&(s=getComputedStyle(e,"")[t]),e.currentStyle&&(s=e.currentStyle[t]),i=s)},this.SetBoundsInt=function(t,e,i,s){(t!==this.GetLeft()||e!==this.GetTop()||i!==this.GetWidth()&&1===this.FWidthStyle||s!==this.GetHeight()&&1===this.FHeightStyle||null!=this.FParent&&this.FParent.GetIsLinked())&&(this.FBlockUpdateElement=!0,this.FLeft=t,this.FTop=e,this.FWidth=i,this.FHeight=s,this.FBlockUpdateElement=!1,this.UpdateElementSize(),0!==this.FAlign?this.DoRealign():this.Realign(),this.RecreateCanvas(),this.DoBoundsChange(),this.Invalidate(),this.UpdateChildAnchoring())},this.EnableDrag=function(){null!=this.GetContainer()&&this.GetContainer().setAttribute("draggable","true")},this.DisableDrag=function(){null!=this.GetContainer()&&"true"===this.GetContainer().getAttribute("draggable")&&this.GetContainer().setAttribute("draggable","false")},this.Create$2=function(t){return this.FGotFocus=!1,this.FTabStop=!0,this.FAllowTouch=!0,this.CreateWithID(t),this},this.Create$1=function(t){var e,i,s=!1;return this.FGotFocus=!1,this.FEventsBound=!1,this.FTabStop=!0,this.FAllowTouch=!0,this.FNoUserSelect=!0,this.ClearMethodPointers(),pas.Classes.TComponent.Create$1.call(this,t),this.FEventStopPropagation=rtl.createSet(0,4,2,3,1,5,6,7),this.FScriptLoaded=!1,this.FElementFont=0,this.FElementPosition=0,this.FParentElement=null,this.FTextDirection=0,s=!1,null!=(i=pas["WEBLib.Forms"].GetParentForm(this))&&(s=4 in i.FComponentState),e=this.GetNewName(),s?this.CreateWithID(""):this.CreateWithID(e),null==t||4 in t.FComponentState||this.SetName(e),this},this.Destroy=function(){this.UnbindEvents(),this.DestroyControls(),null!=this.GetContainer()&&null!=this.FParent&&null!=this.FParent.GetChildContainer()&&(this.FParent.GetChildContainer()===this.GetContainer().parentNode&&this.FParent.GetChildContainer().removeChild(this.GetContainer()),this.FContainer=null,this.SetParent(null),this.FControlCreated=!1),rtl.free(this,"FRequiredScripts"),rtl.free(this,"FMargins"),rtl.free(this,"FFont"),pas.System.Assigned(this.FToolTip)&&(FToolTip.dispose(),this.FToolTip=null),pas.Classes.TComponent.Destroy.call(this)},this.Assign=function(t){},this.DragDrop=function(t,e,i){null!=this.FOnDragDrop&&this.FOnDragDrop(this,t,e,i)},this.Resize=function(){null!=this.FOnResize&&this.FOnResize(this)},this.Capture=function(){this.FCaptureDown=!0,window.setTimeout(rtl.createSafeCallback(this,"StartCapture"),100)},this.ReleaseCapture=function(){var t=null;this.FCaptureDown=!1,this.FCaptured&&null!=this.FLayer&&((t=this.FLayer).removeEventListener("mouseenter",this.FLayerMouseEnterPtr),t.removeEventListener("mouseleave",this.FLayerMouseLeavePtr),t.removeEventListener("mousedown",this.FMouseDownPtr),t.removeEventListener("mouseup",this.FMouseUpPtr),t.removeEventListener("mousemove",this.FMouseMovePtr),t.removeEventListener("touchstart",this.FTouchStartPtr),t.removeEventListener("touchmove",this.FTouchMovePtr),t.removeEventListener("touchend",this.FTouchEndPtr),t.removeEventListener("touchcancel",this.FTouchEndPtr),document.body.removeChild(t),this.FCaptured=!1,this.FLayer=null,this.UpdateElement())},this.PreventDefault=function(){null!=this.GetElementEvent()&&this.GetElementEvent().preventDefault()},this.StopPropagation=function(){null==this.GetElementEvent()||this.FEnablePropagation||this.GetElementEvent().stopPropagation()},this.BeginDrag=function(){this.EnableDrag()},this.BeginUpdate=function(){this.FUpdateCount+=1},this.EndUpdate=function(){this.FUpdateCount>0&&(this.FUpdateCount-=1,0===this.FUpdateCount&&this.UpdateElement())},this.Invalidate=function(){},this.SetParentComponent=function(e){this.FParent!==e&&t.TControl.isPrototypeOf(e)&&this.SetParent(e)},this.SetBounds=function(t,e,i,s){this.SetBoundsInt(t,e,i,s),this.FWidth=i,this.FHeight=s,this.FUpdateTopLeft||(this.FOrigTop=e,this.FOrigLeft=t),this.ResetAnchoring(),0 in this.FComponentState||0===this.FAlign||null==this.FParent||this.DoRealign()},this.XYToClient=function(t,e,i,s){var n=null,r=null,o=null,a=0,l=0,h=!1,F=!1,p=pas.Types.TRect.$new(),c=null,u=0,d=0,S=0,C=0;if(h=!0,F=!1,S=0,C=0,0!==this.FElementPosition)return h=!1,a=t-(r=this.GetElementHandle().getBoundingClientRect()).left,l=e-r.top,i.set(a),void s.set(l);for(S=document.body.scrollLeft+document.documentElement.scrollLeft,C=document.body.scrollTop+document.documentElement.scrollTop,a=t-this.GetLeft(),l=e-this.GetTop(),i.set(a),s.set(l),n=this.FParent,pas["WEBLib.Forms"].TCustomForm.isPrototypeOf(this)&&null==n&&null!=this.GetContainer()&&(r=this.GetContainer().getBoundingClientRect(),i.set(i.get()-r.left),s.set(s.get()-r.top));null!=n;)n.GetIsLinked()?(r=pas["WEBLib.Forms"].TCustomForm.isPrototypeOf(n)?n.GetContainer().getBoundingClientRect():n.GetElementHandle().getBoundingClientRect(),i.set(i.get()-r.left),s.set(s.get()-r.top),S=0,C=0):pas["WEBLib.Forms"].TCustomForm.isPrototypeOf(n)?(""!==rtl.as(n,pas["WEBLib.Forms"].TCustomForm).FFormContainer&&null!=(o=document.getElementById(rtl.as(n,pas["WEBLib.Forms"].TCustomForm).FFormContainer))&&(F=!0,r=o.getBoundingClientRect(),i.set(i.get()-r.left),s.set(s.get()-r.top)),null!=rtl.as(n,pas["WEBLib.Forms"].TCustomForm).GetContainer()&&""===rtl.as(n,pas["WEBLib.Forms"].TCustomForm).FFormContainer&&rtl.as(n,pas["WEBLib.Forms"].TCustomForm).FPopup&&(r=rtl.as(n,pas["WEBLib.Forms"].TCustomForm).GetContainer().getBoundingClientRect(),i.set(i.get()-r.left),s.set(s.get()-r.top),p.$assign(rtl.as(n,pas["WEBLib.Forms"].TCustomForm).GetClientRect()),s.set(s.get()+p.Top),S=0,C=0)):n.FElementPosition in rtl.createSet(1,2)?null!=n.GetElementHandle()&&(r=n.GetElementHandle().getBoundingClientRect(),i.set(a-r.left),s.set(l-r.top),S=0,C=0,h&&(c=window.getComputedStyle(document.documentElement),u=parseInt(c.marginLeft,10),d=parseInt(c.marginTop,10),i.set(i.get()+u),s.set(s.get()+d)),h=!1):0===n.FElementPosition&&h&&(i.set(i.get()-n.GetLeft()),s.set(s.get()-n.GetTop()),a=i.get(),l=s.get()),n=n.FParent;0!==this.FElementPosition||F||(i.set(i.get()+S),s.set(s.get()+C))},this.Captured=function(){return this.FCaptured&&null!=this.FLayer},this.ScreenToClient=function(t){var e=pas.Types.TPoint.$new(),i=pas.Types.TPoint.$new();return i.$assign(this.GetClientOrigin()),e.x=t.x-i.x,e.y=t.y-i.y,e},this.CanFocus=function(){return!0,!0},this.HasHorzScrollBar=function(){var t=!1;return t=!1,null!=this.GetElementHandle()&&(t=this.GetElementHandle().clientWidth<this.GetElementHandle().scrollWidth),t},this.HasVertScrollBar=function(){var t=!1;return t=!1,null!=this.GetElementHandle()&&(t=this.GetElementHandle().clientHeight<this.GetElementHandle().scrollHeight),t},rtl.addIntf(this,pas.System.IUnknown)})),this.TScrollBarKind={0:"sbHorizontal",sbHorizontal:0,1:"sbVertical",sbVertical:1},this.$rtti.$Enum("TScrollBarKind",{minvalue:0,maxvalue:1,ordtype:1,enumtype:this.TScrollBarKind}),rtl.createClass(this,"TWinControl",this.TControl,(function(){rtl.addIntf(this,pas.System.IUnknown);var e=this.$rtti;e.addProperty("Cursor",2,t.$rtti.TCursor,"FCursor","SetControlCursor",{Default:0}),e.addProperty("ElementClassName",2,t.$rtti.TElementClassName,"FElementClassName","SetElementClassName"),e.addProperty("Enabled",2,rtl.boolean,"FEnabled","SetEnabled",{Default:!0}),e.addProperty("Height",3,rtl.longint,"GetHeight","SetHeight"),e.addProperty("Hint",2,rtl.string,"FHint","SetHint"),e.addProperty("Left",3,rtl.longint,"GetLeft","SetLeft"),e.addProperty("ShowHint",2,rtl.boolean,"FShowHint","SetShowHint",{Default:!1}),e.addProperty("Tag",0,rtl.longint,"FTag$1","FTag$1",{Default:0}),e.addProperty("Top",3,rtl.longint,"GetTop","SetTop"),e.addProperty("Visible",2,rtl.boolean,"FVisible","SetVisible",{Default:!0}),e.addProperty("Width",3,rtl.longint,"GetWidth","SetWidth"),e.addProperty("OnMouseDown",0,t.$rtti.TMouseEvent,"FOnMouseDown","FOnMouseDown"),e.addProperty("OnMouseUp",0,t.$rtti.TMouseEvent,"FOnMouseUp","FOnMouseUp"),e.addProperty("OnMouseMove",0,t.$rtti.TMouseMoveEvent,"FOnMouseMove","FOnMouseMove"),e.addProperty("OnMouseEnter",0,t.$rtti.TNotifyEvent,"FOnMouseEnter","FOnMouseEnter"),e.addProperty("OnMouseLeave",0,t.$rtti.TNotifyEvent,"FOnMouseLeave","FOnMouseLeave"),e.addProperty("OnKeyUp",0,t.$rtti.TKeyEvent,"FOnKeyUp","FOnKeyUp"),e.addProperty("OnKeyDown",0,t.$rtti.TKeyEvent,"FOnKeyDown","FOnKeyDown"),e.addProperty("OnKeyPress",0,t.$rtti.TKeyPressEvent,"FOnKeyPress","FOnKeyPress"),e.addProperty("OnEnter",0,t.$rtti.TNotifyEvent,"FOnEnter","FOnEnter"),e.addProperty("OnExit",0,t.$rtti.TNotifyEvent,"FOnExit","FOnExit")})),rtl.createClass(this,"TCustomControl",this.TWinControl,(function(){this.$init=function(){t.TWinControl.$init.call(this),this.FCaption="",this.FPixelRatio=0,this.FPainting=!1,this.FCanvas=null,this.FElementCanvas=null,this.FBorderStyle=0,this.FBorderColor=0,this.FCustomBorder=!1,this.FBevelOuter=0,this.FBevelCut=0,this.FBevelEdges={}},this.$final=function(){this.FCanvas=void 0,this.FElementCanvas=void 0,this.FBevelEdges=void 0,t.TWinControl.$final.call(this)},this.GetCanvas=function(){return null==this.FCanvas&&(this.GetIsLinked()?(null==this.FElementCanvas&&(this.FElementCanvas=document.getElementById(this.GetID())),this.RecreateCanvas()):this.CreateControl()),this.FCanvas},this.RenderDesigning=function(t,e,i,s,n){var r,o=null,a=null,l=null;if(r=null!=(a=(o=e).firstChild)&&"DIV"===a.tagName&&"1"===a.getAttribute("data-design"),4 in i.FComponentState&&s&&""===this.FElementClassName){if(o.style.setProperty("border","1px solid gray"),""===n?o.style.setProperty("background-color","#F0F0F0"):o.style.setProperty("background-color","white"),r)return;o.innerHTML="",""!==n&&((l=document.createElement("DIV")).style.setProperty("background-color","white"),l.style.setProperty("background-repeat","no-repeat"),l.style.setProperty("background-position-y","center"),l.style.setProperty("background-image","url("+n+")"),l.style.setProperty("background-position-x","center"),l.style.setProperty("background-size","128px"),l.style.setProperty("top","50%"),l.style.setProperty("left","50%"),l.style.setProperty("height","70%"),o.appendChild(l)),(a=document.createElement("DIV")).setAttribute("data-design","1"),a.innerHTML=t,a.style.setProperty("position","relative"),a.style.setProperty("top","50%"),a.style.setProperty("left","50%"),a.style.setProperty("display","inline-block"),a.style.setProperty("transform","translateX(-50%)"),this.FCustomBorder=!0,o.appendChild(a)}else if(r){for(;null!=o.firstChild;)o.removeChild(o.firstChild);o.style.removeProperty("border"),o.style.removeProperty("background-color")}},this.GetPixelRatio=function(){var t=document.createElement("canvas").getContext("2d");return(window.devicePixelRatio||1)/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1)},this.RecreateCanvas=function(){var t=0,e=null,i=0,s=0;null!=this.FElementCanvas&&(this.FPainting||(null!=(e=this.GetIsLinked()?this.GetElementHandle():document.getElementById(this.GetID()+"_Canvas"))&&(this.FElementCanvas=e,rtl.free(this,"FCanvas"),this.FCanvas=null),t=this.GetPixelRatio(),i=this.GetHeight()-this.GetCanvasHeightOffset(),s=this.GetWidth()-this.GetCanvasWidthOffset(),1===this.FElementPosition?this.FElementCanvas.style.setProperty("position","relative"):this.FElementCanvas.style.setProperty("position","absolute"),this.FElementCanvas.style.setProperty("height",pas.SysUtils.IntToStr(i)+"px"),this.FElementCanvas.style.setProperty("width",pas.SysUtils.IntToStr(s)+"px"),this.FElementCanvas.height=Math.round(i*t),this.FElementCanvas.width=Math.round(s*t)),null==this.FCanvas&&(this.FCanvas=pas["WEBLib.Graphics"].TCanvas.$create("Create$1",[this.FElementCanvas])),this.FCanvas.FApplyPixelRatio=!0,this.FCanvas.SetTransform(1,0,0,1,0,0))},this.SetBorderStyle=function(t){this.FBorderStyle!==t&&(this.FBorderStyle=t,this.UpdateElement())},this.SetBorderColor=function(t){this.FBorderColor!==t&&(this.FBorderColor=t,this.UpdateElement())},this.SetName=function(e){var i={},s="";if(s="",null!=pas["WEBLib.Forms"].VSIDE&&4 in this.FComponentState||pas["WEBLib.Forms"].TFrame.isPrototypeOf(this)&&(s="F"+t.FindUniqueName(this.FName)+"_"),pas.Classes.TComponent.SetName.call(this,s+e),1 in this.FControlStyle&&4 in this.FComponentState&&!(0 in this.FComponentState)){if(null!=this.FOwner&&0 in this.FOwner.FComponentState)return;i=rtl.refSet(this.FControlStyle),this.SetCaption(e),this.FControlStyle=rtl.refSet(i)}},this.SetCaption=function(t){this.FCaption=t,this.FControlStyle=rtl.diffSet(this.FControlStyle,rtl.createSet(1))},this.CreateControl=function(){t.TControl.CreateControl.call(this),this.RecreateCanvas()},this.Loaded=function(){t.TControl.Loaded.call(this),this.Invalidate()},this.UpdateElementVisual=function(){t.TControl.UpdateElementVisual.call(this),null!=this.GetElementHandle()&&(this.GetIsLinked()||""!==this.FElementClassName||(1===this.FBorderStyle?this.FCustomBorder?(this.GetElementStyle().setProperty("border-style","solid"),this.GetElementStyle().setProperty("border-width","1px"),this.GetElementStyle().setProperty("border-color",pas["WEBLib.Graphics"].ColorToHTML(this.FBorderColor))):this.GetElementStyle().setProperty("border-style",""):this.GetElementStyle().setProperty("border-style","none")),""!==this.FElementClassName&&(this.GetElementStyle().removeProperty("border-style"),this.GetElementStyle().removeProperty("border-width"),this.GetElementStyle().removeProperty("border-color")))},this.CreateElement=function(){var t=null;return this.FElementCanvas=document.createElement("CANVAS"),0 in this.FControlStyle?((t=document.createElement("SPAN")).appendChild(this.FElementCanvas),""!==this.GetID()&&this.FElementCanvas.setAttribute("id",this.GetID()+"_Canvas"),this.FElementCanvas.setAttribute("zindex","-1")):t=this.FElementCanvas,t},this.GetCanvasHeightOffset=function(){return 0,0},this.GetCanvasWidthOffset=function(){return 0,0},this.BindElement=function(){"CANVAS"===this.GetContainer().tagName||this.FControlCreated||(this.FElementCanvas=document.createElement("CANVAS"),this.GetContainer().appendChild(this.FElementCanvas))},this.BindEvents=function(){t.TControl.BindEvents.call(this)},this.Paint=function(){},this.CreateInitialize=function(){t.TControl.CreateInitialize.call(this),this.FControlStyle=rtl.unionSet(this.FControlStyle,rtl.createSet(1)),this.FBorderStyle=1,this.FBorderColor=12632256,this.FPainting=!1,this.FWidth=100,this.FHeight=25,this.FWidthPercent=100,this.FHeightPercent=100,this.FCustomBorder=!1},this.Destroy=function(){null!=this.FCanvas&&rtl.free(this,"FCanvas"),t.TControl.Destroy.call(this)},this.Resize=function(){t.TControl.Resize.call(this),this.Invalidate()},this.Invalidate=function(){var e=null;t.TControl.Invalidate.call(this),null===this.FParent||3 in this.FComponentState||this.FVisible&&(this.FUpdateCount>0||null!=(e=pas["WEBLib.Forms"].GetParentForm(this))&&e.IsUpdating()||(this.GetPixelRatio()!==this.FPixelRatio&&this.RecreateCanvas(),this.FPixelRatio=this.GetPixelRatio(),this.FPainting=!0,null!=this.FCanvas&&this.FCanvas.Clear(),this.Paint(),this.FPainting=!1))},this.SetFocus=function(){t.TControl.SetFocus.call(this)},this.EndUpdate=function(){t.TControl.EndUpdate.call(this),0===this.FUpdateCount&&this.Invalidate()},rtl.addIntf(this,pas.System.IUnknown)})),rtl.createClass(this,"TCustomHTMLDiv",this.TCustomControl,(function(){this.CreateElement=function(){return document.createElement("DIV")},rtl.addIntf(this,pas.System.IUnknown)})),rtl.createClass(this,"TControlManager",pas.Classes.TComponent,(function(){this.$init=function(){pas.Classes.TComponent.$init.call(this),this.FInstanceCount=0},this.Create$1=function(t){return pas.Classes.TComponent.Create$1.apply(this,arguments),this.FInstanceCount=0,this},this.GetInstanceNumber=function(){return this.FInstanceCount+=1,this.FInstanceCount},rtl.addIntf(this,pas.System.IUnknown)})),this.GetMousePos=function(){var t=pas.Types.TPoint.$new();return t.$assign(pas.Types.Point(e.FMouseX,e.FMouseY)),t},this.FindUniqueName=function(t){return t+pas.SysUtils.IntToStr(e.ControlManager.GetInstanceNumber())},this.GetScrollBarHeight=function(){var t=0;if(0===(t=e.ScrollBH)){var i=document.createElement("div");i.style.visibility="hidden",i.style.height="100px",i.style.msOverflowStyle="scrollbar",document.body.appendChild(i);var s=i.offsetHeight;i.style.overflow="scroll";var n=document.createElement("div");n.style.height="100%",i.appendChild(n);var r=n.offsetHeight;i.parentNode.removeChild(i),t=s-r,t=0,e.ScrollBH=t}return t},this.GetScrollBarWidth=function(){var t=0;if(0===(t=e.ScrollBW)){var i=document.createElement("div");i.style.visibility="hidden",i.style.width="100px",i.style.msOverflowStyle="scrollbar",document.body.appendChild(i);var s=i.offsetWidth;i.style.overflow="scroll";var n=document.createElement("div");n.style.width="100%",i.appendChild(n);var r=n.offsetWidth;i.parentNode.removeChild(i),t=s-r,e.ScrollBW=t}return t},this.SetHTMLElementFont=function(t,e,i){var s="";i?(t.style.removeProperty("font-family"),t.style.removeProperty("font-style"),t.style.removeProperty("font-weight"),t.style.removeProperty("font-size"),t.style.removeProperty("text-decoration")):(t.style.setProperty("font-family",e.FName),t.style.setProperty("font-style","normal"),0 in e.FStyle?t.style.setProperty("font-weight","bold"):t.style.setProperty("font-weight",""),1 in e.FStyle&&t.style.setProperty("font-style","italic"),s="",3 in e.FStyle&&(s="underline"),2 in e.FStyle&&(""!==s&&(s+=" "),s+="line-through"),""!==s?t.style.setProperty("text-decoration",s):t.style.removeProperty("text-decoration"),t.style.setProperty("font-size",pas.SysUtils.IntToStr(e.FSize)+"pt"))},this.SetHTMLElementColor=function(t,i,s){s||-1===i||16711422===i?t.style.removeProperty(e.cStyleBkgColor):t.style.setProperty(e.cStyleBkgColor,pas["WEBLib.Graphics"].ColorToHTML(i))},this.GetHTMLCursorName=function(t){var e="";e="default";return 0===t?e="default":2===t?e="auto":1===t?e="none":3===t?e="crosshair":4===t?e="text":6===t?e="nesw-resize":7===t?e="ns-resize":8===t?e="nwse-resize":9===t?e="ew-resize":10===t?e="n-resize":11===t?e="wait":12===t?e="copy":13===t?e="no-drop":14===t?e="col-resize":15===t?e="row-resize":16===t?e="copy":17===t?e="progress":18===t?e="not-allowed":19===t?e="progress":20===t?e="help":21===t?e="pointer":22!==t&&5!==t||(e="move"),e},this.GetHTMLElementAbsoluteRect=function(t){var e=pas.Types.TRect.$new(),i="";function s(t){var e=0,i=0;return t=pas.SysUtils.StringReplace(t,"px","",rtl.createSet(0)),pas.System.val$6(t,{get:function(){return e},set:function(t){e=t}},{get:function(){return i},set:function(t){i=t}}),e}return i=t.style.getPropertyValue("left"),e.Left=s(i),i=t.style.getPropertyValue("top"),e.Top=s(i),i=t.style.getPropertyValue("width"),e.Right=e.Left+s(i),i=t.style.getPropertyValue("height"),e.Bottom=e.Top+s(i),e},this.IsAndroid=function(){var t;return t=navigator.userAgent,pas.System.Pos("Android",t)>0},this.GetMaterialClass=function(t){var e="";e="material-icons";return 1===t?e="material-icons-outlined":2===t?e="material-icons-two-tone":3===t?e="material-icons-round":4===t&&(e="material-icons-sharp"),e},t.$implcode=function(){e.ControlManager=null,e.FMouseX=0,e.FMouseY=0,e.FCursorX=0,e.FCursorY=0,e.ScrollBW=0,e.ScrollBH=0,e.DragObject=null,e.cStyleBkgColor="background-color"},t.$init=function(){e.ScrollBW=0,e.ScrollBH=0,e.DragObject=null,e.ControlManager=t.TControlManager.$create("Create$1",[null])}}),["WEBLib.Dialogs","WEBLib.Forms","Math","TypInfo","WEBLib.WebTools","WEBLib.Utils"]),rtl.module("WEBLib.WebTools",["System","Classes","Web","JS","WEBLib.Controls","WEBLib.Graphics"],(function(){"use strict";var t=this;this.cBodyTag="body",this.cHTMLExt=".html",this.DoubleToHTML=function(t){return pas.SysUtils.Format$1("%g",pas.System.VarRecs(3,t),pas.SysUtils.TFormatSettings.Invariant())},this.GetLocaleShortDateFormat=function(t){return pas.SysUtils.TFormatSettings.Create$1(t).ShortDateFormat},this.GetLocaleLongDayName=function(t,e){var i=new Date(2017,0,1);i.setDate(i.getDate()+t-1);var s="";return s=""==e?navigator.language:e,i.toLocaleDateString(s,{weekday:"long"})},this.GetLocaleShortDayName=function(t,e){var i=new Date(2017,0,1);i.setDate(i.getDate()+t-1);var s="";return s=""==e?navigator.language:e,i.toLocaleDateString(s,{weekday:"short"})},this.GetLocaleLongMonthName=function(t,e){var i=new Date(2017,t-1,1),s="";return s=""==e?navigator.language:e,i.toLocaleDateString(s,{month:"long"})},this.GetLocaleShortMonthName=function(t,e){var i=new Date(2017,t-1,1),s="";return s=""==e?navigator.language:e,i.toLocaleDateString(s,{month:"short"})},this.GetLocaleDecimalSeparator=function(t){var e=1.1,i="";return i=""==t?navigator.language:t,e=e.toLocaleString(i).substring(1,2)},this.GetBrowserLocale=function(){return navigator.language},this.ProcessAccelerator=function(t,e){var i,s=0,n="";for(i=t.length,e.set(""),n="",s=1;s<=i;)"&"===t.charAt(s-1)?(s+1<=i&&"&"!==t.charAt(s+1-1)?(n=n+"<u>"+t.charAt(s+1-1)+"</u>",e.set(t.charAt(s+1-1))):s+1<=i&&"&"===t.charAt(s+1-1)&&(n+="&"),s+=2):(n+=t.charAt(s-1),s+=1);return n},this.HexImageDecode=function(t){var e,i=0,s=0,n=null,r=0,o=0,a=0;e=rtl.trunc(t.length/2),s=0,(r=t.charCodeAt(0)-48)>=10&&(r-=7),(o=t.charCodeAt(1)-48)>=10&&(o-=7),a=1+(o+(r<<4)),(i=pas.System.Pos("4A5045474",t))>1&&i<10&&(a+=4),(i=pas.System.Pos("4269746D6",t))>1&&i<10&&(a+=4),n=new Uint8Array(e-a);for(var l=a+1,h=e;l<=h;l++)i=l,(r=t.charCodeAt(2*i-1-1)-48)>=10&&(r-=7),(o=t.charCodeAt(2*i-1)-48)>=10&&(o-=7),o+=r<<4,n[s]=o,s+=1;return n},this.HexImageEncodeFromBase64=function(e){var i;return e=e.replace(/^data:image\/\S+;base64,/,""),i=Uint8Array.from(atob(e),(function(t){return t.charCodeAt(0)})),t.HexImageEncode(i)},this.HexImageEncode=function(t){var e="",i=0,s=0,n=0,r="",o="";if(e="",0===(s=t.length))return e;s=((255&s)<<24)+((65280&s)<<8)+((16711680&s)>>>8)+((4278190080&s)>>>24),o="",137===t[0]&&80===t[1]&&(n=(r="TPngImage").length),255===t[0]&&216===t[1]&&(n=(r="TJPEGImage").length,o=pas.SysUtils.IntToHex(s,8)),66===t[0]&&77===t[1]&&(n=(r="TBitmap").length,o=pas.SysUtils.IntToHex(s,8)),71===t[0]&&73===t[1]&&(n=(r="TGIFImage").length),e=pas.SysUtils.IntToHex(n,2);for(var a=1,l=r.length;a<=l;a++)i=a,n=r.charCodeAt(i-1),e+=pas.SysUtils.IntToHex(n,2);e+=o;for(var h=0,F=t.length-1;h<=F;h++)n=t[i=h],e+=pas.SysUtils.IntToHex(n,2);return e},this.HexImageDecodeAsBase64=function(e){var i;return i=t.HexImageDecode(e),e=btoa(new Uint8Array(i).reduce((function(t,e){return t+String.fromCharCode(e)}),""))},this.HTMLToString=function(t){return t=pas.SysUtils.StringReplace(t,"<","&lt;",rtl.createSet(0)),pas.SysUtils.StringReplace(t,">","&gt;",rtl.createSet(0))},this.ElementVisible=function(e){var i=!1,s=null;for(i=!1,s=e;null!=s;)pas.SysUtils.LowerCase(s.tagName)===t.cBodyTag&&(i=!0),s=s.parentElement;if(!i)return i;for(;null!=e;){if("none"===e.style.getPropertyValue("display"))return i=!1;if(s=e.parentElement,!rtl.isExt(s,HTMLElement))return i;e=s}return i}}),["SysUtils","WEBLib.Utils"]),rtl.module("contnrs",["System","SysUtils","Classes"],(function(){"use strict";rtl.createClass(this,"TObjectList",pas.Classes.TList,(function(){this.$init=function(){pas.Classes.TList.$init.call(this),this.FFreeObjects=!1},this.Notify=function(t,e){var i=null;this.FFreeObjects&&2===e&&(i=rtl.getObject(t),i=rtl.freeLoc(i)),pas.Classes.TList.Notify.call(this,t,e)},this.GetItem=function(t){return rtl.getObject(pas.Classes.TList.Get.call(this,t))},this.Create$2=function(){return pas.Classes.TList.Create$1.call(this),this.FFreeObjects=!0,this},this.Add$1=function(t){return pas.Classes.TList.Add.call(this,t)},this.IndexOf$1=function(t){return pas.Classes.TList.IndexOf.call(this,t)}}))}),["JS"]),rtl.module("WEBLib.Graphics",["System","Classes","Types","Web","JS"],(function(){"use strict";var t=this,e=t.$impl;this.WEBDEFAULTFONT="Arial",this.SysDefault=536870912,this.clNone=-1,this.clBlack=0,this.clOlive=32896,this.clGray=8421504,this.clSilver=12632256,this.clWhite=16777215,this.clDefault=536870912,this.clBtnFace=15790320,this.clWindowText=65793,this.clWindow=16711422,this.clHighlight=14120960,this.clHighlightText=197379,this.DEFAULT_CHARSET=1,this.$rtti.$inherited("TColor",rtl.nativeint,{}),this.TVerticalAlignment={0:"taAlignTop",taAlignTop:0,1:"taAlignBottom",taAlignBottom:1,2:"taVerticalCenter",taVerticalCenter:2},this.TPenStyle={0:"psSolid",psSolid:0,1:"psDash",psDash:1,2:"psDot",psDot:2,3:"psDashDot",psDashDot:3,4:"psDashDotDot",psDashDotDot:4,5:"psClear",psClear:5,6:"psInsideFrame",psInsideFrame:6,7:"psUserStyle",psUserStyle:7,8:"psAlternate",psAlternate:8},this.$rtti.$Enum("TPenStyle",{minvalue:0,maxvalue:8,ordtype:1,enumtype:this.TPenStyle}),this.TPenMode={0:"pmBlack",pmBlack:0,1:"pmWhite",pmWhite:1,2:"pmNop",pmNop:2,3:"pmNot",pmNot:3,4:"pmCopy",pmCopy:4,5:"pmNotCopy",pmNotCopy:5,6:"pmMergePenNot",pmMergePenNot:6,7:"pmMaskPenNot",pmMaskPenNot:7,8:"pmMergeNotPen",pmMergeNotPen:8,9:"pmMaskNotPen",pmMaskNotPen:9,10:"pmMerge",pmMerge:10,11:"pmNotMerge",pmNotMerge:11,12:"pmMask",pmMask:12,13:"pmNotMask",pmNotMask:13,14:"pmXor",pmXor:14,15:"pmNotXor",pmNotXor:15},this.$rtti.$Enum("TPenMode",{minvalue:0,maxvalue:15,ordtype:1,enumtype:this.TPenMode}),this.TBrushStyle={0:"bsSolid",bsSolid:0,1:"bsClear",bsClear:1,2:"bsHorizontal",bsHorizontal:2,3:"bsVertical",bsVertical:3,4:"bsFDiagonal",bsFDiagonal:4,5:"bsBDiagonal",bsBDiagonal:5,6:"bsCross",bsCross:6,7:"bsDiagCross",bsDiagCross:7},this.$rtti.$Enum("TBrushStyle",{minvalue:0,maxvalue:7,ordtype:1,enumtype:this.TBrushStyle}),this.TBrushGradient={0:"bgNone",bgNone:0,1:"bgLinearVert",bgLinearVert:1,2:"bgLinearHorz",bgLinearHorz:2,3:"bgRadial",bgRadial:3},this.$rtti.$Enum("TBrushGradient",{minvalue:0,maxvalue:3,ordtype:1,enumtype:this.TBrushGradient}),this.TFontStyle={0:"fsBold",fsBold:0,1:"fsItalic",fsItalic:1,2:"fsStrikeOut",fsStrikeOut:2,3:"fsUnderline",fsUnderline:3},this.$rtti.$Enum("TFontStyle",{minvalue:0,maxvalue:3,ordtype:1,enumtype:this.TFontStyle}),this.$rtti.$Set("TFontStyles",{comptype:this.$rtti.TFontStyle}),this.$rtti.$Int("TFontCharset",{minvalue:0,maxvalue:255,ordtype:3}),this.$rtti.$inherited("TBinaryString",rtl.string,{}),rtl.recNewT(this,"TCanvasRectF",(function(){this.Left=0,this.Top=0,this.Right=0,this.Bottom=0,this.$eq=function(t){return this.Left===t.Left&&this.Top===t.Top&&this.Right===t.Right&&this.Bottom===t.Bottom},this.$assign=function(t){return this.Left=t.Left,this.Top=t.Top,this.Right=t.Right,this.Bottom=t.Bottom,this}})),rtl.createClass(this,"TPen",pas.Classes.TPersistent,(function(){this.$init=function(){pas.Classes.TPersistent.$init.call(this),this.FWidth=0,this.FColor=0,this.FStyle=0,this.FMode=0},this.SetColor=function(t){this.FColor=t},this.Create$1=function(){return this.FColor=0,this.FWidth=1,this.FStyle=0,this.FMode=4,this},this.Assign=function(e){t.TPen.isPrototypeOf(e)?(this.FColor=rtl.as(e,t.TPen).FColor,this.FStyle=rtl.as(e,t.TPen).FStyle,this.FWidth=rtl.as(e,t.TPen).FWidth):pas.Classes.TPersistent.Assign.apply(this,arguments)};var e=this.$rtti;e.addProperty("Color",2,t.$rtti.TColor,"FColor","SetColor"),e.addProperty("Mode",0,t.$rtti.TPenMode,"FMode","FMode",{Default:t.TPenMode.pmCopy}),e.addProperty("Width",0,rtl.longint,"FWidth","FWidth",{Default:1}),e.addProperty("Style",0,t.$rtti.TPenStyle,"FStyle","FStyle",{Default:t.TPenStyle.psSolid})})),rtl.createClass(this,"TGradientColor",pas.Classes.TPersistent,(function(){this.$init=function(){pas.Classes.TPersistent.$init.call(this),this.FColor=0,this.FStop=0},this.Assign=function(e){t.TGradientColor.isPrototypeOf(e)&&(this.FColor=rtl.as(e,t.TGradientColor).FColor,this.FStop=rtl.as(e,t.TGradientColor).FStop)},this.Create$1=function(){return this.FColor=-1,this.FStop=0,this};var e=this.$rtti;e.addProperty("Stop",0,rtl.double,"FStop","FStop"),e.addProperty("Color",0,t.$rtti.TColor,"FColor","FColor",{Default:-1})})),rtl.createClass(this,"TBrush",pas.Classes.TPersistent,(function(){this.$init=function(){pas.Classes.TPersistent.$init.call(this),this.FColor=0,this.FStyle=0,this.FGradientColors=null,this.FGradient=0},this.$final=function(){this.FGradientColors=void 0,pas.Classes.TPersistent.$final.call(this)},this.Create$1=function(){return this.FColor=16777215,this.FStyle=0,this.FGradient=0,this.FGradientColors=pas.Classes.TList.$create("Create$1"),this},this.Destroy=function(){rtl.free(this,"FGradientColors"),pas.System.TObject.Destroy.call(this)},this.Assign=function(e){t.TBrush.isPrototypeOf(e)?(this.FColor=rtl.as(e,t.TBrush).FColor,this.FStyle=rtl.as(e,t.TBrush).FStyle):pas.Classes.TPersistent.Assign.apply(this,arguments)},this.AddGradientColor=function(e,i){var s=null;(s=t.TGradientColor.$create("Create$1")).FColor=e,s.FStop=i,this.FGradientColors.Add(s)},this.GetGradientColor=function(t,e,i){if(!(t<this.FGradientColors.GetCount()))throw pas.SysUtils.Exception.$create("Create$1",["Invalid gradient color index"]);e.set(rtl.getObject(this.FGradientColors.Get(t)).FColor),i.set(rtl.getObject(this.FGradientColors.Get(t)).FStop)},this.GradientCount=function(){return this.FGradientColors.GetCount()},this.ClearGradient=function(){for(var t=0,e=null,i=this.FGradientColors.GetCount()-1;i>=0;i--)t=i,e=rtl.getObject(this.FGradientColors.Get(t)),e=rtl.freeLoc(e),this.FGradientColors.Delete(t)};var e=this.$rtti;e.addProperty("Gradient",0,t.$rtti.TBrushGradient,"FGradient","FGradient"),e.addProperty("Color",0,t.$rtti.TColor,"FColor","FColor"),e.addProperty("Style",0,t.$rtti.TBrushStyle,"FStyle","FStyle")})),rtl.createClass(this,"TFont",pas.Classes.TPersistent,(function(){this.$init=function(){pas.Classes.TPersistent.$init.call(this),this.FName="",this.FSize=0,this.FColor=0,this.FStyle={},this.FOnChange=null,this.FHeight=0,this.FCharset=0},this.$final=function(){this.FStyle=void 0,this.FOnChange=void 0,pas.Classes.TPersistent.$final.call(this)},this.SetHeight=function(t){var e;e=72*-t/96,this.FSize=Math.round(e),this.FHeight!==t&&(this.FHeight=t,this.DoChange())},this.SetName=function(t){this.FName!==t&&(this.FName=t,this.DoChange())},this.SetSize=function(t){this.FSize!==t&&(this.FSize=t,this.DoChange())},this.SetColor=function(t){this.FColor!==t&&(this.FColor=t,this.DoChange())},this.SetStyle=function(t){rtl.neSet(this.FStyle,t)&&(this.FStyle=rtl.refSet(t),this.DoChange())},this.DoChange=function(){null!=this.FOnChange&&this.FOnChange(this)},this.Assign=function(e){t.TFont.isPrototypeOf(e)?(this.FName=rtl.as(e,t.TFont).FName,this.FColor=rtl.as(e,t.TFont).FColor,this.FSize=rtl.as(e,t.TFont).FSize,this.FStyle=rtl.refSet(rtl.as(e,t.TFont).FStyle),this.DoChange()):pas.Classes.TPersistent.Assign.apply(this,arguments)},this.Create$1=function(){return pas.System.TObject.Create.call(this),this.FName=t.WEBDEFAULTFONT,this.FSize=8,this.FHeight=-11,this.FStyle={},this.FColor=0,this},this.ToString=function(){var e="";return e="",0 in this.FStyle&&1 in this.FStyle?e+="bold italic":0 in this.FStyle?e+="bold":1 in this.FStyle&&(e+="italic"),e+" "+t.FontSizeToHTML(t.FontSizeToPx(this.FSize))+" "+this.FName};var e=this.$rtti;e.addProperty("Charset",0,t.$rtti.TFontCharset,"FCharset","FCharset"),e.addProperty("Name",2,rtl.string,"FName","SetName"),e.addProperty("Height",2,rtl.longint,"FHeight","SetHeight"),e.addProperty("Style",2,t.$rtti.TFontStyles,"FStyle","SetStyle"),e.addProperty("Color",2,t.$rtti.TColor,"FColor","SetColor"),e.addProperty("Size",2,rtl.longint,"FSize","SetSize")})),rtl.createClass(this,"TGraphic",pas.Classes.TPersistent,(function(){this.$init=function(){pas.Classes.TPersistent.$init.call(this),this.FAddToQueue=!1,this.FCanvasElement=null,this.FEmpty=!1,this.FData="",this.FDataBin="",this.FCanvas=null,this.FOnChange=null,this.FImage=null,this.FURL="",this.FLoaded=null,this.FUsedCanvas=!1},this.$final=function(){this.FCanvasElement=void 0,this.FCanvas=void 0,this.FOnChange=void 0,this.FImage=void 0,this.FLoaded=void 0,pas.Classes.TPersistent.$final.call(this)},this.SetHeight=function(t){this.FImage.height=t,this.RecreateCanvas(),this.DoChange()},this.SetWidth=function(t){this.FImage.width=t,this.RecreateCanvas(),this.DoChange()},this.GetCanvas=function(){var t;return null==this.FCanvas&&this.RecreateCanvas(),t=this.FCanvas,this.FUsedCanvas=!0,t},this.GetData=function(){return this.FDataBin},this.SetData=function(t){var e="";this.FDataBin!==t&&(this.FDataBin=t,e=pas["WEBLib.WebTools"].HexImageDecodeAsBase64(this.FDataBin),pas.System.Pos("PHN2ZyB",e)>0?this.LoadFromResource("data:image/svg+xml;base64,"+e):this.LoadFromResource("data:image/png;base64,"+e))},this.DoChange=function(){var t=0;this.FEmpty=0===this.GetWidth()&&0===this.GetHeight(),this.FEmpty||""===this.FData||e.FCache.Exists(this.FData)||(e.FCache.Add$1(e.TGraphicCache.$create("Create$1",[this.FImage,this.FData])),(t=e.FQueue.IndexOf(this.FData))>=0&&t<=e.FQueue.GetCount()-1&&e.FQueue.Delete(t),e.FCacheCount-=1,0===e.FCacheCount&&null!=pas["WEBLib.Forms"].Application.FOnImageCacheReady&&pas["WEBLib.Forms"].Application.FOnImageCacheReady(pas["WEBLib.Forms"].Application)),null!=this.FOnChange&&this.FOnChange(this),null!=this.FLoaded&&(this.FLoaded(),this.FLoaded=null)},this.SetURL=function(t){this.LoadFromURL(t,null)},this.GetWidth=function(){var t=0;return t=0,null!=this.FImage&&(t=this.FImage.width),t},this.GetHeight=function(){var t=0;return t=0,null!=this.FImage&&(t=this.FImage.height),t},this.RecreateCanvas=function(){null==this.FCanvasElement&&(this.FCanvasElement=document.createElement("CANVAS")),null!=this.FCanvasElement&&(this.FCanvasElement.height=this.GetHeight(),this.FCanvasElement.width=this.GetWidth(),null==this.FCanvas&&(this.FCanvas=t.TCanvas.$create("Create$1",[this.FCanvasElement]),this.FCanvas.FOnBeginScene=rtl.createCallback(this,"DoBeginScene"),this.FCanvas.FOnEndScene=rtl.createCallback(this,"DoEndScene")))},this.DoBeginScene=function(t){this.FCanvas.Clear()},this.DoEndScene=function(t){this.FAddToQueue=!1,this.CaptureCanvas(),this.FAddToQueue=!0},this.AssignEvents=function(){var t=this;this.FImage.onload=function(){t.DoChange()}},this.CreateImage=function(){this.FImage=new Image},this.LoadFromCache=function(t,i){var s="",n=null,r="",o=!1;this.FData=t,pas.System.Pos("DATA:",pas.SysUtils.UpperCase(t))>0&&(this.FDataBin=pas["WEBLib.WebTools"].HexImageEncodeFromBase64(t)),""!==(s=t)&&(this.FLoaded=i,this.FUsedCanvas=!1,e.FCache.Find(s,{get:function(){return n},set:function(t){n=t}})?(this.FImage=n,this.DoChange()):(!1,r="",(o=""!=(r=this.FImage.src)&&s!==r)&&(this.CreateImage(),this.AssignEvents()),!o&&-1===e.FQueue.IndexOf(s)||o?(this.FImage.src=s,s=this.FImage.src,this.FData=s,pas.System.Pos("DATA:",pas.SysUtils.UpperCase(s))>0&&(this.FDataBin=pas["WEBLib.WebTools"].HexImageEncodeFromBase64(s)),e.FCacheCount+=1,this.FAddToQueue&&e.FQueue.Add(s)):o||-1===e.FQueue.IndexOf(s)||(this.FImage.src=s)),this.FImage&&(this.FEmpty=""==this.FImage.src))},this.CreateFromResource=function(t){return this.CreateFromResource$1(t,0)},this.CreateFromResource$1=function(e,i){var s=null;return(s=t.TGraphic.$create("Create$3")).LoadFromResource(e),s},this.CreateFromURL=function(t){return this.CreateFromURL$1(t,0)},this.CreateFromURL$1=function(e,i){var s=null;return(s=t.TGraphic.$create("Create$3")).LoadFromURL(e,null),s},this.Image=function(){return this.FImage},this.Empty=function(){return this.FEmpty},this.Create$3=function(){return this.FAddToQueue=!0,this.FEmpty=!0,this.FData="",this.FDataBin="",this.FUsedCanvas=!1,this.CreateImage(),this.AssignEvents(),this},this.CaptureCanvas=function(){null!=this.FCanvas&&null!=this.FCanvas.FElementCanvas&&this.LoadFromResource(this.FCanvas.FElementCanvas.toDataURL())},this.LoadFromCanvas=function(t){null!=t&&null!=t.FElementCanvas&&this.LoadFromResource(t.FElementCanvas.toDataURL())},this.Assign=function(e){var i="";null!=e&&t.TGraphic.isPrototypeOf(e)&&null!=rtl.as(e,t.TGraphic).FCanvas?this.LoadFromCanvas(rtl.as(e,t.TGraphic).FCanvas):null!=e&&t.TGraphic.isPrototypeOf(e)&&null!=rtl.as(e,t.TGraphic).FImage&&!rtl.as(e,t.TGraphic).Empty()?(i=e.FImage.src,this.LoadFromURL(i,null)):null==e&&(this.CreateImage(),this.DoChange())},this.LoadFromURL=function(t,e){this.LoadFromURL$1(t,0,e)},this.LoadFromURL$1=function(t,e,i){this.FEmpty=!0,this.LoadFromCache(t,i)},this.LoadFromResource=function(t){this.LoadFromResource$1(t,0)},this.LoadFromResource$1=function(t,e){this.FEmpty=!0,this.LoadFromCache(t,null)};var i=this.$rtti;i.addProperty("OnChange",0,pas.Classes.$rtti.TNotifyEvent,"FOnChange","FOnChange"),i.addProperty("URL",2,rtl.string,"FURL","SetURL"),i.addProperty("Data",3,t.$rtti.TBinaryString,"GetData","SetData")})),rtl.createClass(this,"TBitmap",this.TGraphic,(function(){})),rtl.recNewT(this,"TMatrix",(function(){this.m11=0,this.m12=0,this.m13=0,this.m21=0,this.m22=0,this.m23=0,this.m31=0,this.m32=0,this.m33=0,this.$eq=function(t){return this.m11===t.m11&&this.m12===t.m12&&this.m13===t.m13&&this.m21===t.m21&&this.m22===t.m22&&this.m23===t.m23&&this.m31===t.m31&&this.m32===t.m32&&this.m33===t.m33},this.$assign=function(t){return this.m11=t.m11,this.m12=t.m12,this.m13=t.m13,this.m21=t.m21,this.m22=t.m22,this.m23=t.m23,this.m31=t.m31,this.m32=t.m32,this.m33=t.m33,this}})),rtl.createClass(this,"TCanvas",pas.System.TObject,(function(){this.$init=function(){pas.System.TObject.$init.call(this),this.FElementCanvas=null,this.FContext=null,this.FPen=null,this.FBrush=null,this.FFont=null,this.FPathOpen=!1,this.FPathX=0,this.FPathY=0,this.FClipRect=t.TCanvasRectF.$new(),this.FOnEndScene=null,this.FOnBeginScene=null,this.FApplyPixelRatio=!1},this.$final=function(){this.FElementCanvas=void 0,this.FContext=void 0,this.FPen=void 0,this.FBrush=void 0,this.FFont=void 0,this.FClipRect=void 0,this.FOnEndScene=void 0,this.FOnBeginScene=void 0,pas.System.TObject.$final.call(this)},this.SetClipRect=function(t){this.FClipRect.$assign(t),null!=this.FContext&&(this.FContext.beginPath(),this.FContext.rect(this.FClipRect.Left,this.FClipRect.Top,this.FClipRect.Right-this.FClipRect.Left,this.FClipRect.Bottom-this.FClipRect.Top),this.FContext.clip())},this.GetAccuOffset=function(t,e,i,s){i.set(0),s.set(0),1===this.FPen.FWidth&&5!==this.FPen.FStyle&&0===pas.System.Frac(t)&&i.set(.5),1===this.FPen.FWidth&&5!==this.FPen.FStyle&&0===pas.System.Frac(e)&&s.set(.5)},this.ApplyStroke=function(){if(null!=this.FContext){this.FContext.lineWidth=this.FPen.FWidth,this.FContext.strokeStyle=t.ColorToHTML(this.FPen.FColor);var e=this.FPen.FStyle;0===e?this.FContext.setLineDash([]):2===e?this.FContext.setLineDash([1,2]):1===e?this.FContext.setLineDash([8,2]):3===e?this.FContext.setLineDash([6,2,2,2]):4===e?this.FContext.setLineDash([6,2,2,2,2,2]):5===e&&this.FContext.setLineDash([0,65535])}},this.ApplyFill=function(){null!=this.FContext&&(this.FContext.fillStyle=t.ColorToHTML(this.FBrush.FColor))},this.ApplyBrush=function(e,i,s,n){var r=0,o=0,a=0,l=null,h=0,F="",p=0,c=0;if(this.GetAccuOffset(e,i,{get:function(){return r},set:function(t){r=t}},{get:function(){return o},set:function(t){o=t}}),this.FBrush.FStyle in rtl.createSet(2,6))for(a=i+o,this.FContext.lineWidth=1,this.FContext.strokeStyle=t.ColorToHTML(this.FBrush.FColor);a<n;)this.FContext.moveTo(e,a),this.FContext.lineTo(s,a),a+=8;if(this.FBrush.FStyle in rtl.createSet(3,6))for(a=e+r,this.FContext.lineWidth=1,this.FContext.strokeStyle=t.ColorToHTML(this.FBrush.FColor);a<s;)this.FContext.moveTo(a,i),this.FContext.lineTo(a,n),a+=8;if(this.FBrush.FStyle in rtl.createSet(4,7))for(a=e+r-(s-e),this.FContext.lineWidth=1,this.FContext.strokeStyle=t.ColorToHTML(this.FBrush.FColor);a<s;)this.FContext.moveTo(a,i),this.FContext.lineTo(a+(n-i),n),a+=8;if(this.FBrush.FStyle in rtl.createSet(5,7))for(a=e+r,this.FContext.lineWidth=1,this.FContext.strokeStyle=t.ColorToHTML(this.FBrush.FColor);a<s+(s-e);)this.FContext.moveTo(a,i),this.FContext.lineTo(a-(n-i),n),a+=8;if(0!==this.FBrush.FGradient){var u=this.FBrush.FGradient;2===u?l=this.FContext.createLinearGradient(e,i,s,i):1===u?l=this.FContext.createLinearGradient(e,i,e,n):3===u&&(l=this.FContext.createRadialGradient(e+(s-e)/2,i+(n-i)/2,0,e+(s-e)/2,i+(n-i)/2,(s-e)/2)),F=t.ColorToHTML(t.ColorToRGB(this.FBrush.FColor)),l.addColorStop(0,F);for(var d=0,S=this.FBrush.GradientCount()-1;d<=S;d++)h=d,this.FBrush.GetGradientColor(h,{get:function(){return p},set:function(t){p=t}},{get:function(){return c},set:function(t){c=t}}),F=t.ColorToHTML(t.ColorToRGB(p)),l.addColorStop(c,F);return this.FContext.fillStyle=l,void this.FContext.fillRect(e,i,s,n)}this.FContext.stroke()},this.Create$1=function(e){return this.FElementCanvas=e,this.FContext=e.getContext("2d"),this.FPen=t.TPen.$create("Create$1"),this.FBrush=t.TBrush.$create("Create$1"),this.FPathOpen=!1,this.FFont=t.TFont.$create("Create$1"),this.FApplyPixelRatio=!1,this},this.Destroy=function(){pas.System.TObject.Destroy.call(this)},this.SetTransform=function(i,s,n,r,o,a){var l=t.TMatrix.$new(),h=0;null!=this.FContext&&(l.$assign(e.MatrixIdentity()),l.m11=i,l.m12=s,l.m21=n,l.m22=r,l.m31=o,l.m32=a,this.FApplyPixelRatio&&(h=e.GetPixelRatio(this),l.$assign(e.MatrixMultiply(l,e.MatrixCreateScaling(h,h)))),this.FContext.setTransform(l.m11,l.m12,l.m21,l.m22,l.m31,l.m32))},this.Transform=function(t,e,i,s,n,r){null!=this.FContext&&this.FContext.transform(t,e,i,s,n,r)},this.MoveTo$1=function(t,e){var i=0,s=0;null!=this.FContext&&(this.FPathOpen=!0,this.FContext.beginPath(),this.ApplyStroke(),i=0,s=0,this.GetAccuOffset(t,e,{get:function(){return i},set:function(t){i=t}},{get:function(){return s},set:function(t){s=t}}),this.FContext.moveTo(t+i,e+s))},this.LineTo$1=function(e,i){var s=0,n=0,r=0;if(null!=this.FContext){s=0,n=0,this.GetAccuOffset(e,i,{get:function(){return s},set:function(t){s=t}},{get:function(){return n},set:function(t){n=t}});var o=this.FPen.FMode;0===o?this.FContext.strokeStyle=t.ColorToHTML(0):1===o?this.FContext.strokeStyle=t.ColorToHTML(16777215):14===o?this.FContext.globalCompositeOperation="xor":12===o?this.FContext.globalCompositeOperation="source-atop":5===o?(r=4294967295^t.ColorToRGB(this.FPen.FColor),this.FContext.strokeStyle=t.ColorToHTML(r)):15===o&&(r=4294967295^t.ColorToRGB(this.FPen.FColor),this.FContext.strokeStyle=t.ColorToHTML(r),this.FContext.globalCompositeOperation="xor"),this.FPathOpen||(this.FContext.beginPath(),this.ApplyStroke(),this.FContext.moveTo(this.FPathX+s,this.FPathY+n)),this.FContext.lineTo(e+s,i+n),this.FContext.stroke(),this.FPathX=e,this.FPathY=i,this.FPathOpen=!1,this.FContext.globalCompositeOperation="source-over"}},this.Rectangle=function(t,e,i,s){var n=0,r=0;if(null!=this.FContext){this.FContext.save(),this.FContext.beginPath(),this.ApplyStroke(),this.ApplyFill(),this.GetAccuOffset(t,e,{get:function(){return n},set:function(t){n=t}},{get:function(){return r},set:function(t){r=t}});let o=new Path2D;o.rect(t,e,i-t+1,s-e+1),this.FContext.clip(o,"evenodd"),this.ApplyBrush(t,e,i,s),this.FBrush.FStyle in rtl.createSet(1,2,3,6,4,5,7)||(this.FContext.rect(t+n,e+r,i-t,s-e),this.FContext.fill()),5!==this.FPen.FStyle&&(this.ApplyStroke(),this.FContext.beginPath(),this.FContext.rect(t+n,e+r,i-t,s-e),this.FContext.stroke()),this.FContext.restore()}},this.Rectangle$1=function(t,e,i,s){this.Rectangle(t,e,i,s)},this.Rectangle$2=function(t){this.Rectangle$1(t.Left,t.Top,t.Right,t.Bottom)},this.Rectangle$3=function(t){this.Rectangle(t.Left,t.Top,t.Right,t.Bottom)},this.Ellipse$1=function(t,e,i,s){var n=0,r=0,o=0,a=0,l=0,h=0,F=0,p=0,c=0;if(null!=this.FContext){a=(n=i-t)/2*(o=.5522848),l=(r=s-e)/2*o,h=t+n,F=e+r,p=t+n/2,c=e+r/2,this.FContext.save();let u=new Path2D;u.moveTo(t,c),u.bezierCurveTo(t,c-l,p-a,e,p,e),u.bezierCurveTo(p+a,e,h,c-l,h,c),u.bezierCurveTo(h,c+l,p+a,F,p,F),u.bezierCurveTo(p-a,F,t,c+l,t,c),u.closePath(),this.FContext.clip(u,"evenodd"),this.ApplyBrush(t,e,i,s),this.FContext.restore(),this.FContext.beginPath(),this.ApplyStroke(),this.ApplyFill(),this.FContext.moveTo(t,c),this.FContext.bezierCurveTo(t,c-l,p-a,e,p,e),this.FContext.bezierCurveTo(p+a,e,h,c-l,h,c),this.FContext.bezierCurveTo(h,c+l,p+a,F,p,F),this.FContext.bezierCurveTo(p-a,F,t,c+l,t,c),this.FContext.closePath(),0===this.FBrush.FStyle&&0===this.FBrush.FGradient&&this.FContext.fill(),5!==this.FPen.FStyle&&this.FContext.stroke()}},this.Ellipse$3=function(t){this.Ellipse$1(t.Left,t.Top,t.Right,t.Bottom)},this.TextOut$1=function(e,i,s){var n=null;null!=this.FContext&&(this.FContext.fillStyle=t.ColorToHTML(this.FFont.FColor),this.FContext.font=this.FFont.ToString(),this.FContext.textBaseline="top",this.FContext.fillText(s,e,i),3 in this.FFont.FStyle&&(n=this.FContext.measureText(s),this.FContext.fillRect(e,i+1.4*this.FFont.FSize,n.width,1)),2 in this.FFont.FStyle&&(n=this.FContext.measureText(s),this.FContext.fillRect(e,i+.7*this.FFont.FSize,n.width,1)))},this.StretchDraw$1=function(t,e){var i=null;null!=this.FContext&&(i=e.Image(),this.FContext.drawImage(i,0,0,e.GetWidth(),e.GetHeight(),t.Left,t.Top,t.Right-t.Left,t.Bottom-t.Top))},this.BeginScene=function(){null!=this.FOnBeginScene&&this.FOnBeginScene(this)},this.EndScene=function(){null!=this.FOnEndScene&&this.FOnEndScene(this)},this.Save=function(){null!=this.FContext&&this.FContext.save()},this.Restore=function(){null!=this.FContext&&this.FContext.restore()},this.Refresh=function(){},this.Clear=function(){null!=this.FContext&&null!=this.FElementCanvas&&this.FContext.clearRect(0,0,this.FElementCanvas.width,this.FElementCanvas.height)},this.TextRect$1=function(e,i,s,n,r,o){var a,l=this,h=t.TCanvasRectF.$new(),F=0,p="",c="",u="",d=0,S=0,C=0,T=!1,m=0,g=0,f=0,b=0,y=t.TCanvasRectF.$new(),L=0,M=0,E=!1,P=!1;function B(t,i,s){if(E){var n=r;2===n?l.TextOut$1(e.Left+(e.Right-e.Left-i)/2,e.Top,t):0===n?l.TextOut$1(e.Left,e.Top,t):1===n&&l.TextOut$1(e.Right-i,e.Top,t)}else{var a=r;if(2===a){var h=o;0===h?l.TextOut$1(e.Left+(e.Right-e.Left-i)/2,e.Top,t):2===h?l.TextOut$1(e.Left+(e.Right-e.Left-i)/2,e.Top+(e.Bottom-e.Top-s)/2,t):1===h&&l.TextOut$1(e.Left+(e.Right-e.Left-i)/2,e.Bottom-s,t)}else if(0===a){var F=o;0===F?l.TextOut$1(e.Left,e.Top,t):2===F?l.TextOut$1(e.Left,e.Top+(e.Bottom-e.Top-s)/2,t):1===F&&l.TextOut$1(e.Left,e.Bottom-s,t)}else if(1===a){var p=o;0===p?l.TextOut$1(e.Right-i,e.Top,t):2===p?l.TextOut$1(e.Right-i,e.Top+(e.Bottom-e.Top-s)/2,t):1===p&&l.TextOut$1(e.Right-i,e.Bottom-s,t)}}}function D(t,e){var i,s="",n=0;if(s="",i=t.length,e.get()>i)return s;for(n=e.get();;){if("\n"===t.charAt(n-1)&&"\r"===t.charAt(n-1-1)||"\r"===t.charAt(n-1)&&"\n"===t.charAt(n-1-1)||" "===t.charAt(n-1)){s=" "===t.charAt(n-1)?pas.System.Copy(t,e.get(),n-(e.get()-1)):pas.System.Copy(t,e.get(),n-e.get());break}if("\n"===t.charAt(n-1)||"\r"===t.charAt(n-1)||" "===t.charAt(n-1)){s=pas.System.Copy(t,e.get(),n-(e.get()-1));break}if(n>=i){s=pas.System.Copy(t,e.get(),n-(e.get()-1));break}n+=1}return e.set(n+1),s}if(E=s||pas.System.Pos("\r",i)>0||pas.System.Pos("\n",i)>0,a=!s&&(pas.System.Pos("\r",i)>0||pas.System.Pos("\n",i)>0),E){for(y.$assign(e),C=0,F=1,M=.5*this.FFont.FSize,b=0,L=0,g=0,p=D(i,{get:function(){return F},set:function(t){F=t}}),S=this.TextWidth(p),f=this.TextHeight(p)+M,C+=S,p.length>0&&" "===p.charAt(p.length-1)&&(C+=L),P=!1;F<=i.length&&((d=p.length)>=2&&("\n"===p.charAt(d-1)&&"\r"===p.charAt(d-1-1)||"\r"===p.charAt(d-1)&&"\n"===p.charAt(d-1-1))?(p=pas.System.Copy(p,1,d-2),T=!0):d>=1&&("\n"===p.charAt(d-1)||"\r"===p.charAt(d-1))?(p=pas.System.Copy(p,1,d-1),T=!0):T=!1,c=D(i,{get:function(){return F},set:function(t){F=t}}),S=this.TextWidth(c),f=Math.max(f,this.TextHeight(c)+M),!((e.Left+C+S>e.Right||T)&&(""===p||P||(m=p.length,u=pas.System.Copy(p,1,m),b+=1,C>g&&(g=C),n||B(u,C,f),C=0),p="",P=!1,a&&T||!a?e.Top=e.Top+f:a&&!T&&(P=!0),pas.System.Trunc(e.Top)>pas.System.Trunc(e.Bottom-f+M)&&!n)));)C+=S,c.length>0&&" "===c.charAt(c.length-1)&&(C+=L),p+=c;""!==p&&(m=p.length,u=pas.System.Copy(p,1,m),b+=1,C>g&&(g=C),n||B(u,C,f)),h.$assign(t.CreateCanvasRectF(y.Left,y.Top,y.Left+g,y.Top+b*f))}else S=this.TextWidth(i),f=this.TextHeight(i),n||B(i,S,f),h.$assign(t.CreateCanvasRectF(e.Left,e.Top,e.Left+S,e.Top+f));return h},this.TextWidth=function(t){var e=0,i="";return null!=this.FContext&&(i=this.FFont.ToString(),this.FContext.font=i,e=this.FContext.measureText(t).width),e},this.TextHeight=function(e){return t.FontSizeToPx(this.FFont.FSize)}})),this.ColorToRGB=function(t){return t},this.ColorToHex=function(t){var e="";for(e=t.toString(16);e.length<6;)e="0"+e;return pas.System.Copy(e,5,2)+pas.System.Copy(e,3,2)+pas.System.Copy(e,1,2)},this.ColorToHTML=function(e){return"#"+t.ColorToHex(e)},this.FontSizeToHTML=function(t){var e="";return e=pas.SysUtils.FloatToStr(t)+"px",e=pas.SysUtils.StringReplace(e,",",".",rtl.createSet(0))},this.HexToColor=function(t){var e="",i=0;e="";for(var s=1,n=t.length;s<=n;s++)i=s,(t.charAt(i-1)>="0"&&t.charAt(i-1)<="9"||t.charAt(i-1)>="A"&&t.charAt(i-1)<="F"||t.charAt(i-1)>="a"&&t.charAt(i-1)<="f")&&(e+=t.charAt(i-1));return e="$"+pas.System.Copy(e,5,2)+pas.System.Copy(e,3,2)+pas.System.Copy(e,1,2),pas.SysUtils.StrToInt64(e)},this.FontSizeToPx=function(t){return 96*t/72},this.GetRValue=function(t){return 255&t},this.GetGValue=function(t){return 255&Math.floor(t/256)},this.GetBValue=function(t){return 255&Math.floor(t/65536)},this.CreateCanvasRectF=function(e,i,s,n){var r=t.TCanvasRectF.$new();return r.Left=e,r.Top=i,r.Right=s,r.Bottom=n,r},this.RGB=function(t,e,i){return t|e<<8|i<<16},t.$implcode=function(){rtl.createClass(e,"TGraphicCache",pas.System.TObject,(function(){this.$init=function(){pas.System.TObject.$init.call(this),this.FImage=null,this.FID=""},this.$final=function(){this.FImage=void 0,pas.System.TObject.$final.call(this)},this.Create$1=function(t,e){return this.FImage=t,this.FID=e,this}})),rtl.createClass(e,"TGraphicCacheList",pas.contnrs.TObjectList,(function(){this.Find=function(t,i){var s=!1,n=0,r=null;s=!1;for(var o=0,a=this.GetCount()-1;o<=a;o++)if(n=o,(r=rtl.as(this.GetItem(n),e.TGraphicCache)).FID===t&&null!=r.FImage){i.set(r.FImage),s=!0;break}return s},this.Exists=function(t){var i=!1,s=0,n=null;i=!1;for(var r=0,o=this.GetCount()-1;r<=o;r++)if(s=r,(n=rtl.as(this.GetItem(s),e.TGraphicCache)).FID===t&&null!=n.FImage){i=!0;break}return i}})),e.FCache=null,e.FQueue=null,e.FCacheCount=0,e.MatrixIdentity=function(){var e=t.TMatrix.$new();return e.m11=1,e.m12=0,e.m13=0,e.m21=0,e.m22=1,e.m23=0,e.m31=0,e.m32=0,e.m33=1,e},e.GetPixelRatio=function(t){var e=t.FContext;return(window.devicePixelRatio||1)/(e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1)},e.MatrixCreateScaling=function(i,s){var n=t.TMatrix.$new();return n.$assign(e.MatrixIdentity()),n.m11=i,n.m22=s,n},e.MatrixMultiply=function(e,i){var s=t.TMatrix.$new();return s.m11=e.m11*i.m11+e.m12*i.m21+e.m13*i.m31,s.m12=e.m11*i.m12+e.m12*i.m22+e.m13*i.m32,s.m13=e.m11*i.m13+e.m12*i.m23+e.m13*i.m33,s.m21=e.m21*i.m11+e.m22*i.m21+e.m23*i.m31,s.m22=e.m21*i.m12+e.m22*i.m22+e.m23*i.m32,s.m23=e.m21*i.m13+e.m22*i.m23+e.m23*i.m33,s.m31=e.m31*i.m11+e.m32*i.m21+e.m33*i.m31,s.m32=e.m31*i.m12+e.m32*i.m22+e.m33*i.m32,s.m33=e.m31*i.m13+e.m32*i.m23+e.m33*i.m33,s}},t.$init=function(){e.FCache=e.TGraphicCacheList.$create("Create$2"),e.FQueue=pas.Classes.TStringList.$create("Create$1")}}),["WEBLib.Forms","WEBLib.WebTools","Math","SysUtils","contnrs"]),rtl.module("WEBLib.Lang",["System"],(function(){"use strict";this.TUILanguage={0:"lNone",lNone:0,1:"lAfar",lAfar:1,2:"lAbkhazian",lAbkhazian:2,3:"lAvestan",lAvestan:3,4:"lAfrikaans",lAfrikaans:4,5:"lAkan",lAkan:5,6:"lAmharic",lAmharic:6,7:"lAragonese",lAragonese:7,8:"lArabic",lArabic:8,9:"lAssamese",lAssamese:9,10:"lAvaric",lAvaric:10,11:"lAymara",lAymara:11,12:"lAzerbaijani",lAzerbaijani:12,13:"lBashkir",lBashkir:13,14:"lBelarusian",lBelarusian:14,15:"lBulgarian",lBulgarian:15,16:"lBihari",lBihari:16,17:"lBislama",lBislama:17,18:"lBambara",lBambara:18,19:"lBengali",lBengali:19,20:"lTibetan",lTibetan:20,21:"lBreton",lBreton:21,22:"lBosnian",lBosnian:22,23:"lCatalan",lCatalan:23,24:"lChechen",lChechen:24,25:"lChamorro",lChamorro:25,26:"lCorsican",lCorsican:26,27:"lCree",lCree:27,28:"lCzech",lCzech:28,29:"lOldSlavic",lOldSlavic:29,30:"lChuvash",lChuvash:30,31:"lWelsh",lWelsh:31,32:"lDanish",lDanish:32,33:"lGerman",lGerman:33,34:"lDivehi",lDivehi:34,35:"lDzongkha",lDzongkha:35,36:"lEwe",lEwe:36,37:"lEnglish",lEnglish:37,38:"lEsperanto",lEsperanto:38,39:"lSpanish",lSpanish:39,40:"lEstonian",lEstonian:40,41:"lBasque",lBasque:41,42:"lPersian",lPersian:42,43:"lFulah",lFulah:43,44:"lFinnish",lFinnish:44,45:"lFijian",lFijian:45,46:"lFaroese",lFaroese:46,47:"lFrench",lFrench:47,48:"lWesternFrisian",lWesternFrisian:48,49:"lIrish",lIrish:49,50:"lGaelic",lGaelic:50,51:"lGalician",lGalician:51,52:"lGuarani",lGuarani:52,53:"lGujarati",lGujarati:53,54:"lManx",lManx:54,55:"lHausa",lHausa:55,56:"lHebrew",lHebrew:56,57:"lHindi",lHindi:57,58:"lHiriMotu",lHiriMotu:58,59:"lCroatian",lCroatian:59,60:"lHaitian",lHaitian:60,61:"lHungarian",lHungarian:61,62:"lArmenian",lArmenian:62,63:"lHerero",lHerero:63,64:"lInterlingua",lInterlingua:64,65:"lIndonesian",lIndonesian:65,66:"lInterlingue",lInterlingue:66,67:"lIgbo",lIgbo:67,68:"lSichuanYi",lSichuanYi:68,69:"lInupiaq",lInupiaq:69,70:"lIdo",lIdo:70,71:"lIcelandic",lIcelandic:71,72:"lItalian",lItalian:72,73:"lInuktitut",lInuktitut:73,74:"lJapanese",lJapanese:74,75:"lJavanese",lJavanese:75,76:"lGeorgian",lGeorgian:76,77:"lKongo",lKongo:77,78:"lKikuyu",lKikuyu:78,79:"lKuanyama",lKuanyama:79,80:"lKazakh",lKazakh:80,81:"lKalaallisut",lKalaallisut:81,82:"lCentralKhmer",lCentralKhmer:82,83:"lKannada",lKannada:83,84:"lKorean",lKorean:84,85:"lKanuri",lKanuri:85,86:"lKashmiri",lKashmiri:86,87:"lKurdish",lKurdish:87,88:"lKomi",lKomi:88,89:"lCornish",lCornish:89,90:"lKirghiz",lKirghiz:90,91:"lLatin",lLatin:91,92:"lLuxembourgish",lLuxembourgish:92,93:"lGanda",lGanda:93,94:"lLimburgan",lLimburgan:94,95:"lLingala",lLingala:95,96:"lLao",lLao:96,97:"lLithuanian",lLithuanian:97,98:"lLubaKatanga",lLubaKatanga:98,99:"lLatvian",lLatvian:99,100:"lMalagasy",lMalagasy:100,101:"lMarshallese",lMarshallese:101,102:"lMaori",lMaori:102,103:"lMacedonian",lMacedonian:103,104:"lMalayalam",lMalayalam:104,105:"lMongolian",lMongolian:105,106:"lMarathi",lMarathi:106,107:"lMalay",lMalay:107,108:"lMaltese",lMaltese:108,109:"lBurmese",lBurmese:109,110:"lNauru",lNauru:110,111:"lNdebele",lNdebele:111,112:"lNepali",lNepali:112,113:"lNdonga",lNdonga:113,114:"lDutch",lDutch:114,115:"lNorwegian",lNorwegian:115,116:"lNavajo",lNavajo:116,117:"lChichewa",lChichewa:117,118:"lOccitan",lOccitan:118,119:"lOjibwa",lOjibwa:119,120:"lOromo",lOromo:120,121:"lOriya",lOriya:121,122:"lOssetian",lOssetian:122,123:"lPanjabi",lPanjabi:123,124:"lPali",lPali:124,125:"lPolish",lPolish:125,126:"lPushto",lPushto:126,127:"lPortuguese",lPortuguese:127,128:"lQuechua",lQuechua:128,129:"lRomansh",lRomansh:129,130:"lRundi",lRundi:130,131:"lRomanian",lRomanian:131,132:"lRussian",lRussian:132,133:"lKinyarwanda",lKinyarwanda:133,134:"lSanskrit",lSanskrit:134,135:"lSardinian",lSardinian:135,136:"lSindhi",lSindhi:136,137:"lNorthernSami",lNorthernSami:137,138:"lSango",lSango:138,139:"lSinhala",lSinhala:139,140:"lSlovak",lSlovak:140,141:"lSlovenian",lSlovenian:141,142:"lSamoan",lSamoan:142,143:"lShona",lShona:143,144:"lSomali",lSomali:144,145:"lAlbanian",lAlbanian:145,146:"lSerbian",lSerbian:146,147:"lSwati",lSwati:147,148:"lSotho",lSotho:148,149:"lSundanese",lSundanese:149,150:"lSwedish",lSwedish:150,151:"lSwahili",lSwahili:151,152:"lTamil",lTamil:152,153:"lTelugu",lTelugu:153,154:"lTajik",lTajik:154,155:"lThai",lThai:155,156:"lTigrinya",lTigrinya:156,157:"lTurkmen",lTurkmen:157,158:"lTagalog",lTagalog:158,159:"lTswana",lTswana:159,160:"lTonga",lTonga:160,161:"lTurkish",lTurkish:161,162:"lTsonga",lTsonga:162,163:"lTatar",lTatar:163,164:"lTwi",lTwi:164,165:"lTahitian",lTahitian:165,166:"lUighur",lUighur:166,167:"lUkrainian",lUkrainian:167,168:"lUrdu",lUrdu:168,169:"lUzbek",lUzbek:169,170:"lVenda",lVenda:170,171:"lVietnamese",lVietnamese:171,172:"lWalloon",lWalloon:172,173:"lWolof",lWolof:173,174:"lXhosa",lXhosa:174,175:"lYiddish",lYiddish:175,176:"lYoruba",lYoruba:176,177:"lZhuang",lZhuang:177,178:"lChinese",lChinese:178,179:"lZulu",lZulu:179},this.GetLanguageISO639_1Code=function(t){var e="";return 0===t?e="":1===t?e="aa":2===t?e="ab":3===t?e="ae":4===t?e="af":5===t?e="ak":6===t?e="am":7===t?e="an":8===t?e="ar":9===t?e="as":10===t?e="av":11===t?e="ay":12===t?e="az":13===t?e="ba":14===t?e="be":15===t?e="bg":16===t?e="bh":17===t?e="bi":18===t?e="bm":19===t?e="bn":20===t?e="bo":21===t?e="br":22===t?e="bd":23===t?e="ca":24===t?e="ce":25===t?e="ch":26===t?e="co":27===t?e="cr":28===t?e="cs":29===t?e="cu":30===t?e="cv":31===t?e="cy":32===t?e="da":33===t?e="de":34===t?e="dv":35===t?e="dz":36===t?e="ee":37===t?e="en":38===t?e="eo":39===t?e="es":40===t?e="et":41===t?e="eu":42===t?e="fa":43===t?e="ff":44===t?e="fi":45===t?e="fj":46===t?e="fo":47===t?e="fr":48===t?e="fy":49===t?e="ga":50===t?e="gd":51===t?e="gl":52===t?e="gn":53===t?e="gu":54===t?e="gv":55===t?e="ha":56===t?e="he":57===t?e="hi":58===t?e="ho":59===t?e="hr":60===t?e="ht":61===t?e="hu":62===t?e="hy":63===t?e="hz":64===t?e="ia":65===t?e="id":66===t?e="ie":67===t?e="ig":68===t?e="ii":69===t?e="ik":70===t?e="id":71===t?e="is":72===t?e="it":73===t?e="iu":74===t?e="ja":75===t?e="jv":76===t?e="ka":77===t?e="kg":78===t?e="ki":79===t?e="kj":80===t?e="kk":81===t?e="kl":82===t?e="km":83===t?e="kn":84===t?e="ko":85===t?e="kr":86===t?e="ks":87===t?e="ku":88===t?e="kv":89===t?e="kw":90===t?e="ky":91===t?e="la":92===t?e="lb":93===t?e="lg":94===t?e="li":95===t?e="ln":96===t?e="lo":97===t?e="lt":98===t?e="lu":99===t?e="lv":100===t?e="mg":101===t?e="mh":102===t?e="mi":103===t?e="mk":104===t?e="ml":105===t?e="mn":106===t?e="mr":107===t?e="ms":108===t?e="mt":109===t?e="my":110===t?e="na":111===t?e="nb":112===t?e="nd":113===t?e="ng":114===t?e="nl":115===t?e="no":116===t?e="nv":117===t?e="ny":118===t?e="oc":119===t?e="oj":120===t?e="om":121===t?e="or":122===t?e="os":123===t?e="pa":124===t?e="pi":125===t?e="pl":126===t?e="ps":127===t?e="pt":128===t?e="qu":129===t?e="rm":130===t?e="rn":131===t?e="ro":132===t?e="ru":133===t?e="rw":134===t?e="sa":135===t?e="sc":136===t?e="sd":137===t?e="se":138===t?e="sg":139===t?e="si":140===t?e="sk":141===t?e="sl":142===t?e="sm":143===t?e="sn":144===t?e="so":145===t?e="sq":146===t?e="sr":147===t?e="ss":148===t?e="st":149===t?e="su":150===t?e="sv":151===t?e="sw":152===t?e="ta":153===t?e="te":154===t?e="tg":155===t?e="th":156===t?e="ti":157===t?e="tk":158===t?e="tl":159===t?e="tn":160===t?e="to":161===t?e="tr":162===t?e="ts":163===t?e="tt":164===t?e="tw":165===t?e="ty":166===t?e="ug":167===t?e="uk":168===t?e="ur":169===t?e="uz":170===t?e="ve":171===t?e="vi":172===t?e="wa":173===t?e="wo":174===t?e="xh":175===t?e="yi":176===t?e="yo":177===t?e="za":178===t?e="zh":179===t&&(e="zu"),e}})),rtl.module("Rtl.BrowserLoadHelper",["System","Classes","SysUtils","JS","Web"],(function(){"use strict";var t=this;rtl.createClass(this,"TBrowserLoadHelper",pas.Classes.TLoadHelper,(function(){})),t.$init=function(){pas.Classes.SetLoadHelperClass(t.TBrowserLoadHelper)}})),rtl.module("WEBLib.JSON",["System","Classes","Web","JS","SysUtils"],(function(){"use strict";var t=this;rtl.createClass(this,"TJSONAncestor",pas.System.TObject,(function(){this.GetStrValue=function(){return"",""},this.SetStrValue=function(t){}})),rtl.createClass(this,"TJSONValue",this.TJSONAncestor,(function(){this.$init=function(){t.TJSONAncestor.$init.call(this),this.fjv=void 0,this.fjo=void 0},this.GetStrValue=function(){return""+this.fjv},this.ToString=function(){return JSON.stringify(this.fjv)}})),rtl.createClass(this,"TJSONPair",pas.System.TObject,(function(){this.$init=function(){pas.System.TObject.$init.call(this),this.fjo=void 0,this.fjv=null,this.fjs=null},this.$final=function(){this.fjv=void 0,this.fjs=void 0,pas.System.TObject.$final.call(this)},this.Create$1=function(){return pas.System.TObject.Create.call(this),this.fjs=t.TJSONString.$create("Create"),this},this.Destroy=function(){rtl.free(this,"fjs"),pas.System.TObject.Destroy.call(this)},this.ToString=function(){return t.TJSONObject.isPrototypeOf(this.fjv)?'"'+this.fjs.GetStrValue()+'":'+rtl.as(this.fjv,t.TJSONObject).ToJSON():null!==this.fjs&&null!==this.fjv?'"'+this.fjs.GetStrValue()+'":'+this.fjv.ToString():""}})),rtl.createClass(this,"TJSONPairList",pas.Classes.TList,(function(){})),rtl.createClass(this,"TJSONObject",this.TJSONValue,(function(){this.$init=function(){t.TJSONValue.$init.call(this),this.fjo$1=null,this.FMembers=null},this.$final=function(){this.fjo$1=void 0,this.FMembers=void 0,t.TJSONValue.$final.call(this)},this.GetCount=function(){return null!=this.fjo$1?rtl.length(Object.keys(this.fjo$1)):null!=this.FMembers?this.FMembers.GetCount():0},this.JSONValueFromJS=function(e){var i=null,s=0;return i=null,rtl.isArray(e)?(i=t.TJSONArray.$create("Create$2"),rtl.as(i,t.TJSONArray).fja=e):rtl.isObject(e)?(i=t.TJSONObject.$create("Create$2"),rtl.as(i,t.TJSONObject).fjo$1=e):rtl.isString(e)?(i=t.TJSONString.$create("Create"),rtl.as(i,t.TJSONString).SetStrValue(""+e)):rtl.isNumber(e)?(i=t.TJSONNumber.$create("Create"),rtl.as(i,t.TJSONNumber).SetStrValue(""+e),s=rtl.getNumber(e),rtl.as(i,t.TJSONNumber).FDouble=s,0===pas.System.Frac(s)&&(rtl.as(i,t.TJSONNumber).FInt=rtl.trunc(e))):pas.JS.isNull(e)?i=t.TJSONNull.$create("Create"):pas.JS.isBoolean(e)&&(i=pas.JS.toBoolean(e)?t.TJSONTrue.$create("Create"):t.TJSONFalse.$create("Create")),null==i&&(i=t.TJSONNull.$create("Create")),i.fjv=e,i},this.Create$2=function(){return pas.System.TObject.Create.call(this),this.FMembers=t.TJSONPairList.$create("Create$1"),this.fjo$1=null,this},this.Destroy=function(){rtl.free(this,"FMembers"),pas.System.TObject.Destroy.call(this)},this.ParseJSONValue=function(t){var e;return e=JSON.parse(t),this.JSONValueFromJS(e)},this.Get=function(e){var i=null,s=void 0,n=null,r=0,o=null;if(i=null,null!=this.fjo$1)null!=(s=this.fjo$1[e])&&(i=t.TJSONPair.$create("Create$1"),n=this.$class.JSONValueFromJS(s),i.fjo=this.fjo$1,i.fjs.SetStrValue(e),i.fjv=n);else for(var a=0,l=this.FMembers.GetCount()-1;a<=l;a++)r=a,(o=rtl.getObject(this.FMembers.Get(r))).fjs.ToString()==='"'+e+'"'&&(i=o);return i},this.Get$1=function(t){return this.Get(Object.keys(this.fjo$1)[t])},this.GetValue$1=function(t){var e,i=null;return i=null,null!=(e=this.Get(t))&&((i=e.fjv).fjo=e.fjo),i},this.ToJSON=function(){var e="",i="",s=0,n=0,r=null;if(s=null!=this.fjo$1?this.GetCount():this.FMembers.GetCount(),t.TJSONArray.isPrototypeOf(this))e=rtl.as(this,t.TJSONArray).ToString();else{i="{",s>0&&(null!=this.fjo$1?null!=(r=this.Get$1(0))?i+=r.ToString():i=i+'"'+Object.keys(this.fjo$1)[0]+'":null':i+=rtl.getObject(this.FMembers.Get(0)).ToString());for(var o=1,a=s-1;o<=a;o++)n=o,i=null!=this.fjo$1?null!=(r=this.Get$1(n))?i+","+r.ToString():i+',"'+Object.keys(this.fjo$1)[n]+'":null':i+","+rtl.getObject(this.FMembers.Get(n)).ToString();e=i+="}"}return e},this.ToString=function(){return this.ToJSON()}})),rtl.createClass(this,"TJSONString",this.TJSONValue,(function(){this.$init=function(){t.TJSONValue.$init.call(this),this.FValue=""},this.GetStrValue=function(){return this.FValue},this.SetStrValue=function(t){if(this.FValue=t,this.fjv=t,pas.System.Assigned(this.fjo)){var e=Object.keys(this.fjo)[0];this.fjo[e]=t}}})),rtl.createClass(this,"TJSONNumber",this.TJSONString,(function(){this.$init=function(){t.TJSONString.$init.call(this),this.FInt=0,this.FDouble=0},this.GetStrValue=function(){return pas.SysUtils.FloatToStr(this.FDouble)},this.SetStrValue=function(t){this.FDouble=pas.SysUtils.StrToFloat(t),0===pas.System.Frac(this.FDouble)?(pas.SysUtils.TryStrToInt(t,{p:this,get:function(){return this.p.FInt},set:function(t){this.p.FInt=t}})||(this.FInt=0),this.fjv=this.FInt):this.fjv=this.FDouble}})),rtl.createClass(this,"TJSONTrue",this.TJSONValue,(function(){this.GetStrValue=function(){return"true","true"},this.ToString=function(){return this.GetStrValue()}})),rtl.createClass(this,"TJSONFalse",this.TJSONValue,(function(){this.GetStrValue=function(){return"false","false"},this.ToString=function(){return this.GetStrValue()}})),rtl.createClass(this,"TJSONNull",this.TJSONValue,(function(){this.GetStrValue=function(){return"null","null"},this.ToString=function(){return this.GetStrValue()}})),rtl.createClass(this,"TJSONArray",this.TJSONObject,(function(){this.$init=function(){t.TJSONObject.$init.call(this),this.fja=null},this.$final=function(){this.fja=void 0,t.TJSONObject.$final.call(this)},this.GetItem$1=function(e){var i;return i=this.GetJA()[e],rtl.isExt(i,t.TJSONObject,1)||rtl.isExt(i,t.TJSONArray,1)?rtl.getObject(i):this.$class.JSONValueFromJS(i)},this.GetCount$1=function(){return this.GetJA().length},this.GetJA=function(){return null==this.fja&&(this.fja=new Array),this.fja},this.ToString=function(){var e="",i=0,s=null,n="";e="[",n="";for(var r=0,o=this.GetCount$1()-1;r<=o;r++)i=r,null!=(s=this.GetItem$1(i))&&(e=t.TJSONObject.isPrototypeOf(s)?e+n+rtl.as(s,t.TJSONObject).ToString():e+n+s.ToString(),n=",");return e+="]"}}))})),rtl.module("WEBLib.Forms",["System","Classes","Types","SysUtils","WEBLib.Graphics","WEBLib.Controls","WEBLib.Lang","WEBLib.Menus","Web","JS","Rtl.BrowserLoadHelper"],(function(){"use strict";var t=this,e=t.$impl;this.idOK=1,this.idCancel=2,this.idAbort=3,this.idRetry=4,this.idIgnore=5,this.idYes=6,this.idNo=7,this.idClose=8,this.idHelp=9,this.idContinue=11,this.mrNone=0,this.mrOk=1,this.mrCancel=2,this.mrAbort=3,this.mrRetry=4,this.mrIgnore=5,this.mrYes=6,this.mrNo=7,this.mrClose=8,this.mrHelp=9,this.mrContinue=11,this.mrAll=12,this.mrNoToAll=13,this.mrYesToAll=14,this.rgiFirst=-1024,this.igiLast=511,this.clTMSBlue=14917120,this.$rtti.$Int("TConstraintSize",{minvalue:0,maxvalue:2147483647,ordtype:5}),this.TCloseAction={0:"caNone",caNone:0,1:"caHide",caHide:1,2:"caFree",caFree:2,3:"caMinimize",caMinimize:3},this.$rtti.$Enum("TCloseAction",{minvalue:0,maxvalue:3,ordtype:1,enumtype:this.TCloseAction}),this.TFormStyle={0:"fsNormal",fsNormal:0,1:"fsStayOnTop",fsStayOnTop:1},this.$rtti.$Enum("TFormStyle",{minvalue:0,maxvalue:1,ordtype:1,enumtype:this.TFormStyle}),this.$rtti.$Int("TGestureID",{minvalue:-1024,maxvalue:511,ordtype:2}),this.TInteractiveGestureFlag={0:"gfBegin",gfBegin:0,1:"gfInertia",gfInertia:1,2:"gfEnd",gfEnd:2},this.$rtti.$Enum("TInteractiveGestureFlag",{minvalue:0,maxvalue:2,ordtype:1,enumtype:this.TInteractiveGestureFlag}),this.$rtti.$Set("TInteractiveGestureFlags",{comptype:this.$rtti.TInteractiveGestureFlag}),this.TMouseActivate={0:"maDefault",maDefault:0,1:"maActivate",maActivate:1,2:"maActivateAndEat",maActivateAndEat:2,3:"maNoActivate",maNoActivate:3,4:"maNoActivateAndEat",maNoActivateAndEat:4},this.$rtti.$Enum("TMouseActivate",{minvalue:0,maxvalue:4,ordtype:1,enumtype:this.TMouseActivate}),this.TScreenOrientation={0:"soPortrait",soPortrait:0,1:"soLandscape",soLandscape:1},this.$rtti.$Enum("TScreenOrientation",{minvalue:0,maxvalue:1,ordtype:1,enumtype:this.TScreenOrientation}),this.TApplicationColorScheme={0:"csNoScheme",csNoScheme:0,1:"csLight",csLight:1,2:"csDark",csDark:2},rtl.recNewT(this,"TSmallPoint",(function(){this.x=0,this.y=0,this.$eq=function(t){return this.x===t.x&&this.y===t.y},this.$assign=function(t){return this.x=t.x,this.y=t.y,this};var e=t.$rtti.$Record("TSmallPoint",{});e.addField("x",rtl.smallint),e.addField("y",rtl.smallint)})),rtl.recNewT(this,"TAlignInfo",(function(){this.AlignList=null,this.ControlIndex=0,this.Align=0,this.Scratch=0,this.$eq=function(t){return this.AlignList===t.AlignList&&this.ControlIndex===t.ControlIndex&&this.Align===t.Align&&this.Scratch===t.Scratch},this.$assign=function(t){return this.AlignList=t.AlignList,this.ControlIndex=t.ControlIndex,this.Align=t.Align,this.Scratch=t.Scratch,this};var e=t.$rtti.$Record("TAlignInfo",{});e.addField("AlignList",pas.Classes.$rtti.TList),e.addField("ControlIndex",rtl.longint),e.addField("Align",pas["WEBLib.Controls"].$rtti.TAlign),e.addField("Scratch",rtl.longint)})),rtl.recNewT(this,"TGestureEventInfo",(function(){this.GestureID=0,this.Angle=0,this.Distance=0,this.$new=function(){var e=Object.create(this);return e.Location=pas.Types.TPoint.$new(),e.Flags={},e.InertiaVector=t.TSmallPoint.$new(),e.TapLocation=t.TSmallPoint.$new(),e},this.$eq=function(t){return this.GestureID===t.GestureID&&this.Location.$eq(t.Location)&&rtl.eqSet(this.Flags,t.Flags)&&this.Angle===t.Angle&&this.InertiaVector.$eq(t.InertiaVector)&&this.Distance===t.Distance&&this.TapLocation.$eq(t.TapLocation)},this.$assign=function(t){return this.GestureID=t.GestureID,this.Location.$assign(t.Location),this.Flags=rtl.refSet(t.Flags),this.Angle=t.Angle,this.InertiaVector.$assign(t.InertiaVector),this.Distance=t.Distance,this.TapLocation.$assign(t.TapLocation),this};var e=t.$rtti.$Record("TGestureEventInfo",{});e.addField("GestureID",t.$rtti.TGestureID),e.addField("Location",pas.Types.$rtti.TPoint),e.addField("Flags",t.$rtti.TInteractiveGestureFlags),e.addField("Angle",rtl.double),e.addField("InertiaVector",t.$rtti.TSmallPoint),e.addField("Distance",rtl.longint),e.addField("TapLocation",t.$rtti.TSmallPoint)})),this.$rtti.$MethodVar("TCloseEvent",{procsig:rtl.newTIProcSig([["Sender",pas.System.$rtti.TObject],["Action",this.$rtti.TCloseAction,1]]),methodkind:0}),this.$rtti.$MethodVar("TCloseQueryEvent",{procsig:rtl.newTIProcSig([["Sender",pas.System.$rtti.TObject],["CanClose",rtl.boolean,1]]),methodkind:0}),this.$rtti.$MethodVar("TOrientationChangeEvent",{procsig:rtl.newTIProcSig([["Sender",pas.System.$rtti.TObject],["AOrientation",this.$rtti.TScreenOrientation]]),methodkind:0}),this.$rtti.$MethodVar("TBeforeUnloadEvent",{procsig:rtl.newTIProcSig([["Sender",pas.System.$rtti.TObject],["AMessage",rtl.string,1]]),methodkind:0}),this.$rtti.$MethodVar("TAlignInsertBeforeEvent",{procsig:rtl.newTIProcSig([["Sender",pas["WEBLib.Controls"].$rtti.TWinControl],["C1",pas["WEBLib.Controls"].$rtti.TControl],["C2",pas["WEBLib.Controls"].$rtti.TControl]],rtl.boolean),methodkind:1}),this.$rtti.$MethodVar("TAlignPositionEvent",{procsig:rtl.newTIProcSig([["Sender",pas["WEBLib.Controls"].$rtti.TWinControl],["Control",pas["WEBLib.Controls"].$rtti.TControl],["NewLeft",rtl.longint,1],["NewTop",rtl.longint,1],["NewWidth",rtl.longint,1],["NewHeight",rtl.longint,1],["AlignRect",pas.Types.$rtti.TRect,1],["AlignInfo",this.$rtti.TAlignInfo]]),methodkind:0}),this.$rtti.$MethodVar("TCanResizeEvent",{procsig:rtl.newTIProcSig([["Sender",pas.System.$rtti.TObject],["NewWidth",rtl.longint,1],["NewHeight",rtl.longint,1],["Resize",rtl.boolean,1]]),methodkind:0}),this.$rtti.$MethodVar("TConstrainedResizeEvent",{procsig:rtl.newTIProcSig([["Sender",pas.System.$rtti.TObject],["MinWidth",rtl.longint,1],["MinHeight",rtl.longint,1],["MaxWidth",rtl.longint,1],["MaxHeight",rtl.longint,1]]),methodkind:0}),this.$rtti.$MethodVar("TContextPopupEvent",{procsig:rtl.newTIProcSig([["Sender",pas.System.$rtti.TObject],["MousePos",pas.Types.$rtti.TPoint],["Handled",rtl.boolean,1]]),methodkind:0}),this.$rtti.$MethodVar("TDockDropEvent",{procsig:rtl.newTIProcSig([["Sender",pas.System.$rtti.TObject],["Source",this.$rtti.TDragDockObject],["X",rtl.longint],["Y",rtl.longint]]),methodkind:0}),this.$rtti.$MethodVar("TDockOverEvent",{procsig:rtl.newTIProcSig([["Sender",pas.System.$rtti.TObject],["Source",this.$rtti.TDragDockObject],["X",rtl.longint],["Y",rtl.longint],["State",pas["WEBLib.Controls"].$rtti.TDragState],["Accept",rtl.boolean,1]]),methodkind:0}),this.$rtti.$MethodVar("TGestureEvent",{procsig:rtl.newTIProcSig([["Sender",pas.System.$rtti.TObject],["EventInfo",this.$rtti.TGestureEventInfo,2],["Handled",rtl.boolean,1]]),methodkind:0}),this.$rtti.$MethodVar("TGetSiteInfoEvent",{procsig:rtl.newTIProcSig([["Sender",pas.System.$rtti.TObject],["DockClient",pas["WEBLib.Controls"].$rtti.TControl],["InfluenceRect",pas.Types.$rtti.TRect,1],["MousePos",pas.Types.$rtti.TPoint],["CanDock",rtl.boolean,1]]),methodkind:0}),this.$rtti.$MethodVar("TMouseActivateEvent",{procsig:rtl.newTIProcSig([["Sender",pas.System.$rtti.TObject],["Button",pas["WEBLib.Controls"].$rtti.TMouseButton],["Shift",pas.Classes.$rtti.TShiftState],["X",rtl.longint],["Y",rtl.longint],["HitTest",rtl.longint],["MouseActivate",this.$rtti.TMouseActivate,1]]),methodkind:0}),this.$rtti.$MethodVar("TMouseWheelUpDownEvent",{procsig:rtl.newTIProcSig([["Sender",pas.System.$rtti.TObject],["Shift",pas.Classes.$rtti.TShiftState],["MousePos",pas.Types.$rtti.TPoint],["Handled",rtl.boolean,1]]),methodkind:0}),this.$rtti.$MethodVar("TStartDockEvent",{procsig:rtl.newTIProcSig([["Sender",pas.System.$rtti.TObject],["DragObject",this.$rtti.TDragDockObject,1]]),methodkind:0}),this.$rtti.$MethodVar("TUnDockEvent",{procsig:rtl.newTIProcSig([["Sender",pas.System.$rtti.TObject],["Client",pas["WEBLib.Controls"].$rtti.TControl],["NewTarget",pas["WEBLib.Controls"].$rtti.TWinControl],["Allow",rtl.boolean,1]]),methodkind:0}),this.$rtti.$MethodVar("THashChangeEvent",{procsig:rtl.newTIProcSig([["Sender",pas.System.$rtti.TObject],["oldURL",rtl.string],["newURL",rtl.string]]),methodkind:0}),this.TPopupMode={0:"pmNone",pmNone:0,1:"pmAuto",pmAuto:1,2:"pmExplicit",pmExplicit:2},this.TPopupClose={0:"pcOnDeactivate",pcOnDeactivate:0,1:"pcNever",pcNever:1},this.TPosition={0:"poDesigned",poDesigned:0,1:"poDefault",poDefault:1,2:"poDefaultPosOnly",poDefaultPosOnly:2,3:"poDefaultSizeOnly",poDefaultSizeOnly:3,4:"poScreenCenter",poScreenCenter:4,5:"poDesktopCenter",poDesktopCenter:5,6:"poMainFormCenter",poMainFormCenter:6,7:"poOwnerFormCenter",poOwnerFormCenter:7},this.TApplicationErrorType={0:"aeSilent",aeSilent:0,1:"aeDialog",aeDialog:1,2:"aeAlert",aeAlert:2,3:"aeFooter",aeFooter:3},this.TFormBorderStyle={0:"fbNone",fbNone:0,1:"fbSingle",fbSingle:1,2:"fbSizeable",fbSizeable:2,3:"fbDialog",fbDialog:3,4:"fbDialogSizeable",fbDialogSizeable:4},this.TCSSLibrary={0:"cssNone",cssNone:0,1:"cssBootstrap",cssBootstrap:1},this.$rtti.$Enum("TCSSLibrary",{minvalue:0,maxvalue:1,ordtype:1,enumtype:this.TCSSLibrary}),rtl.createClass(this,"TCustomSizeConstraints",pas.Classes.TPersistent,(function(){this.$init=function(){pas.Classes.TPersistent.$init.call(this),this.FControl=null,this.FMaxHeight=0,this.FMaxWidth=0,this.FMinHeight=0,this.FMinWidth=0,this.FOnChange=null},this.$final=function(){this.FControl=void 0,this.FOnChange=void 0,pas.Classes.TPersistent.$final.call(this)},this.SetConstraints=function(t,e){var i=t;0===i?e!==this.FMaxHeight&&(this.FMaxHeight=e,e>0&&e<this.FMinHeight&&(this.FMinHeight=e),this.Change()):1===i?e!==this.FMaxWidth&&(this.FMaxWidth=e,e>0&&e<this.FMinWidth&&(this.FMinWidth=e),this.Change()):2===i?e!==this.FMinHeight&&(this.FMinHeight=e,this.FMaxHeight>0&&e>this.FMaxHeight&&(this.FMaxHeight=e),this.Change()):3===i&&e!==this.FMinWidth&&(this.FMinWidth=e,this.FMaxWidth>0&&e>this.FMaxWidth&&(this.FMaxWidth=e),this.Change())},this.Change=function(){null!=this.FOnChange&&this.FOnChange(this)},this.AssignTo=function(e){t.TCustomSizeConstraints.isPrototypeOf(e)?(e.FMinHeight=this.FMinHeight,e.FMaxHeight=this.FMaxHeight,e.FMinWidth=this.FMinWidth,e.FMaxWidth=this.FMaxWidth,e.Change()):pas.Classes.TPersistent.AssignTo.call(this,e)},this.Create$1=function(t){return pas.System.TObject.Create.call(this),this.FControl=t,this}})),rtl.createClass(this,"TSizeConstraints",this.TCustomSizeConstraints,(function(){var e=this.$rtti;e.addProperty("MaxHeight",18,t.$rtti.TConstraintSize,"FMaxHeight","SetConstraints",{index:0,Default:0}),e.addProperty("MaxWidth",18,t.$rtti.TConstraintSize,"FMaxWidth","SetConstraints",{index:1,Default:0}),e.addProperty("MinHeight",18,t.$rtti.TConstraintSize,"FMinHeight","SetConstraints",{index:2,Default:0}),e.addProperty("MinWidth",18,t.$rtti.TConstraintSize,"FMinWidth","SetConstraints",{index:3,Default:0})})),rtl.createClass(this,"TDragDockObject",pas.System.TObject,(function(){this.$init=function(){pas.System.TObject.$init.call(this),this.FBrush=null},this.$final=function(){this.FBrush=void 0,pas.System.TObject.$final.call(this)},this.Destroy=function(){rtl.free(this,"FBrush"),pas.System.TObject.Destroy.call(this)}})),rtl.createClass(this,"TCustomForm",pas["WEBLib.Controls"].TWinControl,(function(){this.$init=function(){pas["WEBLib.Controls"].TWinControl.$init.call(this),this.FDesignContainer=null,this.FLayer$1=null,this.FPopup=!1,this.FPopupElement=null,this.FFormFileName="",this.FFormContainer="",this.FFormElement="",this.FFormStyle=0,this.FOnCreate=null,this.FOnShow=null,this.FModalResult=0,this.FOnPaint=null,this.FOnDeactivate=null,this.FOnCloseQuery=null,this.FOnClose=null,this.FModalProc=null,this.FCreatedProc=null,this.FCaption="",this.FIsResizing$1=!1,this.FOnScroll=null,this.FOnUnload=null,this.FOnBeforeUnload=null,this.FPopupMode=0,this.FPopupClose=0,this.FPosition=0,this.FMdx=0,this.FMdy=0,this.FDlgX=0,this.FDlgY=0,this.FCaptured$1=!1,this.FDown=!1,this.FHasCaption=!1,this.FMoveSpan=null,this.FCaptionElement=null,this.FCaptionCloseElement=null,this.FBorder=0,this.FShadow=!1,this.FTimerID=0,this.FOrigWidth=0,this.FOrigHeight=0,this.FOldWidth=0,this.FOldHeight=0,this.FOnDestroy=null,this.FPopupOpacity=0,this.FCreating=!1,this.FLoadedPtr=null,this.FDOMContentLoadedPtr=null,this.FUnloadPtr=null,this.FBeforeUnloadPtr=null,this.FResizePtr=null,this.FScrollPtr=null,this.FDocMouseUpPtr=null,this.FDocMouseMovePtr=null,this.FTitleDownPtr=null,this.FDoClickPtr=null,this.FKeyDownPtr$1=null,this.FOrientationChangePtr=null,this.FHashChangePtr=null,this.FCSSLibrary=0,this.FNoHTML=!1,this.FPrevActiveForm=null,this.FElementCaptionClassName="",this.FMenu=null,this.FResizeObserver=null,this.FOnOrientationChange=null,this.FOnDOMContentLoaded=null,this.FShowClose=!1,this.FOnHashChange=null},this.$final=function(){this.FDesignContainer=void 0,this.FLayer$1=void 0,this.FPopupElement=void 0,this.FOnCreate=void 0,this.FOnShow=void 0,this.FOnPaint=void 0,this.FOnDeactivate=void 0,this.FOnCloseQuery=void 0,this.FOnClose=void 0,this.FModalProc=void 0,this.FCreatedProc=void 0,this.FOnScroll=void 0,this.FOnUnload=void 0,this.FOnBeforeUnload=void 0,this.FMoveSpan=void 0,this.FCaptionElement=void 0,this.FCaptionCloseElement=void 0,this.FOnDestroy=void 0,this.FPrevActiveForm=void 0,this.FMenu=void 0,this.FResizeObserver=void 0,this.FOnOrientationChange=void 0,this.FOnDOMContentLoaded=void 0,this.FOnHashChange=void 0,pas["WEBLib.Controls"].TWinControl.$final.call(this)},this.SetModalResult=function(t){this.FModalResult=t,0!==this.FModalResult&&this.Close()},this.GetFormStyle=function(){return this.FFormStyle},this.SetFormStyle=function(t){this.FFormStyle=t},this.SetCaption=function(t){this.FCaption!==t&&(this.FCaption=t,this.UpdateElement())},this.SetShadow=function(t){this.FShadow!==t&&(this.FShadow=t,this.UpdateElement())},this.SetFormContainer=function(t){var e,i=null,s=0;if(e=this.GetContainer(),4 in this.FComponentState?this.FFormContainer=t:"BODY"===pas.SysUtils.UpperCase(t)?this.FFormContainer="":this.FFormContainer=t,(!(0 in this.FComponentState)||4 in this.FComponentState)&&(null!=this.FLayer$1?i=this.FLayer$1:(""===t||null==(i=document.getElementById(t)))&&(i=document.body),null!=i&&(this.FContainer=i,null!=e)))for(var n=0,r=this.GetControlsCount()-1;n<=r;n++)s=n,this.GetControls(s).FParentElement===e&&(this.GetControls(s).FParentElement=i),null!=this.GetControls(s).GetElementHandle()&&this.GetControls(s).GetElementHandle().parentElement===e&&i.appendChild(this.GetControls(s).GetElementHandle())},this.SetWidth=function(t){var e=null;0 in this.FComponentState&&""!==this.FFormContainer||!this.FPopup&&null==this.GetElementHandle()?this.SetWidthInt(t):(pas["WEBLib.Controls"].TControl.SetWidth.apply(this,arguments),this.FPopup&&null!=(e=this.FPopupElement)&&e.style.setProperty("width",pas.SysUtils.IntToStr(t)+"px"))},this.SetHeight=function(t){var e=null;0 in this.FComponentState&&""!==this.FFormContainer||!this.FPopup&&null==this.GetElementHandle()?this.SetHeightInt(t):(pas["WEBLib.Controls"].TControl.SetHeight.apply(this,arguments),this.FPopup&&null!=(e=this.FPopupElement)&&e.style.setProperty("height",pas.SysUtils.IntToStr(t)+"px"))},this.HandleHashChange=function(t){var e,i;return e=t.oldURL,i=t.newURL,null!=this.FOnHashChange&&this.FOnHashChange(this,e,i),!0,!0},this.HandleLoaded=function(t){return this.Resize$1(),this.InitAnchoring(),!0,!0},this.HandleDOMContentLoaded=function(t){return null!=this.FOnDOMContentLoaded&&this.FOnDOMContentLoaded(this),!0,!0},this.HandleScroll=function(t){return null!=this.FOnScroll&&this.FOnScroll(this),!0,!0},this.HandleUnload=function(t){return null!=this.FOnUnload&&this.FOnUnload(this),!0,!0},this.HandleBeforeUnload=function(t){var e="";return e="",null!=this.FOnBeforeUnload&&this.FOnBeforeUnload(this,{get:function(){return e},set:function(t){e=t}}),""!==e?(t.returnValue=e,e):(!0,!0)},this.HandleObserver=function(){return this.Resize$1(),!0,!0},this.HandleResize=function(t){return this.FVisible&&(null==this.GetContainer()&&this.CreateControl(),this.Resize$1()),!0,!0},this.HandleDocMouseMove=function(t){var e=0,i=0,s=null,n=0,r=0;return this.FDown&&(e=t.screenX-this.FMdx,i=t.screenY-this.FMdy,(s=this.FHasCaption&&""!==this.FFormFileName?this.GetContainer().parentNode:this.GetContainer()).style.setProperty("transform",""),s.style.setProperty("position","absolute"),n=Math.round(this.FDlgX+e),r=Math.round(this.FDlgY+i),s.style.setProperty("left",pas.SysUtils.IntToStr(n)+"px"),s.style.setProperty("top",pas.SysUtils.IntToStr(r)+"px"),this.FLeft=n,this.FTop=r),!0,!0},this.HandleDocMouseUp=function(t){return this.FDown&&(this.FCaptured$1=!1,this.FDown=!1,document.body.removeEventListener("mousemove",this.FDocMouseMovePtr),document.body.removeEventListener("mouseup",this.FDocMouseUpPtr),null!=this.FMoveSpan&&document.body.removeChild(this.FMoveSpan),this.FEventStopPropagation=rtl.unionSet(this.FEventStopPropagation,rtl.createSet(3,2)),this.FMoveSpan=null),!0,!0},this.HandleTitleDown=function(t){var e=null;return t.stopPropagation(),t.preventDefault(),this.FPopupClose=1,this.FMdx=Math.round(t.screenX),this.FMdy=Math.round(t.screenY),e=this.FHasCaption&&""!==this.FFormFileName?this.GetContainer().parentNode.getBoundingClientRect():this.GetContainer().getBoundingClientRect(),this.FDlgX=Math.round(pas.System.Int(e.left)),this.FDlgY=Math.round(pas.System.Int(e.top)),this.FDown=!0,this.FCaptured$1||(this.FCaptured$1=!0,this.FMoveSpan=document.createElement("SPAN"),this.FMoveSpan.style.setProperty("top","0"),this.FMoveSpan.style.setProperty("left","0"),this.FMoveSpan.style.setProperty("right","0"),this.FMoveSpan.style.setProperty("bottom","0"),this.FMoveSpan.style.setProperty("position","absolute"),document.body.appendChild(this.FMoveSpan),this.FEventStopPropagation=rtl.diffSet(this.FEventStopPropagation,rtl.createSet(3,2)),document.body.addEventListener("mousemove",this.FDocMouseMovePtr),document.body.addEventListener("mouseup",this.FDocMouseUpPtr)),!0,!0},this.HandleCloseClick=function(t){var e=!1;return e=!0,null!=this.FOnCloseQuery&&this.FOnCloseQuery(this,{get:function(){return e},set:function(t){e=t}}),e&&this.Close(),!0,!0},this.SetLeft=function(t){var e=null;pas["WEBLib.Controls"].TControl.SetLeft.apply(this,arguments),this.FPopup&&null!=(e=this.FPopupElement)&&e.style.setProperty("left",pas.SysUtils.IntToStr(t)+"px")},this.SetTop=function(t){var e=null;pas["WEBLib.Controls"].TControl.SetTop.apply(this,arguments),this.FPopup&&null!=(e=this.FPopupElement)&&e.style.setProperty("top",pas.SysUtils.IntToStr(t)+"px")},this.ClearMethodPointers=function(){pas["WEBLib.Controls"].TControl.ClearMethodPointers.call(this),this.FLoadedPtr=null,this.FDOMContentLoadedPtr=null,this.FUnloadPtr=null,this.FBeforeUnloadPtr=null,this.FResizePtr=null,this.FScrollPtr=null,this.FDocMouseUpPtr=null,this.FDocMouseMovePtr=null,this.FTitleDownPtr=null,this.FDoClickPtr=null,this.FKeyDownPtr$1=null,this.FOrientationChangePtr=null,this.FHashChangePtr=null},this.GetMethodPointers=function(){pas["WEBLib.Controls"].TControl.GetMethodPointers.call(this),null===this.FLoadedPtr&&(this.FLoadedPtr=rtl.createCallback(this,"HandleLoaded"),this.FDOMContentLoadedPtr=rtl.createCallback(this,"HandleDOMContentLoaded"),this.FUnloadPtr=rtl.createCallback(this,"HandleUnload"),this.FBeforeUnloadPtr=rtl.createCallback(this,"HandleBeforeUnload"),this.FResizePtr=rtl.createCallback(this,"HandleResize"),this.FScrollPtr=rtl.createCallback(this,"HandleScroll"),this.FDocMouseUpPtr=rtl.createCallback(this,"HandleDocMouseUp"),this.FDocMouseMovePtr=rtl.createCallback(this,"HandleDocMouseMove"),this.FTitleDownPtr=rtl.createCallback(this,"HandleTitleDown"),this.FDoClickPtr=rtl.createCallback(this,"HandleDoClick$1"),this.FKeyDownPtr$1=rtl.createCallback(this,"HandleKeyDown"),this.FOrientationChangePtr=rtl.createCallback(this,"HandleOrientationChange"),this.FHashChangePtr=rtl.createCallback(this,"HandleHashChange"))},this.VisibleChanged=function(){pas["WEBLib.Controls"].TControl.VisibleChanged.call(this),null!=this.FLayer$1?this.FVisible?this.FLayer$1.style.setProperty("display",""):this.FLayer$1.style.setProperty("display","none"):null!=this.GetContainer()&&""!==this.FFormContainer&&(this.FVisible?this.GetContainer().style.setProperty("display",""):this.GetContainer().style.setProperty("display","none"))},this.Resize$1=function(){var t=0,e=0,i=0,s=0,n=null;if(!(3 in this.FComponentState)&&(this.FIsResizing$1=!0,this.FPopup&&null!=this.FPopupElement?(n=this.FPopupElement.getBoundingClientRect(),i=Math.round(n.right-n.left-2),this.FBorder in rtl.createSet(3,4)?(e=this.GetCaptionHeight(),s=Math.round(n.bottom-n.top-e-2)):s=Math.round(n.bottom-n.top-2)):(i=window.innerWidth,s=window.innerHeight),this.UpdateControlSize(i,s),pas["WEBLib.Controls"].IsAndroid()&&"INPUT"===document.activeElement.tagName||this.AlignControl(this),this.DoResize(),this.FIsResizing$1=!1,!this.IsUpdating())){-1===this.FOrigRect.Left&&-1===this.FOrigRect.Top&&this.InitAnchoring();for(var r=0,o=this.GetControlsCount()-1;r<=o;r++)t=r,this.GetControls(t).UpdateAnchoring()}},this.CreateControl=function(){(this.FVisible||this.FPopup)&&(pas["WEBLib.Controls"].TControl.CreateControl.call(this),this.UpdateSize())},this.DoClose=function(t){null!=this.FModalProc&&0!==t.get()&&(this.FModalProc(this.FModalResult),this.FModalProc=null)},this.BindEvents=function(){pas["WEBLib.Controls"].TControl.BindEvents.call(this),"loading"!==document.readyState&&null!=this.FOnDOMContentLoaded&&this.FOnDOMContentLoaded(this),window.addEventListener("resize",this.FResizePtr),window.addEventListener("load",this.FLoadedPtr),window.addEventListener("DOMContentLoaded",this.FDOMContentLoadedPtr),document.addEventListener("scroll",this.FScrollPtr),window.addEventListener("unload",this.FUnloadPtr),window.addEventListener("beforeunload",this.FBeforeUnloadPtr),window.addEventListener("keydown",this.FKeyDownPtr$1),window.addEventListener("orientationchange",this.FOrientationChangePtr),window.addEventListener("hashchange",this.FHashChangePtr)},this.UnbindEvents=function(){pas["WEBLib.Controls"].TControl.UnbindEvents.call(this),null!=this.FLayer$1&&0===this.FPopupClose&&this.FLayer$1.removeEventListener("click",this.FDoClickPtr),null!=this.FResizeObserver&&this.FResizeObserver.disconnect(),window.removeEventListener("resize",this.FResizePtr),window.removeEventListener("load",this.FLoadedPtr),window.removeEventListener("DOMContentLoaded",this.FDOMContentLoadedPtr),document.removeEventListener("scroll",this.FScrollPtr),window.removeEventListener("unload",this.FUnloadPtr),window.removeEventListener("beforeunload",this.FBeforeUnloadPtr),window.removeEventListener("keydown",this.FKeyDownPtr$1),window.removeEventListener("orientationchange",this.FOrientationChangePtr),window.removeEventListener("hashchange",this.FHashChangePtr)},this.DoCreate=function(){this.BeginUpdate(),this.LoadDFMValues(),this.Loaded(),null!=this.FOnCreate&&this.FOnCreate(this),this.FCreating=!1,this.EndUpdate(),this.UpdateChildren(this),this.Realign(),this.DoResize()},this.Realign=function(){var t=null,e=null,i=pas.Types.TRect.$new();""!==this.FFormContainer&&0!==this.FAlign&&null!=(t=document.getElementById(this.FFormContainer))&&(0===(e=t.getBoundingClientRect()).width&&0===e.height&&"absolute"===t.style.getPropertyValue("position")?i.$assign(pas["WEBLib.Controls"].GetHTMLElementAbsoluteRect(t)):i.$assign(pas.Types.Rect(Math.round(e.left),Math.round(e.top),Math.round(e.right),Math.round(e.bottom))),this.SetBoundsInt(i.Left,i.Top,i.Right-i.Left,i.Bottom-i.Top)),pas["WEBLib.Controls"].TControl.Realign.call(this)},this.DoResize=function(){var t,e;t=this.GetWidth(),e=this.GetHeight(),t===this.FOldWidth&&e===this.FOldHeight||(this.FOldWidth=t,this.FOldHeight=e,null!=this.FOnResize&&this.FOnResize(this))},this.DoShow=function(){null!=this.FOnShow&&this.FOnShow(this)},this.HandleDoClick$1=function(t){return t.stopPropagation(),0===this.FPopupClose&&this.Close(),!0,!0},this.HandleKeyDown=function(t){var e,i=!1;return e=this.GetKeyCode(t.key,!0),pas.System.Assigned(e)?(27===e&&!(4 in this.FComponentState)&&this.FPopup&&this.Close(),i=!0):i},this.HandleOrientationChange=function(t){var e=0;(this.Resize$1(),this.Realign(),!0,null!=this.FOnOrientationChange)&&(e=window.matchMedia("(orientation: portrait)").matches?1:0,this.FOnOrientationChange(this,e));return null!=this.FOnResize&&this.FOnResize(this),!0},this.HandleDoResize=function(){var t,e,i=null;i=this.GetContainer().getBoundingClientRect(),t=Math.round(i.right-i.left),e=Math.round(i.bottom-i.top),t===this.FOrigWidth&&e===this.FOrigHeight||(this.SetWidth(t),this.SetHeight(e),i=this.GetContainer().getBoundingClientRect(),this.FOrigWidth=Math.round(i.right-i.left),this.FOrigHeight=Math.round(i.bottom-i.top),this.AlignControl(this))},this.GetWidth=function(){var t=0,e=null,i=null;return""!==this.FFormElement&&null!=(i=document.getElementById(this.FFormElement))?(e=i.getBoundingClientRect(),t=Math.round(e.right-e.left)):(this.GetElementHandle()===document.body?(t=window.innerWidth,e=document.documentElement.getBoundingClientRect(),(t=Math.round(e.width))>window.innerWidth&&(t=window.innerWidth)):this.FPopup?t=pas["WEBLib.Controls"].TControl.GetWidth.call(this):0===(t=Math.round(this.GetElementHandle().offsetWidth))&&(t=""!==this.FFormContainer?pas["WEBLib.Controls"].TControl.GetWidth.call(this):window.innerWidth),t)},this.GetHeight=function(){var t=0,e=0,i="",s=null,n=null;return""!==this.FFormElement&&null!=(s=document.getElementById(this.FFormElement))?(n=s.getBoundingClientRect(),t=Math.round(n.bottom-n.top)):(this.GetElementHandle()===document.body?(i=window.getComputedStyle(this.GetElementHandle()).getPropertyValue("margin-top"),i=pas.System.Copy(i,1,i.length-2),e=Math.round(pas.SysUtils.StrToFloat$1(i,pas.SysUtils.TFormatSettings.Invariant())-2),n=document.documentElement.getBoundingClientRect(),(t=Math.round(n.height))>window.innerHeight&&(t=window.innerHeight-Math.max(0,e))):this.FPopup?t=pas["WEBLib.Controls"].TControl.GetHeight.call(this):0===(t=Math.round(this.GetElementHandle().offsetHeight))&&(t=""!==this.FFormContainer?pas["WEBLib.Controls"].TControl.GetHeight.call(this):window.innerHeight),t)},this.GetLeft=function(){var t=0,e=null,i=null;return this.FPopup?t=pas["WEBLib.Controls"].TControl.GetLeft.call(this):""!==this.FFormElement?null!=(e=document.getElementById(this.FFormElement))&&(i=e.getBoundingClientRect(),t=Math.round(i.left)):(e=null,""!==this.FFormContainer&&(e=document.getElementById(this.FFormContainer)),null==e&&(e=this.GetElementHandle()),t=Math.round(e.offsetLeft)),t},this.GetTop=function(){var t=0,e=null,i=null;return this.FPopup?t=pas["WEBLib.Controls"].TControl.GetTop.call(this):""!==this.FFormElement?null!=(e=document.getElementById(this.FFormElement))&&(i=e.getBoundingClientRect(),t=Math.round(i.top)):(e=null,""!==this.FFormContainer&&(e=document.getElementById(this.FFormContainer)),null==e&&(e=this.GetElementHandle()),t=Math.round(e.offsetTop)),t},this.GetClientRect=function(){var t=pas.Types.TRect.$new();return t.$assign(pas["WEBLib.Controls"].TControl.GetClientRect.call(this)),t},this.CreateElement=function(){var e=null,i=null,s=null;return this.FPopup||null==this.FormContainerElement()?(e=document.createElement("DIV"),this.FLayer$1=this.CreateLayer(),document.body.appendChild(this.FLayer$1),i=this.FLayer$1,0===this.FPopupClose&&(this.GetMethodPointers(),i.addEventListener("click",this.FDoClickPtr)),i.style.setProperty(pas["WEBLib.Controls"].CSSZIndex,t.Application.MaxZIndexStr()),2===this.FBorder&&(e.style.setProperty("resize","both"),e.style.setProperty("overflow","auto")),this.FHasCaption=!1,this.FBorder in rtl.createSet(2,3,4)&&(s=this.CreateCaption(),e.appendChild(s)),e):e=this.FormContainerElement()},this.UpdateElement=function(){var t="",e=null;this.FCreating||(pas["WEBLib.Controls"].TControl.UpdateElement.call(this),this.IsUpdating()||(null==this.GetElementHandle()&&null==this.GetContainer()||""!==this.FCaption&&(this.FPopup?null!=this.FCaptionElement&&(null!=(e=this.FCaptionElement.childNodes.item(0))&&(e.nodeValue=this.FCaption),this.FShowClose&&null==this.FCaptionCloseElement&&(this.FCaptionCloseElement=document.createElement("SPAN"),this.FCaptionCloseElement.style.setProperty("float","right"),this.FCaptionCloseElement.style.setProperty("cursor","default"),this.FCaptionCloseElement.style.setProperty("margin-right","8px"),this.FCaptionCloseElement.innerHTML="&#x2716;",this.FCaptionElement.appendChild(this.FCaptionCloseElement),this.FCaptionCloseElement.addEventListener("click",rtl.createSafeCallback(this,"HandleCloseClick"))),pas["WEBLib.Controls"].SetHTMLElementFont(this.FCaptionElement,this.FFont,!(""===this.FElementCaptionClassName&&0===this.FElementFont))):window.document.title=this.FCaption),null!=this.GetContainer()&&(t=pas["WEBLib.Graphics"].ColorToHTML(this.FColor),null!=this.GetContainer()&&(-1===this.FColor||16777215===this.FColor||this.FPopup||""!==this.FElementClassName||this.GetContainer().style.setProperty(pas["WEBLib.Controls"].CSSBackground,t),(""!==this.FElementClassName||-1===this.FColor||16777215===this.FColor&&!this.FPopup)&&this.GetContainer().style.removeProperty(pas["WEBLib.Controls"].CSSBackground),""!==this.FElementClassName||this.FPopup||document.documentElement.style.setProperty("height","100%"),pas["WEBLib.Controls"].SetHTMLElementFont(this.GetContainer(),this.FFont,!(""===this.FElementClassName&&0===this.FElementFont))),this.FPopup?(null==this.FPopupElement&&(this.FPopupElement=this.GetContainer()),this.FShadow?this.FPopupElement.style.setProperty("box-shadow","3px 3px 3px silver"):this.FPopupElement.style.removeProperty("box-shadow"),this.FPopupElement.style.setProperty("border","1px solid gray")):this.GetContainer().style.removeProperty("box-shadow"))))},this.ContainerElement=function(){return this.FormContainerElement()},this.FormContainerElement=function(){var t=null;return 4 in this.FComponentState&&null!=this.FDesignContainer&&(t=this.FDesignContainer),""!==this.FFormContainer?null==(t=document.getElementById(this.FFormContainer))&&(t=document.body):t=document.body,t},this.GetElementBindHandle=function(){return 4 in this.FComponentState||""!==this.FFormContainer?window:this.FPopup?pas["WEBLib.Controls"].TControl.GetElementBindHandle.call(this):window},this.GetElementHandle=function(){return this.FPopup?pas["WEBLib.Controls"].TControl.GetElementHandle.call(this):this.FormContainerElement()},this.SetElementClassName=function(t){pas["WEBLib.Controls"].TControl.SetElementClassName.apply(this,arguments),this.FPopup&&null!=this.FPopupElement&&this.FPopupElement.setAttribute("class",t)},this.CloseQuery=function(){var t=!1;return t=!0,null!=this.FOnCloseQuery&&this.FOnCloseQuery(this,{get:function(){return t},set:function(e){t=e}}),t},this.LoadDFMValues=function(){},this.Init=function(){},this.IsFocused=function(){return!1,!1},this.CreateLayer=function(){var e=null;return(e=document.createElement("SPAN")).style.setProperty("top","0"),e.style.setProperty("left","0"),e.style.setProperty("right","0"),e.style.setProperty("bottom","0"),e.style.setProperty("webkit-user-select","none"),e.style.setProperty("moz-user-select","none"),e.style.setProperty("khtml-user-select","none"),e.style.setProperty("ms-user-select","none"),e.style.setProperty("user-select","none"),e.style.setProperty("position","absolute"),e.style.setProperty("z-index",t.Application.MaxZIndexStr()),e},this.CreateCaption=function(){var e;return e=pas.SysUtils.IntToStr(t.Application.FFormCaptionHeight),this.FCaptionElement=document.createElement("DIV"),this.FCaptionElement.innerHTML=this.FCaption,this.FCaptionElement.style.setProperty(pas["WEBLib.Controls"].CSSBackground,pas["WEBLib.Graphics"].ColorToHTML(t.Application.FThemeColor)),this.FCaptionElement.style.setProperty("color",pas["WEBLib.Graphics"].ColorToHTML(t.Application.FThemeTextColor)),this.FCaptionElement.style.setProperty("cursor","move"),this.FCaptionElement.style.setProperty("height",e+"px"),this.FCaptionElement.style.setProperty("line-height",e+"px"),this.FCaptionElement.style.setProperty("border-bottom","1px solid black"),this.FCaptionElement.style.setProperty("padding-left","4px"),this.FCaptionElement.style.setProperty("-moz-user-select","none"),this.FCaptionElement.style.setProperty("-webkit-user-select","none"),this.FCaptionElement.style.setProperty("-ms-user-select","none"),this.FCaptionElement.style.setProperty("user-select","none"),this.FCaptionElement.style.setProperty("-o-user-select","none"),""!==this.FElementCaptionClassName&&this.FCaptionElement.setAttribute("class",this.FElementCaptionClassName),pas["WEBLib.Controls"].SetHTMLElementFont(this.FCaptionElement,this.FFont,!(""===this.FElementCaptionClassName&&0===this.FElementFont)),null==this.FTitleDownPtr&&this.GetMethodPointers(),this.FCaptionElement.innerHTML=this.FCaption,this.FCaptionElement.addEventListener("mousedown",this.FTitleDownPtr),this.FHasCaption=!0,this.FCaptionElement},this.GetCaptionHeight=function(){var t=0,e=null;return t=0,null!=this.FCaptionElement&&this.FBorder in rtl.createSet(3,4)&&(e=this.FCaptionElement.getBoundingClientRect(),t=Math.round(e.bottom-e.top)),t},this.SetColorScheme=function(e){var i="";if(t.Application.FThemed){var s=e;2===s?(i="label,option,td,table,ul,li {background-color: #202124; color: #BEC1C6;}\r\nbody,input,textarea,select,fieldset {background-color: #202124; color: #BEC1C6; border: 1px solid gray;}\r\ninput:focus, textarea:focus, select:focus, span:focus { border: 1px solid silver; outline: none !important;}",this.AddCSS("appscheme",i)):1===s&&this.RemoveCSS("appscheme")}},this.SetFormPos=function(){null!=this.GetContainer()&&(4===this.FPosition&&(this.FLeft=Math.round((t.WinWidth()-this.GetWidth())/2)+window.scrollX,this.FTop=Math.round((t.WinHeight()-this.GetHeight())/2)+window.scrollY),this.GetContainer().style.setProperty("position","absolute"),this.GetContainer().style.setProperty("width",pas.SysUtils.IntToStr(this.GetWidth())+"px"),this.GetContainer().style.setProperty("height",pas.SysUtils.IntToStr(this.GetHeight())+"px"),this.GetContainer().style.setProperty("left",pas.SysUtils.IntToStr(this.GetLeft())+"px"),this.GetContainer().style.setProperty("top",pas.SysUtils.IntToStr(this.GetTop())+"px"))},this.GetHTMLFileName=function(){return this.$module.$name+t.Application.GetFormExtension()},this.LoadedDone=function(){t.Application.TriggerNotification()},this.Loaded=function(){pas["WEBLib.Controls"].TControl.Loaded.call(this),this.LoadedDone()},this.ColorChanging=function(){pas["WEBLib.Controls"].TControl.ColorChanging.call(this),null!=this.GetContainer()&&this.GetContainer().style.setProperty(pas["WEBLib.Controls"].CSSBackground,pas["WEBLib.Graphics"].ColorToHTML(this.FColor))},this.CreateInitialize=function(){pas["WEBLib.Controls"].TControl.CreateInitialize.call(this),this.FAllowTouch=!0,this.FModalResult=0,this.FFormStyle=0,this.FBorder=2,this.FShadow=!0,this.FShowClose=!0,this.FTimerID=-1,this.FCaptionElement=null,this.BeginUpdate(),this.SetColor(16777215),this.EndUpdate(),window.addEventListener("load",this.FLoadedPtr)},this.Create$2=function(t){return this.FNoHTML=!1,this.FCreating=!0,this.FFormContainer=t,""===t?pas["WEBLib.Controls"].TControl.Create$2.call(this,pas["WEBLib.WebTools"].cBodyTag):pas["WEBLib.Controls"].TControl.Create$2.call(this,t),this.FFormElement="",this.FModalResult=0,this.FFormStyle=0,this.DoCreate(),this},this.Create$5=function(t,e){return this.FCreating=!0,this.FFormContainer=t,pas["WEBLib.Controls"].TControl.Create$2.call(this,t),e.set(this),this.FFormElement="",this.FModalResult=0,this.FFormStyle=0,this.DoCreate(),this},this.Create$1=function(t){return this.FNoHTML=!1,this.FCreating=!0,this.FResizeObserver=null,pas["WEBLib.Controls"].TControl.Create$1.apply(this,arguments),this.FBorder=1,this.FFormFileName="",this.FPopupMode=0,this.FPopupClose=0,this.FPopup=!0,this.FPosition=4,this.FPopupOpacity=1,this},this.Load=function(){var e=this;return this.FFormFileName=this.$class.GetHTMLFileName(),""===this.FFormFileName?new Promise((function(t,i){t(e)})):new Promise((function(i,s){t.Application.LoadForm$1(e,e.FFormFileName,(function(t){i(t)}))}))},this.Execute=function(){var t=this;return new Promise((function(e,i){t.ShowModal$1((function(t){e(t)}))}))},this.Destroy=function(){this.FVisible&&this.Close(),null!=this.FOnDestroy&&this.FOnDestroy(this),pas["WEBLib.Controls"].TControl.Destroy.call(this),null!=this.FLayer$1&&(this.FormContainerElement()===this.FLayer$1.parentNode&&this.FormContainerElement().removeChild(this.FLayer$1),this.FLayer$1=null)},this.Close=function(){var i=0,s=null;this.CloseQuery()&&(this.UnbindEvents(),i=1,-1!==this.FTimerID&&(window.clearInterval(this.FTimerID),this.FTimerID=-1),null!=this.FOnClose&&this.FOnClose(this,{get:function(){return i},set:function(t){i=t}}),0!==i&&(null!=this.FLayer$1&&(this.GetContainer().parentNode===this.FLayer$1?this.FLayer$1.removeChild(this.GetContainer()):this.GetContainer().parentNode.parentNode===this.FLayer$1&&this.FLayer$1.removeChild(this.GetContainer().parentNode),this.FContainer=null,this.FormContainerElement()===this.FLayer$1.parentNode&&(this.FormContainerElement().removeChild(this.FLayer$1),t.Application.ChangeMaxZIndex(-1)),this.FLayer$1=null),""===this.FFormFileName?""!==this.FFormElement&&null!=this.GetContainer()?(this.GetContainer().innerHTML="",this.FContainer=null):null!=this.GetContainer()&&(this.FormContainerElement()===this.GetContainer().parentNode&&this.FormContainerElement().removeChild(this.GetContainer()),this.FContainer=null):""!==this.FFormElement&&(this.GetContainer().innerHTML="",this.FContainer=null),this.FFormElement!==this.FFormContainer&&""!==this.FFormElement&&null!=(s=document.getElementById(this.FFormElement))&&(s.innerHTML=""),this.DoClose({get:function(){return i},set:function(t){i=t}}),2!==i||3 in this.FComponentState||(e.ReleaseForm(this),t.Application.FMainForm===this&&(t.Application.FMainForm=null)),t.Application.FActiveForm=this.FPrevActiveForm,this.SetVisible(!1)))},this.IsMiletus=function(){var t=!1,e=null;e=this.$class.ClassType(),t=!1;do{if(null!=(e=e.$ancestor)&&"TMiletusForm"===e.$classname){t=!0;break}}while(null!=e&&"TForm"!==e.$classname);return t},this.SetBounds=function(t,e,i,s){4 in this.FComponentState?(this.Resize$1(),this.SetBoundsInt(t,e,i,s)):pas["WEBLib.Controls"].TControl.SetBounds.call(this,t,e,i,s)},this.Show$1=function(){var e=0,i=null;this.FCreating&&this.FPopup&&(t.Application.ChangeMaxZIndex(1),this.FCreating=!1,this.UpdateElement()),""===this.FFormFileName&&(null==this.GetContainer()?this.FPopup?(this.FContainer=this.CreateElement(),this.FPopupElement=this.GetContainer(),this.SetFormPos(),this.UpdateElement(),this.FLayer$1.appendChild(this.GetContainer())):(this.FContainer=this.CreateLayer(),this.GetContainer().style.setProperty(pas["WEBLib.Controls"].CSSBackground,pas["WEBLib.Graphics"].ColorToHTML(this.FColor)),document.body.appendChild(this.GetContainer())):this.FPopup?(this.SetFormPos(),this.FLayer$1.appendChild(this.GetContainer())):null!=this.FLayer$1?this.FLayer$1.appendChild(this.GetContainer()):document.body.appendChild(this.GetContainer()),this.FPopup&&(2===this.FBorder?(i=this.GetContainer().getBoundingClientRect(),this.FOrigWidth=Math.round(i.right-i.left),this.FOrigHeight=Math.round(i.bottom-i.top),this.FTimerID=window.setInterval(rtl.createSafeCallback(this,"HandleDoResize"),100)):(this.GetContainer().style.setProperty("resize",""),this.GetContainer().style.setProperty("overflow","")))),this.SetVisible(!0);for(var s=0,n=this.GetControlsCount()-1;s<=n;s++)e=s,0===this.GetControls(e).FTabOrder&&this.GetControls(e).FTabStop&&this.GetControls(e).SetFocus()},this.ShowModal$1=function(e){return this.FNoHTML&&(this.FPrevActiveForm=t.Application.FActiveForm,t.Application.FActiveForm=this,t.Application.CreateNewForm(this,"")),0,this.FNoHTML=!1,this.FModalProc=e,this.SetModalResult(0),this.Show$1(),0},this.AddCSS=function(t,e){var i,s,n;i=t,s=e,(n=document.getElementById(i))?n.innerHTML=s:((n=document.createElement("style")).type="text/css",n.id=i,n.innerHTML=s,document.getElementsByTagName("head")[0].appendChild(n))},this.RemoveCSS=function(t){var e;null!=(e=document.getElementById(t))&&document.head.removeChild(e)},rtl.addIntf(this,pas.System.IUnknown)})),rtl.createClass(this,"TForm",this.TCustomForm,(function(){rtl.addIntf(this,pas.System.IUnknown);var e=this.$rtti;e.addProperty("Align",2,pas["WEBLib.Controls"].$rtti.TAlign,"FAlign","SetAlign",{Default:pas["WEBLib.Controls"].TAlign.alNone}),e.addProperty("Caption",2,rtl.string,"FCaption","SetCaption"),e.addProperty("Color",2,pas["WEBLib.Graphics"].$rtti.TColor,"FColor","SetColor"),e.addProperty("CSSLibrary",0,t.$rtti.TCSSLibrary,"FCSSLibrary","FCSSLibrary",{Default:t.TCSSLibrary.cssNone}),e.addProperty("ElementClassName",2,pas["WEBLib.Controls"].$rtti.TElementClassName,"FElementClassName","SetElementClassName"),e.addProperty("ElementFont",2,pas["WEBLib.Controls"].$rtti.TElementFont,"FElementFont","SetElementFont",{Default:pas["WEBLib.Controls"].TElementFont.efProperty}),e.addProperty("ElementPosition",2,pas["WEBLib.Controls"].$rtti.TElementPosition,"FElementPosition","SetElementPosition",{Default:pas["WEBLib.Controls"].TElementPosition.epAbsolute}),e.addProperty("Font",2,pas["WEBLib.Graphics"].$rtti.TFont,"FFont","SetFont"),e.addProperty("FormContainer",2,pas["WEBLib.Controls"].$rtti.TElementID,"FFormContainer","SetFormContainer"),e.addProperty("FormStyle",3,t.$rtti.TFormStyle,"GetFormStyle","SetFormStyle"),e.addProperty("Menu",0,pas["WEBLib.Controls"].$rtti.TCustomControl,"FMenu","FMenu"),e.addProperty("ParentFont",2,rtl.boolean,"FParentFont","SetParentFont",{Default:!0}),e.addProperty("Shadow",2,rtl.boolean,"FShadow","SetShadow",{Default:!0}),e.addProperty("ShowClose",0,rtl.boolean,"FShowClose","FShowClose",{Default:!0}),e.addProperty("TabOrder",2,rtl.longint,"FTabOrder","SetTabOrder"),e.addProperty("TabStop",2,rtl.boolean,"FTabStop","SetTabStop",{Default:!0}),e.addProperty("OnBeforeUnload",0,t.$rtti.TBeforeUnloadEvent,"FOnBeforeUnload","FOnBeforeUnload"),e.addProperty("OnClick",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnClick","FOnClick"),e.addProperty("OnClose",0,t.$rtti.TCloseEvent,"FOnClose","FOnClose"),e.addProperty("OnCloseQuery",0,t.$rtti.TCloseQueryEvent,"FOnCloseQuery","FOnCloseQuery"),e.addProperty("OnCreate",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnCreate","FOnCreate"),e.addProperty("OnDblClick",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnDblClick","FOnDblClick"),e.addProperty("OnDeactivate",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnDeactivate","FOnDeactivate"),e.addProperty("OnDestroy",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnDestroy","FOnDestroy"),e.addProperty("OnDOMContentLoaded",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnDOMContentLoaded","FOnDOMContentLoaded"),e.addProperty("OnHashChange",0,t.$rtti.THashChangeEvent,"FOnHashChange","FOnHashChange"),e.addProperty("OnResize",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnResize","FOnResize"),e.addProperty("OnShow",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnShow","FOnShow"),e.addProperty("OnScroll",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnScroll","FOnScroll"),e.addProperty("OnOrientationChange",0,t.$rtti.TOrientationChangeEvent,"FOnOrientationChange","FOnOrientationChange"),e.addProperty("OnPaint",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnPaint","FOnPaint"),e.addProperty("OnTouchStart",0,pas["WEBLib.Controls"].$rtti.TTouchEvent,"FOnTouchStart","FOnTouchStart"),e.addProperty("OnTouchMove",0,pas["WEBLib.Controls"].$rtti.TTouchEvent,"FOnTouchMove","FOnTouchMove"),e.addProperty("OnTouchEnd",0,pas["WEBLib.Controls"].$rtti.TTouchEvent,"FOnTouchEnd","FOnTouchEnd"),e.addProperty("OnUnload",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnUnload","FOnUnload")})),rtl.createClass(this,"TCustomFrame",pas["WEBLib.Controls"].TCustomHTMLDiv,(function(){this.$init=function(){pas["WEBLib.Controls"].TCustomHTMLDiv.$init.call(this),this.FAutoScroll=!1,this.FAutoSize=!1,this.FBiDiMode$1=0,this.FConstraints=null,this.FCtl3D$1=!1,this.FDockSite=!1,this.FDragCursor=0,this.FDragKind=0,this.FDragMode$1=0,this.FOnAlignInsertBefore=null,this.FOnAlignPosition=null,this.FOnCanResize=null,this.FOnConstrainedResize=null,this.FOnContextPopup=null,this.FOnDockDrop=null,this.FOnDockOver=null,this.FOnEndDock=null,this.FOnGesture=null,this.FOnGetSiteInfo=null,this.FOnMouseActivate=null,this.FOnMouseWheelDown$1=null,this.FOnMouseWheelUp$1=null,this.FOnStartDock=null,this.FOnUnDock=null,this.FPadding=null,this.FParentBackground=!1,this.FParentCtl3D$1=!1,this.FPopupMenu=null},this.$final=function(){this.FConstraints=void 0,this.FOnAlignInsertBefore=void 0,this.FOnAlignPosition=void 0,this.FOnCanResize=void 0,this.FOnConstrainedResize=void 0,this.FOnContextPopup=void 0,this.FOnDockDrop=void 0,this.FOnDockOver=void 0,this.FOnEndDock=void 0,this.FOnGesture=void 0,this.FOnGetSiteInfo=void 0,this.FOnMouseActivate=void 0,this.FOnMouseWheelDown$1=void 0,this.FOnMouseWheelUp$1=void 0,this.FOnStartDock=void 0,this.FOnUnDock=void 0,this.FPadding=void 0,this.FPopupMenu=void 0,pas["WEBLib.Controls"].TCustomHTMLDiv.$final.call(this)},this.SetConstraints=function(t){this.FConstraints.Assign(t)},this.SetPopupMenu=function(t){this.FPopupMenu=t},this.UpdateElement=function(){var t;pas["WEBLib.Controls"].TControl.UpdateElement.call(this),t=this.FColor in rtl.createSet(15790320,-1,16777215,16711422),null!=this.GetElementHandle()&&!this.IsUpdating()&&4 in this.FComponentState&&t&&this.GetElementHandle().style.setProperty("background-color",pas["WEBLib.Graphics"].ColorToHTML(15790320))},this.Create$1=function(e){return pas["WEBLib.Controls"].TControl.Create$1.call(this,e),this.FConstraints=t.TSizeConstraints.$create("Create$1",[this]),this},this.Destroy=function(){rtl.free(this,"FConstraints"),pas["WEBLib.Controls"].TCustomControl.Destroy.call(this)},rtl.addIntf(this,pas.System.IUnknown)})),rtl.createClass(this,"TFrame",this.TCustomFrame,(function(){rtl.addIntf(this,pas.System.IUnknown);var e=this.$rtti;e.addProperty("Align",2,pas["WEBLib.Controls"].$rtti.TAlign,"FAlign","SetAlign",{Default:pas["WEBLib.Controls"].TAlign.alNone}),e.addProperty("Anchors",2,pas["WEBLib.Controls"].$rtti.TAnchors,"FAnchors","SetAnchors",{Default:rtl.createSet(0,1)}),e.addProperty("AutoScroll",0,rtl.boolean,"FAutoScroll","FAutoScroll",{Default:!1}),e.addProperty("AutoSize",0,rtl.boolean,"FAutoSize","FAutoSize",{Default:!1}),e.addProperty("BiDiMode",4,pas["WEBLib.Controls"].$rtti.TBiDiMode,"FBiDiMode$1","FBiDiMode$1"),e.addProperty("Constraints",2,t.$rtti.TSizeConstraints,"FConstraints","SetConstraints"),e.addProperty("DockSite",0,rtl.boolean,"FDockSite","FDockSite",{Default:!1}),e.addProperty("DoubleBuffered",0,rtl.boolean,"FDoubleBuffered","FDoubleBuffered",{Default:!1}),e.addProperty("DragCursor",0,pas["WEBLib.Controls"].$rtti.TCursor,"FDragCursor","FDragCursor",{Default:12}),e.addProperty("DragKind",0,pas["WEBLib.Controls"].$rtti.TDragKind,"FDragKind","FDragKind",{Default:pas["WEBLib.Controls"].TDragKind.dkDrag}),e.addProperty("DragMode",0,pas["WEBLib.Controls"].$rtti.TDragMode,"FDragMode$1","FDragMode$1",{Default:pas["WEBLib.Controls"].TDragMode.dmManual}),e.addProperty("Enabled",2,rtl.boolean,"FEnabled","SetEnabled",{Default:!0}),e.addProperty("Color",2,pas["WEBLib.Graphics"].$rtti.TColor,"FColor","SetColor"),e.addProperty("Ctl3D",4,rtl.boolean,"FCtl3D$1","FCtl3D$1"),e.addProperty("Font",2,pas["WEBLib.Graphics"].$rtti.TFont,"FFont","SetFont"),e.addProperty("Padding",0,pas["WEBLib.Controls"].$rtti.TPadding,"FPadding","FPadding"),e.addProperty("ParentBackground",0,rtl.boolean,"FParentBackground","FParentBackground",{Default:!0}),e.addProperty("ParentBiDiMode",0,rtl.boolean,"FParentBiDiMode","FParentBiDiMode",{Default:!0}),e.addProperty("ParentColor",2,rtl.boolean,"FParentColor","SetParentColor",{Default:!1}),e.addProperty("ParentCtl3D",0,rtl.boolean,"FParentCtl3D$1","FParentCtl3D$1",{Default:!0}),e.addProperty("ParentDoubleBuffered",0,rtl.boolean,"FParentDoubleBuffered","FParentDoubleBuffered",{Default:!0}),e.addProperty("ParentFont",2,rtl.boolean,"FParentFont","SetParentFont",{Default:!0}),e.addProperty("ParentShowHint",0,rtl.boolean,"FParentShowHint","FParentShowHint"),e.addProperty("PopupMenu",2,pas["WEBLib.Menus"].$rtti.TPopupMenu,"FPopupMenu","SetPopupMenu"),e.addProperty("ShowHint",2,rtl.boolean,"FShowHint","SetShowHint",{Default:!1}),e.addProperty("TabOrder",2,rtl.longint,"FTabOrder","SetTabOrder"),e.addProperty("TabStop",2,rtl.boolean,"FTabStop","SetTabStop",{Default:!0}),e.addProperty("Visible",2,rtl.boolean,"FVisible","SetVisible",{Default:!0}),e.addProperty("OnAlignInsertBefore",0,t.$rtti.TAlignInsertBeforeEvent,"FOnAlignInsertBefore","FOnAlignInsertBefore"),e.addProperty("OnAlignPosition",0,t.$rtti.TAlignPositionEvent,"FOnAlignPosition","FOnAlignPosition"),e.addProperty("OnCanResize",0,t.$rtti.TCanResizeEvent,"FOnCanResize","FOnCanResize"),e.addProperty("OnClick",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnClick","FOnClick"),e.addProperty("OnConstrainedResize",0,t.$rtti.TConstrainedResizeEvent,"FOnConstrainedResize","FOnConstrainedResize"),e.addProperty("OnContextPopup",0,t.$rtti.TContextPopupEvent,"FOnContextPopup","FOnContextPopup"),e.addProperty("OnDblClick",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnDblClick","FOnDblClick"),e.addProperty("OnDockDrop",0,t.$rtti.TDockDropEvent,"FOnDockDrop","FOnDockDrop"),e.addProperty("OnDockOver",0,t.$rtti.TDockOverEvent,"FOnDockOver","FOnDockOver"),e.addProperty("OnDragDrop",0,pas["WEBLib.Controls"].$rtti.TDragDropEvent,"FOnDragDrop","FOnDragDrop"),e.addProperty("OnDragOver",0,pas["WEBLib.Controls"].$rtti.TDragOverEvent,"FOnDragOver","FOnDragOver"),e.addProperty("OnEndDock",0,pas["WEBLib.Controls"].$rtti.TEndDragEvent,"FOnEndDock","FOnEndDock"),e.addProperty("OnEndDrag",0,pas["WEBLib.Controls"].$rtti.TEndDragEvent,"FonEndDrag","FonEndDrag"),e.addProperty("OnEnter",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnEnter","FOnEnter"),e.addProperty("OnExit",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnExit","FOnExit"),e.addProperty("OnGesture",0,t.$rtti.TGestureEvent,"FOnGesture","FOnGesture"),e.addProperty("OnGetSiteInfo",0,t.$rtti.TGetSiteInfoEvent,"FOnGetSiteInfo","FOnGetSiteInfo"),e.addProperty("OnMouseActivate",0,t.$rtti.TMouseActivateEvent,"FOnMouseActivate","FOnMouseActivate"),e.addProperty("OnMouseDown",0,pas["WEBLib.Controls"].$rtti.TMouseEvent,"FOnMouseDown","FOnMouseDown"),e.addProperty("OnMouseEnter",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnMouseEnter","FOnMouseEnter"),e.addProperty("OnMouseLeave",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnMouseLeave","FOnMouseLeave"),e.addProperty("OnMouseMove",0,pas["WEBLib.Controls"].$rtti.TMouseMoveEvent,"FOnMouseMove","FOnMouseMove"),e.addProperty("OnMouseUp",0,pas["WEBLib.Controls"].$rtti.TMouseEvent,"FOnMouseUp","FOnMouseUp"),e.addProperty("OnMouseWheel",0,pas["WEBLib.Controls"].$rtti.TMouseWheelEvent,"FOnMouseWheel","FOnMouseWheel"),e.addProperty("OnMouseWheelDown",0,t.$rtti.TMouseWheelUpDownEvent,"FOnMouseWheelDown$1","FOnMouseWheelDown$1"),e.addProperty("OnMouseWheelUp",0,t.$rtti.TMouseWheelUpDownEvent,"FOnMouseWheelUp$1","FOnMouseWheelUp$1"),e.addProperty("OnResize",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnResize","FOnResize"),e.addProperty("OnStartDock",0,t.$rtti.TStartDockEvent,"FOnStartDock","FOnStartDock"),e.addProperty("OnStartDrag",0,pas["WEBLib.Controls"].$rtti.TStartDragEvent,"FOnStartDrag","FOnStartDrag"),e.addProperty("OnUnDock",0,t.$rtti.TUnDockEvent,"FOnUnDock","FOnUnDock")})),rtl.recNewT(this,"TApplicationError",(function(){this.AMessage="",this.AFile="",this.ALineNumber=0,this.AColNumber=0,this.AStack="",this.AError=null,this.$eq=function(t){return this.AMessage===t.AMessage&&this.AFile===t.AFile&&this.ALineNumber===t.ALineNumber&&this.AColNumber===t.AColNumber&&this.AStack===t.AStack&&this.AError===t.AError},this.$assign=function(t){return this.AMessage=t.AMessage,this.AFile=t.AFile,this.ALineNumber=t.ALineNumber,this.AColNumber=t.AColNumber,this.AStack=t.AStack,this.AError=t.AError,this}})),this.THintPosition={0:"hpLeft",hpLeft:0,1:"hpTop",hpTop:1,2:"hpRight",hpRight:2,3:"hpBottom",hpBottom:3},this.TOnlineStatus={0:"osOnline",osOnline:0,1:"osOffline",osOffline:1},rtl.createClass(this,"TApplication",pas["WEBLib.Controls"].TControl,(function(){this.$init=function(){pas["WEBLib.Controls"].TControl.$init.call(this),this.FAppContainer="",this.FMainFormOnTaskBar=!1,this.FCanCreateForm=!1,this.FAppInitializing=!1,this.FLastReq=null,this.FFormCaptionHeight=0,this.FActiveForm=null,this.FMainForm=null,this.FLoadForm=null,this.FInitFormClassName="",this.FFormStack=null,this.FParameters=null,this.FIsRedirect=!1,this.FLanguage=0,this.FOnImageCacheReady=null,this.FOnError=null,this.FOnHashChange=null,this.FAutoFormRoute=!1,this.FErrorType=0,this.FOnOnlineChange=null,this.FOnActivate=null,this.FThemeTextColor=0,this.FThemeColor=0,this.FThemed=!1,this.FThemeButtonClassName="",this.FOnOAuthToken=null,this.FOnOAuthCallBack=null,this.FMaxZIndex=0,this.FCreatedProc=null,this.FHintPause=0,this.FHintHidePause=0,this.FHintPosition=0,this.FHintClassName=""},this.$final=function(){this.FLastReq=void 0,this.FActiveForm=void 0,this.FMainForm=void 0,this.FLoadForm=void 0,this.FFormStack=void 0,this.FParameters=void 0,this.FOnImageCacheReady=void 0,this.FOnError=void 0,this.FOnHashChange=void 0,this.FOnOnlineChange=void 0,this.FOnActivate=void 0,this.FOnOAuthToken=void 0,this.FOnOAuthCallBack=void 0,this.FCreatedProc=void 0,pas["WEBLib.Controls"].TControl.$final.call(this)},this.DoFormLoad=function(t){var e;return e=t.target.responseText,this.CreateNewForm(this.FLoadForm,e),null!=this.FCreatedProc&&(this.FCreatedProc(this),this.FCreatedProc=null),!0,!0},this.DoFormAbort=function(t){return pas["WEBLib.Dialogs"].ShowMessage("Failed to load form HTML template file"),!0,!0},this.DoHandleError=function(e){var i,s=!1,n=t.TApplicationError.$new(),r=null,o=null,a=null,l="",h=!1;if(h=!0,null==e.message&&(h=!1),!h)return n.AMessage="Undefined JavaScript exception",n.AFile="",n.ALineNumber=0,n.AColNumber=0,n.AError=null,null!=this.FOnError&&this.FOnError(this,t.TApplicationError.$clone(n),{get:function(){return s},set:function(t){s=t}}),s;if(n.AMessage=e.message,n.AFile=e.filename,n.ALineNumber=e.lineno,n.AColNumber=e.colno,n.AError=e.error,n.AStack="",l="",null!=e.error){e.error.stack&&(n.AStack=e.error.stack),e.error.fMessage&&(n.AMessage=e.error.fMessage),l=function(t){var e="";for(var i in t)t.hasOwnProperty(i)&&(e+=i+"::"+t[i]+"\n");return e}(e.error)}s=!1,i="ERROR<br>"+n.AMessage+" | "+l+n.AStack+"<BR> at "+n.AFile+" ["+pas.SysUtils.IntToStr(n.ALineNumber)+":"+pas.SysUtils.IntToStr(n.AColNumber)+"]";var F=this.FErrorType;return 3===F?null!=(r=document.getElementById("tmserrormessage"))?rtl.asExt(r.firstChild,HTMLElement).innerHTML=i:((r=document.createElement("DIV")).setAttribute("id","tmserrormessage"),r.style.setProperty("position","absolute"),r.style.setProperty("font-family","Courier"),r.style.setProperty("font-size","8pt"),r.style.setProperty("bottom","0"),r.style.setProperty("width","100%"),r.style.setProperty("height","100px"),r.style.setProperty("background","#ff0000"),r.style.setProperty("color","#ffffff"),document.body.style.setProperty("padding","0"),document.body.style.setProperty("margin","0"),(o=document.createElement("SPAN")).style.setProperty("margin-left","4px"),o.style.setProperty("float","left"),o.style.setProperty("overflow","hidden"),o.style.setProperty("display","block"),o.innerHTML=i,r.appendChild(o),(a=document.createElement("SPAN")).style.setProperty("font-family","Courier"),a.style.setProperty("font-size","8pt"),a.style.setProperty("font-weight","bold"),a.style.setProperty("position","absolute"),a.style.setProperty("width","20px"),a.style.setProperty("vertical-align","top"),a.style.setProperty("cursor","pointer"),a.style.setProperty("text-align","right"),a.style.setProperty("right","4px"),a.style.setProperty("display","block"),a.innerHTML="X",a.onclick=rtl.createSafeCallback(this,"DoErrorClose"),r.appendChild(a),document.body.appendChild(r)):2===F?window.alert(i):1===F&&(this.AddControlLink("googlematerial","https://fonts.googleapis.com/icon?family=Material+Icons"),pas["WEBLib.Dialogs"].MessageDlg(i,1,rtl.createSet(2),null)),null!=this.FOnError&&this.FOnError(this,t.TApplicationError.$clone(n),{get:function(){return s},set:function(t){s=t}}),s},this.DoHashChange=function(t){var e="",i=null,s=null,n=null,r=!1;return!0,!this.FAutoFormRoute||(e=location.hash,pas.System.Delete({get:function(){return e},set:function(t){e=t}},1,1),r=!1,null!=this.FOnHashChange&&this.FOnHashChange(this,e,{get:function(){return r},set:function(t){r=t}}),r||(""===e&&(e=this.FInitFormClassName),""!==e&&(""===this.FInitFormClassName&&(this.FInitFormClassName=this.FActiveForm.$classname),null!=(i=pas.Classes.GetClass(e))&&(n=document.body,this.CreateForm$6(i,n,{get:function(){return s},set:function(t){s=t}})))),!0)},this.DoErrorClose=function(t){return document.body.removeChild(t.target.parentElement),!0,!0},this.DoUpdateOnlineStatus=function(t){return!0,null!=this.FOnOnlineChange&&(window.navigator.onLine?this.FOnOnlineChange(this,0):this.FOnOnlineChange(this,1)),!0},this.DoVisibilityChange=function(t){var e;return!0,e="visible"===document.visibilityState,null!=this.FOnActivate&&this.FOnActivate(this,e),!0},this.CreateNewForm=function(e,i){var s=null,n=null,r=null,o=null,a=null,l=0,h=0,F=0,p=0,c=null,u=null,d=0,S=null;if(null===this.FMainForm&&(this.FMainForm=e),r=null,a=null,d=0,e.FPopup||""===e.FFormElement){if(e.ClearControls(),e.FLayer$1=e.CreateLayer(),document.body.appendChild(e.FLayer$1),s=e.FLayer$1,e.FPopup&&e.FPopupOpacity<1&&((n=e.CreateLayer()).style.setProperty(pas["WEBLib.Controls"].CSSBackground,"black"),n.style.setProperty("opacity",pas["WEBLib.WebTools"].DoubleToHTML(e.FPopupOpacity)),n.style.setProperty(pas["WEBLib.Controls"].CSSZIndex,t.Application.MaxZIndexStr()),s.appendChild(n)),t.Application.ChangeMaxZIndex(1),(r=document.createElement("DIV")).style.setProperty(pas["WEBLib.Controls"].CSSZIndex,t.Application.MaxZIndexStr()),e.FPopupElement=r,4===e.FBorder){r.style.setProperty("resize","both"),r.style.setProperty("overflow","auto"),S=null;try{var C=e;(S=new ResizeObserver((function(t){window.requestAnimationFrame(()=>{Array.isArray(t)&&t.length&&t.forEach((function(t){C.HandleObserver()}))})}))).observe(r)}catch(t){r.style.removeProperty("resize"),r.style.removeProperty("overflow")}e.FResizeObserver=S}""!==e.FElementClassName&&r.setAttribute("class",e.FElementClassName),e.FShadow&&e.FPopup&&r.style.setProperty("box-shadow","3px 3px 3px silver"),s.appendChild(r),e.FBorder in rtl.createSet(3,4)?(e.GetMethodPointers(),u=e.CreateCaption(),r.appendChild(u),(o=document.createElement("DIV")).style.setProperty("position","absolute"),o.style.setProperty("width","100%"),o.setAttribute("id","childspan"),r.appendChild(o),a=o,d=t.Application.FFormCaptionHeight):a=r,a.innerHTML=i,e.FContainer=a}else e.FLayer$1=null,null!=(s=document.getElementById(e.FFormElement))&&(s.innerHTML=i,""===e.FElementClassName&&s.style.setProperty(pas["WEBLib.Controls"].CSSBackground,pas["WEBLib.Graphics"].ColorToHTML(e.FColor)));e.Init(),e.LoadDFMValues(),e.FBorder in rtl.createSet(3,4)&&""!==e.FElementCaptionClassName&&(u.classList.add(e.FElementCaptionClassName),u.style.removeProperty("background-color"),u.style.removeProperty("color")),null!=e.FLayer$1&&(e.FPopup||(""===e.FElementClassName?-1!==e.FColor?s.style.setProperty(pas["WEBLib.Controls"].CSSBackground,pas["WEBLib.Graphics"].ColorToHTML(e.FColor)):s.style.setProperty(pas["WEBLib.Controls"].CSSBackground,"white"):s.setAttribute("class",e.FElementClassName))),null!=r&&""===e.FFormContainer&&e.FPopup&&(r.style.setProperty("position","absolute"),l=Math.max(0,Math.round((t.WinWidth()-e.GetWidth())/2))+window.scrollX,h=Math.max(0,Math.round((t.WinHeight()-e.GetHeight())/2))+window.scrollY,F=e.GetWidth(),p=e.GetHeight()+d,""===e.FElementClassName&&(r.style.setProperty(pas["WEBLib.Controls"].CSSBackground,pas["WEBLib.Graphics"].ColorToHTML(e.FColor)),r.style.setProperty("border","1px Black solid")),r.style.setProperty("top",pas.SysUtils.IntToStr(h)+"px"),r.style.setProperty("left",pas.SysUtils.IntToStr(l)+"px"),r.style.setProperty("width",pas.SysUtils.IntToStr(F)+"px"),r.style.setProperty("height",pas.SysUtils.IntToStr(p)+"px")),null!=a&&this.ActivateChildScripts(a),null!=e.FCreatedProc&&(c=e.FCreatedProc,e.FCreatedProc=null,c(e)),null!=e.FOnCreate&&e.FOnCreate(e),e.Loaded(),e.InitAnchoring(),e.UpdateChildAnchoring(),e.FCreating=!1,e.UpdateElement(),e.EventsBound()||e.BindEvents(),e.Resize$1(),e.DoShow()},this.GetFormExtension=function(){return 0!==this.FLanguage?"_"+pas["WEBLib.Lang"].GetLanguageISO639_1Code(this.FLanguage)+pas["WEBLib.WebTools"].cHTMLExt:pas["WEBLib.WebTools"].cHTMLExt};this.GetAuthorizationPageHTML=function(t){function e(t,e){var i=0,s="";s='<!doctype html>\r\n<html lang="en">\r\n<head>\r\n  <title>Authentication Result</title>\r\n  <meta name="viewport" content="width=device-width, initial-scale=1">\r\n</head>\r\n<body>\r\n<style>\r\n  hr\r\n  {\r\n    border: none;\r\n    height: 1px;\r\n    background-color: rgb(171, 171, 171);\r\n  }\r\n  div.container\r\n  {\r\n    position: fixed;\r\n    font-family: Arial;\r\n    font-size: 12pt;\r\n    max-width: 100%;\r\n    max-height: 100%;\r\n    top: 50%;\r\n    left: 50%;\r\n    transform: translate(-50%, -50%);\r\n  }\r\n  div.section\r\n  {\r\n    display: inline-block;\r\n    margin: 15px;\r\n    padding: 5px;\r\n    float: left;\r\n  }\r\n  div.image img\r\n  {\r\n    height: 100%;\r\n  }\r\n  div.text\r\n  {\r\n    padding-top: 15px;\r\n  }\r\n  div.text2\r\n  {\r\n    font-size: 18pt;\r\n    color: #PLACEHOLDERCOLOR#;\r\n  }\r\n  span.title\r\n  {\r\n    font-size: 26px;\r\n  }\r\n</style>\r\n  <div class="container">\r\n  <div class="section image">\r\n    <img src="#PLACEHOLDERIMAGE#">\r\n  </div>\r\n  <div class="section text">\r\n  #PLACEHOLDERTEXT#\r\n  </div>\r\n  </div>\r\n </body>\r\n</html>';for(var n=0,r=rtl.length(t)-1;n<=r;n++)i=n,s=pas.SysUtils.StringReplace(s,t[i],e[i],rtl.createSet(0));return s}return e(["#PLACEHOLDERIMAGE#","#PLACEHOLDERTEXT#","#PLACEHOLDERCOLOR#"],t?["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACC0lEQVR4nO2Zv3GDMBSHv+QyQEbICM4EOW+Q9BS4o2QTU9LZBQNkg6zgETyCR0iRkOMIAv3Xk0+/zsiI931nI3iCkpKSkpKSkpKSkpJ7SDN0x2bo3nW//xCymNhphu4E1MAN2PdVe9k6524ETODHXIHXvmpva+c9BqwpWhbgAV6Ar61zsxeggB+z+x1XJmsBG/Bj6mboWtVgtvcATfhpPvqq/ZwfzFKABTwoVobsBFjCj7kyWxmyugc4wsPCypCNAA/wY/L7C3iEP/dVe5geEC8gJDwIFxAaHgQLiAEPQgXEggeBAmLCgzABseFBkIAU8CBEQCp4ECAgJTwYChibCzYXWpmv9jCVFTwYCJgVa31BxXwucapFS4CiWOsLS4EHDQEbxRoXIAkeNgRoFqtdiDR4WBFgWOxmQRLhQdEQsSi2bobuqBqUCg8LvwDHYg991Z49zjeNd3iYCfBU7J8E6fAAT7PPOw9znpqhA3hDODz8F7Dnp2vqKmJ1O8ogQeFh+R7wjB8JrgkOD4plUICEKPCw/hyQSkI0eNh+EowtISo86L0LxJIQHR703wZDS0gCD2b9gFASksGDeUfIt4Sk8GDRE/QoITk8WDZFPUgQAQ8OXWEHCWLgwbEtbiFBFDx42BcwkCAOHjxtjGhIEAkPHneGViSIhQfPW2MLEkTDQ4C9wYmEi3T4kpKSkm+5ax+YhPsUTQAAAABJRU5ErkJggg==",'<div class="text2">Application succesfully authorized</div>You can close this browser window',"rgb(104, 164, 144)"]:["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABtElEQVR4nO2bUY7CMAxEhz0NB+EgrDjXCg6yB+E4+9NKCAiN7XHcjf1+ED+Z6ahNHScFiqIoBNwvp+v9crpG+3hG6+sgFQFwXv7ejj+/31JBDyy+ugN4ElkJD8HqqyuAhohYjA3D12YAGyIiMSYsXx8D6BTpFmPB9NUMQCjSJcaA7ettAEqRTTErHr5eAjCKfBSz4OXryzhgizOzWCJd/Fs8HoFHzHeCtxf2JNgt3MMID8zXoMpAtDarEDIbidJklMJUQ6MDty6GNDSNRdxtluWwhReDUfONKADAx2jkZCsOAOAaXn4pY2let6oAAN/qTIG61lAHAOwmBFO1aQoACA/BXGqbAwDCQqCsOCkBAMNDoC23aQEAw0Kg9hqoAQDuIdAbLfQAALcQXFptLgEA9BDc+oxeLbF/Qz0C7AFTT4KpX4OpC6HUpXDqxVDq5fBOLn5lbEMkdUssdVM0dVs89cZI6q2x1JujqbfHUx+Q2MPFj/LidUqsKajB05NXS4y6Zl/GurHGe6QOSpLF5jgqqxSb67C0UGzO4/KdYnN/MLEhluOTmYZY+MWvDPU122dzRVHk5g+X6Lw5aVkK9AAAAABJRU5ErkJggg==",'<div class="text2">Application authorization failed</div><br/>Please try again.',"rgb(216, 99, 68)"])},this.GetColorScheme=function(){var t=0;return t=0,"not all"!==window.matchMedia("(prefers-color-scheme)").media&&(t=window.matchMedia("(prefers-color-scheme: dark)").matches?2:1),t},this.ActivateChildScripts=function(t){!function t(e){if(!0===function(t){return"SCRIPT"===t.tagName}(e))e.parentNode.replaceChild(function(t){var e=document.createElement("script");e.async=!1,e.text=t.innerHTML;for(var i=t.attributes.length-1;i>=0;i--)e.setAttribute(t.attributes[i].name,t.attributes[i].value);return e}(e),e);else for(var i=0,s=e.childNodes;i<s.length;)t(s[i++]);return e}(t)},this.ChangeMaxZIndex=function(t){this.FMaxZIndex=this.FMaxZIndex+t},this.TriggerNotification=function(){},this.LockForm=function(t){for(var e=0,i=0,s=t.GetControlsCount()-1;i<=s;i++)e=i,t.GetControls(e).DisableTab()},this.UnLockForm=function(t){for(var e=0,i=0,s=t.GetControlsCount()-1;i<=s;i++)e=i,t.GetControls(e).EnableTab()},this.Create$1=function(t){return this.FFormStack=pas.Classes.TList.$create("Create$1"),this.FParameters=pas.Classes.TStringList.$create("Create$1"),this.FAppContainer=pas["WEBLib.WebTools"].cBodyTag,this.FMainForm=null,this.FActiveForm=null,this.FInitFormClassName="",this.FIsRedirect=!1,this.FAutoFormRoute=!1,this.FThemed=!1,this.FThemeColor=14917120,this.FThemeTextColor=16777215,this.FFormCaptionHeight=22,this.FMaxZIndex=999998,this.FHintPause=200,this.FHintHidePause=250,this.FHintPosition=1,this.FHintClassName="",window.addEventListener("error",rtl.createCallback(this,"DoHandleError")),window.addEventListener("unhandledrejection",rtl.createCallback(this,"DoHandleError")),this.FErrorType=0,this},this.Destroy=function(){rtl.free(this,"FFormStack"),rtl.free(this,"FParameters"),pas["WEBLib.Controls"].TControl.Destroy.call(this)},this.MaxZIndexStr=function(){return pas.SysUtils.IntToStr(this.FMaxZIndex)},this.CreateForm=function(t,e){this.CreateForm$2(t,this.FAppContainer,e,null)},this.CreateForm$2=function(t,e,i,s){this.CreateForm$3(t,e,i,s,!0)},this.CreateForm$3=function(e,i,s,n,r){var o=this,a="";function l(r){var l,h=null,F=null,p="",c=!1;return(l=null!=r)?(p=r.target.responseText,(h=(c=pas.SysUtils.LowerCase(i)===pas["WEBLib.WebTools"].cBodyTag)?document.body:document.getElementById(i)).innerHTML=p):h=document.body,(F=e.$create("Create$5",[i,s])).FFormFileName=a,""===F.FFormContainer&&F.SetFormContainer(i),c||(F.FFormElement=i,F.FContainer=h),F.CreateControl(),F.Init(),F.SetColorScheme(t.Application.GetColorScheme()),F.FPrevActiveForm=o.FActiveForm,o.FActiveForm=F,null===o.FMainForm&&(o.FMainForm=F),null!=n&&n(F),!0,l&&o.ActivateChildScripts(h),o.FActiveForm.DoShow(),o.FActiveForm.Resize$1(),!0}if(!this.FIsRedirect){if(this.FAppInitializing){if(!this.FCanCreateForm)return;this.FCanCreateForm=!1}""!==(a=e.GetHTMLFileName())&&r?(this.FLastReq=new XMLHttpRequest,this.FLastReq.addEventListener("load",rtl.createSafeCallback(null,l)),this.FLastReq.open("GET",a),this.FLastReq.send()):l(null)}},this.CreateForm$6=function(t,e,i){this.CreateForm$2(t,e.id,i,null)},this.LoadForm=function(t,e){t.FPrevActiveForm=this.FActiveForm,this.FActiveForm=t,this.FLoadForm=t,null===this.FMainForm&&(this.FMainForm=t),this.FLastReq=new XMLHttpRequest,this.FLastReq.addEventListener("load",rtl.createSafeCallback(this,"DoFormLoad")),this.FLastReq.addEventListener("abort",rtl.createSafeCallback(this,"DoFormAbort")),this.FLastReq.open("GET",e),this.FLastReq.send()},this.LoadForm$1=function(t,e,i){this.FCreatedProc=i,this.LoadForm(t,e)},this.HasCSS=function(t){var e=!1,i=null,s=0,n="";e=!1;for(var r=0,o=(i=document.querySelectorAll("head > link")).length-1;r<=o;r++)if(s=r,n=i.item(s).href,0===pas.SysUtils.CompareText(n,t)){e=!0;break}return e},this.Initialize=function(){var t,e,i="",s="";if(this.FCanCreateForm=!0,this.FAppInitializing=!0,this.FParameters.Clear(),i=window.location.href,this.InitFormatSettings(pas["WEBLib.WebTools"].GetBrowserLocale()),this.FParameters.SetDelimiter("&"),this.FParameters.FStrictDelimiter=!0,(t=pas.System.Pos("?",i))>0&&(i=pas.System.Copy(i,t+1,i.length)),this.FParameters.SetDelimitedText(i),e="Authentication"==window.name,null!=this.FOnOAuthCallBack&&(-1!==this.FParameters.IndexOfName("oauthcallback")||e))return this.FOnOAuthCallBack(this,i),this.FIsRedirect=!0,void(document.body.innerHTML=this.GetAuthorizationPageHTML(!0));null!=this.FOnOAuthToken&&-1!==this.FParameters.IndexOfName("code")&&(this.FOnOAuthToken(this,i),this.FIsRedirect=!0,s=this.FParameters.GetValue("code"),window.opener&&window.opener.processAuthData&&(window.opener.processAuthData(s),window.close())),window.addEventListener("hashchange",rtl.createSafeCallback(this,"DoHashChange")),window.addEventListener("online",rtl.createSafeCallback(this,"DoUpdateOnlineStatus")),window.addEventListener("offline",rtl.createSafeCallback(this,"DoUpdateOnlineStatus")),document.addEventListener("visibilitychange",rtl.createSafeCallback(this,"DoVisibilityChange")),null!==window.opener&&-1!==this.FParameters.IndexOfName("access_token")&&(this.FIsRedirect=!0,s=this.FParameters.GetValue("access_token"),window.opener&&window.opener.processAuthData&&(window.opener.processAuthData(s),window.close()))},this.InitFormatSettings=function(t){var e,i,s=0;i=t,pas.SysUtils.FormatSettings.ShortDateFormat=pas["WEBLib.WebTools"].GetLocaleShortDateFormat(i),pas.System.Pos("/",pas.SysUtils.FormatSettings.ShortDateFormat)>0&&(pas.SysUtils.FormatSettings.DateSeparator="/"),pas.System.Pos(".",pas.SysUtils.FormatSettings.ShortDateFormat)>0&&(pas.SysUtils.FormatSettings.DateSeparator="."),pas.System.Pos("-",pas.SysUtils.FormatSettings.ShortDateFormat)>0&&(pas.SysUtils.FormatSettings.DateSeparator="-");var n=new Date("Jan 1, 1980 06:07:08 GMT+00:00"),r="";for(r=""==i?navigator.language:i,e=n.toLocaleTimeString(r),pas.System.Pos(":",e)>0&&(pas.SysUtils.FormatSettings.TimeSeparator=":"),pas.System.Pos(".",e)>0&&(pas.SysUtils.FormatSettings.TimeSeparator="."),pas.System.Pos("-",e)>0&&(pas.SysUtils.FormatSettings.TimeSeparator="-"),s=1;s<=7;s++)pas.SysUtils.FormatSettings.ShortDayNames[s-1]=pas["WEBLib.WebTools"].GetLocaleShortDayName(s,i),pas.SysUtils.FormatSettings.LongDayNames[s-1]=pas["WEBLib.WebTools"].GetLocaleLongDayName(s,i);for(s=1;s<=12;s++)pas.SysUtils.FormatSettings.ShortMonthNames[s-1]=pas["WEBLib.WebTools"].GetLocaleShortMonthName(s,i),pas.SysUtils.FormatSettings.LongMonthNames[s-1]=pas["WEBLib.WebTools"].GetLocaleLongMonthName(s,i);pas.SysUtils.FormatSettings.DecimalSeparator=pas["WEBLib.WebTools"].GetLocaleDecimalSeparator(""),"."===pas.SysUtils.FormatSettings.DecimalSeparator?pas.SysUtils.FormatSettings.ThousandSeparator=",":pas.SysUtils.FormatSettings.ThousandSeparator="."},this.Run=function(){this.FCanCreateForm=!0,this.FAppInitializing=!1},rtl.addIntf(this,pas.System.IUnknown)})),this.GetParentForm=function(e){var i=null,s=null;for(i=null,s=e;null!=s&&!t.TCustomForm.isPrototypeOf(s);)s=s.FOwner;return null!=s&&t.TCustomForm.isPrototypeOf(s)&&(i=rtl.as(s,t.TCustomForm)),i},this.WinWidth=function(){return null!=t.VSIDE?pas["WEBLib.Forms"].VSIDE.clientWidth():window.innerWidth},this.WinHeight=function(){return null!=t.VSIDE?pas["WEBLib.Forms"].VSIDE.clientHeight():window.innerHeight},this.Application=null,this.HandShakeScript=null,this.VSIDE=null,t.$implcode=function(){e.ReleaseForm=function(t){t=rtl.freeLoc(t),t=null}},t.$init=function(){t.HandShakeScript=document.createElement("script"),t.HandShakeScript.id="HandShakeScript",t.HandShakeScript.type="text/javascript",t.HandShakeScript.innerHTML='var IDE = null;\r\nvar TMSWEBCoreClientIdentifier = "unknown";\r\nvar TMSWEBCoreOAuthCallback = "unknown";\r\nfunction HandShake(cid){\r\n  TMSWEBCoreClientIdentifier = cid;\r\n}',document.body.appendChild(t.HandShakeScript),t.Application=t.TApplication.$create("Create$1",[null])}}),["WEBLib.Dialogs","WEBLib.WebTools","WEBLib.JSON","WEBLib.Utils","Math"]),rtl.module("DateUtils",["System","SysUtils","Math"],(function(){"use strict";this.YearOf=function(t){var e=0,i=0,s=0;return pas.SysUtils.DecodeDate(t,{get:function(){return e},set:function(t){e=t}},{get:function(){return i},set:function(t){i=t}},{get:function(){return s},set:function(t){s=t}}),e},this.MonthOf=function(t){var e=0,i=0,s=0;return pas.SysUtils.DecodeDate(t,{get:function(){return i},set:function(t){i=t}},{get:function(){return e},set:function(t){e=t}},{get:function(){return s},set:function(t){s=t}}),e},this.DayOf=function(t){var e=0,i=0,s=0;return pas.SysUtils.DecodeDate(t,{get:function(){return i},set:function(t){i=t}},{get:function(){return s},set:function(t){s=t}},{get:function(){return e},set:function(t){e=t}}),e},this.HourOf=function(t){var e=0,i=0,s=0,n=0;return pas.SysUtils.DecodeTime(t,{get:function(){return e},set:function(t){e=t}},{get:function(){return i},set:function(t){i=t}},{get:function(){return s},set:function(t){s=t}},{get:function(){return n},set:function(t){n=t}}),e},this.MinuteOf=function(t){var e=0,i=0,s=0,n=0;return pas.SysUtils.DecodeTime(t,{get:function(){return i},set:function(t){i=t}},{get:function(){return e},set:function(t){e=t}},{get:function(){return s},set:function(t){s=t}},{get:function(){return n},set:function(t){n=t}}),e},this.SecondOf=function(t){var e=0,i=0,s=0,n=0;return pas.SysUtils.DecodeTime(t,{get:function(){return i},set:function(t){i=t}},{get:function(){return s},set:function(t){s=t}},{get:function(){return e},set:function(t){e=t}},{get:function(){return n},set:function(t){n=t}}),e}}),["JS","RTLConsts"]),rtl.module("WEBLib.TMSFNCUtils",["System","Classes","SysUtils","Types","WEBLib.Graphics","WEBLib.TMSFNCTypes","WEBLib.Controls","WEBLib.Forms","JS","WEBLib.Dialogs","WEBLib.JSON","Web"],(function(){"use strict";var t=this,e=t.$impl;rtl.recNewT(this,"TTMSFNCUtilsFile",(function(){this.Data=null,this.Name="",this.$eq=function(t){return this.Data===t.Data&&this.Name===t.Name},this.$assign=function(t){return this.Data=t.Data,this.Name=t.Name,this}})),rtl.createClass(this,"TTMSFNCUtils",pas.System.TObject,(function(){this.GetFonts=function(t){t.BeginUpdate(),t.Add("Arial"),t.Add("Tahoma"),t.Add("SimSun"),t.Add("Arial Unicode MS"),t.Add("Helvetica"),t.Add("Times New Roman"),t.Add("Times"),t.Add("Courier New"),t.Add("Courier"),t.Add("Verdana"),t.Add("Georgia"),t.Add("Palatino"),t.Add("Garamond"),t.Add("Bookman"),t.Add("Comic Sans MS"),t.Add("Trebuchet MS"),t.Add("Arial Black"),t.Add("Impact"),t.Add("Roboto"),t.Sort(),t.EndUpdate()},this.SetFontSize=function(t,e,i){t.SetSize(Math.round(e/96*72))},this.IsHTMLUnicode=function(t){return this.IsHTML(t)},this.IsHTML=function(t){return pas.System.Pos("</",t)>0||pas.System.Pos("/>",t)>0||pas.System.Pos("<BR>",pas.SysUtils.UpperCase(t))>0},this.GetMousePos=function(){var t=pas["WEBLib.TMSFNCTypes"].TPointF.$new(),e=pas.Types.TPoint.$new();return t.$assign(pas["WEBLib.TMSFNCTypes"].PointF(-1,-1)),e.$assign(pas["WEBLib.Controls"].GetMousePos()),t.$assign(pas["WEBLib.TMSFNCTypes"].PointF(e.x,e.y)),t},this.GetDPIScale=function(t,e){return 1,1},this.VarPos=function(t,e,i){rtl.rc(i.get(),-2147483648,2147483647);return i.set(pas.System.Pos(t,e)),rtl.rc(i.get(),-2147483648,2147483647)},this.CharInStr=function(t,e){var i="";return i="\0",e>0&&e<=t.length&&(i=t.charAt(e-1)),i},this.URLDecode=function(t){return""===t?"":decodeURIComponent(t)},this.SaveStreamToBase64=function(e,i){var s=[],n=[];e.SetPosition(0);for(var r=1,o=e.GetSize();r<=o;r++)r,s=rtl.arraySetLength(s,0,1),e.Read({get:function(){return s},set:function(t){s=t}},1),(n=rtl.arraySetLength(n,0,rtl.length(n)+1))[rtl.length(n)-1]=s[0];return t.TTMSFNCUtils.Encode64$1(n,i)},this.CreateBitmapFromBase64=function(t,e){var i;return i=pas["WEBLib.TMSFNCTypes"].TTMSFNCBitmap.$create("Create$3"),this.LoadBitmapFromBase64(t,i,e),i},this.MulDivInt=function(t,e,i){var s,n=0;return 0===i?n=-1:n=(s=t*e/i)>=0?pas.System.Trunc(s+.5):pas.System.Trunc(s-.5),n},this.LoadBitmapFromBase64=function(t,e,i){var s="";s=t,pas.System.Pos(";base64,",s)>0||(s="data:image/png;base64,"+s),e.LoadFromResource(s)},this.GetFileExtension=function(t){var i,s="",n=0;if(i=pas.SysUtils.LowerCase(t),s="",null!=e.FMimeTypes)for(var r=0,o=e.FMimeTypes.GetCount()-1;r<=o;r++)if(n=r,e.FMimeTypes.GetValueFromIndex(n)===i)return s=e.FMimeTypes.GetName(n);return s},this.Encode64$1=function(t,e){var i="",s="";if(i="",0===rtl.length(t))return i;return s="",s=function(t){for(var e="",i=new Uint8Array(t),s=i.byteLength,n=0;n<s;n++)e+=String.fromCharCode(i[n]);return window.btoa(e)}(rtl.arrayRef(t)),e&&(s=pas.SysUtils.StringReplace(s,"+","-",rtl.createSet(0,1)),s=pas.SysUtils.StringReplace(s,"/","_",rtl.createSet(0,1)),s=pas.SysUtils.StringReplace(s,"=","",rtl.createSet(0,1))),i=s},this.GetJSONValue=function(t,e){var i=null;i=null;try{pas["WEBLib.JSON"].TJSONObject.isPrototypeOf(t)&&(i=rtl.as(t,pas["WEBLib.JSON"].TJSONObject).GetValue$1(e))}catch(t){}return i},this.GetJSONIntegerValue=function(t,e){return this.GetJSONValueAsInteger(this.GetJSONValue(t,e))},this.GetJSONValueAsInteger=function(t){var e,i=0;return i=0,null!=(e=t)&&pas["WEBLib.JSON"].TJSONNumber.isPrototypeOf(e)&&(i=rtl.as(e,pas["WEBLib.JSON"].TJSONNumber).FInt),i},this.IsJSONTrue=function(t){var e=!1;return e=!1,null!=t&&(e="true"===t.GetStrValue()),e},this.ParseJSON=function(t){return pas["WEBLib.JSON"].TJSONObject.ParseJSONValue(t)},this.CharInSet=function(t,e){var i=!1;i=!1;for(var s=0,n=rtl.length(e)-1;s<=n;s++)if(t===e[s]){i=!0;break}return i},this.CreateCharSet=function(t){var e=[],i=0;e=rtl.arraySetLength(e,"",t.length);for(var s=1,n=t.length;s<=n;s++)e[(i=s)-1]=this.CharInStr(t,i);return e},this.IPos=function(t,e){return pas.System.Pos(pas.SysUtils.UpperCase(t),pas.SysUtils.UpperCase(e))},this.UnFixMarkup=function(t,i,s){var n=0;if(!s){for(;pas.System.Pos("&lt;",t)>0;)this.TagReplaceString("&lt;","<",{get:function(){return t},set:function(e){t=e}});for(;pas.System.Pos("&gt;",t)>0;)this.TagReplaceString("&gt;",">",{get:function(){return t},set:function(e){t=e}});for(;pas.System.Pos("&amp;",t)>0;)this.TagReplaceString("&amp;","&",{get:function(){return t},set:function(e){t=e}});for(;pas.System.Pos("&quot;",t)>0;)this.TagReplaceString("&quot;",'"',{get:function(){return t},set:function(e){t=e}})}if(i)for(n=4;n<=86;n++)for(;pas.System.Pos(e.HTMLSpecialChar[n-1],t)>0;)this.TagReplaceString(e.HTMLSpecialChar[n-1],e.HTMLEncodedChar[n-1],{get:function(){return t},set:function(e){t=e}});return t},this.TagReplaceString=function(t,e,i){var s,n=!1;return(s=this.IPos(t,i.get()))>0?(n=!0,pas.System.Delete(i,s,t.length),i.set(pas.System.Copy(i.get(),1,s-1)+e+pas.System.Copy(i.get(),s,i.get().length))):n=!1,n},this.IndexOfTextInArray=function(t,e){var i=0,s=0;i=-1;for(var n=0,r=rtl.length(e)-1;n<=r;n++)if(s=n,pas.SysUtils.SameText(t,e[s])){if(!(pas.System.Pos("cute",t)>0||pas.System.Pos("grave",t)>0||pas.System.Pos("uml",t)>0||pas.System.Pos("circ",t)>0||pas.System.Pos("tilde",t)>0||pas.System.Pos("ring",t)>0||pas.System.Pos("cedil",t)>0)){i=s;break}if(t===e[s]){i=s;break}}return i},this.GetParentForm=function(t){var e,i=null;return i=null,null==(e=t)?i:i=pas["WEBLib.Forms"].TCustomForm.isPrototypeOf(e.FParent)?rtl.as(e.FParent,pas["WEBLib.Forms"].TCustomForm):this.GetParentForm(e.FParent)},this.GetOwnerForm=function(t){var e,i=null;return i=null,null==(e=t)?i:i=pas["WEBLib.Forms"].TCustomForm.isPrototypeOf(e.FOwner)?rtl.as(e.FOwner,pas["WEBLib.Forms"].TCustomForm):this.GetOwnerForm(e.FOwner)},this.EscapeString=function(t){var i="",s="",n="",r=0;function o(t,i){var s=!1,n=0;for(s=!1,i.set(""),n=1;n<=7;n++)if(t===e.JSONSpecialChar[n-1]){i.set(e.JSONEncodedSpecialChar[n-1]),s=!0;break}return s}i="";for(var a=1,l=t.length;a<=l;a++)r=a,(n=this.CharInStr(t,r))>""?i=i+"\\u"+pas.SysUtils.IntToHex(n.charCodeAt(),4):(s="",o(n,{get:function(){return s},set:function(t){s=t}})?i+=s:i+=n);return i},this.UnescapeString=function(t){var e=0,i=0,s=0,n="",r=0;for(n=rtl.strSetLength(n,t.length),0,e=1,i=1;e<=t.length;){if("\\"===t.charAt(e-0-1)){if(!(e<t.length))throw pas.SysUtils.Exception.$create("Create$1",["Unexpected end of string"]);if("\\"===t.charAt(e+1-0-1))r=i-0,n=rtl.setCharAt(n,r-1,"\\"),e+=2;else if("/"===t.charAt(e+1-0-1))r=i-0,n=rtl.setCharAt(n,r-1,"/"),e+=2;else if("b"===t.charAt(e+1-0-1))r=i-0,n=rtl.setCharAt(n,r-1,"\b"),e+=2;else if("f"===t.charAt(e+1-0-1))r=i-0,n=rtl.setCharAt(n,r-1,"\f"),e+=2;else if("n"===t.charAt(e+1-0-1))r=i-0,n=rtl.setCharAt(n,r-1,"\n"),e+=2;else if("r"===t.charAt(e+1-0-1))r=i-0,n=rtl.setCharAt(n,r-1,"\r"),e+=2;else if("t"===t.charAt(e+1-0-1))r=i-0,n=rtl.setCharAt(n,r-1,"\t"),e+=2;else if('"'===t.charAt(e+1-0-1))r=i-0,n=rtl.setCharAt(n,r-1,'"'),e+=2;else{if(!("u"===t.charAt(e+1-0-1)&&e+1+4<=t.length&&pas.SysUtils.TryStrToInt("$"+pas.System.Copy(t,e+2,4),{get:function(){return s},set:function(t){s=t}})))throw pas.SysUtils.Exception.$create("CreateFmt",["Invalid code at position %s",pas.System.VarRecs(18,pas.SysUtils.IntToStr(e))]);e+=6,r=i-0,n=rtl.setCharAt(n,r-1,String.fromCharCode(s))}}else r=i-0,n=rtl.setCharAt(n,r-1,t.charAt(e-0-1)),e+=1;i+=1}return n=rtl.strSetLength(n,i-1)}})),t.$implcode=function(){e.HTMLNumSpecialChar=86,e.JSONNumSpecialChar=7,e.HTMLEncodedChar=["&","<",">",'"'," ","é","è","ë","ê","ó","ò","ö","ô","í","ì","ï","î","ú","ù","ü","û","á","à","ä","â","É","È","Ë","Ê","Ó","Ò","Ö","Ô","Í","Ì","Ï","Î","Ú","Ù","Ü","Û","Á","À","Ä","Â","ç","Ç","ø","Ø","å","Å","©","®","€","«","»","ã","Ã","õ","Õ","™","§","¶","ß","£","$","§","‰","¶","'","¥","¤","¢","±","¡","°","ý","Ý","¼","½","¾","Æ","æ","Ñ","ñ","Ð"],e.HTMLSpecialChar=["amp;","lt;","gt;","quot;","&nbsp;","&eacute;","&egrave;","&euml;","&ecirc;","&oacute;","&ograve;","&ouml;","&ocirc;","&iacute;","&igrave;","&iuml;","&icirc;","&uacute;","&ugrave;","&uuml;","&ucirc;","&aacute;","&agrave;","&auml;","&acirc;","&Eacute;","&Egrave;","&Euml;","&Ecirc;","&Oacute;","&Ograve;","&Ouml;","&Ocirc;","&Iacute;","&Igrave;","&Iuml;","&Icirc;","&Uacute;","&Ugrave;","&Uuml;","&Ucirc;","&Aacute;","&Agrave;","&Auml;","&Acirc;","&ccedil;","&Ccedil;","&oslash;","&Oslash;","&aring;","&Aring;","&copy;","&reg;","&euro;","&laquo;","&raquo;","&atilde;","&Atilde;","&otilde;","&Otilde","&trade;","&sect;","&para;","&szlig;","&pound;","&#36;","&sect;","&permil;","&para;","&#39;","&yen;","&curren;","&cent;","&plusmn;","&iexcl;","&deg;","&#x00FD;","&#221;","&frac14;","&frac12;","&frac34;","&AElig;","&aelig;","&Ntilde;","&ntilde;","&ETH;"],e.JSONSpecialChar=['"',"\\","\b","\f","\n","\r","\t"],e.JSONEncodedSpecialChar=["\\u0022","\\u005C","\\u0008","\\u000C","\\u000A","\\u000D","\\u0009"],e.FMimeTypes=null,e.RegisterMimeTypes=function(){function t(t,i){e.FMimeTypes.Add(t+e.FMimeTypes.GetNameValueSeparator()+i)}t("ez","application/andrew-inset"),t("aw","application/applixware"),t("atom","application/atom+xml"),t("atomcat","application/atomcat+xml"),t("atomsvc","application/atomsvc+xml"),t("bson","application/bson"),t("ccxml","application/ccxml+xml"),t("cdmia","application/cdmi-capability"),t("cdmic","application/cdmi-container"),t("cdmid","application/cdmi-domain"),t("cdmio","application/cdmi-object"),t("cdmiq","application/cdmi-queue"),t("cu","application/cu-seeme"),t("davmount","application/davmount+xml"),t("dbk","application/docbook+xml"),t("dssc","application/dssc+der"),t("xdssc","application/dssc+xml"),t("ecma","application/ecmascript"),t("emma","application/emma+xml"),t("epub","application/epub+zip"),t("exi","application/exi"),t("pfr","application/font-tdpfr"),t("gml","application/gml+xml"),t("gpx","application/gpx+xml"),t("gxf","application/gxf"),t("stk","application/hyperstudio"),t("ink","application/inkml+xml"),t("inkml","application/inkml+xml"),t("ipfix","application/ipfix"),t("jar","application/java-archive"),t("ser","application/java-serialized-object"),t("class","application/java-vm"),t("js","application/javascript"),t("json","application/json"),t("jsonml","application/jsonml+json"),t("lostxml","application/lost+xml"),t("hqx","application/mac-binhex40"),t("cpt","application/mac-compactpro"),t("mads","application/mads+xml"),t("mrc","application/marc"),t("mrcx","application/marcxml+xml"),t("ma","application/mathematica"),t("nb","application/mathematica"),t("mb","application/mathematica"),t("mathml","application/mathml+xml"),t("mbox","application/mbox"),t("mscml","application/mediaservercontrol+xml"),t("metalink","application/metalink+xml"),t("meta4","application/metalink4+xml"),t("mets","application/mets+xml"),t("mods","application/mods+xml"),t("m21","application/mp21"),t("mp21","application/mp21"),t("mp4s","application/mp4"),t("doc","application/msword"),t("dot","application/msword"),t("mxf","application/mxf"),t("bin","application/octet-stream"),t("bpk","application/octet-stream"),t("class","application/octet-stream"),t("deploy","application/octet-stream"),t("dist","application/octet-stream"),t("distz","application/octet-stream"),t("dmg","application/octet-stream"),t("dms","application/octet-stream"),t("dump","application/octet-stream"),t("elc","application/octet-stream"),t("iso","application/octet-stream"),t("lha","application/octet-stream"),t("lrf","application/octet-stream"),t("lzh","application/octet-stream"),t("mar","application/octet-stream"),t("pkg","application/octet-stream"),t("so","application/octet-stream"),t("oda","application/oda"),t("opf","application/oebps-package+xml"),t("ogx","application/ogg"),t("omdoc","application/omdoc+xml"),t("onetoc","application/onenote"),t("onetoc2","application/onenote"),t("onetmp","application/onenote"),t("onepkg","application/onenote"),t("oxps","application/oxps"),t("xer","application/patch-ops-error+xml"),t("pdf","application/pdf"),t("pgp","application/pgp-encrypted"),t("asc","application/pgp-signature"),t("sig","application/pgp-signature"),t("prf","application/pics-rules"),t("p10","application/pkcs10"),t("p7m","application/pkcs7-mime"),t("p7c","application/pkcs7-mime"),t("p7s","application/pkcs7-signature"),t("p8","application/pkcs8"),t("ac","application/pkix-attr-cert"),t("cer","application/pkix-cert"),t("crl","application/pkix-crl"),t("pkipath","application/pkix-pkipath"),t("pki","application/pkixcmp"),t("pls","application/pls+xml"),t("ai","application/postscript"),t("eps","application/postscript"),t("ps","application/postscript"),t("cww","application/prs.cww"),t("pskcxml","application/pskc+xml"),t("rdf","application/rdf+xml"),t("rif","application/reginfo+xml"),t("rnc","application/relax-ng-compact-syntax"),t("rl","application/resource-lists+xml"),t("rld","application/resource-lists-diff+xml"),t("rs","application/rls-services+xml"),t("gbr","application/rpki-ghostbusters"),t("mft","application/rpki-manifest"),t("roa","application/rpki-roa"),t("rsd","application/rsd+xml"),t("rss","application/rss+xml"),t("rtf","application/rtf"),t("sbml","application/sbml+xml"),t("scq","application/scvp-cv-request"),t("scs","application/scvp-cv-response"),t("spq","application/scvp-vp-request"),t("spp","application/scvp-vp-response"),t("sdp","application/sdp"),t("setpay","application/set-payment-initiation"),t("setreg","application/set-registration-initiation"),t("shf","application/shf+xml"),t("smi","application/smil+xml"),t("smil","application/smil+xml"),t("soap","application/soap+xml"),t("rq","application/sparql-query"),t("srx","application/sparql-results+xml"),t("gram","application/srgs"),t("grxml","application/srgs+xml"),t("sru","application/sru+xml"),t("ssdl","application/ssdl+xml"),t("ssml","application/ssml+xml"),t("tei","application/tei+xml"),t("teicorpus","application/tei+xml"),t("tfi","application/thraud+xml"),t("tsd","application/timestamped-data"),t("plb","application/vnd.3gpp.pic-bw-large"),t("psb","application/vnd.3gpp.pic-bw-small"),t("pvb","application/vnd.3gpp.pic-bw-var"),t("tcap","application/vnd.3gpp2.tcap"),t("pwn","application/vnd.3m.post-it-notes"),t("aso","application/vnd.accpac.simply.aso"),t("imp","application/vnd.accpac.simply.imp"),t("acu","application/vnd.acucobol"),t("atc","application/vnd.acucorp"),t("acutc","application/vnd.acucorp"),t("air","application/vnd.adobe.air-application-installer-package+zip"),t("fcdt","application/vnd.adobe.formscentral.fcdt"),t("fxp","application/vnd.adobe.fxp"),t("fxpl","application/vnd.adobe.fxp"),t("xdp","application/vnd.adobe.xdp+xml"),t("xfdf","application/vnd.adobe.xfdf"),t("ahead","application/vnd.ahead.space"),t("azf","application/vnd.airzip.filesecure.azf"),t("azs","application/vnd.airzip.filesecure.azs"),t("azw","application/vnd.amazon.ebook"),t("acc","application/vnd.americandynamics.acc"),t("ami","application/vnd.amiga.ami"),t("apk","application/vnd.android.package-archive"),t("cii","application/vnd.anser-web-certificate-issue-initiation"),t("fti","application/vnd.anser-web-funds-transfer-initiation"),t("atx","application/vnd.antix.game-component"),t("mpkg","application/vnd.apple.installer+xml"),t("m3u8","application/vnd.apple.mpegurl"),t("swi","application/vnd.aristanetworks.swi"),t("iota","application/vnd.astraea-software.iota"),t("aep","application/vnd.audiograph"),t("mpm","application/vnd.blueice.multipass"),t("bmi","application/vnd.bmi"),t("rep","application/vnd.businessobjects"),t("cdxml","application/vnd.chemdraw+xml"),t("mmd","application/vnd.chipnuts.karaoke-mmd"),t("cdy","application/vnd.cinderella"),t("cla","application/vnd.claymore"),t("rp9","application/vnd.cloanto.rp9"),t("c4g","application/vnd.clonk.c4group"),t("c4d","application/vnd.clonk.c4group"),t("c4f","application/vnd.clonk.c4group"),t("c4p","application/vnd.clonk.c4group"),t("c4u","application/vnd.clonk.c4group"),t("c11amc","application/vnd.cluetrust.cartomobile-config"),t("c11amz","application/vnd.cluetrust.cartomobile-config-pkg"),t("csp","application/vnd.commonspace"),t("cdbcmsg","application/vnd.contact.cmsg"),t("cmc","application/vnd.cosmocaller"),t("clkx","application/vnd.crick.clicker"),t("clkk","application/vnd.crick.clicker.keyboard"),t("clkp","application/vnd.crick.clicker.palette"),t("clkt","application/vnd.crick.clicker.template"),t("clkw","application/vnd.crick.clicker.wordbank"),t("wbs","application/vnd.criticaltools.wbs+xml"),t("pml","application/vnd.ctc-posml"),t("ppd","application/vnd.cups-ppd"),t("car","application/vnd.curl.car"),t("pcurl","application/vnd.curl.pcurl"),t("dart","application/vnd.dart"),t("rdz","application/vnd.data-vision.rdz"),t("uvf","application/vnd.dece.data"),t("uvvf","application/vnd.dece.data"),t("uvd","application/vnd.dece.data"),t("uvvd","application/vnd.dece.data"),t("uvt","application/vnd.dece.ttml+xml"),t("uvvt","application/vnd.dece.ttml+xml"),t("uvx","application/vnd.dece.unspecified"),t("uvvx","application/vnd.dece.unspecified"),t("uvz","application/vnd.dece.zip"),t("uvvz","application/vnd.dece.zip"),t("fe_launch","application/vnd.denovo.fcselayout-link"),t("dna","application/vnd.dna"),t("mlp","application/vnd.dolby.mlp"),t("dpg","application/vnd.dpgraph"),t("dfac","application/vnd.dreamfactory"),t("kpxx","application/vnd.ds-keypoint"),t("ait","application/vnd.dvb.ait"),t("svc","application/vnd.dvb.service"),t("geo","application/vnd.dynageo"),t("mag","application/vnd.ecowin.chart"),t("nml","application/vnd.enliven"),t("esf","application/vnd.epson.esf"),t("msf","application/vnd.epson.msf"),t("qam","application/vnd.epson.quickanime"),t("slt","application/vnd.epson.salt"),t("ssf","application/vnd.epson.ssf"),t("es3","application/vnd.eszigno3+xml"),t("et3","application/vnd.eszigno3+xml"),t("ez2","application/vnd.ezpix-album"),t("ez3","application/vnd.ezpix-package"),t("fdf","application/vnd.fdf"),t("mseed","application/vnd.fdsn.mseed"),t("seed","application/vnd.fdsn.seed"),t("dataless","application/vnd.fdsn.seed"),t("json","application/vnd.firedac.json"),t("xml","application/vnd.firedac.xml"),t("bin","application/vnd.firedac.bin"),t("gph","application/vnd.flographit"),t("ftc","application/vnd.fluxtime.clip"),t("fm","application/vnd.framemaker"),t("frame","application/vnd.framemaker"),t("maker","application/vnd.framemaker"),t("book","application/vnd.framemaker"),t("fnc","application/vnd.frogans.fnc"),t("ltf","application/vnd.frogans.ltf"),t("fsc","application/vnd.fsc.weblaunch"),t("oas","application/vnd.fujitsu.oasys"),t("oa2","application/vnd.fujitsu.oasys2"),t("oa3","application/vnd.fujitsu.oasys3"),t("fg5","application/vnd.fujitsu.oasysgp"),t("bh2","application/vnd.fujitsu.oasysprs"),t("ddd","application/vnd.fujixerox.ddd"),t("xdw","application/vnd.fujixerox.docuworks"),t("xbd","application/vnd.fujixerox.docuworks.binder"),t("fzs","application/vnd.fuzzysheet"),t("txd","application/vnd.genomatix.tuxedo"),t("ggb","application/vnd.geogebra.file"),t("ggt","application/vnd.geogebra.tool"),t("gex","application/vnd.geometry-explorer"),t("gre","application/vnd.geometry-explorer"),t("gxt","application/vnd.geonext"),t("g2w","application/vnd.geoplan"),t("g3w","application/vnd.geospace"),t("gmx","application/vnd.gmx"),t("kml","application/vnd.google-earth.kml+xml"),t("kmz","application/vnd.google-earth.kmz"),t("gqf","application/vnd.grafeq"),t("gqs","application/vnd.grafeq"),t("gac","application/vnd.groove-account"),t("ghf","application/vnd.groove-help"),t("gim","application/vnd.groove-identity-message"),t("grv","application/vnd.groove-injector"),t("gtm","application/vnd.groove-tool-message"),t("tpl","application/vnd.groove-tool-template"),t("vcg","application/vnd.groove-vcard"),t("hal","application/vnd.hal+xml"),t("zmm","application/vnd.handheld-entertainment+xml"),t("hbci","application/vnd.hbci"),t("les","application/vnd.hhe.lesson-player"),t("hpgl","application/vnd.hp-hpgl"),t("hpid","application/vnd.hp-hpid"),t("hps","application/vnd.hp-hps"),t("jlt","application/vnd.hp-jlyt"),t("pcl","application/vnd.hp-pcl"),t("pclxl","application/vnd.hp-pclxl"),t("sfd-hdstx","application/vnd.hydrostatix.sof-data"),t("mpy","application/vnd.ibm.minipay"),t("afp","application/vnd.ibm.modcap"),t("listafp","application/vnd.ibm.modcap"),t("list3820","application/vnd.ibm.modcap"),t("irm","application/vnd.ibm.rights-management"),t("sc","application/vnd.ibm.secure-container"),t("icc","application/vnd.iccprofile"),t("icm","application/vnd.iccprofile"),t("igl","application/vnd.igloader"),t("ivp","application/vnd.immervision-ivp"),t("ivu","application/vnd.immervision-ivu"),t("igm","application/vnd.insors.igm"),t("xpw","application/vnd.intercon.formnet"),t("xpx","application/vnd.intercon.formnet"),t("i2g","application/vnd.intergeo"),t("qbo","application/vnd.intu.qbo"),t("qfx","application/vnd.intu.qfx"),t("rcprofile","application/vnd.ipunplugged.rcprofile"),t("irp","application/vnd.irepository.package+xml"),t("xpr","application/vnd.is-xpr"),t("fcs","application/vnd.isac.fcs"),t("jam","application/vnd.jam"),t("rms","application/vnd.jcp.javame.midlet-rms"),t("jisp","application/vnd.jisp"),t("joda","application/vnd.joost.joda-archive"),t("ktz","application/vnd.kahootz"),t("ktr","application/vnd.kahootz"),t("karbon","application/vnd.kde.karbon"),t("chrt","application/vnd.kde.kchart"),t("kfo","application/vnd.kde.kformula"),t("flw","application/vnd.kde.kivio"),t("kon","application/vnd.kde.kontour"),t("kpr","application/vnd.kde.kpresenter"),t("kpt","application/vnd.kde.kpresenter"),t("ksp","application/vnd.kde.kspread"),t("kwd","application/vnd.kde.kword"),t("kwt","application/vnd.kde.kword"),t("htke","application/vnd.kenameaapp"),t("kia","application/vnd.kidspiration"),t("kne","application/vnd.kinar"),t("knp","application/vnd.kinar"),t("skp","application/vnd.koan"),t("skd","application/vnd.koan"),t("skt","application/vnd.koan"),t("skm","application/vnd.koan"),t("sse","application/vnd.kodak-descriptor"),t("lasxml","application/vnd.las.las+xml"),t("lbd","application/vnd.llamagraphics.life-balance.desktop"),t("lbe","application/vnd.llamagraphics.life-balance.exchange+xml"),t("123","application/vnd.lotus-1-2-3"),t("apr","application/vnd.lotus-approach"),t("pre","application/vnd.lotus-freelance"),t("nsf","application/vnd.lotus-notes"),t("org","application/vnd.lotus-organizer"),t("scm","application/vnd.lotus-screencam"),t("lwp","application/vnd.lotus-wordpro"),t("portpkg","application/vnd.macports.portpkg"),t("mcd","application/vnd.mcd"),t("mc1","application/vnd.medcalcdata"),t("cdkey","application/vnd.mediastation.cdkey"),t("mwf","application/vnd.mfer"),t("mfm","application/vnd.mfmp"),t("flo","application/vnd.micrografx.flo"),t("igx","application/vnd.micrografx.igx"),t("mif","application/vnd.mif"),t("daf","application/vnd.mobius.daf"),t("dis","application/vnd.mobius.dis"),t("mbk","application/vnd.mobius.mbk"),t("mqy","application/vnd.mobius.mqy"),t("msl","application/vnd.mobius.msl"),t("plc","application/vnd.mobius.plc"),t("txf","application/vnd.mobius.txf"),t("mpn","application/vnd.mophun.application"),t("mpc","application/vnd.mophun.certificate"),t("xul","application/vnd.mozilla.xul+xml"),t("cil","application/vnd.ms-artgalry"),t("cab","application/vnd.ms-cab-compressed"),t("xls","application/vnd.ms-excel"),t("xlm","application/vnd.ms-excel"),t("xla","application/vnd.ms-excel"),t("xlc","application/vnd.ms-excel"),t("xlt","application/vnd.ms-excel"),t("xlw","application/vnd.ms-excel"),t("xlam","application/vnd.ms-excel.addin.macroenabled.12"),t("xlsb","application/vnd.ms-excel.sheet.binary.macroenabled.12"),t("xlsm","application/vnd.ms-excel.sheet.macroenabled.12"),t("xltm","application/vnd.ms-excel.template.macroenabled.12"),t("eot","application/vnd.ms-fontobject"),t("chm","application/vnd.ms-htmlhelp"),t("ims","application/vnd.ms-ims"),t("lrm","application/vnd.ms-lrm"),t("thmx","application/vnd.ms-officetheme"),t("cat","application/vnd.ms-pki.seccat"),t("stl","application/vnd.ms-pki.stl"),t("ppt","application/vnd.ms-powerpoint"),t("pps","application/vnd.ms-powerpoint"),t("pot","application/vnd.ms-powerpoint"),t("ppam","application/vnd.ms-powerpoint.addin.macroenabled.12"),t("pptm","application/vnd.ms-powerpoint.presentation.macroenabled.12"),t("sldm","application/vnd.ms-powerpoint.slide.macroenabled.12"),t("ppsm","application/vnd.ms-powerpoint.slideshow.macroenabled.12"),t("potm","application/vnd.ms-powerpoint.template.macroenabled.12"),t("mpp","application/vnd.ms-project"),t("mpt","application/vnd.ms-project"),t("docm","application/vnd.ms-word.document.macroenabled.12"),t("dotm","application/vnd.ms-word.template.macroenabled.12"),t("wps","application/vnd.ms-works"),t("wks","application/vnd.ms-works"),t("wcm","application/vnd.ms-works"),t("wdb","application/vnd.ms-works"),t("wpl","application/vnd.ms-wpl"),t("xps","application/vnd.ms-xpsdocument"),t("mseq","application/vnd.mseq"),t("mus","application/vnd.musician"),t("msty","application/vnd.muvee.style"),t("taglet","application/vnd.mynfc"),t("nlu","application/vnd.neurolanguage.nlu"),t("ntf","application/vnd.nitf"),t("nitf","application/vnd.nitf"),t("nnd","application/vnd.noblenet-directory"),t("nns","application/vnd.noblenet-sealer"),t("nnw","application/vnd.noblenet-web"),t("ngdat","application/vnd.nokia.n-gage.data"),t("n-gage","application/vnd.nokia.n-gage.symbian.install"),t("rpst","application/vnd.nokia.radio-preset"),t("rpss","application/vnd.nokia.radio-presets"),t("edm","application/vnd.novadigm.edm"),t("edx","application/vnd.novadigm.edx"),t("FExt","application/vnd.novadigm.FExt"),t("odc","application/vnd.oasis.opendocument.chart"),t("otc","application/vnd.oasis.opendocument.chart-template"),t("odb","application/vnd.oasis.opendocument.database"),t("odf","application/vnd.oasis.opendocument.formula"),t("odft","application/vnd.oasis.opendocument.formula-template"),t("odg","application/vnd.oasis.opendocument.graphics"),t("otg","application/vnd.oasis.opendocument.graphics-template"),t("odi","application/vnd.oasis.opendocument.image"),t("oti","application/vnd.oasis.opendocument.image-template"),t("odp","application/vnd.oasis.opendocument.presentation"),t("otp","application/vnd.oasis.opendocument.presentation-template"),t("ods","application/vnd.oasis.opendocument.spreadsheet"),t("ots","application/vnd.oasis.opendocument.spreadsheet-template"),t("odt","application/vnd.oasis.opendocument.text"),t("odm","application/vnd.oasis.opendocument.text-master"),t("ott","application/vnd.oasis.opendocument.text-template"),t("oth","application/vnd.oasis.opendocument.text-web"),t("xo","application/vnd.olpc-sugar"),t("dd2","application/vnd.oma.dd2+xml"),t("oxt","application/vnd.openofficeorg.extension"),t("pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"),t("sldx","application/vnd.openxmlformats-officedocument.presentationml.slide"),t("ppsx","application/vnd.openxmlformats-officedocument.presentationml.slideshow"),t("potx","application/vnd.openxmlformats-officedocument.presentationml.template"),t("xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"),t("xltx","application/vnd.openxmlformats-officedocument.spreadsheetml.template"),t("docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"),t("dotx","application/vnd.openxmlformats-officedocument.wordprocessingml.template"),t("mgp","application/vnd.osgeo.mapguide.package"),t("dp","application/vnd.osgi.dp"),t("esa","application/vnd.osgi.subsystem"),t("pdb","application/vnd.palm"),t("pqa","application/vnd.palm"),t("oprc","application/vnd.palm"),t("paw","application/vnd.pawaafile"),t("str","application/vnd.pg.format"),t("ei6","application/vnd.pg.osasli"),t("efif","application/vnd.picsel"),t("wg","application/vnd.pmi.widget"),t("plf","application/vnd.pocketlearn"),t("pbd","application/vnd.powerbuilder6"),t("box","application/vnd.previewsystems.box"),t("mgz","application/vnd.proteus.magazine"),t("qps","application/vnd.publishare-delta-tree"),t("ptid","application/vnd.pvi.ptid1"),t("qxd","application/vnd.quark.quarkxpress"),t("qxt","application/vnd.quark.quarkxpress"),t("qwd","application/vnd.quark.quarkxpress"),t("qwt","application/vnd.quark.quarkxpress"),t("qxl","application/vnd.quark.quarkxpress"),t("qxb","application/vnd.quark.quarkxpress"),t("bed","application/vnd.realvnc.bed"),t("mxl","application/vnd.recordare.musicxml"),t("musicxml","application/vnd.recordare.musicxml+xml"),t("cryptonote","application/vnd.rig.cryptonote"),t("cod","application/vnd.rim.cod"),t("rm","application/vnd.rn-realmedia"),t("rmvb","application/vnd.rn-realmedia-vbr"),t("link66","application/vnd.route66.link66+xml"),t("st","application/vnd.sailingtracker.track"),t("see","application/vnd.seemail"),t("sema","application/vnd.sema"),t("semd","application/vnd.semd"),t("semf","application/vnd.semf"),t("ifm","application/vnd.shana.informed.formdata"),t("itp","application/vnd.shana.informed.formtemplate"),t("iif","application/vnd.shana.informed.interchange"),t("ipk","application/vnd.shana.informed.package"),t("twd","application/vnd.simtech-mindmapper"),t("twds","application/vnd.simtech-mindmapper"),t("mmf","application/vnd.smaf"),t("teacher","application/vnd.smart.teacher"),t("sdkm","application/vnd.solent.sdkm+xml"),t("sdkd","application/vnd.solent.sdkm+xml"),t("dxp","application/vnd.spotfire.dxp"),t("sfs","application/vnd.spotfire.sfs"),t("sdc","application/vnd.stardivision.calc"),t("sda","application/vnd.stardivision.draw"),t("sdd","application/vnd.stardivision.impress"),t("smf","application/vnd.stardivision.math"),t("sdw","application/vnd.stardivision.writer"),t("vor","application/vnd.stardivision.writer"),t("sgl","application/vnd.stardivision.writer-global"),t("smzip","application/vnd.stepmania.package"),t("sm","application/vnd.stepmania.stepchart"),t("sxc","application/vnd.sun.xml.calc"),t("stc","application/vnd.sun.xml.calc.template"),t("sxd","application/vnd.sun.xml.draw"),t("std","application/vnd.sun.xml.draw.template"),t("sxi","application/vnd.sun.xml.impress"),t("sti","application/vnd.sun.xml.impress.template"),t("sxm","application/vnd.sun.xml.math"),t("sxw","application/vnd.sun.xml.writer"),t("sxg","application/vnd.sun.xml.writer.global"),t("stw","application/vnd.sun.xml.writer.template"),t("sus","application/vnd.sus-calendar"),t("susp","application/vnd.sus-calendar"),t("svd","application/vnd.svd"),t("sis","application/vnd.symbian.install"),t("sisx","application/vnd.symbian.install"),t("xsm","application/vnd.syncml+xml"),t("bdm","application/vnd.syncml.dm+wbxml"),t("xdm","application/vnd.syncml.dm+xml"),t("tao","application/vnd.tao.intent-module-archive"),t("pcap","application/vnd.tcpdump.pcap"),t("cap","application/vnd.tcpdump.pcap"),t("dmp","application/vnd.tcpdump.pcap"),t("tmo","application/vnd.tmobile-livetv"),t("tpt","application/vnd.trid.tpt"),t("mxs","application/vnd.triscape.mxs"),t("tra","application/vnd.trueapp"),t("ufd","application/vnd.ufdl"),t("ufdl","application/vnd.ufdl"),t("utz","application/vnd.uiq.theme"),t("umj","application/vnd.umajin"),t("unityweb","application/vnd.unity"),t("uoml","application/vnd.uoml+xml"),t("vcx","application/vnd.vcx"),t("vsd","application/vnd.visio"),t("vst","application/vnd.visio"),t("vss","application/vnd.visio"),t("vsw","application/vnd.visio"),t("vis","application/vnd.visionary"),t("vsf","application/vnd.vsf"),t("wbxml","application/vnd.wap.wbxml"),t("wmlc","application/vnd.wap.wmlc"),t("wmlsc","application/vnd.wap.wmlscriptc"),t("wtb","application/vnd.webturbo"),t("nbp","application/vnd.wolfram.player"),t("wpd","application/vnd.wordperfect"),t("wqd","application/vnd.wqd"),t("stf","application/vnd.wt.stf"),t("xar","application/vnd.xara"),t("xfdl","application/vnd.xfdl"),t("hvd","application/vnd.yamaha.hv-dic"),t("hvs","application/vnd.yamaha.hv-script"),t("hvp","application/vnd.yamaha.hv-voice"),t("osf","application/vnd.yamaha.openscoreformat"),t("osfpvg","application/vnd.yamaha.openscoreformat.osfpvg+xml"),t("saf","application/vnd.yamaha.smaf-audio"),t("spf","application/vnd.yamaha.smaf-phrase"),t("cmp","application/vnd.yellowriver-custom-menu"),t("zir","application/vnd.zul"),t("zirz","application/vnd.zul"),t("zaz","application/vnd.zzazz.deck+xml"),t("vxml","application/voicexml+xml"),t("wgt","application/widget"),t("hlp","application/winhlp"),t("wsdl","application/wsdl+xml"),t("wspolicy","application/wspolicy+xml"),t("7z","application/x-7z-compressed"),t("abw","application/x-abiword"),t("ace","application/x-ace-compressed"),t("dmg","application/x-apple-diskimage"),t("aab","application/x-authorware-bin"),t("x32","application/x-authorware-bin"),t("u32","application/x-authorware-bin"),t("vox","application/x-authorware-bin"),t("aam","application/x-authorware-map"),t("aas","application/x-authorware-seg"),t("bcpio","application/x-bcpio"),t("torrent","application/x-bittorrent"),t("blb","application/x-blorb"),t("blorb","application/x-blorb"),t("bz","application/x-bzip"),t("bz2","application/x-bzip2"),t("boz","application/x-bzip2"),t("cbr","application/x-cbr"),t("cba","application/x-cbr"),t("cbt","application/x-cbr"),t("cbz","application/x-cbr"),t("cb7","application/x-cbr"),t("vcd","application/x-cdlink"),t("cfs","application/x-cfs-compressed"),t("chat","application/x-chat"),t("pgn","application/x-chess-pgn"),t("nsc","application/x-conference"),t("cpio","application/x-cpio"),t("csh","application/x-csh"),t("deb","application/x-debian-package"),t("udeb","application/x-debian-package"),t("dgc","application/x-dgc-compressed"),t("dir","application/x-director"),t("dcr","application/x-director"),t("dxr","application/x-director"),t("cst","application/x-director"),t("cct","application/x-director"),t("cxt","application/x-director"),t("w3d","application/x-director"),t("fgd","application/x-director"),t("swa","application/x-director"),t("wad","application/x-doom"),t("ncx","application/x-dtbncx+xml"),t("dtb","application/x-dtbook+xml"),t("res","application/x-dtbresource+xml"),t("dvi","application/x-dvi"),t("evy","application/x-envoy"),t("eva","application/x-eva"),t("bdf","application/x-font-bdf"),t("gsf","application/x-font-ghostscript"),t("psf","application/x-font-linux-psf"),t("otf","application/x-font-otf"),t("pcf","application/x-font-pcf"),t("snf","application/x-font-snf"),t("ttf","application/x-font-ttf"),t("ttc","application/x-font-ttf"),t("pfa","application/x-font-type1"),t("pfb","application/x-font-type1"),t("pfm","application/x-font-type1"),t("afm","application/x-font-type1"),t("woff","application/x-font-woff"),t("arc","application/x-freearc"),t("spl","application/x-futuresplash"),t("gca","application/x-gca-compressed"),t("ulx","application/x-glulx"),t("gnumeric","application/x-gnumeric"),t("gramps","application/x-gramps-xml"),t("gtar","application/x-gtar"),t("hdf","application/x-hdf"),t("install","application/x-install-instructions"),t("iso","application/x-iso9660-image"),t("jnlp","application/x-java-jnlp-file"),t("latex","application/x-latex"),t("lzh","application/x-lzh-compressed"),t("lha","application/x-lzh-compressed"),t("mie","application/x-mie"),t("prc","application/x-mobipocket-ebook"),t("mobi","application/x-mobipocket-ebook"),t("application","application/x-ms-application"),t("lnk","application/x-ms-shortcut"),t("wmd","application/x-ms-wmd"),t("wmz","application/x-ms-wmz"),t("xbap","application/x-ms-xbap"),t("mdb","application/x-msaccess"),t("obd","application/x-msbinder"),t("crd","application/x-mscardfile"),t("clp","application/x-msclip"),t("exe","application/x-msdownload"),t("dll","application/x-msdownload"),t("com","application/x-msdownload"),t("bat","application/x-msdownload"),t("msi","application/x-msdownload"),t("mvb","application/x-msmediaview"),t("m13","application/x-msmediaview"),t("m14","application/x-msmediaview"),t("wmf","application/x-msmetafile"),t("wmz","application/x-msmetafile"),t("emf","application/x-msmetafile"),t("emz","application/x-msmetafile"),t("mny","application/x-msmoney"),t("pub","application/x-mspublisher"),t("scd","application/x-msschedule"),t("trm","application/x-msterminal"),t("wri","application/x-mswrite"),t("nc","application/x-netcdf"),t("cdf","application/x-netcdf"),t("nzb","application/x-nzb"),t("p12","application/x-pkcs12"),t("pfx","application/x-pkcs12"),t("p7b","application/x-pkcs7-certificates"),t("spc","application/x-pkcs7-certificates"),t("p7r","application/x-pkcs7-certreqresp"),t("rar","application/x-rar-compressed"),t("ris","application/x-research-info-systems"),t("sh","application/x-sh"),t("shar","application/x-shar"),t("swf","application/x-shockwave-flash"),t("xap","application/x-silverlight-app"),t("sql","application/x-sql"),t("sit","application/x-stuffit"),t("sitx","application/x-stuffitx"),t("srt","application/x-subrip"),t("sv4cpio","application/x-sv4cpio"),t("sv4crc","application/x-sv4crc"),t("t3","application/x-t3vm-image"),t("gam","application/x-tads"),t("tar","application/x-tar"),t("tcl","application/x-tcl"),t("tex","application/x-tex"),t("tfm","application/x-tex-tfm"),t("texinfo","application/x-texinfo"),t("texi","application/x-texinfo"),t("obj","application/x-tgif"),t("ustar","application/x-ustar"),t("src","application/x-wais-source"),t("der","application/x-x509-ca-cert"),t("crt","application/x-x509-ca-cert"),t("fig","application/x-xfig"),t("xlf","application/x-xliff+xml"),t("xpi","application/x-xpinstall"),t("xz","application/x-xz"),t("z1","application/x-zmachine"),t("z2","application/x-zmachine"),t("z3","application/x-zmachine"),t("z4","application/x-zmachine"),t("z5","application/x-zmachine"),t("z6","application/x-zmachine"),t("z7","application/x-zmachine"),t("z8","application/x-zmachine"),t("xaml","application/xaml+xml"),t("xdf","application/xcap-diff+xml"),t("xenc","application/xenc+xml"),t("xhtml","application/xhtml+xml"),t("xht","application/xhtml+xml"),t("xml","application/xml"),t("xsl","application/xml"),t("dtd","application/xml-dtd"),t("xop","application/xop+xml"),t("xpl","application/xproc+xml"),t("xslt","application/xslt+xml"),t("xspf","application/xspf+xml"),t("mxml","application/xv+xml"),t("xhvml","application/xv+xml"),t("xvml","application/xv+xml"),t("xvm","application/xv+xml"),t("yang","application/yang"),t("yin","application/yin+xml"),t("zip","application/zip"),t("adp","audio/adpcm"),t("au","audio/basic"),t("snd","audio/basic"),t("mid","audio/midi"),t("midi","audio/midi"),t("kar","audio/midi"),t("rmi","audio/midi"),t("mp4a","audio/mp4"),t("mpga","audio/mpeg"),t("mp2","audio/mpeg"),t("mp2a","audio/mpeg"),t("mp3","audio/mpeg"),t("m2a","audio/mpeg"),t("m3a","audio/mpeg"),t("oga","audio/ogg"),t("ogg","audio/ogg"),t("spx","audio/ogg"),t("s3m","audio/s3m"),t("sil","audio/silk"),t("uva","audio/vnd.dece.audio"),t("uvva","audio/vnd.dece.audio"),t("eol","audio/vnd.digital-winds"),t("dra","audio/vnd.dra"),t("dts","audio/vnd.dts"),t("dtshd","audio/vnd.dts.hd"),t("lvp","audio/vnd.lucent.voice"),t("pya","audio/vnd.ms-playready.media.pya"),t("ecelp4800","audio/vnd.nuera.ecelp4800"),t("ecelp7470","audio/vnd.nuera.ecelp7470"),t("ecelp9600","audio/vnd.nuera.ecelp9600"),t("rip","audio/vnd.rip"),t("weba","audio/webm"),t("aac","audio/aac"),t("aif","audio/x-aiff"),t("aiff","audio/x-aiff"),t("aifc","audio/x-aiff"),t("caf","audio/x-caf"),t("flac","audio/x-flac"),t("mka","audio/x-matroska"),t("m3u","audio/x-mpegurl"),t("wax","audio/x-ms-wax"),t("wma","audio/x-ms-wma"),t("ram","audio/x-pn-realaudio"),t("ra","audio/x-pn-realaudio"),t("rmp","audio/x-pn-realaudio-plugin"),t("wav","audio/x-wav"),t("xm","audio/xm"),t("cdx","chemical/x-cdx"),t("cif","chemical/x-cif"),t("cmdf","chemical/x-cmdf"),t("cml","chemical/x-cml"),t("csml","chemical/x-csml"),t("xyz","chemical/x-xyz"),t("bmp","image/bmp"),t("cgm","image/cgm"),t("g3","image/g3fax"),t("gif","image/gif"),t("ief","image/ief"),t("jpeg","image/jpeg"),t("jpg","image/jpeg"),t("jpe","image/jpeg"),t("ktx","image/ktx"),t("png","image/png"),t("btif","image/prs.btif"),t("sgi","image/sgi"),t("svg","image/svg+xml");t("svgz","image/svg+xml"),t("tiff","image/tiff"),t("tif","image/tiff"),t("psd","image/vnd.adobe.photoshop"),t("uvi","image/vnd.dece.graphic"),t("uvvi","image/vnd.dece.graphic"),t("uvg","image/vnd.dece.graphic"),t("uvvg","image/vnd.dece.graphic"),t("sub","image/vnd.dvb.subtitle"),t("djvu","image/vnd.djvu"),t("djv","image/vnd.djvu"),t("dwg","image/vnd.dwg"),t("dxf","image/vnd.dxf"),t("fbs","image/vnd.fastbidsheet"),t("fpx","image/vnd.fpx"),t("fst","image/vnd.fst"),t("mmr","image/vnd.fujixerox.edmics-mmr"),t("rlc","image/vnd.fujixerox.edmics-rlc"),t("mdi","image/vnd.ms-modi"),t("wdp","image/vnd.ms-photo"),t("npx","image/vnd.net-fpx"),t("wbmp","image/vnd.wap.wbmp"),t("xif","image/vnd.xiff"),t("webp","image/webp"),t("3ds","image/x-3ds"),t("ras","image/x-cmu-raster"),t("cmx","image/x-cmx"),t("fh","image/x-freehand"),t("fhc","image/x-freehand"),t("fh4","image/x-freehand"),t("fh5","image/x-freehand"),t("fh7","image/x-freehand"),t("ico","image/x-icon"),t("sid","image/x-mrsid-image"),t("pcx","image/x-pcx"),t("pic","image/x-pict"),t("pct","image/x-pict"),t("pnm","image/x-portable-anymap"),t("pbm","image/x-portable-bitmap"),t("pgm","image/x-portable-graymap"),t("ppm","image/x-portable-pixmap"),t("rgb","image/x-rgb"),t("tga","image/x-tga"),t("xbm","image/x-xbitmap"),t("xpm","image/x-xpixmap"),t("xwd","image/x-xwindowdump"),t("eml","message/rfc822"),t("mime","message/rfc822"),t("igs","model/iges"),t("iges","model/iges"),t("msh","model/mesh"),t("mesh","model/mesh"),t("silo","model/mesh"),t("dae","model/vnd.collada+xml"),t("dwf","model/vnd.dwf"),t("gdl","model/vnd.gdl"),t("gtw","model/vnd.gtw"),t("mts","model/vnd.mts"),t("vtu","model/vnd.vtu"),t("wrl","model/vrml"),t("vrml","model/vrml"),t("x3db","model/x3d+binary"),t("x3dbz","model/x3d+binary"),t("x3dv","model/x3d+vrml"),t("x3dvz","model/x3d+vrml"),t("x3d","model/x3d+xml"),t("x3dz","model/x3d+xml"),t("appcache","text/cache-manifest"),t("ics","text/calendar"),t("ifb","text/calendar"),t("cmd","text/cmd"),t("css","text/css"),t("csv","text/csv"),t("html","text/html"),t("htm","text/html"),t("n3","text/n3"),t("txt","text/plain"),t("text","text/plain"),t("conf","text/plain"),t("def","text/plain"),t("list","text/plain"),t("log","text/plain"),t("in","text/plain"),t("js","text/plain"),t("dsc","text/prs.lines.tag"),t("rtx","text/richtext"),t("sgml","text/sgml"),t("sgm","text/sgml"),t("tsv","text/tab-separated-values"),t("t","text/troff"),t("tr","text/troff"),t("roff","text/troff"),t("man","text/troff"),t("me","text/troff"),t("ms","text/troff"),t("ttl","text/turtle"),t("uri","text/uri-list"),t("uris","text/uri-list"),t("urls","text/uri-list"),t("vcard","text/vcard"),t("curl","text/vnd.curl"),t("dcurl","text/vnd.curl.dcurl"),t("scurl","text/vnd.curl.scurl"),t("mcurl","text/vnd.curl.mcurl"),t("sub","text/vnd.dvb.subtitle"),t("fly","text/vnd.fly"),t("flx","text/vnd.fmi.flexstor"),t("gv","text/vnd.graphviz"),t("3dml","text/vnd.in3d.3dml"),t("spot","text/vnd.in3d.spot"),t("jad","text/vnd.sun.j2me.app-descriptor"),t("wml","text/vnd.wap.wml"),t("wmls","text/vnd.wap.wmlscript"),t("s","text/x-asm"),t("asm","text/x-asm"),t("c","text/x-c"),t("cc","text/x-c"),t("cxx","text/x-c"),t("cpp","text/x-c"),t("h","text/x-c"),t("hh","text/x-c"),t("dic","text/x-c"),t("f","text/x-fortran"),t("for","text/x-fortran"),t("f77","text/x-fortran"),t("f90","text/x-fortran"),t("java","text/x-java-source"),t("opml","text/x-opml"),t("p","text/x-pascal"),t("pas","text/x-pascal"),t("nfo","text/x-nfo"),t("etx","text/x-setext"),t("sfv","text/x-sfv"),t("uu","text/x-uuencode"),t("vcs","text/x-vcalendar"),t("vcf","text/x-vcard"),t("xml","text/xml"),t("xsl","text/xml"),t("dtd","text/xml-dtd"),t("3gp","video/3gpp"),t("3g2","video/3gpp2"),t("h261","video/h261"),t("h263","video/h263"),t("h264","video/h264"),t("jpgv","video/jpeg"),t("jpm","video/jpm"),t("jpgm","video/jpm"),t("mj2","video/mj2"),t("mjp2","video/mj2"),t("mp4","video/mp4"),t("mp4v","video/mp4"),t("mpg4","video/mp4"),t("mpeg","video/mpeg"),t("mpg","video/mpeg"),t("mpe","video/mpeg"),t("m1v","video/mpeg"),t("m2v","video/mpeg"),t("ogv","video/ogg"),t("qt","video/quicktime"),t("mov","video/quicktime"),t("uvh","video/vnd.dece.hd"),t("uvvh","video/vnd.dece.hd"),t("uvm","video/vnd.dece.mobile"),t("uvvm","video/vnd.dece.mobile"),t("uvp","video/vnd.dece.pd"),t("uvvp","video/vnd.dece.pd"),t("uvs","video/vnd.dece.sd"),t("uvvs","video/vnd.dece.sd"),t("uvv","video/vnd.dece.video"),t("uvvv","video/vnd.dece.video"),t("dvb","video/vnd.dvb.file"),t("fvt","video/vnd.fvt"),t("mxu","video/vnd.mpegurl"),t("m4u","video/vnd.mpegurl"),t("pyv","video/vnd.ms-playready.media.pyv"),t("uvu","video/vnd.uvvu.mp4"),t("uvvu","video/vnd.uvvu.mp4"),t("viv","video/vnd.vivo"),t("webm","video/webm"),t("f4v","video/x-f4v"),t("fli","video/x-fli"),t("flv","video/x-flv"),t("m4v","video/x-m4v"),t("mkv","video/x-matroska"),t("mk3d","video/x-matroska"),t("mks","video/x-matroska"),t("mng","video/x-mng"),t("asf","video/x-ms-asf"),t("asx","video/x-ms-asf"),t("vob","video/x-ms-vob"),t("wm","video/x-ms-wm"),t("wmv","video/x-ms-wmv"),t("wmx","video/x-ms-wmx"),t("wvx","video/x-ms-wvx"),t("avi","video/x-msvideo"),t("movie","video/x-sgi-movie"),t("smv","video/x-smv"),t("ice","x-conference/x-cooltalk")}},t.$init=function(){e.FMimeTypes=pas.Classes.TStringList.$create("Create$1"),e.RegisterMimeTypes()}}),["DateUtils"]),rtl.module("Generics.Strings",["System"],(function(){"use strict";this.$resourcestrings={SArgumentOutOfRange:{org:"Argument out of range"}}})),rtl.module("Generics.Defaults",["System"],(function(){"use strict";rtl.createInterface(this,"IComparer$G19","{505778ED-F783-4456-9691-32F419CC5E18}",["Compare"],pas.System.IUnknown,"IComparer<System.String>")})),rtl.module("Generics.Collections",["System","Classes","SysUtils","RTLConsts","Types","JS","Generics.Strings","Generics.Defaults"],(function(){"use strict";var t=this;t.$impl;this.TCollectionNotification={0:"cnAdded",cnAdded:0,1:"cnRemoved",cnRemoved:1,2:"cnExtracted",cnExtracted:2},rtl.createClass(this,"EDictionary",pas.SysUtils.Exception,(function(){})),rtl.createClass(this,"TEnumerable$G19",pas.System.TObject,(function(){}),"TEnumerable<System.Longint>"),rtl.recNewT(this,"TPair$G5",(function(){this.$eq=function(t){return!0},this.$assign=function(t){return this}})),rtl.createClass(this,"TEnumerable$G20",pas.System.TObject,(function(){}),"TEnumerable<Generics.Collections.TPair<System.String,System.TObject>>"),rtl.createClass(this,"TEnumerator$G22",pas.System.TObject,(function(){}),"TEnumerator<System.String>"),rtl.createClass(this,"TEnumerable$G21",pas.System.TObject,(function(){}),"TEnumerable<System.TObject>"),rtl.createClass(this,"TEnumerable$G22",pas.System.TObject,(function(){}),"TEnumerable<System.String>"),rtl.createClass(this,"TDictionary$G3",this.TEnumerable$G20,(function(){rtl.createClass(this,"TKeyEnumerator",t.TEnumerator$G22,(function(){this.$init=function(){t.TEnumerator$G22.$init.call(this),this.FIter=null,this.FVal=null},this.$final=function(){this.FIter=void 0,this.FVal=void 0,t.TEnumerator$G22.$final.call(this)},this.GetCurrent=function(){return this.DoGetCurrent()},this.DoGetCurrent=function(){return""+this.FVal.value},this.DoMoveNext=function(){return this.FVal=this.FIter.next(),!this.FVal.done},this.Create$1=function(t){return this.FIter=t,this},this.MoveNext$1=function(){return this.DoMoveNext()}}),"TDictionary<System.String,System.TObject>.TKeyEnumerator"),rtl.createClass(this,"TValueCollection",t.TEnumerable$G21,(function(){}),"TDictionary<System.String,System.TObject>.TValueCollection"),rtl.createClass(this,"TKeyCollection",t.TEnumerable$G22,(function(){this.$init=function(){t.TEnumerable$G22.$init.call(this),this.FMap=null},this.$final=function(){this.FMap=void 0,t.TEnumerable$G22.$final.call(this)},this.Create$1=function(t){return this.FMap=t.FMap,this},this.GetEnumerator$1=function(){return t.TDictionary$G3.TKeyEnumerator.$create("Create$1",[this.FMap.keys()])}}),"TDictionary<System.String,System.TObject>.TKeyCollection"),this.$init=function(){t.TEnumerable$G20.$init.call(this),this.FMap=null,this.FComparer=null,this.FOnKeyNotify=null,this.FOnValueNotify=null,this.FKeyCollection=null,this.FValueCollection=null},this.$final=function(){this.FMap=void 0,rtl.setIntfP(this,"FComparer",null),this.FOnKeyNotify=void 0,this.FOnValueNotify=void 0,this.FKeyCollection=void 0,this.FValueCollection=void 0,t.TEnumerable$G20.$final.call(this)},this.GetEffectiveKey=function(t){var e="",i=null,s=null;if(null==this.FComparer)return t;for(s=(i=this.FMap.keys()).next();!s.done;){if(e=""+s.value,0===this.FComparer.Compare(e,t))return e;s=i.next()}return e=t},this.GetItem=function(e){var i;if(i=this.FMap.get(this.GetEffectiveKey(e)),pas.JS.isUndefined(i))throw t.EDictionary.$create("Create$1",[rtl.getResStr(t,"SErrDictKeyNotFound")]);return rtl.getObject(i)},this.DoAdd=function(t,e){this.FMap.set(this.GetEffectiveKey(t),e),this.KeyNotify(t,0),this.ValueNotify(e,0)},this.CanClearMap=function(){return null===this.FOnKeyNotify&&null===this.FOnValueNotify},this.PairNotify=function(t,e,i){this.KeyNotify(t,i),this.ValueNotify(e,i)},this.KeyNotify=function(t,e){null!=this.FOnKeyNotify&&this.FOnKeyNotify(this,t,e)},this.ValueNotify=function(t,e){null!=this.FOnValueNotify&&this.FOnValueNotify(this,t,e)},this.Destroy=function(){pas.SysUtils.FreeAndNil({p:this,get:function(){return this.p.FKeyCollection},set:function(t){this.p.FKeyCollection=t}}),pas.SysUtils.FreeAndNil({p:this,get:function(){return this.p.FValueCollection},set:function(t){this.p.FValueCollection=t}}),this.Clear(),this.FMap=null,pas.System.TObject.Destroy.call(this)},this.Add=function(e,i){if(this.FMap.has(this.GetEffectiveKey(e)))throw t.EDictionary.$create("Create$1",[rtl.getResStr(t,"SErrDictDuplicateKey")]);this.DoAdd(e,i)},this.Clear=function(){var t=null,e=null,i=[],s="",n=null;if(this.CanClearMap())this.FMap.clear();else{t=this.FMap.entries();do{(e=t.next()).done||(s=""+(i=e.value)[0],n=rtl.getObject(i[1]),this.FMap.delete(s),this.PairNotify(s,n,1))}while(!e.done)}},this.GetKeys=function(){return null===this.FKeyCollection&&(this.FKeyCollection=this.TKeyCollection.$create("Create$1",[this])),this.FKeyCollection}}),"TDictionary<System.String,System.TObject>"),rtl.createClass(this,"TCustomList$G10",this.TEnumerable$G21,(function(){this.$init=function(){t.TEnumerable$G21.$init.call(this),this.FOnNotify=null,this.FLength=0,this.FItems=[]},this.$final=function(){this.FOnNotify=void 0,this.FItems=void 0,t.TEnumerable$G21.$final.call(this)},this.GetCapacity=function(){return rtl.length(this.FItems)},this.PrepareAddingItem=function(){var t;return this.FLength===rtl.length(this.FItems)&&this.FItems.push(null),t=this.FLength,this.FLength+=1,t},this.Notify=function(t,e){null!=this.FOnNotify&&this.FOnNotify(this,t,e)}}),"TCustomList<System.TObject>"),rtl.createClass(this,"TList$G3",this.TCustomList$G10,(function(){this.SetCapacity=function(t){t<this.FLength&&this.SetCount(t),this.FItems=rtl.arraySetLength(this.FItems,null,t)},this.SetCount=function(t){if(t<0)throw pas.SysUtils.EArgumentOutOfRangeException.$create("Create$1",[rtl.getResStr(pas["Generics.Strings"],"SArgumentOutOfRange")]);t>this.GetCapacity()?this.SetCapacity(t):t<this.FLength&&this.DeleteRange(t,this.FLength-t),this.FLength=t},this.GetItem=function(t){if(t<0||t>=this.FLength)throw pas.SysUtils.EArgumentOutOfRangeException.$create("Create$1",[rtl.getResStr(pas["Generics.Strings"],"SArgumentOutOfRange")]);return this.FItems[t]},this.Destroy=function(){this.SetCapacity(0)},this.Add=function(t){var e;return e=this.PrepareAddingItem(),this.FItems[e]=t,this.Notify(t,0),e},this.DeleteRange=function(t,e){var i,s=0;if(0!==e){if(e<0||t<0||t+e>this.FLength)throw pas.SysUtils.EArgumentOutOfRangeException.$create("Create$1",[rtl.getResStr(pas["Generics.Strings"],"SArgumentOutOfRange")]);i=this.FItems.splice(t,this.FLength),this.FLength-=e;for(var n=0,r=rtl.length(i)-1;n<=r;n++)s=n,this.Notify(i[s],1)}},this.Clear=function(){this.SetCount(0),this.SetCapacity(0)}}),"TList<System.TObject>"),rtl.createClass(this,"TObjectList$G1",this.TList$G3,(function(){this.$init=function(){t.TList$G3.$init.call(this),this.FObjectsOwner=!1},this.Notify=function(e,i){t.TCustomList$G10.Notify.call(this,e,i),this.FObjectsOwner&&1===i&&(e=rtl.freeLoc(e))}}),"TObjectList<System.TObject>"),rtl.createClass(this,"TCustomList$G11",this.TEnumerable$G22,(function(){this.$init=function(){t.TEnumerable$G22.$init.call(this),this.FOnNotify=null,this.FLength=0,this.FItems=[]},this.$final=function(){this.FOnNotify=void 0,this.FItems=void 0,t.TEnumerable$G22.$final.call(this)},this.GetCapacity=function(){return rtl.length(this.FItems)},this.PrepareAddingItem=function(){var t;return this.FLength===rtl.length(this.FItems)&&this.FItems.push(""),t=this.FLength,this.FLength+=1,t},this.Notify=function(t,e){null!=this.FOnNotify&&this.FOnNotify(this,t,e)}}),"TCustomList<System.String>"),rtl.createClass(this,"TList$G4",this.TCustomList$G11,(function(){this.SetCapacity=function(t){t<this.FLength&&this.SetCount(t),this.FItems=rtl.arraySetLength(this.FItems,"",t)},this.SetCount=function(t){if(t<0)throw pas.SysUtils.EArgumentOutOfRangeException.$create("Create$1",[rtl.getResStr(pas["Generics.Strings"],"SArgumentOutOfRange")]);t>this.GetCapacity()?this.SetCapacity(t):t<this.FLength&&this.DeleteRange(t,this.FLength-t),this.FLength=t},this.GetItem=function(t){if(t<0||t>=this.FLength)throw pas.SysUtils.EArgumentOutOfRangeException.$create("Create$1",[rtl.getResStr(pas["Generics.Strings"],"SArgumentOutOfRange")]);return this.FItems[t]},this.Destroy=function(){this.SetCapacity(0)},this.Add=function(t){var e;return e=this.PrepareAddingItem(),this.FItems[e]=t,this.Notify(t,0),e},this.DeleteRange=function(t,e){var i,s=0;if(0!==e){if(e<0||t<0||t+e>this.FLength)throw pas.SysUtils.EArgumentOutOfRangeException.$create("Create$1",[rtl.getResStr(pas["Generics.Strings"],"SArgumentOutOfRange")]);i=this.FItems.splice(t,this.FLength),this.FLength-=e;for(var n=0,r=rtl.length(i)-1;n<=r;n++)s=n,this.Notify(i[s],1)}},this.Clear=function(){this.SetCount(0),this.SetCapacity(0)}}),"TList<System.String>"),rtl.createClass(this,"TCustomList$G12",this.TEnumerable$G19,(function(){this.$init=function(){t.TEnumerable$G19.$init.call(this),this.FOnNotify=null,this.FLength=0,this.FItems=[]},this.$final=function(){this.FOnNotify=void 0,this.FItems=void 0,t.TEnumerable$G19.$final.call(this)},this.GetCapacity=function(){return rtl.length(this.FItems)},this.PrepareAddingItem=function(){var t;return this.FLength===rtl.length(this.FItems)&&this.FItems.push(-2147483648),t=this.FLength,this.FLength+=1,t},this.Notify=function(t,e){null!=this.FOnNotify&&this.FOnNotify(this,t,e)}}),"TCustomList<System.Longint>"),rtl.createClass(this,"TList$G5",this.TCustomList$G12,(function(){this.SetCapacity=function(t){t<this.FLength&&this.SetCount(t),this.FItems=rtl.arraySetLength(this.FItems,0,t)},this.SetCount=function(t){if(t<0)throw pas.SysUtils.EArgumentOutOfRangeException.$create("Create$1",[rtl.getResStr(pas["Generics.Strings"],"SArgumentOutOfRange")]);t>this.GetCapacity()?this.SetCapacity(t):t<this.FLength&&this.DeleteRange(t,this.FLength-t),this.FLength=t},this.GetItem=function(t){if(t<0||t>=this.FLength)throw pas.SysUtils.EArgumentOutOfRangeException.$create("Create$1",[rtl.getResStr(pas["Generics.Strings"],"SArgumentOutOfRange")]);return this.FItems[t]},this.Destroy=function(){this.SetCapacity(0)},this.Add=function(t){var e;return e=this.PrepareAddingItem(),this.FItems[e]=t,this.Notify(t,0),e},this.DeleteRange=function(t,e){var i,s=0;if(0!==e){if(e<0||t<0||t+e>this.FLength)throw pas.SysUtils.EArgumentOutOfRangeException.$create("Create$1",[rtl.getResStr(pas["Generics.Strings"],"SArgumentOutOfRange")]);i=this.FItems.splice(t,this.FLength),this.FLength-=e;for(var n=0,r=rtl.length(i)-1;n<=r;n++)s=n,this.Notify(i[s],1)}},this.Clear=function(){this.SetCount(0),this.SetCapacity(0)}}),"TList<System.Longint>"),rtl.createClass(this,"TEnumerable$G23",pas.System.TObject,(function(){}),"TEnumerable<System.Double>"),rtl.createClass(this,"TCustomList$G13",this.TEnumerable$G23,(function(){this.$init=function(){t.TEnumerable$G23.$init.call(this),this.FOnNotify=null,this.FLength=0,this.FItems=[]},this.$final=function(){this.FOnNotify=void 0,this.FItems=void 0,t.TEnumerable$G23.$final.call(this)},this.GetCapacity=function(){return rtl.length(this.FItems)},this.PrepareAddingItem=function(){var t;return this.FLength===rtl.length(this.FItems)&&this.FItems.push(0),t=this.FLength,this.FLength+=1,t},this.Notify=function(t,e){null!=this.FOnNotify&&this.FOnNotify(this,t,e)}}),"TCustomList<System.Double>"),rtl.createClass(this,"TList$G6",this.TCustomList$G13,(function(){this.SetCapacity=function(t){t<this.FLength&&this.SetCount(t),this.FItems=rtl.arraySetLength(this.FItems,0,t)},this.SetCount=function(t){if(t<0)throw pas.SysUtils.EArgumentOutOfRangeException.$create("Create$1",[rtl.getResStr(pas["Generics.Strings"],"SArgumentOutOfRange")]);t>this.GetCapacity()?this.SetCapacity(t):t<this.FLength&&this.DeleteRange(t,this.FLength-t),this.FLength=t},this.GetItem=function(t){if(t<0||t>=this.FLength)throw pas.SysUtils.EArgumentOutOfRangeException.$create("Create$1",[rtl.getResStr(pas["Generics.Strings"],"SArgumentOutOfRange")]);return this.FItems[t]},this.Destroy=function(){this.SetCapacity(0)},this.Add=function(t){var e;return e=this.PrepareAddingItem(),this.FItems[e]=t,this.Notify(t,0),e},this.DeleteRange=function(t,e){var i,s=0;if(0!==e){if(e<0||t<0||t+e>this.FLength)throw pas.SysUtils.EArgumentOutOfRangeException.$create("Create$1",[rtl.getResStr(pas["Generics.Strings"],"SArgumentOutOfRange")]);i=this.FItems.splice(t,this.FLength),this.FLength-=e;for(var n=0,r=rtl.length(i)-1;n<=r;n++)s=n,this.Notify(i[s],1)}},this.Clear=function(){this.SetCount(0),this.SetCapacity(0)}}),"TList<System.Double>"),rtl.createClass(this,"TEnumerable$G24",pas.System.TObject,(function(){}),"TEnumerable<WEBLib.TMSFNCPersistence.TTMSFNCObjectReference>"),rtl.createClass(this,"TCustomList$G14",this.TEnumerable$G24,(function(){this.$init=function(){t.TEnumerable$G24.$init.call(this),this.FOnNotify=null,this.FLength=0,this.FItems=[]},this.$final=function(){this.FOnNotify=void 0,this.FItems=void 0,t.TEnumerable$G24.$final.call(this)},this.GetCapacity=function(){return rtl.length(this.FItems)},this.PrepareAddingItem=function(){var t;return this.FLength===rtl.length(this.FItems)&&this.FItems.push(null),t=this.FLength,this.FLength+=1,t},this.Notify=function(t,e){null!=this.FOnNotify&&this.FOnNotify(this,t,e)}}),"TCustomList<WEBLib.TMSFNCPersistence.TTMSFNCObjectReference>"),rtl.createClass(this,"TList$G7",this.TCustomList$G14,(function(){this.SetCapacity=function(t){t<this.FLength&&this.SetCount(t),this.FItems=rtl.arraySetLength(this.FItems,null,t)},this.SetCount=function(t){if(t<0)throw pas.SysUtils.EArgumentOutOfRangeException.$create("Create$1",[rtl.getResStr(pas["Generics.Strings"],"SArgumentOutOfRange")]);t>this.GetCapacity()?this.SetCapacity(t):t<this.FLength&&this.DeleteRange(t,this.FLength-t),this.FLength=t},this.InitializeList=function(){},this.Create$1=function(){return this.InitializeList(),this},this.Destroy=function(){this.SetCapacity(0)},this.Add=function(t){var e;return e=this.PrepareAddingItem(),this.FItems[e]=t,this.Notify(t,0),e},this.DeleteRange=function(t,e){var i,s=0;if(0!==e){if(e<0||t<0||t+e>this.FLength)throw pas.SysUtils.EArgumentOutOfRangeException.$create("Create$1",[rtl.getResStr(pas["Generics.Strings"],"SArgumentOutOfRange")]);i=this.FItems.splice(t,this.FLength),this.FLength-=e;for(var n=0,r=rtl.length(i)-1;n<=r;n++)s=n,this.Notify(i[s],1)}}}),"TList<WEBLib.TMSFNCPersistence.TTMSFNCObjectReference>"),rtl.createClass(this,"TObjectList$G2",this.TList$G7,(function(){this.$init=function(){t.TList$G7.$init.call(this),this.FObjectsOwner=!1},this.Notify=function(e,i){t.TCustomList$G14.Notify.call(this,e,i),this.FObjectsOwner&&1===i&&(e=rtl.freeLoc(e))},this.Create$4=function(e){return t.TList$G7.Create$1.call(this),this.FObjectsOwner=e,this}}),"TObjectList<WEBLib.TMSFNCPersistence.TTMSFNCObjectReference>"),t.$implcode=function(){t.$resourcestrings={SErrDictKeyNotFound:{org:"Key value not found"},SErrDictDuplicateKey:{org:"Duplicate key value"}}}}),[]),rtl.module("WEBLib.TMSFNCJSONReader",["System","Classes","SysUtils","WEBLib.TMSFNCTypes"],(function(){"use strict";var t=this,e=t.$impl;rtl.createClass(this,"TTMSFNCJSONStreamReader",pas.System.TObject,(function(){rtl.createClass(this,"EEndOfInputReached",pas.SysUtils.Exception,(function(){this.Create$2=function(){return pas.SysUtils.Exception.Create$1.call(this,"End of JSON input reached."),this}}),"TTMSFNCJSONStreamReader.EEndOfInputReached"),this.$init=function(){pas.System.TObject.$init.call(this),this.FStream=null,this.FReadStream=null},this.$final=function(){this.FStream=void 0,this.FReadStream=void 0,pas.System.TObject.$final.call(this)},this.Create$1=function(t){return this.FStream=t,this.FReadStream=pas.Classes.TStringStream.$create("Create$3",["",pas.Classes.TEncoding.GetANSI(),!0]),this.FReadStream.CopyFrom(this.FStream,this.FStream.GetSize()),this.FReadStream.SetPosition(0),this},this.Destroy=function(){rtl.free(this,"FReadStream"),pas.System.TObject.Destroy.call(this)},this.NextChar=function(){if(this.Eof())throw this.EEndOfInputReached.$create("Create$2");return this.ReadChar()},this.PeekChar=function(){var t,e;return e=this.FReadStream.GetPosition(),t=this.ReadChar(),this.FReadStream.SetPosition(e),t},this.ReadChar=function(){var t="",e="";return t="\0",1,this.FReadStream.GetPosition()<this.FReadStream.GetSize()&&""!==(e=this.FReadStream.ReadString(1))&&pas.System.Assigned(e)&&(t=e.charAt(0)),t},this.Backup=function(t){this.FReadStream.SetPosition(this.FReadStream.GetPosition()-1)},this.MoveNext=function(t){this.FReadStream.SetPosition(this.FReadStream.GetPosition()+t)},this.Eof=function(){return this.FReadStream.GetPosition()===this.FReadStream.GetSize()}})),this.TTMSFNCJSONToken={0:"jstoBeginObject",jstoBeginObject:0,1:"jstoEndObject",jstoEndObject:1,2:"jstoBeginArray",jstoBeginArray:2,3:"jstoEndArray",jstoEndArray:3,4:"jstoName",jstoName:4,5:"jstoBoolean",jstoBoolean:5,6:"jstoNull",jstoNull:6,7:"jstoText",jstoText:7,8:"jstoNumber",jstoNumber:8,9:"jstoEOF",jstoEOF:9},rtl.createClass(this,"TTMSFNCJSONReader",pas.System.TObject,(function(){this.TTMSFNCJSONState={0:"jstNone",jstNone:0,1:"jstBeginObject",jstBeginObject:1,2:"jstEndObject",jstEndObject:2,3:"jstBeginArray",jstBeginArray:3,4:"jstEndArray",jstEndArray:4,5:"jstTrue",jstTrue:5,6:"jstFalse",jstFalse:6,7:"jstNull",jstNull:7,8:"jstDoubleQuoted",jstDoubleQuoted:8,9:"jstBuffered",jstBuffered:9,10:"jstDoubleQuotedName",jstDoubleQuotedName:10,11:"jstInt64",jstInt64:11,12:"jstNumber",jstNumber:12,13:"jstEOF",jstEOF:13},this.TTMSFNCJSONNumberState={0:"jnstNone",jnstNone:0,1:"jnstSign",jnstSign:1,2:"jnstDigit",jnstDigit:2,3:"jnstDecimal",jnstDecimal:3,4:"jnstFraction",jnstFraction:4,5:"jnstExpE",jnstExpE:5,6:"jnstExpSign",jnstExpSign:6,7:"jnstExpDigit",jnstExpDigit:7},this.TTMSFNCJSONScope={0:"jscEmptyDocument",jscEmptyDocument:0,1:"jscEmptyArray",jscEmptyArray:1,2:"jscEmptyObject",jscEmptyObject:2,3:"jscNonEmptyDocument",jscNonEmptyDocument:3,4:"jscNonEmptyArray",jscNonEmptyArray:4,5:"jscNonEmptyObject",jscNonEmptyObject:5,6:"jscDanglingName",jscDanglingName:6},rtl.createClass(this,"EInvalidStateException",pas.SysUtils.Exception,(function(){this.Create$2=function(t){return pas.SysUtils.Exception.CreateFmt.call(this,"Invalid Json parser state. Expected state: %d",pas.System.VarRecs(0,t)),this}}),"TTMSFNCJSONReader.EInvalidStateException"),rtl.createClass(this,"EUnterminatedArray",pas.SysUtils.Exception,(function(){this.Create$2=function(){return pas.SysUtils.Exception.Create$1.call(this,"Unterminated array"),this}}),"TTMSFNCJSONReader.EUnterminatedArray"),rtl.createClass(this,"EUnterminatedObject",pas.SysUtils.Exception,(function(){this.Create$2=function(){return pas.SysUtils.Exception.Create$1.call(this,"Unterminated object"),this}}),"TTMSFNCJSONReader.EUnterminatedObject"),rtl.createClass(this,"ENameExpected",pas.SysUtils.Exception,(function(){this.Create$2=function(){return pas.SysUtils.Exception.Create$1.call(this,"Name expected"),this}}),"TTMSFNCJSONReader.ENameExpected"),rtl.createClass(this,"EColonExpected",pas.SysUtils.Exception,(function(){this.Create$2=function(){return pas.SysUtils.Exception.Create$1.call(this,"Colon expected"),this}}),"TTMSFNCJSONReader.EColonExpected"),rtl.createClass(this,"EMultipleRootNotAllowed",pas.SysUtils.Exception,(function(){this.Create$2=function(){return pas.SysUtils.Exception.Create$1.call(this,"Multiple root values not allowed"),this}}),"TTMSFNCJSONReader.EMultipleRootNotAllowed"),rtl.createClass(this,"EExpectedValue",pas.SysUtils.Exception,(function(){this.Create$2=function(){return pas.SysUtils.Exception.Create$1.call(this,"Value expected but invalid character found"),this}}),"TTMSFNCJSONReader.EExpectedValue"),rtl.createClass(this,"EObjectOrArrayExpected",pas.SysUtils.Exception,(function(){this.Create$2=function(){return pas.SysUtils.Exception.Create$1.call(this,"Object or array expected as top-level value"),this}}),"TTMSFNCJSONReader.EObjectOrArrayExpected"),rtl.createClass(this,"ETooManyDepthLevels",pas.SysUtils.Exception,(function(){this.Create$2=function(){return pas.SysUtils.Exception.Create$1.call(this,"Maximum level of nested structured reached."),this}}),"TTMSFNCJSONReader.ETooManyDepthLevels"),this.MaxNumberBuffer=255,this.MaxStackSize=255,this.$init=function(){pas.System.TObject.$init.call(this),this.FReader=null,this.FStack=rtl.arraySetLength(null,0,256),this.FStackSize=0,this.FPeeked=0,this.FPeekedInt64=0,this.FPeekedNumber=rtl.arraySetLength(null,"",256),this.FPeekedString=""},this.$final=function(){this.FReader=void 0,this.FStack=void 0,this.FPeekedNumber=void 0,pas.System.TObject.$final.call(this)},this.NextPeek=function(){return 0===this.FPeeked&&(this.FPeeked=this.DoPeek()),this.FPeeked},this.CheckState=function(t){if(this.NextPeek()!==t)throw this.EInvalidStateException.$create("Create$2",[t])},this.SkipChar=function(){for(this.FReader.MoveNext(1);this.FReader.PeekChar().charCodeAt()in e.Wspace;)this.FReader.MoveNext(1)},this.IsLiteral=function(t){return!pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.CharInSet(t,pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.CreateCharSet("/\\;#{}[]:,' \r\n\f\t"))},this.IsDigit=function(t){return t<="ÿ"&&pas["WEBLib.TMSFNCTypes"].CharIsNumber(t)},this.DoPeek=function(){var t,i=0;if(1===(t=this.FStack[this.FStackSize-1]))this.FStack[this.FStackSize-1]=4;else if(4===t){var s=this.NextNonWhitespace();if("]"===s)return this.SkipChar(),this.FPeeked=4,this.FPeeked;if(","!==s)throw this.EUnterminatedArray.$create("Create$2");this.SkipChar()}else{if(t in rtl.createSet(2,5)){if(this.FStack[this.FStackSize-1]=6,5===t){var n=this.NextNonWhitespace();if("}"===n){for(;this.FReader.PeekChar().charCodeAt()in e.Wspace;)this.FReader.MoveNext(1);return this.SkipChar(),this.FPeeked=2,this.FPeeked}if(","!==n)throw this.EUnterminatedObject.$create("Create$2");this.SkipChar()}var r=this.NextNonWhitespace();if('"'===r)return this.SkipChar(),this.FPeeked=10,this.FPeeked;if("}"===r){if(5!==t)return this.SkipChar(),this.FPeeked=2,this.FPeeked;throw this.ENameExpected.$create("Create$2")}throw this.ENameExpected.$create("Create$2")}if(6===t){if(this.FStack[this.FStackSize-1]=5,":"!==this.NextNonWhitespace())throw this.EColonExpected.$create("Create$2");this.SkipChar()}else if(0===t)this.FStack[this.FStackSize-1]=3;else if(3===t){if(this.SkipWhitespaceUntilEnd())return this.FPeeked=13,this.FPeeked;throw this.EMultipleRootNotAllowed.$create("Create$2")}}var o=this.NextNonWhitespace();if("]"===o){if(1===t)return this.SkipChar(),this.FPeeked=4,this.FPeeked;throw this.EExpectedValue.$create("Create$2")}if('"'===o){if(1===this.FStackSize)throw this.EObjectOrArrayExpected.$create("Create$2");return this.SkipChar(),this.FPeeked=8,this.FPeeked}if("["===o)return this.SkipChar(),this.FPeeked=3,this.FPeeked;if("{"===o)return this.SkipChar(),this.FPeeked=1,this.FPeeked;if(1===this.FStackSize)throw this.EObjectOrArrayExpected.$create("Create$2");if(0!==(i=this.PeekKeyword()))return i;if(0!==(i=this.PeekNumber()))return i;throw this.EExpectedValue.$create("Create$2")},this.PushScope=function(t){if(this.FStackSize>255)throw this.ETooManyDepthLevels.$create("Create$2");this.FStack[this.FStackSize]=t,this.FStackSize+=1},this.NextNonWhitespace=function(){var t,i="";t=this.FReader.FReadStream.GetPosition(),i=this.ReadChar();do{if(i>" "||!(i.charCodeAt()in e.Wspace))return this.FReader.FReadStream.SetPosition(t),i;i=this.ReadChar()}while(!this.FReader.Eof());return this.FReader.FReadStream.SetPosition(t),"\0"},this.ReadChar=function(){return this.FReader.ReadChar()},this.PeekKeyword=function(){var t=this.FReader.PeekChar();if("t"===t||"T"===t){this.FReader.MoveNext(1);var e=this.FReader.NextChar();if("r"===e||"R"===e){var i=this.FReader.NextChar();if("u"===i||"U"===i){var s=this.FReader.NextChar();if(("e"===s||"E"===s)&&(this.FReader.Eof()||!this.IsLiteral(this.FReader.PeekChar())))return 5}}}else if("f"===t||"F"===t){this.FReader.MoveNext(1);var n=this.FReader.NextChar();if("a"===n||"A"===n){var r=this.FReader.NextChar();if("l"===r||"L"===r){var o=this.FReader.NextChar();if("s"===o||"S"===o){var a=this.FReader.NextChar();if(("e"===a||"E"===a)&&(this.FReader.Eof()||!this.IsLiteral(this.FReader.PeekChar())))return 6}}}}else{if("n"!==t&&"N"!==t)return 0;this.FReader.MoveNext(1);var l=this.FReader.NextChar();if("u"===l||"U"===l){var h=this.FReader.NextChar();if("l"===h||"L"===h){var F=this.FReader.NextChar();if(("l"===F||"L"===F)&&(this.FReader.Eof()||!this.IsLiteral(this.FReader.PeekChar())))return 7}}}throw this.EExpectedValue.$create("Create$2")};rtl.trunc(-900719925474099.1);this.PeekNumber=function(){var t=0,e=!1,i=!1,s=0,n=0,r="",o=0;if("-"!==(r=this.FReader.PeekChar())&&!this.IsDigit(r))return 0;for(e=!1,i=!0,t=0,o=0,s=-1;;){if(o>=255)throw this.EExpectedValue.$create("Create$2");r=this.FReader.NextChar(),this.FPeekedNumber[o]=r,o+=1;var a=r;if("-"===a){if(0===t){e=!0,t=1;continue}if(5===t){t=6;continue}throw this.EExpectedValue.$create("Create$2")}if("+"===a){if(5===t){t=6;continue}throw this.EExpectedValue.$create("Create$2")}if("e"===a||"E"===a){if(t in rtl.createSet(2,4)){t=5;continue}throw this.EExpectedValue.$create("Create$2")}if("."===a){if(2===t){t=3;continue}throw this.EExpectedValue.$create("Create$2")}if(!this.IsDigit(r)){if(this.IsLiteral(r))throw this.EExpectedValue.$create("Create$2");this.FReader.Backup(r),o-=1;break}if(t in rtl.createSet(1,0))s=-(r.charCodeAt()-48),t=2;else if(2===t){if(0===s)throw this.EExpectedValue.$create("Create$2");n=10*s-(r.charCodeAt()-48),i=i&&(s>-900719925474099||-900719925474099===s&&n<s),s=n}else 3===t?t=4:t in rtl.createSet(5,6)&&(t=7)}if(2===t&&i&&(-9007199254740991!==s||e))return this.FPeekedInt64=e?s:-s,11;if(t in rtl.createSet(2,4,7))return this.FPeekedNumber[o]="\0",12;throw this.EExpectedValue.$create("Create$2")},this.InternalReadQuoted=function(t){var e="",i="",s="",n="";for(e="",n="",i="";!this.FReader.Eof()&&('"'!==(s=this.ReadChar())||"\\"===i);)n+=s,i=s;return t&&(e=n),e},this.ReadQuoted=function(){return this.InternalReadQuoted(!0)},this.SkipQuoted=function(){this.InternalReadQuoted(!1)},this.SkipWhitespaceUntilEnd=function(){var t,i="";t=this.FReader.FReadStream.GetPosition(),i=this.ReadChar();do{if(i>" "||!(i.charCodeAt()in e.Wspace))return this.FReader.FReadStream.SetPosition(t),!1;i=this.ReadChar()}while(!this.FReader.Eof());return this.FReader.FReadStream.SetPosition(t),!0},this.Create$1=function(e){return pas.System.TObject.Create.call(this),this.FReader=t.TTMSFNCJSONStreamReader.$create("Create$1",[e]),this.FPeeked=0,this.FStack[0]=0,this.FStackSize=1,this},this.Destroy=function(){rtl.free(this,"FReader"),pas.System.TObject.Destroy.call(this)},this.ReadBeginArray=function(){this.CheckState(3),this.PushScope(1),this.FPeeked=0},this.ReadEndArray=function(){this.CheckState(4),this.FStackSize-=1,this.FPeeked=0},this.ReadBeginObject=function(){this.CheckState(1),this.PushScope(2),this.FPeeked=0},this.ReadEndObject=function(){this.CheckState(2),this.FStackSize-=1,this.FPeeked=0},this.PeekName=function(){var t,e;return e=this.FReader.FReadStream.GetPosition(),t=this.ReadQuoted(),this.FReader.FReadStream.SetPosition(e),t},this.ReadName=function(){return this.CheckState(10),this.FPeeked=0,this.ReadQuoted()},this.ReadString=function(){var t="",i=this.NextPeek();if(8===i)t=this.ReadQuoted();else if(11===i)t=pas.SysUtils.IntToStr(this.FPeekedInt64);else if(12===i)t=e.ArrayOfCharToString(this.FPeekedNumber.slice(0));else{if(9!==i)throw this.EInvalidStateException.$create("Create$2",[8]);t=this.FPeekedString}return this.FPeeked=0,t=pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.UnescapeString(t)},this.ReadBoolean=function(){var t=!1,e=this.NextPeek();if(5===e)t=!0;else{if(6!==e)throw this.EInvalidStateException.$create("Create$2",[5]);t=!1}return this.FPeeked=0,t},this.ReadDouble=function(){var t=0,i=this.NextPeek();if(11===i)return this.FPeeked=0,this.FPeekedInt64;if(12===i){if(pas.SysUtils.TryStrToFloat$2(e.ArrayOfCharToString(this.FPeekedNumber.slice(0)),{get:function(){return t},set:function(e){t=e}}))return this.FPeeked=0,t;this.FPeekedString=e.ArrayOfCharToString(this.FPeekedNumber.slice(0))}else if(8===i)this.FPeekedString=this.ReadQuoted();else if(9!==i)throw this.EInvalidStateException.$create("Create$2",[12]);return this.FPeeked=9,t=pas.SysUtils.StrToFloat(this.FPeekedString),this.FPeekedString="",this.FPeeked=0,t},this.ReadInteger=function(){var t,i=0,s=this.NextPeek();if(11===s){if((i=4294967295&this.FPeekedInt64)!==this.FPeekedInt64)throw this.EInvalidStateException.$create("Create$2",[11]);return this.FPeeked=0,i}if(12===s){if(pas.SysUtils.TryStrToInt(e.ArrayOfCharToString(this.FPeekedNumber.slice(0)),{get:function(){return i},set:function(t){i=t}}))return this.FPeeked=0,i;this.FPeekedString=e.ArrayOfCharToString(this.FPeekedNumber.slice(0))}else if(8===s){if(this.FPeekedString=this.ReadQuoted(),pas.SysUtils.TryStrToInt(this.FPeekedString,{get:function(){return i},set:function(t){i=t}}))return this.FPeeked=0,i}else if(9!==s)throw this.EInvalidStateException.$create("Create$2",[11]);if(this.FPeeked=9,(t=pas.SysUtils.StrToFloat(this.FPeekedString))!==(i=Math.round(t)))throw this.EInvalidStateException.$create("Create$2",[11]);return this.FPeekedString="",this.FPeeked=0,i},this.SkipValue=function(){var t=0;t=0;do{var e=this.NextPeek();3===e?(this.PushScope(1),t+=1):1===e?(this.PushScope(2),t+=1):4===e||2===e?(this.FStackSize-=1,t-=1):8!==e&&10!==e||this.SkipQuoted(),this.FPeeked=0}while(!(t<=0))},this.ReadNull=function(){this.CheckState(7),this.FPeeked=0},this.HasNext=function(){return!(this.NextPeek()in rtl.createSet(2,4))},this.Peek=function(){var t=this.NextPeek();return 1===t?0:2===t?1:3===t?2:4===t?3:10===t?4:5===t||6===t?5:7===t?6:8===t||9===t?7:11===t||12===t?8:9},this.IsNull=function(){return 6===this.Peek()}})),t.$implcode=function(){e.Wspace=rtl.createSet(32,10,13,9,12),e.ArrayOfCharToString=function(t){var e="",i=0;e="";for(var s=0,n=rtl.length(t)-1;s<=n&&"\0"!==t[i=s];s++)e+=t[i];return e}}}),["WEBLib.TMSFNCUtils"]),rtl.module("WEBLib.TMSFNCJSONWriter",["System","Classes","SysUtils","WEBLib.TMSFNCTypes"],(function(){"use strict";var t=this;rtl.createClass(this,"TTMSFNCJSONStreamWriter",pas.System.TObject,(function(){this.$init=function(){pas.System.TObject.$init.call(this),this.FStream=null,this.FWriteStream=null},this.$final=function(){this.FStream=void 0,this.FWriteStream=void 0,pas.System.TObject.$final.call(this)},this.Create$1=function(t){return this.FStream=t,this.FWriteStream=pas.Classes.TStringStream.$create("Create$3",["",pas.Classes.TEncoding.GetANSI(),!0]),this},this.Destroy=function(){try{this.FWriteStream.SetPosition(0),this.FStream.CopyFrom(this.FWriteStream,this.FWriteStream.GetSize())}finally{rtl.free(this,"FWriteStream")}pas.System.TObject.Destroy.call(this)},this.Write=function(t){this.FWriteStream.WriteString(t)}})),rtl.createClass(this,"TTMSFNCJSONWriter",pas.System.TObject,(function(){rtl.createClass(this,"ECannotWriteName",pas.SysUtils.Exception,(function(){this.Create$2=function(){return pas.SysUtils.Exception.Create$1.call(this,"Cannot write name in current Json scope"),this}}),"TTMSFNCJSONWriter.ECannotWriteName"),rtl.createClass(this,"EMultipleRootNotAllowed",pas.SysUtils.Exception,(function(){this.Create$2=function(){return pas.SysUtils.Exception.Create$1.call(this,"Multiple root values not allowed"),this}}),"TTMSFNCJSONWriter.EMultipleRootNotAllowed"),rtl.createClass(this,"EObjectOrArrayExpected",pas.SysUtils.Exception,(function(){this.Create$2=function(){return pas.SysUtils.Exception.Create$1.call(this,"Object or array expected as top-level value"),this}}),"TTMSFNCJSONWriter.EObjectOrArrayExpected"),rtl.createClass(this,"EInvalidNesting",pas.SysUtils.Exception,(function(){this.Create$2=function(){return pas.SysUtils.Exception.Create$1.call(this,"Invalid nesting. Not all arrays/objects were properly closed."),this}}),"TTMSFNCJSONWriter.EInvalidNesting"),rtl.createClass(this,"EMissingValue",pas.SysUtils.Exception,(function(){this.Create$2=function(){return pas.SysUtils.Exception.Create$1.call(this,"Json value missing"),this}}),"TTMSFNCJSONWriter.EMissingValue"),rtl.createClass(this,"ETooManyDepthLevels",pas.SysUtils.Exception,(function(){this.Create$2=function(){return pas.SysUtils.Exception.Create$1.call(this,"Maximum level of nested structured reached."),this}}),"TTMSFNCJSONWriter.ETooManyDepthLevels"),rtl.createClass(this,"EEmptyJson",pas.SysUtils.Exception,(function(){this.Create$2=function(){return pas.SysUtils.Exception.Create$1.call(this,"Json is still empty. Cannot perform operation."),this}}),"TTMSFNCJSONWriter.EEmptyJson"),rtl.createClass(this,"EEmptyName",pas.SysUtils.Exception,(function(){this.Create$2=function(){return pas.SysUtils.Exception.Create$1.call(this,"Cannot write empty name"),this}}),"TTMSFNCJSONWriter.EEmptyName"),this.TTMSFNCJSONScope={0:"jscEmptyDocument",jscEmptyDocument:0,1:"jscEmptyArray",jscEmptyArray:1,2:"jscEmptyObject",jscEmptyObject:2,3:"jscNonEmptyDocument",jscNonEmptyDocument:3,4:"jscNonEmptyArray",jscNonEmptyArray:4,5:"jscNonEmptyObject",jscNonEmptyObject:5,6:"jscDanglingName",jscDanglingName:6},this.MaxStackSize=255,this.$init=function(){pas.System.TObject.$init.call(this),this.FWriter=null,this.FStack=rtl.arraySetLength(null,0,256),this.FStackSize=0,this.FIndent="",this.FSeparator="",this.FDeferredName=""},this.$final=function(){this.FWriter=void 0,this.FStack=void 0,pas.System.TObject.$final.call(this)},this.OpenItem=function(t,e){return this.BeforeValue(!0),this.PushScope(t),this.FWriter.Write(e),this,this},this.CloseItem=function(t,e,i){var s;if(!((s=this.PeekScope())in rtl.createSet(t,e)))throw this.EInvalidNesting.$create("Create$2");if(""!==this.FDeferredName)throw this.EMissingValue.$create("Create$2");return this.FStackSize-=1,s===e&&this.NewLine(),this.FWriter.Write(i),this,this},this.PushScope=function(t){if(this.FStackSize>255)throw this.ETooManyDepthLevels.$create("Create$2");this.FStack[this.FStackSize]=t,this.FStackSize+=1},this.PeekScope=function(){if(0===this.FStackSize)throw this.EEmptyJson.$create("Create$2");return this.FStack[this.FStackSize-1]},this.ReplaceTop=function(t){if(0===this.FStackSize)throw this.EEmptyJson.$create("Create$2");this.FStack[this.FStackSize-1]=t},this.WriteDeferredName=function(){""!==this.FDeferredName&&(this.BeforeName(),this.InternalWriteString(this.FDeferredName),this.FDeferredName="")},this.InternalWriteString=function(t){this.FWriter.Write('"'),this.FWriter.Write(pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.EscapeString(t)),this.FWriter.Write('"')},this.NewLine=function(){if(""!==this.FIndent){this.FWriter.Write("\r\n");for(var t=1,e=this.FStackSize-1;t<=e;t++)t,this.FWriter.Write(this.FIndent)}},this.BeforeName=function(){var t=this.PeekScope();if(5===t)this.FWriter.Write(",");else if(2!==t)throw this.ECannotWriteName.$create("Create$2");this.NewLine(),this.ReplaceTop(6)},this.BeforeValue=function(t){var e=this.PeekScope();if(3===e)throw this.EMultipleRootNotAllowed.$create("Create$2");if(0===e){if(!t)throw this.EObjectOrArrayExpected.$create("Create$2");this.ReplaceTop(3)}else if(1===e)this.ReplaceTop(4),this.NewLine();else if(4===e)this.FWriter.Write(","),this.NewLine();else{if(6!==e)throw this.EInvalidNesting.$create("Create$2");this.FWriter.Write(this.FSeparator),this.ReplaceTop(5)}},this.Create$1=function(e){return pas.System.TObject.Create.call(this),this.FWriter=t.TTMSFNCJSONStreamWriter.$create("Create$1",[e]),this.FSeparator=":",this.PushScope(0),this},this.Destroy=function(){rtl.free(this,"FWriter"),pas.System.TObject.Destroy.call(this)},this.WriteBeginArray=function(){return this.WriteDeferredName(),this.OpenItem(1,"[")},this.WriteEndArray=function(){return this.CloseItem(1,4,"]")},this.WriteBeginObject=function(){return this.WriteDeferredName(),this.OpenItem(2,"{")},this.WriteEndObject=function(){return this.CloseItem(2,5,"}")},this.WriteName=function(t){if(""===t)throw this.EEmptyName.$create("Create$2");if(""!==this.FDeferredName)throw this.EMissingValue.$create("Create$2");if(0===this.FStackSize)throw this.EEmptyJson.$create("Create$2");return this.FDeferredName=t,this,this},this.WriteString=function(t){return this.WriteDeferredName(),this.BeforeValue(!1),this.InternalWriteString(t),this,this},this.WriteBoolean=function(t){return this.WriteDeferredName(),this.BeforeValue(!1),t?this.FWriter.Write("true"):this.FWriter.Write("false"),this,this},this.WriteNull=function(){return this.WriteDeferredName(),this.BeforeValue(!1),this.FWriter.Write("null"),this,this},this.WriteDouble=function(t){return this.WriteDeferredName(),this.BeforeValue(!1),this.FWriter.Write(pas.SysUtils.FloatToStr(t)),this,this},this.WriteInteger=function(t){return this.WriteDeferredName(),this.BeforeValue(!1),this.FWriter.Write(pas.SysUtils.IntToStr(t)),this,this}}))}),["WEBLib.TMSFNCUtils"]),rtl.module("StrUtils",["System","SysUtils","Types"],(function(){"use strict";var t=this,e=t.$impl;this.AnsiStartsStr=function(t,e){return e.length>=t.length&&""!==t&&t===pas.System.Copy(e,1,t.length)},this.AnsiReplaceStr=function(t,e,i){return pas.SysUtils.StringReplace(t,e,i,rtl.createSet(0))},this.IndexStr=function(t,e){var i=0;if(-1,rtl.length(e)-1==-1||rtl.length(e)-1>2147483647)return-1;for(var s=0,n=rtl.length(e)-1;s<=n;s++)if(e[i=s]===t)return i;return-1},this.ReplaceStr=function(e,i,s){return t.AnsiReplaceStr(e,i,s)},this.Soundex=function(t,i){var s="",n="",r="",o=0,a=0;if(s="",r="\0",t.length>0)for(s=pas.System.upcase(t.charAt(0)),o=2,a=t.length;o<=a&&s.length<i;)(n=e.SScore.charAt(t.charCodeAt(o-1)-1)).charCodeAt()in rtl.createSet(48,105,r.charCodeAt())||(s+=n),"i"!==n&&(r=n),o+=1;return(a=s.length)<i&&(s+=pas.System.StringOfChar("0",i-a)),s},this.SoundexSimilar=function(e,i,s){return t.Soundex(e,s)===t.Soundex(i,s)},this.SoundexSimilar$1=function(e,i){return t.SoundexSimilar(e,i,4)},this.SoundexProc=function(e,i){return t.SoundexSimilar$1(e,i)},this.AnsiResemblesProc=null,this.ResemblesProc=null,this.Removeleadingchars=function(t,e){var i,s=0;if((i=t.get().length)>0){for(s=1;s<=i&&pas.SysUtils.CharInSet(t.get().charAt(s-1),e);)s+=1;s>1&&pas.System.Delete(t,1,s-1)}},this.RemoveTrailingChars=function(t,e){var i,s=0;if((i=t.get().length)>0){for(s=i;s>0&&pas.SysUtils.CharInSet(t.get().charAt(s-1),e);)s-=1;s!==i&&t.set(rtl.strSetLength(t.get(),s))}},this.TrimLeftSet=function(e,i){var s="";return s=e,t.Removeleadingchars({get:function(){return s},set:function(t){s=t}},i),s},this.TrimRightSet=function(e,i){var s="";return s=e,t.RemoveTrailingChars({get:function(){return s},set:function(t){s=t}},i),s},t.$implcode=function(){e.SScore="00000000000000000000000000000000000000000000000000000000000000000123012i02245501262301i2i20000000123012i02245501262301i2i20000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"},t.$init=function(){t.AnsiResemblesProc=t.SoundexProc,t.ResemblesProc=t.SoundexProc}}),["JS"]),rtl.module("WEBLib.TMSFNCPersistence",["System","Generics.Collections","Classes","TypInfo","SysUtils","WEBLib.TMSFNCTypes","WEBLib.TMSFNCJSONReader","WEBLib.TMSFNCJSONWriter"],(function(){"use strict";var t=this,e=t.$impl;rtl.createInterface(this,"ITMSFNCPersistence","{363F04AF-B8A7-4C47-A2D6-8ED9C44CEFF6}",["CanSaveProperty","CanLoadProperty"],pas.System.IUnknown),rtl.createInterface(this,"ITMSFNCBaseListIO","{FAB1D21E-D798-4CE0-B17B-9D75E4456AB4}",["GetItemClass"],pas.System.IUnknown),rtl.createInterface(this,"ITMSFNCBasePersistenceIO","{91DEAFC3-8932-45F4-A3ED-5AAA0C0E9250}",["CreateObject"],pas.System.IUnknown),rtl.createInterface(this,"ITMSFNCBaseCollectionIO","{90FDF257-7362-411D-B7F6-E2BEE2265016}",["AddItem"],pas.System.IUnknown),rtl.createInterface(this,"ITMSFNCPersistenceIO","{11B625F8-447A-4AE5-BB88-5ECDEA979AF7}",["NeedsObjectReference","GetObjectReference","FixOwners"],this.ITMSFNCBasePersistenceIO),rtl.createClass(this,"ETMSFNCReaderException",pas.SysUtils.Exception,(function(){})),rtl.createClass(this,"TTMSFNCObjectDictionary",pas["Generics.Collections"].TDictionary$G3,(function(){})),rtl.createClass(this,"TTMSFNCObjectList",pas["Generics.Collections"].TObjectList$G1,(function(){})),rtl.createClass(this,"TTMSFNCStringList",pas["Generics.Collections"].TList$G4,(function(){})),rtl.createClass(this,"TTMSFNCIntegerList",pas["Generics.Collections"].TList$G5,(function(){})),rtl.createClass(this,"TTMSFNCDoubleList",pas["Generics.Collections"].TList$G6,(function(){})),rtl.createClass(this,"TTMSFNCWriter",pas.System.TObject,(function(){this.$init=function(){pas.System.TObject.$init.call(this),this.FWriter=null,this.FIOReference=null,this.FOnCustomWriteProperty=null,this.FRootObject=null,this.FOnCustomIsAssignableProperty=null},this.$final=function(){this.FWriter=void 0,this.FIOReference=void 0,this.FOnCustomWriteProperty=void 0,this.FRootObject=void 0,this.FOnCustomIsAssignableProperty=void 0,pas.System.TObject.$final.call(this)},this.SetRootObject=function(e){this.FRootObject=e,t.TTMSFNCPersistence.FRootObject=this.FRootObject},this.SetIOReference=function(e){this.FIOReference=e,t.TTMSFNCPersistence.FIOReference=this.FIOReference},this.WritePropInfoValue=function(i,s){var n,r,o,a,l="",h=pas.System.TMethod.$new(),F=0;if(t.TTMSFNCPersistence.IsWriteOnly(s))this.FWriter.WriteNull();else{a=i,o=s,r=t.TTMSFNCPersistence.GetPropInfoType(o),n=t.TTMSFNCPersistence.GetPropInfoName(o);var p=r;1===p?"TAlphaColor"===(l=t.TTMSFNCPersistence.GetPropInfoTypeName(o))||"TColor"===l||"TGraphicsColor"===l?-1===pas.TypInfo.GetOrdProp$1(a,o)?this.FWriter.WriteString("gcNull"):(F=pas.TypInfo.GetOrdProp$1(a,o),this.FWriter.WriteString(e.ColorToHTMLEx(F))):this.FWriter.WriteInteger(pas.TypInfo.GetOrdProp$1(a,o)):2===p||3===p?this.FWriter.WriteString(pas.TypInfo.GetStrProp$1(a,o)):4===p?t.TTMSFNCPersistence.GetPropInfoDataTypeInfo(o)===rtl.boolean?this.FWriter.WriteBoolean(0!=pas.TypInfo.GetOrdProp$1(a,o)):this.FWriter.WriteInteger(pas.TypInfo.GetOrdProp$1(a,o)):7===p?this.FWriter.WriteBoolean(0!=pas.TypInfo.GetOrdProp$1(a,o)):p===pas.System.TTypeKind.tkDouble?this.FWriter.WriteDouble(pas.TypInfo.GetFloatProp$1(a,o)):5===p?this.FWriter.WriteInteger(pas.TypInfo.GetOrdProp$1(a,o)):9===p?(h.$assign(pas.TypInfo.GetMethodProp(a,o)),null===h.Code?this.FWriter.WriteNull():null!=t.TTMSFNCPersistence.FRootObject?this.FWriter.WriteString(t.TTMSFNCPersistence.FRootObject.$class.MethodName(h.Code)):this.FWriter.WriteNull()):(t.TTMSFNCPersistence.GetEnumName(pas.System.$rtti.TTypeKind,r),this.FWriter.WriteNull()),pas["WEBLib.Graphics"].TFont.isPrototypeOf(a)&&"Size"===n&&(this.FWriter.WriteName("IsFMX"),this.FWriter.WriteBoolean(!1))}},this.WriteProperties=function(t){var e=null,i=[],s=0;if(null!=t){e=t.$rtti;try{i=pas.TypInfo.GetPropList(e,pas.System.tkAny,!0);for(var n=0,r=rtl.length(i)-1;n<=r;n++)s=n,this.WriteProperty(t,i[s])}finally{}}},this.WriteProperty=function(e,i){var s="",n=0,r=!1,o=!1,a=!1,l=null,h=null;try{if(null==i)return;s=t.TTMSFNCPersistence.GetPropInfoName(i),n=t.TTMSFNCPersistence.GetPropInfoType(i),r=-1===pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.IndexOfTextInArray(s,t.TTMSFNCPersistence.FExcludeProperties),pas.SysUtils.Supports$3(e,t.ITMSFNCPersistence.$guid,{get:function(){return l},set:function(t){l=t}})&&(r=l.CanSaveProperty(e,s,n)),r&&(o=!0,null!=this.FOnCustomWriteProperty&&this.FOnCustomWriteProperty(e,s,n,this.FWriter,{get:function(){return o},set:function(t){o=t}}),o&&(this.FWriter.WriteName(s),n in rtl.createSet(13)?(h=pas.TypInfo.GetObjectProp(e,s),a=t.TTMSFNCPersistence.IsAssignableProperty(e,i),null!=this.FOnCustomIsAssignableProperty&&this.FOnCustomIsAssignableProperty(e,s,{get:function(){return a},set:function(t){a=t}}),a?pas.Classes.TComponent.isPrototypeOf(h)?this.FWriter.WriteString(rtl.as(h,pas.Classes.TComponent).FName):this.FWriter.WriteString(""):this.WriteObject(h)):this.WritePropInfoValue(e,i)))}finally{rtl._Release(l)}},this.WriteGenericObjectList=function(t){var e=0;this.FWriter.WriteBeginArray();for(var i=0,s=t.FLength-1;i<=s;i++)e=i,this.WriteSingleObject(t.GetItem(e));this.FWriter.WriteEndArray()},this.WriteGenericStringList=function(t){var e=0;this.FWriter.WriteBeginArray();for(var i=0,s=t.FLength-1;i<=s;i++)e=i,this.FWriter.WriteString(t.GetItem(e));this.FWriter.WriteEndArray()},this.WriteGenericIntegerList=function(t){var e=0;this.FWriter.WriteBeginArray();for(var i=0,s=t.FLength-1;i<=s;i++)e=i,this.FWriter.WriteInteger(t.GetItem(e));this.FWriter.WriteEndArray()},this.WriteGenericDoubleList=function(t){var e=0;this.FWriter.WriteBeginArray();for(var i=0,s=t.FLength-1;i<=s;i++)e=i,this.FWriter.WriteDouble(t.GetItem(e));this.FWriter.WriteEndArray()},this.WriteStrings=function(t){var e=0;this.FWriter.WriteBeginArray();for(var i=0,s=t.GetCount()-1;i<=s;i++)e=i,this.FWriter.WriteString(t.Get(e));this.FWriter.WriteEndArray()},this.WriteGenericDictionary=function(t){var e="";this.FWriter.WriteBeginArray();var i=t.GetKeys().GetEnumerator$1();try{for(;i.MoveNext$1();)e=i.GetCurrent(),this.FWriter.WriteBeginObject(),this.FWriter.WriteName(e),this.WriteSingleObject(t.GetItem(e)),this.FWriter.WriteEndObject()}finally{i=rtl.freeLoc(i)}this.FWriter.WriteEndArray()},this.WriteCollection=function(t){var e=0;this.FWriter.WriteBeginArray();for(var i=0,s=t.GetCount()-1;i<=s;i++)e=i,this.WriteSingleObject(t.GetItem(e));this.FWriter.WriteEndArray()},this.WriteList=function(t){var e=0;this.FWriter.WriteBeginArray();for(var i=0,s=t.GetCount()-1;i<=s;i++)e=i,this.WriteSingleObject(rtl.getObject(t.Get(e)));this.FWriter.WriteEndArray()},this.WriteBitmap=function(t){pas["WEBLib.TMSFNCTypes"].IsBitmapEmpty(t)?this.FWriter.WriteString(""):this.FWriter.WriteString(t.GetData())},this.WriteSingleObject=function(e){this.FWriter.WriteBeginObject(),""!==t.TTMSFNCPersistence.ClassTypeVariable&&(this.FWriter.WriteName(t.TTMSFNCPersistence.ClassTypeVariable),this.FWriter.WriteString(e.$classname)),this.WriteProperties(e),this.FWriter.WriteEndObject()},this.WriteObject=function(e){var i=null;try{null===e?this.FWriter.WriteNull():t.TTMSFNCPersistence.IsGenericList(e.$class.ClassType(),"String")?this.WriteGenericStringList(e):t.TTMSFNCPersistence.IsGenericList(e.$class.ClassType(),"Integer")?this.WriteGenericIntegerList(e):t.TTMSFNCPersistence.IsGenericList(e.$class.ClassType(),"Double")?this.WriteGenericDoubleList(e):t.TTMSFNCPersistence.IsGenericList(e.$class.ClassType(),"")?this.WriteGenericObjectList(e):t.TTMSFNCPersistence.IsGenericDictionary(e.$class.ClassType())?this.WriteGenericDictionary(e):t.TTMSFNCPersistence.IsList(e.$class.ClassType())?this.WriteList(e):t.TTMSFNCPersistence.IsCollection(e.$class.ClassType())?this.WriteCollection(e):t.TTMSFNCPersistence.IsBitmap(e.$class.ClassType())?this.WriteBitmap(e):t.TTMSFNCPersistence.IsDescendingClass(e.$class.ClassType(),["TStrings"])?this.WriteStrings(e):null!=this.FIOReference&&pas.SysUtils.Supports$3(this.FIOReference,t.ITMSFNCPersistenceIO.$guid,{get:function(){return i},set:function(t){i=t}})&&i.NeedsObjectReference(e.$class.ClassType())?this.FWriter.WriteString(i.GetObjectReference(e)):this.WriteSingleObject(e)}finally{rtl._Release(i)}},this.Create$1=function(t){return this.FWriter=pas["WEBLib.TMSFNCJSONWriter"].TTMSFNCJSONWriter.$create("Create$1",[t]),this},this.Destroy=function(){rtl.free(this,"FWriter"),pas.System.TObject.Destroy.call(this)},this.Write=function(t){this.WriteObject(t)}})),rtl.createClass(this,"TTMSFNCObjectReference",pas.System.TObject,(function(){this.$init=function(){pas.System.TObject.$init.call(this),this.Instance=null,this.Prop=null,this.Id=""},this.$final=function(){this.Instance=void 0,this.Prop=void 0,pas.System.TObject.$final.call(this)},this.Create$1=function(t,e,i){return this.Instance=t,this.Prop=e,this.Id=i,this}})),rtl.createClass(this,"TTMSFNCReader",pas.System.TObject,(function(){this.$init=function(){pas.System.TObject.$init.call(this),this.FReferences=null,this.FReader=null,this.FIOReference=null,this.FOnCustomReadProperty=null,this.FRootObject=null,this.FOnCustomIsAssignableProperty=null},this.$final=function(){this.FReferences=void 0,this.FReader=void 0,this.FIOReference=void 0,this.FOnCustomReadProperty=void 0,this.FRootObject=void 0,this.FOnCustomIsAssignableProperty=void 0,pas.System.TObject.$final.call(this)},this.ReadSingleObject=function(e){var i=null,s="",n=null,r=null;try{if(this.FReader.ReadBeginObject(),""!==t.TTMSFNCPersistence.ClassTypeVariable){if(!this.FReader.HasNext()||this.FReader.ReadName()!==t.TTMSFNCPersistence.ClassTypeVariable)throw t.ETMSFNCReaderException.$create("Create$1",['"'+t.TTMSFNCPersistence.ClassTypeVariable+'" property not found in Object descriptor.']);s=this.FReader.ReadString()}""===s&&(s=e.$classname),null!=this.FIOReference?(i=null,pas.SysUtils.Supports$3(this.FIOReference,t.ITMSFNCBasePersistenceIO.$guid,{get:function(){return n},set:function(t){n=t}})?i=n.CreateObject(s,e):pas.SysUtils.Supports$3(this.FIOReference,t.ITMSFNCPersistenceIO.$guid,{get:function(){return r},set:function(t){r=t}})&&(i=r.CreateObject(s,e))):i=t.TTMSFNCPersistence.CreateObject(s,e);try{this.ReadProperties(i),this.FReader.ReadEndObject()}catch(t){throw i=rtl.freeLoc(i),t}}finally{rtl._Release(n),rtl._Release(r)}return i},this.SetRootObject=function(e){this.FRootObject=e,t.TTMSFNCPersistence.FRootObject=this.FRootObject},this.SetIOReference=function(e){this.FIOReference=e,t.TTMSFNCPersistence.FIOReference=this.FIOReference},this.ReadSingleObject$1=function(e){if(this.FReader.ReadBeginObject(),""!==t.TTMSFNCPersistence.ClassTypeVariable){if(!this.FReader.HasNext()||this.FReader.ReadName()!==t.TTMSFNCPersistence.ClassTypeVariable)throw t.ETMSFNCReaderException.$create("Create$1",['"'+t.TTMSFNCPersistence.ClassTypeVariable+'" property not found in Object descriptor.']);this.FReader.ReadString()}try{this.ReadProperties(e),this.FReader.ReadEndObject()}catch(t){throw t}},this.ReadProperties=function(t){for(var e=null;this.FReader.HasNext();)this.FReader.IsNull()?this.FReader.SkipValue():(e=null,null!=t&&(e=pas.TypInfo.GetPropInfo$2(t,this.FReader.ReadName())),null!=e?this.ReadProperty(t,e):this.FReader.SkipValue())},this.ReadProperty=function(e,i){var s="",n=null,r=!1,o=null,a=null,l=0,h=!1,F=!1,p=null,c="";try{if(null==i)return;l=t.TTMSFNCPersistence.GetPropInfoType(i),s=t.TTMSFNCPersistence.GetPropInfoName(i),r=-1===pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.IndexOfTextInArray(s,t.TTMSFNCPersistence.FExcludeProperties),pas.SysUtils.Supports$3(e,t.ITMSFNCPersistence.$guid,{get:function(){return o},set:function(t){o=t}})&&(r=o.CanLoadProperty(e,s,l)),r?(h=!0,null!=this.FOnCustomReadProperty&&this.FOnCustomReadProperty(e,s,l,this.FReader,{get:function(){return h},set:function(t){h=t}}),h&&(l in rtl.createSet(13)?(n=t.TTMSFNCPersistence.GetPropInfoDataTypeInfoClassType(i),t.TTMSFNCPersistence.IsGenericList(n,"String")?this.ReadGenericStringList(pas.TypInfo.GetObjectProp(e,s)):t.TTMSFNCPersistence.IsGenericList(n,"")?this.ReadGenericObjectList(pas.TypInfo.GetObjectProp(e,s)):t.TTMSFNCPersistence.IsGenericDictionary(n)?this.ReadGenericDictionary(pas.TypInfo.GetObjectProp(e,s)):t.TTMSFNCPersistence.IsList(n)?this.ReadList(pas.TypInfo.GetObjectProp(e,s)):t.TTMSFNCPersistence.IsCollection(n)?this.ReadCollection(pas.TypInfo.GetObjectProp(e,s)):t.TTMSFNCPersistence.IsBitmap(n)?this.ReadBitmap(pas.TypInfo.GetObjectProp(e,s)):t.TTMSFNCPersistence.IsDescendingClass(n,["TStrings"])?this.ReadStrings(pas.TypInfo.GetObjectProp(e,s)):(h=!1,null!=this.FIOReference&&pas.SysUtils.Supports$3(this.FIOReference,t.ITMSFNCPersistenceIO.$guid,{get:function(){return a},set:function(t){a=t}})&&(h=a.NeedsObjectReference(n)),h?this.FReader.IsNull()?(this.FReader.ReadNull(),pas.TypInfo.SetObjectProp(e,s,null)):this.FReferences.Add(t.TTMSFNCObjectReference.$create("Create$1",[e,i,this.FReader.ReadString()])):(p=pas.TypInfo.GetObjectProp(e,s),F=t.TTMSFNCPersistence.IsAssignableProperty(e,i),null!=this.FOnCustomIsAssignableProperty&&this.FOnCustomIsAssignableProperty(e,s,{get:function(){return F},set:function(t){F=t}}),F?(c=this.FReader.ReadString(),null!=this.FRootObject&&pas.Classes.TComponent.isPrototypeOf(this.FRootObject)&&pas.TypInfo.SetObjectProp(e,s,rtl.as(this.FRootObject,pas.Classes.TComponent).FindComponent(c))):this.ReadExistingObject(p)))):this.ReadPropInfoValue(e,i))):this.FReader.SkipValue()}finally{rtl._Release(o),rtl._Release(a)}},this.ReadPropInfoValue=function(i,s){var n,r,o,a,l="",h="",F=0,p="",c=!1,u=0,d="",S=pas.System.TMethod.$new();if(t.TTMSFNCPersistence.IsWriteOnly(s)||this.FReader.IsNull())this.FReader.ReadNull();else{a=i,o=s,n=t.TTMSFNCPersistence.GetPropInfoName(o);var C=r=rtl.rc(t.TTMSFNCPersistence.GetPropInfoType(o),0,20);1===C?"TAlphaColor"===(l=t.TTMSFNCPersistence.GetPropInfoTypeName(o))||"TColor"===l||"TGraphicsColor"===l?(h=this.FReader.ReadString(),t.TTMSFNCPersistence.IsReadOnly(o)||("gcNull"===h?pas.TypInfo.SetOrdProp(a,n,-1):pas.TypInfo.SetOrdProp(a,n,e.HTMLToColorEx(h)))):(F=rtl.rc(this.FReader.ReadInteger(),-2147483648,2147483647),t.TTMSFNCPersistence.IsReadOnly(o)||pas.TypInfo.SetOrdProp$1(a,o,F)):2===C||3===C?(p=this.FReader.ReadString(),t.TTMSFNCPersistence.IsReadOnly(o)||pas.TypInfo.SetStrProp$1(a,o,p)):4===C?t.TTMSFNCPersistence.GetPropInfoDataTypeInfo(o)===rtl.boolean?(c=this.FReader.ReadBoolean(),t.TTMSFNCPersistence.IsReadOnly(o)||pas.TypInfo.SetOrdProp$1(a,o,c?1:0)):(F=rtl.rc(this.FReader.ReadInteger(),-2147483648,2147483647),t.TTMSFNCPersistence.IsReadOnly(o)||pas.TypInfo.SetOrdProp$1(a,o,F)):7===C?(c=this.FReader.ReadBoolean(),t.TTMSFNCPersistence.IsReadOnly(o)||pas.TypInfo.SetOrdProp$1(a,o,c?1:0)):C===pas.System.TTypeKind.tkDouble?(u=this.FReader.ReadDouble(),t.TTMSFNCPersistence.IsReadOnly(o)||pas.TypInfo.SetFloatProp$1(a,o,u)):5===C?(F=rtl.rc(this.FReader.ReadInteger(),-2147483648,2147483647),t.TTMSFNCPersistence.IsReadOnly(o)||pas.TypInfo.SetOrdProp$1(a,o,F)):9===C?(S.Data=null,S.Code=null,this.FReader.IsNull()?this.FReader.ReadNull():null!=t.TTMSFNCPersistence.FRootObject?(d=this.FReader.ReadString(),S.Code=t.TTMSFNCPersistence.FRootObject.$class.MethodAddress(d),null!==S.Code&&(S.Data=t.TTMSFNCPersistence.FRootObject)):this.FReader.ReadNull(),pas.TypInfo.SetMethodProp(a,o,S)):(t.TTMSFNCPersistence.GetEnumName(pas.System.$rtti.TTypeKind,r),this.FReader.ReadNull()),pas["WEBLib.Graphics"].TFont.isPrototypeOf(a)&&"Size"===n&&this.FReader.HasNext()&&"IsFMX"===(p=this.FReader.PeekName())&&(this.FReader.ReadName(),this.FReader.ReadBoolean()&&rtl.as(a,pas["WEBLib.Graphics"].TFont).SetSize(Math.round(rtl.as(a,pas["WEBLib.Graphics"].TFont).FSize/96*72)))}},this.ReadExistingObject=function(e){if(null!=e){if(this.FReader.ReadBeginObject(),""!==t.TTMSFNCPersistence.ClassTypeVariable){if(!this.FReader.HasNext()||this.FReader.ReadName()!==t.TTMSFNCPersistence.ClassTypeVariable)throw t.ETMSFNCReaderException.$create("Create$1",['"'+t.TTMSFNCPersistence.ClassTypeVariable+'" property not found in Object descriptor.']);this.FReader.ReadString()}this.ReadProperties(e),this.FReader.ReadEndObject()}else this.FReader.ReadNull()},this.ReadGenericStringList=function(t){var e="";for(t.Clear(),this.FReader.ReadBeginArray();this.FReader.HasNext();)this.FReader.IsNull()?this.FReader.SkipValue():(e=this.FReader.ReadString(),t.Add(e));this.FReader.ReadEndArray()},this.ReadGenericDoubleList=function(t){var e=0;for(t.Clear(),this.FReader.ReadBeginArray();this.FReader.HasNext();)this.FReader.IsNull()?this.FReader.SkipValue():(e=this.FReader.ReadDouble(),t.Add(e));this.FReader.ReadEndArray()},this.ReadGenericIntegerList=function(t){var e=0;for(t.Clear(),this.FReader.ReadBeginArray();this.FReader.HasNext();)this.FReader.IsNull()?this.FReader.SkipValue():(e=this.FReader.ReadInteger(),t.Add(e));this.FReader.ReadEndArray()},this.ReadStrings=function(t){var e="";for(t.Clear(),this.FReader.ReadBeginArray();this.FReader.HasNext();)this.FReader.IsNull()?this.FReader.SkipValue():(e=this.FReader.ReadString(),t.Add(e));this.FReader.ReadEndArray()},this.ReadGenericObjectList=function(e){var i=null,s=null,n=null,r=null;try{for(n=pas.System.TObject,pas.SysUtils.Supports$3(e,t.ITMSFNCBaseListIO.$guid,{get:function(){return r},set:function(t){r=t}})&&(n=r.GetItemClass()),e.Clear(),this.FReader.ReadBeginArray();this.FReader.HasNext();)this.FReader.IsNull()?this.FReader.SkipValue():(i=this.ReadSingleObject(n),null!=this.FIOReference&&pas.SysUtils.Supports$3(this.FIOReference,t.ITMSFNCPersistenceIO.$guid,{get:function(){return s},set:function(t){s=t}})&&s.FixOwners(i,e),e.Add(i));this.FReader.ReadEndArray()}finally{rtl._Release(r),rtl._Release(s)}},this.ReadGenericDictionary=function(e){var i=null,s="",n=null,r=null;try{for(n=pas.System.TObject,pas.SysUtils.Supports$3(e,t.ITMSFNCBaseListIO.$guid,{get:function(){return r},set:function(t){r=t}})&&(n=r.GetItemClass()),e.Clear(),this.FReader.ReadBeginArray();this.FReader.HasNext();)this.FReader.IsNull()?this.FReader.SkipValue():(this.FReader.ReadBeginObject(),s=this.FReader.ReadName(),i=this.ReadSingleObject(n),e.Add(s,i),this.FReader.ReadEndObject());this.FReader.ReadEndArray()}finally{rtl._Release(r)}},this.ReadCollection=function(e){var i=null,s=null,n=null,r=null;try{for(s=pas.System.TObject,pas.SysUtils.Supports$3(e,t.ITMSFNCBaseListIO.$guid,{get:function(){return n},set:function(t){n=t}})&&(s=n.GetItemClass()),pas.SysUtils.Supports$3(e,t.ITMSFNCBaseCollectionIO.$guid,{get:function(){return r},set:function(t){r=t}}),e.Clear(),this.FReader.ReadBeginArray();this.FReader.HasNext();)if(this.FReader.IsNull())this.FReader.SkipValue();else if(null!=(i=this.ReadSingleObject(s)))try{pas.Classes.TPersistent.isPrototypeOf(i)&&(null!=r?r.AddItem(i).Assign(rtl.as(i,pas.Classes.TPersistent)):e.Add().Assign(rtl.as(i,pas.Classes.TPersistent)))}finally{i=rtl.freeLoc(i)}this.FReader.ReadEndArray()}finally{rtl._Release(n),rtl._Release(r)}},this.ReadList=function(e){var i=null,s=null,n=null,r=null;try{for(n=pas.System.TObject,pas.SysUtils.Supports$3(e,t.ITMSFNCBaseListIO.$guid,{get:function(){return r},set:function(t){r=t}})&&(n=r.GetItemClass()),e.Clear(),this.FReader.ReadBeginArray();this.FReader.HasNext();)this.FReader.IsNull()?this.FReader.SkipValue():(i=this.ReadSingleObject(n),null!=this.FIOReference&&pas.SysUtils.Supports$3(this.FIOReference,t.ITMSFNCPersistenceIO.$guid,{get:function(){return s},set:function(t){s=t}})&&s.FixOwners(i,e),e.Add(i));this.FReader.ReadEndArray()}finally{rtl._Release(r),rtl._Release(s)}},this.ReadBitmap=function(t){var e;this.FReader.IsNull()||""!==(e=this.FReader.ReadString())&&t.SetData(e)},this.ReadObject=function(e){null===e?this.FReader.ReadNull():t.TTMSFNCPersistence.IsGenericList(e.$class.ClassType(),"String")?this.ReadGenericStringList(e):t.TTMSFNCPersistence.IsGenericList(e.$class.ClassType(),"Double")?this.ReadGenericDoubleList(e):t.TTMSFNCPersistence.IsGenericList(e.$class.ClassType(),"Integer")?this.ReadGenericIntegerList(e):t.TTMSFNCPersistence.IsGenericList(e.$class.ClassType(),"")?this.ReadGenericObjectList(e):t.TTMSFNCPersistence.IsGenericDictionary(e.$class.ClassType())?this.ReadGenericDictionary(e):t.TTMSFNCPersistence.IsList(e.$class.ClassType())?this.ReadList(e):t.TTMSFNCPersistence.IsCollection(e.$class.ClassType())?this.ReadCollection(e):t.TTMSFNCPersistence.IsBitmap(e.$class.ClassType())?this.ReadBitmap(e):t.TTMSFNCPersistence.IsDescendingClass(e.$class.ClassType(),["TStrings"])?this.ReadStrings(e):this.ReadSingleObject$1(e)},this.Create$1=function(t){return this.FReader=pas["WEBLib.TMSFNCJSONReader"].TTMSFNCJSONReader.$create("Create$1",[t]),this.FReferences=pas["Generics.Collections"].TObjectList$G2.$create("Create$4",[!0]),this},this.Destroy=function(){rtl.free(this,"FReader"),rtl.free(this,"FReferences"),pas.System.TObject.Destroy.call(this)},this.Read$1=function(t){this.ReadObject(t)}})),rtl.createClass(this,"TTMSFNCPersistence",pas.System.TObject,(function(){this.ClassTypeVariable="",this.FOnCustomReadProperty=null,this.FOnCustomWriteProperty=null,this.FRootObject=null,this.FExcludeProperties=[],this.FIOReference=null,this.DoCustomReadProperty=function(t,e,i,s,n){rtl.rc(i,0,20),null!=this.FOnCustomReadProperty&&this.FOnCustomReadProperty(t,e,i,s,n)},this.DoCustomWriteProperty=function(t,e,i,s,n){rtl.rc(i,0,20),null!=this.FOnCustomWriteProperty&&this.FOnCustomWriteProperty(t,e,i,s,n)},this.SaveSettingsToStream=function(e,i){var s,n,r=null;r=t.TTMSFNCWriter.$create("Create$1",[i]),n=pas.SysUtils.FormatSettings.ThousandSeparator,s=pas.SysUtils.FormatSettings.DecimalSeparator;try{r.SetIOReference(t.TTMSFNCPersistence.FIOReference),r.SetRootObject(t.TTMSFNCPersistence.FRootObject),r.FOnCustomWriteProperty=rtl.createCallback(this,"DoCustomWriteProperty"),pas.SysUtils.FormatSettings.DecimalSeparator=".",pas.SysUtils.FormatSettings.ThousandSeparator=",",r.Write(e)}finally{pas.SysUtils.FormatSettings.DecimalSeparator=s,pas.SysUtils.FormatSettings.ThousandSeparator=n,r=rtl.freeLoc(r)}},this.LoadSettingsFromStream=function(e,i){var s,n,r=null;i.SetPosition(0),r=t.TTMSFNCReader.$create("Create$1",[i]),n=pas.SysUtils.FormatSettings.ThousandSeparator,s=pas.SysUtils.FormatSettings.DecimalSeparator;try{r.SetIOReference(t.TTMSFNCPersistence.FIOReference),r.SetRootObject(t.TTMSFNCPersistence.FRootObject),r.FOnCustomReadProperty=rtl.createCallback(this,"DoCustomReadProperty"),pas.SysUtils.FormatSettings.DecimalSeparator=".",pas.SysUtils.FormatSettings.ThousandSeparator=",",r.Read$1(e)}finally{pas.SysUtils.FormatSettings.DecimalSeparator=s,pas.SysUtils.FormatSettings.ThousandSeparator=n,r=rtl.freeLoc(r)}},this.CreateObject=function(e,i){var s=null,n=null;if(null===(n=pas.Classes.GetClass(e)))throw t.ETMSFNCReaderException.$create("CreateFmt",['Type "%s" not found',pas.System.VarRecs(18,e)]);if(!n.InheritsFrom(pas.System.TObject))throw t.ETMSFNCReaderException.$create("Create$1",['Type "%s" is not an class type']);if(null!==i&&!n.InheritsFrom(i))throw t.ETMSFNCReaderException.$create("CreateFmt",['Type "%s" does not inherit from %s',pas.System.VarRecs(18,e,18,i.$classname)]);if(n.InheritsFrom(pas["WEBLib.Controls"].TCustomControl))s=n.$create("Create$1",[null]);else if(n.InheritsFrom(pas.Classes.TComponent))s=n.$create("Create$1",[null]);else if(n.InheritsFrom(pas.Classes.TCollectionItem))s=n.$create("Create$1",[null]);else{if(!n.InheritsFrom(pas.Classes.TPersistent))throw t.ETMSFNCReaderException.$create("CreateFmt",['Type "%s" not supported',pas.System.VarRecs(18,e)]);s=n.$create("Create")}return s},this.GetPropInfoDataTypeInfo=function(t){var e=null;return e=null,null!=t&&(e=t.typeinfo),e},this.GetPropInfoDataTypeInfoClassType=function(t){var e=null;return null,null!=t&&null!=t.typeinfo&&(e=t.typeinfo).class?e.class.ClassType():null},this.GetPropInfoType=function(t){return null!=t.typeinfo?rtl.rc(t.typeinfo.kind,0,20):0},this.GetPropInfoName=function(t){return t.name},this.GetPropInfoTypeName=function(t){var e="";return e="",null!=t.typeinfo&&(e=t.typeinfo.name),e},this.GetEnumName=function(t,e){rtl.rc(e,-2147483648,2147483647);return t.enumtype[e]},this.IsWriteOnly=function(t){return""===t.getter},this.IsReadOnly=function(t){return""===t.setter},this.IsAssignableProperty=function(t,e){var i=!1,s=null,n="";return i=!1,rtl.rc(this.GetPropInfoType(e),0,20)in rtl.createSet(13)&&(n=this.GetPropInfoName(e),i=null!=(s=pas.TypInfo.GetObjectProp(t,n))&&this.IsComponent(s.$class.ClassType())||!(null!=s)),i},this.IsGenericList=function(t,e){var i="";if(null==t)return!1;do{if(i=t.$classname,(pas.StrUtils.AnsiStartsStr("TList<",i)||pas.StrUtils.AnsiStartsStr("TObjectList<",i))&&(""===e||""!==e&&pas.System.Pos(pas.SysUtils.LowerCase(e),pas.SysUtils.LowerCase(i))>0||pas.System.Pos(pas.SysUtils.LowerCase(e),pas.SysUtils.LowerCase(i))>0))return!0;t=t.$ancestor}while(null!=t);return!1,!1},this.IsGenericDictionary=function(t){var e="";if(null==t)return!1;do{if(e=t.$classname,pas.StrUtils.AnsiStartsStr("TDictionary<",e)||pas.StrUtils.AnsiStartsStr("TObjectDictionary<",e))return!0;t=t.$ancestor}while(null!=t);return!1,!1},this.IsCollection=function(t){return this.IsDescendingClass(t,["TCollection"])},this.IsComponent=function(t){return this.IsDescendingClass(t,["TComponent","TTMSFNCCustomComponent"])},this.IsList=function(t){return this.IsDescendingClass(t,["TList"])},this.IsDescendingClass=function(t,e){var i="",s=0;if(null==t)return!1;do{i=t.$classname;for(var n=0,r=rtl.length(e)-1;n<=r;n++)if(s=n,i===rtl.rcArrR(e,s))return!0;t=t.$ancestor}while(null!=t);return!1,!1},this.IsBitmap=function(t){return this.IsDescendingClass(t,["TBitmap","TPicture","TTMSFNCBitmap","TGraphic"])}})),this.ExcludePropertyList=["Align","AllowFocus","Anchors","BevelEdges","BevelInner","BevelKind","BevelOuter","BevelWidth","BiDiMode","BitmapContainer","BorderSpacing","CanParentFocus","ClipChildren","ClipParent","Constraints","Ctl3D","DisableFocusEffect","DoubleBuffered","DragCursor","DragKind","DragMode","Enabled","EnableDragHighLight","Height","Hint","HitTest","Locked","Margins","Name","Opacity","Padding","ParentBiDiMode","ParentColor","ParentCtl3D","ParentDoubleBuffered","ParentFont","ParentShowHint","PopupMenu","Position","RotationAngle","RotationCenter","Scale","ShowHint","Size","StyleElements","StyleName","TabOrder","TabStop","Tag","Touch","TouchTargetExpansion","Visible","Width"],t.$implcode=function(){e.gcNull=-1,e.GetColorRed=function(t){return t=pas["WEBLib.Graphics"].ColorToRGB(t),pas["WEBLib.Graphics"].GetRValue(t)},e.GetColorGreen=function(t){return t=pas["WEBLib.Graphics"].ColorToRGB(t),pas["WEBLib.Graphics"].GetGValue(t)},e.GetColorBlue=function(t){return t=pas["WEBLib.Graphics"].ColorToRGB(t),pas["WEBLib.Graphics"].GetBValue(t)},e.HTMLToColorEx=function(t){function e(t){return t.length<2?0:(1,2,((t.charAt(0)>="A"?t.charCodeAt(0)-65+10:t.charCodeAt(0)-48)<<4)+(t.charAt(1)>="A"?t.charCodeAt(1)-65+10:t.charCodeAt(1)-48))}var i,s;return i=e(pas.System.Copy(t,2,2)),s=e(pas.System.Copy(t,4,2))<<8,(e(pas.System.Copy(t,6,2))<<16)+s+i};var t=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F"];e.ColorToHTMLEx=function(i){var s,n="";return 1,s=pas["WEBLib.Graphics"].ColorToRGB(i),n="#RRGGBB",n=rtl.setCharAt(n,1,t[e.GetColorRed(s)>>>4]),n=rtl.setCharAt(n,2,t[15&e.GetColorRed(s)]),n=rtl.setCharAt(n,3,t[e.GetColorGreen(s)>>>4]),n=rtl.setCharAt(n,4,t[15&e.GetColorGreen(s)]),n=rtl.setCharAt(n,5,t[e.GetColorBlue(s)>>>4]),n=rtl.setCharAt(n,6,t[15&e.GetColorBlue(s)])}},t.$init=function(){t.TTMSFNCPersistence.ClassTypeVariable="$type"}}),["StrUtils","WEBLib.Controls","WEBLib.Graphics","WEBLib.TMSFNCUtils"]),rtl.module("WEBLib.TMSFNCTypes",["System","Types","Classes","WEBLib.Graphics","SysUtils","WEBLib.Controls","Math","WEBLib.JSON"],(function(){"use strict";var t=this;this.TMSPlatformsWeb=0,this.KEY_TAB=9,this.KEY_PRIOR=33,this.KEY_NEXT=34,this.KEY_UP=38,this.KEY_DOWN=40,this.KEY_RIGHT=39,this.KEY_LEFT=37,this.KEY_HOME=36,this.KEY_END=35,this.KEY_RETURN=13,rtl.createHelper(this,"TTMSFNCMemoryStream",null,(function(){this.GetBytes=function(){var t,e,i=[];return e=this.GetPosition(),this.SetPosition(0),i=rtl.arraySetLength(i,0,this.GetSize()),this.Read$1(rtl.arrayRef(i),0,rtl.length(i)),t=rtl.arrayRef(i),this.SetPosition(e),t},this.OpenFile=function(e){var i,s,n;n="tmp."+pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.GetFileExtension(e),i=rtl.arrayRef(t.TTMSFNCMemoryStream.GetBytes.call(this)),s=e;var r=new Blob([new Uint8Array(i)],{type:s}),o=window.URL.createObjectURL(r);window.navigator&&window.navigator.msSaveOrOpenBlob?window.navigator.msSaveOrOpenBlob(r,n):window.open(o)}})),rtl.recNewT(this,"TSizeF",(function(){this.cx=0,this.cy=0,this.$eq=function(t){return this.cx===t.cx&&this.cy===t.cy},this.$assign=function(t){return this.cx=t.cx,this.cy=t.cy,this}})),rtl.recNewT(this,"TPointF",(function(){this.X=0,this.Y=0,this.$eq=function(t){return this.X===t.X&&this.Y===t.Y},this.$assign=function(t){return this.X=t.X,this.Y=t.Y,this}})),rtl.recNewT(this,"TRectF",(function(){this.Left=0,this.Top=0,this.Right=0,this.Bottom=0,this.$eq=function(t){return this.Left===t.Left&&this.Top===t.Top&&this.Right===t.Right&&this.Bottom===t.Bottom},this.$assign=function(t){return this.Left=t.Left,this.Top=t.Top,this.Right=t.Right,this.Bottom=t.Bottom,this};var e=t.$rtti.$Record("TRectF",{});e.addField("Left",rtl.double),e.addField("Top",rtl.double),e.addField("Right",rtl.double),e.addField("Bottom",rtl.double)})),rtl.createClass(this,"TTMSFNCBitmap",pas["WEBLib.Graphics"].TBitmap,(function(){})),rtl.createHelper(this,"TTMSFNCObjectHelper",null,(function(){this.ToJSON$1=function(){var t="",e=null;e=pas.Classes.TStringStream.$create("Create$3",["",pas.Classes.TEncoding.GetANSI(),!0]);try{pas["WEBLib.TMSFNCPersistence"].TTMSFNCPersistence.SaveSettingsToStream(this,e),t=e.GetDataString()}finally{e=rtl.freeLoc(e)}return t},this.FromJSON=function(t){var e=null,i="",s=null;e=pas.Classes.TStringStream.$create("Create$3",[t,pas.Classes.TEncoding.GetANSI(),!0]);try{s=pas["WEBLib.TMSFNCPersistence"].TTMSFNCPersistence.FIOReference,i=pas["WEBLib.TMSFNCPersistence"].TTMSFNCPersistence.ClassTypeVariable,pas["WEBLib.TMSFNCPersistence"].TTMSFNCPersistence.ClassTypeVariable="",pas["WEBLib.TMSFNCPersistence"].TTMSFNCPersistence.FIOReference=this,pas["WEBLib.TMSFNCPersistence"].TTMSFNCPersistence.LoadSettingsFromStream(this,e),pas["WEBLib.TMSFNCPersistence"].TTMSFNCPersistence.ClassTypeVariable=i,pas["WEBLib.TMSFNCPersistence"].TTMSFNCPersistence.FIOReference=s}finally{e=rtl.freeLoc(e)}}})),rtl.createClass(this,"TTMSFNCMargins",pas.Classes.TPersistent,(function(){this.$init=function(){pas.Classes.TPersistent.$init.call(this),this.FRight=0,this.FBottom=0,this.FTop=0,this.FLeft=0,this.FOnChange=null},this.$final=function(){this.FOnChange=void 0,pas.Classes.TPersistent.$final.call(this)},this.SetBottom=function(t){this.FBottom!==t&&(this.FBottom=t,this.Changed())},this.SetLeft=function(t){this.FLeft!==t&&(this.FLeft=t,this.Changed())},this.SetRight=function(t){this.FRight!==t&&(this.FRight=t,this.Changed())},this.SetTop=function(t){this.FTop!==t&&(this.FTop=t,this.Changed())},this.IsLeftStored=function(){return 0!==this.FLeft},this.IsTopStored=function(){return 0!==this.FTop},this.IsRightStored=function(){return 0!==this.FRight},this.IsBottomStored=function(){return 0!==this.FBottom},this.Changed=function(){null!=this.FOnChange&&this.FOnChange(this)},this.Create$1=function(){return this.FLeft=0,this.FBottom=0,this.FRight=0,this.FTop=0,this},this.Create$2=function(t){return this.FLeft=t.Left,this.FBottom=t.Bottom,this.FRight=t.Right,this.FTop=t.Top,this},this.Assign=function(e){t.TTMSFNCMargins.isPrototypeOf(e)&&(this.FLeft=rtl.as(e,t.TTMSFNCMargins).FLeft,this.FTop=rtl.as(e,t.TTMSFNCMargins).FTop,this.FRight=rtl.as(e,t.TTMSFNCMargins).FRight,this.FBottom=rtl.as(e,t.TTMSFNCMargins).FBottom)};var e=this.$rtti;e.addProperty("Left",14,rtl.double,"FLeft","SetLeft",{stored:"IsLeftStored"}),e.addProperty("Top",14,rtl.double,"FTop","SetTop",{stored:"IsTopStored"}),e.addProperty("Right",14,rtl.double,"FRight","SetRight",{stored:"IsRightStored"}),e.addProperty("Bottom",14,rtl.double,"FBottom","SetBottom",{stored:"IsBottomStored"}),e.addProperty("OnChange",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnChange","FOnChange")})),rtl.createClass(this,"TTMSFNCOwnedCollection",pas.Classes.TOwnedCollection,(function(){})),this.InflateRectEx=function(t,e,i){t.Left=t.Left-e,t.Right=t.Right+e,t.Top=t.Top-i,t.Bottom=t.Bottom+i},this.OffsetRectEx$1=function(t,e,i){return t.Left=t.Left+e,t.Right=t.Right+e,t.Top=t.Top+i,t.Bottom=t.Bottom+i,!0,!0},this.PtInRectEx=function(t,e){return e.X>=t.Left&&e.X<t.Right&&e.Y>=t.Top&&e.Y<t.Bottom},this.IntersectRectEx=function(t,e){return t.Left<e.Right&&t.Right>e.Left&&t.Top<e.Bottom&&t.Bottom>e.Top},this.IntersectRectEx$1=function(e,i,s){var n,r=t.TRectF.$new();return r.$assign(i),s.Left>i.Left&&(r.Left=s.Left),s.Top>i.Top&&(r.Top=s.Top),s.Right<i.Right&&(r.Right=s.Right),s.Bottom<i.Bottom&&(r.Bottom=s.Bottom),(n=!t.RectIsEmpty(r))||(r.Top=0,r.Bottom=0,r.Left=0,r.Right=0),e.$assign(r),n},this.RectWidthEx$1=function(t){return t.Right-t.Left},this.RectHeightEx$1=function(t){return t.Bottom-t.Top},this.RectCenterEx$1=function(e,i){var s=t.TRectF.$new();return t.OffsetRectEx$1(e,-e.Left,-e.Top),t.OffsetRectEx$1(e,Math.round((t.RectWidthEx$1(i)-t.RectWidthEx$1(e))/2),Math.round((t.RectHeightEx$1(i)-t.RectHeightEx$1(e))/2)),t.OffsetRectEx$1(e,i.Left,i.Top),s.$assign(e),s},this.RectCenterAtEx=function(e,i){var s=t.TRectF.$new();return s.$assign(e),t.RectCenterEx$1(s,i),s},this.RectSnapToPixelEx=function(e,i,s){var n=t.TRectF.$new(),r=0,o=0;return r=i<=0?1:i,n.Left=pas.System.Trunc(e.Left*r)/r,n.Top=pas.System.Trunc(e.Top*r)/r,n.Right=n.Left+Math.round((e.Right-e.Left)*r)/r,n.Bottom=n.Top+Math.round((e.Bottom-e.Top)*r)/r,s&&(o=1/(2*r),t.OffsetRectEx$1(n,o,o)),n},this.RectFitIntoEx=function(e,i,s){var n=t.TRectF.$new();return i.Right-i.Left<=0||i.Bottom-i.Top<=0?(s.set(1),e):((e.Right-e.Left)/(i.Right-i.Left)>(e.Bottom-e.Top)/(i.Bottom-i.Top)?s.set((e.Right-e.Left)/(i.Right-i.Left)):s.set((e.Bottom-e.Top)/(i.Bottom-i.Top)),n.$assign(t.RectF(0,0,(e.Right-e.Left)/s.get(),(e.Bottom-e.Top)/s.get())),t.RectCenterEx$1(n,i),n)},this.RectFitIntoEx$1=function(e,i){var s=t.TRectF.$new(),n=0;return s.$assign(t.RectFitIntoEx(e,i,{get:function(){return n},set:function(t){n=t}})),s},this.MakeRectF=function(e,i,s,n){var r=t.TRectF.$new();return r.Left=e,r.Top=i,r.Right=e+s,r.Bottom=i+n,r},this.CenterPointEx=function(e){var i=t.TPointF.$new();return i.X=(e.Right-e.Left)/2+e.Left,i.Y=(e.Bottom-e.Top)/2+e.Top,i},this.CompareValueEx=function(t,e,i){return pas.Math.SameValue(t,e,i)?0:t<e?-1:1},this.RectIsEmpty=function(t){return t.Right<t.Left||pas.Math.SameValue(t.Right,t.Left,0)||t.Bottom<t.Top||pas.Math.SameValue(t.Bottom,t.Top,0)},this.RectF=function(e,i,s,n){var r=t.TRectF.$new();return r.Left=e,r.Top=i,r.Bottom=n,r.Right=s,r},this.PointF=function(e,i){var s=t.TPointF.$new();return s.X=e,s.Y=i,s},this.BitmapToDrawBitmap=function(t){var e=null;return e=null,null!=t&&(e=t),e},this.IsBitmapEmpty=function(e){var i=!1,s=null;return i=!0,null!=e&&null!=(s=t.BitmapToDrawBitmap(e))&&(i=s.Empty()),i},this.CharIsNumber=function(t){return t.charCodeAt()in rtl.createSet(null,48,57)},this.HInstance=function(){return 0,0},this.CreateNewGUID=function(){var t=pas.System.TGuid.$new();return pas.SysUtils.CreateGUID(t),pas.SysUtils.GUIDToString(t)}}),["WEBLib.TMSFNCUtils","WEBLib.TMSFNCPersistence","JS"]),rtl.module("WEBLib.TMSFNCGraphicsTypes",["System","Classes","Types","WEBLib.TMSFNCTypes","WEBLib.Graphics"],(function(){"use strict";var t=this,e=t.$impl;this.gcAliceblue=16775408,this.gcAntiquewhite=14150650,this.gcAqua=16776960,this.gcAquamarine=13959039,this.gcAzure=16777200,this.gcBeige=14480885,this.gcBisque=12903679,this.gcBlack=0,this.gcBlanchedalmond=13495295,this.gcBlue=16711680,this.gcBlueviolet=14822282,this.gcBrown=2763429,this.gcBurlywood=8894686,this.gcCadetblue=10526303,this.gcChartreuse=65407,this.gcChocolate=1993170,this.gcCoral=5275647,this.gcCornflowerblue=15570276,this.gcCornsilk=14481663,this.gcCrimson=3937500,this.gcCyan=16776960,this.gcDarkblue=9109504,this.gcDarkcyan=9145088,this.gcDarkgoldenrod=755384,this.gcDarkgray=11119017,this.gcDarkgreen=25600,this.gcDarkgrey=11119017,this.gcDarkkhaki=7059389,this.gcDarkmagenta=9109643,this.gcDarkolivegreen=3107669,this.gcDarkorange=36095,this.gcDarkorchid=13382297,this.gcDarkred=139,this.gcDarksalmon=8034025,this.gcDarkseagreen=9419919,this.gcDarkslateblue=9125192,this.gcDarkslategray=5197615,this.gcDarkslategrey=5197615,this.gcDarkturquoise=13749760,this.gcDarkviolet=13828244,this.gcDeeppink=9639167,this.gcDeepskyblue=16760576,this.gcDimgray=6908265,this.gcDimgrey=6908265,this.gcDodgerblue=16748574,this.gcFirebrick=2237106,this.gcFloralwhite=15792895,this.gcForestgreen=2263842,this.gcFuchsia=16711935,this.gcGainsboro=14474460,this.gcGhostwhite=16775416,this.gcGold=55295,this.gcGoldenrod=2139610,this.gcGray=8421504,this.gcGreen=32768,this.gcGreenyellow=3145645,this.gcGrey=8421504,this.gcHoneydew=15794160,this.gcHotpink=11823615,this.gcIndianred=6053069,this.gcIndigo=8519755,this.gcIvory=15794175,this.gcKhaki=9234160,this.gcLavender=16443110,this.gcLavenderblush=16118015,this.gcLawngreen=64636,this.gcLemonchiffon=13499135,this.gcLightblue=15128749,this.gcLightcoral=8421616,this.gcLightcyan=16777184,this.gcLightgoldenrodyellow=13826810,this.gcLightgray=13882323,this.gcLightgreen=9498256,this.gcLightgrey=13882323,this.gcLightpink=12695295,this.gcLightsalmon=8036607,this.gcLightseagreen=11186720,this.gcLightskyblue=16436871,this.gcLightslategray=10061943,this.gcLightslategrey=10061943,this.gcLightsteelblue=14599344,this.gcLightyellow=14745599,this.gcLime=65280,this.gcLimegreen=3329330,this.gcLinen=15134970,this.gcMagenta=16711935,this.gcMaroon=128,this.gcMediumaquamarine=11193702,this.gcMediumblue=13434880,this.gcMediumorchid=13850042,this.gcMediumpurple=14381203,this.gcMediumseagreen=7451452,this.gcMediumslateblue=15624315,this.gcMediumspringgreen=10156544,this.gcMediumturquoise=13422920,this.gcMediumvioletred=8721863,this.gcMidnightblue=7346457,this.gcMintcream=16449525,this.gcMistyrose=14804223,this.gcMoccasin=11920639,this.gcNavajowhite=11394815,this.gcNavy=8388608,this.gcOldlace=15136253,this.gcOlive=32896,this.gcOlivedrab=2330219,this.gcOrange=42495,this.gcOrangered=17919,this.gcOrchid=14053594,this.gcPalegoldenrod=11200750,this.gcPalegreen=10025880,this.gcPaleturquoise=15658671,this.gcPalevioletred=9662683,this.gcPapayawhip=14020607,this.gcPeachpuff=12180223,this.gcPeru=4163021,this.gcPink=13353215,this.gcPlum=14524637,this.gcPowderblue=15130800,this.gcPurple=8388736,this.gcRed=255,this.gcRosybrown=9408444,this.gcRoyalblue=14772545,this.gcSaddlebrown=1262987,this.gcSalmon=7504122,this.gcSandybrown=6333684,this.gcSeagreen=5737262,this.gcSeashell=15660543,this.gcSienna=2970272,this.gcSilver=12632256,this.gcSkyblue=15453831,this.gcSlateblue=13458026,this.gcSlategray=9470064,this.gcSlategrey=9470064,this.gcSnow=16448255,this.gcSpringgreen=8388352,this.gcSteelblue=11829830,this.gcTan=9221330,this.gcTeal=8421376,this.gcThistle=14204888,this.gcTomato=4678655,this.gcTurquoise=13688896,this.gcViolet=15631086,this.gcWheat=11788021,this.gcWhite=16777215,this.gcWhitesmoke=16119285,this.gcYellow=65535,this.gcYellowgreen=3329434,this.gcNull=-1,this.TTMSFNCGraphicsStrokeKind={0:"gskNone",gskNone:0,1:"gskSolid",gskSolid:1,2:"gskDash",gskDash:2,3:"gskDot",gskDot:3,4:"gskDashDot",gskDashDot:4,5:"gskDashDotDot",gskDashDotDot:5},this.$rtti.$Enum("TTMSFNCGraphicsStrokeKind",{minvalue:0,maxvalue:5,ordtype:1,enumtype:this.TTMSFNCGraphicsStrokeKind}),this.TTMSFNCGraphicsTextureMode={0:"gtmOriginal",gtmOriginal:0,1:"gtmFit",gtmFit:1,2:"gtmStretch",gtmStretch:2,3:"gtmCenter",gtmCenter:3,4:"gtmTile",gtmTile:4},this.$rtti.$Enum("TTMSFNCGraphicsTextureMode",{minvalue:0,maxvalue:4,ordtype:1,enumtype:this.TTMSFNCGraphicsTextureMode}),this.TTMSFNCGraphicsFillKind={0:"gfkNone",gfkNone:0,1:"gfkSolid",gfkSolid:1,2:"gfkGradient",gfkGradient:2,3:"gfkTexture",gfkTexture:3},this.$rtti.$Enum("TTMSFNCGraphicsFillKind",{minvalue:0,maxvalue:3,ordtype:1,enumtype:this.TTMSFNCGraphicsFillKind}),this.TTMSFNCGraphicsFillGradientMode={0:"gfgmDefault",gfgmDefault:0,1:"gfgmCollection",gfgmCollection:1},this.TTMSFNCGraphicsFillGradientType={0:"gfgtLinear",gfgtLinear:0,1:"gfgtRadial",gfgtRadial:1},this.TTMSFNCGraphicsFillOrientation={0:"gfoHorizontal",gfoHorizontal:0,1:"gfoVertical",gfoVertical:1,2:"gfoCustom",gfoCustom:2},this.$rtti.$Enum("TTMSFNCGraphicsFillOrientation",{minvalue:0,maxvalue:2,ordtype:1,enumtype:this.TTMSFNCGraphicsFillOrientation}),this.TTMSFNCGraphicsTextAlign={0:"gtaCenter",gtaCenter:0,1:"gtaLeading",gtaLeading:1,2:"gtaTrailing",gtaTrailing:2},this.$rtti.$Enum("TTMSFNCGraphicsTextAlign",{minvalue:0,maxvalue:2,ordtype:1,enumtype:this.TTMSFNCGraphicsTextAlign}),this.TTMSFNCGraphicsTextTrimming={0:"gttNone",gttNone:0,1:"gttCharacter",gttCharacter:1,2:"gttWord",gttWord:2},this.TTMSFNCGraphicsSide={0:"gsLeft",gsLeft:0,1:"gsTop",gsTop:1,2:"gsRight",gsRight:2,3:"gsBottom",gsBottom:3},this.TTMSFNCGraphicsTextQuality={0:"gtqDefault",gtqDefault:0,1:"gtqAntiAliasing",gtqAntiAliasing:1,2:"gtqClearType",gtqClearType:2},this.AllSides=rtl.createSet(0,1,2,3),rtl.recNewT(this,"TTMSFNCGraphicsMatrix",(function(){this.m11=0,this.m12=0,this.m13=0,this.m21=0,this.m22=0,this.m23=0,this.m31=0,this.m32=0,this.m33=0,this.$eq=function(t){return this.m11===t.m11&&this.m12===t.m12&&this.m13===t.m13&&this.m21===t.m21&&this.m22===t.m22&&this.m23===t.m23&&this.m31===t.m31&&this.m32===t.m32&&this.m33===t.m33},this.$assign=function(t){return this.m11=t.m11,this.m12=t.m12,this.m13=t.m13,this.m21=t.m21,this.m22=t.m22,this.m23=t.m23,this.m31=t.m31,this.m32=t.m32,this.m33=t.m33,this}})),this.$rtti.$Class("TTMSFNCGraphicsStroke"),this.$rtti.$Class("TTMSFNCGraphicsFill"),this.$rtti.$Class("TTMSFNCGraphicsFont"),rtl.createClass(this,"TTMSFNCGraphicsSaveState",pas.Classes.TPersistent,(function(){this.$init=function(){pas.Classes.TPersistent.$init.call(this),this.FSaveDC=0,this.FFont=null,this.FStroke=null,this.FFill=null},this.$final=function(){this.FFont=void 0,this.FStroke=void 0,this.FFill=void 0,pas.Classes.TPersistent.$final.call(this)},this.Create$1=function(){return pas.System.TObject.Create.call(this),this.FFill=t.TTMSFNCGraphicsFill.$create("Create$1",[1,16777215,8421504,-1,-1]),this.FStroke=t.TTMSFNCGraphicsStroke.$create("Create$1",[1,12632256]),this.FFont=t.TTMSFNCGraphicsFont.$create("Create$2"),this},this.Destroy=function(){rtl.free(this,"FFill"),rtl.free(this,"FStroke"),rtl.free(this,"FFont"),pas.System.TObject.Destroy.call(this)}})),rtl.createClass(this,"TTMSFNCGraphicsFillGradientItem",pas.Classes.TCollectionItem,(function(){this.$init=function(){pas.Classes.TCollectionItem.$init.call(this),this.FColor=0,this.FPosition=0,this.FOpacity=0},this.IsPositionStored=function(){return 0!==this.FPosition},this.SetColor=function(t){this.FColor!==t&&(this.FColor=t,this.UpdateGradient())},this.SetPosition=function(t){this.FPosition!==t&&(this.FPosition=t,this.UpdateGradient())},this.IsOpacityStored=function(){return 1!==this.FOpacity},this.SetOpacity=function(t){this.FOpacity!==t&&(this.FOpacity=t,this.UpdateGradient())},this.UpdateGradient=function(){t.TTMSFNCGraphicsFillGradientItems.isPrototypeOf(this.FCollection)&&rtl.as(this.FCollection,t.TTMSFNCGraphicsFillGradientItems).UpdateGradient()},this.Create$1=function(t){return pas.Classes.TCollectionItem.Create$1.apply(this,arguments),this.FColor=16777215,this.FPosition=0,this.FOpacity=1,this},this.Assign=function(e){t.TTMSFNCGraphicsFillGradientItem.isPrototypeOf(e)?(this.FColor=rtl.as(e,t.TTMSFNCGraphicsFillGradientItem).FColor,this.FOpacity=rtl.as(e,t.TTMSFNCGraphicsFillGradientItem).FOpacity,this.FPosition=rtl.as(e,t.TTMSFNCGraphicsFillGradientItem).FPosition):pas.Classes.TPersistent.Assign.apply(this,arguments)};var e=this.$rtti;e.addProperty("Opacity",14,rtl.double,"FOpacity","SetOpacity",{stored:"IsOpacityStored"}),e.addProperty("Color",2,pas["WEBLib.Graphics"].$rtti.TColor,"FColor","SetColor",{Default:16777215}),e.addProperty("Position",14,rtl.double,"FPosition","SetPosition",{stored:"IsPositionStored"})})),rtl.createClass(this,"TTMSFNCGraphicsFillGradientItems",pas["WEBLib.TMSFNCTypes"].TTMSFNCOwnedCollection,(function(){this.$init=function(){pas["WEBLib.TMSFNCTypes"].TTMSFNCOwnedCollection.$init.call(this),this.FOwner$1=null},this.$final=function(){this.FOwner$1=void 0,pas["WEBLib.TMSFNCTypes"].TTMSFNCOwnedCollection.$final.call(this)},this.UpdateGradient=function(){null!=this.FOwner$1&&this.FOwner$1.Changed()},this.GetGradientClass=function(){return t.TTMSFNCGraphicsFillGradientItem},this.Create$3=function(t){return pas.Classes.TOwnedCollection.Create$2.call(this,t,this.GetGradientClass()),this.FOwner$1=t,this}})),rtl.createClass(this,"TTMSFNCCustomGraphicsFill",pas.Classes.TPersistent,(function(){this.$init=function(){pas.Classes.TPersistent.$init.call(this),this.FUpdateCount=0,this.FOnChanged=null,this.FOrientation=0,this.FKind=0,this.FDefaultKind=0,this.FColor=0,this.FDefaultColor=0,this.FColorTo=0,this.FColorMirror=0,this.FColorMirrorTo=0,this.FDefaultColorTo=0,this.FDefaultColorMirror=0,this.FDefaultColorMirrorTo=0,this.FOpacity=0,this.FTexture=null,this.FTextureMode=0,this.FGradientMode=0,this.FGradientItems=null,this.FGradientType=0,this.FGradientAngle=0,this.FGradientCenterPoint=pas["WEBLib.TMSFNCTypes"].TPointF.$new(),this.FGradientCenterColor=0,this.FGradientMatrix=t.TTMSFNCGraphicsMatrix.$new()},this.$final=function(){this.FOnChanged=void 0,this.FTexture=void 0,this.FGradientItems=void 0,this.FGradientCenterPoint=void 0,this.FGradientMatrix=void 0,pas.Classes.TPersistent.$final.call(this)},this.SetKind=function(t){this.FKind!==t&&(this.FKind=t,this.Changed())},this.SetOrientation=function(t){this.FOrientation!==t&&(this.FOrientation=t,this.Changed())},this.SetColor=function(t){this.FColor!==t&&(this.FColor=t,-1===this.FColor?this.FColor=-1:536870912===this.FColor&&(this.FColor=15790320),this.Changed())},this.SetColorTo=function(t){this.FColorTo!==t&&(this.FColorTo=t,-1===this.FColorTo?this.FColorTo=-1:536870912===this.FColorTo&&(this.FColorTo=15790320),this.Changed())},this.SetColorMirror=function(t){this.FColorMirror!==t&&(this.FColorMirror=t,-1===this.FColorMirror?this.FColorMirror=-1:536870912===this.FColorMirror&&(this.FColorMirror=15790320),this.Changed())},this.SetColorMirrorTo=function(t){this.FColorMirrorTo!==t&&(this.FColorMirrorTo=t,-1===this.FColorMirrorTo?this.FColorMirrorTo=-1:536870912===this.FColorMirrorTo&&(this.FColorMirrorTo=15790320),this.Changed())},this.SetTexture=function(t){this.FTexture!==t&&(this.FTexture.Assign(t),this.Changed())},this.SetTextureMode=function(t){this.FTextureMode!==t&&(this.FTextureMode=t,this.Changed())},this.IsColorStored=function(){return this.FColor!==this.FDefaultColor},this.IsKindStored=function(){return this.FKind!==this.FDefaultKind},this.IsColorMirrorStored=function(){return this.FColorMirror!==this.FDefaultColorMirror},this.IsColorMirrorToStored=function(){return this.FColorMirrorTo!==this.FDefaultColorMirrorTo},this.IsColorToStored=function(){return this.FColorTo!==this.FDefaultColorTo},this.Changed=function(){null!=this.FOnChanged&&0===this.FUpdateCount&&this.FOnChanged(this)},this.TextureChanged=function(t){this.Changed()},this.Create$1=function(e,i,s,n,r){return this.FGradientItems=t.TTMSFNCGraphicsFillGradientItems.$create("Create$3",[this]),this.FKind=e,this.FDefaultKind=e,this.FGradientMatrix.$assign(t.MatrixIdentity()),this.FGradientCenterColor=-1,this.FGradientMode=0,this.FGradientAngle=0,this.FGradientCenterPoint.$assign(pas["WEBLib.TMSFNCTypes"].PointF(0,0)),this.FGradientType=0,this.FColor=i,this.FDefaultColor=i,this.FOpacity=1,this.FOrientation=1,this.FColorTo=s,this.FColorMirror=n,this.FColorMirrorTo=r,this.FDefaultColorTo=s,this.FDefaultColorMirror=n,this.FDefaultColorMirrorTo=r,this.FTextureMode=2,this.FTexture=pas["WEBLib.TMSFNCTypes"].TTMSFNCBitmap.$create("Create$3"),this.FTexture.FOnChange=rtl.createCallback(this,"TextureChanged"),this},this.Destroy=function(){rtl.free(this,"FTexture"),rtl.free(this,"FGradientItems"),pas.System.TObject.Destroy.call(this)},this.Assign=function(e){t.TTMSFNCCustomGraphicsFill.isPrototypeOf(e)?(this.FColor=rtl.as(e,t.TTMSFNCCustomGraphicsFill).FColor,this.FColorTo=rtl.as(e,t.TTMSFNCCustomGraphicsFill).FColorTo,this.FColorMirror=rtl.as(e,t.TTMSFNCCustomGraphicsFill).FColorMirror,this.FColorMirrorTo=rtl.as(e,t.TTMSFNCCustomGraphicsFill).FColorMirrorTo,this.FKind=rtl.as(e,t.TTMSFNCCustomGraphicsFill).FKind,this.FOrientation=rtl.as(e,t.TTMSFNCCustomGraphicsFill).FOrientation,this.FOpacity=rtl.as(e,t.TTMSFNCCustomGraphicsFill).FOpacity,this.FTexture.Assign(rtl.as(e,t.TTMSFNCCustomGraphicsFill).FTexture),this.FTextureMode=rtl.as(e,t.TTMSFNCCustomGraphicsFill).FTextureMode,this.FGradientMode=rtl.as(e,t.TTMSFNCCustomGraphicsFill).FGradientMode,this.FGradientAngle=rtl.as(e,t.TTMSFNCCustomGraphicsFill).FGradientAngle,this.FGradientCenterPoint.$assign(rtl.as(e,t.TTMSFNCCustomGraphicsFill).FGradientCenterPoint),this.FGradientItems.Assign(rtl.as(e,t.TTMSFNCCustomGraphicsFill).FGradientItems),this.FGradientType=rtl.as(e,t.TTMSFNCCustomGraphicsFill).FGradientType,this.FGradientCenterColor=rtl.as(e,t.TTMSFNCCustomGraphicsFill).FGradientCenterColor):t.TTMSFNCCustomGraphicsStroke.isPrototypeOf(e)&&(this.FColor=rtl.as(e,t.TTMSFNCCustomGraphicsStroke).FColor,this.FColorTo=-1,this.FColorMirror=-1,this.FColorMirrorTo=-1,this.FKind=1,this.FOrientation=1,this.FOpacity=1),this.Changed()}})),rtl.createClass(this,"TTMSFNCGraphicsFill",this.TTMSFNCCustomGraphicsFill,(function(){var e=this.$rtti;e.addProperty("OnChanged",0,pas.Classes.$rtti.TNotifyEvent,"FOnChanged","FOnChanged"),e.addProperty("Kind",14,t.$rtti.TTMSFNCGraphicsFillKind,"FKind","SetKind",{stored:"IsKindStored"}),e.addProperty("Orientation",2,t.$rtti.TTMSFNCGraphicsFillOrientation,"FOrientation","SetOrientation",{Default:t.TTMSFNCGraphicsFillOrientation.gfoVertical}),e.addProperty("Color",14,pas["WEBLib.Graphics"].$rtti.TColor,"FColor","SetColor",{stored:"IsColorStored"}),e.addProperty("ColorTo",14,pas["WEBLib.Graphics"].$rtti.TColor,"FColorTo","SetColorTo",{stored:"IsColorToStored"}),e.addProperty("ColorMirror",14,pas["WEBLib.Graphics"].$rtti.TColor,"FColorMirror","SetColorMirror",{stored:"IsColorMirrorStored"}),e.addProperty("ColorMirrorTo",14,pas["WEBLib.Graphics"].$rtti.TColor,"FColorMirrorTo","SetColorMirrorTo",{stored:"IsColorMirrorToStored"}),e.addProperty("TextureMode",2,t.$rtti.TTMSFNCGraphicsTextureMode,"FTextureMode","SetTextureMode",{Default:t.TTMSFNCGraphicsTextureMode.gtmStretch}),e.addProperty("Texture",2,pas["WEBLib.TMSFNCTypes"].$rtti.TTMSFNCBitmap,"FTexture","SetTexture")})),rtl.createClass(this,"TTMSFNCGraphicsFont",pas["WEBLib.Graphics"].TFont,(function(){this.$init=function(){pas["WEBLib.Graphics"].TFont.$init.call(this),this.FUpdateCount=0,this.FOnChanged=null},this.$final=function(){this.FOnChanged=void 0,pas["WEBLib.Graphics"].TFont.$final.call(this)},this.DoChanged=function(t){null!=this.FOnChanged&&0===this.FUpdateCount&&this.FOnChanged(this)},this.Create$2=function(){return pas["WEBLib.Graphics"].TFont.Create$1.call(this),this.SetHeight(-11),this.FOnChange=rtl.createCallback(this,"DoChanged"),this},this.Assign=function(t){pas["WEBLib.Graphics"].TFont.Assign.call(this,t),this.DoChanged(this)},this.AssignSource=function(t){this.Assign(t)}})),rtl.createClass(this,"TTMSFNCCustomGraphicsStroke",pas.Classes.TPersistent,(function(){this.$init=function(){pas.Classes.TPersistent.$init.call(this),this.FUpdateCount=0,this.FOnChanged=null,this.FKind=0,this.FColor=0,this.FWidth=0,this.FOpacity=0,this.FDefaultKind=0,this.FDefaultColor=0},this.$final=function(){this.FOnChanged=void 0,pas.Classes.TPersistent.$final.call(this)},this.SetKind=function(t){this.FKind!==t&&(this.FKind=t,this.Changed())},this.SetColor=function(t){this.FColor!==t&&(this.FColor=t,-1===this.FColor?this.FColor=-1:536870912===this.FColor&&(this.FColor=15790320),this.Changed())},this.SetWidth=function(t){this.FWidth!==t&&(this.FWidth=t,this.Changed())},this.IsWidthStored=function(){return 1!==this.FWidth},this.IsKindStored=function(){return this.FKind!==this.FDefaultKind},this.IsColorStored=function(){return this.FColor!==this.FDefaultColor},this.Changed=function(){null!=this.FOnChanged&&0===this.FUpdateCount&&this.FOnChanged(this)},this.Create$1=function(t,e){return this.FKind=t,this.FDefaultKind=t,this.FColor=e,this.FDefaultColor=e,this.FOpacity=1,this.FWidth=1,this},this.Assign=function(e){t.TTMSFNCCustomGraphicsStroke.isPrototypeOf(e)?(this.FColor=rtl.as(e,t.TTMSFNCCustomGraphicsStroke).FColor,this.FKind=rtl.as(e,t.TTMSFNCCustomGraphicsStroke).FKind,this.FOpacity=rtl.as(e,t.TTMSFNCCustomGraphicsStroke).FOpacity,this.FWidth=rtl.as(e,t.TTMSFNCCustomGraphicsStroke).FWidth):t.TTMSFNCCustomGraphicsFill.isPrototypeOf(e)&&(this.FColor=rtl.as(e,t.TTMSFNCCustomGraphicsFill).FColor,this.FKind=1,this.FOpacity=1,this.FWidth=1),this.Changed()}})),rtl.createClass(this,"TTMSFNCGraphicsStroke",this.TTMSFNCCustomGraphicsStroke,(function(){var e=this.$rtti;e.addProperty("OnChanged",0,pas.Classes.$rtti.TNotifyEvent,"FOnChanged","FOnChanged"),e.addProperty("Kind",14,t.$rtti.TTMSFNCGraphicsStrokeKind,"FKind","SetKind",{stored:"IsKindStored"}),e.addProperty("Color",14,pas["WEBLib.Graphics"].$rtti.TColor,"FColor","SetColor",{stored:"IsColorStored"}),e.addProperty("Width",14,rtl.double,"FWidth","SetWidth",{stored:"IsWidthStored"})})),this.TTMSFNCGraphicsPathPointKind={0:"gppMoveTo",gppMoveTo:0,1:"gppLineTo",gppLineTo:1,2:"gppCurveTo",gppCurveTo:2,3:"gppClose",gppClose:3},rtl.recNewT(this,"TTMSFNCGraphicsPathPoint",(function(){this.Kind=0,this.$new=function(){var t=Object.create(this);return t.Point=pas["WEBLib.TMSFNCTypes"].TPointF.$new(),t},this.$eq=function(t){return this.Kind===t.Kind&&this.Point.$eq(t.Point)},this.$assign=function(t){return this.Kind=t.Kind,this.Point.$assign(t.Point),this}})),rtl.createClass(this,"TTMSFNCGraphicsPathPoints",pas.Classes.TList,(function(){this.GetItem=function(e){var i=t.TTMSFNCGraphicsPathPoint.$new();return i.$assign(rtl.getObject(this.Get(e))),i},this.SetItem=function(e,i){var s=t.TTMSFNCGraphicsPathPoint.$new();s.$assign(i),this.Put(e,s)}})),rtl.createClass(this,"TTMSFNCGraphicsPath",pas.Classes.TPersistent,(function(){this.$init=function(){pas.Classes.TPersistent.$init.call(this),this.FStartPoint=pas["WEBLib.TMSFNCTypes"].TPointF.$new(),this.FClippable=!1,this.FPoints=null},this.$final=function(){this.FStartPoint=void 0,this.FPoints=void 0,pas.Classes.TPersistent.$final.call(this)},this.GetCount=function(){return this.FPoints.GetCount()},this.GetPoint=function(e){var i=t.TTMSFNCGraphicsPathPoint.$new();return i.$assign(this.FPoints.GetItem(e)),i},this.Create$1=function(){return pas.System.TObject.Create.call(this),this.FPoints=t.TTMSFNCGraphicsPathPoints.$create("Create$1"),this},this.Destroy=function(){rtl.free(this,"FPoints"),pas.System.TObject.Destroy.call(this)},this.Assign=function(e){var i=0;if(t.TTMSFNCGraphicsPath.isPrototypeOf(e)){this.FPoints.SetCount(e.GetCount());for(var s=0,n=e.GetCount()-1;s<=n;s++)i=s,this.FPoints.SetItem(i,e.GetPoint(i))}else pas.Classes.TPersistent.Assign.apply(this,arguments)},this.MoveTo=function(e){var i=t.TTMSFNCGraphicsPathPoint.$new();i.Kind=0,i.Point.$assign(e),this.FPoints.Add(t.TTMSFNCGraphicsPathPoint.$clone(i)),this.FStartPoint.$assign(this.FPoints.GetItem(this.FPoints.GetCount()-1).Point)},this.LineTo=function(e){var i=t.TTMSFNCGraphicsPathPoint.$new();i.Kind=1,i.Point.$assign(e),this.FPoints.Add(t.TTMSFNCGraphicsPathPoint.$clone(i)),e.X===this.FStartPoint.X&&e.Y===this.FStartPoint.Y&&(this.FClippable=!0)},this.CurveTo=function(e,i,s){var n=t.TTMSFNCGraphicsPathPoint.$new();n.Kind=2,n.Point.$assign(e),this.FPoints.Add(t.TTMSFNCGraphicsPathPoint.$clone(n)),n.Kind=2,n.Point.$assign(i),this.FPoints.Add(t.TTMSFNCGraphicsPathPoint.$clone(n)),n.Kind=2,n.Point.$assign(s),this.FPoints.Add(t.TTMSFNCGraphicsPathPoint.$clone(n))},this.ClosePath=function(){var e=t.TTMSFNCGraphicsPathPoint.$new();e.Kind=3,e.Point.$assign(this.FStartPoint),this.FPoints.Add(t.TTMSFNCGraphicsPathPoint.$clone(e)),this.FClippable=!0},this.AddEllipse=function(t){var e,i,s,n,r;r=.5522847498,e=(t.Left+t.Right)/2,i=(t.Top+t.Bottom)/2,s=r*((t.Right-t.Left)/2),n=r*((t.Bottom-t.Top)/2),this.MoveTo(pas["WEBLib.TMSFNCTypes"].PointF(t.Left,i)),this.CurveTo(pas["WEBLib.TMSFNCTypes"].PointF(t.Left,i-n),pas["WEBLib.TMSFNCTypes"].PointF(e-s,t.Top),pas["WEBLib.TMSFNCTypes"].PointF(e,t.Top)),this.CurveTo(pas["WEBLib.TMSFNCTypes"].PointF(e+s,t.Top),pas["WEBLib.TMSFNCTypes"].PointF(t.Right,i-n),pas["WEBLib.TMSFNCTypes"].PointF(t.Right,i)),this.CurveTo(pas["WEBLib.TMSFNCTypes"].PointF(t.Right,i+n),pas["WEBLib.TMSFNCTypes"].PointF(e+s,t.Bottom),pas["WEBLib.TMSFNCTypes"].PointF(e,t.Bottom)),this.CurveTo(pas["WEBLib.TMSFNCTypes"].PointF(e-s,t.Bottom),pas["WEBLib.TMSFNCTypes"].PointF(t.Left,i+n),pas["WEBLib.TMSFNCTypes"].PointF(t.Left,i)),this.FClippable=!0},this.AddRectangle=function(t,e,i){var s={};0===e&&0===i?(this.MoveTo(pas["WEBLib.TMSFNCTypes"].PointF(t.Left,t.Top)),this.LineTo(pas["WEBLib.TMSFNCTypes"].PointF(t.Right,t.Top)),this.LineTo(pas["WEBLib.TMSFNCTypes"].PointF(t.Right,t.Bottom)),this.LineTo(pas["WEBLib.TMSFNCTypes"].PointF(t.Left,t.Bottom))):(2 in(s=rtl.createSet(0,1,2,3))?(this.MoveTo(pas["WEBLib.TMSFNCTypes"].PointF(t.Left+e,t.Bottom)),this.AddArc(pas["WEBLib.TMSFNCTypes"].PointF(t.Left+e,t.Bottom-i),pas["WEBLib.TMSFNCTypes"].PointF(e,i),-270,90),this.LineTo(pas["WEBLib.TMSFNCTypes"].PointF(t.Left,t.Bottom-i))):this.MoveTo(pas["WEBLib.TMSFNCTypes"].PointF(t.Left,t.Bottom)),0 in s?(this.LineTo(pas["WEBLib.TMSFNCTypes"].PointF(t.Left,t.Top+i)),this.AddArc(pas["WEBLib.TMSFNCTypes"].PointF(t.Left+e,t.Top+i),pas["WEBLib.TMSFNCTypes"].PointF(e,i),-180,90),this.LineTo(pas["WEBLib.TMSFNCTypes"].PointF(t.Left+e,t.Top))):this.LineTo(pas["WEBLib.TMSFNCTypes"].PointF(t.Left,t.Top)),1 in s?(this.LineTo(pas["WEBLib.TMSFNCTypes"].PointF(t.Right-e,t.Top)),this.AddArc(pas["WEBLib.TMSFNCTypes"].PointF(t.Right-e,t.Top+i),pas["WEBLib.TMSFNCTypes"].PointF(e,i),-90,90),this.LineTo(pas["WEBLib.TMSFNCTypes"].PointF(t.Right,t.Top+i))):this.LineTo(pas["WEBLib.TMSFNCTypes"].PointF(t.Right,t.Top)),3 in s?(this.LineTo(pas["WEBLib.TMSFNCTypes"].PointF(t.Right,t.Bottom-i)),this.AddArc(pas["WEBLib.TMSFNCTypes"].PointF(t.Right-e,t.Bottom-i),pas["WEBLib.TMSFNCTypes"].PointF(e,i),0,90),this.LineTo(pas["WEBLib.TMSFNCTypes"].PointF(t.Right-e,t.Bottom))):this.LineTo(pas["WEBLib.TMSFNCTypes"].PointF(t.Right,t.Bottom)),2 in s?this.LineTo(pas["WEBLib.TMSFNCTypes"].PointF(t.Left+e,t.Bottom)):this.LineTo(pas["WEBLib.TMSFNCTypes"].PointF(t.Left,t.Bottom))),this.ClosePath(),this.FClippable=!0};this.AddArc=function(t,i,s,n){var r=!1,o=0,a=0,l=0,h=!1;if(s=pas.Math.DegToRad(s),n=pas.Math.DegToRad(n),s=s-2*pas.System.Trunc(s/(2*Math.PI))*Math.PI,n>=2*Math.PI&&(n=2*Math.PI),n<=-2*Math.PI&&(n=-2*Math.PI),!(Math.abs(n)<1e-10)){o=0,h=!1,r=!0;do{n<0?(l=o,a=-Math.PI/2,(o-=Math.PI/2)<=n+.01&&(a=n-l,h=!0)):(l=o,a=Math.PI/2,(o+=Math.PI/2)>=n-.01&&(a=n-l,h=!0)),e.DrawArcWithBezier(this,t.X,t.Y,i.X,i.Y,s,a,r),r=!1,s+=a}while(!h)}}})),rtl.createClass(this,"TTMSFNCGraphicsColorObject",pas.System.TObject,(function(){this.$init=function(){pas.System.TObject.$init.call(this),this.FColor=0},this.Create$1=function(t){return this.FColor=t,this}})),this.TTMSFNCGraphicsModifyRectMode={0:"gcrmNone",gcrmNone:0,1:"gcrmExpandAll",gcrmExpandAll:1,2:"gcrmShrinkAll",gcrmShrinkAll:2,3:"gcrmShiftRightAndExpandHeight",gcrmShiftRightAndExpandHeight:3,4:"gcrmShiftDownAndExpandWidth",gcrmShiftDownAndExpandWidth:4,5:"gcrmShiftRightAndShrinkHeight",gcrmShiftRightAndShrinkHeight:5,6:"gcrmShiftRightDown",gcrmShiftRightDown:6,7:"gcrmShiftRightUp",gcrmShiftRightUp:7,8:"gcrmShiftLeftUp",gcrmShiftLeftUp:8,9:"gcrmShiftLeftDown",gcrmShiftLeftDown:9,10:"gcrmShiftUpAndExpandWidth",gcrmShiftUpAndExpandWidth:10,11:"gcrmShiftLeftAndExpandHeight",gcrmShiftLeftAndExpandHeight:11},this.TTMSFNCGraphicsModifyPointMode={0:"gcpmNone",gcpmNone:0,1:"gcpmLeftUp",gcpmLeftUp:1,2:"gcpmRightDown",gcpmRightDown:2,3:"gcpmLeftDown",gcpmLeftDown:3,4:"gcpmRightUp",gcpmRightUp:4},this.TTMSFNCGraphicsCorner={0:"gcTopLeft",gcTopLeft:0,1:"gcTopRight",gcTopRight:1,2:"gcBottomLeft",gcBottomLeft:2,3:"gcBottomRight",gcBottomRight:3},this.ModifyRect=function(t,e){var i=pas["WEBLib.TMSFNCTypes"].TRectF.$new();i.$assign(t);var s=e;return 1===s?i.$assign(pas["WEBLib.TMSFNCTypes"].RectF(pas.System.Int(i.Left)-.5,pas.System.Int(i.Top)-.5,pas.System.Int(i.Right)+.5,pas.System.Int(i.Bottom)+.5)):2===s?i.$assign(pas["WEBLib.TMSFNCTypes"].RectF(pas.System.Int(i.Left)+.5,pas.System.Int(i.Top)+.5,pas.System.Int(i.Right)-.5,pas.System.Int(i.Bottom)-.5)):3===s?i.$assign(pas["WEBLib.TMSFNCTypes"].RectF(pas.System.Int(i.Left)+.5,pas.System.Int(i.Top)-.5,pas.System.Int(i.Right)+.5,pas.System.Int(i.Bottom)+.5)):6===s?i.$assign(pas["WEBLib.TMSFNCTypes"].RectF(pas.System.Int(i.Left)+.5,pas.System.Int(i.Top)+.5,pas.System.Int(i.Right)+.5,pas.System.Int(i.Bottom)+.5)):5===s?i.$assign(pas["WEBLib.TMSFNCTypes"].RectF(pas.System.Int(i.Left)+.5,pas.System.Int(i.Top)+.5,pas.System.Int(i.Right)+.5,pas.System.Int(i.Bottom)-.5)):4===s?i.$assign(pas["WEBLib.TMSFNCTypes"].RectF(pas.System.Int(i.Left)-.5,pas.System.Int(i.Top)+.5,pas.System.Int(i.Right)+.5,pas.System.Int(i.Bottom)+.5)):10===s?i.$assign(pas["WEBLib.TMSFNCTypes"].RectF(pas.System.Int(i.Left)-.5,pas.System.Int(i.Top)-.5,pas.System.Int(i.Right)+.5,pas.System.Int(i.Bottom)-.5)):7===s?i.$assign(pas["WEBLib.TMSFNCTypes"].RectF(pas.System.Int(i.Left)+.5,pas.System.Int(i.Top)-.5,pas.System.Int(i.Right)+.5,pas.System.Int(i.Bottom)-.5)):8===s?i.$assign(pas["WEBLib.TMSFNCTypes"].RectF(pas.System.Int(i.Left)-.5,pas.System.Int(i.Top)-.5,pas.System.Int(i.Right)-.5,pas.System.Int(i.Bottom)-.5)):9===s?i.$assign(pas["WEBLib.TMSFNCTypes"].RectF(pas.System.Int(i.Left)-.5,pas.System.Int(i.Top)+.5,pas.System.Int(i.Right)-.5,pas.System.Int(i.Bottom)+.5)):11===s&&i.$assign(pas["WEBLib.TMSFNCTypes"].RectF(pas.System.Int(i.Left)-.5,pas.System.Int(i.Top)-.5,pas.System.Int(i.Right)-.5,pas.System.Int(i.Bottom)+.5)),i},this.MakeGraphicsColor=function(t,e,i){return pas["WEBLib.Graphics"].RGB(t,e,i)},this.Lighter=function(e,i){var s=0,n=0,r=0;return e=pas["WEBLib.Graphics"].ColorToRGB(e),s=pas["WEBLib.Graphics"].GetRValue(e),n=pas["WEBLib.Graphics"].GetGValue(e),r=pas["WEBLib.Graphics"].GetBValue(e),s+=Math.min(255,pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.MulDivInt(255-s,i,100)),n+=Math.min(255,pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.MulDivInt(255-n,i,100)),r+=Math.min(255,pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.MulDivInt(255-r,i,100)),t.MakeGraphicsColor(s,n,r)},this.Darker=function(e,i){var s=0,n=0,r=0;return e=pas["WEBLib.Graphics"].ColorToRGB(e),s=pas["WEBLib.Graphics"].GetRValue(e),n=pas["WEBLib.Graphics"].GetGValue(e),r=pas["WEBLib.Graphics"].GetBValue(e),s-=Math.max(0,pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.MulDivInt(255-s,i,100)),n-=Math.max(0,pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.MulDivInt(255-n,i,100)),r-=Math.max(0,pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.MulDivInt(255-r,i,100)),t.MakeGraphicsColor(s,n,r)},this.Blend=function(t,e,i){var s,n,r,o,a=0,l=0;return i=Math.round(2.55*i),a=255&(s=pas["WEBLib.Graphics"].ColorToRGB(t)),l=255&(n=pas["WEBLib.Graphics"].ColorToRGB(e)),r=Math.max(0,Math.min(255,(i*(a-l)>>>8)+l)),a=255&Math.floor(s/256),l=255&Math.floor(n/256),o=Math.max(0,Math.min(255,(i*(a-l)>>>8)+l)),a=255&Math.floor(s/65536),l=255&Math.floor(n/65536),(Math.max(0,Math.min(255,(i*(a-l)>>>8)+l))<<16)+(o<<8)+r},this.ColorLookup=function(){return e.FColorLookup},this.DrawGradient=function(t,e,i,s,n,r,o){var a,l,h,F,p,c,u,d,S,C,T=0,m=0,g=0,f=0,b=0,y=0,L=0,M=0,E=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),P=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),B=0,D=0;E.$assign(s),0===(M=o?Math.round(E.Right-E.Left):Math.round(E.Bottom-E.Top))&&(M=1),e=pas["WEBLib.Graphics"].ColorToRGB(e),i=pas["WEBLib.Graphics"].ColorToRGB(i),a=255&e,l=Math.floor((65280&e)/256),h=Math.floor((16711680&e)/65536),F=((T=255&i)-a)/M,p=((m=Math.floor((65280&i)/256))-l)/M,c=((g=Math.floor((16711680&i)/65536))-h)/M,b=o?(E.Right-E.Left)/M:(E.Bottom-E.Top)/M,d=t.FBrush.FColor,C=t.FBrush.FStyle,u=t.FPen.FColor,S=t.FPen.FStyle,t.FPen.FStyle=0,t.FBrush.FStyle=0;for(var N=0,v=M-1;N<=v;N++)y=N,T=a+Math.round(F*y),m=l+Math.round(p*y),g=h+Math.round(c*y),L=Math.round(y*b),t.FPen.SetColor(T+(m<<8)+(g<<16)),t.FBrush.FColor=t.FPen.FColor,o?(f=pas.System.Trunc(b),B=E.Left+L+f,B=Math.min(B,E.Right),P.$assign(E),y<=n&&(0 in r||2 in r)?(D=Math.sqrt(Math.pow(n,2)-Math.pow(n-y,2)),0 in r&&(P.Top=P.Top+Math.round(n-D)),2 in r&&(P.Bottom=P.Bottom-Math.round(n-D))):y>=M-n&&(3 in r||1 in r)&&(D=Math.sqrt(Math.pow(n,2)-Math.pow(n-(M-y),2)),1 in r&&(P.Top=P.Top+Math.round(n-D)),3 in r&&(P.Bottom=P.Bottom-Math.round(n-D))),t.Rectangle(P.Left+L,P.Top,B,P.Bottom)):(f=pas.System.Trunc(b),B=E.Top+L+f,B=Math.min(B,E.Bottom),P.$assign(E),y<=n&&(0 in r||1 in r)?(D=Math.sqrt(Math.pow(n,2)-Math.pow(n-y,2)),0 in r&&(P.Left=P.Left+Math.round(n-D)),1 in r&&(P.Right=P.Right-Math.round(n-D))):y>=M-n&&(2 in r||3 in r)&&(D=Math.sqrt(Math.pow(n,2)-Math.pow(n-(M-y),2)),2 in r&&(P.Left=P.Left+Math.round(n-D)),3 in r&&(P.Right=P.Right-Math.round(n-D))),t.Rectangle(P.Left,P.Top+L,P.Right,B));t.FBrush.FColor=d,t.FBrush.FStyle=C,t.FPen.SetColor(u),t.FPen.FStyle=S},this.MatrixIdentity=function(){var e=t.TTMSFNCGraphicsMatrix.$new();return e.m11=1,e.m12=0,e.m13=0,e.m21=0,e.m22=1,e.m23=0,e.m31=0,e.m32=0,e.m33=1,e},this.MatrixCreateRotation=function(e){var i,s,n=t.TTMSFNCGraphicsMatrix.$new();return i=Math.sin(e),s=Math.cos(e),n.$assign(t.MatrixIdentity()),n.m11=s,n.m12=i,n.m21=-i,n.m22=s,n},this.MatrixCreateTranslation=function(e,i){var s=t.TTMSFNCGraphicsMatrix.$new();return s.$assign(t.MatrixIdentity()),s.m31=e,s.m32=i,s},this.MatrixMultiply=function(e,i){var s=t.TTMSFNCGraphicsMatrix.$new();return s.m11=e.m11*i.m11+e.m12*i.m21+e.m13*i.m31,s.m12=e.m11*i.m12+e.m12*i.m22+e.m13*i.m32,s.m13=e.m11*i.m13+e.m12*i.m23+e.m13*i.m33,s.m21=e.m21*i.m11+e.m22*i.m21+e.m23*i.m31,s.m22=e.m21*i.m12+e.m22*i.m22+e.m23*i.m32,s.m23=e.m21*i.m13+e.m22*i.m23+e.m23*i.m33,s.m31=e.m31*i.m11+e.m32*i.m21+e.m33*i.m31,s.m32=e.m31*i.m12+e.m32*i.m22+e.m33*i.m32,s.m33=e.m31*i.m13+e.m32*i.m23+e.m33*i.m33,s},t.$implcode=function(){e.FColorLookup=null,e.DrawArcWithBezier=function(t,e,i,s,n,r,o,a){var l,h,F,p,c,u,d=[],S=[],C=0;if(0===o)return a&&(t.FPoints.GetCount()<1?t.MoveTo(pas["WEBLib.TMSFNCTypes"].PointF(e+s*Math.cos(r),i-n*Math.sin(r))):t.LineTo(pas["WEBLib.TMSFNCTypes"].PointF(e+s*Math.cos(r),i-n*Math.sin(r)))),void t.LineTo(pas["WEBLib.TMSFNCTypes"].PointF(e+s*Math.cos(r),i-n*Math.sin(r)));for(h=(p=Math.sin(o/2))-(l=4*(1-(F=Math.cos(o/2)))/3)*F/p,u=Math.sin(r+o/2),c=Math.cos(r+o/2),(d=rtl.arraySetLength(d,pas["WEBLib.TMSFNCTypes"].TPointF,4))[0].$assign(pas["WEBLib.TMSFNCTypes"].PointF(F,-p)),d[1].$assign(pas["WEBLib.TMSFNCTypes"].PointF(F+l,-h)),d[2].$assign(pas["WEBLib.TMSFNCTypes"].PointF(F+l,h)),d[3].$assign(pas["WEBLib.TMSFNCTypes"].PointF(F,p)),S=rtl.arraySetLength(S,pas["WEBLib.TMSFNCTypes"].TPointF,4),C=0;C<=3;C++)S[C].$assign(pas["WEBLib.TMSFNCTypes"].PointF(e+s*(d[C].X*c-d[C].Y*u),i+n*(d[C].X*u+d[C].Y*c)));a&&(t.FPoints.GetCount()<1?t.MoveTo(S[0]):t.LineTo(S[0])),t.CurveTo(S[1],S[2],S[3])}},t.$init=function(){e.FColorLookup=pas.Classes.TStringList.$create("Create$1"),e.FColorLookup.AddObject("aliceblue",t.TTMSFNCGraphicsColorObject.$create("Create$1",[16775408])),e.FColorLookup.AddObject("antiquewhite",t.TTMSFNCGraphicsColorObject.$create("Create$1",[14150650])),e.FColorLookup.AddObject("aqua",t.TTMSFNCGraphicsColorObject.$create("Create$1",[16776960])),e.FColorLookup.AddObject("aquamarine",t.TTMSFNCGraphicsColorObject.$create("Create$1",[13959039])),e.FColorLookup.AddObject("azure",t.TTMSFNCGraphicsColorObject.$create("Create$1",[16777200])),e.FColorLookup.AddObject("beige",t.TTMSFNCGraphicsColorObject.$create("Create$1",[14480885])),e.FColorLookup.AddObject("bisque",t.TTMSFNCGraphicsColorObject.$create("Create$1",[12903679])),e.FColorLookup.AddObject("black",t.TTMSFNCGraphicsColorObject.$create("Create$1",[0])),e.FColorLookup.AddObject("blanchedalmond",t.TTMSFNCGraphicsColorObject.$create("Create$1",[13495295])),e.FColorLookup.AddObject("blue",t.TTMSFNCGraphicsColorObject.$create("Create$1",[16711680])),e.FColorLookup.AddObject("blueviolet",t.TTMSFNCGraphicsColorObject.$create("Create$1",[14822282])),e.FColorLookup.AddObject("brown",t.TTMSFNCGraphicsColorObject.$create("Create$1",[2763429])),e.FColorLookup.AddObject("burlywood",t.TTMSFNCGraphicsColorObject.$create("Create$1",[8894686])),e.FColorLookup.AddObject("cadetblue",t.TTMSFNCGraphicsColorObject.$create("Create$1",[10526303])),e.FColorLookup.AddObject("chartreuse",t.TTMSFNCGraphicsColorObject.$create("Create$1",[65407])),e.FColorLookup.AddObject("chocolate",t.TTMSFNCGraphicsColorObject.$create("Create$1",[1993170])),e.FColorLookup.AddObject("coral",t.TTMSFNCGraphicsColorObject.$create("Create$1",[5275647])),e.FColorLookup.AddObject("cornflowerblue",t.TTMSFNCGraphicsColorObject.$create("Create$1",[15570276])),e.FColorLookup.AddObject("cornsilk",t.TTMSFNCGraphicsColorObject.$create("Create$1",[14481663])),e.FColorLookup.AddObject("crimson",t.TTMSFNCGraphicsColorObject.$create("Create$1",[3937500])),e.FColorLookup.AddObject("cyan",t.TTMSFNCGraphicsColorObject.$create("Create$1",[16776960])),e.FColorLookup.AddObject("darkblue",t.TTMSFNCGraphicsColorObject.$create("Create$1",[9109504])),e.FColorLookup.AddObject("darkcyan",t.TTMSFNCGraphicsColorObject.$create("Create$1",[9145088])),e.FColorLookup.AddObject("darkgoldenrod",t.TTMSFNCGraphicsColorObject.$create("Create$1",[755384])),e.FColorLookup.AddObject("darkgray",t.TTMSFNCGraphicsColorObject.$create("Create$1",[11119017])),e.FColorLookup.AddObject("darkgreen",t.TTMSFNCGraphicsColorObject.$create("Create$1",[25600])),e.FColorLookup.AddObject("darkgrey",t.TTMSFNCGraphicsColorObject.$create("Create$1",[11119017])),e.FColorLookup.AddObject("darkkhaki",t.TTMSFNCGraphicsColorObject.$create("Create$1",[7059389])),e.FColorLookup.AddObject("darkmagenta",t.TTMSFNCGraphicsColorObject.$create("Create$1",[9109643])),e.FColorLookup.AddObject("darkolivegreen",t.TTMSFNCGraphicsColorObject.$create("Create$1",[3107669])),e.FColorLookup.AddObject("darkorange",t.TTMSFNCGraphicsColorObject.$create("Create$1",[36095])),e.FColorLookup.AddObject("darkorchid",t.TTMSFNCGraphicsColorObject.$create("Create$1",[13382297])),e.FColorLookup.AddObject("darkred",t.TTMSFNCGraphicsColorObject.$create("Create$1",[139])),e.FColorLookup.AddObject("darksalmon",t.TTMSFNCGraphicsColorObject.$create("Create$1",[8034025])),e.FColorLookup.AddObject("darkseagreen",t.TTMSFNCGraphicsColorObject.$create("Create$1",[9419919])),e.FColorLookup.AddObject("darkslateblue",t.TTMSFNCGraphicsColorObject.$create("Create$1",[9125192])),e.FColorLookup.AddObject("darkslategray",t.TTMSFNCGraphicsColorObject.$create("Create$1",[5197615])),e.FColorLookup.AddObject("darkslategrey",t.TTMSFNCGraphicsColorObject.$create("Create$1",[5197615])),e.FColorLookup.AddObject("darkturquoise",t.TTMSFNCGraphicsColorObject.$create("Create$1",[13749760])),e.FColorLookup.AddObject("darkviolet",t.TTMSFNCGraphicsColorObject.$create("Create$1",[13828244])),e.FColorLookup.AddObject("deeppink",t.TTMSFNCGraphicsColorObject.$create("Create$1",[9639167])),e.FColorLookup.AddObject("deepskyblue",t.TTMSFNCGraphicsColorObject.$create("Create$1",[16760576])),e.FColorLookup.AddObject("dimgray",t.TTMSFNCGraphicsColorObject.$create("Create$1",[6908265])),e.FColorLookup.AddObject("dimgrey",t.TTMSFNCGraphicsColorObject.$create("Create$1",[6908265])),e.FColorLookup.AddObject("dodgerblue",t.TTMSFNCGraphicsColorObject.$create("Create$1",[16748574])),e.FColorLookup.AddObject("firebrick",t.TTMSFNCGraphicsColorObject.$create("Create$1",[2237106])),e.FColorLookup.AddObject("floralwhite",t.TTMSFNCGraphicsColorObject.$create("Create$1",[15792895])),e.FColorLookup.AddObject("forestgreen",t.TTMSFNCGraphicsColorObject.$create("Create$1",[2263842])),e.FColorLookup.AddObject("fuchsia",t.TTMSFNCGraphicsColorObject.$create("Create$1",[16711935])),e.FColorLookup.AddObject("gainsboro",t.TTMSFNCGraphicsColorObject.$create("Create$1",[14474460])),e.FColorLookup.AddObject("ghostwhite",t.TTMSFNCGraphicsColorObject.$create("Create$1",[16775416])),e.FColorLookup.AddObject("gold",t.TTMSFNCGraphicsColorObject.$create("Create$1",[55295])),e.FColorLookup.AddObject("goldenrod",t.TTMSFNCGraphicsColorObject.$create("Create$1",[2139610])),e.FColorLookup.AddObject("gray",t.TTMSFNCGraphicsColorObject.$create("Create$1",[8421504])),e.FColorLookup.AddObject("green",t.TTMSFNCGraphicsColorObject.$create("Create$1",[32768])),e.FColorLookup.AddObject("greenyellow",t.TTMSFNCGraphicsColorObject.$create("Create$1",[3145645])),e.FColorLookup.AddObject("grey",t.TTMSFNCGraphicsColorObject.$create("Create$1",[8421504])),e.FColorLookup.AddObject("honeydew",t.TTMSFNCGraphicsColorObject.$create("Create$1",[15794160])),e.FColorLookup.AddObject("hotpink",t.TTMSFNCGraphicsColorObject.$create("Create$1",[11823615])),e.FColorLookup.AddObject("indianred",t.TTMSFNCGraphicsColorObject.$create("Create$1",[6053069])),e.FColorLookup.AddObject("indigo",t.TTMSFNCGraphicsColorObject.$create("Create$1",[8519755])),e.FColorLookup.AddObject("ivory",t.TTMSFNCGraphicsColorObject.$create("Create$1",[15794175])),e.FColorLookup.AddObject("khaki",t.TTMSFNCGraphicsColorObject.$create("Create$1",[9234160])),e.FColorLookup.AddObject("lavender",t.TTMSFNCGraphicsColorObject.$create("Create$1",[16443110])),e.FColorLookup.AddObject("lavenderblush",t.TTMSFNCGraphicsColorObject.$create("Create$1",[16118015])),e.FColorLookup.AddObject("lawngreen",t.TTMSFNCGraphicsColorObject.$create("Create$1",[64636])),e.FColorLookup.AddObject("lemonchiffon",t.TTMSFNCGraphicsColorObject.$create("Create$1",[13499135])),e.FColorLookup.AddObject("lightblue",t.TTMSFNCGraphicsColorObject.$create("Create$1",[15128749])),e.FColorLookup.AddObject("lightcoral",t.TTMSFNCGraphicsColorObject.$create("Create$1",[8421616])),e.FColorLookup.AddObject("lightcyan",t.TTMSFNCGraphicsColorObject.$create("Create$1",[16777184])),e.FColorLookup.AddObject("lightgoldenrodyellow",t.TTMSFNCGraphicsColorObject.$create("Create$1",[13826810])),e.FColorLookup.AddObject("lightgray",t.TTMSFNCGraphicsColorObject.$create("Create$1",[13882323])),e.FColorLookup.AddObject("lightgreen",t.TTMSFNCGraphicsColorObject.$create("Create$1",[9498256])),e.FColorLookup.AddObject("lightgrey",t.TTMSFNCGraphicsColorObject.$create("Create$1",[13882323])),e.FColorLookup.AddObject("lightpink",t.TTMSFNCGraphicsColorObject.$create("Create$1",[12695295])),e.FColorLookup.AddObject("lightsalmon",t.TTMSFNCGraphicsColorObject.$create("Create$1",[8036607])),e.FColorLookup.AddObject("lightseagreen",t.TTMSFNCGraphicsColorObject.$create("Create$1",[11186720])),e.FColorLookup.AddObject("lightskyblue",t.TTMSFNCGraphicsColorObject.$create("Create$1",[16436871])),e.FColorLookup.AddObject("lightslategray",t.TTMSFNCGraphicsColorObject.$create("Create$1",[10061943])),e.FColorLookup.AddObject("lightslategrey",t.TTMSFNCGraphicsColorObject.$create("Create$1",[10061943])),e.FColorLookup.AddObject("lightsteelblue",t.TTMSFNCGraphicsColorObject.$create("Create$1",[14599344])),e.FColorLookup.AddObject("lightyellow",t.TTMSFNCGraphicsColorObject.$create("Create$1",[14745599])),e.FColorLookup.AddObject("lime",t.TTMSFNCGraphicsColorObject.$create("Create$1",[65280])),e.FColorLookup.AddObject("limegreen",t.TTMSFNCGraphicsColorObject.$create("Create$1",[3329330])),e.FColorLookup.AddObject("linen",t.TTMSFNCGraphicsColorObject.$create("Create$1",[15134970])),e.FColorLookup.AddObject("magenta",t.TTMSFNCGraphicsColorObject.$create("Create$1",[16711935])),e.FColorLookup.AddObject("maroon",t.TTMSFNCGraphicsColorObject.$create("Create$1",[128])),e.FColorLookup.AddObject("mediumaquamarine",t.TTMSFNCGraphicsColorObject.$create("Create$1",[11193702])),e.FColorLookup.AddObject("mediumblue",t.TTMSFNCGraphicsColorObject.$create("Create$1",[13434880])),e.FColorLookup.AddObject("mediumorchid",t.TTMSFNCGraphicsColorObject.$create("Create$1",[13850042])),e.FColorLookup.AddObject("mediumpurple",t.TTMSFNCGraphicsColorObject.$create("Create$1",[14381203])),e.FColorLookup.AddObject("mediumseagreen",t.TTMSFNCGraphicsColorObject.$create("Create$1",[7451452])),e.FColorLookup.AddObject("mediumslateblue",t.TTMSFNCGraphicsColorObject.$create("Create$1",[15624315])),e.FColorLookup.AddObject("mediumspringgreen",t.TTMSFNCGraphicsColorObject.$create("Create$1",[10156544])),e.FColorLookup.AddObject("mediumturquoise",t.TTMSFNCGraphicsColorObject.$create("Create$1",[13422920])),e.FColorLookup.AddObject("mediumvioletred",t.TTMSFNCGraphicsColorObject.$create("Create$1",[8721863])),e.FColorLookup.AddObject("midnightblue",t.TTMSFNCGraphicsColorObject.$create("Create$1",[7346457])),e.FColorLookup.AddObject("mintcream",t.TTMSFNCGraphicsColorObject.$create("Create$1",[16449525])),e.FColorLookup.AddObject("mistyrose",t.TTMSFNCGraphicsColorObject.$create("Create$1",[14804223])),e.FColorLookup.AddObject("moccasin",t.TTMSFNCGraphicsColorObject.$create("Create$1",[11920639])),e.FColorLookup.AddObject("navajowhite",t.TTMSFNCGraphicsColorObject.$create("Create$1",[11394815])),e.FColorLookup.AddObject("navy",t.TTMSFNCGraphicsColorObject.$create("Create$1",[8388608])),e.FColorLookup.AddObject("oldlace",t.TTMSFNCGraphicsColorObject.$create("Create$1",[15136253])),e.FColorLookup.AddObject("olive",t.TTMSFNCGraphicsColorObject.$create("Create$1",[32896])),e.FColorLookup.AddObject("olivedrab",t.TTMSFNCGraphicsColorObject.$create("Create$1",[2330219])),e.FColorLookup.AddObject("orange",t.TTMSFNCGraphicsColorObject.$create("Create$1",[42495])),e.FColorLookup.AddObject("orangered",t.TTMSFNCGraphicsColorObject.$create("Create$1",[17919])),e.FColorLookup.AddObject("orchid",t.TTMSFNCGraphicsColorObject.$create("Create$1",[14053594])),e.FColorLookup.AddObject("palegoldenrod",t.TTMSFNCGraphicsColorObject.$create("Create$1",[11200750])),e.FColorLookup.AddObject("palegreen",t.TTMSFNCGraphicsColorObject.$create("Create$1",[10025880])),e.FColorLookup.AddObject("paleturquoise",t.TTMSFNCGraphicsColorObject.$create("Create$1",[15658671])),e.FColorLookup.AddObject("palevioletred",t.TTMSFNCGraphicsColorObject.$create("Create$1",[9662683])),e.FColorLookup.AddObject("papayawhip",t.TTMSFNCGraphicsColorObject.$create("Create$1",[14020607])),e.FColorLookup.AddObject("peachpuff",t.TTMSFNCGraphicsColorObject.$create("Create$1",[12180223])),e.FColorLookup.AddObject("peru",t.TTMSFNCGraphicsColorObject.$create("Create$1",[4163021])),e.FColorLookup.AddObject("pink",t.TTMSFNCGraphicsColorObject.$create("Create$1",[13353215])),e.FColorLookup.AddObject("plum",t.TTMSFNCGraphicsColorObject.$create("Create$1",[14524637])),e.FColorLookup.AddObject("powderblue",t.TTMSFNCGraphicsColorObject.$create("Create$1",[15130800])),e.FColorLookup.AddObject("purple",t.TTMSFNCGraphicsColorObject.$create("Create$1",[8388736])),e.FColorLookup.AddObject("red",t.TTMSFNCGraphicsColorObject.$create("Create$1",[255])),e.FColorLookup.AddObject("rosybrown",t.TTMSFNCGraphicsColorObject.$create("Create$1",[9408444])),e.FColorLookup.AddObject("royalblue",t.TTMSFNCGraphicsColorObject.$create("Create$1",[14772545])),e.FColorLookup.AddObject("saddlebrown",t.TTMSFNCGraphicsColorObject.$create("Create$1",[1262987])),e.FColorLookup.AddObject("salmon",t.TTMSFNCGraphicsColorObject.$create("Create$1",[7504122])),e.FColorLookup.AddObject("sandybrown",t.TTMSFNCGraphicsColorObject.$create("Create$1",[6333684])),e.FColorLookup.AddObject("seagreen",t.TTMSFNCGraphicsColorObject.$create("Create$1",[5737262])),e.FColorLookup.AddObject("seashell",t.TTMSFNCGraphicsColorObject.$create("Create$1",[15660543])),e.FColorLookup.AddObject("sienna",t.TTMSFNCGraphicsColorObject.$create("Create$1",[2970272])),e.FColorLookup.AddObject("skyblue",t.TTMSFNCGraphicsColorObject.$create("Create$1",[15453831])),e.FColorLookup.AddObject("slateblue",t.TTMSFNCGraphicsColorObject.$create("Create$1",[13458026])),e.FColorLookup.AddObject("slategray",t.TTMSFNCGraphicsColorObject.$create("Create$1",[9470064])),e.FColorLookup.AddObject("slategrey",t.TTMSFNCGraphicsColorObject.$create("Create$1",[9470064])),e.FColorLookup.AddObject("snow",t.TTMSFNCGraphicsColorObject.$create("Create$1",[16448255])),e.FColorLookup.AddObject("springgreen",t.TTMSFNCGraphicsColorObject.$create("Create$1",[8388352])),e.FColorLookup.AddObject("steelblue",t.TTMSFNCGraphicsColorObject.$create("Create$1",[11829830])),e.FColorLookup.AddObject("violet",t.TTMSFNCGraphicsColorObject.$create("Create$1",[15631086])),e.FColorLookup.AddObject("thistle",t.TTMSFNCGraphicsColorObject.$create("Create$1",[14204888])),e.FColorLookup.AddObject("tan",t.TTMSFNCGraphicsColorObject.$create("Create$1",[9221330])),e.FColorLookup.AddObject("tomato",t.TTMSFNCGraphicsColorObject.$create("Create$1",[4678655])),e.FColorLookup.AddObject("turquoise",t.TTMSFNCGraphicsColorObject.$create("Create$1",[13688896])),e.FColorLookup.AddObject("wheat",t.TTMSFNCGraphicsColorObject.$create("Create$1",[11788021])),e.FColorLookup.AddObject("whitesmoke",t.TTMSFNCGraphicsColorObject.$create("Create$1",[16119285])),e.FColorLookup.AddObject("yellowgreen",t.TTMSFNCGraphicsColorObject.$create("Create$1",[3329434])),e.FColorLookup.AddObject("red",t.TTMSFNCGraphicsColorObject.$create("Create$1",[255])),e.FColorLookup.AddObject("black",t.TTMSFNCGraphicsColorObject.$create("Create$1",[0])),e.FColorLookup.AddObject("blue",t.TTMSFNCGraphicsColorObject.$create("Create$1",[16711680])),e.FColorLookup.AddObject("green",t.TTMSFNCGraphicsColorObject.$create("Create$1",[32768])),e.FColorLookup.AddObject("aqua",t.TTMSFNCGraphicsColorObject.$create("Create$1",[16776960])),e.FColorLookup.AddObject("yellow",t.TTMSFNCGraphicsColorObject.$create("Create$1",[65535])),e.FColorLookup.AddObject("fuchsia",t.TTMSFNCGraphicsColorObject.$create("Create$1",[16711935])),e.FColorLookup.AddObject("white",t.TTMSFNCGraphicsColorObject.$create("Create$1",[16777215])),e.FColorLookup.AddObject("lime",t.TTMSFNCGraphicsColorObject.$create("Create$1",[65280])),e.FColorLookup.AddObject("silver",t.TTMSFNCGraphicsColorObject.$create("Create$1",[12632256])),e.FColorLookup.AddObject("gray",t.TTMSFNCGraphicsColorObject.$create("Create$1",[8421504])),e.FColorLookup.AddObject("olive",t.TTMSFNCGraphicsColorObject.$create("Create$1",[32896])),e.FColorLookup.AddObject("navy",t.TTMSFNCGraphicsColorObject.$create("Create$1",[8388608])),e.FColorLookup.AddObject("purple",t.TTMSFNCGraphicsColorObject.$create("Create$1",[8388736])),e.FColorLookup.AddObject("teal",t.TTMSFNCGraphicsColorObject.$create("Create$1",[8421376])),e.FColorLookup.AddObject("orange",t.TTMSFNCGraphicsColorObject.$create("Create$1",[42495])),e.FColorLookup.AddObject("maroon",t.TTMSFNCGraphicsColorObject.$create("Create$1",[128])),e.FColorLookup.Sort()}}),["WEBLib.TMSFNCUtils","SysUtils","Math"]),rtl.module("WEBLib.DesignIntf",["System","Classes","Web","JS","TypInfo","WEBLib.Forms","WEBLib.Menus"],(function(){"use strict";var t=this.$impl;rtl.createClass(this,"TRegisteredComponent",pas.System.TObject,(function(){this.$init=function(){pas.System.TObject.$init.call(this),this.FIcon=""}})),this.GetRegisteredComponent=function(e){var i=null,s=null;if(i=null,""===e)return i;s=null;var n=Object.keys(t.RegisteredComponentList).map((function(e){return[t.RegisteredComponentList[e]]}));for(let t of n)if(t[0].FClass.$classname.toLowerCase()==e.toLowerCase()){s=t[0];break}return i=s},this.$implcode=function(){t.RegisteredComponentList=null,t.RegisteredSelectionEditorList=null,t.RegisteredPropertyEditorList=null,t.RegisteredIgnoredPropertyList=null,t.RegisteredLibraryRequirementsEditorList=null,t.RegisteredComponentEditorList=null,t.RegisteredIdentToIntList=null},this.$init=function(){t.RegisteredComponentList=Object.create(null),t.RegisteredSelectionEditorList=Object.create(null),t.RegisteredPropertyEditorList=Object.create(null),t.RegisteredIgnoredPropertyList=Object.create(null),t.RegisteredLibraryRequirementsEditorList=Object.create(null),t.RegisteredComponentEditorList=Object.create(null),t.RegisteredIdentToIntList=Object.create(null)}}),["SysUtils","Generics.Collections"]),rtl.module("WEBLib.TMSFNCCustomComponent",["System","Classes","WEBLib.Controls","WEBLib.TMSFNCTypes","WEBLib.TMSFNCPersistence","TypInfo"],(function(){"use strict";var t=this;this.$rtti.$MethodVar("TTMSFNCCustomComponentCanSavePropertyEvent",{procsig:rtl.newTIProcSig([["Sender",pas.System.$rtti.TObject],["AObject",pas.System.$rtti.TObject],["APropertyName",rtl.string],["APropertyType",pas.System.$rtti.TTypeKind],["ACanSave",rtl.boolean,1]]),methodkind:0}),this.$rtti.$MethodVar("TTMSFNCCustomComponentCanLoadPropertyEvent",{procsig:rtl.newTIProcSig([["Sender",pas.System.$rtti.TObject],["AObject",pas.System.$rtti.TObject],["APropertyName",rtl.string],["APropertyType",pas.System.$rtti.TTypeKind],["ACanLoad",rtl.boolean,1]]),methodkind:0}),rtl.createClass(this,"TTMSFNCCustomComponent",pas["WEBLib.Controls"].TCustomControl,(function(){this.FBlockPersistenceInterface=!1,this.$init=function(){pas["WEBLib.Controls"].TCustomControl.$init.call(this),this.FDesigntimeFormPixelsPerInch=0,this.FAppearancePersisting=!1,this.FOnCanSaveProperty=null,this.FOnCanLoadProperty=null},this.$final=function(){this.FOnCanSaveProperty=void 0,this.FOnCanLoadProperty=void 0,pas["WEBLib.Controls"].TCustomControl.$final.call(this)},this.GetVersionNumber=function(t,e,i,s){return"",""},this.DoCanSaveProperty=function(t,e,i,s){null!=this.FOnCanSaveProperty&&this.FOnCanSaveProperty(this,t,e,i,s)},this.DoCanLoadProperty=function(t,e,i,s){null!=this.FOnCanLoadProperty&&this.FOnCanLoadProperty(this,t,e,i,s)},this.IsAppearanceProperty=function(t,e,i){return!1,!1},this.CanSaveProperty=function(t,e,i){var s=!1;return s=!(t===this&&!this.FBlockPersistenceInterface)||-1===pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.IndexOfTextInArray(e,pas["WEBLib.TMSFNCPersistence"].ExcludePropertyList),this.FAppearancePersisting&&(s=s&&this.IsAppearanceProperty(t,e,i)),this.DoCanSaveProperty(t,e,i,{get:function(){return s},set:function(t){s=t}}),s},this.CanLoadProperty=function(t,e,i){var s=!1;return s=!(t===this&&!this.FBlockPersistenceInterface)||-1===pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.IndexOfTextInArray(e,pas["WEBLib.TMSFNCPersistence"].ExcludePropertyList),this.DoCanLoadProperty(t,e,i,{get:function(){return s},set:function(t){s=t}}),s},this.Paint=function(){var t=null,e=null,i=null,s=null;pas["WEBLib.Controls"].TCustomControl.Paint.call(this),i=null,t=pas["WEBLib.TMSFNCTypes"].TTMSFNCBitmap.$create("Create$3"),e=pas["WEBLib.TMSFNCGraphics"].TTMSFNCGraphics.$create("Create$1",[this.GetCanvas(),!1]);try{e.FStroke.SetKind(1),e.FStroke.SetColor(0),e.DrawRectangle$2(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(pas["WEBLib.TMSFNCTypes"].RectF(0,0,this.GetWidth(),this.GetHeight())),2),null!=(s=pas["WEBLib.DesignIntf"].GetRegisteredComponent(this.$classname))&&t.LoadFromResource(s.FIcon),e.DrawBitmap$1(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(pas["WEBLib.TMSFNCTypes"].RectF(2,2,this.GetWidth()-2,this.GetHeight()-2)),t,!0,!0,!0,!1)}finally{null!=i&&(i=rtl.freeLoc(i)),t=rtl.freeLoc(t),e=rtl.freeLoc(e)}},this.Loaded=function(){pas["WEBLib.Controls"].TCustomControl.Loaded.call(this),4 in this.FComponentState||this.SetVisible(!1)},this.RegisterRuntimeClasses=function(){},this.Create$1=function(t){var e=0;return pas["WEBLib.Controls"].TControl.Create$1.apply(this,arguments),e=96,this.FDesigntimeFormPixelsPerInch=e,this.SetWidth(26),this.SetHeight(26),this.IsDesigning()||this.RegisterRuntimeClasses(),this},this.SetBounds=function(t,e,i,s){var n;n=pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.GetDPIScale(this,-1),pas["WEBLib.Controls"].TControl.SetBounds.call(this,t,e,Math.round(26*n),Math.round(26*n))},this.BeginUpdate=function(){pas["WEBLib.Controls"].TControl.BeginUpdate.call(this)},this.EndUpdate=function(){pas["WEBLib.Controls"].TCustomControl.EndUpdate.call(this)},this.IsDesigning=function(){return 4 in this.FComponentState},rtl.addIntf(this,pas["WEBLib.TMSFNCPersistence"].ITMSFNCPersistence),rtl.addIntf(this,pas.System.IUnknown);var e=this.$rtti;e.addProperty("Visible",2,rtl.boolean,"FVisible","SetVisible",{Default:!0}),e.addProperty("Width",3,rtl.longint,"GetWidth","SetWidth"),e.addProperty("Height",3,rtl.longint,"GetHeight","SetHeight"),e.addProperty("OnCanSaveProperty",0,t.$rtti.TTMSFNCCustomComponentCanSavePropertyEvent,"FOnCanSaveProperty","FOnCanSaveProperty"),e.addProperty("OnCanLoadProperty",0,t.$rtti.TTMSFNCCustomComponentCanLoadPropertyEvent,"FOnCanLoadProperty","FOnCanLoadProperty")}))}),["WEBLib.TMSFNCUtils","WEBLib.Forms","SysUtils","WEBLib.TMSFNCGraphics","WEBLib.Graphics","WEBLib.TMSFNCGraphicsTypes","Types","WEBLib.DesignIntf"]),rtl.module("WEBLib.TMSFNCBitmapContainer",["System","Classes","WEBLib.TMSFNCTypes","WEBLib.TMSFNCCustomComponent","WEBLib.Controls"],(function(){"use strict";var t=this;this.MAJ_VER=1,this.MIN_VER=0,this.REL_VER=0,this.BLD_VER=0,this.$rtti.$Class("TTMSFNCBitmapContainer"),rtl.createClass(this,"TTMSFNCBitmapItem",pas.Classes.TCollectionItem,(function(){this.$init=function(){pas.Classes.TCollectionItem.$init.call(this),this.FBitmap=null,this.FTag=0,this.FName=""},this.$final=function(){this.FBitmap=void 0,pas.Classes.TCollectionItem.$final.call(this)},this.SetBitmap=function(t){this.FBitmap.Assign(t)},this.Create$1=function(t){return pas.Classes.TCollectionItem.Create$1.apply(this,arguments),this.FBitmap=pas["WEBLib.TMSFNCTypes"].TTMSFNCBitmap.$create("Create$3"),this.FBitmap.FOnChange=rtl.createCallback(this,"DoBitmapChanged"),this.FName="Item"+pas.SysUtils.IntToStr(this.FCollection.GetCount()),this},this.Destroy=function(){rtl.free(this,"FBitmap"),pas.Classes.TCollectionItem.Destroy.call(this)},this.DoBitmapChanged=function(e){t.TTMSFNCBitmapCollection.isPrototypeOf(this.FCollection)&&null!=rtl.as(this.FCollection,t.TTMSFNCBitmapCollection).FOwner$1&&rtl.as(this.FCollection,t.TTMSFNCBitmapCollection).FOwner$1.DoBitmapChanged(this)},this.Assign=function(e){this.FName=rtl.as(e,t.TTMSFNCBitmapItem).FName,this.FTag=rtl.as(e,t.TTMSFNCBitmapItem).FTag,this.FBitmap.Assign(rtl.as(e,t.TTMSFNCBitmapItem).FBitmap)};var e=this.$rtti;e.addProperty("Bitmap",2,pas["WEBLib.TMSFNCTypes"].$rtti.TTMSFNCBitmap,"FBitmap","SetBitmap"),e.addProperty("Name",0,rtl.string,"FName","FName"),e.addProperty("Tag",0,rtl.nativeint,"FTag","FTag")})),rtl.createClass(this,"TTMSFNCBitmapCollection",pas.Classes.TOwnedCollection,(function(){this.$init=function(){pas.Classes.TOwnedCollection.$init.call(this),this.FOwner$1=null},this.$final=function(){this.FOwner$1=void 0,pas.Classes.TOwnedCollection.$final.call(this)},this.GetItemEx=function(t){return this.GetItem(t)},this.GetBitmapItemClass=function(){return t.TTMSFNCBitmapItem},this.Create$3=function(t){return pas.Classes.TOwnedCollection.Create$2.call(this,t,this.GetBitmapItemClass()),this.FOwner$1=t,this}})),rtl.createClass(this,"TControlList",pas.Classes.TList,(function(){})),rtl.createClass(this,"TTMSFNCBitmapContainer",pas["WEBLib.TMSFNCCustomComponent"].TTMSFNCCustomComponent,(function(){this.$init=function(){pas["WEBLib.TMSFNCCustomComponent"].TTMSFNCCustomComponent.$init.call(this),this.FControls$1=null,this.FItems=null,this.FOnBitmapChanged=null},this.$final=function(){this.FControls$1=void 0,this.FItems=void 0,this.FOnBitmapChanged=void 0,pas["WEBLib.TMSFNCCustomComponent"].TTMSFNCCustomComponent.$final.call(this)},this.SetItems=function(t){this.FItems.Assign(t)},this.GetItems=function(){return this.FItems},this.GetVersion=function(){return this.$class.GetVersionNumber(1,0,0,0)},this.CreateItems=function(){return t.TTMSFNCBitmapCollection.$create("Create$3",[this])},this.RegisterRuntimeClasses=function(){pas.Classes.RegisterClass(t.TTMSFNCBitmapContainer)},this.Notification=function(t,e){var i=0;if(pas.Classes.TComponent.Notification.apply(this,arguments),1===e&&null!=this.FControls$1)for(var s=this.FControls$1.GetCount()-1;s>=0;s--)i=s,this.FControls$1.Get(i)==t&&this.FControls$1.Delete(i)},this.DoBitmapChanged=function(t){var e=null,i=0;if(null!=(e=pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.GetParentForm(this)))for(var s=0,n=e.GetControlsCount()-1;s<=n;s++)i=s,pas["WEBLib.Controls"].TWinControl.isPrototypeOf(e.GetControls(i))&&this.InvalidateMembers(rtl.as(e.GetControls(i),pas["WEBLib.Controls"].TWinControl));null!=this.FOnBitmapChanged&&this.FOnBitmapChanged(this)},this.InvalidateMembers=function(t){var e=0;if(null!=t){null!=pas.TypInfo.GetPropInfo$2(t,"BitmapContainer")&&t.Invalidate();for(var i=0,s=t.GetControlsCount()-1;i<=s;i++)e=i,pas["WEBLib.Controls"].TWinControl.isPrototypeOf(t.GetControls(e))&&this.InvalidateMembers(rtl.as(t.GetControls(e),pas["WEBLib.Controls"].TWinControl))}},this.Create$1=function(e){return pas["WEBLib.TMSFNCCustomComponent"].TTMSFNCCustomComponent.Create$1.apply(this,arguments),this.FItems=this.CreateItems(),this.FControls$1=t.TControlList.$create("Create$1"),this},this.Destroy=function(){pas.SysUtils.FreeAndNil({p:this,get:function(){return this.p.FControls$1},set:function(t){this.p.FControls$1=t}}),rtl.free(this,"FItems"),pas["WEBLib.Controls"].TCustomControl.Destroy.call(this)},this.Assign=function(e){t.TTMSFNCBitmapContainer.isPrototypeOf(e)?this.FItems.Assign(rtl.as(e,t.TTMSFNCBitmapContainer).GetItems()):pas["WEBLib.Controls"].TControl.Assign.apply(this,arguments)},this.FindBitmap$1=function(t){var e=null,i=0;for(e=null,t=pas.SysUtils.UpperCase(t),i=1;i<=this.GetItems().GetCount();){if(pas.SysUtils.UpperCase(this.GetItems().GetItemEx(i-1).FName)===t){e=this.GetItems().GetItemEx(i-1).FBitmap;break}i+=1}return e},rtl.addIntf(this,pas["WEBLib.TMSFNCPersistence"].ITMSFNCPersistence),rtl.addIntf(this,pas.System.IUnknown);var e=this.$rtti;e.addProperty("Items",3,t.$rtti.TTMSFNCBitmapCollection,"GetItems","SetItems"),e.addProperty("Version",1,rtl.string,"GetVersion",""),e.addProperty("OnBitmapChanged",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnBitmapChanged","FOnBitmapChanged"),e.attr=[pas.Classes.ComponentPlatformsAttribute,"Create$1",[0]]}))}),["TypInfo","WEBLib.Forms","SysUtils","WEBLib.TMSFNCUtils"]),rtl.module("WEBLib.TMSFNCHTMLEngine",["System","Classes","WEBLib.TMSFNCGraphics","Types","WEBLib.Graphics","WEBLib.TMSFNCTypes","WEBLib.TMSFNCBitmapContainer","WEBLib.TMSFNCGraphicsTypes"],(function(){"use strict";var t=this,e=t.$impl;this.TMSFNCHTMLENGINE_ATTR_DELIM='"';this.HTMLDrawEx$1=function(i,s,n,r,o,a,l,h,F,p,c,u,d,S,C,T,m,g,f,b,y,L,M,E,P,B,D,N,v,O,I,W,A,G,$,R,x,w,k,H,U,j){var V,z,X,K=!1,J="",Y=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),_=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),Z=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),q=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),Q=0,tt=0,et=0,it=0,st=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),nt=0,rt=0,ot=null,at=0,lt=null,ht=0,Ft=null,pt=0,ct=0,ut=null,dt=0,St=0,Ct=0,Tt=null,mt=0,gt=!1,ft=!1,bt=!1,yt=!1,Lt=!1,Mt=!1,Et=0,Pt=0,Bt=0,Dt=0,Nt=0,vt="",Ot="",It="",Wt=pas.Types.TPoint.$new(),At=!1,Gt=!1,$t=!1,Rt=!1,xt=0,wt=0,kt=0,Ht=0,Ut=0,jt=0,Vt=!1,zt=!1,Xt=0,Kt={},Jt=0,Yt=0,_t=0,Zt=0,qt=0,Qt=0,te=0,ee=!1,ie=pas.Types.TRect.$new(),se=pas.Types.TPoint.$new(),ne=0,re=0,oe=0;function ae(i,s,r,o,p,c,D,$,R,w,V,z,X,K,J,Y,_,Q,tt){var et="",st="",nt="",rt="",lt="",ht="",Ft=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),pt=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),ut={},dt=!1,Tt=!1,mt=!1,gt=0,ft=0,yt=0,Ot=0,xt=0,wt=0,kt=0,Ht=0,Ut=0,zt=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),_t=0,te=0,ie=0,ne=0,re=null,ae=!1,le=0,he=0,Fe=0,pe=0,ce=0,ue="",de=!1,Se=pas["WEBLib.TMSFNCTypes"].TPointF.$new(),Ce=pas["WEBLib.TMSFNCTypes"].TPointF.$new(),Te="",me="",ge="",fe="",be="",ye="",Le="";for("","",ce=0,r.Bottom=r.Bottom-D.get(),p.set(0),kt=0,dt=!1,Tt=!1,mt=!1,K.set(!1),J.set(!1),Ft.$assign(r),st="",o||(Ft.Left=Ft.Left+Y),$t&&!o&&(Pt=i.FStroke.FColor,i.FStroke.SetColor(i.FFill.FColor),i.FFill.SetKind(0),i.FStroke.SetKind(1),i.DrawRectangle$2(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(pas["WEBLib.TMSFNCTypes"].RectF(n.Left,r.Top,n.Right,r.Top+c.get())),2));s.get().length>0&&!dt&&!Tt;){for(_t=pas.System.Pos("<",s.get()),te=C?pas.System.Pos(" ",s.get()):0,pe=(et=_t>0&&(te>_t||0===te)?pas.System.Copy(s.get(),1,_t-1):te>0?pas.System.Copy(s.get(),1,te):s.get()).length;pas.System.Pos("&nbsp;",et)>0;)pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.TagReplaceString("&nbsp;"," ",{get:function(){return et},set:function(t){et=t}});for(;pas.System.Pos("&lt;",et)>0;)pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.TagReplaceString("&lt;","<",{get:function(){return et},set:function(t){et=t}});for(;pas.System.Pos("&gt;",et)>0;)pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.TagReplaceString("&gt;",">",{get:function(){return et},set:function(t){et=t}});if(pe>0&&(zt.$assign(i.CalculateText(et,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(pas["WEBLib.TMSFNCTypes"].RectF(0,0,1e4,1e4)),!1,!1)),Ht=zt.Bottom-zt.Top,Gt&&D.get()<Ht/4&&D.set(Ht/4),At&&$.get()<Ht/4&&$.set(Ht/4),Ht>c.get()&&c.set(Ht),E.set(E.get()+et),Vt&&pas.System.Delete(s,1,pe),!Vt)){if(o)Ft.$assign(r),zt.$assign(i.CalculateText(et,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(pas["WEBLib.TMSFNCTypes"].RectF(0,0,1e4,1e4)),!1,!1)),Ft.Right=Ft.Left+(zt.Right-zt.Left),X>Ft.Top&&X<Ft.Bottom&&z>p.get()&&((Xt=0)===pe?pe:Xt),ce=Ft.Right-Ft.Left,p.set(p.get()+ce),z-Ft.Left>=p.get()-ce&&z-Ft.Left<=p.get()&&bt&&(K.set(!0),X>Ft.Top&&(M.set(vt),Lt=!0));else{if(At&&(Ft.Bottom=Ft.Bottom-$.get()),Gt&&(Ft.Bottom=Ft.Bottom+D.get()),Ft.Bottom=Ft.Bottom-R.get(),zt.$assign(i.CalculateText(et,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(pas["WEBLib.TMSFNCTypes"].RectF(0,0,1e4,1e4)),!1,!1)),Ut=zt.Right-zt.Left,-1!==St&&(i.FFill.SetColor(St),i.FStroke.SetColor(St),i.FFill.SetKind(1),i.FStroke.SetKind(1),zt.$assign(i.CalculateText$1("gh")),i.DrawRectangle$2(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(pas["WEBLib.TMSFNCTypes"].RectF(Ft.Left,Ft.Top,Ft.Left+Ut,Ft.Top+(zt.Bottom-zt.Top))),2)),St=-1,Rt&&(pas["WEBLib.TMSFNCTypes"].OffsetRectEx$1(Ft,h,h),i.FFont.SetColor(L),i.DrawText$1(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(Ft),et,!1,1,0,0,0,-1,-1,!1,!1,-1,-1),pas["WEBLib.TMSFNCTypes"].OffsetRectEx$1(Ft,-h,-h),i.FFont.SetColor(at)),ht=""!==et&&" "===et.charAt(et.length-1)&&bt?et+"\0":et,i.FFont.SetColor(ct),i.DrawText$1(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(Ft),ht,!1,1,0,0,0,-1,-1,!1,!1,-1,-1),Ft.Right=Ft.Left+Ut,bt&&N.get()-1===a&&P.set(vt),Mt)for(i.FStroke.SetColor(255),i.FStroke.SetKind(1),i.FStroke.SetWidth(1),ie=(ne=Math.round(Ft.Left/2*2))%4==0?2:0;ne<Ft.Right;)Se.$assign(pas["WEBLib.TMSFNCTypes"].PointF(ne,r.Bottom+ie-1)),ie=2===ie?0:2,Ce.$assign(pas["WEBLib.TMSFNCTypes"].PointF(ne+2,r.Bottom+ie-1)),i.DrawLine$1(pas["WEBLib.TMSFNCTypes"].TPointF.$clone(Se),pas["WEBLib.TMSFNCTypes"].TPointF.$clone(Ce),2,2),ne+=2;Ft.Left=Ft.Right,Ft.Right=r.Right,Ft.Bottom=r.Bottom,Ft.Top=r.Top}de=p.get()<r.Right-r.Left-Qt+1||r.Right-r.Left-Qt<=ce,et,de||!C?(st+=pas.System.Copy(s.get(),1,pe),pas.System.Delete(s,1,pe),et.length>=pe&&" "===pas.System.Copy(et,pe,1)?(zt.$assign(i.CalculateText$1(" ")),kt=zt.Right-zt.Left):kt=0):(dt=!0,p.set(p.get()-ce))}if(1===(_t=pas.System.Pos("<",s.get()))&&s.get().length<=2&&s.set(""),!dt&&1===_t&&s.get().length>2){if("/"===s.get().charAt(1)&&s.get().length>3){var Me=pas.System.upcase(s.get().charAt(2));"A"===Me?(S&&l!==N.get()||o||(i.FFont.SetStyle(rtl.diffSet(i.FFont.FStyle,rtl.createSet(3))),-1!==b&&(St=b),-1!==y&&(ct=y)),u||(ct=at),bt=!1,Lt&&(Z.Bottom=r.Bottom,Z.Right=r.Left+p.get(),r.Top!==Z.Top&&(Z.Left=r.Left,Z.Top=r.Top),O.$assign(Z),v.set(N.get()),Lt=!1),a===N.get()-1&&(q.Right=Ft.Left,q.Bottom=Ft.Bottom-R.get(),zt.$assign(i.CalculateText$1("gh")),q.Top=q.Bottom-(zt.Bottom-zt.Top),pas["WEBLib.TMSFNCTypes"].InflateRectEx(q,1,0))):"E"===Me?o||(Mt=!1):"B"===Me?">"!==s.get().charAt(3)?ct=at:i.FFont.SetStyle(rtl.diffSet(i.FFont.FStyle,rtl.createSet(0))):"S"===Me?"U"===(ue=pas.System.upcase(s.get().charAt(3)))?(At=!1,Gt=!1):"H"===ue?Rt=!1:i.FFont.SetStyle(rtl.diffSet(i.FFont.FStyle,rtl.createSet(2))):"F"===Me?(i.FFont.SetName(ot.FName),i.FFont.SetSize(ot.FSize),o||u||(ct=at,i.FFill.SetColor(Ct))):"H"===Me?o||(ct=Dt,St=Nt,i.FFont.SetStyle(rtl.refSet(Kt)),i.FFill.SetColor(Nt)):"I"===Me?i.FFont.SetStyle(rtl.diffSet(i.FFont.FStyle,rtl.createSet(1))):"L"===Me?dt=!0:"O"===Me?_.set(0):"P"===Me?(dt=!0,o||(i.FFill.SetColor(Et),$t=!1)):"U"===Me?">"!==s.get().charAt(3)&&jt>0?jt-=1:i.FFont.SetStyle(rtl.diffSet(i.FFont.FStyle,rtl.createSet(3))):"R"===Me||"Z"===Me&&(Vt=!1)}else{var Ee=pas.System.upcase(s.get().charAt(1));if("A"===Ee)a!==N.get()||o||(q.Left=Ft.Left,q.Top=Ft.Top),N.set(N.get()+1),S&&l!==N.get()||o||(k&&i.FFont.SetStyle(rtl.unionSet(i.FFont.FStyle,rtl.createSet(3))),-1===b||o||(St=b),-1!==y&&(ct=y)),u||-1!==y&&l===N.get()&&S||(at=ct,ct=f),nt=pas.System.Copy(s.get(),3,pas.System.Pos(">",s.get())-1),rt=pas.System.Copy(nt,pas.System.Pos('"',nt)+1,nt.length),rt=pas.System.Copy(rt,1,pas.System.Pos('"',rt)-1),vt=rt,bt=!0,Z.Left=p.get(),Z.Top=r.Top;else if("B"===Ee){var Pe=ue=pas.System.upcase(s.get().charAt(2));if(">"===Pe)i.FFont.SetStyle(rtl.unionSet(i.FFont.FStyle,rtl.createSet(0)));else if("R"===Pe)dt=!0,E.set(E.get()+"\r");else if("L"===Pe)d||(ct=Bt);else if("O"===Pe&&(yt=0,st+=pas.System.Copy(s.get(),1,pas.System.Pos(">",s.get())),!o&&!u)){if(nt=pas.SysUtils.UpperCase(pas.System.Copy(s.get(),6,pas.System.Pos(">",s.get())-1)),pas.System.Pos("BACKGROUND",nt)>0&&(rt=pas.System.Copy(nt,pas.System.Pos("BACKGROUND",nt)+10,nt.length),rt=pas.System.Copy(rt,pas.System.Pos('"',rt)+1,rt.length),rt=pas.System.Copy(rt,1,pas.System.Pos('"',rt)-1),pas.System.Pos("IDX:",pas.SysUtils.UpperCase(rt))>0&&pas.System.Delete({get:function(){return rt},set:function(t){rt=t}},1,4),re=null,ae=!1,0===pas.System.Pos(":",rt)&&null!=x&&(re=x.FindBitmap$1(rt)),pas.System.Pos("URL://",pas.SysUtils.UpperCase(rt))>0&&(pas.System.Delete({get:function(){return rt},set:function(t){rt=t}},1,6),re=pas["WEBLib.TMSFNCTypes"].TTMSFNCBitmap.CreateFromURL(rt),ae=!0),null!=re)){if(!pas["WEBLib.TMSFNCTypes"].IsBitmapEmpty(re)&&re.GetWidth()>0&&re.GetHeight()>0)for(;yt<n.Bottom-n.Top;){for(ft=0;ft<n.Right-n.Left;)i.DrawBitmap$1(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(pas["WEBLib.TMSFNCTypes"].RectF(Math.round(n.Left+ft),Math.round(n.Top+yt),Math.round(n.Left+ft)+re.GetWidth(),Math.round(n.Top+yt)+re.GetHeight())),re,!0,!1,!0,!1),ft+=re.GetWidth();yt+=re.GetHeight()}ae&&(re=rtl.freeLoc(re))}pas.System.Pos("BGTOPLEFT",nt)>0&&(rt=pas.System.Copy(nt,pas.System.Pos("BGTOPLEFT",nt)+10,nt.length),rt=pas.System.Copy(rt,pas.System.Pos('"',rt)+1,rt.length),rt=pas.System.Copy(rt,1,pas.System.Pos('"',rt)-1),re=null,0===pas.System.Pos(":",rt)&&null!=x&&(re=x.FindBitmap$1(rt)),null!=re&&!pas["WEBLib.TMSFNCTypes"].IsBitmapEmpty(re)&&re.GetWidth()>0&&re.GetHeight()>0&&i.DrawBitmap$1(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(pas["WEBLib.TMSFNCTypes"].RectF(Math.round(n.Left),Math.round(n.Top+yt),Math.round(n.Left)+re.GetWidth(),Math.round(n.Top)+re.GetHeight())),re,!0,!1,!0,!1)),pas.System.Pos("BGTOPRIGHT",nt)>0&&(rt=pas.System.Copy(nt,pas.System.Pos("BGTOPRIGHT",nt)+10,nt.length),rt=pas.System.Copy(rt,pas.System.Pos('"',rt)+1,rt.length),rt=pas.System.Copy(rt,1,pas.System.Pos('"',rt)-1),re=null,0===pas.System.Pos(":",rt)&&null!=x&&(re=x.FindBitmap$1(rt)),null!=re&&!pas["WEBLib.TMSFNCTypes"].IsBitmapEmpty(re)&&re.GetWidth()>0&&re.GetHeight()>0&&i.DrawBitmap$1(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(pas["WEBLib.TMSFNCTypes"].RectF(Math.round(n.Right)-re.GetWidth(),Math.round(n.Top+yt),Math.round(n.Right),Math.round(n.Top)+re.GetHeight())),re,!0,!1,!0,!1)),pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.VarPos("BGCOLOR",nt,{get:function(){return _t},set:function(t){_t=t}})>0&&(rt=pas.System.Copy(nt,_t+5,nt.length),rt=pas.System.Copy(rt,pas.System.Pos('"',rt)+1,rt.length),le=-1,(rt=pas.System.Copy(rt,1,pas.System.Pos('"',rt)-1)).length>0&&(le="#"===rt.charAt(0)?pas["WEBLib.TMSFNCGraphics"].TTMSFNCGraphics.HTMLToColor(rt):pas["WEBLib.TMSFNCGraphics"].TTMSFNCGraphics.TextToColor(pas.SysUtils.LowerCase(rt))),pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.VarPos("BGCOLORTO",nt,{get:function(){return _t},set:function(t){_t=t}})>0?(rt=pas.System.Copy(nt,_t+5,nt.length),rt=pas.System.Copy(rt,pas.System.Pos('"',rt)+1,rt.length),rt=pas.System.Copy(rt,1,pas.System.Pos('"',rt)-1),rt="H",pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.VarPos("DIR",nt,{get:function(){return _t},set:function(t){_t=t}})>0&&(rt=pas.System.Copy(nt,_t+3,nt.length),rt=pas.System.Copy(rt,pas.System.Pos('"',rt)+1,rt.length),rt=pas.System.Copy(rt,1,pas.System.Pos('"',rt)-1)),i.FStroke.SetColor(le)):(Ct=i.FFill.FColor,i.FFill.SetColor(le),Pt=i.FStroke.FColor,i.FStroke.SetColor(le),i.FFill.SetKind(1),i.FStroke.SetKind(1),i.DrawRectangle$2(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(pas["WEBLib.TMSFNCTypes"].RectF(n.Left-2,n.Top,n.Right,n.Bottom)),2),i.FStroke.SetColor(Pt)))}}else if("E"===Ee)o||(Mt=!0);else if("C"===Ee)nt=pas.System.Copy(s.get(),9,pas.System.Pos(">",s.get())-1),Te="",fe="",be="",me="",ge="",ye="",Le="",t.ParseControl(nt,{get:function(){return Te},set:function(t){Te=t}},{get:function(){return fe},set:function(t){fe=t}},{get:function(){return be},set:function(t){be=t}},{get:function(){return me},set:function(t){me=t}},{get:function(){return ge},set:function(t){ge=t}},{get:function(){return ye},set:function(t){ye=t}},{get:function(){return Le},set:function(t){Le=t}}),it=25,""!==ge&&(pas.System.val$8(ge,{get:function(){return it},set:function(t){it=t}},{get:function(){return wt},set:function(t){wt=t}}),0!==wt&&(it=25)),""===me&&"CHECK"!==Te&&"RADIO"!==Te||(pas.System.val$6(me,{get:function(){return gt},set:function(t){gt=t}},{get:function(){return wt},set:function(t){wt=t}}),0===wt&&(Wt.x=gt,Wt.y=Math.round(i.CalculateTextHeight$1("gh"))+10),"CHECK"===Te||"RADIO"===Te?c.set(16):c.set(23),it>25&&c.set(it-2),o||("CHECK"===Te&&(Wt.x=Math.round(16*g)+2,Wt.y=Wt.x,gt=Wt.x,pt.$assign(pas["WEBLib.TMSFNCTypes"].RectF(Ft.Left+1,Ft.Top+(Ft.Bottom-Ft.Top-(Wt.y-2))/2,Ft.Left+Wt.x-1,Ft.Top+(Ft.Bottom-Ft.Top-(Wt.y-2))/2+(Wt.y-2))),pt.$assign(pas["WEBLib.TMSFNCTypes"].RectF(Math.round(pt.Left),Math.round(pt.Top),Math.round(pt.Right),Math.round(pt.Bottom))),i.DrawCheckBox(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(pt),"TRUE"===pas.SysUtils.UpperCase(be),T&&m===fe,!0,1)),"RADIO"===Te&&(Wt.x=Math.round(16*g)+2,Wt.y=Wt.x,gt=Wt.x,pt.$assign(pas["WEBLib.TMSFNCTypes"].RectF(Ft.Left+1,Ft.Top+(Ft.Bottom-Ft.Top-(Wt.y-2))/2,Ft.Left+Wt.x-1,Ft.Top+(Ft.Bottom-Ft.Top-(Wt.y-2))/2+(Wt.y-2))),pt.$assign(pas["WEBLib.TMSFNCTypes"].RectF(Math.round(pt.Left),Math.round(pt.Top),Math.round(pt.Right),Math.round(pt.Bottom))),i.DrawRadioButton(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(pt),"TRUE"===pas.SysUtils.UpperCase(be),T&&m===fe,!0,1)),"BUTTON"===Te&&(Wt.y=22,pt.$assign(pas["WEBLib.TMSFNCTypes"].RectF(Ft.Left+2,Ft.Top+(Ft.Bottom-Ft.Top-Wt.y)/2,Ft.Left+gt-2,Ft.Top+(Ft.Bottom-Ft.Top-Wt.y)/2+Wt.y)),ee=pas["WEBLib.TMSFNCTypes"].PtInRectEx(pt,pas["WEBLib.TMSFNCTypes"].PointF(z,X)),pt.$assign(pas["WEBLib.TMSFNCTypes"].RectF(Math.round(pt.Left),Math.round(pt.Top),Math.round(pt.Right),Math.round(pt.Bottom))),i.DrawButton(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(pt),T&&m===fe,ee,!0,!0,1),pas["WEBLib.TMSFNCTypes"].InflateRectEx(pt,-2,-2),i.DrawText$1(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(pt),be,!1,0,0,0,0,-1,-1,!0,!1,-1,-1))),"BUTTON"===Te&&(Wt.y=22),"COMBO"===Te&&(Wt.y=25),"CHECK"!==Te&&"RADIO"!==Te||(Wt.x=Math.round(16*g)+2,Wt.y=Wt.x),(z-r.Left>p.get()&&z-r.Left<p.get()+Wt.x&&X>Ft.Top&&X<Ft.Top+Wt.y||F&&W.get()===fe)&&(J.set(!0),M.set("ctrl"),Jt=Yt,pt.Left=r.Left+p.get(),pt.Right=pt.Left+Wt.x,pt.Top=Ft.Top,pt.Bottom=Ft.Top+Wt.y,I.$assign(pt),A.set(be),W.set(fe),G.set(Te)),p.get()+Wt.x>r.Right-r.Left&&Wt.x<r.Right-r.Left?Tt=!0:(p.set(p.get()+Wt.x),Ft.Left=Ft.Left+Wt.x,Wt.y>c.get()&&c.set(Wt.y)));else if("H"===Ee){var Be=pas.System.upcase(s.get().charAt(2));"R"===Be?(dt=!0,o||(nt=pas.System.Copy(s.get(),4,pas.System.Pos(">",s.get())-1),le=0,pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.VarPos("COLOR",pas.SysUtils.UpperCase(nt),{get:function(){return _t},set:function(t){_t=t}})>0&&(rt=pas.System.Copy(nt,_t+5,nt.length),rt=pas.System.Copy(rt,pas.System.Pos('"',rt)+1,rt.length),(rt=pas.System.Copy(rt,1,pas.System.Pos('"',rt)-1)).length>0&&(le="#"===rt.charAt(0)?pas["WEBLib.TMSFNCGraphics"].TTMSFNCGraphics.HTMLToColor(rt):pas["WEBLib.TMSFNCGraphics"].TTMSFNCGraphics.TextToColor(pas.SysUtils.LowerCase(rt)))),i.FStroke.SetKind(1),Pt=i.FStroke.FColor,i.FStroke.SetColor(le),Se.$assign(pas["WEBLib.TMSFNCTypes"].PointF(r.Left,Ft.Bottom+1)),Ce.$assign(pas["WEBLib.TMSFNCTypes"].PointF(r.Right,Ft.Bottom+1)),i.FStroke.SetKind(1),i.DrawLine$1(pas["WEBLib.TMSFNCTypes"].TPointF.$clone(Se),pas["WEBLib.TMSFNCTypes"].TPointF.$clone(Ce),2,2),i.FStroke.SetColor(Pt))):"I"===Be&&(o||(Dt=ct,Nt=St,Kt=rtl.refSet(i.FFont.FStyle),St=H,ct=U),i.FFont.SetStyle(rtl.refSet(j)))}else if("I"===Ee)">"===(ue=pas.System.upcase(s.get().charAt(2)))?i.FFont.SetStyle(rtl.unionSet(i.FFont.FStyle,rtl.createSet(1))):"N"===ue?(nt=pas.System.Copy(s.get(),3,pas.System.Pos(">",s.get())-1),rt=pas.System.Copy(nt,pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.IPos("x",nt)+2,nt.length),rt=pas.System.Copy(rt,pas.System.Pos('"',rt)+1,rt.length),rt=pas.System.Copy(rt,1,pas.System.Pos('"',rt)-1),pas.System.val$6(rt,{get:function(){return gt},set:function(t){gt=t}},{get:function(){return wt},set:function(t){wt=t}}),0===wt&&gt>p.get()&&(p.set(gt),Ft.Left=n.Left+gt)):"M"===ue&&(0,0,oe=0,Math.round(i.CalculateTextHeight$1("gh")),Yt+=1,pt.$assign(Ft),nt=pas.System.Copy(s.get(),3,pas.System.Pos(">",s.get())-1),rt=pas.System.Copy(nt,pas.System.Pos("SRC",pas.SysUtils.UpperCase(nt))+4,nt.length),rt=pas.System.Copy(rt,pas.System.Pos('"',rt)+1,rt.length),rt=pas.System.Copy(rt,1,pas.System.Pos('"',rt)-1),nt=pas.SysUtils.UpperCase(nt),pas.System.Pos("ALT",nt)>0&&Jt===Yt&&(rt=pas.System.Copy(nt,pas.System.Pos("ALT",nt)+4,nt.length),rt=pas.System.Copy(rt,pas.System.Pos('"',rt)+1,rt.length),rt=pas.System.Copy(rt,1,pas.System.Pos('"',rt)-1)),he=0,Fe=0,pas.System.Pos("WIDTH",nt)>0&&(lt=pas.System.Copy(nt,pas.System.Pos("WIDTH",nt)+6,nt.length),lt=pas.System.Copy(lt,pas.System.Pos('"',lt)+1,lt.length),lt=pas.System.Copy(lt,1,pas.System.Pos('"',lt)-1),pas.System.val$6(lt,{get:function(){return he},set:function(t){he=t}},{get:function(){return wt},set:function(t){wt=t}})),pas.System.Pos("HEIGHT",nt)>0&&(lt=pas.System.Copy(nt,pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.IPos("HEIGHT",nt)+7,nt.length),lt=pas.System.Copy(lt,pas.System.Pos('"',lt)+1,lt.length),lt=pas.System.Copy(lt,1,pas.System.Pos('"',lt)-1),pas.System.val$6(lt,{get:function(){return Fe},set:function(t){Fe=t}},{get:function(){return wt},set:function(t){wt=t}})),pas.System.Pos("ALIGN",nt)>0&&(lt=pas.System.Copy(nt,pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.IPos("ALIGN",nt)+6,nt.length),lt=pas.System.Copy(lt,pas.System.Pos('"',lt)+1,lt.length),"MIDDLE"===(lt=pas.System.Copy(lt,1,pas.System.Pos('"',lt)-1))&&1,"TOP"===lt&&2),pas.System.Pos("FLOAT",nt)>0&&(lt=pas.System.Copy(nt,pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.IPos("FLOAT",nt)+6,nt.length),lt=pas.System.Copy(lt,pas.System.Pos('"',lt)+1,lt.length),"LEFT"===(lt=pas.System.Copy(lt,1,pas.System.Pos('"',lt)-1))&&(oe=1,pt.Left=n.Left),"RIGHT"===lt&&(oe=2)),Wt.x=0,Wt.y=0,pas.System.Pos("IDX:",pas.SysUtils.UpperCase(rt))>0&&pas.System.Delete({get:function(){return rt},set:function(t){rt=t}},1,4),re=null,ae=!1,0===pas.System.Pos(":",rt)&&null!=x&&(re=x.FindBitmap$1(rt)),pas.System.Pos("URL://",pas.SysUtils.UpperCase(rt))>0&&(pas.System.Delete({get:function(){return rt},set:function(t){rt=t}},1,6),re=pas["WEBLib.TMSFNCTypes"].TTMSFNCBitmap.CreateFromURL(rt),ae=!0),pas.System.Pos("DATA:",pas.SysUtils.UpperCase(rt))>0&&pas.System.Pos("BASE64,",pas.SysUtils.UpperCase(rt))>0&&(pas.System.Delete({get:function(){return rt},set:function(t){rt=t}},1,pas.System.Pos("BASE64,",pas.SysUtils.UpperCase(rt))+6),re=pas["WEBLib.TMSFNCTypes"].TTMSFNCBitmap.$create("Create$3"),pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.LoadBitmapFromBase64(rt,re,!1),ae=!0),Ot=0,xt=0,null!=re&&(pas["WEBLib.TMSFNCTypes"].IsBitmapEmpty(re)||(he>0&&Fe>0&&(Ot=he,xt=Fe),he>0&&0===Fe&&(Ot=he,xt=Math.round(he/re.GetWidth()*re.GetHeight())),0===he&&Fe>0&&(Ot=Math.round(Fe/re.GetHeight()*re.GetWidth()),xt=Fe),0===he&&0===Fe&&(Ot=re.GetWidth(),xt=re.GetHeight()),2===oe&&(pt.Left=r.Right-Ot),o||(he>0||Fe>0?i.DrawBitmap$1(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(pas["WEBLib.TMSFNCTypes"].RectF(Math.round(pt.Left),Math.round(pt.Top),Math.round(pt.Left)+Ot,Math.round(pt.Top)+xt)),re,!0,!1,!0,!1):he>0&&0===Fe?i.DrawBitmap$1(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(pas["WEBLib.TMSFNCTypes"].RectF(Math.round(pt.Left),Math.round(pt.Top),Math.round(pt.Left)+he,Math.round(pt.Top)+Fe)),re,!0,!1,!0,!1):i.DrawBitmap$1(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(pas["WEBLib.TMSFNCTypes"].RectF(Math.round(pt.Left),Math.round(pt.Top),Math.round(pt.Left)+re.GetWidth(),Math.round(pt.Top)+re.GetHeight())),re,!0,!1,!0,!1)),he>0||Fe>0?(Wt.x=Ot,Wt.y=xt):(Wt.x=re.GetWidth(),Wt.y=re.GetHeight())),ae&&(re=rtl.freeLoc(re))),z-r.Left>p.get()&&z-r.Left<p.get()+Wt.x&&X>Ft.Top&&X<Ft.Top+Wt.y&&bt&&(J.set(!0),M.set(vt),Jt=Yt),p.get()+Wt.x>r.Right-r.Left&&Wt.x<r.Right-r.Left?Tt=!0:(p.set(p.get()+Wt.x+2),Ft.Left=Ft.Left+Wt.x+2,Wt.y>c.get()&&c.set(Wt.y)),pas.System.Pos("ALIGN",nt)>0&&(pas.System.Pos('"TOP',nt)>0?(zt.$assign(i.CalculateText$1("gh")),R.set(c.get()-(zt.Bottom-zt.Top))):pas.System.Pos('"MIDDLE',nt)>0&&(zt.$assign(i.CalculateText$1("gh")),R.set((c.get()-(zt.Bottom-zt.Top))/2))),pas.System.Pos("WRAP",nt)>0&&(zt.$assign(i.CalculateText$1("gh")),c.set(zt.Bottom-zt.Top),R.set(0)),1===oe&&(zt.$assign(i.CalculateText$1("gh")),R.set(c.get()-(zt.Bottom-zt.Top)),Q.Left=Ot,Q.Bottom=xt,o||(zt.$assign(i.CalculateText$1("gh")),c.set(zt.Bottom-zt.Top))),2===oe&&(zt.$assign(i.CalculateText$1("gh")),R.set(c.get()-(zt.Bottom-zt.Top)),Q.Right=Ot,Q.Bottom=xt,o||(zt.$assign(i.CalculateText$1("gh")),c.set(zt.Bottom-zt.Top)),p.set(n.Right)));else if("L"===Ee)le=-1,It="",pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.VarPos(">",s.get(),{get:function(){return _t},set:function(t){_t=t}})>0&&(nt=pas.SysUtils.UpperCase(pas.System.Copy(s.get(),3,_t-1)),pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.VarPos("TYPE",nt,{get:function(){return _t},set:function(t){_t=t}})>0&&(rt=pas.System.Copy(nt,_t+4,nt.length),rt=pas.System.Copy(rt,pas.System.Pos('"',rt)+1,rt.length),rt=pas.System.Copy(rt,1,pas.System.Pos('"',rt)-1),It=rt),pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.VarPos("COLOR",nt,{get:function(){return _t},set:function(t){_t=t}})>0&&(rt=pas.System.Copy(nt,_t+5,nt.length),rt=pas.System.Copy(rt,pas.System.Pos('"',rt)+1,rt.length),(rt=pas.System.Copy(rt,1,pas.System.Pos('"',rt)-1)).length>0&&(le="#"===rt.charAt(0)?pas["WEBLib.TMSFNCGraphics"].TTMSFNCGraphics.HTMLToColor(rt):pas["WEBLib.TMSFNCGraphics"].TTMSFNCGraphics.TextToColor(rt)))),p.set(p.get()+12*jt),mt?Tt=!0:mt=!0,Ft.Left=Ft.Left+12*(jt-1),o||Vt||(""===It?(-1!==le&&(Zt=i.FFont.FColor,ct=le),rt=i.FFont.FName,ut=rtl.refSet(i.FFont.FStyle),i.FFont.SetStyle({}),pas.System.Odd(jt)?i.DrawText$1(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(Ft),"•",!1,1,0,0,0,-1,-1,!1,!1,-1,-1):i.DrawText$1(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(Ft),"o",!1,1,0,0,0,-1,-1,!1,!1,-1,-1),i.FFont.SetName(rt),i.FFont.SetStyle(rtl.refSet(ut)),-1!==le&&(ct=Zt)):(qt=-1,"SQUARE"===It&&(qt=i.FFill.FColor,i.FStroke.SetColor(le),i.FFill.SetColor(le),i.FFill.SetKind(1),i.FStroke.SetKind(1),i.DrawRectangle$2(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(pas["WEBLib.TMSFNCTypes"].RectF(Ft.Left,Ft.Top+2,Ft.Left+8,Ft.Top+10)),2),i.FFill.SetColor(qt)),"CIRCLE"===It&&(qt=i.FFill.FColor,i.FStroke.SetColor(le),i.FFill.SetColor(le),i.FFill.SetKind(1),i.FStroke.SetKind(1),i.DrawEllipse$2(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(pas["WEBLib.TMSFNCTypes"].RectF(Ft.Left,Ft.Top+2,Ft.Left+8,Ft.Top+10)),2),i.FFill.SetColor(qt)))),Ft.Left=Ft.Left+12;else if("U"===Ee)">"!==s.get().charAt(2)?(jt+=1,dt=!0):i.FFont.SetStyle(rtl.unionSet(i.FFont.FStyle,rtl.createSet(3)));else if("O"===Ee)"F"===(ue=pas.System.upcase(s.get().charAt(2)))&&(nt=pas.System.Copy(s.get(),3,pas.System.Pos(">",s.get())-1),rt=pas.System.Copy(nt,pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.IPos("x",nt)+2,nt.length),rt=pas.System.Copy(rt,pas.System.Pos('"',rt)+1,rt.length),rt=pas.System.Copy(rt,1,pas.System.Pos('"',rt)-1),pas.System.val$6(rt,_,{get:function(){return wt},set:function(t){wt=t}}),Ft.Left=_.get(),p.set(_.get()));else if("P"===Ee)pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.VarPos(">",s.get(),{get:function(){return _t},set:function(t){_t=t}})>0&&(nt=pas.SysUtils.UpperCase(pas.System.Copy(s.get(),3,_t-1)),pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.VarPos("ALIGN",nt,{get:function(){return _t},set:function(t){_t=t}})>0&&(rt=pas.System.Copy(nt,_t+5,nt.length),rt=pas.System.Copy(rt,pas.System.Pos('"',rt)+1,rt.length),rt=pas.System.Copy(rt,1,pas.System.Pos('"',rt)-1),pas.System.Pos("RIGHT",rt)>0&&w.set(1),pas.System.Pos("LEFT",rt)>0&&w.set(0),pas.System.Pos("CENTER",rt)>0&&w.set(2)),pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.VarPos("INDENT",nt,{get:function(){return _t},set:function(t){_t=t}})>0&&(rt=pas.System.Copy(nt,_t+6,nt.length),rt=pas.System.Copy(rt,pas.System.Pos('"',rt)+1,rt.length),rt=pas.System.Copy(rt,1,pas.System.Pos('"',rt)-1),V.set(e.IStrToInt(rt))),pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.VarPos("FLOAT",nt,{get:function(){return _t},set:function(t){_t=t}})>0&&(rt=pas.System.Copy(nt,_t+5,nt.length),rt=pas.System.Copy(rt,pas.System.Pos('"',rt)+1,rt.length),"LEFT"===(rt=pas.System.Copy(rt,1,pas.System.Pos('"',rt)-1))&&tt.set(1),"RIGHT"===rt&&tt.set(2),se.$assign(pas.Types.Point(Math.round(r.Left),Math.round(r.Top)))),pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.VarPos("BGCOLOR",nt,{get:function(){return _t},set:function(t){_t=t}})>0&&(rt=pas.System.Copy(nt,_t+5,nt.length),rt=pas.System.Copy(rt,pas.System.Pos('"',rt)+1,rt.length),le=-1,(rt=pas.System.Copy(rt,1,pas.System.Pos('"',rt)-1)).length>0&&(le="#"===rt.charAt(0)?pas["WEBLib.TMSFNCGraphics"].TTMSFNCGraphics.HTMLToColor(rt):pas["WEBLib.TMSFNCGraphics"].TTMSFNCGraphics.TextToColor(rt)),pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.VarPos("BGCOLORTO",nt,{get:function(){return _t},set:function(t){_t=t}})>0?(rt=pas.System.Copy(nt,_t+5,nt.length),rt=pas.System.Copy(rt,pas.System.Pos('"',rt)+1,rt.length),rt=pas.System.Copy(rt,1,pas.System.Pos('"',rt)-1),o||($t=!0,i.FStroke.SetColor(le))):o||($t=!0,Et=i.FFill.FColor,i.FFill.SetColor(le),Pt=i.FStroke.FColor,i.FStroke.SetColor(le),i.FFill.SetKind(1),i.FStroke.SetKind(1),i.DrawRectangle$2(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(pas["WEBLib.TMSFNCTypes"].RectF(n.Left,r.Top,n.Right,r.Bottom)),2))));else if("F"===Ee){if(pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.VarPos(">",s.get(),{get:function(){return _t},set:function(t){_t=t}})>0)if(nt=pas.SysUtils.UpperCase(pas.System.Copy(s.get(),6,_t-6)),pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.VarPos("FACE",nt,{get:function(){return _t},set:function(t){_t=t}})>0&&(rt=pas.System.Copy(nt,_t+4,nt.length),rt=pas.System.Copy(rt,pas.System.Pos('"',rt)+1,rt.length),rt=pas.System.Copy(rt,1,pas.System.Pos('"',rt)-1),i.FFont.SetName(rt)),pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.VarPos(" COLOR",nt,{get:function(){return _t},set:function(t){_t=t}})>0&&!u&&(rt=pas.System.Copy(nt,_t+6,nt.length),rt=pas.System.Copy(rt,pas.System.Pos('"',rt)+1,rt.length),rt=pas.System.Copy(rt,1,pas.System.Pos('"',rt)-1),at=-1!==i.FFill.FColor?i.FFont.FColor:0,rt.length>0&&(ct="#"===rt.charAt(0)?pas["WEBLib.TMSFNCGraphics"].TTMSFNCGraphics.HTMLToColor(rt):pas["WEBLib.TMSFNCGraphics"].TTMSFNCGraphics.TextToColor(rt))),pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.VarPos("BGCOLOR",nt,{get:function(){return _t},set:function(t){_t=t}})>0&&!o&&!u&&(rt=pas.System.Copy(nt,_t+7,nt.length),rt=pas.System.Copy(rt,pas.System.Pos('"',rt)+1,rt.length),(rt=pas.System.Copy(rt,1,pas.System.Pos('"',rt)-1)).length>0&&(St="#"===rt.charAt(0)?pas["WEBLib.TMSFNCGraphics"].TTMSFNCGraphics.HTMLToColor(rt):pas["WEBLib.TMSFNCGraphics"].TTMSFNCGraphics.TextToColor(rt))),pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.VarPos("STYLE",nt,{get:function(){return _t},set:function(t){_t=t}})>0)rt=pas.System.Copy(nt,_t+5,nt.length),rt=pas.System.Copy(rt,pas.System.Pos("=",rt)+1,rt.length),rt=pas.System.Copy(rt,pas.System.Pos('"',rt)+1,rt.length),pas.System.Pos("FONT-SIZE:",pas.SysUtils.UpperCase(rt))>0&&(pas.System.Delete({get:function(){return rt},set:function(t){rt=t}},1,10),pas.System.Pos("PT",pas.SysUtils.UpperCase(rt))>0&&(rt=pas.SysUtils.Trim(pas.System.Copy(rt,1,pas.System.Pos("PT",pas.SysUtils.UpperCase(rt))-1)),pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.SetFontSize(i.FFont,e.IStrToInt(rt),1)));else if(pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.VarPos("SIZE",nt,{get:function(){return _t},set:function(t){_t=t}})>0){rt=pas.System.Copy(nt,_t+4,nt.length),rt=pas.System.Copy(rt,pas.System.Pos("=",rt)+1,rt.length),rt=pas.System.Copy(rt,pas.System.Pos('"',rt)+1,rt.length),rt=pas.System.Copy(rt,1,pas.System.Pos('"',rt)-1);var De=e.IStrToInt(rt);1===De?pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.SetFontSize(i.FFont,8,1):2===De?pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.SetFontSize(i.FFont,10,1):3===De?pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.SetFontSize(i.FFont,12,1):4===De?pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.SetFontSize(i.FFont,14,1):5===De?pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.SetFontSize(i.FFont,16,1):pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.SetFontSize(i.FFont,e.IStrToInt(rt),1)}}else"S"===Ee?">"===(ue=pas.System.upcase(s.get().charAt(2)))?i.FFont.SetStyle(rtl.unionSet(i.FFont.FStyle,rtl.createSet(2))):"H"===ue?Rt=!0:1===pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.IPos("<SUB>",s.get())?Gt=!0:1===pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.IPos("<SUP>",s.get())&&(At=!0):"R"===Ee?(nt=pas.System.Copy(s.get(),3,pas.System.Pos(">",s.get())-1),rt=pas.System.Copy(nt,pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.IPos("a",nt)+2,nt.length),rt=pas.System.Copy(rt,pas.System.Pos('"',rt)+1,rt.length),rt=pas.System.Copy(rt,1,pas.System.Pos('"',rt)-1)):"Z"===Ee&&(Vt=!0)}pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.VarPos(">",s.get(),{get:function(){return _t},set:function(t){_t=t}})>0&&!Tt?(st+=pas.System.Copy(s.get(),1,_t),pas.System.Delete(s,1,_t)):Tt||pas.System.Delete(s,1,s.get().length)}}return p.set(p.get()-kt),p.get()>B.get()&&B.set(p.get()+2),a===N.get()-1&&bt&&!o&&(q.Right=Ft.Left,q.Bottom=Ft.Bottom,pas["WEBLib.TMSFNCTypes"].InflateRectEx(q,1,0),q.Left=r.Left+1,q.Top=q.Bottom),st}if(bt=!1,Mt=!1,(ot=pas["WEBLib.TMSFNCGraphicsTypes"].TTMSFNCGraphicsFont.$create("Create$2")).AssignSource(i.FFont),at=i.FFont.FColor,(Ft=pas["WEBLib.TMSFNCGraphicsTypes"].TTMSFNCGraphicsFont.$create("Create$2")).AssignSource(i.FFont),pt=i.FFont.FColor,(lt=pas["WEBLib.TMSFNCGraphicsTypes"].TTMSFNCGraphicsFont.$create("Create$2")).AssignSource(i.FFont),ht=i.FFont.FColor,(Tt=pas["WEBLib.TMSFNCGraphicsTypes"].TTMSFNCGraphicsFont.$create("Create$2")).AssignSource(i.FFont),mt=i.FFont.FColor,(ut=pas["WEBLib.TMSFNCGraphicsTypes"].TTMSFNCGraphicsFont.$create("Create$2")).AssignSource(i.FFont),dt=i.FFont.FColor,Bt=i.FFill.FColor,V=i.FStroke.FColor,X=i.FFill.FKind,z=i.FStroke.FKind,Ct=-1,St=-1,Et=-1,$t=!1,Rt=!1,Vt=!1,I.$assign(pas["WEBLib.TMSFNCTypes"].RectF(0,0,0,0)),A.set(""),G.set(""),F||W.set(""),Qt=0,te=0,ne=0,ie.$assign(pas.Types.Rect(0,0,0,0)),K=!1,Y.$assign(n),nt=0,rt=0,B.set(0),D.set(0),N.set(0),xt=0,jt=0,wt=0,E.set(""),P.set(""),v.set(-1),Lt=!1,Yt=0,Jt=-1,pas.System.Pos("&",s)>0){s=pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.UnFixMarkup(s,!0,!0);do{zt=!1,pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.TagReplaceString("&amp;","&",{get:function(){return s},set:function(t){s=t}})&&(zt=!0)}while(zt)}for(s=e.DBTagStrip(s),s=e.UnicodeTagStrip(s),s=e.CRLFStrip(s,!0),0,$.set(0);s.length>0;){ot.AssignSource(ut),at=dt,i.FFont.AssignSource(lt),ct=ht,yt=bt,Ot=vt,Ut=0,Ht=0,kt=0,At=!1,Gt=!1,gt=!1,ft=!1,Q=0,st.$assign(i.CalculateText$1("gh")),et=tt=st.Bottom-st.Top,_t=Yt,s=pas.SysUtils.Trim(s),re=ne,J=ae(i,{get:function(){return s},set:function(t){s=t}},pas["WEBLib.TMSFNCTypes"].TRectF.$clone(Y),!0,{get:function(){return Q},set:function(t){Q=t}},{get:function(){return tt},set:function(t){tt=t}},{get:function(){return Ht},set:function(t){Ht=t}},{get:function(){return Ut},set:function(t){Ut=t}},{get:function(){return kt},set:function(t){kt=t}},{get:function(){return nt},set:function(t){nt=t}},{get:function(){return rt},set:function(t){rt=t}},r,o,{get:function(){return gt},set:function(t){gt=t}},{get:function(){return ft},set:function(t){ft=t}},Qt,{get:function(){return te},set:function(t){te=t}},ie,{get:function(){return ne},set:function(t){ne=t}}),$.set($.get()+1),bt=yt,vt=Ot,lt.AssignSource(i.FFont),ht=i.FFont.FColor,ut.AssignSource(ot),dt=at,tt+=R,_.$assign(Y);var le=nt;2===le?Y.Right-Y.Left-Q>0&&(_.Left=Y.Left+(Y.Right-Y.Left-Q)/2):1===le&&Y.Right-Q>Y.Left&&(_.Left=Y.Right-Q),_.Left=_.Left+rt,_.Right=_.Right+rt,_.Bottom=_.Top+tt+Ht+Ut,p||(ot.AssignSource(Tt),at=mt,i.FFont.AssignSource(Ft),ct=pt,N.set(xt),jt=wt,Yt=_t,ae(i,{get:function(){return J},set:function(t){J=t}},pas["WEBLib.TMSFNCTypes"].TRectF.$clone(_),F,{get:function(){return Q},set:function(t){Q=t}},{get:function(){return tt},set:function(t){tt=t}},{get:function(){return Ht},set:function(t){Ht=t}},{get:function(){return Ut},set:function(t){Ut=t}},{get:function(){return kt},set:function(t){kt=t}},{get:function(){return nt},set:function(t){nt=t}},{get:function(){return rt},set:function(t){rt=t}},r,o,{get:function(){return gt},set:function(t){gt=t}},{get:function(){return ft},set:function(t){ft=t}},Qt,{get:function(){return te},set:function(t){te=t}},ie,{get:function(){return ne},set:function(t){ne=t}}),xt=N.get(),wt=jt,Y.Left=n.Left+ie.Left,Y.Right=n.Right-ie.Right,_.Top>ie.Bottom&&(ie.Left=0,ie.Right=0,Y.Left=n.Left),st.$assign(i.CalculateText$1("gh")),(gt&&o>_.Bottom-kt-(st.Bottom-st.Top)&&o<_.Bottom-kt||ft)&&(K=!0),Qt=te,Ft.AssignSource(i.FFont),pt=ct,Tt.AssignSource(ot),mt=at),0!==ne&&ne!==re?(Y.Left=se.x,Y.Top=se.y,ne=0):(Y.Top=Y.Top+tt+Ht+Ut,D.set(D.get()+tt+Ht+Ut)),Y.Top+et>Y.Bottom+1&&!p&&(s="")}return 0===D.get()&&(st.$assign(i.CalculateText$1("gh")),D.set(st.Bottom-st.Top)),1,i.FStroke.SetKind(z),i.FFill.SetKind(X),i.FStroke.SetColor(V),i.FFill.SetColor(Bt),i.FFont.AssignSource(ot),ot=rtl.freeLoc(ot),Ft=rtl.freeLoc(Ft),lt=rtl.freeLoc(lt),Tt=rtl.freeLoc(Tt),ut=rtl.freeLoc(ut),K},this.ParseControl=function(i,s,n,r,o,a,l,h){var F="",p=0;s.set(""),o.set(""),a.set(""),r.set(""),n.set(""),l.set(""),h.set(""),p=0,e.VarIPos("TYPE=",i,{get:function(){return p},set:function(t){p=t}})>0&&(F=pas.System.Copy(i,p+1,i.length),F=pas.System.Copy(F,pas.System.Pos(t.TMSFNCHTMLENGINE_ATTR_DELIM,F)+1,F.length),F=pas.System.Copy(F,1,pas.System.Pos(t.TMSFNCHTMLENGINE_ATTR_DELIM,F)-1),s.set(pas.SysUtils.UpperCase(F))),e.VarIPos("WIDTH=",i,{get:function(){return p},set:function(t){p=t}})>0&&(F=pas.System.Copy(i,p+1,i.length),F=pas.System.Copy(F,pas.System.Pos(t.TMSFNCHTMLENGINE_ATTR_DELIM,F)+1,F.length),F=pas.System.Copy(F,1,pas.System.Pos(t.TMSFNCHTMLENGINE_ATTR_DELIM,F)-1),o.set(F)),e.VarIPos("HEIGHT=",i,{get:function(){return p},set:function(t){p=t}})>0&&(F=pas.System.Copy(i,p+1,i.length),F=pas.System.Copy(F,pas.System.Pos(t.TMSFNCHTMLENGINE_ATTR_DELIM,F)+1,F.length),F=pas.System.Copy(F,1,pas.System.Pos(t.TMSFNCHTMLENGINE_ATTR_DELIM,F)-1),a.set(F)),e.VarIPos("ID=",i,{get:function(){return p},set:function(t){p=t}})>0&&(F=pas.System.Copy(i,p+1,i.length),F=pas.System.Copy(F,pas.System.Pos(t.TMSFNCHTMLENGINE_ATTR_DELIM,F)+1,F.length),F=pas.System.Copy(F,1,pas.System.Pos(t.TMSFNCHTMLENGINE_ATTR_DELIM,F)-1),n.set(F)),e.VarIPos("VALUE=",i,{get:function(){return p},set:function(t){p=t}})>0&&(F=pas.System.Copy(i,p+1,i.length),F=pas.System.Copy(F,pas.System.Pos(t.TMSFNCHTMLENGINE_ATTR_DELIM,F)+1,F.length),F=pas.System.Copy(F,1,pas.System.Pos(t.TMSFNCHTMLENGINE_ATTR_DELIM,F)-1),r.set(pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.UnFixMarkup(F,!0,!1))),e.VarIPos("PROP=",i,{get:function(){return p},set:function(t){p=t}})>0&&(F=pas.System.Copy(i,p+1,i.length),F=pas.System.Copy(F,pas.System.Pos(t.TMSFNCHTMLENGINE_ATTR_DELIM,F)+1,F.length),F=pas.System.Copy(F,1,pas.System.Pos(t.TMSFNCHTMLENGINE_ATTR_DELIM,F)-1),l.set(pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.UnFixMarkup(F,!0,!1))),e.VarIPos("MAXLEN=",i,{get:function(){return p},set:function(t){p=t}})>0&&(F=pas.System.Copy(i,p+1,i.length),F=pas.System.Copy(F,pas.System.Pos(t.TMSFNCHTMLENGINE_ATTR_DELIM,F)+1,F.length),F=pas.System.Copy(F,1,pas.System.Pos(t.TMSFNCHTMLENGINE_ATTR_DELIM,F)-1),h.set(F))},t.$implcode=function(){e.VarIPos=function(t,e,i){return i.set(pas.System.Pos(t,pas.SysUtils.UpperCase(e))),i.get()},e.IStrToInt=function(t){var e=0,i=0;return pas.System.val$6(t,{get:function(){return i},set:function(t){i=t}},{get:function(){return e},set:function(t){e=t}}),i},e.DBTagStrip=function(t){var e,i="",s=0;return(e=pas.System.Pos("<#",t))>0?(i=pas.System.Copy(t,1,e-1),pas.System.Delete({get:function(){return t},set:function(e){t=e}},1,e),(s=pas.System.Pos(">",t))>0&&pas.System.Delete({get:function(){return t},set:function(e){t=e}},s,1),i+=t):i=t,i},e.HexVal=function(t){return t.length<2?0:((t.charAt(0)>="A"?t.charCodeAt(0)-65+10:t.charCodeAt(0)-48)<<4)+(t.charAt(1)>="A"?t.charCodeAt(1)-65+10:t.charCodeAt(1)-48)},e.UnicodeTagStrip=function(t){var i=0,s=0,n=0,r=0,o="",a="",l=0,h=!1;function F(t,e){var i=0,s=0,n=0;i=n=e?4:3;for(var r=n,o=t.length;r<=o;r++){if(s=r,!(t.charAt(s-1)>="0"&&t.charAt(s-1)<="9")){i=s;break}if(e&&!(t.charAt(s-1)>="A"&&t.charAt(s-1)<="F")&&e&&!(t.charAt(s-1)>="a"&&t.charAt(s-1)<="f")){i=s;break}}return i}a="";do{if(i=pas.System.Pos("&#",t),(n=pas.System.Pos("&&#",t))===i-1&&0!==n&&(i=0),i>0)if(a+=pas.System.Copy(t,1,i-1),pas.System.Delete({get:function(){return t},set:function(e){t=e}},1,i-1),h=1===pas.System.Pos("&#x",t),(s=pas.System.Pos(";",t))>7&&(s=F(t,h)),s>0){if(h){o=pas.System.Copy(t,4,s-4);try{l=e.HexVal(o),r=0}catch(t){l=0}}else o=pas.System.Copy(t,3,s-3),pas.System.val$6(o,{get:function(){return l},set:function(t){l=t}},{get:function(){return r},set:function(t){r=t}});o.length>0&&o.length<=6&&0===r&&(a+=String.fromCharCode(l),pas.System.Delete({get:function(){return t},set:function(e){t=e}},1,s))}else a+="&#",pas.System.Delete({get:function(){return t},set:function(e){t=e}},1,2);else a+=t}while(!(i<=0));return a},e.CRLFStrip=function(t,e){var i="",s=0;i="";for(var n=1,r=t.length;n<=r;n++)s=n,"\r"!==t.charAt(s-1)&&"\n"!==t.charAt(s-1)?i+=t.charAt(s-1):"\r"===t.charAt(s-1)&&e&&(i+="<BR>");return i}}}),["SysUtils","WEBLib.TMSFNCUtils"]),rtl.module("WEBLib.TMSFNCGraphics.General",["System","Classes","WEBLib.TMSFNCGraphicsTypes","Types","WEBLib.Graphics","WEBLib.TMSFNCGraphics","WEBLib.TMSFNCTypes"],(function(){"use strict";rtl.createClass(this,"TTMSFNCGraphicsContextGeneral",pas["WEBLib.TMSFNCGraphics"].TTMSFNCGraphicsContext,(function(){this.$init=function(){pas["WEBLib.TMSFNCGraphics"].TTMSFNCGraphicsContext.$init.call(this),this.FShowAcceleratorChar=!1,this.FOldPenStyle=0,this.FOldPenWidth=0},this.DrawRotatedText=function(t,e,i,s,n,r){var o,a=0,l=0,h=pas["WEBLib.Graphics"].TCanvasRectF.$new();o=i,e.Left,e.Top,t.TextWidth(o),t.TextHeight(o);1===n?a=0:0===n?a=2:2===n&&(a=1);0===r?l=2:1===r?l=0:2===r&&(l=1),h.$assign(pas["WEBLib.Graphics"].CreateCanvasRectF(e.Left,e.Top,e.Right,e.Bottom)),t.TextRect$1(pas["WEBLib.Graphics"].TCanvasRectF.$clone(h),o,!1,!1,a,l)},this.Destroy=function(){pas.System.TObject.Destroy.call(this)},this.GetFillColor=function(){return this.GetCanvas().FBrush.FColor},this.CalculateText=function(t,e,i){var s=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),n=pas["WEBLib.Graphics"].TCanvasRectF.$new();return n.$assign(pas["WEBLib.Graphics"].CreateCanvasRectF(e.Left,e.Top,e.Right,e.Bottom)),n.$assign(this.GetCanvas().TextRect$1(pas["WEBLib.Graphics"].TCanvasRectF.$clone(n),t,i,!0,0,0)),s.$assign(pas["WEBLib.TMSFNCTypes"].RectF(n.Left,n.Top,n.Right,n.Bottom)),s},this.SetTextAngle=function(t,e){var i=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),s=0,n=pas["WEBLib.TMSFNCTypes"].TPointF.$new();return i.$assign(t),0!==e&&(s=pas.Math.DegToRad(e),n.X=i.Left+(i.Right-i.Left)/2,n.Y=i.Top+(i.Bottom-i.Top)/2,this.GetCanvas().Transform(Math.cos(s),Math.sin(s),-Math.sin(s),Math.cos(s),n.X,n.Y),i.Right-i.Left<i.Bottom-i.Top?i.$assign(pas["WEBLib.TMSFNCTypes"].RectF(-(i.Bottom-i.Top)/2,-(i.Right-i.Left)/2,(i.Bottom-i.Top)/2,(i.Right-i.Left)/2)):i.$assign(pas["WEBLib.TMSFNCTypes"].RectF(-(i.Right-i.Left)/2,-(i.Bottom-i.Top)/2,(i.Right-i.Left)/2,(i.Bottom-i.Top)/2))),i},this.Render=function(){},this.SetTextQuality=function(t){},this.SetAntiAliasing=function(t){},this.SetShowAcceleratorChar=function(t){this.FShowAcceleratorChar=t},this.SetSize=function(t,e){},this.ResetTextAngle=function(t){0!==t&&this.GetCanvas().SetTransform(1,0,0,1,0,0)},this.BeginScene=function(){null!=this.GetCanvas()&&(this.GetCanvas().BeginScene(),this.GetCanvas().Clear())},this.EndScene=function(){this.GetCanvas().EndScene()},this.StartSpecialPen=function(){this.FOldPenStyle=this.GetCanvas().FPen.FStyle,this.FOldPenWidth=this.GetCanvas().FPen.FWidth,this.GetCanvas().FPen.FStyle=2,this.GetCanvas().FPen.FWidth=1},this.StopSpecialPen=function(){this.GetCanvas().FPen.FStyle=this.FOldPenStyle,this.GetCanvas().FPen.FWidth=this.FOldPenWidth},this.RestoreState=function(t){null!=t&&(t.FSaveDC=0),this.GetCanvas().Restore(),this.GetCanvas().Refresh()},this.SaveState=function(t){this.GetCanvas().Refresh(),this.GetCanvas().Save()},this.SetFont=function(t){this.GetCanvas().FFont.Assign(t)},this.SetFill=function(t){this.GetCanvas().FBrush.FColor=t.FColor,this.GetCanvas().FBrush.FGradient=0,this.GetCanvas().FBrush.ClearGradient();var e=t.FKind;if(1===e)this.GetCanvas().FBrush.FStyle=0;else if(2===e){this.GetCanvas().FBrush.ClearGradient(),-1!==t.FColorMirror&&-1!==t.FColorMirrorTo?(this.GetCanvas().FBrush.AddGradientColor(t.FColor,0),this.GetCanvas().FBrush.AddGradientColor(t.FColorTo,.5),this.GetCanvas().FBrush.AddGradientColor(t.FColorMirror,.5),this.GetCanvas().FBrush.AddGradientColor(t.FColorMirrorTo,1)):(this.GetCanvas().FBrush.AddGradientColor(t.FColor,0),this.GetCanvas().FBrush.AddGradientColor(t.FColorTo,1));var i=t.FOrientation;0===i?this.GetCanvas().FBrush.FGradient=2:1===i&&(this.GetCanvas().FBrush.FGradient=1)}else 0===e&&(this.GetCanvas().FBrush.FStyle=1)},this.SetFillColor=function(t){this.GetCanvas().FBrush.FColor=t},this.SetStroke=function(t){this.GetCanvas().FPen.SetColor(t.FColor),this.GetCanvas().FPen.FWidth=Math.round(t.FWidth);var e=t.FKind;1===e?this.GetCanvas().FPen.FStyle=0:0===e?this.GetCanvas().FPen.FStyle=5:2===e?this.GetCanvas().FPen.FStyle=1:3===e?this.GetCanvas().FPen.FStyle=2:4===e?this.GetCanvas().FPen.FStyle=3:5===e&&(this.GetCanvas().FPen.FStyle=4)},this.DrawLine=function(t,e,i,s,n){this.GetCanvas().MoveTo$1(e.X,e.Y),this.GetCanvas().LineTo$1(i.X,i.Y)},this.FillRect=function(t,e,i){var s,n=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),r=0,o=0;if(e.$assign(pas["WEBLib.TMSFNCGraphicsTypes"].ModifyRect(e,i)),n.$assign(pas["WEBLib.TMSFNCTypes"].RectF(e.Left,e.Top,e.Right,e.Bottom)),r=-1,o=1,2===t.FKind){if(-1!==t.FColor&&-1!==t.FColorTo)if(-1!==t.FColorMirror&&-1!==t.FColorMirrorTo){var a=t.FOrientation;0===a?(pas["WEBLib.TMSFNCGraphicsTypes"].DrawGradient(this.GetCanvas(),t.FColor,t.FColorTo,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(pas["WEBLib.TMSFNCTypes"].RectF(n.Left,n.Top,n.Left+(n.Right-n.Left)/2,n.Bottom)),0,{},!0),pas["WEBLib.TMSFNCGraphicsTypes"].DrawGradient(this.GetCanvas(),t.FColorMirror,t.FColorMirrorTo,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(pas["WEBLib.TMSFNCTypes"].RectF(n.Left+(n.Right-n.Left)/2,n.Top,n.Right,n.Bottom)),0,{},!0)):1===a&&(pas["WEBLib.TMSFNCGraphicsTypes"].DrawGradient(this.GetCanvas(),t.FColor,t.FColorTo,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(pas["WEBLib.TMSFNCTypes"].RectF(n.Left,n.Top,n.Right,n.Top+(n.Bottom-n.Top)/2)),0,{},!1),pas["WEBLib.TMSFNCGraphicsTypes"].DrawGradient(this.GetCanvas(),t.FColorMirror,t.FColorMirrorTo,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(pas["WEBLib.TMSFNCTypes"].RectF(n.Left,n.Top+(n.Bottom-n.Top)/2,n.Right,n.Bottom)),0,{},!1))}else pas["WEBLib.TMSFNCGraphicsTypes"].DrawGradient(this.GetCanvas(),t.FColor,t.FColorTo,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(n),0,{},0===t.FOrientation);r=this.GetCanvas().FBrush.FColor,o=this.GetCanvas().FBrush.FStyle,this.GetCanvas().FBrush.FStyle=1}s=this.GetCanvas().FPen.FStyle,this.GetCanvas().FPen.FStyle=5,-1!==t.FColor&&1===t.FKind&&this.GetCanvas().Rectangle$3(pas["WEBLib.Graphics"].CreateCanvasRectF(n.Left,n.Top,n.Right,n.Bottom)),this.GetCanvas().FPen.FStyle=s,2===t.FKind&&(this.GetCanvas().FBrush.FColor=r,this.GetCanvas().FBrush.FStyle=o)},this.DrawRect=function(t,e,i,s){var n=pas["WEBLib.TMSFNCTypes"].TRectF.$new();e.$assign(pas["WEBLib.TMSFNCGraphicsTypes"].ModifyRect(e,s)),n.$assign(e),1 in i&&this.DrawLine(t,pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(n.Left,n.Top)),pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(n.Right,n.Top)),2,2),0 in i&&this.DrawLine(t,pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(n.Left,n.Top)),pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(n.Left,n.Bottom)),2,2),3 in i&&this.DrawLine(t,pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(n.Left,n.Bottom)),pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(n.Right,n.Bottom)),2,2),2 in i&&this.DrawLine(t,pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(n.Right,n.Top)),pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(n.Right,n.Bottom)),2,2)},this.FillEllipse=function(t,e,i){var s,n=pas["WEBLib.Graphics"].TCanvasRectF.$new();e.$assign(pas["WEBLib.TMSFNCGraphicsTypes"].ModifyRect(e,i)),n.$assign(pas["WEBLib.Graphics"].CreateCanvasRectF(e.Left,e.Top,e.Right,e.Bottom)),s=this.GetCanvas().FPen.FStyle,this.GetCanvas().FPen.FStyle=5,this.GetCanvas().Ellipse$3(n),this.GetCanvas().FPen.FStyle=s},this.DrawEllipse=function(t,e,i){var s,n,r=pas["WEBLib.Graphics"].TCanvasRectF.$new();e.$assign(pas["WEBLib.TMSFNCGraphicsTypes"].ModifyRect(e,i)),r.$assign(pas["WEBLib.Graphics"].CreateCanvasRectF(e.Left,e.Top,e.Right,e.Bottom)),n=this.GetCanvas().FBrush.FColor,s=this.GetCanvas().FBrush.FStyle,this.GetCanvas().FBrush.FStyle=1,this.GetCanvas().Ellipse$3(r),this.GetCanvas().FBrush.FStyle=s,this.GetCanvas().FBrush.FColor=n},this.DrawBitmap=function(t,e,i,s){this.GetCanvas().StretchDraw$1(pas["WEBLib.Graphics"].TCanvasRectF.$clone(pas["WEBLib.Graphics"].CreateCanvasRectF(i.Left,i.Top,i.Right,i.Bottom)),t)},this.ClipRect=function(t){this.GetCanvas().SetClipRect(pas["WEBLib.Graphics"].CreateCanvasRectF(t.Left,t.Top,t.Right,t.Bottom))},this.DrawFocusRectangle=function(t,e,i,s){var n,r,o=pas["WEBLib.Graphics"].TCanvasRectF.$new();e.$assign(pas["WEBLib.TMSFNCGraphicsTypes"].ModifyRect(e,s)),o.$assign(pas["WEBLib.Graphics"].CreateCanvasRectF(e.Left,e.Top,e.Right,e.Bottom)),n=this.GetCanvas().FBrush.FColor,r=this.GetCanvas().FBrush.FStyle,this.GetCanvas().FBrush.FStyle=1,this.GetCanvas().FPen.SetColor(i),this.StartSpecialPen(),this.GetCanvas().Rectangle$3(o),this.StopSpecialPen(),this.GetCanvas().FBrush.FColor=n,this.GetCanvas().FBrush.FStyle=r},this.DrawText=function(t,e,i,s,n,r,o){var a,l,h=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),F=0,p=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),c=null;if(a=this.GetCanvas().FBrush.FColor,l=this.GetCanvas().FBrush.FStyle,this.GetCanvas().FBrush.FStyle=1,p.$assign(pas["WEBLib.TMSFNCTypes"].RectF(e.Left,e.Top,e.Right,e.Bottom)),i){var u=n;0===u?(h.$assign(this.CalculateText(t,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(e),i)),F=Math.round(h.Bottom-h.Top),p.Top=p.Top+Math.max(0,(p.Bottom-p.Top-F)/2),p.Bottom=Math.max(0,Math.min(Math.round(e.Bottom),p.Top+F))):2===u&&(h.$assign(this.CalculateText(t,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(e),i)),F=Math.round(h.Bottom-h.Top),p.Top=p.Bottom-F,p.Bottom=p.Top+F)}if(0!==o)this.DrawRotatedText(this.GetCanvas(),pas["WEBLib.TMSFNCTypes"].TRectF.$clone(p),t,o,s,n);else{c=pas["WEBLib.TMSFNCGraphicsTypes"].TTMSFNCGraphicsSaveState.$create("Create$1");try{this.SaveState(c),this.ClipRect(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(p));var d=s;if(1===d){var S=n;1===S?this.GetCanvas().TextRect$1(pas["WEBLib.Graphics"].TCanvasRectF.$clone(pas["WEBLib.Graphics"].CreateCanvasRectF(p.Left,p.Top,p.Right,p.Bottom)),t,i,!1,0,0):0===S?this.GetCanvas().TextRect$1(pas["WEBLib.Graphics"].TCanvasRectF.$clone(pas["WEBLib.Graphics"].CreateCanvasRectF(p.Left,p.Top,p.Right,p.Bottom)),t,i,!1,0,2):2===S&&this.GetCanvas().TextRect$1(pas["WEBLib.Graphics"].TCanvasRectF.$clone(pas["WEBLib.Graphics"].CreateCanvasRectF(p.Left,p.Top,p.Right,p.Bottom)),t,i,!1,0,1)}else if(0===d){var C=n;1===C?this.GetCanvas().TextRect$1(pas["WEBLib.Graphics"].TCanvasRectF.$clone(pas["WEBLib.Graphics"].CreateCanvasRectF(p.Left,p.Top,p.Right,p.Bottom)),t,i,!1,2,0):0===C?this.GetCanvas().TextRect$1(pas["WEBLib.Graphics"].TCanvasRectF.$clone(pas["WEBLib.Graphics"].CreateCanvasRectF(p.Left,p.Top,p.Right,p.Bottom)),t,i,!1,2,2):2===C&&this.GetCanvas().TextRect$1(pas["WEBLib.Graphics"].TCanvasRectF.$clone(pas["WEBLib.Graphics"].CreateCanvasRectF(p.Left,p.Top,p.Right,p.Bottom)),t,i,!1,2,1)}else if(2===d){var T=n;1===T?this.GetCanvas().TextRect$1(pas["WEBLib.Graphics"].TCanvasRectF.$clone(pas["WEBLib.Graphics"].CreateCanvasRectF(p.Left,p.Top,p.Right,p.Bottom)),t,i,!1,1,0):0===T?this.GetCanvas().TextRect$1(pas["WEBLib.Graphics"].TCanvasRectF.$clone(pas["WEBLib.Graphics"].CreateCanvasRectF(p.Left,p.Top,p.Right,p.Bottom)),t,i,!1,1,2):2===T&&this.GetCanvas().TextRect$1(pas["WEBLib.Graphics"].TCanvasRectF.$clone(pas["WEBLib.Graphics"].CreateCanvasRectF(p.Left,p.Top,p.Right,p.Bottom)),t,i,!1,1,1)}}finally{this.RestoreState(c)}}this.GetCanvas().FBrush.FColor=a,this.GetCanvas().FBrush.FStyle=l}}))}),["Math"]),rtl.module("WEBLib.TMSFNCGraphics.WEB",["System","Classes","WEBLib.TMSFNCGraphicsTypes","WEBLib.TMSFNCUtils","Types","WEBLib.TMSFNCTypes","WEBLib.TMSFNCGraphics","WEBLib.Graphics"],(function(){"use strict";var t=this;rtl.createClass(this,"TTMSFNCGraphicsContextWEB",pas["WEBLib.TMSFNCGraphics"].TTMSFNCGraphicsContext,(function(){this.$init=function(){pas["WEBLib.TMSFNCGraphics"].TTMSFNCGraphicsContext.$init.call(this),this.FScale=0,this.FNeedsRendering=!1,this.FFont=null,this.FFill=null,this.FStroke=null,this.FContextSize=pas["WEBLib.TMSFNCTypes"].TSizeF.$new(),this.FNCanvas=null,this.FBitmap=null},this.$final=function(){this.FFont=void 0,this.FFill=void 0,this.FStroke=void 0,this.FContextSize=void 0,this.FBitmap=void 0,pas["WEBLib.TMSFNCGraphics"].TTMSFNCGraphicsContext.$final.call(this)},this.DestroyResources=function(){null!=this.FNCanvas&&(this.RestoreContext(),this.FNCanvas=null),null!=this.FBitmap&&(rtl.free(this,"FBitmap"),this.FBitmap=null)},this.DrawTextInternal=function(t,e,i,s,n){var r=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),o=0,a="",l="",h=0,F=0,p=!1,c=0,u=0,d=0,S=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),C=0;function T(t,e){var i,s="",n=0;if(s="",i=t.length,e.get()>i)return s;for(n=e.get();;){if("\n"===t.charAt(n-1)&&"\r"===t.charAt(n-1-1)||"\r"===t.charAt(n-1)&&"\n"===t.charAt(n-1-1)||" "===t.charAt(n-1)){s=" "===t.charAt(n-1)?pas.System.Copy(t,e.get(),n-(e.get()-1)):pas.System.Copy(t,e.get(),n-e.get());break}if("\n"===t.charAt(n-1)||"\r"===t.charAt(n-1)||" "===t.charAt(n-1)){s=pas.System.Copy(t,e.get(),n-(e.get()-1));break}if(n>=i){s=pas.System.Copy(t,e.get(),n-(e.get()-1));break}n+=1}return e.set(n+1),s}if(i){for(S.$assign(e),F=0,o=1,.5*this.FFont.FSize,d=0,C=0,u=0,F+=0,(a=T(t,{get:function(){return o},set:function(t){o=t}})).length>0&&" "===a.charAt(a.length-1)&&(F+=C);o<=t.length&&((h=a.length)>=2&&("\n"===a.charAt(h-1)&&"\r"===a.charAt(h-1-1)||"\r"===a.charAt(h-1)&&"\n"===a.charAt(h-1-1))?(a=pas.System.Copy(a,1,h-2),p=!0):h>=1&&("\n"===a.charAt(h-1)||"\r"===a.charAt(h-1))?(a=pas.System.Copy(a,1,h-1),p=!0):p=!1,l=T(t,{get:function(){return o},set:function(t){o=t}}),!((e.Left+F+0>e.Right||p)&&(""!==a&&(c=a.length,pas.System.Copy(a,1,c),d+=1,F>u&&(u=F),F=0),a="",e.Top=e.Top+0,pas.System.Trunc(e.Top)>pas.System.Trunc(e.Bottom-0)&&!n)));)F+=0,l.length>0&&" "===l.charAt(l.length-1)&&(F+=C),a+=l;""!==a&&(c=a.length,pas.System.Copy(a,1,c),d+=1,F>u&&(u=F)),r.$assign(pas["WEBLib.TMSFNCTypes"].RectF(S.Left,S.Top,S.Left+u,S.Top+0*d))}else;return r},this.DrawLinearGradient=function(t){if(null!=this.FNCanvas){this.FFill.FOrientation;-1!==this.FFill.FColorTo&&-1!==this.FFill.FColorMirror||this.FFill.FColorTo}},this.FontChanged=function(t){},this.FillChanged=function(t){null!=this.FNCanvas&&this.ApplyFill()},this.StrokeChanged=function(t){null!=this.FNCanvas&&this.ApplyStroke()},this.RestoreContext=function(){this.FNCanvas},this.SaveContext=function(){this.FNCanvas},this.ApplyStroke=function(){this.FNCanvas},this.ApplyFill=function(){if(null!=this.FNCanvas)this.FFill.FKind},this.Create$1=function(t){return pas["WEBLib.TMSFNCGraphics"].TTMSFNCGraphicsContext.Create$1.apply(this,arguments),this.FScale=pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.GetDPIScale(null,-1),this.FNeedsRendering=!0,this.FContextSize.cx=0,this.FContextSize.cy=0,this.FFont=pas["WEBLib.TMSFNCGraphicsTypes"].TTMSFNCGraphicsFont.$create("Create$2"),this.FFont.FOnChanged=rtl.createCallback(this,"FontChanged"),this.FStroke=pas["WEBLib.TMSFNCGraphicsTypes"].TTMSFNCGraphicsStroke.$create("Create$1",[1,12632256]),this.FStroke.FOnChanged=rtl.createCallback(this,"StrokeChanged"),this.FFill=pas["WEBLib.TMSFNCGraphicsTypes"].TTMSFNCGraphicsFill.$create("Create$1",[1,16777215,8421504,-1,-1]),this.FFill.FOnChanged=rtl.createCallback(this,"FillChanged"),this},this.Destroy=function(){this.Render(),null!=this.FFont&&(rtl.free(this,"FFont"),this.FFont=null),null!=this.FFill&&(rtl.free(this,"FFill"),this.FFill=null),null!=this.FStroke&&(rtl.free(this,"FStroke"),this.FStroke=null),this.DestroyResources(),pas.System.TObject.Destroy.call(this)},this.GetFillColor=function(){return this.GetGraphics().FFill.FColor},this.CalculateText=function(t,e,i){var s=pas["WEBLib.TMSFNCTypes"].TRectF.$new();return s.$assign(pas["WEBLib.TMSFNCTypes"].RectF(0,0,0,0)),null==this.FNCanvas||(this.SaveContext(),s.$assign(this.DrawTextInternal(t,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(e),i,1,!0)),this.RestoreContext()),s},this.SetTextAngle=function(t,e){var i=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),s=pas["WEBLib.TMSFNCTypes"].TPointF.$new();return i.$assign(t),null==this.FNCanvas||0!==e&&(pas.Math.DegToRad(e),s.X=i.Left+(i.Right-i.Left)/2,s.Y=i.Top+(i.Bottom-i.Top)/2,this.SaveContext(),i.Right-i.Left<i.Bottom-i.Top?i.$assign(pas["WEBLib.TMSFNCTypes"].RectF(-(i.Bottom-i.Top)/2,-(i.Right-i.Left)/2,(i.Bottom-i.Top)/2,(i.Right-i.Left)/2)):i.$assign(pas["WEBLib.TMSFNCTypes"].RectF(-(i.Right-i.Left)/2,-(i.Bottom-i.Top)/2,(i.Right-i.Left)/2,(i.Bottom-i.Top)/2))),i},this.Render=function(){this.FNeedsRendering&&(this.FNeedsRendering=!1,this.DestroyResources())},this.ScaleTransform=function(t,e){this.FNCanvas},this.SetTextQuality=function(t){},this.SetAntiAliasing=function(t){this.FNCanvas},this.SetShowAcceleratorChar=function(t){},this.SetSize=function(t,e){this.FContextSize.cx=t,this.FContextSize.cy=e,this.DestroyResources(),this.FBitmap=pas["WEBLib.Graphics"].TBitmap.$create("Create$3"),this.ScaleTransform(this.FScale,this.FScale),this.SaveContext()},this.ResetTextAngle=function(t){null!=this.FNCanvas&&0!==t&&this.RestoreContext()},this.BeginScene=function(){this.FNCanvas},this.EndScene=function(){null!=this.FNCanvas&&this.Render()},this.RestoreState=function(t){null!=this.FNCanvas&&this.RestoreContext()},this.SaveState=function(t){null!=this.FNCanvas&&this.SaveContext()},this.SetFont=function(t){null!=this.FNCanvas&&this.FFont.AssignSource(t)},this.SetFill=function(t){null!=this.FNCanvas&&this.FFill.Assign(t)},this.SetFillColor=function(t){null!=this.FNCanvas&&this.FFill.SetColor(t)},this.SetStroke=function(t){null!=this.FNCanvas&&this.FStroke.Assign(t)},this.DrawLine=function(t,e,i,s,n){null!=this.FNCanvas&&(this.SaveContext(),this.RestoreContext())},this.FillRect=function(t,e,i){var s=pas["WEBLib.TMSFNCTypes"].TRectF.$new();if(null!=this.FNCanvas){s.$assign(e),this.SaveContext();var n=t.FKind;1===n?this.ApplyFill():2===n&&this.DrawLinearGradient(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(s)),this.RestoreContext()}},this.DrawRect=function(t,e,i,s){var n=pas["WEBLib.TMSFNCTypes"].TRectF.$new();null!=this.FNCanvas&&(n.$assign(e),1 in i&&this.DrawLine(t,pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(n.Left,n.Top)),pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(n.Right,n.Top)),2,2),0 in i&&this.DrawLine(t,pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(n.Left,n.Top)),pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(n.Left,n.Bottom)),2,2),3 in i&&this.DrawLine(t,pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(n.Left,n.Bottom)),pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(n.Right,n.Bottom)),2,2),2 in i&&this.DrawLine(t,pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(n.Right,n.Top)),pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(n.Right,n.Bottom)),2,2))},this.FillEllipse=function(t,e,i){var s=pas["WEBLib.TMSFNCTypes"].TRectF.$new();if(null!=this.FNCanvas){s.$assign(e),this.SaveContext();var n=t.FKind;1===n?this.ApplyFill():2===n&&this.DrawLinearGradient(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(s)),this.RestoreContext()}},this.DrawEllipse=function(t,e,i){var s=pas["WEBLib.TMSFNCTypes"].TRectF.$new();null!=this.FNCanvas&&(s.$assign(e),this.SaveContext(),this.ApplyStroke(),this.RestoreContext())},this.DrawBitmap=function(t,e,i,s){var n=pas["WEBLib.TMSFNCTypes"].TRectF.$new();null!=t&&null!=this.FNCanvas&&(this.SaveContext(),n.$assign(i),this.RestoreContext())},this.ClipRect=function(t){null!=this.FNCanvas&&this.SaveContext()},this.DrawFocusRectangle=function(t,e,i,s){this.FNCanvas},this.DrawText=function(t,e,i,s,n,r,o){var a=pas["WEBLib.TMSFNCTypes"].TRectF.$new();if(null!=this.FNCanvas){this.SaveContext(),a.$assign(this.DrawTextInternal(t,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(e),i,s,!0));var l=n;0===l?this.DrawTextInternal(t,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(pas["WEBLib.TMSFNCTypes"].RectF(e.Left,e.Top+(e.Bottom-e.Top-(a.Bottom-a.Top))/2,e.Right,e.Top+(e.Bottom-e.Top-(a.Bottom-a.Top))/2+(a.Bottom-a.Top))),i,s,!1):1===l?this.DrawTextInternal(t,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(pas["WEBLib.TMSFNCTypes"].RectF(e.Left,e.Top,e.Right,e.Top+(a.Bottom-a.Top))),i,s,!1):2===l&&this.DrawTextInternal(t,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(pas["WEBLib.TMSFNCTypes"].RectF(e.Left,e.Bottom-(a.Bottom-a.Top),e.Right,e.Bottom)),i,s,!1),this.RestoreContext()}}})),this.GetNativeContextClass=function(){return t.TTMSFNCGraphicsContextWEB}}),["SysUtils","Math"]),rtl.module("WEBLib.TMSFNCGraphics",["System","Classes","WEBLib.TMSFNCGraphicsTypes","WEBLib.Graphics","JS","WEBLib.TMSFNCBitmapContainer","Types","WEBLib.TMSFNCTypes"],(function(){"use strict";var t=this;this.$rtti.$Class("TTMSFNCGraphics"),rtl.createClass(this,"TTMSFNCGraphicsContext",pas.System.TObject,(function(){this.$init=function(){pas.System.TObject.$init.call(this),this.FGraphics=null},this.$final=function(){this.FGraphics=void 0,pas.System.TObject.$final.call(this)},this.GetCanvas=function(){var t=null;return t=null,null!=this.GetGraphics()&&(t=this.GetGraphics().GetCanvas()),t},this.GetGraphics=function(){return this.FGraphics},this.Create$1=function(t){return this.FGraphics=t,this}})),rtl.createClass(this,"TTMSFNCGraphics",pas.System.TObject,(function(){this.DefaultSelectionFillColor=0,this.DefaultTextFontColor=0,this.DefaultPopupFillColor=0,this.DefaultPopupStrokeColor=0,this.DefaultButtonStrokeColorFocused=0,this.DefaultButtonFillColorFocused=0,this.DefaultButtonStrokeColorDisabled=0,this.DefaultButtonFillColorDisabled=0,this.DefaultButtonStrokeColor=0,this.DefaultButtonFillColor=0,this.$init=function(){pas.System.TObject.$init.call(this),this.FActiveCanvas=null,this.FBlockUpdate=0,this.FNative=!1,this.FContextNative=null,this.FContextGeneral=null,this.FBitmap=null,this.FFill=null,this.FStroke=null,this.FFont=null,this.FHighlightColor=0,this.FOptimizedHTMLDrawing=!1,this.FHighlightTextColor=0,this.FHighlightFontStyles={},this.FURLUnderline=!1,this.FURLColor=0,this.FBitmapContainer=null},this.$final=function(){this.FActiveCanvas=void 0,this.FContextNative=void 0,this.FContextGeneral=void 0,this.FBitmap=void 0,this.FFill=void 0,this.FStroke=void 0,this.FFont=void 0,this.FHighlightFontStyles=void 0,this.FBitmapContainer=void 0,pas.System.TObject.$final.call(this)},this.GetCanvas=function(){return this.FActiveCanvas},this.GetContext=function(){return this.FNative?this.FContextNative:this.FContextGeneral},this.FontChanged=function(t){this.SetFont(rtl.as(t,pas["WEBLib.TMSFNCGraphicsTypes"].TTMSFNCGraphicsFont))},this.FillChanged=function(t){this.SetFill(rtl.as(t,pas["WEBLib.TMSFNCGraphicsTypes"].TTMSFNCGraphicsFill))},this.StrokeChanged=function(t){this.SetStroke(rtl.as(t,pas["WEBLib.TMSFNCGraphicsTypes"].TTMSFNCGraphicsStroke))},this.InitializeDefaultAppearance=function(){this.FURLColor=16711680,this.FURLUnderline=!0,this.SetFill(this.FFill),this.SetStroke(this.FStroke),this.SetFont(this.FFont)},this.InternalCalculateText=function(t,e,i,s){var n=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),r="",o="",a="",l=0,h=0,F=0,p=0,c=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),u=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),d=0,S="",C="",T="";return n.$assign(e),Math.round(n.Right-n.Left)<=0?(n.Bottom=n.Top,n):(""!==t?s&&(pas.System.Pos("</",t)>0||pas.System.Pos("/>",t)>0||pas.System.Pos("<BR>",pas.SysUtils.UpperCase(t))>0)?(c.$assign(pas["WEBLib.TMSFNCTypes"].RectF(0,0,0,0)),l=0,h=0,F=-1,p=-1,a="",o="",r="",d=0,u.$assign(pas["WEBLib.TMSFNCTypes"].RectF(0,0,0,0)),S="",T="",C="",pas["WEBLib.TMSFNCHTMLEngine"].HTMLDrawEx$1(this,t,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(e),0,0,-1,-1,0,!1,!0,!1,!1,!1,!1,i,!1,"",1,this.FURLColor,-1,-1,-1,{get:function(){return r},set:function(t){r=t}},{get:function(){return o},set:function(t){o=t}},{get:function(){return a},set:function(t){a=t}},{get:function(){return l},set:function(t){l=t}},{get:function(){return h},set:function(t){h=t}},{get:function(){return F},set:function(t){F=t}},{get:function(){return p},set:function(t){p=t}},c,u,{get:function(){return S},set:function(t){S=t}},{get:function(){return T},set:function(t){T=t}},{get:function(){return C},set:function(t){C=t}},{get:function(){return d},set:function(t){d=t}},0,this.FBitmapContainer,1,this.FURLUnderline,this.FHighlightColor,this.FHighlightTextColor,rtl.refSet(this.FHighlightFontStyles)),h+=1,n.Right=n.Left+l,n.Bottom=n.Top+h):(n.$assign(this.GetContext().CalculateText(t,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(e),i)),n.Bottom=n.Bottom+1):(n.Right=n.Left,n.Bottom=n.Top),n)},this.InternalDrawText=function(t,e,i,s,n,r,o,a,l,h,F,p,c,u,d,S){var C,T="",m="",g="",f="",b=0,y=0,L=0,M=0,E=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),P=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),B=0,D=0,N=0,v=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),O=!1,I=null;if(C=this.GetContext().GetFillColor(),this.GetContext().SetFillColor(this.FFont.FColor),p>-1&&t.Bottom-t.Top<p&&(t.Bottom=t.Top+p),F>-1&&t.Right-t.Left<F&&(t.Right=t.Left+F),t.$assign(this.GetContext().SetTextAngle(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(t),h)),T="",(pas.System.Pos("</",e)>0||pas.System.Pos("/>",e)>0||pas.System.Pos("<BR>",pas.SysUtils.UpperCase(e))>0)&&c){if(E.$assign(pas["WEBLib.TMSFNCTypes"].RectF(0,0,0,0)),b=0,y=0,L=-1,M=-1,f="",g="",m="",N=0,P.$assign(pas["WEBLib.TMSFNCTypes"].RectF(0,0,0,0)),i.set(""),s.set(""),n.set(""),pas["WEBLib.TMSFNCHTMLEngine"].HTMLDrawEx$1(this,e,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(t),0,0,-1,-1,0,!1,!0,!1,!1,!1,!1,r,!1,"",1,this.FURLColor,-1,-1,-1,{get:function(){return m},set:function(t){m=t}},{get:function(){return g},set:function(t){g=t}},{get:function(){return f},set:function(t){f=t}},{get:function(){return b},set:function(t){b=t}},{get:function(){return y},set:function(t){y=t}},{get:function(){return L},set:function(t){L=t}},{get:function(){return M},set:function(t){M=t}},E,P,i,s,n,{get:function(){return N},set:function(t){N=t}},0,this.FBitmapContainer,1,this.FURLUnderline,this.FHighlightColor,this.FHighlightTextColor,rtl.refSet(this.FHighlightFontStyles)),y+=1,b+=1,r&&N<=1||!r){B=t.Left,D=t.Top;var W=o;0===W?B+=(t.Right-t.Left-b)/2:2===W&&(B=t.Left+(t.Right-t.Left)-b);var A=a;0===A?D+=(t.Bottom-t.Top-y)/2:2===A&&(D=D+(t.Bottom-t.Top)-y),v.$assign(pas["WEBLib.TMSFNCTypes"].RectF(B,D,B+b,D+y))}else v.$assign(t);I=this.SaveState(!0),this.ClipRect(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(t)),O=pas["WEBLib.TMSFNCHTMLEngine"].HTMLDrawEx$1(this,e,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(v),Math.round(d),Math.round(S),-1,-1,0,u,!1,!1,!1,!1,!1,r,!1,"",1,this.FURLColor,-1,-1,-1,{get:function(){return m},set:function(t){m=t}},{get:function(){return g},set:function(t){g=t}},{get:function(){return f},set:function(t){f=t}},{get:function(){return b},set:function(t){b=t}},{get:function(){return y},set:function(t){y=t}},{get:function(){return L},set:function(t){L=t}},{get:function(){return M},set:function(t){M=t}},E,P,i,s,n,{get:function(){return N},set:function(t){N=t}},0,this.FBitmapContainer,1,this.FURLUnderline,this.FHighlightColor,this.FHighlightTextColor,rtl.refSet(this.FHighlightFontStyles)),this.RestoreState(I,!0),O&&(T=m)}else u||this.GetContext().DrawText(e,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(t),r,o,a,l,h);return this.GetContext().ResetTextAngle(h),this.GetContext().SetFillColor(C),T},this.DrawTexture=function(t,e,i){var s=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),n=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),r=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),o=0,a=0;if(!pas["WEBLib.TMSFNCTypes"].IsBitmapEmpty(e)){s.$assign(t);var l=i;if(0===l)n.$assign(pas["WEBLib.TMSFNCTypes"].RectF(t.Left,t.Top,t.Left+e.GetWidth(),t.Top+e.GetHeight())),pas["WEBLib.TMSFNCTypes"].IntersectRectEx$1(r,s,n),this.DrawBitmapPart$1(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(pas["WEBLib.TMSFNCTypes"].RectF(0,0,r.Right-r.Left,r.Bottom-r.Top)),pas["WEBLib.TMSFNCTypes"].TRectF.$clone(pas["WEBLib.TMSFNCTypes"].RectF(n.Left,n.Top,n.Left+(r.Right-r.Left),n.Top+(r.Bottom-r.Top))),e,!1,!1,!1,!1);else if(1===l)n.$assign(pas["WEBLib.TMSFNCTypes"].RectF(0,0,e.GetWidth(),e.GetHeight())),n.$assign(pas["WEBLib.TMSFNCTypes"].RectSnapToPixelEx(pas["WEBLib.TMSFNCTypes"].RectFitIntoEx$1(n,t),1,!1)),this.DrawBitmapPart$1(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(pas["WEBLib.TMSFNCTypes"].RectF(0,0,e.GetWidth(),e.GetHeight())),pas["WEBLib.TMSFNCTypes"].TRectF.$clone(n),e,!1,!0,!1,!1);else if(2===l)this.DrawBitmapPart$1(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(pas["WEBLib.TMSFNCTypes"].RectF(0,0,e.GetWidth(),e.GetHeight())),pas["WEBLib.TMSFNCTypes"].TRectF.$clone(t),e,!1,!0,!1,!1);else if(4===l)for(var h=0,F=pas.System.Trunc((s.Right-s.Left)/e.GetWidth())+1;h<=F;h++){o=h;for(var p=0,c=pas.System.Trunc((s.Bottom-s.Top)/e.GetHeight())+1;p<=c;p++)a=p,n.$assign(pas["WEBLib.TMSFNCTypes"].RectF(s.Left,s.Top,s.Left+e.GetWidth(),s.Top+e.GetHeight())),pas["WEBLib.TMSFNCTypes"].OffsetRectEx$1(n,o*e.GetWidth(),a*e.GetHeight()),pas["WEBLib.TMSFNCTypes"].IntersectRectEx$1(r,s,n),pas["WEBLib.TMSFNCTypes"].IntersectRectEx(r,n)&&this.DrawBitmap$1(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(pas["WEBLib.TMSFNCTypes"].RectF(n.Left,n.Top,n.Left+(r.Right-r.Left),n.Top+(r.Bottom-r.Top))),e,!1,!1,!1,!1)}else 3===l&&(n.$assign(pas["WEBLib.TMSFNCTypes"].RectF(0,0,e.GetWidth(),e.GetHeight())),n.$assign(pas["WEBLib.TMSFNCTypes"].RectSnapToPixelEx(pas["WEBLib.TMSFNCTypes"].RectCenterAtEx(n,t),1,!1)),this.DrawBitmapPart$1(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(pas["WEBLib.TMSFNCTypes"].RectF(0,0,e.GetWidth(),e.GetHeight())),pas["WEBLib.TMSFNCTypes"].TRectF.$clone(n),e,!0,!1,!0,!1))}},this.DrawSVG=function(t,e){return!1,!1},this.Create$1=function(t,e){return this.FNative=e,this.FActiveCanvas=t,e?(this.FContextNative=pas["WEBLib.TMSFNCGraphics.WEB"].GetNativeContextClass().$create("Create$1",[this]),this.FContextNative.SetSize(1,1)):(this.FContextGeneral=pas["WEBLib.TMSFNCGraphics.General"].TTMSFNCGraphicsContextGeneral.$create("Create$1",[this]),this.FContextGeneral.SetSize(1,1)),this.FFill=pas["WEBLib.TMSFNCGraphicsTypes"].TTMSFNCGraphicsFill.$create("Create$1",[1,16777215,8421504,-1,-1]),this.FFill.FOnChanged=rtl.createCallback(this,"FillChanged"),this.FStroke=pas["WEBLib.TMSFNCGraphicsTypes"].TTMSFNCGraphicsStroke.$create("Create$1",[1,12632256]),this.FStroke.FOnChanged=rtl.createCallback(this,"StrokeChanged"),this.FFont=pas["WEBLib.TMSFNCGraphicsTypes"].TTMSFNCGraphicsFont.$create("Create$2"),this.FFont.FOnChanged=rtl.createCallback(this,"FontChanged"),this.FHighlightColor=16711680,this.FHighlightTextColor=16777215,this.FHighlightFontStyles={},this.InitializeDefaultAppearance(),this},this.CreateBitmapCanvas=function(t,e,i,s){return this.FNative=i,this.FBitmap=pas["WEBLib.Graphics"].TBitmap.$create("Create$3"),this.FBitmap.SetWidth(t),this.FBitmap.SetHeight(e),this.FActiveCanvas=this.FBitmap.GetCanvas(),i?(this.FContextNative=pas["WEBLib.TMSFNCGraphics.WEB"].GetNativeContextClass().$create("Create$1",[this]),this.FContextNative.SetSize(t,e)):(this.FContextGeneral=pas["WEBLib.TMSFNCGraphics.General"].TTMSFNCGraphicsContextGeneral.$create("Create$1",[this]),this.FContextGeneral.SetSize(t,e)),this.FFill=pas["WEBLib.TMSFNCGraphicsTypes"].TTMSFNCGraphicsFill.$create("Create$1",[1,16777215,8421504,-1,-1]),this.FFill.FOnChanged=rtl.createCallback(this,"FillChanged"),this.FStroke=pas["WEBLib.TMSFNCGraphicsTypes"].TTMSFNCGraphicsStroke.$create("Create$1",[1,12632256]),this.FStroke.FOnChanged=rtl.createCallback(this,"StrokeChanged"),this.FFont=pas["WEBLib.TMSFNCGraphicsTypes"].TTMSFNCGraphicsFont.$create("Create$2"),this.FFont.FOnChanged=rtl.createCallback(this,"FontChanged"),this.InitializeDefaultAppearance(),this},this.Destroy=function(){null!=this.FContextNative&&(rtl.free(this,"FContextNative"),this.FContextNative=null),null!=this.FContextGeneral&&(rtl.free(this,"FContextGeneral"),this.FContextGeneral=null),null!=this.FFont&&(rtl.free(this,"FFont"),this.FFont=null),null!=this.FFill&&(this.FFill.FOnChanged=null,rtl.free(this,"FFill"),this.FFill=null),null!=this.FStroke&&(this.FStroke.FOnChanged=null,rtl.free(this,"FStroke"),this.FStroke=null),this.FBitmapContainer=null,null!=this.FBitmap&&(rtl.free(this,"FBitmap"),this.FBitmap=null),pas.System.TObject.Destroy.call(this)},this.BeginScene=function(){this.GetContext().BeginScene()},this.EndScene=function(){this.GetContext().EndScene()},this.SetFill=function(t){this.FBlockUpdate>0||(this.FBlockUpdate+=1,this.GetContext().SetFill(t),this.FFill.Assign(t),this.FBlockUpdate-=1)},this.SetStroke=function(t){this.FBlockUpdate>0||(this.FBlockUpdate+=1,this.GetContext().SetStroke(t),this.FStroke.Assign(t),this.FBlockUpdate-=1)},this.RestoreState=function(t,e){e||(this.SetFill(t.FFill),this.SetStroke(t.FStroke),this.SetFont(t.FFont)),this.GetContext().RestoreState(t),t=rtl.freeLoc(t)},this.SetFont=function(t){this.FBlockUpdate>0||(this.FBlockUpdate+=1,this.GetContext().SetFont(t),this.FFont.AssignSource(t),this.FBlockUpdate-=1)},this.DrawLine$1=function(t,e,i,s){-1!==this.FStroke.FColor&&0!==this.FStroke.FKind&&this.GetContext().DrawLine(this.FStroke,pas["WEBLib.TMSFNCTypes"].TPointF.$clone(t),pas["WEBLib.TMSFNCTypes"].TPointF.$clone(e),i,s)},this.DrawFocusRectangle$2=function(t,e,i,s,n,r){var o=pas["WEBLib.TMSFNCTypes"].TRectF.$new();o.$assign(pas["WEBLib.TMSFNCTypes"].RectF(t,e,i,s)),this.GetContext().DrawFocusRectangle(this.FStroke,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(o),n,r)},this.DrawFocusRectangle$3=function(t,e,i){this.DrawFocusRectangle$2(t.Left,t.Top,t.Right,t.Bottom,e,i)},this.DrawRectangle=function(t,e,i,s,n){this.DrawRectangle$1(t,e,i,s,pas["WEBLib.TMSFNCGraphicsTypes"].AllSides,n)},this.DrawRectangle$1=function(t,e,i,s,n,r){var o=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),a=null;if(o.$assign(pas["WEBLib.TMSFNCTypes"].RectF(t,e,i,s)),-1!==this.FFill.FColor&&0!==this.FFill.FKind||3===this.FFill.FKind)if(3===this.FFill.FKind){a=pas["WEBLib.TMSFNCGraphicsTypes"].TTMSFNCGraphicsPath.$create("Create$1");try{a.AddRectangle(o,0,0),this.DrawTexture(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(o),this.FFill.FTexture,this.FFill.FTextureMode)}finally{a=rtl.freeLoc(a)}}else this.GetContext().FillRect(this.FFill,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(o),r);-1!==this.FStroke.FColor&&0!==this.FStroke.FKind&&this.GetContext().DrawRect(this.FStroke,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(o),rtl.refSet(n),r)},this.DrawEllipse=function(t,e,i,s,n){var r=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),o=null;if(r.$assign(pas["WEBLib.TMSFNCTypes"].RectF(t,e,i,s)),-1!==this.FFill.FColor&&0!==this.FFill.FKind||3===this.FFill.FKind)if(3===this.FFill.FKind){o=pas["WEBLib.TMSFNCGraphicsTypes"].TTMSFNCGraphicsPath.$create("Create$1");try{o.AddEllipse(r),this.DrawTexture(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(r),this.FFill.FTexture,this.FFill.FTextureMode)}finally{o=rtl.freeLoc(o)}}else this.GetContext().FillEllipse(this.FFill,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(r),n);-1!==this.FStroke.FColor&&0!==this.FStroke.FKind&&this.GetContext().DrawEllipse(this.FStroke,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(r),n)},this.DrawRectangle$2=function(t,e){this.DrawRectangle(t.Left,t.Top,t.Right,t.Bottom,e)},this.DrawEllipse$2=function(t,e){this.DrawEllipse(t.Left,t.Top,t.Right,t.Bottom,e)},this.DrawBitmapPart=function(e,i,s,n,r,o,a,l,h,F,p,c,u){var d=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),S=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),C=null,T=null;if(d.$assign(pas["WEBLib.TMSFNCTypes"].RectF(r,o,a,l)),S.$assign(pas["WEBLib.TMSFNCTypes"].RectF(e,i,s,n)),!pas["WEBLib.TMSFNCTypes"].RectIsEmpty(d)&&!pas["WEBLib.TMSFNCTypes"].RectIsEmpty(S)&&!this.DrawSVG(h,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(d))){C=t.TTMSFNCGraphics.$create("CreateBitmapCanvas",[Math.round(s-e),Math.round(n-i),this.FNative,!0]);try{C.BeginScene(),C.DrawBitmap(-e,-i,-e+C.FBitmap.GetWidth(),-i+C.FBitmap.GetHeight(),h,!1,!1,!1,!1),C.EndScene(),T=pas["WEBLib.TMSFNCTypes"].TTMSFNCBitmap.$create("Create$3");try{T.Assign(C.FBitmap),this.DrawBitmap$1(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(d),T,F,p,c,u)}finally{T=rtl.freeLoc(T)}}finally{C=rtl.freeLoc(C)}}},this.DrawBitmapPart$1=function(t,e,i,s,n,r,o){this.DrawBitmapPart(t.Left,t.Top,t.Right,t.Bottom,e.Left,e.Top,e.Right,e.Bottom,i,s,n,r,o)},this.DrawBitmap=function(t,e,i,s,n,r,o,a,l){var h=pas["WEBLib.TMSFNCTypes"].TRectF.$new();null!=n&&(h.$assign(pas["WEBLib.TMSFNCTypes"].RectF(t,e,i,s)),h.$assign(this.GetBitmapDrawRectangle$1(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(h),n,r,o,a,l)),this.DrawSVG(n,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(h))||this.GetContext().DrawBitmap(pas["WEBLib.TMSFNCTypes"].BitmapToDrawBitmap(n),pas["WEBLib.TMSFNCTypes"].TRectF.$clone(pas["WEBLib.TMSFNCTypes"].RectF(0,0,n.GetWidth(),n.GetHeight())),pas["WEBLib.TMSFNCTypes"].TRectF.$clone(h),1))},this.DrawBitmap$1=function(t,e,i,s,n,r){this.DrawBitmap(t.Left,t.Top,t.Right,t.Bottom,e,i,s,n,r)},this.DrawCheckBox=function(t,e,i,s,n){var r=0,o=pas["WEBLib.TMSFNCTypes"].TRectF.$new();o.$assign(t),pas["WEBLib.TMSFNCTypes"].InflateRectEx(o,-1,-1),r=s?i?11829830:0:11119017,this.FFill.SetKind(1),s?this.FFill.SetColor(pas["WEBLib.TMSFNCGraphicsTypes"].Lighter(13882323,85)):this.FFill.SetColor(13882323),this.FStroke.SetWidth(1),this.FStroke.SetKind(1),this.FStroke.SetColor(r),this.DrawRectangle$2(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(o),2),pas["WEBLib.TMSFNCTypes"].InflateRectEx(o,-(o.Right-o.Left)/5,-(o.Bottom-o.Top)/5),this.FStroke.SetWidth(2),this.FStroke.SetColor(r),e&&(this.DrawLine$1(pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(o.Left,o.Top)),pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(o.Right-1,o.Bottom-1)),2,2),this.DrawLine$1(pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(o.Right-1,o.Top)),pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(o.Left,o.Bottom-1)),2,2))},this.DrawButton=function(e,i,s,n,r,o){var a=pas["WEBLib.TMSFNCTypes"].TRectF.$new();a.$assign(e),this.FStroke.SetKind(1),this.FStroke.SetWidth(1),this.FFill.SetKind(1),r?n?s?(this.FStroke.SetColor(t.TTMSFNCGraphics.DefaultButtonStrokeColorFocused),this.FFill.SetColor(t.TTMSFNCGraphics.DefaultButtonFillColorFocused)):(this.FStroke.SetColor(t.TTMSFNCGraphics.DefaultButtonStrokeColor),this.FFill.SetColor(t.TTMSFNCGraphics.DefaultButtonFillColor)):(this.FStroke.SetColor(t.TTMSFNCGraphics.DefaultButtonStrokeColorDisabled),this.FFill.SetColor(t.TTMSFNCGraphics.DefaultButtonFillColorDisabled)):n?s?(this.FStroke.SetColor(pas["WEBLib.TMSFNCGraphicsTypes"].MakeGraphicsColor(60,127,177)),this.FFill.SetColor(pas["WEBLib.TMSFNCGraphicsTypes"].MakeGraphicsColor(229,241,251))):(this.FStroke.SetColor(11119017),this.FFill.SetColor(pas["WEBLib.TMSFNCGraphicsTypes"].MakeGraphicsColor(225,225,225))):(this.FStroke.SetColor(11119017),this.FFill.SetColor(13882323)),this.DrawRectangle$2(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(a),2),pas["WEBLib.TMSFNCTypes"].InflateRectEx(a,-1,-1),this.FFill.SetKind(0),i?this.FStroke.SetColor(pas["WEBLib.TMSFNCGraphicsTypes"].Lighter(this.FStroke.FColor,40)):this.FStroke.SetColor(this.FFill.FColor),this.DrawRectangle$2(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(a),2)},this.DrawRadioButton=function(t,e,i,s,n){var r=0,o=pas["WEBLib.TMSFNCTypes"].TRectF.$new();o.$assign(t),pas["WEBLib.TMSFNCTypes"].InflateRectEx(o,-1,-1),r=s?i?11829830:0:11119017,this.FFill.SetKind(1),s?this.FFill.SetColor(pas["WEBLib.TMSFNCGraphicsTypes"].Lighter(13882323,85)):this.FFill.SetColor(13882323),this.FStroke.SetKind(1),this.FStroke.SetWidth(1),this.FStroke.SetColor(r),this.DrawEllipse$2(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(o),2),pas["WEBLib.TMSFNCTypes"].InflateRectEx(o,-(o.Right-o.Left)/5,-(o.Bottom-o.Top)/5),this.FFill.SetKind(1),this.FFill.SetColor(r),e&&this.DrawEllipse$2(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(o),2)},this.GetBitmapDrawRectangle=function(t,e,i,s,n,r,o,a,l){var h=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),F=null,p=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),c=0,u=0,d=0,S=0;return h.$assign(pas["WEBLib.TMSFNCTypes"].RectF(0,0,0,0)),null!=(F=n)&&(d=0,S=0,c=0,u=0,this.$class.GetAspectSize({get:function(){return c},set:function(t){c=t}},{get:function(){return u},set:function(t){u=t}},F.GetWidth(),F.GetHeight(),i-t,s-e,r,o,l),(a||l)&&(d=Math.round((i-t-c)/2),S=Math.round((s-e-u)/2)),p.$assign(pas["WEBLib.TMSFNCTypes"].RectF(t+d,e+S,t+d+c,e+S+u)),h.$assign(p)),h},this.GetBitmapDrawRectangle$1=function(t,e,i,s,n,r){var o=pas["WEBLib.TMSFNCTypes"].TRectF.$new();return o.$assign(this.GetBitmapDrawRectangle(t.Left,t.Top,t.Right,t.Bottom,e,i,s,n,r)),o},this.ClipRect=function(t){this.GetContext().ClipRect(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(t))},this.CalculateTextHeight=function(t,e,i,s){var n=pas["WEBLib.TMSFNCTypes"].TRectF.$new();return n.$assign(this.CalculateText(t,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(e),i,s)),n.Bottom-n.Top};var e=["<BR>","<BR/>"];this.CalculateText=function(t,i,s,n){var r=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),o=null,a=0,l=0,h=0,F=!1,p=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),c=0;if(r.$assign(i),F=this.FOptimizedHTMLDrawing&&pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.IsHTML(t)){for(a=0;a<=1;a++)h=pas.System.Pos(e[a],pas.SysUtils.UpperCase(t)),l=e[a].length;if(h>0&&l>0){o=pas.Classes.TStringList.$create("Create$1");try{o.SetLineBreak(pas.System.Copy(t,h,l)),o.SetTextStr(t),c=0;for(var u=0,d=o.GetCount()-1;u<=d;u++)a=u,p.$assign(this.InternalCalculateText(o.Get(a),pas["WEBLib.TMSFNCTypes"].TRectF.$clone(i),s,n)),c+=p.Bottom-p.Top;r.Bottom=r.Top+c}finally{o=rtl.freeLoc(o)}}else F=!1}return F||r.$assign(this.InternalCalculateText(t,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(i),s,n)),r},this.CalculateTextHeight$1=function(t){return this.CalculateTextHeight(t,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(pas["WEBLib.TMSFNCTypes"].RectF(0,0,1e4,1e4)),!1,!0)},this.CalculateText$1=function(t){var e=pas["WEBLib.TMSFNCTypes"].TRectF.$new();return e.$assign(this.CalculateText(t,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(pas["WEBLib.TMSFNCTypes"].RectF(0,0,1e4,1e4)),!1,!0)),e},this.DrawText$1=function(t,e,i,s,n,r,o,a,l,h,F,p,c){var u="",d="",S="";return u="",d="",S="",this.DrawText$5(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(t),e,{get:function(){return u},set:function(t){u=t}},{get:function(){return d},set:function(t){d=t}},{get:function(){return S},set:function(t){S=t}},i,s,n,r,o,a,l,h,F,p,c)};var i=["<BR>","<BR/>"];this.DrawText$5=function(t,e,s,n,r,o,a,l,h,F,p,c,u,d,S,C){var T="",m=null,g=0,f=0,b=0,y=!1,L=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),M=pas["WEBLib.TMSFNCTypes"].TRectF.$new();if(M.$assign(t),y=(y=!d&&this.FOptimizedHTMLDrawing)&&pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.IsHTML(e)){for(g=0;g<=1;g++)b=pas.System.Pos(i[g],pas.SysUtils.UpperCase(e)),f=i[g].length;if(b>0&&f>0){m=pas.Classes.TStringList.$create("Create$1");try{m.SetLineBreak(pas.System.Copy(e,b,f)),m.SetTextStr(e);for(var E=0,P=m.GetCount()-1;E<=P;E++)g=E,L.$assign(this.CalculateText(m.Get(g),pas["WEBLib.TMSFNCTypes"].TRectF.$clone(M),o,u)),this.InternalDrawText(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(pas["WEBLib.TMSFNCTypes"].RectF(L.Left,L.Top,L.Right+1,L.Bottom)),m.Get(g),s,n,r,o,a,l,h,F,p,c,u,d,S,C),M.Top=M.Top+(L.Bottom-L.Top),M.Bottom=M.Bottom+(L.Bottom-L.Top)}finally{m=rtl.freeLoc(m)}}else y=!1}return y||(T=this.InternalDrawText(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(t),e,s,n,r,o,a,l,h,F,p,c,u,d,S,C)),T},this.SaveState=function(t){var e=null;return e=pas["WEBLib.TMSFNCGraphicsTypes"].TTMSFNCGraphicsSaveState.$create("Create$1"),t||(e.FFill.Assign(this.FFill),e.FStroke.Assign(this.FStroke),e.FFont.AssignSource(this.FFont)),this.GetContext().SaveState(e),e},this.GetAspectSize=function(t,e,i,s,n,r,o,a,l){var h=0,F=0;o?i>0&&s>0&&n>0&&r>0?i<n&&s<r&&!a?(t.set(i),e.set(s)):i/s<n/r?(e.set(r),t.set(r*i/s)):(t.set(n),e.set(n*s/i)):(t.set(0),e.set(0)):a?(t.set(n),e.set(r)):(t.set(i),e.set(s),l&&(t.get()>=e.get()&&t.get()>0?(e.set(i/t.get()*e.get()),t.set(i)):e.get()>=t.get()&&e.get()>0&&(t.set(s/e.get()*t.get()),e.set(s)),h=0===s?1:i/s,(F=0===e.get()?1:t.get()/e.get())<1||h>F?(e.set(i/F),t.set(i)):(t.set(F*s),e.set(s))))},this.SetDefaultGraphicColors=function(){t.TTMSFNCGraphics.DefaultPopupFillColor=16777215,t.TTMSFNCGraphics.DefaultPopupStrokeColor=12632256,t.TTMSFNCGraphics.DefaultButtonFillColor=pas["WEBLib.TMSFNCGraphicsTypes"].MakeGraphicsColor(225,225,225),t.TTMSFNCGraphics.DefaultButtonStrokeColor=11119017,t.TTMSFNCGraphics.DefaultTextFontColor=0,t.TTMSFNCGraphics.DefaultSelectionFillColor=0,t.TTMSFNCGraphics.DefaultButtonFillColorFocused=pas["WEBLib.TMSFNCGraphicsTypes"].MakeGraphicsColor(229,241,251),t.TTMSFNCGraphics.DefaultButtonStrokeColorFocused=pas["WEBLib.TMSFNCGraphicsTypes"].MakeGraphicsColor(60,127,177),t.TTMSFNCGraphics.DefaultButtonStrokeColorDisabled=11119017,t.TTMSFNCGraphics.DefaultButtonFillColorDisabled=13882323},this.GetColorRed=function(t){return t=pas["WEBLib.Graphics"].ColorToRGB(t),pas["WEBLib.Graphics"].GetRValue(t)},this.GetColorGreen=function(t){return t=pas["WEBLib.Graphics"].ColorToRGB(t),pas["WEBLib.Graphics"].GetGValue(t)},this.GetColorBlue=function(t){return t=pas["WEBLib.Graphics"].ColorToRGB(t),pas["WEBLib.Graphics"].GetBValue(t)};var s=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F"];this.ColorToHTML=function(t){var e,i="";return 1,e=pas["WEBLib.Graphics"].ColorToRGB(t),i="#RRGGBB",i=rtl.setCharAt(i,1,s[this.GetColorRed(e)>>>4]),i=rtl.setCharAt(i,2,s[15&this.GetColorRed(e)]),i=rtl.setCharAt(i,3,s[this.GetColorGreen(e)>>>4]),i=rtl.setCharAt(i,4,s[15&this.GetColorGreen(e)]),i=rtl.setCharAt(i,5,s[this.GetColorBlue(e)>>>4]),i=rtl.setCharAt(i,6,s[15&this.GetColorBlue(e)])},this.HTMLToColor=function(t){var e=0,i=0,s=0,n=0;return e=-1,""===t?e:(4===t.length?(i=pas.SysUtils.StrToInt("$"+pas.System.Copy(t,2,1)+pas.System.Copy(t,2,1)),s=pas.SysUtils.StrToInt("$"+pas.System.Copy(t,3,1)+pas.System.Copy(t,3,1)),n=pas.SysUtils.StrToInt("$"+pas.System.Copy(t,4,1)+pas.System.Copy(t,4,1))):(i=pas.SysUtils.StrToInt("$"+pas.System.Copy(t,2,2)),s=pas.SysUtils.StrToInt("$"+pas.System.Copy(t,4,2)),n=pas.SysUtils.StrToInt("$"+pas.System.Copy(t,6,2))),e=pas["WEBLib.Graphics"].RGB(i,s,n))},this.TextToColor=function(t){var e=0,i=0,s="",n=null;return s=t,s=pas.SysUtils.LowerCase(s),1===pas.System.Pos("cl",s)&&pas.System.Delete({get:function(){return s},set:function(t){s=t}},1,2),1===pas.System.Pos("cla",s)&&pas.System.Delete({get:function(){return s},set:function(t){s=t}},1,3),1===pas.System.Pos("gc",s)&&pas.System.Delete({get:function(){return s},set:function(t){s=t}},1,2),e=0,null!=(n=pas["WEBLib.TMSFNCGraphicsTypes"].ColorLookup())&&(i=n.IndexOf(pas.SysUtils.LowerCase(s)))>=0&&i<=n.GetCount()-1&&(e=n.GetObject(i).FColor),e}})),this.TMSFNCGRAPHICSCLOSE="data:image/PNG;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAACxIAAAsSAdLdfvwAAAAYdEVYdFNvZnR3YXJlAHBhaW50Lm5ldCA0LjAuOWwzfk4AAABVSURBVDhPYxh+QBSI/0OYWAFIThjCxA5ACmAYHeCTQwHYFGITwwuQNSBjkgBFmkGAIgNAGv5BaZINQdYMA0Qbgk0zDBBlCCiR4FMAkhOCMIcJYGAAAHvVMBv6PIFYAAAAAElFTkSuQmCC",this.TMSFNCGRAPHICSDOWN="data:image/PNG;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEwAACxMBAJqcGAAAAGdJREFUOI3tzjsOwjAURNGDUqSgTxU5K2AVrJtswjUsgHSR0qdxAZZFPrS+3ZvRzBsqf9MUtBtazJk+oMe0VTriiZCFX8nbpENMgfARjsn74vKj5IFruhfc8d6zIF9S/Hyk5HS4spMVeFcOjszaOwMAAAAASUVORK5CYII=",this.TMSFNCGRAPHICSDOWN2="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAACxIAAAsSAdLdfvwAAAAZdEVYdFNvZnR3YXJlAHBhaW50Lm5ldCA0LjAuMTZEaa/1AAAAdElEQVQ4T6XMsQ2AMBBD0UxBBwyA2L9jCWpY5bCLSJfgSFgUr+AHX4mIX2R0yOiQ0SGjQ8Ud5q7RClvX5IEDLlhS4/gGvuV/5YEJTuCAR+qYjW/N/81Hko8Mx/QKST0yHJOMCYfDMcnokNEho0NGh4zfRXkAxSYKjdpwcIUAAAAASUVORK5CYII=",this.TMSFNCGRAPHICSUP="data:image/PNG;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEwAACxMBAJqcGAAAAEZJREFUOI3tjLEJACAMwLLo5EM+rTjpXV7g0oI4tYKbgYwJfJ6Txet4iu6Jxk10TTSuQACidzKAIrGik24ZpCPeJ8ky+DhZ1JENPrPndiwAAAAASUVORK5CYII=",this.TMSFNCGRAPHICSUP2="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAACxIAAAsSAdLdfvwAAAAZdEVYdFNvZnR3YXJlAHBhaW50Lm5ldCA0LjAuMTZEaa/1AAAAcklEQVQ4T6XMMQ6AMAiF4S46eSEvremk5/IC+GggKfE1ER2+gZ9AEZFfaMygMYPGDBozaOyshu0aGo0eXmb4hEbw42qGTx4B/HiHCWYYPgmDOWEDPfbmT46uNWEwC/THTp/oLvQwfEFjBo0ZNGbQ+J6UG5Y9CmuVGrAsAAAAAElFTkSuQmCC",this.TMSFNCGRAPHICSPIN="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsIAAA7CARUoSoAAAAAZdEVYdFNvZnR3YXJlAHBhaW50Lm5ldCA0LjAuMTZEaa/1AAABKklEQVQ4T2PAB0JDQ5mjoqIEgUxGiAiRIDo6WiY8PHwdEGvW19czQYUJA6AGhbCwsO9Aek1ISIiZvb09C1QKPwBqaAbi/1DNJ4HYiqDNIE1ADZ9AGqGa/wLp6xERESZAaVQ/AyUUgDgIiOdCbQFrQsL/gPgxUM4OFACSQMYdIP4FFPwNxH+gpqNoAortAYayHNSfjAwgNwMFvaCaMTQA8W+g+M7IyEgNiLuQAMgUoNsDgYruoWkCOe1gcHCwHlQpJgA6wwCo6DySJhD+BDQwCaoEEwA1SQAVzQLiq0BcBMRXgBhk25PAwEBJqDJUkJaWxgr0QzoQbwYqdABGNCeQrQPSDKTv44w3oFPEgYqmAmk9UNqECjMCxWSBeAeUjx1ANWAkZCSD0AADAwDRpKHlJfOjAwAAAABJRU5ErkJggg==",this.TMSFNCGRAPHICSPIN2="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsIAAA7CARUoSoAAAAAZdEVYdFNvZnR3YXJlAHBhaW50Lm5ldCA0LjAuMTZEaa/1AAAA/UlEQVQ4T33Su2oCQRTGcddLYWmlQhTLCBIsQgoLSW2nj2Bj7yv4DGkCeYOQxiaBNJapbCI2ooU+gY3gbf1/w47MjosHfsvM7DlzY1JhGN6TQQGBM2bEOgke8IU60tGY4SYlqWGHT7wgC/PPT/SNoFDxH1owKyclWyrawsYJczwj8JO1tR4+oFX8OGONtpLLWGCPA47Q7H78ogqd06yoPXeg4qQCTfaDR1x3ZxuapYsl3NDWJnjCtUjcThNTuKHL6cPNM2yjhHfMMMQ/tNoGuoNYkeiTwwBjvCKPBlS8QuzFWPoU8QadQ29TY3qbFXxH/Ru2oYKbhww7kSdMXQD8wIToOQZE/AAAAABJRU5ErkJggg==",this.TMSFNCGRAPHICSRIGHT="data:image/PNG;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEwAACxMBAJqcGAAAAFNJREFUOI3tzzsSQFAQRNFDqSezHUuwYBJLsBuhEomE4/ll3HBq+nY1PxENRrS5xzK4L1jPSiISesxPJcORJJqwU9xthjrX/ko4mpBQocN0tf1rbDeZDIfcSud0AAAAAElFTkSuQmCC",this.TMSFNCGRAPHICSLEFT="data:image/PNG;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEwAACxMBAJqcGAAAAEpJREFUOI3lzKENgEAQAMEJBkkIDdDTSxp6gqMyCkB8IQgMFdwZAutn+U19Bi84MUbxhZrBawSXB+8RDDMaDkyvmQyZyYYuOvh6N24uDUKEV//MAAAAAElFTkSuQmCC",this.TMSFNCGRAPHICSEXPAND="data:image/PNG;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAHCAYAAADEUlfTAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAOvwAADr8BOAVTJAAAABh0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMC4zjOaXUAAAACVJREFUGFdj+P//P07MEBYW9h8Xxi8JAjglYACnBAzglMAEDAwARZ1DA4NRF38AAAAASUVORK5CYII=",this.TMSFNCGRAPHICSEXPANDSVG="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMTJweCIgaGVpZ2h0PSIxMnB4IiB2aWV3Qm94PSIwIDAgMTIgMTIiIHZlcnNpb249IjEuMSI+CjxnIGlkPSJzdXJmYWNlMSI+CjxwYXRoIHN0eWxlPSIgc3Ryb2tlOm5vbmU7ZmlsbC1ydWxlOm5vbnplcm87ZmlsbDpyZ2IoMCUsMCUsMCUpO2ZpbGwtb3BhY2l0eToxOyIgZD0iTSAxMS44Mzk4NDQgMi44ODY3MTkgQyAxMS42Mjg5MDYgMi42NzU3ODEgMTEuMjgxMjUgMi42NzU3ODEgMTEuMDcwMzEyIDIuODg2NzE5IEwgNiA3Ljk1NzAzMSBMIDAuOTI5Njg4IDIuODg2NzE5IEMgMC43MTg3NSAyLjY3NTc4MSAwLjM3MTA5NCAyLjY3NTc4MSAwLjE2MDE1NiAyLjg4NjcxOSBDIC0wLjA1NDY4NzUgMy4xMDE1NjIgLTAuMDU0Njg3NSAzLjQ0NTMxMiAwLjE2MDE1NiAzLjY2MDE1NiBMIDUuNjEzMjgxIDkuMTEzMjgxIEMgNS43MTQ4NDQgOS4yMTQ4NDQgNS44NTU0NjkgOS4yNzM0MzggNiA5LjI3MzQzOCBDIDYuMTQ0NTMxIDkuMjczNDM4IDYuMjg1MTU2IDkuMjE0ODQ0IDYuMzg2NzE5IDkuMTEzMjgxIEwgMTEuODM5ODQ0IDMuNjYwMTU2IEMgMTIuMDU0Njg4IDMuNDQ1MzEyIDEyLjA1NDY4OCAzLjEwMTU2MiAxMS44Mzk4NDQgMi44ODY3MTkgWiBNIDExLjgzOTg0NCAyLjg4NjcxOSAiLz4KPC9nPgo8L3N2Zz4K",this.TMSFNCGRAPHICSDOWNSVG="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMTJweCIgaGVpZ2h0PSIxMnB4IiB2aWV3Qm94PSIwIDAgMTIgMTIiIHZlcnNpb249IjEuMSI+CjxnIGlkPSJzdXJmYWNlMSI+CjxwYXRoIHN0eWxlPSIgc3Ryb2tlOm5vbmU7ZmlsbC1ydWxlOm5vbnplcm87ZmlsbDpyZ2IoMCUsMCUsMCUpO2ZpbGwtb3BhY2l0eToxOyIgZD0iTSAxMS44Mzk4NDQgMi44ODY3MTkgQyAxMS42Mjg5MDYgMi42NzU3ODEgMTEuMjgxMjUgMi42NzU3ODEgMTEuMDcwMzEyIDIuODg2NzE5IEwgNiA3Ljk1NzAzMSBMIDAuOTI5Njg4IDIuODg2NzE5IEMgMC43MTg3NSAyLjY3NTc4MSAwLjM3MTA5NCAyLjY3NTc4MSAwLjE2MDE1NiAyLjg4NjcxOSBDIC0wLjA1NDY4NzUgMy4xMDE1NjIgLTAuMDU0Njg3NSAzLjQ0NTMxMiAwLjE2MDE1NiAzLjY2MDE1NiBMIDUuNjEzMjgxIDkuMTEzMjgxIEMgNS43MTQ4NDQgOS4yMTQ4NDQgNS44NTU0NjkgOS4yNzM0MzggNiA5LjI3MzQzOCBDIDYuMTQ0NTMxIDkuMjczNDM4IDYuMjg1MTU2IDkuMjE0ODQ0IDYuMzg2NzE5IDkuMTEzMjgxIEwgMTEuODM5ODQ0IDMuNjYwMTU2IEMgMTIuMDU0Njg4IDMuNDQ1MzEyIDEyLjA1NDY4OCAzLjEwMTU2MiAxMS44Mzk4NDQgMi44ODY3MTkgWiBNIDExLjgzOTg0NCAyLjg4NjcxOSAiLz4KPC9nPgo8L3N2Zz4K",this.TMSFNCGRAPHICSUPSVG="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMTJweCIgaGVpZ2h0PSIxMnB4IiB2aWV3Qm94PSIwIDAgMTIgMTIiIHZlcnNpb249IjEuMSI+CjxnIGlkPSJzdXJmYWNlMSI+CjxwYXRoIHN0eWxlPSIgc3Ryb2tlOm5vbmU7ZmlsbC1ydWxlOm5vbnplcm87ZmlsbDpyZ2IoMCUsMCUsMCUpO2ZpbGwtb3BhY2l0eToxOyIgZD0iTSAxMS44Mzk4NDQgOC4zMzk4NDQgTCA2LjM4NjcxOSAyLjg4NjcxOSBDIDYuMjg1MTU2IDIuNzg1MTU2IDYuMTQ0NTMxIDIuNzI2NTYyIDYgMi43MjY1NjIgQyA1Ljg1NTQ2OSAyLjcyNjU2MiA1LjcxNDg0NCAyLjc4NTE1NiA1LjYxMzI4MSAyLjg4NjcxOSBMIDAuMTYwMTU2IDguMzM5ODQ0IEMgLTAuMDU0Njg3NSA4LjU1NDY4OCAtMC4wNTQ2ODc1IDguODk4NDM4IDAuMTYwMTU2IDkuMTEzMjgxIEMgMC4zNzEwOTQgOS4zMjQyMTkgMC43MTg3NSA5LjMyNDIxOSAwLjkyOTY4OCA5LjExMzI4MSBMIDYgNC4wNDI5NjkgTCAxMS4wNzAzMTIgOS4xMTMyODEgQyAxMS4xNzU3ODEgOS4yMTg3NSAxMS4zMTY0MDYgOS4yNzM0MzggMTEuNDUzMTI1IDkuMjczNDM4IEMgMTEuNTkzNzUgOS4yNzM0MzggMTEuNzM0Mzc1IDkuMjE4NzUgMTEuODM5ODQ0IDkuMTEzMjgxIEMgMTIuMDU0Njg4IDguODk4NDM4IDEyLjA1NDY4OCA4LjU1NDY4OCAxMS44Mzk4NDQgOC4zMzk4NDQgWiBNIDExLjgzOTg0NCA4LjMzOTg0NCAiLz4KPC9nPgo8L3N2Zz4K",this.TMSFNCGRAPHICSRIGHTSVG="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMTJweCIgaGVpZ2h0PSIxMnB4IiB2aWV3Qm94PSIwIDAgMTIgMTIiIHZlcnNpb249IjEuMSI+CjxnIGlkPSJzdXJmYWNlMSI+CjxwYXRoIHN0eWxlPSIgc3Ryb2tlOm5vbmU7ZmlsbC1ydWxlOm5vbnplcm87ZmlsbDpyZ2IoMCUsMCUsMCUpO2ZpbGwtb3BhY2l0eToxOyIgZD0iTSA5LjExMzI4MSA1LjYxMzI4MSBMIDMuNjYwMTU2IDAuMTYwMTU2IEMgMy40NDUzMTIgLTAuMDU0Njg3NSAzLjEwMTU2MiAtMC4wNTQ2ODc1IDIuODg2NzE5IDAuMTYwMTU2IEMgMi42NzU3ODEgMC4zNzEwOTQgMi42NzU3ODEgMC43MTg3NSAyLjg4NjcxOSAwLjkyOTY4OCBMIDcuOTU3MDMxIDYgTCAyLjg4NjcxOSAxMS4wNzAzMTIgQyAyLjY3NTc4MSAxMS4yODEyNSAyLjY3NTc4MSAxMS42Mjg5MDYgMi44ODY3MTkgMTEuODM5ODQ0IEMgMi45OTIxODggMTEuOTQ1MzEyIDMuMTMyODEyIDEyIDMuMjczNDM4IDEyIEMgMy40MTQwNjIgMTIgMy41NTA3ODEgMTEuOTQ1MzEyIDMuNjYwMTU2IDExLjgzOTg0NCBMIDkuMTEzMjgxIDYuMzg2NzE5IEMgOS4yMTQ4NDQgNi4yODUxNTYgOS4yNzM0MzggNi4xNDQ1MzEgOS4yNzM0MzggNiBDIDkuMjczNDM4IDUuODU1NDY5IDkuMjE0ODQ0IDUuNzE0ODQ0IDkuMTEzMjgxIDUuNjEzMjgxIFogTSA5LjExMzI4MSA1LjYxMzI4MSAiLz4KPC9nPgo8L3N2Zz4K",this.TMSFNCGRAPHICSLEFTSVG="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMTJweCIgaGVpZ2h0PSIxMnB4IiB2aWV3Qm94PSIwIDAgMTIgMTIiIHZlcnNpb249IjEuMSI+CjxnIGlkPSJzdXJmYWNlMSI+CjxwYXRoIHN0eWxlPSIgc3Ryb2tlOm5vbmU7ZmlsbC1ydWxlOm5vbnplcm87ZmlsbDpyZ2IoMCUsMCUsMCUpO2ZpbGwtb3BhY2l0eToxOyIgZD0iTSA0LjA0Mjk2OSA2IEwgOS4xMTMyODEgMC45Mjk2ODggQyA5LjMyNDIxOSAwLjcxODc1IDkuMzI0MjE5IDAuMzcxMDk0IDkuMTEzMjgxIDAuMTYwMTU2IEMgOC44OTg0MzggLTAuMDU0Njg3NSA4LjU1NDY4OCAtMC4wNTQ2ODc1IDguMzM5ODQ0IDAuMTYwMTU2IEwgMi44ODY3MTkgNS42MTMyODEgQyAyLjc4NTE1NiA1LjcxNDg0NCAyLjcyNjU2MiA1Ljg1NTQ2OSAyLjcyNjU2MiA2IEMgMi43MjY1NjIgNi4xNDQ1MzEgMi43ODUxNTYgNi4yODUxNTYgMi44ODY3MTkgNi4zODY3MTkgTCA4LjMzOTg0NCAxMS44Mzk4NDQgQyA4LjQ0OTIxOSAxMS45NDUzMTIgOC41ODU5MzggMTIgOC43MjY1NjIgMTIgQyA4Ljg2NzE4OCAxMiA5LjAwNzgxMiAxMS45NDUzMTIgOS4xMTMyODEgMTEuODM5ODQ0IEMgOS4zMjQyMTkgMTEuNjI4OTA2IDkuMzI0MjE5IDExLjI4MTI1IDkuMTEzMjgxIDExLjA3MDMxMiBaIE0gNC4wNDI5NjkgNiAiLz4KPC9nPgo8L3N2Zz4K",this.TMSFNCGRAPHICSCLOSESVG="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB3aWR0aD0iMTJweCIgaGVpZ2h0PSIxMnB4IiB2aWV3Qm94PSIwIDAgMTIgMTIiIHZlcnNpb249IjEuMSI+CjxnIGlkPSJzdXJmYWNlMSI+CjxwYXRoIHN0eWxlPSIgc3Ryb2tlOm5vbmU7ZmlsbC1ydWxlOm5vbnplcm87ZmlsbDpyZ2IoMCUsMCUsMCUpO2ZpbGwtb3BhY2l0eToxOyIgZD0iTSA3LjA2MjUgNiBMIDExLjc4MTI1IDEuMjgxMjUgQyAxMi4wNzQyMTkgMC45ODgyODEgMTIuMDc0MjE5IDAuNTExNzE5IDExLjc4MTI1IDAuMjE4NzUgQyAxMS40ODgyODEgLTAuMDc0MjE4OCAxMS4wMTE3MTkgLTAuMDc0MjE4OCAxMC43MTg3NSAwLjIxODc1IEwgNiA0LjkzNzUgTCAxLjI4MTI1IDAuMjE4NzUgQyAwLjk4ODI4MSAtMC4wNzQyMTg4IDAuNTExNzE5IC0wLjA3NDIxODggMC4yMTg3NSAwLjIxODc1IEMgLTAuMDc0MjE4OCAwLjUxMTcxOSAtMC4wNzQyMTg4IDAuOTg4MjgxIDAuMjE4NzUgMS4yODEyNSBMIDQuOTM3NSA2IEwgMC4yMTg3NSAxMC43MTg3NSBDIC0wLjA3NDIxODggMTEuMDExNzE5IC0wLjA3NDIxODggMTEuNDg4MjgxIDAuMjE4NzUgMTEuNzgxMjUgQyAwLjM2NzE4OCAxMS45MjU3ODEgMC41NTg1OTQgMTIgMC43NSAxMiBDIDAuOTQxNDA2IDEyIDEuMTMyODEyIDExLjkyNTc4MSAxLjI4MTI1IDExLjc4MTI1IEwgNiA3LjA2MjUgTCAxMC43MTg3NSAxMS43ODEyNSBDIDEwLjg2NzE4OCAxMS45MjU3ODEgMTEuMDU4NTk0IDEyIDExLjI1IDEyIEMgMTEuNDQxNDA2IDEyIDExLjYzMjgxMiAxMS45MjU3ODEgMTEuNzgxMjUgMTEuNzgxMjUgQyAxMi4wNzQyMTkgMTEuNDg4MjgxIDEyLjA3NDIxOSAxMS4wMTE3MTkgMTEuNzgxMjUgMTAuNzE4NzUgWiBNIDcuMDYyNSA2ICIvPgo8L2c+Cjwvc3ZnPgo=",t.$init=function(){pas["WEBLib.TMSFNCTypes"].TTMSFNCBitmap.CreateFromResource(t.TMSFNCGRAPHICSCLOSE),pas["WEBLib.TMSFNCTypes"].TTMSFNCBitmap.CreateFromResource(t.TMSFNCGRAPHICSDOWN),pas["WEBLib.TMSFNCTypes"].TTMSFNCBitmap.CreateFromResource(t.TMSFNCGRAPHICSRIGHT),pas["WEBLib.TMSFNCTypes"].TTMSFNCBitmap.CreateFromResource(t.TMSFNCGRAPHICSLEFT),pas["WEBLib.TMSFNCTypes"].TTMSFNCBitmap.CreateFromResource(t.TMSFNCGRAPHICSEXPAND),pas["WEBLib.TMSFNCTypes"].TTMSFNCBitmap.CreateFromResource(t.TMSFNCGRAPHICSPIN),pas["WEBLib.TMSFNCTypes"].TTMSFNCBitmap.CreateFromResource(t.TMSFNCGRAPHICSPIN2),pas["WEBLib.TMSFNCTypes"].TTMSFNCBitmap.CreateFromResource(t.TMSFNCGRAPHICSDOWN),pas["WEBLib.TMSFNCTypes"].TTMSFNCBitmap.CreateFromResource(t.TMSFNCGRAPHICSDOWN2),pas["WEBLib.TMSFNCTypes"].TTMSFNCBitmap.CreateFromResource(t.TMSFNCGRAPHICSUP),pas["WEBLib.TMSFNCTypes"].TTMSFNCBitmap.CreateFromResource(t.TMSFNCGRAPHICSUP2),pas["WEBLib.TMSFNCTypes"].TTMSFNCBitmap.CreateFromResource(t.TMSFNCGRAPHICSEXPANDSVG),pas["WEBLib.TMSFNCTypes"].TTMSFNCBitmap.CreateFromResource(t.TMSFNCGRAPHICSUPSVG),pas["WEBLib.TMSFNCTypes"].TTMSFNCBitmap.CreateFromResource(t.TMSFNCGRAPHICSRIGHTSVG),pas["WEBLib.TMSFNCTypes"].TTMSFNCBitmap.CreateFromResource(t.TMSFNCGRAPHICSLEFTSVG),pas["WEBLib.TMSFNCTypes"].TTMSFNCBitmap.CreateFromResource(t.TMSFNCGRAPHICSDOWNSVG),pas["WEBLib.TMSFNCTypes"].TTMSFNCBitmap.CreateFromResource(t.TMSFNCGRAPHICSCLOSESVG)}}),["SysUtils","Math","WEBLib.TMSFNCUtils","WEBLib.TMSFNCHTMLEngine","WEBLib.TMSFNCGraphics.General","WEBLib.TMSFNCGraphics.WEB"]),rtl.module("WEBLib.TMSFNCPDFCoreLibBase",["System","Classes","Types","WEBLib.TMSFNCGraphics","WEBLib.TMSFNCBitmapContainer","WEBLib.TMSFNCGraphicsTypes","WEBLib.Graphics","WEBLib.TMSFNCTypes","contnrs"],(function(){"use strict";var t=this,e=t.$impl;this.PDFCR="\r",this.PDFLF="\n",this.PDFLB=this.PDFCR+this.PDFLF,this.PDFEC=["\f","\b","\n","\r","\t","(",")","\\"],this.PDFRC=["f","b","n","r","t","(",")","\\"],this.PDFLHFACTOR=1.4,this.PDFULFACTOR=.8,this.PDFSTFACTOR=.5,this.PDFULLWFACTOR=.05,this.DefaultFontName="Arial",this.PDFMetaData='<?xpacket begin="ï»¿" id="W5M0MpCehiHzreSzNTczkc9d"?><x:xmpmeta xmlns:x="adobe:ns:meta/" x:xmptk="%s"><rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:xmp="http://ns.adobe.com/xap/1.0/"><xmp:CreateDate>%s</xmp:CreateDate><xmp:ModifyDate>%s</xmp:ModifyDate><xmp:CreatorTool>%s</xmp:CreatorTool></rdf:Description><rdf:Description rdf:about="" xmlns:dc="http://purl.org/dc/elements/1.1/"><dc:title><rdf:Alt><rdf:li xml:lang="x-default">%s</rdf:li></rdf:Alt></dc:title><dc:creator><rdf:Seq><rdf:li xml:lang="x-default">%s</rdf:li></rdf:Seq></dc:creator><dc:description><rdf:Alt><rdf:li xml:lang="x-default">%s</rdf:li></rdf:Alt></dc:description></rdf:Description><rdf:Description rdf:about="" xmlns:pdf="http://ns.adobe.com/pdf/1.3/"><pdf:Keywords>%s</pdf:Keywords><pdf:Producer>%s</pdf:Producer></rdf:Description><rdf:Description rdf:about="" xmlns:pdfaid="http://www.aiim.org/pdfa/ns/id/"><pdfaid:part>1</pdfaid:part><pdfaid:conformance>A</pdfaid:conformance></rdf:Description></rdf:RDF></x:xmpmeta><?xpacket end="w"?>',this.PDFPageFontGlyphRef="{PDFPAGEFONTGLYPHREFERENCE%s%s}",this.TTMSFNCPDFGraphicsLibPathDrawingMode={0:"dmPathFill",dmPathFill:0,1:"dmPathEOFill",dmPathEOFill:1,2:"dmPathStroke",dmPathStroke:2,3:"dmPathEOStroke",dmPathEOStroke:3,4:"dmPathFillStroke",dmPathFillStroke:4,5:"dmPathEOFillStroke",dmPathEOFillStroke:5},this.TTMSFNCPDFGraphicsLibImageType={0:"itOriginal",itOriginal:0,1:"itPNG",itPNG:1,2:"itJPG",itJPG:2},this.TTMSFNCPDFGraphicsLibLineBreakMode={0:"bmLineBreakModeWordWrap",bmLineBreakModeWordWrap:0,1:"bmLineBreakModeCharacterWrap",bmLineBreakModeCharacterWrap:1,2:"bmLineBreakModeClip",bmLineBreakModeClip:2,3:"bmLineBreakModeHeadTruncation",bmLineBreakModeHeadTruncation:3,4:"bmLineBreakModeMiddleTruncation",bmLineBreakModeMiddleTruncation:4,5:"bmLineBreakModeTailTruncation",bmLineBreakModeTailTruncation:5},rtl.createClass(this,"TTMSFNCPDFGraphicsLibFont",pas.Classes.TPersistent,(function(){this.$init=function(){pas.Classes.TPersistent.$init.call(this),this.FUpdateCount=0,this.FName="",this.FSize=0,this.FColor=0,this.FOnChanged=null,this.FStyle={},this.FFileName=""},this.$final=function(){this.FOnChanged=void 0,this.FStyle=void 0,pas.Classes.TPersistent.$final.call(this)},this.SetName=function(t){this.FName=t,this.DoChanged()},this.SetSize=function(t){var e=0;0===(e=t)&&(e=12),this.FSize=96*e/72,this.FSize=pas.Math.Floor(this.FSize),this.DoChanged()},this.SetColor=function(t){this.FColor=t,this.DoChanged()},this.IsSizeStored=function(){return 12!==this.FSize},this.SetStyle=function(t){this.FStyle=rtl.refSet(t),this.DoChanged()},this.SetSizeNoScale=function(t){this.FSize=t,this.DoChanged()},this.SetFileName=function(t){this.FFileName=t,this.DoChanged()},this.DoChanged=function(){this.FUpdateCount>0||null!=this.FOnChanged&&this.FOnChanged(this)},this.Create$1=function(){return pas.System.TObject.Create.call(this),this.FName=t.DefaultFontName,this.FSize=12,this.FColor=0,this.FStyle={},this.FFileName="",this},this.Assign=function(e){t.TTMSFNCPDFGraphicsLibFont.isPrototypeOf(e)&&(this.BeginUpdate(),this.FName=rtl.as(e,t.TTMSFNCPDFGraphicsLibFont).FName,this.FSize=rtl.as(e,t.TTMSFNCPDFGraphicsLibFont).FSize,this.FColor=rtl.as(e,t.TTMSFNCPDFGraphicsLibFont).FColor,this.FStyle=rtl.refSet(rtl.as(e,t.TTMSFNCPDFGraphicsLibFont).FStyle),this.FFileName=rtl.as(e,t.TTMSFNCPDFGraphicsLibFont).FFileName,this.EndUpdate())},this.BeginUpdate=function(){this.FUpdateCount+=1},this.EndUpdate=function(){this.FUpdateCount-=1,0===this.FUpdateCount&&this.DoChanged()};var e=this.$rtti;e.addProperty("Name",2,rtl.string,"FName","SetName"),e.addProperty("FileName",2,rtl.string,"FFileName","SetFileName"),e.addProperty("Size",14,rtl.double,"FSize","SetSize",{stored:"IsSizeStored"}),e.addProperty("SizeNoScale",14,rtl.double,"FSize","SetSizeNoScale",{stored:"IsSizeStored"}),e.addProperty("Color",2,pas["WEBLib.Graphics"].$rtti.TColor,"FColor","SetColor",{Default:0}),e.addProperty("Style",2,pas["WEBLib.Graphics"].$rtti.TFontStyles,"FStyle","SetStyle",{Default:{}}),e.addProperty("OnChanged",0,pas.Classes.$rtti.TNotifyEvent,"FOnChanged","FOnChanged")})),rtl.createClass(this,"TTMSFNCPDFGraphicsFill",pas["WEBLib.TMSFNCGraphicsTypes"].TTMSFNCCustomGraphicsFill,(function(){var t=this.$rtti;t.addProperty("Kind",14,pas["WEBLib.TMSFNCGraphicsTypes"].$rtti.TTMSFNCGraphicsFillKind,"FKind","SetKind",{stored:"IsKindStored"}),t.addProperty("Orientation",2,pas["WEBLib.TMSFNCGraphicsTypes"].$rtti.TTMSFNCGraphicsFillOrientation,"FOrientation","SetOrientation",{Default:pas["WEBLib.TMSFNCGraphicsTypes"].TTMSFNCGraphicsFillOrientation.gfoVertical}),t.addProperty("Color",14,pas["WEBLib.Graphics"].$rtti.TColor,"FColor","SetColor",{stored:"IsColorStored"}),t.addProperty("ColorTo",14,pas["WEBLib.Graphics"].$rtti.TColor,"FColorTo","SetColorTo",{stored:"IsColorToStored"})})),rtl.createClass(this,"TTMSFNCPDFGraphicsStroke",pas["WEBLib.TMSFNCGraphicsTypes"].TTMSFNCCustomGraphicsStroke,(function(){var t=this.$rtti;t.addProperty("Kind",14,pas["WEBLib.TMSFNCGraphicsTypes"].$rtti.TTMSFNCGraphicsStrokeKind,"FKind","SetKind",{stored:"IsKindStored"}),t.addProperty("Color",14,pas["WEBLib.Graphics"].$rtti.TColor,"FColor","SetColor",{stored:"IsColorStored"}),t.addProperty("Width",14,rtl.double,"FWidth","SetWidth",{stored:"IsWidthStored"})})),rtl.createClass(this,"TTMSFNCPDFGraphicsLibBase",pas.System.TInterfacedObject,(function(){this.$init=function(){pas.System.TInterfacedObject.$init.call(this),this.FFont=null,this.FLineBreakMode=0,this.FAlignment=0,this.FURLFont=null,this.FFill=null,this.FStroke=null,this.FBitmapContainer=null},this.$final=function(){this.FFont=void 0,this.FURLFont=void 0,this.FFill=void 0,this.FStroke=void 0,this.FBitmapContainer=void 0,pas.System.TInterfacedObject.$final.call(this)},this.SetAlignment=function(t){this.FAlignment=t,this.UpdateAlignment()},this.SetLineBreakMode=function(t){this.FLineBreakMode=t,this.UpdateLineBreakMode()},this.SetBitmapContainer=function(t){this.FBitmapContainer=t},this.FontChanged=function(t){this.UpdateFont()},this.FillChanged=function(t){this.UpdateFill()},this.StrokeChanged=function(t){this.UpdateStroke()},this.InitializeAppearance=function(){},this.UpdateFont=function(){},this.UpdateAlignment=function(){},this.UpdateFill=function(){},this.UpdateLineBreakMode=function(){},this.UpdateStroke=function(){},this.CreateClasses=function(){},this.Create$1=function(){return this.CreateClasses(),this.FFont=t.TTMSFNCPDFGraphicsLibFont.$create("Create$1"),this.FFont.FOnChanged=rtl.createCallback(this,"FontChanged"),this.FURLFont=t.TTMSFNCPDFGraphicsLibFont.$create("Create$1"),this.FURLFont.SetColor(16711680),this.FURLFont.SetStyle(rtl.createSet(3)),this.FLineBreakMode=0,this.FAlignment=1,this.FFill=t.TTMSFNCPDFGraphicsFill.$create("Create$1",[1,16777215,8421504,-1,-1]),this.FFill.FOnChanged=rtl.createCallback(this,"FillChanged"),this.FStroke=t.TTMSFNCPDFGraphicsStroke.$create("Create$1",[1,12632256]),this.FStroke.FOnChanged=rtl.createCallback(this,"StrokeChanged"),this.InitializeAppearance(),this},this.Destroy=function(){null!=this.FFill&&(rtl.free(this,"FFill"),this.FFill=null),null!=this.FStroke&&(rtl.free(this,"FStroke"),this.FStroke=null),null!=this.FURLFont&&(rtl.free(this,"FURLFont"),this.FURLFont=null),null!=this.FFont&&(rtl.free(this,"FFont"),this.FFont=null),pas.System.TObject.Destroy.call(this)},rtl.addIntf(this,pas.System.IUnknown)})),rtl.createClass(this,"TTMSFNCPDFPlatformServicesService",pas.System.TObject,(function(){this.$init=function(){pas.System.TObject.$init.call(this),this.FInterface=null,this.FGUID=""},this.$final=function(){rtl.setIntfP(this,"FInterface",null),pas.System.TObject.$final.call(this)},this.Create$1=function(t,e){return this.FGUID=t,rtl.setIntfP(this,"FInterface",e),this}})),rtl.createClass(this,"TTMSFNCPDFPlatformServicesList",pas.contnrs.TObjectList,(function(){this.GetItem$1=function(t){return this.GetItem(t)},this.GetValue=function(t){var e=null,i=0,s=!1;try{e=rtl.setIntfL(e,null);for(var n=0,r=this.GetCount()-1;n<=r;n++)if(i=n,this.GetItem$1(i).FGUID===t){e=rtl.setIntfL(e,this.GetItem$1(i).FInterface);break}s=!0}finally{s||rtl._Release(e)}return e},this.ContainsKey=function(t){var e=!1,i=0;e=!1;for(var s=0,n=this.GetCount()-1;s<=n;s++)if(i=s,this.GetItem$1(i).FGUID===t){e=!0;break}return e}})),rtl.createClass(this,"TTMSFNCPDFLibPlatformServices",pas.System.TObject,(function(){this.FCurrent=null,this.FCurrentReleased=!1,this.$init=function(){pas.System.TObject.$init.call(this),this.FServicesList=null},this.$final=function(){this.FServicesList=void 0,pas.System.TObject.$final.call(this)},this.Create$1=function(){return pas.System.TObject.Create.call(this),this.FServicesList=t.TTMSFNCPDFPlatformServicesList.$create("Create$2"),this},this.Destroy=function(){pas.SysUtils.FreeAndNil({p:this,get:function(){return this.p.FServicesList},set:function(t){this.p.FServicesList=t}}),pas.System.TObject.Destroy.call(this)},this.AddPlatformService=function(e,i){var s=null;try{this.FServicesList.ContainsKey(pas.SysUtils.GUIDToString(e))||pas.SysUtils.Supports$1(i,e,{get:function(){return s},set:function(t){s=t}})&&this.FServicesList.Add$1(t.TTMSFNCPDFPlatformServicesService.$create("Create$1",[pas.SysUtils.GUIDToString(e),i]))}finally{rtl._Release(s)}},this.SupportsPlatformService$1=function(t,e){var i=!1,s=rtl.createIntfRefs();try{this.FServicesList.ContainsKey(pas.SysUtils.GUIDToString(t))?i=pas.SysUtils.Supports$1(s.ref(1,this.FServicesList.GetValue(pas.SysUtils.GUIDToString(t))),t,e):(e.set(null),i=!1)}finally{s.free()}return i},this.Current=function(){return null!==this.FCurrent||this.FCurrentReleased||(t.TTMSFNCPDFLibPlatformServices.FCurrent=t.TTMSFNCPDFLibPlatformServices.$create("Create$1")),this.FCurrent}})),rtl.createClass(this,"TTMSFNCPDFGraphicsLibUsedFontCharArray",pas.Classes.TList,(function(){this.GetItem=function(t){return rtl.trunc(this.Get(t))},this.SubSetCount=function(t,e){var i=0,s=0;i=0;for(var n=0,r=this.GetCount()-1;n<=r;n++)s=n,this.GetItem(s)>=t&&this.GetItem(s)<e&&(i+=1);return i},this.HeadSetCount=function(t){var e=0,i=0;e=0;for(var s=0,n=this.GetCount()-1;s<=n;s++)i=s,this.GetItem(i)<t&&(e+=1);return e}})),this.TCompressionLevel={0:"clNone",clNone:0,1:"clFastest",clFastest:1,2:"clDefault",clDefault:2,3:"clMax",clMax:3},rtl.createClass(this,"TCompressionStream",pas.System.TObject,(function(){this.$init=function(){pas.System.TObject.$init.call(this),this.FDestStream=null},this.$final=function(){this.FDestStream=void 0,pas.System.TObject.$final.call(this)},this.Create$1=function(t,e){return this.FDestStream=e,this},this.CopyFrom=function(e,i){var s=[];return null!=this.FDestStream&&(this.FDestStream.CopyFrom(e,i),s=pas["WEBLib.TMSFNCTypes"].TTMSFNCMemoryStream.GetBytes.call(this.FDestStream),t.CanCompress()&&(s=pako.deflate(s)),this.FDestStream.Clear(),this.FDestStream.SetPosition(0),this.FDestStream.Write(s,rtl.length(s))),0}})),rtl.recNewT(this,"TTMSFNCPDFGraphicsLibFontCharArray",(function(){this.c=0,this.$new=function(){var t=Object.create(this);return t.v=[],t},this.$eq=function(t){return this.v===t.v&&this.c===t.c},this.$assign=function(t){return this.v=rtl.arrayRef(t.v),this.c=t.c,this},this.IndexOf=function(t){var e=0,i=0,s=0,n=0;if(i=0,0<=(s=this.c-1))do{if(e=i+s>>>1,0===(n=this.v[e]-t))return e;n<0?i=e+1:s=e-1}while(!(i>s));return e=-1}})),rtl.recNewT(this,"TTMSFNCPDFGraphicsLibFontCharWidth",(function(){this.w=0,this.g=0,this.$eq=function(t){return this.w===t.w&&this.g===t.g},this.$assign=function(t){return this.w=t.w,this.g=t.g,this}})),rtl.createClass(this,"TTMSFNCPDFGraphicsLibOutputWriterStream",pas.Classes.TStringStream,(function(){this.$init=function(){pas.Classes.TStringStream.$init.call(this),this.FReference=null},this.$final=function(){this.FReference=void 0,pas.Classes.TStringStream.$final.call(this)},this.Destroy=function(){this.FReference=null,pas.Classes.TStringStream.Destroy.call(this)}})),rtl.createClass(this,"TTMSFNCPDFGraphicsLibOutputWriterStreams",pas.contnrs.TObjectList,(function(){this.GetItem$1=function(t){return this.GetItem(t)}})),rtl.createClass(this,"TTMSFNCPDFGraphicsLibOutputWriter",pas.System.TObject,(function(){this.$init=function(){pas.System.TObject.$init.call(this),this.FStream=null,this.FContentStream=null,this.FStreams=null,this.FFontRefName="",this.FFontSize=0,this.FFontName="",this.FOnFontChanged=null,this.FFontColor=0,this.FFontStyle={},this.FFontBase="",this.FFontWordSpacing=0,this.FFontLeading=0,this.FFontCharWidths=[],this.FFontCharSpacing=0,this.FOnNotifyUnicode=null,this.FFontCharArray=t.TTMSFNCPDFGraphicsLibFontCharArray.$new(),this.FFontUsedCharArray=null,this.FOnNotifyBitmap=null,this.FOnNotifyShading=null,this.FOnNotifyShadingRect=null,this.FOnNotifyText=null,this.FOnNotifyURL=null,this.FFontUnicode=!1,this.FFontCapHeight=0,this.FFontUnitsPerEm=0,this.FFontEmbedding=!1,this.FFontGlyphRefName="",this.FOnNotifyGoTo=null},this.$final=function(){this.FStream=void 0,this.FContentStream=void 0,this.FStreams=void 0,this.FOnFontChanged=void 0,this.FFontStyle=void 0,this.FFontCharWidths=void 0,this.FOnNotifyUnicode=void 0,this.FFontCharArray=void 0,this.FFontUsedCharArray=void 0,this.FOnNotifyBitmap=void 0,this.FOnNotifyShading=void 0,this.FOnNotifyShadingRect=void 0,this.FOnNotifyText=void 0,this.FOnNotifyURL=void 0,this.FOnNotifyGoTo=void 0,pas.System.TObject.$final.call(this)},this.GetStreamPosition=function(){return this.FStream.GetPosition()},this.SetStreamPosition=function(t){this.FStream.SetPosition(t)},this.Create$1=function(){return this.FStreams=t.TTMSFNCPDFGraphicsLibOutputWriterStreams.$create("Create$2"),this.ClearProperties(),this},this.Destroy=function(){null!=this.FStreams&&(rtl.free(this,"FStreams"),this.FStreams=null),pas.System.TObject.Destroy.call(this)},this.Streams=function(){return this.FStreams},this.GetFontCharWidth=function(t,e){var i;return(i=this.FFontCharArray.IndexOf(t.charCodeAt(e-1)))>=0&&i<=rtl.length(this.FFontCharWidths)-1?this.FFontCharWidths[i].w:600},this.ConvertColorToString=function(t){return this.ConvertFloatToString(pas["WEBLib.TMSFNCGraphics"].TTMSFNCGraphics.GetColorRed(t)/255)+" "+this.ConvertFloatToString(pas["WEBLib.TMSFNCGraphics"].TTMSFNCGraphics.GetColorGreen(t)/255)+" "+this.ConvertFloatToString(pas["WEBLib.TMSFNCGraphics"].TTMSFNCGraphics.GetColorBlue(t)/255)},this.ConvertFloatToString=function(t){var e,i="";return i=pas.SysUtils.FloatToStr(pas.System.Trunc(100*t+.5)/100),"."!==(e=pas.SysUtils.FormatSettings.DecimalSeparator)&&(i=pas.SysUtils.StringReplace(i,e,".",rtl.createSet(0))),i},this.IsUnicodeString=function(t){var e=!1,i=0;e=!1;for(var s=1,n=t.length;s<=n;s++)if(i=s,t.charCodeAt(i-1)>127){e=!0;break}return e},this.ConvertStringToHex=function(e){var i="",s=0,n=0,r=0;i="";for(var o=1,a=e.length;o<=a;o++)s=o,(n=e.charCodeAt(s-1))>=32&&(this.FontCharArrayContainsValue(n)||this.FontCharArrayAddValue(n),this.FFontEmbedding?i+=pas.SysUtils.Format(t.PDFPageFontGlyphRef,pas.System.VarRecs(18,pas.SysUtils.IntToStr(n),18,this.FFontGlyphRefName)):(r=this.FFontCharArray.IndexOf(n))>-1&&(i+=this.AddHex4(this.FFontCharWidths[r].g)));return i};var i=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F"];this.AddHex4=function(t){var e,s="";return e=rtl.lw(t>>>8),t&=255,s=rtl.strSetLength(s,4),1,s=rtl.setCharAt(s,0,i[rtl.lw(e>>>4)]),s=rtl.setCharAt(s,1,i[15&e]),s=rtl.setCharAt(s,2,i[rtl.lw(t>>>4)]),s=rtl.setCharAt(s,3,i[15&t])},this.EscapeString=function(e){var i="",s=0,n=0,r=!1,o=0;i="";for(var a=1,l=e.length;a<=l;a++){for(s=a,o=e.charCodeAt(s-1),this.FontCharArrayContainsValue(o)||this.FontCharArrayAddValue(o),r=!1,n=0;n<=7;n++)if(e.charAt(s-1)===t.PDFEC[n]){i=i+"\\"+t.PDFRC[n],r=!0;break}r||(i+=e.charAt(s-1))}return i},this.FontCharArrayContainsValue=function(t){var e=!1;return e=!1,null!=this.FFontUsedCharArray&&t>=32&&(e=this.FFontUsedCharArray.IndexOf(t)>-1),e},this.CompressString=function(e){var i=null,s=null,n=null,r=null;if(i=null,""===e)return i;s=t.CreateStringStream("");try{r=t.TCompressionStream.$create("Create$1",[3,s]);try{n=t.CreateStringStream(e);try{r.CopyFrom(n,0)}finally{n=rtl.freeLoc(n)}}finally{r=rtl.freeLoc(r)}s.SetPosition(0),i=s}finally{}return i},this.CompressStream=function(e){var i=null,s=null,n=null,r=null;if(i=null,0===e.GetSize())return i;s=t.CreateStringStream("");try{r=t.TCompressionStream.$create("Create$1",[3,s]);try{n=e,r.CopyFrom(n,0)}finally{r=rtl.freeLoc(r)}s.SetPosition(0),i=s}finally{}return i},this.FinishContentStream=function(e,i,s){var n=null,r=0;if(n=null,null!=this.FContentStream){i&&t.CanCompress()?n=this.CompressStream(this.FContentStream):(n=t.CreateStringStream("")).CopyFrom(this.FContentStream,0);try{r=0,null!=n&&(r=n.GetSize()),rtl.free(this,"FContentStream"),this.FContentStream=null,i&&t.CanCompress()?this.ReplaceString(e,"/Length "+pas.SysUtils.IntToStr(r)+"/Filter/FlateDecode"+s):this.ReplaceString(e,"")}finally{}}else null!=this.FStream&&this.ReplaceString(e,"");return n},this.FontCharArrayAddValue=function(t){null!=this.FFontUsedCharArray&&t>=32&&(this.FFontUsedCharArray.Add(t),this.FFontUsedCharArray.Sort(e.CompareVal))},this.BeginText=function(){this.WriteString("BT"+t.PDFLB)},this.WriteMatrix=function(e,i){this.WriteString(this.ConvertFloatToString(i.cx)+" 0 0 "+this.ConvertFloatToString(i.cy)+" "+this.ConvertFloatToString(e.X)+" "+this.ConvertFloatToString(e.Y)+" cm"+t.PDFLB)},this.WriteMatrix$1=function(e,i,s,n,r,o){this.WriteString(this.ConvertFloatToString(e)+" "+this.ConvertFloatToString(i)+" "+this.ConvertFloatToString(s)+" "+this.ConvertFloatToString(n)+" "+this.ConvertFloatToString(r)+" "+this.ConvertFloatToString(o)+" cm"+t.PDFLB)},this.WriteRectangle=function(e){this.WriteString(this.ConvertFloatToString(e.Left)+" "+this.ConvertFloatToString(e.Top)+" "+this.ConvertFloatToString(e.Right-e.Left)+" "+this.ConvertFloatToString(e.Bottom-e.Top)+" re"+t.PDFLB)},this.WriteFontColor=function(){this.WriteString(this.ConvertColorToString(this.FFontColor)+" rg"+t.PDFLB)},this.WriteFontLeading=function(){this.WriteString(this.ConvertFloatToString(this.FFontLeading)+" TL"+t.PDFLB)},this.WriteFont=function(){this.WriteString(this.FFontRefName+" "+pas.SysUtils.IntToStr(Math.round(this.FFontSize))+" Tf"+t.PDFLB)},this.WriteFillColor=function(e){this.WriteString(this.ConvertColorToString(e)+" rg"+t.PDFLB)},this.WriteStrokeColor=function(e){this.WriteString(this.ConvertColorToString(e)+" RG"+t.PDFLB)},this.WriteStrokeKind=function(e){var i=e;2===i?this.WriteString("[4] 1 d"+t.PDFLB):3===i?this.WriteString("[2] 1 d"+t.PDFLB):4===i?this.WriteString("[4 2 2 2] 2 d"+t.PDFLB):5===i?this.WriteString("[4 2 1 2 1 2] 2 d"+t.PDFLB):this.WriteString("[] 0 d"+t.PDFLB)},this.WriteStrokeWidth=function(e){this.WriteString(this.ConvertFloatToString(e)+" w"+t.PDFLB)},this.EndText=function(){this.WriteString("ET"+t.PDFLB)},this.MoveTo=function(e){this.WriteString(this.ConvertFloatToString(e.X)+" "+this.ConvertFloatToString(e.Y)+" m"+t.PDFLB)},this.LineTo=function(e){this.WriteString(this.ConvertFloatToString(e.X)+" "+this.ConvertFloatToString(e.Y)+" l"+t.PDFLB)},this.CurveTo=function(e,i,s,n,r,o){this.WriteString(this.ConvertFloatToString(e)+" "+this.ConvertFloatToString(i)+" "+this.ConvertFloatToString(s)+" "+this.ConvertFloatToString(n)+" "+this.ConvertFloatToString(r)+" "+this.ConvertFloatToString(o)+" c"+t.PDFLB)},this.MoveTextTo=function(e){this.WriteString(this.ConvertFloatToString(e.X)+" "+this.ConvertFloatToString(e.Y)+" Td"+t.PDFLB)},this.AddText=function(e){var i="";i=this.FFontUnicode||this.IsUnicodeString(e)?"<"+this.ConvertStringToHex(e)+">":"("+this.EscapeString(e)+")",this.WriteString(i+" Tj"+t.PDFLB)},this.StartContentStream=function(e){this.FContentStream=t.CreateStringStream(""),this.FContentStream.FReference=e},this.StartNewStream=function(e){this.FStream=t.CreateStringStream(""),this.FStream.FReference=e,null!=this.FStream&&this.FStreams.Add$1(this.FStream)},this.WriteString=function(t){null!=this.FContentStream?this.FContentStream.WriteString(t):this.FStream.WriteString(t)},this.ReplaceString=function(t,e){this.ReplaceStrings([t],[e])},this.ClearProperties=function(){this.FFontBase="",this.FFontName="",this.FFontUnicode=!1,this.FFontRefName="",this.FFontGlyphRefName="",this.FFontSize=0,this.FFontColor=-1,this.FFontStyle={},this.FFontWordSpacing=0,this.FFontCharSpacing=0,this.FFontLeading=0,this.FFontCharWidths=rtl.arraySetLength(this.FFontCharWidths,t.TTMSFNCPDFGraphicsLibFontCharWidth,0),this.FFontCharWidths=[],this.FFontUsedCharArray=null},this.NotifyURL=function(t,e){null!=this.FOnNotifyURL&&this.FOnNotifyURL(this,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(t),e)},this.NotifyShading=function(t,e,i,s){null!=this.FOnNotifyShading&&this.FOnNotifyShading(this,t,e,i,s)},this.NotifyShadingRect=function(t){null!=this.FOnNotifyShadingRect&&this.FOnNotifyShadingRect(this,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(t))},this.NotifyUnicode=function(t){null!=this.FOnNotifyUnicode&&this.FOnNotifyUnicode(this,t)},this.NotifyText=function(t){null!=this.FOnNotifyText&&this.FOnNotifyText(this,t)},this.NotifyBitmap=function(t,e,i,s,n){null!=this.FOnNotifyBitmap&&this.FOnNotifyBitmap(this,t,e,i,s,n)},this.ReplaceStrings=function(e,i){var s=null,n="",r=0;if(rtl.length(e)>0&&rtl.length(i)>0)if(null!=this.FContentStream){s=t.CreateStringStream("");try{this.FContentStream.SetPosition(0),s.CopyFrom(this.FContentStream,this.FContentStream.GetSize()),n=s.GetDataString();for(var o=0,a=rtl.length(e)-1;o<=a;o++)r=o,n=pas.SysUtils.StringReplace(n,e[r],i[r],rtl.createSet(0));this.FContentStream.SetSize64(0),this.WriteString(n)}finally{s=rtl.freeLoc(s)}}else if(null!=this.FStream){s=t.CreateStringStream("");try{this.FStream.SetPosition(0),s.CopyFrom(this.FStream,this.FStream.GetSize()),n=s.GetDataString();for(var l=0,h=rtl.length(e)-1;l<=h;l++)r=l,n=pas.SysUtils.StringReplace(n,e[r],i[r],rtl.createSet(0));this.FStream.SetSize64(0),this.WriteString(n)}finally{s=rtl.freeLoc(s)}}}})),this.GetAspectSize=function(t,e,i,s,n,r,o,a,l,h,F){var p=0,c=0;l?n>0&&r>0&&o>0&&a>0?n<o&&r<a&&!h?(i.set(n),s.set(r)):n/r<o/a?(s.set(a),i.set(a*n/r)):(i.set(o),s.set(o*r/n)):(i.set(0),s.set(0)):h?(i.set(o),s.set(a)):(i.set(n),s.set(r),F&&(i.get()>=s.get()&&i.get()>0?(s.set(o/i.get()*s.get()),i.set(a)):s.get()>=i.get()&&s.get()>0&&(i.set(a/s.get()*i.get()),s.set(a)),p=0===a?1:o/a,(c=0===s.get()?1:i.get()/s.get())<1||p>c?(s.set(o/c),i.set(o)):(i.set(c*a),s.set(a))))},this.CreateStringStream=function(e){return t.TTMSFNCPDFGraphicsLibOutputWriterStream.$create("Create$3",[e,pas.Classes.TEncoding.GetANSI(),!0])},this.DateTimeToIso=function(t){var i=0,s=0,n=0,r=0,o=0,a=0,l=0;return pas.SysUtils.DecodeDate(t,{get:function(){return n},set:function(t){n=t}},{get:function(){return s},set:function(t){s=t}},{get:function(){return i},set:function(t){i=t}}),pas.SysUtils.DecodeTime(t,{get:function(){return r},set:function(t){r=t}},{get:function(){return o},set:function(t){o=t}},{get:function(){return a},set:function(t){a=t}},{get:function(){return l},set:function(t){l=t}}),e.IntToZStr(n,4)+"-"+e.IntToZStr(s,2)+"-"+e.IntToZStr(i,2)+"T"+e.IntToZStr(r,2)+":"+e.IntToZStr(o,2)+":"+e.IntToZStr(a,2)+"Z"},this.ConvertToPDFDate=function(t){return pas.SysUtils.FormatFloat("0000",pas.DateUtils.YearOf(t))+pas.SysUtils.FormatFloat("00",pas.DateUtils.MonthOf(t))+pas.SysUtils.FormatFloat("00",pas.DateUtils.DayOf(t))+pas.SysUtils.FormatFloat("00",pas.DateUtils.HourOf(t))+pas.SysUtils.FormatFloat("00",pas.DateUtils.MinuteOf(t))+pas.SysUtils.FormatFloat("00",pas.DateUtils.SecondOf(t))+"Z"},this.CanCompress=function(){return"undefined"!=typeof pako},t.$implcode=function(){e.IntToZStr=function(t,e){var i="";for(i=pas.SysUtils.IntToStr(t);i.length<e;)i="0"+i;return i},e.CompareVal=function(t,e){return pas.Math.CompareValue(t,e)}},t.$init=function(){t.TTMSFNCPDFLibPlatformServices.FCurrentReleased=!1}}),["SysUtils","WEBLib.TMSFNCUtils","Math","DateUtils"]),rtl.module("WEBLib.StdCtrls",["System","Classes","WEBLib.Controls","SysUtils","Web","WEBLib.Graphics","Types","WEBLib.WebTools","WEBLib.Forms","WEBLib.Menus"],(function(){"use strict";var t=this;this.TEditCharCase={0:"wecLowerCase",wecLowerCase:0,1:"wecNormal",wecNormal:1,2:"wecMixedCase",wecMixedCase:2,3:"wecUpperCase",wecUpperCase:3},this.$rtti.$Enum("TEditCharCase",{minvalue:0,maxvalue:3,ordtype:1,enumtype:this.TEditCharCase}),this.TEllipsisPosition={0:"epEndEllipsis",epEndEllipsis:0,1:"epNone",epNone:1,2:"epPathEllipsis",epPathEllipsis:2,3:"epWordEllipsis",epWordEllipsis:3},this.$rtti.$Enum("TEllipsisPosition",{minvalue:0,maxvalue:3,ordtype:1,enumtype:this.TEllipsisPosition}),this.TTextLayout={0:"tlTop",tlTop:0,1:"tlCenter",tlCenter:1,2:"tlBottom",tlBottom:2},this.$rtti.$Enum("TTextLayout",{minvalue:0,maxvalue:2,ordtype:1,enumtype:this.TTextLayout}),this.TAutoCompletion={0:"acOff",acOff:0,1:"acHonorificPrefix",acHonorificPrefix:1,2:"acGivenName",acGivenName:2,3:"acAdditionalName",acAdditionalName:3,4:"acFamilyName",acFamilyName:4,5:"acHonorificSuffix",acHonorificSuffix:5,6:"acNickName",acNickName:6,7:"acEmail",acEmail:7,8:"acUserName",acUserName:8,9:"acNewPassword",acNewPassword:9,10:"acCurrentPassword",acCurrentPassword:10,11:"acOrganizationTitle",acOrganizationTitle:11,12:"acOrganization",acOrganization:12,13:"acStreetAddress",acStreetAddress:13,14:"acAddressLine1",acAddressLine1:14,15:"acAddressLine2",acAddressLine2:15,16:"acAddressLine3",acAddressLine3:16,17:"acAddressLevel1",acAddressLevel1:17,18:"acAddressLevel2",acAddressLevel2:18,19:"acAddressLevel3",acAddressLevel3:19,20:"acAddressLevel4",acAddressLevel4:20,21:"acCountry",acCountry:21,22:"acCountryName",acCountryName:22,23:"acPostalCode",acPostalCode:23,24:"acCCName",acCCName:24,25:"acCCGivenName",acCCGivenName:25,26:"acCCAdditionalName",acCCAdditionalName:26,27:"acCCFamilyName",acCCFamilyName:27,28:"acCCNumber",acCCNumber:28,29:"acExpiry",acExpiry:29,30:"acExpiryMonth",acExpiryMonth:30,31:"acExpiryYear",acExpiryYear:31,32:"acCSC",acCSC:32,33:"acType",acType:33,34:"acTransactionCurrency",acTransactionCurrency:34,35:"acTransactionAmount",acTransactionAmount:35,36:"acLanguage",acLanguage:36,37:"acBirthday",acBirthday:37,38:"acBirthdayDay",acBirthdayDay:38,39:"acBirthDayMonth",acBirthDayMonth:39,40:"acBirthDayYear",acBirthDayYear:40,41:"acSex",acSex:41,42:"acTelephone",acTelephone:42,43:"acTelephoneCountryCode",acTelephoneCountryCode:43,44:"acTelephoneNational",acTelephoneNational:44,45:"acTelephoneAreaCode",acTelephoneAreaCode:45,46:"acTelephoneLocal",acTelephoneLocal:46,47:"acTelephoneExtension",acTelephoneExtension:47,48:"acIMPP",acIMPP:48,49:"acURL",acURL:49,50:"acPhoto",acPhoto:50,51:"acNone",acNone:51,52:"acNope",acNope:52},this.$rtti.$Enum("TAutoCompletion",{minvalue:0,maxvalue:52,ordtype:1,enumtype:this.TAutoCompletion}),this.TEditType={0:"weString",weString:0,1:"weFloat",weFloat:1,2:"weHex",weHex:2,3:"weNumeric",weNumeric:3,4:"weSignedFloat",weSignedFloat:4,5:"weSignedNumeric",weSignedNumeric:5,6:"weSearch",weSearch:6},this.$rtti.$Enum("TEditType",{minvalue:0,maxvalue:6,ordtype:1,enumtype:this.TEditType}),this.THTMLType={0:"tLABELTAG",tLABELTAG:0,1:"tSPAN",tSPAN:1,2:"tDIV",tDIV:2,3:"tH1",tH1:3,4:"tH2",tH2:4,5:"tH3",tH3:5,6:"tH4",tH4:6,7:"tH5",tH5:7,8:"tH6",tH6:8,9:"tP",tP:9},this.$rtti.$Enum("THTMLType",{minvalue:0,maxvalue:9,ordtype:1,enumtype:this.THTMLType}),rtl.createClass(this,"TCustomLabel",pas["WEBLib.Menus"].TWebCustomControl,(function(){this.$init=function(){pas["WEBLib.Menus"].TWebCustomControl.$init.call(this),this.FContent=null,this.FAutoSize=!1,this.FEllipsisPosition=0,this.FWordWrap=!1,this.FAlignment=0,this.FLayout=0,this.FTransparent=!1,this.FHTMLType=0,this.FFocusControl=null,this.FShowAccelChar=!1,this.FColor$1=0,this.FHasAccel=!1,this.FHasHTML=!1,this.FElementLabelClassName="",this.FOrigWidth=0,this.FOldWidth=0,this.FOldHeight=0,this.FHTML=""},this.$final=function(){this.FContent=void 0,this.FFocusControl=void 0,pas["WEBLib.Menus"].TWebCustomControl.$final.call(this)},this.SetLayout=function(t){this.FLayout!==t&&(this.FLayout=t,this.UpdateElementVisual())},this.SetAlignment=function(t){this.FAlignment!==t&&(this.FAlignment=t,this.UpdateElementVisual())},this.GetContentHandle=function(){return this.FContent},this.SetTransparent=function(t){this.FTransparent!==t&&(this.FTransparent=t,this.UpdateElementVisual())},this.SetHTMLType=function(t){var e=null;this.FHTMLType!==t&&(this.FHTMLType=t,this.FHTMLType in rtl.createSet(null,3,8)&&this.SetElementFont(1),null!=this.GetElementHandle()&&null!=this.FContent&&null!=(e=this.GetElementHandle().firstChild)&&"lbl"===e.getAttribute("data-lbl")&&(this.GetElementHandle().removeChild(this.FContent),this.FContent=this.CreateLabelElement(),this.GetElementHandle().appendChild(this.FContent),this.UpdateElement()))},this.SetColorEx=function(t){this.FColor$1=t,4 in this.FComponentState&&16777215!==this.FColor$1&&this.SetTransparent(!1),this.UpdateElement()},this.SetElementLabelClassName=function(t){this.FElementLabelClassName!==t&&(this.FElementLabelClassName=t,this.UpdateElement())},this.SetHTML=function(t){this.FHTML!==t&&(this.FHTML=t,this.UpdateElementData())},this.SetWidth=function(t){-1!==t&&0 in this.FComponentState&&(this.FOrigWidth=t),pas["WEBLib.Controls"].TControl.SetWidth.apply(this,arguments)},this.CreateElement=function(){var t=null;return t=document.createElement("DIV"),this.FContent=this.CreateLabelElement(),t.appendChild(this.FContent),t},this.CreateLabelElement=function(){var t=null;t=null;var e=this.FHTMLType;return 1===e?t=document.createElement("SPAN"):2===e?t=document.createElement("DIV"):3===e?t=document.createElement("H1"):4===e?t=document.createElement("H2"):5===e?t=document.createElement("H3"):6===e?t=document.createElement("H4"):7===e?t=document.createElement("H5"):8===e?t=document.createElement("H6"):0===e?t=document.createElement("LABEL"):9===e&&(t=document.createElement("P")),t.setAttribute("data-lbl","lbl"),t},this.GetDisplayText=function(){return this.FCaption},this.CanShowFocus=function(){return!1,!1},this.SetParent=function(t){pas["WEBLib.Controls"].TControl.SetParent.apply(this,arguments),this.FAutoSize&&0!==this.FAlignment&&-1!==this.FOrigWidth&&(this.SetLeft(this.GetLeft()+this.FOrigWidth-this.GetWidth()),this.FOrigWidth=-1)},this.BindElement=function(){this.FContent=this.GetContainer().firstElementChild},this.Loaded=function(){pas["WEBLib.Controls"].TCustomControl.Loaded.call(this),this.FShowAccelChar&&null!=this.FFocusControl&&this.UpdateElementData()},this.UpdateAutoSize=function(){this.FAutoSize&&0===this.FAlign&&(null!=this.GetElementHandle()&&pas["WEBLib.WebTools"].ElementVisible(this.GetElementHandle())&&(this.SetWidth(-1),this.SetHeight(-1)),this.FEllipsisPosition=1)},this.UpdateElementData=function(){var t="",e="",i=null;pas["WEBLib.Controls"].TControl.UpdateElementData.call(this),e="",t=this.FShowAccelChar?pas["WEBLib.WebTools"].ProcessAccelerator(this.GetDisplayText(),{get:function(){return e},set:function(t){e=t}}):this.GetDisplayText(),t=""===this.FHTML?pas["WEBLib.WebTools"].HTMLToString(t):this.FHTML,this.GetIsLinked()&&""===t&&0 in this.FComponentState||(null!=this.GetContentHandle()?this.GetIsLinked()?(i=this.GetContentHandle(),""!==this.GetID()&&(i=document.getElementById(this.GetID())),null!=i&&(pas.System.Assigned(this.GetContentHandle().nodeValue)?i.nodeValue=t:0===i.childElementCount&&(i.innerHTML=t))):this.GetContentHandle().childElementCount>0&&!this.FHasAccel&&!this.FHasHTML?this.GetContentHandle().nodeValue=t:this.GetContentHandle().innerHTML=t:this.GetElementHandle().innerHTML=t,this.FHasHTML=pas.System.Pos("</",t)>0,this.FHasAccel=""!==e,""!==e&&null!=this.FFocusControl&&(this.GetContentHandle().setAttribute("accesskey",e),this.GetContentHandle().setAttribute("for",this.FFocusControl.GetID())))},this.UpdateElementVisual=function(){var t=0,e=0;if(pas["WEBLib.Controls"].TCustomControl.UpdateElementVisual.call(this),!this.IsUpdating()&&(null!=this.GetElementHandle()&&(e=Math.round(this.GetElementHandle().offsetHeight),t=Math.round(this.GetElementHandle().offsetWidth),e>0&&(this.FOldHeight=e),t>0&&(this.FOldWidth=t),!this.FVisible||this.FAutoSize&&0===this.FAlign||0===this.FAlignment||this.GetElementHandle().style.setProperty("display","table"),this.GetElementHandle().setAttribute("zindex","1"),this.FAutoSize&&0===this.FAlign&&!(4 in this.FComponentState)?this.GetElementHandle().style.setProperty("overflow",""):this.GetElementHandle().style.setProperty("overflow","hidden")),null!=this.GetContentHandle())){var i=this.FLayout;0===i?this.GetContentHandle().style.setProperty("vertical-align","top"):1===i?this.GetContentHandle().style.setProperty("vertical-align","middle"):2===i&&this.GetContentHandle().style.setProperty("vertical-align","bottom");var s=this.FAlignment;0===s?this.GetContentHandle().style.removeProperty("text-align"):2===s?this.GetContentHandle().style.setProperty("text-align","center"):1===s&&this.GetContentHandle().style.setProperty("text-align","right"),pas["WEBLib.Controls"].SetHTMLElementColor(this.GetElementHandle(),this.FColor$1,this.FTransparent||-1===this.FColor$1||16711422===this.FColor$1),pas["WEBLib.Controls"].SetHTMLElementColor(this.GetContentHandle(),this.FColor$1,this.FTransparent||-1===this.FColor$1||16711422===this.FColor$1),this.GetContentHandle().style.setProperty("display","table-cell"),""===this.FElementClassName?(this.FEnabled&&0===this.FElementFont&&!this.GetIsLinked()?this.GetContentHandle().style.setProperty("color",pas["WEBLib.Graphics"].ColorToHTML(this.FFont.FColor)):this.GetContentHandle().style.removeProperty("color"),this.SetElementPointer(this.GetContentHandle(),this.FCursor),pas["WEBLib.Controls"].SetHTMLElementFont(this.GetContentHandle(),this.FFont,!(0===this.FElementFont&&!this.GetIsLinked()))):(this.GetContentHandle().style.removeProperty("color"),pas["WEBLib.Controls"].SetHTMLElementFont(this.GetContentHandle(),this.FFont,!0)),""!==this.FElementLabelClassName?this.GetContentHandle().setAttribute("class",this.FElementLabelClassName):this.GetContentHandle().removeAttribute("class"),0===this.FElementPosition||1===this.FWidthStyle?1===this.FEllipsisPosition?this.GetContentHandle().style.setProperty("text-overflow","clip"):this.GetContentHandle().style.setProperty("text-overflow","ellipsis"):this.GetContentHandle().style.removeProperty("text-overflow"),this.FWordWrap?this.GetContentHandle().style.setProperty("white-space","normal"):this.GetContentHandle().style.setProperty("white-space","nowrap"),this.GetElementHandle().style.setProperty("user-select",""),0===this.FCursor&&this.GetElementHandle().style.setProperty("cursor",""),this.FAutoSize&&0===this.FAlign&&!(4 in this.FComponentState)&&(this.GetElementHandle().style.removeProperty("width"),this.GetElementHandle().style.removeProperty("height"))}},this.UpdateElementSize=function(){pas["WEBLib.Controls"].TControl.UpdateElementSize.call(this),this.FAutoSize&&0===this.FAlign&&null!=this.GetElementHandle()&&(4 in this.FComponentState||(this.GetElementHandle().style.removeProperty("width"),this.GetElementHandle().style.removeProperty("height"))),null!=this.GetContentHandle()&&this.FAlign in rtl.createSet(3,4,5)&&!this.FAutoSize&&this.FLayout in rtl.createSet(1,2)&&this.GetContentHandle().style.setProperty("height",pas.SysUtils.TIntegerHelper.ToString$1.call({p:this.GetHeight(),get:function(){return this.p},set:function(t){this.p=t}})+"px")},this.SetAutoSize=function(t){this.FAutoSize!==t&&(this.FAutoSize=t,this.UpdateAutoSize(),this.UpdateElement())},this.SetCaption=function(t){var e=0;this.FCaption!==t&&(e=this.GetWidth(),pas["WEBLib.Controls"].TCustomControl.SetCaption.call(this,t),this.UpdateAutoSize(),this.UpdateElement(),e-=this.GetWidth(),this.FAutoSize&&0!==this.FAlignment&&0!==e&&2 in this.FAnchors&&!this.IsUpdating()&&this.SetLeft(this.GetLeft()+e))},this.SetControlCursor=function(t){pas["WEBLib.Controls"].TControl.SetControlCursor.apply(this,arguments),""===this.FElementClassName&&null!=this.GetContentHandle()&&this.SetElementPointer(this.GetContentHandle(),this.FCursor)},this.SetEllipsisPosition=function(t){this.FEllipsisPosition!==t&&(this.FEllipsisPosition=t,1!==this.FEllipsisPosition&&(this.FAutoSize=!1),this.UpdateElement())},this.GetWidth=function(){var t=0;return this.FAutoSize&&null!=this.GetElementHandle()&&null!=this.FParent?(0===(t=Math.round(this.GetElementHandle().offsetWidth))&&(t=pas["WEBLib.Controls"].TControl.GetWidth.call(this)),0===t&&""!==this.FCaption&&4 in this.FComponentState&&(t=this.FOldWidth)):t=pas["WEBLib.Controls"].TControl.GetWidth.call(this),t},this.GetHeight=function(){var t=0;return this.FAutoSize&&null!=this.GetElementHandle()&&null!=this.FParent?(0===(t=Math.round(this.GetElementHandle().offsetHeight))&&(t=pas["WEBLib.Controls"].TControl.GetHeight.call(this)),0===t&&""!==this.FCaption&&4 in this.FComponentState&&(t=this.FOldHeight)):t=pas["WEBLib.Controls"].TControl.GetHeight.call(this),t},this.CreateInitialize=function(){pas["WEBLib.Controls"].TCustomControl.CreateInitialize.call(this),this.FAutoSize=!0,this.FLayout=0,this.FEllipsisPosition=1,this.FColor$1=16777215,this.FTransparent=!0,this.FAlignment=0,this.SetTabStop(!1),this.FShowAccelChar=!0},rtl.addIntf(this,pas.System.IUnknown)})),rtl.createClass(this,"TLabel",this.TCustomLabel,(function(){rtl.addIntf(this,pas.System.IUnknown);var e=this.$rtti;e.addProperty("Align",2,pas["WEBLib.Controls"].$rtti.TAlign,"FAlign","SetAlign",{Default:pas["WEBLib.Controls"].TAlign.alNone}),e.addProperty("Alignment",2,pas.Classes.$rtti.TAlignment,"FAlignment","SetAlignment",{Default:pas.Classes.TAlignment.taLeftJustify}),e.addProperty("AlignWithMargins",2,rtl.boolean,"FAlignWithMargins","SetAlignWithMargins",{Default:!1}),e.addProperty("Anchors",2,pas["WEBLib.Controls"].$rtti.TAnchors,"FAnchors","SetAnchors",{Default:rtl.createSet(0,1)}),e.addProperty("AutoSize",2,rtl.boolean,"FAutoSize","SetAutoSize",{Default:!0}),e.addProperty("Caption",2,rtl.string,"FCaption","SetCaption"),e.addProperty("ChildOrder",2,rtl.longint,"FChildOrder","SetChildOrderEx",{Default:0}),e.addProperty("Color",2,pas["WEBLib.Graphics"].$rtti.TColor,"FColor$1","SetColorEx",{Default:16777215}),e.addProperty("DragMode",2,pas["WEBLib.Controls"].$rtti.TDragMode,"FDragMode","SetDragMode",{Default:pas["WEBLib.Controls"].TDragMode.dmManual}),e.addProperty("EllipsisPosition",2,t.$rtti.TEllipsisPosition,"FEllipsisPosition","SetEllipsisPosition",{Default:t.TEllipsisPosition.epNone}),e.addProperty("Enabled",2,rtl.boolean,"FEnabled","SetEnabled",{Default:!0}),e.addProperty("ElementClassName",2,pas["WEBLib.Controls"].$rtti.TElementClassName,"FElementClassName","SetElementClassName"),e.addProperty("ElementLabelClassName",2,pas["WEBLib.Controls"].$rtti.TElementClassName,"FElementLabelClassName","SetElementLabelClassName"),e.addProperty("ElementID",3,pas["WEBLib.Controls"].$rtti.TElementID,"GetID","SetID"),e.addProperty("ElementFont",2,pas["WEBLib.Controls"].$rtti.TElementFont,"FElementFont","SetElementFont",{Default:pas["WEBLib.Controls"].TElementFont.efProperty}),e.addProperty("ElementPosition",2,pas["WEBLib.Controls"].$rtti.TElementPosition,"FElementPosition","SetElementPosition",{Default:pas["WEBLib.Controls"].TElementPosition.epAbsolute}),e.addProperty("FocusControl",0,pas["WEBLib.Controls"].$rtti.TWinControl,"FFocusControl","FFocusControl"),e.addProperty("Font",2,pas["WEBLib.Graphics"].$rtti.TFont,"FFont","SetFont"),e.addProperty("Height",3,rtl.longint,"GetHeight","SetHeight"),e.addProperty("HeightPercent",2,rtl.double,"FHeightPercent","SetHeightPercent",{Default:100}),e.addProperty("HeightStyle",2,pas["WEBLib.Controls"].$rtti.TSizeStyle,"FHeightStyle","SetHeightStyle",{Default:pas["WEBLib.Controls"].TSizeStyle.ssAbsolute}),e.addProperty("Hint",2,rtl.string,"FHint","SetHint"),e.addProperty("HTML",2,rtl.string,"FHTML","SetHTML"),e.addProperty("HTMLType",2,t.$rtti.THTMLType,"FHTMLType","SetHTMLType",{Default:t.THTMLType.tLABELTAG}),e.addProperty("Layout",2,t.$rtti.TTextLayout,"FLayout","SetLayout",{Default:t.TTextLayout.tlTop}),e.addProperty("Left",3,rtl.longint,"GetLeft","SetLeft"),e.addProperty("Margins",2,pas["WEBLib.Controls"].$rtti.TMargins,"FMargins","SetMargins"),e.addProperty("ParentFont",2,rtl.boolean,"FParentFont","SetParentFont",{Default:!0}),e.addProperty("PopupMenu",0,pas["WEBLib.Menus"].$rtti.TPopupMenu,"FPopupMenu","FPopupMenu"),e.addProperty("ShowAccelChar",0,rtl.boolean,"FShowAccelChar","FShowAccelChar",{Default:!0}),e.addProperty("ShowHint",2,rtl.boolean,"FShowHint","SetShowHint",{Default:!1}),e.addProperty("TextDirection",0,pas["WEBLib.Controls"].$rtti.TTextDirection,"FTextDirection","FTextDirection",{Default:pas["WEBLib.Controls"].TTextDirection.tdDefault}),e.addProperty("Top",3,rtl.longint,"GetTop","SetTop"),e.addProperty("Transparent",2,rtl.boolean,"FTransparent","SetTransparent",{Default:!0}),e.addProperty("Visible",2,rtl.boolean,"FVisible","SetVisible",{Default:!0}),e.addProperty("Width",3,rtl.longint,"GetWidth","SetWidth"),e.addProperty("WidthPercent",2,rtl.double,"FWidthPercent","SetWidthPercent",{Default:100}),e.addProperty("WidthStyle",2,pas["WEBLib.Controls"].$rtti.TSizeStyle,"FWidthStyle","SetWidthStyle",{Default:pas["WEBLib.Controls"].TSizeStyle.ssAbsolute}),e.addProperty("WordWrap",0,rtl.boolean,"FWordWrap","FWordWrap",{Default:!1}),e.addProperty("OnClick",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnClick","FOnClick"),e.addProperty("OnDblClick",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnDblClick","FOnDblClick"),e.addProperty("OnTouchStart",0,pas["WEBLib.Controls"].$rtti.TTouchEvent,"FOnTouchStart","FOnTouchStart"),e.addProperty("OnTouchEnd",0,pas["WEBLib.Controls"].$rtti.TTouchEvent,"FOnTouchEnd","FOnTouchEnd"),e.addProperty("OnTouchMove",0,pas["WEBLib.Controls"].$rtti.TTouchEvent,"FOnTouchMove","FOnTouchMove"),e.addProperty("OnTouchCancel",0,pas["WEBLib.Controls"].$rtti.TTouchEvent,"FOnTouchCancel","FOnTouchCancel"),e.addProperty("OnDragOver",0,pas["WEBLib.Controls"].$rtti.TDragOverEvent,"FOnDragOver","FOnDragOver"),e.addProperty("OnDragDrop",0,pas["WEBLib.Controls"].$rtti.TDragDropEvent,"FOnDragDrop","FOnDragDrop"),e.addProperty("OnStartDrag",0,pas["WEBLib.Controls"].$rtti.TStartDragEvent,"FOnStartDrag","FOnStartDrag"),e.addProperty("OnEndDrag",0,pas["WEBLib.Controls"].$rtti.TEndDragEvent,"FonEndDrag","FonEndDrag")})),rtl.createClass(this,"TCustomInput",pas["WEBLib.Menus"].TWebCustomControl,(function(){this.IsInputControl=function(){return!0,!0},this.GetInputType=function(){return"EDIT","EDIT"},this.CreateElement=function(){var t=null;return(t=document.createElement("INPUT")).setAttribute("type",this.GetInputType()),t},this.UpdateElementVisual=function(){pas["WEBLib.Controls"].TCustomControl.UpdateElementVisual.call(this),null==this.GetContainer()||this.GetIsLinked()||(this.GetContainer().style.setProperty("-moz-box-sizing","border-box"),this.GetContainer().style.setProperty("-webkit-box-sizing","border-box"),this.GetContainer().style.setProperty("box-sizing","border-box"))},this.CreateInitialize=function(){pas["WEBLib.Controls"].TCustomControl.CreateInitialize.call(this),this.SetShowFocus(!0),this.FNoUserSelect=!1},rtl.addIntf(this,pas.System.IUnknown)})),rtl.createClass(this,"TCustomEdit",this.TCustomInput,(function(){this.$init=function(){t.TCustomInput.$init.call(this),this.FCharCase=0,this.FMaxLength=0,this.FReadOnly=!1,this.FText="",this.FTextHint="",this.FSelStart=0,this.FAlignment=0,this.FHideSelection=!1,this.FPasswordChar="",this.FOnChange=null,this.FAutoSize=!1,this.FAutoSelect=!1,this.FSelLength=0,this.FNumeric=!1,this.FAutoCompletion=0,this.FEditType=0,this.FRequired=!1,this.FAutoFocus=!1,this.FPattern="",this.FHandlePastePtr=null,this.FHandleCutPtr=null,this.FHandleChangePtr=null,this.FHandleInvalidPtr=null,this.FSpellCheck=!1,this.FRequiredText=""},this.$final=function(){this.FOnChange=void 0,t.TCustomInput.$final.call(this)},this.SetAlignment=function(t){this.FAlignment=t,this.UpdateElement()},this.SetHideSelection=function(t){this.FHideSelection!==t&&(this.FHideSelection=t,this.UpdateElement())},this.SetAutoSelect=function(t){this.FAutoSelect!==t&&(this.FAutoSelect=t,this.UpdateElement())},this.SetAutoSize=function(t){this.FAutoSize!==t&&(this.FAutoSize=t,this.UpdateElement())},this.SetPasswordChar=function(t){this.FPasswordChar=t,this.UpdateElement()},this.SetAutoCompletion=function(t){this.FAutoCompletion!==t&&(this.FAutoCompletion=t,this.UpdateElement())},this.SetAutoFocus=function(t){this.FAutoFocus!==t&&(this.FAutoFocus=t,this.UpdateElement())},this.SetRequired=function(t){this.FRequired=t,this.UpdateElement()},this.SetPattern=function(t){this.FPattern!==t&&(this.FPattern=t,this.UpdateElement())},this.SetEditType=function(t){this.FEditType!==t&&(this.FEditType=t,this.UpdateElement())},this.SetSpellCheck=function(t){this.FSpellCheck!==t&&(this.FSpellCheck=t,this.UpdateElement())},this.GetElementInputHandle=function(){return this.GetContainer()},this.DoHandlePaste=function(t){var e;return e=(t.clipboardData||window.clipboardData).getData("Text"),this.CanPaste(e)&&this.Validate(e)||(t.preventDefault(),t.stopPropagation()),!1,!1},this.DoHandleCut=function(t){return this.CanCut()||(t.preventDefault(),t.stopPropagation()),!1,!1},this.DoHandleChange=function(t){return this.Change(),!0,""!==this.FRequiredText&&this.GetElementInputHandle().setCustomValidity(""),!0},this.DoHandleInvalid=function(t){return this.GetElementInputHandle().setCustomValidity(this.FRequiredText),!0,!0},this.IsCustomEditor=function(){return!1,!1},this.KeyPress=function(t){var e=!1;pas["WEBLib.Controls"].TControl.KeyPress.call(this,t),e=!0;var i=this.FEditType;3===i?e=t.get().charCodeAt()in rtl.createSet(null,48,57):5===i?e=t.get().charCodeAt()in rtl.createSet(null,48,57,43,45):1===i?e=t.get().charCodeAt()in rtl.createSet(null,48,57,44,46):4===i?e=t.get().charCodeAt()in rtl.createSet(null,48,57,44,46,43,45):2===i&&(e=t.get().charCodeAt()in rtl.createSet(null,48,57,null,65,70)),e||t.set("\0")},this.GetInputType=function(){return"\0"!==this.FPasswordChar?"PASSWORD":this.FNumeric?"NUMBER":this.FEditType in rtl.createSet(1,3)?"TEL":6===this.FEditType?"SEARCH":"TEXT"},this.GetText=function(){var t="";return t=this.FText,null!=this.GetElementInputHandle()&&(t=this.GetElementInputHandle().value),3===this.FCharCase&&(t=pas.SysUtils.UpperCase(t)),0===this.FCharCase&&(t=pas.SysUtils.LowerCase(t)),t},this.GetDisplayText=function(){return this.FText},this.IsReadOnly=function(){return this.FReadOnly},this.Validate=function(t){var e=!1,i=0,s="",n=!1;e=!0;for(var r=1,o=t.length;r<=o;r++){i=r,s=t.charAt(i-1),n=!0;var a=this.FEditType;if(3===a?n=s.charCodeAt()in rtl.createSet(null,48,57):5===a?n=s.charCodeAt()in rtl.createSet(null,48,57,43,45):1===a?n=s.charCodeAt()in rtl.createSet(null,48,57,44,46):4===a?n=s.charCodeAt()in rtl.createSet(null,48,57,44,46,43,45):2===a&&(n=s.charCodeAt()in rtl.createSet(null,48,57,null,65,70)),!n){e=!1;break}}return e},this.ClearMethodPointers=function(){pas["WEBLib.Controls"].TControl.ClearMethodPointers.call(this),this.FHandlePastePtr=null,this.FHandleCutPtr=null,this.FHandleChangePtr=null,this.FHandleInvalidPtr=null},this.GetMethodPointers=function(){pas["WEBLib.Controls"].TControl.GetMethodPointers.call(this),this.FHandlePastePtr=rtl.createCallback(this,"DoHandlePaste"),this.FHandleCutPtr=rtl.createCallback(this,"DoHandleCut"),this.FHandleChangePtr=rtl.createCallback(this,"DoHandleChange"),this.FHandleInvalidPtr=rtl.createCallback(this,"DoHandleInvalid")},this.BindEvents=function(){pas["WEBLib.Controls"].TCustomControl.BindEvents.call(this),null!=this.GetElementInputHandle()&&(this.GetElementInputHandle().addEventListener("input",this.FHandleChangePtr),this.GetElementInputHandle().addEventListener("paste",this.FHandlePastePtr),this.GetElementInputHandle().addEventListener("cut",this.FHandleCutPtr),this.GetElementInputHandle().addEventListener("invalid",this.FHandleInvalidPtr))},this.UnbindEvents=function(){pas["WEBLib.Controls"].TControl.UnbindEvents.call(this),null!=this.GetElementInputHandle()&&(this.GetElementInputHandle().removeEventListener("input",this.FHandleChangePtr),this.GetElementInputHandle().removeEventListener("paste",this.FHandlePastePtr),this.GetElementInputHandle().removeEventListener("cut",this.FHandleCutPtr),this.GetElementInputHandle().removeEventListener("invalid",this.FHandleInvalidPtr))},this.UpdateElementData=function(){var e=null,i=0,s=0,n=!1;if(pas["WEBLib.Controls"].TControl.UpdateElementData.call(this),null!=this.GetElementInputHandle()){if(!this.GetIsLinked()){var r=this.FCharCase;3===r?this.GetElementInputHandle().style.setProperty("text-transform","uppercase"):0===r?this.GetElementInputHandle().style.setProperty("text-transform","lowercase"):2===r?this.GetElementInputHandle().style.setProperty("text-transform","capitalize"):1===r&&this.GetElementInputHandle().style.setProperty("text-transform","initial")}if(this.GetElementInputHandle().readOnly=this.IsReadOnly(),""!==this.FTextHint&&(this.GetElementInputHandle().placeholder=this.FTextHint),!this.GetIsLinked()){this.GetElementInputHandle().setAttribute("type",this.GetInputType()),this.GetElementInputHandle().setAttribute("role","textbox"),52===this.FAutoCompletion?(this.GetElementInputHandle().setAttribute("autocomplete","nope"),this.GetElementInputHandle().removeAttribute("name")):51===this.FAutoCompletion?(this.GetElementInputHandle().setAttribute("autocomplete","off"),this.GetElementInputHandle().removeAttribute("name")):0!==this.FAutoCompletion?(this.GetElementInputHandle().setAttribute("autocomplete","on"),this.GetElementInputHandle().setAttribute("name",t.GetAutoCompletionName(this.FAutoCompletion))):(this.GetElementInputHandle().removeAttribute("autocomplete"),this.GetElementInputHandle().removeAttribute("name"));var o=this.FAlignment;0===o?this.GetElementInputHandle().style.removeProperty("text-align"):2===o?this.GetElementInputHandle().style.setProperty("text-align","center"):1===o&&this.GetElementInputHandle().style.setProperty("text-align","right")}this.FAutoFocus?this.GetElementInputHandle().setAttribute("autofocus",""):this.GetElementInputHandle().removeAttribute("autofocus"),this.FRequired?this.GetElementInputHandle().setAttribute("required",""):this.GetElementInputHandle().removeAttribute("required"),""!==this.FPattern?this.GetElementInputHandle().setAttribute("pattern",this.FPattern):this.GetElementInputHandle().removeAttribute("pattern"),this.FMaxLength<=0?this.GetElementInputHandle().removeAttribute("maxLength"):this.GetElementInputHandle().maxLength=this.FMaxLength,this.GetElementInputHandle().value=this.GetDisplayText(),n="NUMBER"===pas.SysUtils.UpperCase(this.GetInputType()),this.FSpellCheck?this.GetElementInputHandle().removeAttribute("spellcheck"):this.GetElementInputHandle().setAttribute("spellcheck","false"),n||this.GetIsLinked()||this.IsCustomEditor()||(i=this.FSelStart,s=this.FSelStart+this.FSelLength,e=this.GetElementInputHandle(),setTimeout((function(){e.setSelectionRange(i,s)}),1))}},this.SetCharCase=function(t){this.FCharCase!==t&&(this.FCharCase=t,this.UpdateElement())},this.SetMaxLength=function(t){this.FMaxLength!==t&&(this.FMaxLength=t,this.UpdateElementData())},this.SetReadOnly=function(t){this.FReadOnly=t,this.UpdateElement()},this.SetText=function(t){this.FText=t,null!=this.GetElementInputHandle()&&(this.GetElementInputHandle().value=this.GetDisplayText(),this.GetElementInputHandle().readOnly=this.IsReadOnly())},this.SetTextHint=function(t){this.FTextHint=t,this.UpdateElement()},this.CanPaste=function(t){return!0,!0},this.CanCut=function(){return!0,!0},this.CreateInitialize=function(){t.TCustomInput.CreateInitialize.call(this),this.FAutoCompletion=0,this.FEditType=0,this.FText="",this.FCharCase=1,this.FMaxLength=0,this.FReadOnly=!1,this.FTextHint="",this.FPasswordChar="\0",this.FSpellCheck=!0,this.SetHeight(25)},this.Change=function(){null!=this.GetElementHandle()&&(this.FText=this.GetElementInputHandle().value),null!=this.FOnChange&&this.FOnChange(this)},rtl.addIntf(this,pas.System.IUnknown)})),rtl.createClass(this,"TEdit",this.TCustomEdit,(function(){rtl.addIntf(this,pas.System.IUnknown);var e=this.$rtti;e.addProperty("Alignment",2,pas.Classes.$rtti.TAlignment,"FAlignment","SetAlignment"),e.addProperty("Align",2,pas["WEBLib.Controls"].$rtti.TAlign,"FAlign","SetAlign",{Default:pas["WEBLib.Controls"].TAlign.alNone}),e.addProperty("AlignWithMargins",2,rtl.boolean,"FAlignWithMargins","SetAlignWithMargins",{Default:!1}),e.addProperty("Anchors",2,pas["WEBLib.Controls"].$rtti.TAnchors,"FAnchors","SetAnchors",{Default:rtl.createSet(0,1)}),e.addProperty("AutoCompletion",2,t.$rtti.TAutoCompletion,"FAutoCompletion","SetAutoCompletion",{Default:t.TAutoCompletion.acOff}),e.addProperty("AutoFocus",2,rtl.boolean,"FAutoFocus","SetAutoFocus",{Default:!1}),e.addProperty("AutoSize",2,rtl.boolean,"FAutoSize","SetAutoSize",{Default:!1}),e.addProperty("AutoSelect",2,rtl.boolean,"FAutoSelect","SetAutoSelect",{Default:!1}),e.addProperty("BiDiMode",2,pas["WEBLib.Controls"].$rtti.TBiDiMode,"FBiDiMode","SetBiDiMode",{Default:pas["WEBLib.Controls"].TBiDiMode.bdLeftToRight}),e.addProperty("BorderStyle",2,pas["WEBLib.Controls"].$rtti.TBorderStyle,"FBorderStyle","SetBorderStyle",{Default:pas["WEBLib.Controls"].TBorderStyle.bsSingle}),e.addProperty("CharCase",2,t.$rtti.TEditCharCase,"FCharCase","SetCharCase",{Default:t.TEditCharCase.wecNormal}),e.addProperty("ChildOrder",2,rtl.longint,"FChildOrder","SetChildOrderEx",{Default:0}),e.addProperty("Color",2,pas["WEBLib.Graphics"].$rtti.TColor,"FColor","SetColor"),e.addProperty("DragMode",2,pas["WEBLib.Controls"].$rtti.TDragMode,"FDragMode","SetDragMode",{Default:pas["WEBLib.Controls"].TDragMode.dmManual}),e.addProperty("EditType",2,t.$rtti.TEditType,"FEditType","SetEditType",{Default:t.TEditType.weString}),e.addProperty("ElementClassName",2,pas["WEBLib.Controls"].$rtti.TElementClassName,"FElementClassName","SetElementClassName"),e.addProperty("ElementID",3,pas["WEBLib.Controls"].$rtti.TElementID,"GetID","SetID"),e.addProperty("ElementFont",2,pas["WEBLib.Controls"].$rtti.TElementFont,"FElementFont","SetElementFont",{Default:pas["WEBLib.Controls"].TElementFont.efProperty}),e.addProperty("ElementPosition",2,pas["WEBLib.Controls"].$rtti.TElementPosition,"FElementPosition","SetElementPosition",{Default:pas["WEBLib.Controls"].TElementPosition.epAbsolute}),e.addProperty("Enabled",2,rtl.boolean,"FEnabled","SetEnabled",{Default:!0}),e.addProperty("Font",2,pas["WEBLib.Graphics"].$rtti.TFont,"FFont","SetFont"),e.addProperty("Height",3,rtl.longint,"GetHeight","SetHeight"),e.addProperty("HeightPercent",2,rtl.double,"FHeightPercent","SetHeightPercent",{Default:100}),e.addProperty("HeightStyle",2,pas["WEBLib.Controls"].$rtti.TSizeStyle,"FHeightStyle","SetHeightStyle",{Default:pas["WEBLib.Controls"].TSizeStyle.ssAbsolute}),e.addProperty("Hint",2,rtl.string,"FHint","SetHint"),e.addProperty("HideSelection",2,rtl.boolean,"FHideSelection","SetHideSelection"),e.addProperty("Left",3,rtl.longint,"GetLeft","SetLeft"),e.addProperty("ParentFont",2,rtl.boolean,"FParentFont","SetParentFont",{Default:!0}),e.addProperty("PasswordChar",2,rtl.char,"FPasswordChar","SetPasswordChar",{Default:"\0"}),e.addProperty("Pattern",2,rtl.string,"FPattern","SetPattern"),e.addProperty("Margins",2,pas["WEBLib.Controls"].$rtti.TMargins,"FMargins","SetMargins"),e.addProperty("MaxLength",2,rtl.longint,"FMaxLength","SetMaxLength",{Default:0}),e.addProperty("PopupMenu",0,pas["WEBLib.Menus"].$rtti.TPopupMenu,"FPopupMenu","FPopupMenu"),e.addProperty("ReadOnly",2,rtl.boolean,"FReadOnly","SetReadOnly",{Default:!1}),e.addProperty("Required",2,rtl.boolean,"FRequired","SetRequired",{Default:!1}),e.addProperty("RequiredText",0,rtl.string,"FRequiredText","FRequiredText"),e.addProperty("ShowFocus",2,rtl.boolean,"FShowFocus","SetShowFocus",{Default:!1}),e.addProperty("ShowHint",2,rtl.boolean,"FShowHint","SetShowHint",{Default:!1}),e.addProperty("SpellCheck",2,rtl.boolean,"FSpellCheck","SetSpellCheck",{Default:!0}),e.addProperty("TabOrder",2,rtl.longint,"FTabOrder","SetTabOrder"),e.addProperty("TabStop",2,rtl.boolean,"FTabStop","SetTabStop",{Default:!0}),e.addProperty("Text",3,rtl.string,"GetText","SetText"),e.addProperty("TextDirection",0,pas["WEBLib.Controls"].$rtti.TTextDirection,"FTextDirection","FTextDirection",{Default:pas["WEBLib.Controls"].TTextDirection.tdDefault}),e.addProperty("TextHint",2,rtl.string,"FTextHint","SetTextHint"),e.addProperty("Top",3,rtl.longint,"GetTop","SetTop"),e.addProperty("Visible",2,rtl.boolean,"FVisible","SetVisible",{Default:!0}),e.addProperty("Width",3,rtl.longint,"GetWidth","SetWidth"),e.addProperty("WidthPercent",2,rtl.double,"FWidthPercent","SetWidthPercent",{Default:100}),e.addProperty("WidthStyle",2,pas["WEBLib.Controls"].$rtti.TSizeStyle,"FWidthStyle","SetWidthStyle",{Default:pas["WEBLib.Controls"].TSizeStyle.ssAbsolute}),e.addProperty("OnChange",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnChange","FOnChange"),e.addProperty("OnClick",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnClick","FOnClick"),e.addProperty("OnDblClick",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnDblClick","FOnDblClick"),e.addProperty("OnKeyDown",0,pas["WEBLib.Controls"].$rtti.TKeyEvent,"FOnKeyDown","FOnKeyDown"),e.addProperty("OnKeyPress",0,pas["WEBLib.Controls"].$rtti.TKeyPressEvent,"FOnKeyPress","FOnKeyPress"),e.addProperty("OnKeyUp",0,pas["WEBLib.Controls"].$rtti.TKeyEvent,"FOnKeyUp","FOnKeyUp"),e.addProperty("OnMouseDown",0,pas["WEBLib.Controls"].$rtti.TMouseEvent,"FOnMouseDown","FOnMouseDown"),e.addProperty("OnMouseUp",0,pas["WEBLib.Controls"].$rtti.TMouseEvent,"FOnMouseUp","FOnMouseUp"),e.addProperty("OnMouseMove",0,pas["WEBLib.Controls"].$rtti.TMouseMoveEvent,"FOnMouseMove","FOnMouseMove"),e.addProperty("OnMouseLeave",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnMouseLeave","FOnMouseLeave"),e.addProperty("OnMouseEnter",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnMouseEnter","FOnMouseEnter"),e.addProperty("OnEnter",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnEnter","FOnEnter"),e.addProperty("OnExit",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnExit","FOnExit"),e.addProperty("OnDragDrop",0,pas["WEBLib.Controls"].$rtti.TDragDropEvent,"FOnDragDrop","FOnDragDrop"),e.addProperty("OnDragOver",0,pas["WEBLib.Controls"].$rtti.TDragOverEvent,"FOnDragOver","FOnDragOver"),e.addProperty("OnEndDrag",0,pas["WEBLib.Controls"].$rtti.TEndDragEvent,"FonEndDrag","FonEndDrag"),e.addProperty("OnStartDrag",0,pas["WEBLib.Controls"].$rtti.TStartDragEvent,"FOnStartDrag","FOnStartDrag")})),rtl.createClass(this,"TButton",pas["WEBLib.Menus"].TWebCustomControl,(function(){this.$init=function(){pas["WEBLib.Menus"].TWebCustomControl.$init.call(this),this.FDefault=!1,this.FButtonType=""},this.SetButtonType=function(t){this.FButtonType=t,this.UpdateElementData()},this.SetDefault=function(t){this.FDefault=t,this.FDefault&&this.SetFocus()},this.CreateElement=function(){var t=null;return(t=document.createElement("BUTTON")).setAttribute("type","BUTTON"),t},this.SetCaption=function(t){this.FCaption!==t&&(pas["WEBLib.Controls"].TCustomControl.SetCaption.call(this,t),this.UpdateElementData())},this.UpdateElementData=function(){var t="";pas["WEBLib.Controls"].TControl.UpdateElementData.call(this),this.GetIsLinked()&&""===this.FCaption||null!=this.GetElementHandle()&&((0===this.GetElementHandle().childElementCount||pas.System.Pos("</",this.FCaption)>0||!this.GetIsLinked())&&(this.GetElementHandle().innerHTML=pas["WEBLib.WebTools"].ProcessAccelerator(this.FCaption,{get:function(){return t},set:function(e){t=e}})),""!==t&&this.GetElementHandle().setAttribute("accesskey",t),this.GetElementHandle().setAttribute("role","button"),this.GetElementHandle().setAttribute("aria-label",this.FCaption),""!==this.FButtonType?this.GetElementHandle().setAttribute("type",this.FButtonType):this.GetElementHandle().setAttribute("type","BUTTON"))},this.UpdateElementVisual=function(){var t="";pas["WEBLib.Controls"].TCustomControl.UpdateElementVisual.call(this),null!=this.GetElementHandle()&&(this.GetElementHandle().style.removeProperty("outline"),this.GetElementHandle().style.removeProperty("user-select"),"BTN"===(t=pas.SysUtils.UpperCase(this.FElementClassName))||pas.System.Pos("BTN ",t))},this.CreateInitialize=function(){pas["WEBLib.Controls"].TCustomControl.CreateInitialize.call(this),4 in this.FComponentState&&""===this.FCaption&&this.SetCaption(this.FName),this.SetColor(-1)},rtl.addIntf(this,pas.System.IUnknown);var t=this.$rtti;t.addProperty("Align",2,pas["WEBLib.Controls"].$rtti.TAlign,"FAlign","SetAlign",{Default:pas["WEBLib.Controls"].TAlign.alNone}),t.addProperty("AlignWithMargins",2,rtl.boolean,"FAlignWithMargins","SetAlignWithMargins",{Default:!1}),t.addProperty("Anchors",2,pas["WEBLib.Controls"].$rtti.TAnchors,"FAnchors","SetAnchors",{Default:rtl.createSet(0,1)}),t.addProperty("BiDiMode",2,pas["WEBLib.Controls"].$rtti.TBiDiMode,"FBiDiMode","SetBiDiMode",{Default:pas["WEBLib.Controls"].TBiDiMode.bdLeftToRight}),t.addProperty("BorderStyle",2,pas["WEBLib.Controls"].$rtti.TBorderStyle,"FBorderStyle","SetBorderStyle",{Default:pas["WEBLib.Controls"].TBorderStyle.bsSingle}),t.addProperty("ButtonType",2,rtl.string,"FButtonType","SetButtonType"),t.addProperty("Caption",2,rtl.string,"FCaption","SetCaption"),t.addProperty("ChildOrder",2,rtl.longint,"FChildOrder","SetChildOrderEx",{Default:0}),t.addProperty("Color",2,pas["WEBLib.Graphics"].$rtti.TColor,"FColor","SetColor"),t.addProperty("Default",2,rtl.boolean,"FDefault","SetDefault"),t.addProperty("DragMode",2,pas["WEBLib.Controls"].$rtti.TDragMode,"FDragMode","SetDragMode",{Default:pas["WEBLib.Controls"].TDragMode.dmManual}),t.addProperty("ElementClassName",2,pas["WEBLib.Controls"].$rtti.TElementClassName,"FElementClassName","SetElementClassName"),t.addProperty("ElementID",3,pas["WEBLib.Controls"].$rtti.TElementID,"GetID","SetID"),t.addProperty("ElementFont",2,pas["WEBLib.Controls"].$rtti.TElementFont,"FElementFont","SetElementFont",{Default:pas["WEBLib.Controls"].TElementFont.efProperty}),t.addProperty("ElementPosition",2,pas["WEBLib.Controls"].$rtti.TElementPosition,"FElementPosition","SetElementPosition",{Default:pas["WEBLib.Controls"].TElementPosition.epAbsolute}),t.addProperty("Enabled",2,rtl.boolean,"FEnabled","SetEnabled",{Default:!0}),t.addProperty("Font",2,pas["WEBLib.Graphics"].$rtti.TFont,"FFont","SetFont"),t.addProperty("Height",3,rtl.longint,"GetHeight","SetHeight"),t.addProperty("HeightPercent",2,rtl.double,"FHeightPercent","SetHeightPercent",{Default:100}),t.addProperty("HeightStyle",2,pas["WEBLib.Controls"].$rtti.TSizeStyle,"FHeightStyle","SetHeightStyle",{Default:pas["WEBLib.Controls"].TSizeStyle.ssAbsolute}),t.addProperty("Hint",2,rtl.string,"FHint","SetHint"),t.addProperty("Left",3,rtl.longint,"GetLeft","SetLeft"),t.addProperty("Margins",2,pas["WEBLib.Controls"].$rtti.TMargins,"FMargins","SetMargins"),t.addProperty("PopupMenu",0,pas["WEBLib.Menus"].$rtti.TPopupMenu,"FPopupMenu","FPopupMenu"),t.addProperty("Role",3,rtl.string,"GetRole","SetRole"),t.addProperty("ParentFont",2,rtl.boolean,"FParentFont","SetParentFont",{Default:!0}),t.addProperty("ShowHint",2,rtl.boolean,"FShowHint","SetShowHint",{Default:!1}),t.addProperty("TabOrder",2,rtl.longint,"FTabOrder","SetTabOrder"),t.addProperty("TabStop",2,rtl.boolean,"FTabStop","SetTabStop",{Default:!0}),t.addProperty("TextDirection",0,pas["WEBLib.Controls"].$rtti.TTextDirection,"FTextDirection","FTextDirection",{Default:pas["WEBLib.Controls"].TTextDirection.tdDefault}),t.addProperty("Top",3,rtl.longint,"GetTop","SetTop"),t.addProperty("Visible",2,rtl.boolean,"FVisible","SetVisible",{Default:!0}),t.addProperty("Width",3,rtl.longint,"GetWidth","SetWidth"),t.addProperty("WidthPercent",2,rtl.double,"FWidthPercent","SetWidthPercent",{Default:100}),t.addProperty("WidthStyle",2,pas["WEBLib.Controls"].$rtti.TSizeStyle,"FWidthStyle","SetWidthStyle",{Default:pas["WEBLib.Controls"].TSizeStyle.ssAbsolute}),t.addProperty("OnClick",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnClick","FOnClick"),t.addProperty("OnKeyDown",0,pas["WEBLib.Controls"].$rtti.TKeyEvent,"FOnKeyDown","FOnKeyDown"),t.addProperty("OnKeyPress",0,pas["WEBLib.Controls"].$rtti.TKeyPressEvent,"FOnKeyPress","FOnKeyPress"),t.addProperty("OnKeyUp",0,pas["WEBLib.Controls"].$rtti.TKeyEvent,"FOnKeyUp","FOnKeyUp"),t.addProperty("OnMouseDown",0,pas["WEBLib.Controls"].$rtti.TMouseEvent,"FOnMouseDown","FOnMouseDown"),t.addProperty("OnMouseUp",0,pas["WEBLib.Controls"].$rtti.TMouseEvent,"FOnMouseUp","FOnMouseUp"),t.addProperty("OnMouseMove",0,pas["WEBLib.Controls"].$rtti.TMouseMoveEvent,"FOnMouseMove","FOnMouseMove"),t.addProperty("OnMouseLeave",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnMouseLeave","FOnMouseLeave"),t.addProperty("OnMouseEnter",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnMouseEnter","FOnMouseEnter"),t.addProperty("OnEnter",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnEnter","FOnEnter"),t.addProperty("OnExit",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnExit","FOnExit"),t.addProperty("OnDragDrop",0,pas["WEBLib.Controls"].$rtti.TDragDropEvent,"FOnDragDrop","FOnDragDrop"),t.addProperty("OnDragOver",0,pas["WEBLib.Controls"].$rtti.TDragOverEvent,"FOnDragOver","FOnDragOver"),t.addProperty("OnEndDrag",0,pas["WEBLib.Controls"].$rtti.TEndDragEvent,"FonEndDrag","FonEndDrag"),t.addProperty("OnStartDrag",0,pas["WEBLib.Controls"].$rtti.TStartDragEvent,"FOnStartDrag","FOnStartDrag")})),this.TComboBoxStyle={0:"csDropDownList",csDropDownList:0,1:"csDropDown",csDropDown:1},this.$rtti.$Enum("TComboBoxStyle",{minvalue:0,maxvalue:1,ordtype:1,enumtype:this.TComboBoxStyle}),rtl.createClass(this,"TCustomComboBox",pas["WEBLib.Menus"].TWebCustomControl,(function(){this.$init=function(){pas["WEBLib.Menus"].TWebCustomControl.$init.call(this),this.FItems=null,this.FItemIndex=0,this.FStyle=0,this.FOnChange=null,this.FTextHint="",this.FListName="",this.FText="",this.FHandleChangePtr=null,this.FHandleInputPtr=null,this.FHandleFocusInPtr=null,this.FHandleFocusOutPtr=null,this.FOnFocusOut=null,this.FOnFocusIn=null},this.$final=function(){this.FItems=void 0,this.FOnChange=void 0,this.FOnFocusOut=void 0,this.FOnFocusIn=void 0,pas["WEBLib.Menus"].TWebCustomControl.$final.call(this)},this.GetText=function(){var t="";return t="",1===this.FStyle?null!=this.GetElementHandle()&&(t=this.GetElementHandle().value):this.GetItemIndex()>=0&&(t=this.FItems.Get(this.GetItemIndex())),t},this.SetText=function(t){var e=0;if(1===this.FStyle)this.FText=t,this.UpdateElement();else for(var i=0,s=this.FItems.GetCount()-1;i<=s;i++)e=i,t===this.FItems.Get(e)&&this.SetItemIndex(e)},this.SetStyle=function(t){this.FStyle!==t&&(this.FStyle=t,this.GetIsLinked()||this.RecreateElement())},this.GetElementSelectHandle=function(){return this.GetContainer()},this.SetTextHint=function(t){this.FTextHint!==t&&(this.FTextHint=t,this.DoUpdateList())},this.DoHandleChange=function(t){return this.Change(),!0,!0},this.DoHandleInput=function(t){return 1===this.FStyle&&this.Change(),!0,!0},this.DoHandleFocusIn=function(t){return null!=this.FOnFocusIn&&this.FOnFocusIn(this),!0,!0},this.DoHandleFocusOut=function(t){return null!=this.FOnFocusOut&&this.FOnFocusOut(this),!0,!0},this.DoItemsChange=function(t){this.DoUpdateList()},this.ClearMethodPointers=function(){pas["WEBLib.Controls"].TControl.ClearMethodPointers.call(this),this.FHandleChangePtr=null,this.FHandleInputPtr=null},this.GetMethodPointers=function(){pas["WEBLib.Controls"].TControl.GetMethodPointers.call(this),this.FHandleChangePtr=rtl.createCallback(this,"DoHandleChange"),this.FHandleInputPtr=rtl.createCallback(this,"DoHandleInput"),this.FHandleFocusInPtr=rtl.createCallback(this,"DoHandleFocusIn"),this.FHandleFocusOutPtr=rtl.createCallback(this,"DoHandleFocusOut")},this.AddTextHint=function(){var t=null;""!==this.FTextHint&&0===this.FStyle&&((t=document.createElement("OPTION")).setAttribute("value",""),t.setAttribute("disabled","true"),t.setAttribute("selected","true"),t.setAttribute("hidden","true"),t.innerHTML=this.FTextHint,this.GetContainer().appendChild(t))},this.DoUpdateList=function(){var t=0,e=0,i="",s="",n="",r=null,o=null;if(null!=this.GetContainer()){if("INPUT"===this.GetElementHandle().tagName){this.GetElementHandle().value=this.GetText(),null!=(o=document.getElementById(this.FName+"_LIST"))&&o.parentNode.removeChild(o),""!==this.FTextHint&&(this.GetElementHandle().placeholder=this.FTextHint),(o=document.createElement("DATALIST")).setAttribute("id",this.FListName),document.body.appendChild(o);for(var a=0,l=this.FItems.GetCount()-1;a<=l;a++)t=a,i=this.FItems.Get(t),r=document.createElement("OPTION"),s=i,n=i,(e=pas.System.Pos(this.FItems.GetNameValueSeparator(),i))>0&&(n=pas.System.Copy(i,1,e-1),s=pas.System.Copy(i,e+1,65535)),r.setAttribute("value",n),r.innerHTML=s,o.appendChild(r)}else{if("SELECT"!==this.GetElementHandle().tagName)return;for(var h=this.GetContainer().options.length-1;h>=0;h--)t=h,this.GetContainer().remove(t);this.AddTextHint();for(var F=0,p=this.FItems.GetCount()-1;F<=p;F++)t=F,i=this.FItems.Get(t),r=document.createElement("OPTION"),s=i,n=i,(e=pas.System.Pos(this.FItems.GetNameValueSeparator(),i))>0&&(n=pas.System.Copy(i,1,e-1),s=pas.System.Copy(i,e+1,65535)),r.setAttribute("value",n),r.innerHTML=s,this.GetContainer().appendChild(r)}this.UpdateElement()}},this.GetItemIndex=function(){var t=0;return 1===this.FStyle?t=this.FItems.IndexOf(this.GetText()):(t=this.FItemIndex,null!=this.GetContainer()&&(t=this.GetContainer().selectedIndex,""!==this.FTextHint&&(t-=1))),t},this.CreateElement=function(){var t=null;return 0===this.FStyle?t=document.createElement("SELECT"):(t=document.createElement("INPUT"),this.FListName=this.FName+"_LIST",t.setAttribute("list",this.FListName)),t},this.BindEvents=function(){pas["WEBLib.Controls"].TCustomControl.BindEvents.call(this),null!=this.GetElementHandle()&&(this.GetElementHandle().addEventListener("input",this.FHandleInputPtr),this.GetElementHandle().addEventListener("change",this.FHandleChangePtr),this.GetElementHandle().addEventListener("focusin",this.FHandleFocusInPtr),this.GetElementHandle().addEventListener("focusout",this.FHandleFocusOutPtr))},this.UnbindEvents=function(){pas["WEBLib.Controls"].TControl.UnbindEvents.call(this),null!=this.GetElementHandle()&&(this.GetElementHandle().removeEventListener("input",this.FHandleInputPtr),this.GetElementHandle().removeEventListener("change",this.FHandleChangePtr),this.GetElementHandle().removeEventListener("focusin",this.FHandleFocusInPtr),this.GetElementHandle().removeEventListener("focusout",this.FHandleFocusOutPtr))},this.UpdateElementData=function(){var t=0;pas["WEBLib.Controls"].TControl.UpdateElementData.call(this),1===this.FStyle?null!=this.GetElementHandle()&&(this.GetElementHandle().value=this.FText,this.FListName=this.FName+"_LIST",this.GetElementHandle().setAttribute("list",this.FListName)):null!=this.GetElementSelectHandle()&&(t=0,""!==this.FTextHint&&(t=1),this.GetElementSelectHandle().selectedIndex=this.FItemIndex+t,this.GetElementSelectHandle().setAttribute("role","combobox"))},this.UpdateParent=function(){pas["WEBLib.Controls"].TControl.UpdateParent.call(this),this.DoUpdateList()},this.SetItems=function(t){this.FItems.Assign(t)},this.SetItemIndex=function(t){this.FItemIndex!==t&&(this.FItemIndex=t,t>=0&&this.FStyle in rtl.createSet(1,0)&&t<this.FItems.GetCount()&&(this.FText=this.FItems.Get(t)),this.UpdateElement())},this.Loaded=function(){pas["WEBLib.Controls"].TCustomControl.Loaded.call(this),this.DoUpdateList()},this.Change=function(){this.FItemIndex=this.GetItemIndex(),null!=this.FOnChange&&this.FOnChange(this)},this.CreateInitialize=function(){pas["WEBLib.Controls"].TCustomControl.CreateInitialize.call(this),this.FItems=pas.Classes.TStringList.$create("Create$1"),this.FItems.FOnChange=rtl.createCallback(this,"DoItemsChange"),this.FItemIndex=-1,this.FStyle=0,this.SetShowFocus(!0),this.SetHeight(25)},this.Destroy=function(){rtl.free(this,"FItems"),pas["WEBLib.Controls"].TCustomControl.Destroy.call(this)},rtl.addIntf(this,pas.System.IUnknown)})),rtl.createClass(this,"TComboBox",this.TCustomComboBox,(function(){rtl.addIntf(this,pas.System.IUnknown);var e=this.$rtti;e.addProperty("Align",2,pas["WEBLib.Controls"].$rtti.TAlign,"FAlign","SetAlign",{Default:pas["WEBLib.Controls"].TAlign.alNone}),e.addProperty("AlignWithMargins",2,rtl.boolean,"FAlignWithMargins","SetAlignWithMargins",{Default:!1}),e.addProperty("Anchors",2,pas["WEBLib.Controls"].$rtti.TAnchors,"FAnchors","SetAnchors",{Default:rtl.createSet(0,1)}),e.addProperty("BiDiMode",2,pas["WEBLib.Controls"].$rtti.TBiDiMode,"FBiDiMode","SetBiDiMode",{Default:pas["WEBLib.Controls"].TBiDiMode.bdLeftToRight}),e.addProperty("ChildOrder",2,rtl.longint,"FChildOrder","SetChildOrderEx",{Default:0}),e.addProperty("Color",2,pas["WEBLib.Graphics"].$rtti.TColor,"FColor","SetColor"),e.addProperty("DragMode",2,pas["WEBLib.Controls"].$rtti.TDragMode,"FDragMode","SetDragMode",{Default:pas["WEBLib.Controls"].TDragMode.dmManual}),e.addProperty("ElementClassName",2,pas["WEBLib.Controls"].$rtti.TElementClassName,"FElementClassName","SetElementClassName"),e.addProperty("ElementID",3,pas["WEBLib.Controls"].$rtti.TElementID,"GetID","SetID"),e.addProperty("ElementFont",2,pas["WEBLib.Controls"].$rtti.TElementFont,"FElementFont","SetElementFont",{Default:pas["WEBLib.Controls"].TElementFont.efProperty}),e.addProperty("ElementPosition",2,pas["WEBLib.Controls"].$rtti.TElementPosition,"FElementPosition","SetElementPosition",{Default:pas["WEBLib.Controls"].TElementPosition.epAbsolute}),e.addProperty("Enabled",2,rtl.boolean,"FEnabled","SetEnabled",{Default:!0}),e.addProperty("Font",2,pas["WEBLib.Graphics"].$rtti.TFont,"FFont","SetFont"),e.addProperty("Height",3,rtl.longint,"GetHeight","SetHeight"),e.addProperty("HeightPercent",2,rtl.double,"FHeightPercent","SetHeightPercent",{Default:100}),e.addProperty("HeightStyle",2,pas["WEBLib.Controls"].$rtti.TSizeStyle,"FHeightStyle","SetHeightStyle",{Default:pas["WEBLib.Controls"].TSizeStyle.ssAbsolute}),e.addProperty("Hint",2,rtl.string,"FHint","SetHint"),e.addProperty("ItemIndex",3,rtl.longint,"GetItemIndex","SetItemIndex",{Default:-1}),e.addProperty("Items",2,pas.Classes.$rtti.TStrings,"FItems","SetItems"),e.addProperty("Left",3,rtl.longint,"GetLeft","SetLeft"),e.addProperty("ParentFont",2,rtl.boolean,"FParentFont","SetParentFont",{Default:!0}),e.addProperty("Role",3,rtl.string,"GetRole","SetRole"),e.addProperty("ShowFocus",2,rtl.boolean,"FShowFocus","SetShowFocus",{Default:!1}),e.addProperty("ShowHint",2,rtl.boolean,"FShowHint","SetShowHint",{Default:!1}),e.addProperty("Style",2,t.$rtti.TComboBoxStyle,"FStyle","SetStyle"),e.addProperty("TabOrder",2,rtl.longint,"FTabOrder","SetTabOrder"),e.addProperty("TabStop",2,rtl.boolean,"FTabStop","SetTabStop",{Default:!0}),e.addProperty("Text",3,rtl.string,"GetText","SetText"),e.addProperty("TextDirection",0,pas["WEBLib.Controls"].$rtti.TTextDirection,"FTextDirection","FTextDirection",{Default:pas["WEBLib.Controls"].TTextDirection.tdDefault}),e.addProperty("TextHint",2,rtl.string,"FTextHint","SetTextHint"),e.addProperty("Top",3,rtl.longint,"GetTop","SetTop"),e.addProperty("Visible",2,rtl.boolean,"FVisible","SetVisible",{Default:!0}),e.addProperty("Width",3,rtl.longint,"GetWidth","SetWidth"),e.addProperty("WidthPercent",2,rtl.double,"FWidthPercent","SetWidthPercent",{Default:100}),e.addProperty("WidthStyle",2,pas["WEBLib.Controls"].$rtti.TSizeStyle,"FWidthStyle","SetWidthStyle",{Default:pas["WEBLib.Controls"].TSizeStyle.ssAbsolute}),e.addProperty("OnChange",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnChange","FOnChange"),e.addProperty("OnClick",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnClick","FOnClick"),e.addProperty("OnDblClick",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnDblClick","FOnDblClick"),e.addProperty("OnKeyDown",0,pas["WEBLib.Controls"].$rtti.TKeyEvent,"FOnKeyDown","FOnKeyDown"),e.addProperty("OnKeyPress",0,pas["WEBLib.Controls"].$rtti.TKeyPressEvent,"FOnKeyPress","FOnKeyPress"),e.addProperty("OnKeyUp",0,pas["WEBLib.Controls"].$rtti.TKeyEvent,"FOnKeyUp","FOnKeyUp"),e.addProperty("OnMouseDown",0,pas["WEBLib.Controls"].$rtti.TMouseEvent,"FOnMouseDown","FOnMouseDown"),e.addProperty("OnMouseUp",0,pas["WEBLib.Controls"].$rtti.TMouseEvent,"FOnMouseUp","FOnMouseUp"),e.addProperty("OnMouseMove",0,pas["WEBLib.Controls"].$rtti.TMouseMoveEvent,"FOnMouseMove","FOnMouseMove"),e.addProperty("OnMouseLeave",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnMouseLeave","FOnMouseLeave"),e.addProperty("OnMouseEnter",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnMouseEnter","FOnMouseEnter"),e.addProperty("OnEnter",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnEnter","FOnEnter"),e.addProperty("OnExit",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnExit","FOnExit"),e.addProperty("OnDragDrop",0,pas["WEBLib.Controls"].$rtti.TDragDropEvent,"FOnDragDrop","FOnDragDrop"),e.addProperty("OnDragOver",0,pas["WEBLib.Controls"].$rtti.TDragOverEvent,"FOnDragOver","FOnDragOver"),e.addProperty("OnEndDrag",0,pas["WEBLib.Controls"].$rtti.TEndDragEvent,"FonEndDrag","FonEndDrag"),e.addProperty("OnStartDrag",0,pas["WEBLib.Controls"].$rtti.TStartDragEvent,"FOnStartDrag","FOnStartDrag")})),rtl.createClass(this,"TScrollBarContent",pas["WEBLib.Controls"].TCustomControl,(function(){this.CreateElement=function(){return document.createElement("SPAN")},rtl.addIntf(this,pas.System.IUnknown)})),rtl.createClass(this,"TScrollBar",pas["WEBLib.Controls"].TCustomControl,(function(){this.$init=function(){pas["WEBLib.Controls"].TCustomControl.$init.call(this),this.FScrolling=!1,this.FContent=null,this.FKind=0,this.FPosition=0,this.FSmallChange=0,this.FMax=0,this.FMin=0,this.FLargeChange=0,this.FPageSize=0,this.FOnChange=null,this.FScrollPtr=null},this.$final=function(){this.FContent=void 0,this.FOnChange=void 0,pas["WEBLib.Controls"].TCustomControl.$final.call(this)},this.SetKind=function(t){if(this.FKind!==t){this.FKind=t;var e=this.FKind;0===e?this.SetBounds(this.GetLeft(),this.GetTop(),this.GetHeight(),17):1===e&&this.SetBounds(this.GetLeft(),this.GetTop(),17,this.GetWidth()),this.UpdateElement(),this.UpdateContent()}},this.SetPosition=function(t){this.FPosition!==t&&(this.FPosition=t,this.UpdateContent())},this.SetMax=function(t){this.FMax!==t&&(this.FMax=t,this.UpdateContent())},this.SetMin=function(t){this.FMin!==t&&(this.FMin=t,this.UpdateContent())},this.SetPageSize=function(t){this.FPageSize!==t&&(this.FPageSize=t,this.UpdateContent())},this.GetPosition=function(){var t=0;if(t=0,null!=this.GetElement()){var e=this.FKind;0===e?t=Math.round(this.GetValue(this.GetElement().scrollLeft)):1===e&&(t=Math.round(this.GetValue(this.GetElement().scrollTop)))}else t=this.FPosition;return t},this.GetPageSize=function(){var t=0;return 0===(t=this.FPageSize)&&(t=25),t},this.GetValue=function(t){var e=0;if(e=0,null!=this.FContent){var i=this.FKind;0===i?this.FContent.GetWidth()>0&&(e=t/this.FContent.GetWidth()*(this.FMax-this.FMin)):1===i&&this.FContent.GetHeight()>0&&(e=t/this.FContent.GetHeight()*(this.FMax-this.FMin))}return e},this.CreateElement=function(){return document.createElement("SPAN")},this.DoScroll=function(t){return this.FScrolling=!0,null!=this.FOnChange&&this.FOnChange(this),this.FScrolling=!1,!0,!0},this.BindEvents=function(){pas["WEBLib.Controls"].TCustomControl.BindEvents.call(this),null!=this.GetElementHandle()&&this.GetElementHandle().addEventListener("scroll",this.FScrollPtr)},this.UnbindEvents=function(){pas["WEBLib.Controls"].TControl.UnbindEvents.call(this),null!=this.GetElementHandle()&&this.GetElementHandle().removeEventListener("scroll",this.FScrollPtr)},this.UpdateElementVisual=function(){if(pas["WEBLib.Controls"].TCustomControl.UpdateElementVisual.call(this),null!=this.GetElementHandle()){this.GetElementHandle().style.setProperty("overflow","auto");var t=this.FKind;0===t?(this.GetElementHandle().style.setProperty("overflow-y","hidden"),this.GetElementHandle().style.setProperty("overflow-x","")):1===t&&(this.GetElementHandle().style.setProperty("overflow-y",""),this.GetElementHandle().style.setProperty("overflow-x","hidden"))}},this.UpdateContent=function(){var t,e,i=0,s=0,n=0,r=0;if(null!=this.FContent&&null!=this.GetElementHandle()&&!this.FScrolling){t=this.GetPageSize(),e=(this.FMax-this.FMin)/t;var o=this.FKind;0===o?(s=0,r=this.GetHeight(),n=Math.round(e*this.GetWidth()),i=Math.round((this.FPosition-this.FMin)/(this.FMax-this.FMin)*n)):1===o&&(i=0,n=this.GetWidth(),r=Math.round(e*this.GetHeight()),s=Math.round((this.FPosition-this.FMin)/(this.FMax-this.FMin)*r)),this.FContent.SetBounds(0,0,n,r),this.GetElementHandle().scrollLeft=i,this.GetElementHandle().scrollTop=s}},this.Loaded=function(){pas["WEBLib.Controls"].TCustomControl.Loaded.call(this),this.UpdateContent()},this.ClearMethodPointers=function(){pas["WEBLib.Controls"].TControl.ClearMethodPointers.call(this),this.FScrollPtr=null},this.GetMethodPointers=function(){pas["WEBLib.Controls"].TControl.GetMethodPointers.call(this),this.FScrollPtr=rtl.createCallback(this,"DoScroll")},this.CreateInitialize=function(){pas["WEBLib.Controls"].TCustomControl.CreateInitialize.call(this),this.SetTabStop(!0),this.FKind=0,this.FPosition=0,this.FMin=0,this.FMax=100,this.FSmallChange=1,this.FLargeChange=1,this.FContent=t.TScrollBarContent.$create("Create$1",[this]),this.FContent.SetParent(this),this.FContent.SetWidth(121),this.FContent.SetHeight(17),4 in this.FComponentState&&(this.SetWidth(121),this.SetHeight(17)),this.UpdateContent()},this.Destroy=function(){rtl.free(this,"FContent"),pas["WEBLib.Controls"].TCustomControl.Destroy.call(this)},this.SetBounds=function(t,e,i,s){pas["WEBLib.Controls"].TControl.SetBounds.apply(this,arguments),this.UpdateContent()},rtl.addIntf(this,pas.System.IUnknown);var e=this.$rtti;e.addProperty("Align",2,pas["WEBLib.Controls"].$rtti.TAlign,"FAlign","SetAlign",{Default:pas["WEBLib.Controls"].TAlign.alNone}),e.addProperty("AlignWithMargins",2,rtl.boolean,"FAlignWithMargins","SetAlignWithMargins",{Default:!1}),e.addProperty("DragMode",2,pas["WEBLib.Controls"].$rtti.TDragMode,"FDragMode","SetDragMode",{Default:pas["WEBLib.Controls"].TDragMode.dmManual}),e.addProperty("Height",3,rtl.longint,"GetHeight","SetHeight"),e.addProperty("Kind",2,pas["WEBLib.Controls"].$rtti.TScrollBarKind,"FKind","SetKind"),e.addProperty("Position",3,rtl.longint,"GetPosition","SetPosition"),e.addProperty("Left",3,rtl.longint,"GetLeft","SetLeft"),e.addProperty("SmallChange",0,rtl.longint,"FSmallChange","FSmallChange"),e.addProperty("LargeChange",0,rtl.longint,"FLargeChange","FLargeChange"),e.addProperty("Max",2,rtl.longint,"FMax","SetMax"),e.addProperty("Min",2,rtl.longint,"FMin","SetMin"),e.addProperty("PageSize",3,rtl.longint,"GetPageSize","SetPageSize"),e.addProperty("Top",3,rtl.longint,"GetTop","SetTop"),e.addProperty("Visible",2,rtl.boolean,"FVisible","SetVisible",{Default:!0}),e.addProperty("Width",3,rtl.longint,"GetWidth","SetWidth"),e.addProperty("OnChange",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnChange","FOnChange"),e.addProperty("OnDragDrop",0,pas["WEBLib.Controls"].$rtti.TDragDropEvent,"FOnDragDrop","FOnDragDrop"),e.addProperty("OnDragOver",0,pas["WEBLib.Controls"].$rtti.TDragOverEvent,"FOnDragOver","FOnDragOver"),e.addProperty("OnEndDrag",0,pas["WEBLib.Controls"].$rtti.TEndDragEvent,"FonEndDrag","FonEndDrag"),e.addProperty("OnStartDrag",0,pas["WEBLib.Controls"].$rtti.TStartDragEvent,"FOnStartDrag","FOnStartDrag")})),this.GetAutoCompletionName=function(t){var e="";return 0===t?e="":1===t?e="honorific-prefix":2===t?e="given-name":3===t?e="additional-name":4===t?e="family-name":5===t?e="honorific-suffix":6===t?e="nickname":7===t?e="email":8===t?e="username":9===t?e="new-password":10===t?e="current-password":11===t?e="organization-title":12===t?e="organization":13===t?e="street-address":14===t?e="address-line1":15===t?e="address-line2":16===t?e="address-line3":17===t?e="address-level1":18===t?e="address-level2":19===t?e="address-level3":20===t?e="address-level4":21===t?e="country":22===t?e="country-name":23===t?e="postal-code":24===t?e="cc-name":25===t?e="cc-given-name":26===t?e="cc-additional-name":27===t?e="cc-family-name":28===t?e="cc-number":29===t?e="cc-exp":30===t?e="cc-exp-month":31===t?e="cc-exp-year":32===t?e="cc-csc":33===t?e="cc-type":34===t?e="transaction-currency":35===t?e="transaction-amount":36===t?e="language":37===t?e="bday":38===t?e="bday-day":39===t?e="bday-month":40===t?e="bday-year":41===t?e="sex":42===t?e="tel":43===t?e="tel-country-code":44===t?e="tel-national":45===t?e="tel-area-code":46===t?e="tel-local":47===t?e="tel-extension":48===t?e="impp":49===t?e="url":50===t?e="photo":52===t&&(e="nope"),e}})),rtl.module("WEBLib.ExtCtrls",["System","Classes","SysUtils","Types","WEBLib.Controls","WEBLib.StdCtrls","WEBLib.Graphics","Web","JS","WEBLib.WebTools","WEBLib.Menus"],(function(){"use strict";rtl.createClass(this,"TTimer",pas.Classes.TComponent,(function(){this.$init=function(){pas.Classes.TComponent.$init.call(this),this.FInterval=0,this.FTimerID=0,this.FOnTimer=null,this.FEnabled=!1},this.$final=function(){this.FOnTimer=void 0,pas.Classes.TComponent.$final.call(this)},this.SetEnabled=function(t){this.FEnabled=t,this.DoUpdateTimer()},this.SetInterval=function(t){this.FInterval=t,this.DoUpdateTimer()},this.DoTimer=function(){null!=this.FOnTimer&&this.FOnTimer(this)},this.DoUpdateTimer=function(){this.DoClearTimer(),this.FEnabled&&(this.FTimerID=window.setInterval(rtl.createSafeCallback(this,"DoTimer"),this.FInterval))},this.DoClearTimer=function(){-1!==this.FTimerID&&(window.clearInterval(this.FTimerID),this.FTimerID=-1)},this.Create$1=function(t){return pas.Classes.TComponent.Create$1.apply(this,arguments),this.FInterval=1e3,this.FTimerID=-1,this.SetEnabled(!0),this},this.Destroy=function(){this.DoClearTimer(),pas.Classes.TComponent.Destroy.call(this)},rtl.addIntf(this,pas.System.IUnknown);var t=this.$rtti;t.addProperty("Enabled",2,rtl.boolean,"FEnabled","SetEnabled",{Default:!0}),t.addProperty("Interval",2,rtl.longint,"FInterval","SetInterval",{Default:1e3}),t.addProperty("OnTimer",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnTimer","FOnTimer")})),rtl.createClass(this,"TCustomPanel",pas["WEBLib.Menus"].TWebCustomControl,(function(){this.$init=function(){pas["WEBLib.Menus"].TWebCustomControl.$init.call(this),this.FAutoSize=!1,this.FIsSizing=!1,this.FPadding=null,this.FShowCaption=!1,this.FLabel=null,this.FPanelBody=null,this.FElementBodyClassName="",this.FAlignment=0},this.$final=function(){this.FPadding=void 0,this.FLabel=void 0,this.FPanelBody=void 0,pas["WEBLib.Menus"].TWebCustomControl.$final.call(this)},this.SetShowCaption=function(t){this.FShowCaption!==t&&(this.FShowCaption=t,this.UpdateElementVisual())},this.SetPadding=function(t){this.FPadding.Assign(t)},this.SetAlignment=function(t){this.FAlignment!==t&&(this.FAlignment=t,this.UpdateElement())},this.CreateElement=function(){var t=null;return t=document.createElement("SPAN"),this.FPanelBody=document.createElement("DIV"),this.FPanelBody.setAttribute("class","card-body"),t.appendChild(this.FPanelBody),t},this.SetCaption=function(t){pas["WEBLib.Controls"].TCustomControl.SetCaption.call(this,t),null!=this.GetElementHandle()&&this.FShowCaption&&(null==this.FLabel?(this.FLabel=document.createElement("SPAN"),this.FLabel.innerHTML=this.FCaption,null!=this.GetChildContainer()?this.GetChildContainer().appendChild(this.FLabel):this.GetElementHandle().appendChild(this.FLabel),this.UpdateElementVisual()):this.FLabel.innerHTML=this.FCaption)},this.SetBorderStyle=function(t){pas["WEBLib.Controls"].TCustomControl.SetBorderStyle.apply(this,arguments),this.UpdateElement()},this.SetAutoSize=function(t){this.FAutoSize=t,this.FAutoSize&&!this.IsUpdating()&&this.DoAutoSize()},this.UpdateElementVisual=function(){if(pas["WEBLib.Controls"].TCustomControl.UpdateElementVisual.call(this),null!=this.GetElementHandle()){if(this.GetIsLinked()||(this.FAutoSize?(this.GetElementHandle().style.setProperty("overflow",""),this.GetElementHandle().style.setProperty("white-space","normal"),this.FVisible&&this.GetElementHandle().style.setProperty("display","inline")):(this.GetElementHandle().style.setProperty("overflow","hidden"),this.GetElementHandle().style.setProperty("white-space","nowrap"),this.FVisible&&this.GetElementHandle().style.setProperty("display","inline-block")),this.GetElementHandle().style.setProperty("padding-left",pas.SysUtils.IntToStr(this.FPadding.FLeft)+"px"),this.GetElementHandle().style.setProperty("padding-right",pas.SysUtils.IntToStr(this.FPadding.FRight)+"px"),this.GetElementHandle().style.setProperty("padding-top",pas.SysUtils.IntToStr(this.FPadding.FTop)+"px"),this.GetElementHandle().style.setProperty("padding-bottom",pas.SysUtils.IntToStr(this.FPadding.FBottom)+"px"),this.GetElementHandle().style.setProperty("box-sizing","border-box"),""!==this.FElementBodyClassName?this.GetChildContainer().setAttribute("class",this.FElementBodyClassName):this.GetChildContainer().removeAttribute("class")),null!=this.FLabel&&(this.FShowCaption?this.FLabel.innerHTML=this.FCaption:this.FLabel.innerHTML="",this.FVisible)){this.GetElementHandle().style.setProperty("display","flex");var t=this.FAlignment;0===t?this.GetElementHandle().style.setProperty("justify-content","flex-start"):2===t?this.GetElementHandle().style.setProperty("justify-content","center"):1===t&&this.GetElementHandle().style.setProperty("justify-content","flex-end"),this.GetElementHandle().style.setProperty("align-items","center")}this.GetElementHandle().style.setProperty("user-select",""),0===this.FCursor&&this.GetElementHandle().style.setProperty("cursor","")}},this.GetOuterWidth=function(){return pas["WEBLib.Controls"].TControl.GetOuterWidth.call(this)},this.GetOuterHeight=function(){return pas["WEBLib.Controls"].TControl.GetOuterHeight.call(this)},this.GetChildContainer=function(){return null!=this.FPanelBody?this.FPanelBody:pas["WEBLib.Controls"].TControl.GetChildContainer.call(this)},this.RegisterParent=function(t){pas["WEBLib.Controls"].TControl.RegisterParent.apply(this,arguments),this.FAutoSize&&this.DoAutoSize()},this.UnRegisterParent=function(t){pas["WEBLib.Controls"].TControl.UnRegisterParent.apply(this,arguments),this.FAutoSize&&this.DoAutoSize()},this.DoAutoSize=function(){var t=0,e=0,i=0,s=0,n=0,r=null,o=null;if(!this.FIsSizing){if(this.FIsSizing=!0,1===this.FWidthStyle&&1===this.FHeightStyle){s=0,n=0,e=65535,i=65535;for(var a=0,l=this.GetControlsCount()-1;a<=l;a++)t=a,1===this.GetControls(t).FWidthStyle?(this.GetControls(t).GetLeft()+this.GetControls(t).GetWidth()>s&&(s=this.GetControls(t).GetLeft()+this.GetControls(t).GetWidth()),this.GetControls(t).GetLeft()<e&&(e=this.GetControls(t).GetLeft())):null!=(o=this.GetControls(t).GetElementHandle())&&((r=o.getBoundingClientRect()).x-this.GetLeft()+r.width>s&&(s=Math.round(r.x-this.GetLeft()+r.width)),e=0),1===this.GetControls(t).FHeightStyle?(this.GetControls(t).GetTop()+this.GetControls(t).GetHeight()>n&&(n=this.GetControls(t).GetTop()+this.GetControls(t).GetHeight()),this.GetControls(t).GetTop()<i&&(i=this.GetControls(t).GetTop())):null!=(o=this.GetControls(t).GetElementHandle())&&((r=o.getBoundingClientRect()).y-this.GetTop()+r.height>n&&(n=Math.round(r.y-this.GetTop()+r.height)),i=0);if(4 in this.FComponentState&&(0===this.GetControlsCount()||0===s||0===n))return;1===this.FBorderStyle&&(s+=1,n+=1);for(var h=0,F=this.GetControlsCount()-1;h<=F;h++)t=h,this.GetControls(t).SetLeft(this.GetControls(t).GetLeft()-e),this.GetControls(t).SetTop(this.GetControls(t).GetTop()-i);this.SetWidth(s-e),this.SetHeight(n-i)}else this.SetWidth(-1),this.SetHeight(-1);this.UpdateElement(),this.FIsSizing=!1}},this.AlignControl=function(t){pas["WEBLib.Controls"].TControl.AlignControl.apply(this,arguments),this.FAutoSize&&this.DoAutoSize()},this.CreateInitialize=function(){pas["WEBLib.Controls"].TCustomControl.CreateInitialize.call(this),4 in this.FComponentState&&(this.FEnablePropagation=!0),this.FAutoSize=!1,this.FAlignment=2,this.SetColor(15790320),this.SetTabStop(!1),this.FCustomBorder=!0,this.SetShowCaption(!0),this.FControlStyle=rtl.unionSet(this.FControlStyle,rtl.createSet(0)),this.FLabel=null,this.FPadding=pas["WEBLib.Controls"].TPadding.$create("Create$1"),4 in this.FComponentState&&(this.SetWidth(400),this.SetHeight(300))},this.Destroy=function(){rtl.free(this,"FPadding"),pas["WEBLib.Controls"].TCustomControl.Destroy.call(this)},this.EndUpdate=function(){pas["WEBLib.Controls"].TCustomControl.EndUpdate.call(this),this.FAutoSize&&this.SetAutoSize(!0)},this.SetBounds=function(t,e,i,s){pas["WEBLib.Controls"].TControl.SetBounds.apply(this,arguments),this.FAutoSize&&this.DoAutoSize()},rtl.addIntf(this,pas.System.IUnknown)})),rtl.createClass(this,"TPanel",this.TCustomPanel,(function(){rtl.addIntf(this,pas.System.IUnknown);var t=this.$rtti;t.addProperty("Align",2,pas["WEBLib.Controls"].$rtti.TAlign,"FAlign","SetAlign",{Default:pas["WEBLib.Controls"].TAlign.alNone}),t.addProperty("Alignment",2,pas.Classes.$rtti.TAlignment,"FAlignment","SetAlignment",{Default:pas.Classes.TAlignment.taCenter}),t.addProperty("AlignWithMargins",2,rtl.boolean,"FAlignWithMargins","SetAlignWithMargins",{Default:!1}),t.addProperty("Anchors",2,pas["WEBLib.Controls"].$rtti.TAnchors,"FAnchors","SetAnchors",{Default:rtl.createSet(0,1)}),t.addProperty("AutoSize",2,rtl.boolean,"FAutoSize","SetAutoSize",{Default:!1}),t.addProperty("BorderColor",2,pas["WEBLib.Graphics"].$rtti.TColor,"FBorderColor","SetBorderColor",{Default:12632256}),t.addProperty("BorderStyle",2,pas["WEBLib.Controls"].$rtti.TBorderStyle,"FBorderStyle","SetBorderStyle",{Default:pas["WEBLib.Controls"].TBorderStyle.bsSingle}),t.addProperty("Caption",2,rtl.string,"FCaption","SetCaption"),t.addProperty("ChildOrder",2,rtl.longint,"FChildOrder","SetChildOrderEx",{Default:0}),t.addProperty("Color",2,pas["WEBLib.Graphics"].$rtti.TColor,"FColor","SetColor"),t.addProperty("DragMode",2,pas["WEBLib.Controls"].$rtti.TDragMode,"FDragMode","SetDragMode",{Default:pas["WEBLib.Controls"].TDragMode.dmManual}),t.addProperty("ElementBodyClassName",0,pas["WEBLib.Controls"].$rtti.TElementClassName,"FElementBodyClassName","FElementBodyClassName"),t.addProperty("ElementID",3,pas["WEBLib.Controls"].$rtti.TElementID,"GetID","SetID"),t.addProperty("ElementFont",2,pas["WEBLib.Controls"].$rtti.TElementFont,"FElementFont","SetElementFont",{Default:pas["WEBLib.Controls"].TElementFont.efProperty}),t.addProperty("ElementPosition",2,pas["WEBLib.Controls"].$rtti.TElementPosition,"FElementPosition","SetElementPosition",{Default:pas["WEBLib.Controls"].TElementPosition.epAbsolute}),t.addProperty("Font",2,pas["WEBLib.Graphics"].$rtti.TFont,"FFont","SetFont"),t.addProperty("HeightPercent",2,rtl.double,"FHeightPercent","SetHeightPercent",{Default:100}),t.addProperty("HeightStyle",2,pas["WEBLib.Controls"].$rtti.TSizeStyle,"FHeightStyle","SetHeightStyle",{Default:pas["WEBLib.Controls"].TSizeStyle.ssAbsolute}),t.addProperty("Margins",2,pas["WEBLib.Controls"].$rtti.TMargins,"FMargins","SetMargins"),t.addProperty("Padding",2,pas["WEBLib.Controls"].$rtti.TPadding,"FPadding","SetPadding"),t.addProperty("ParentFont",2,rtl.boolean,"FParentFont","SetParentFont",{Default:!0}),t.addProperty("PopupMenu",0,pas["WEBLib.Menus"].$rtti.TPopupMenu,"FPopupMenu","FPopupMenu"),t.addProperty("Role",3,rtl.string,"GetRole","SetRole"),t.addProperty("ShowCaption",2,rtl.boolean,"FShowCaption","SetShowCaption",{Default:!0}),t.addProperty("WidthPercent",2,rtl.double,"FWidthPercent","SetWidthPercent",{Default:100}),t.addProperty("WidthStyle",2,pas["WEBLib.Controls"].$rtti.TSizeStyle,"FWidthStyle","SetWidthStyle",{Default:pas["WEBLib.Controls"].TSizeStyle.ssAbsolute}),t.addProperty("OnClick",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnClick","FOnClick"),t.addProperty("OnDblClick",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnDblClick","FOnDblClick"),t.addProperty("OnDragDrop",0,pas["WEBLib.Controls"].$rtti.TDragDropEvent,"FOnDragDrop","FOnDragDrop"),t.addProperty("OnDragOver",0,pas["WEBLib.Controls"].$rtti.TDragOverEvent,"FOnDragOver","FOnDragOver"),t.addProperty("OnEndDrag",0,pas["WEBLib.Controls"].$rtti.TEndDragEvent,"FonEndDrag","FonEndDrag"),t.addProperty("OnStartDrag",0,pas["WEBLib.Controls"].$rtti.TStartDragEvent,"FOnStartDrag","FOnStartDrag")})),rtl.createClass(this,"TSplitter",pas["WEBLib.Controls"].TCustomControl,(function(){this.$init=function(){pas["WEBLib.Controls"].TCustomControl.$init.call(this),this.FLayer$1=null,this.FTouched=!1,this.FFirstMove=!1,this.FSplitControl=null,this.FSizing=!1,this.FSizingX=0,this.FSizingY=0,this.FOriginalWidth=0,this.FOriginalHeight=0,this.FGripColor=0,this.FOnMoved=null,this.FOnMove=null},this.$final=function(){this.FLayer$1=void 0,this.FSplitControl=void 0,this.FOnMoved=void 0,this.FOnMove=void 0,pas["WEBLib.Controls"].TCustomControl.$final.call(this)},this.SetGripColor=function(t){this.FGripColor!==t&&(this.FGripColor=t,this.Invalidate())},this.CreateElement=function(){return pas["WEBLib.Controls"].TCustomControl.CreateElement.call(this)},this.UpdateElement=function(){pas["WEBLib.Controls"].TControl.UpdateElement.call(this)},this.UpdateElementSize=function(){pas["WEBLib.Controls"].TControl.UpdateElementSize.call(this)},this.ColorChanging=function(){pas["WEBLib.Controls"].TControl.ColorChanging.call(this),this.Invalidate()},this.DoSizeStart=function(t,e){var i=pas.Types.TRect.$new(),s=pas.Types.TRect.$new(),n=0,r=null,o=null;if(this.FSizing=!0,i.$assign(pas.Types.Rect(this.GetLeft(),this.GetTop(),this.GetLeft()+this.GetWidth(),this.GetTop()+this.GetHeight())),null!=this.FParent)for(var a=0,l=this.FParent.GetControlsCount()-1;a<=l;a++)if(n=a,(r=this.FParent.GetControls(n)).FAlign===this.FAlign&&r!==this){if(s.$assign(pas.Types.Rect(r.GetLeft(),r.GetTop(),r.GetLeft()+r.GetWidth(),r.GetTop()+r.GetHeight())),3===this.FAlign&&s.Right-i.Left<4){this.FSplitControl=r,this.FOriginalWidth=this.FSplitControl.GetWidth(),this.FSizing=!0,this.FSizingX=t,this.FSizingY=e;break}if(4===this.FAlign&&s.Left-i.Right<4){this.FSplitControl=r,this.FOriginalWidth=this.FSplitControl.GetWidth(),this.FSizing=!0,this.FSizingX=t,this.FSizingY=e;break}if(1===this.FAlign&&s.Bottom-i.Top<4){this.FSplitControl=r,this.FOriginalHeight=this.FSplitControl.GetHeight(),this.FSizing=!0,this.FSizingX=t,this.FSizingY=e;break}if(2===this.FAlign&&s.Top-i.Bottom<4){this.FSplitControl=r,this.FOriginalHeight=this.FSplitControl.GetHeight(),this.FSizing=!0,this.FSizingX=t,this.FSizingY=e;break}}this.FLayer$1=document.createElement("SPAN"),document.body.appendChild(this.FLayer$1),(o=this.FLayer$1).style.setProperty("top","0"),o.style.setProperty("left","0"),o.style.setProperty("right","0"),o.style.setProperty("bottom","0"),o.style.setProperty("z-index","99999999"),o.style.setProperty("webkit-user-select","none"),o.style.setProperty("moz-user-select","none"),o.style.setProperty("khtml-user-select","none"),o.style.setProperty("ms-user-select","none"),o.style.setProperty("user-select","none"),o.style.setProperty("position","absolute"),this.FAlign in rtl.createSet(3,4)&&o.style.setProperty("cursor","col-resize"),this.FAlign in rtl.createSet(1,2)&&o.style.setProperty("cursor","row-resize"),this.FFirstMove=!0,this.FSizing=!0,o.addEventListener("mousemove",rtl.createCallback(this,"HandleDocDoMouseMove")),o.addEventListener("mouseup",rtl.createCallback(this,"HandleDocDoMouseUp")),o.addEventListener("touchmove",rtl.createCallback(this,"HandleDocDoTouchMove")),o.addEventListener("touchend",rtl.createCallback(this,"HandleDocDoTouchEnd"))},this.HandleDoTouchStart=function(t){var e=0,i=0,s=null;return this.StopPropagation(),this.PreventDefault(),t.touches.length>0&&(s=t.touches.item(0),this.FTouched=!0,this.Invalidate(),this.Invalidate(),this.XYToClient(s.clientX,s.clientY,{get:function(){return e},set:function(t){e=t}},{get:function(){return i},set:function(t){i=t}}),this.DoSizeStart(Math.round(e),Math.round(i))),!1,!1},this.HandleDocDoMouseMove=function(t){var e=0,i=0;return this.FSizing&&null!=this.FSplitControl&&(this.FFirstMove?(this.FSizingX=t.clientX,this.FSizingY=t.clientY,this.FFirstMove=!1):(e=Math.round(t.clientX-this.FSizingX),i=Math.round(t.clientY-this.FSizingY),3===this.FAlign&&this.FSplitControl.SetWidth(this.FOriginalWidth+e),4===this.FAlign&&this.FSplitControl.SetWidth(this.FOriginalWidth-e),1===this.FAlign&&this.FSplitControl.SetHeight(this.FOriginalHeight+i),2===this.FAlign&&this.FSplitControl.SetHeight(this.FOriginalHeight-i),this.DoRealign(),null!=this.FOnMove&&this.FOnMove(this))),!0,!0},this.HandleDocDoMouseUp=function(t){return this.FSizing=!1,this.FSplitControl=null,this.FFirstMove=!0,this.FLayer$1.parentNode.removeChild(this.FLayer$1),!0,null!=this.FOnMoved&&this.FOnMoved(this),!0},this.HandleDocDoTouchMove=function(t){var e=null,i=0,s=0;return this.StopPropagation(),t.touches.length>0&&(e=t.touches.item(0),this.FSizing&&null!=this.FSplitControl&&(this.FFirstMove?(this.FSizingX=e.clientX,this.FSizingY=e.clientY,this.FFirstMove=!1):(i=Math.round(e.clientX-this.FSizingX),s=Math.round(e.clientY-this.FSizingY),3===this.FAlign&&this.FSplitControl.SetWidth(this.FOriginalWidth+i),4===this.FAlign&&this.FSplitControl.SetWidth(this.FOriginalWidth-i),1===this.FAlign&&this.FSplitControl.SetHeight(this.FOriginalHeight+s),2===this.FAlign&&this.FSplitControl.SetHeight(this.FOriginalHeight-s),this.DoRealign(),null!=this.FOnMove&&this.FOnMove(this)))),!0,!0},this.HandleDocDoTouchEnd=function(t){return this.FTouched=!1,this.Invalidate(),this.FSizing=!1,this.FSplitControl=null,this.FFirstMove=!0,this.FLayer$1.parentNode.removeChild(this.FLayer$1),!0,null!=this.FOnMoved&&this.FOnMoved(this),!0},this.DoMouseEnter=function(){pas["WEBLib.Controls"].TControl.DoMouseEnter.call(this),this.FAlign in rtl.createSet(3,4)&&this.SetControlCursor(14),this.FAlign in rtl.createSet(1,2)&&this.SetControlCursor(15)},this.MouseUp=function(t,e,i,s){pas["WEBLib.Controls"].TControl.MouseUp.apply(this,arguments),this.FSizing=!1,this.FSplitControl=null},this.MouseDown=function(t,e,i,s){pas["WEBLib.Controls"].TControl.MouseDown.apply(this,arguments),this.DoSizeStart(i,s)},this.Paint=function(){var t=0,e=0,i=0,s=0,n=0;this.FTouched?(this.GetCanvas().FBrush.FColor=8421504,this.GetCanvas().FPen.SetColor(8421504)):(this.GetCanvas().FBrush.FColor=this.FColor,this.GetCanvas().FPen.SetColor(this.FColor)),this.GetCanvas().FBrush.FStyle=0,this.GetCanvas().Rectangle$2(this.GetClientRect()),this.FAlign in rtl.createSet(3,4)&&(e=0,s=6,i=rtl.trunc(this.GetHeight()/2)-9,t=rtl.trunc(this.GetWidth()/2)),this.FAlign in rtl.createSet(1,2)&&(e=6,s=0,t=rtl.trunc(this.GetWidth()/2)-9,i=rtl.trunc(this.GetHeight()/2)-1),this.GetCanvas().FBrush.FColor=this.FGripColor,this.GetCanvas().FPen.SetColor(this.FGripColor);for(n=0;n<=2;n++)this.GetCanvas().Rectangle$1(t,i,t+2,i+2),t+=e,i+=s},this.CreateInitialize=function(){pas["WEBLib.Controls"].TCustomControl.CreateInitialize.call(this),this.SetControlCursor(14),4 in this.FComponentState&&(this.SetWidth(6),this.SetHeight(100)),this.SetAlign(3),this.FSplitControl=null,this.SetGripColor(16777215)},rtl.addIntf(this,pas.System.IUnknown);var t=this.$rtti;t.addProperty("Align",2,pas["WEBLib.Controls"].$rtti.TAlign,"FAlign","SetAlign",{Default:pas["WEBLib.Controls"].TAlign.alNone}),t.addProperty("AlignWithMargins",2,rtl.boolean,"FAlignWithMargins","SetAlignWithMargins",{Default:!1}),t.addProperty("Color",2,pas["WEBLib.Graphics"].$rtti.TColor,"FColor","SetColor"),t.addProperty("HeightPercent",2,rtl.double,"FHeightPercent","SetHeightPercent",{Default:100}),t.addProperty("HeightStyle",2,pas["WEBLib.Controls"].$rtti.TSizeStyle,"FHeightStyle","SetHeightStyle",{Default:pas["WEBLib.Controls"].TSizeStyle.ssAbsolute}),t.addProperty("ElementFont",2,pas["WEBLib.Controls"].$rtti.TElementFont,"FElementFont","SetElementFont",{Default:pas["WEBLib.Controls"].TElementFont.efProperty}),t.addProperty("ElementID",3,pas["WEBLib.Controls"].$rtti.TElementID,"GetID","SetID"),t.addProperty("ElementPosition",2,pas["WEBLib.Controls"].$rtti.TElementPosition,"FElementPosition","SetElementPosition",{Default:pas["WEBLib.Controls"].TElementPosition.epAbsolute}),t.addProperty("GripColor",2,pas["WEBLib.Graphics"].$rtti.TColor,"FGripColor","SetGripColor",{Default:16777215}),t.addProperty("Margins",2,pas["WEBLib.Controls"].$rtti.TMargins,"FMargins","SetMargins"),t.addProperty("WidthPercent",2,rtl.double,"FWidthPercent","SetWidthPercent",{Default:100}),t.addProperty("WidthStyle",2,pas["WEBLib.Controls"].$rtti.TSizeStyle,"FWidthStyle","SetWidthStyle",{Default:pas["WEBLib.Controls"].TSizeStyle.ssAbsolute}),t.addProperty("OnClick",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnClick","FOnClick"),t.addProperty("OnMove",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnMove","FOnMove"),t.addProperty("OnMoved",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnMoved","FOnMoved")}))}),["WEBLib.Utils"]),rtl.module("WEBLib.ComCtrls",["System","Classes","SysUtils","Web","WEBLib.Controls","WEBLib.Graphics","WEBLib.ExtCtrls","WEBLib.Menus"],(function(){"use strict";var t=this;rtl.createClass(this,"TTabSheet",pas["WEBLib.ExtCtrls"].TCustomPanel,(function(){this.$init=function(){pas["WEBLib.ExtCtrls"].TCustomPanel.$init.call(this),this.FTabVisible=!1,this.FPosUpdating=!1,this.FOnShow=null,this.FOnHide=null,this.FMaterialGlyph="",this.FMaterialGlyphColor=0,this.FMaterialGlyphType=0,this.FMaterialGlyphSize=0},this.$final=function(){this.FOnShow=void 0,this.FOnHide=void 0,pas["WEBLib.ExtCtrls"].TCustomPanel.$final.call(this)},this.SetTabVisible=function(e){this.FTabVisible!==e&&(this.FTabVisible=e,null!=this.FParent&&t.TPageControl.isPrototypeOf(this.FParent)&&rtl.as(this.FParent,t.TPageControl).DoUpdateList())},this.GetPageIndex=function(){var e=0,i=0,s=0,n=null;if(e=-1,t.TPageControl.isPrototypeOf(this.FParent)){s=0;for(var r=0,o=(n=rtl.as(this.FParent,t.TPageControl)).GetControlsCount()-1;r<=o;r++)i=r,t.TTabSheet.isPrototypeOf(n.GetControls(i))&&(n.GetControls(i)===this?e=s:s+=1)}return e},this.SetPageIndex=function(t){},this.SetMaterialGlyph=function(e){this.FMaterialGlyph!==e&&(this.FMaterialGlyph=e,t.TPageControl.isPrototypeOf(this.FParent)&&rtl.as(this.FParent,t.TPageControl).DoUpdateList())},this.SetMaterialGlyphColor=function(e){this.FMaterialGlyphColor!==e&&(this.FMaterialGlyphColor=e,t.TPageControl.isPrototypeOf(this.FParent)&&rtl.as(this.FParent,t.TPageControl).DoUpdateList())},this.SetMaterialGlyphSize=function(e){this.FMaterialGlyphSize!==e&&(this.FMaterialGlyphSize=e,t.TPageControl.isPrototypeOf(this.FParent)&&rtl.as(this.FParent,t.TPageControl).DoUpdateList())},this.SetMaterialGlyphType=function(e){this.FMaterialGlyphType!==e&&(this.FMaterialGlyphType=e,t.TPageControl.isPrototypeOf(this.FParent)&&rtl.as(this.FParent,t.TPageControl).DoUpdateList())},this.SetCaption=function(e){pas["WEBLib.ExtCtrls"].TCustomPanel.SetCaption.apply(this,arguments),null!=this.FParent&&t.TPageControl.isPrototypeOf(this.FParent)&&rtl.as(this.FParent,t.TPageControl).DoUpdateList()},this.SetParent=function(e){t.TTabSheet.isPrototypeOf(e)&&t.TPageControl.isPrototypeOf(rtl.as(e,t.TTabSheet).FParent)&&(e=rtl.as(e,t.TTabSheet).FParent),pas["WEBLib.Controls"].TControl.SetParent.call(this,e),null!=this.FParent&&t.TPageControl.isPrototypeOf(this.FParent)&&rtl.as(this.FParent,t.TPageControl).DoUpdateList()},this.ResetUpdate=function(){pas["WEBLib.ExtCtrls"].TCustomPanel.EndUpdate.call(this)},this.CreateInitialize=function(){pas["WEBLib.ExtCtrls"].TCustomPanel.CreateInitialize.call(this),this.FEnablePropagation=!0,this.FControlStyle=rtl.unionSet(this.FControlStyle,rtl.createSet(0)),this.SetColor(16777215),this.SetTabVisible(!0),this.SetShowCaption(!1),this.FPosUpdating=!1,this.FMaterialGlyphSize=18,this.FMaterialGlyphType=0,this.FMaterialGlyphColor=-1},this.EndUpdate=function(){pas["WEBLib.ExtCtrls"].TCustomPanel.EndUpdate.call(this),null!=this.FParent&&t.TPageControl.isPrototypeOf(this.FParent)&&rtl.as(this.FParent,t.TPageControl).DoUpdateList()},this.SetBounds=function(e,i,s,n){pas["WEBLib.ExtCtrls"].TCustomPanel.SetBounds.apply(this,arguments),t.TPageControl.isPrototypeOf(this.FParent)&&!this.FPosUpdating&&(this.FPosUpdating=!0,rtl.as(this.FParent,t.TPageControl).DoUpdateList(),this.FPosUpdating=!1)},this.Destroy=function(){var e=null;e=null,null!=this.FParent&&t.TPageControl.isPrototypeOf(this.FParent)&&(e=rtl.as(this.FParent,t.TPageControl)),pas["WEBLib.ExtCtrls"].TCustomPanel.Destroy.call(this),null!=e&&(e.DoUpdateList(),e.SetTabIndex(0))},rtl.addIntf(this,pas.System.IUnknown);var e=this.$rtti;e.addProperty("Alignment",2,pas.Classes.$rtti.TAlignment,"FAlignment","SetAlignment",{Default:pas.Classes.TAlignment.taCenter}),e.addProperty("AlignWithMargins",2,rtl.boolean,"FAlignWithMargins","SetAlignWithMargins",{Default:!1}),e.addProperty("BorderColor",2,pas["WEBLib.Graphics"].$rtti.TColor,"FBorderColor","SetBorderColor",{Default:12632256}),e.addProperty("BorderStyle",2,pas["WEBLib.Controls"].$rtti.TBorderStyle,"FBorderStyle","SetBorderStyle",{Default:pas["WEBLib.Controls"].TBorderStyle.bsSingle}),e.addProperty("Caption",2,rtl.string,"FCaption","SetCaption"),e.addProperty("Color",2,pas["WEBLib.Graphics"].$rtti.TColor,"FColor","SetColor"),e.addProperty("DragMode",2,pas["WEBLib.Controls"].$rtti.TDragMode,"FDragMode","SetDragMode",{Default:pas["WEBLib.Controls"].TDragMode.dmManual}),e.addProperty("ElementBodyClassName",0,pas["WEBLib.Controls"].$rtti.TElementClassName,"FElementBodyClassName","FElementBodyClassName"),e.addProperty("ElementID",3,pas["WEBLib.Controls"].$rtti.TElementID,"GetID","SetID"),e.addProperty("ElementFont",2,pas["WEBLib.Controls"].$rtti.TElementFont,"FElementFont","SetElementFont",{Default:pas["WEBLib.Controls"].TElementFont.efProperty}),e.addProperty("ElementPosition",2,pas["WEBLib.Controls"].$rtti.TElementPosition,"FElementPosition","SetElementPosition",{Default:pas["WEBLib.Controls"].TElementPosition.epAbsolute}),e.addProperty("Font",2,pas["WEBLib.Graphics"].$rtti.TFont,"FFont","SetFont"),e.addProperty("HeightPercent",2,rtl.double,"FHeightPercent","SetHeightPercent",{Default:100}),e.addProperty("HeightStyle",2,pas["WEBLib.Controls"].$rtti.TSizeStyle,"FHeightStyle","SetHeightStyle",{Default:pas["WEBLib.Controls"].TSizeStyle.ssAbsolute}),e.addProperty("Margins",2,pas["WEBLib.Controls"].$rtti.TMargins,"FMargins","SetMargins"),e.addProperty("MaterialGlyph",2,rtl.string,"FMaterialGlyph","SetMaterialGlyph"),e.addProperty("MaterialGlyphColor",2,pas["WEBLib.Graphics"].$rtti.TColor,"FMaterialGlyphColor","SetMaterialGlyphColor",{Default:-1}),e.addProperty("MaterialGlyphSize",2,rtl.longint,"FMaterialGlyphSize","SetMaterialGlyphSize",{Default:18}),e.addProperty("MaterialGlyphType",2,pas["WEBLib.Controls"].$rtti.TMaterialGlyphType,"FMaterialGlyphType","SetMaterialGlyphType",{Default:pas["WEBLib.Controls"].TMaterialGlyphType.mgNormal}),e.addProperty("Padding",2,pas["WEBLib.Controls"].$rtti.TPadding,"FPadding","SetPadding"),e.addProperty("PageIndex",7,rtl.longint,"GetPageIndex","SetPageIndex"),e.addProperty("ParentFont",2,rtl.boolean,"FParentFont","SetParentFont",{Default:!0}),e.addProperty("Role",3,rtl.string,"GetRole","SetRole"),e.addProperty("WidthPercent",2,rtl.double,"FWidthPercent","SetWidthPercent",{Default:100}),e.addProperty("WidthStyle",2,pas["WEBLib.Controls"].$rtti.TSizeStyle,"FWidthStyle","SetWidthStyle",{Default:pas["WEBLib.Controls"].TSizeStyle.ssAbsolute}),e.addProperty("TabVisible",2,rtl.boolean,"FTabVisible","SetTabVisible",{Default:!0}),e.addProperty("Visible",2,rtl.boolean,"FVisible","SetVisible",{Default:!0}),e.addProperty("OnClick",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnClick","FOnClick"),e.addProperty("OnDblClick",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnDblClick","FOnDblClick"),e.addProperty("OnHide",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnHide","FOnHide"),e.addProperty("OnMouseDown",0,pas["WEBLib.Controls"].$rtti.TMouseEvent,"FOnMouseDown","FOnMouseDown"),e.addProperty("OnMouseMove",0,pas["WEBLib.Controls"].$rtti.TMouseMoveEvent,"FOnMouseMove","FOnMouseMove"),e.addProperty("OnMouseUp",0,pas["WEBLib.Controls"].$rtti.TMouseEvent,"FOnMouseUp","FOnMouseUp"),e.addProperty("OnDragDrop",0,pas["WEBLib.Controls"].$rtti.TDragDropEvent,"FOnDragDrop","FOnDragDrop"),e.addProperty("OnDragOver",0,pas["WEBLib.Controls"].$rtti.TDragOverEvent,"FOnDragOver","FOnDragOver"),e.addProperty("OnEndDrag",0,pas["WEBLib.Controls"].$rtti.TEndDragEvent,"FonEndDrag","FonEndDrag"),e.addProperty("OnShow",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnShow","FOnShow"),e.addProperty("OnStartDrag",0,pas["WEBLib.Controls"].$rtti.TStartDragEvent,"FOnStartDrag","FOnStartDrag")})),rtl.createClass(this,"TWebTabSheet",this.TTabSheet,(function(){rtl.addIntf(this,pas.System.IUnknown)})),rtl.createClass(this,"TPageControl",pas["WEBLib.Menus"].TWebCustomControl,(function(){this.$init=function(){pas["WEBLib.Menus"].TWebCustomControl.$init.call(this),this.FDesignTime=!1,this.FPrevTabIndex=0,this.FItems=null,this.FTabIndex=0,this.FSelectedColor=0,this.FOnChange=null,this.FSelectedTextColor=0,this.FShowTabs=!1,this.FOldVisible=!1},this.$final=function(){this.FItems=void 0,this.FOnChange=void 0,pas["WEBLib.Menus"].TWebCustomControl.$final.call(this)},this.SetSelectedColor=function(t){this.FSelectedColor!==t&&(this.FSelectedColor=t,this.DoUpdateList())},this.SetTabIndex=function(t){0 in this.FComponentState&&(this.FTabIndex=t),this.FTabIndex!==t&&t>=0&&t<this.PageCount()&&(this.FTabIndex=t,this.FPrevTabIndex=this.FTabIndex,this.DoUpdateList())},this.SetSelectedTextColor=function(t){this.FSelectedTextColor!==t&&(this.FSelectedTextColor=t,this.DoUpdateList())},this.SetShowTabs=function(t){this.FShowTabs!==t&&(this.FShowTabs=t,this.DoUpdateList())},this.GetPage=function(e){var i=null,s=0,n=0;s=-1,i=null;for(var r=0,o=this.GetControlsCount()-1;r<=o;r++)if(n=r,t.TTabSheet.isPrototypeOf(this.GetControls(n))&&(s+=1),s===e){i=rtl.as(this.GetControls(n),t.TTabSheet);break}return i},this.CreateElement=function(){return document.createElement("SPAN")},this.HandleDoClick=function(t){var e="",i="",s=0,n=null,r=null;return e="",(n=t.target).hasAttribute("id")&&(e=n.getAttribute("id")),""!==e&&(""===(i=this.GetID())&&(i=this.FName),e=pas.SysUtils.StringReplace(e,i+"_","",{}),pas.SysUtils.TryStrToInt(e,{get:function(){return s},set:function(t){s=t}})&&(-1!==this.FTabIndex&&null!=(r=this.GetPage(this.FTabIndex))&&null!=r.FOnHide&&r.FOnHide(r),this.FTabIndex=s,this.DoUpdateList(),-1!==this.FTabIndex&&null!=(r=this.GetPage(this.FTabIndex))&&null!=r.FOnShow&&r.FOnShow(r)),pas["WEBLib.Controls"].TControl.HandleDoClick.apply(this,arguments)),!0},this.HandleDoChange=function(t){return this.FPrevTabIndex!==this.FTabIndex&&(this.FPrevTabIndex=this.FTabIndex,null!=this.FOnChange&&this.FOnChange(this)),!0,!0},this.CanAcceptChild=function(e){var i=null;return i=pas["WEBLib.Controls"].TControl.CanAcceptChild.apply(this,arguments),null==e||t.TTabSheet.isPrototypeOf(e)||(i=this.FParent),i},this.BindEvents=function(){pas["WEBLib.Controls"].TCustomControl.BindEvents.call(this),null!=this.GetElementHandle()&&(this.GetElementHandle().onclick=rtl.createSafeCallback(this,"HandleDoChange"))},this.UpdateElement=function(){pas["WEBLib.Controls"].TControl.UpdateElement.call(this)},this.DoUpdateList=function(){var e=0,i=0,s="",n="",r="",o=null,a=null,l=null,h=null,F=null,p=null,c=null,u="",d="",S="",C="",T=0;if(null!=this.GetContainer()&&null!=this.GetElementHandle()&&!this.IsUpdating()){if(p=null,this.GetControlsCount()>0){this.SetBorderStyle(0),null!=(c=this.GetElementHandle().firstChild)&&"DIV"===c.tagName&&"1"===c.getAttribute("data-design")&&(this.GetElementHandle().removeChild(this.GetElementHandle().firstChild),this.GetElementHandle().style.removeProperty("border")),F=pas.Classes.TStringList.$create("Create$1"),r="{#hidden#}",i=this.FTabIndex;for(var m=0,g=this.GetControlsCount()-1;m<=g;m++)e=m,3 in this.GetControls(e).FComponentState&&e<=this.FTabIndex&&(i+=1),t.TTabSheet.isPrototypeOf(this.GetControls(e))&&!(3 in this.GetControls(e).FComponentState)&&(d="",(p=this.GetControls(e)).FTabVisible?(""!==p.FMaterialGlyph&&(u="",C="",p.FEnabled||(C=" md-light md-inactive"),-1!==p.FMaterialGlyphColor&&(u=";color:"+pas["WEBLib.Graphics"].ColorToHTML(p.FMaterialGlyphColor)),S="pointer-events:none",d='<i class="'+pas["WEBLib.Controls"].GetMaterialClass(p.FMaterialGlyphType)+C+'" style="'+S+";font-size:"+pas.SysUtils.IntToStr(p.FMaterialGlyphSize)+"px"+u+'">'+p.FMaterialGlyph+"</i>&nbsp;"),F.Add(d+p.FCaption)):F.Add(r),p.BeginUpdate(),i===e?p.SetAlign(5):p.SetAlign(0),p.SetAlignWithMargins(!0),p.FMargins.SetLeft(0),p.FMargins.SetRight(0),p.FMargins.SetBottom(0),p.SetBorderStyle(1),p.SetVisible(i===e),p.ResetUpdate(),i===e&&p.GetElementHandle().parentElement.insertBefore(p.GetElementHandle(),null),p.GetElementHandle().style.setProperty("background-color",pas["WEBLib.Graphics"].ColorToHTML(p.FColor)));""===(n=this.GetID())&&(n=this.FName);for(var f=0,b=this.GetContainer().childNodes.length-1;f<=b;f++)e=f,null!=(o=this.GetContainer().childNodes.item(e))&&o.getAttribute("id")===n+"_UL"&&this.GetContainer().removeChild(o);this.GetContainer().setAttribute("class",""),this.FEnabled?this.GetElementHandle().style.setProperty("pointer-events","auto"):this.GetElementHandle().style.setProperty("pointer-events","none"),(a=document.createElement("UL")).setAttribute("class",this.FElementClassName),a.setAttribute("id",n+"_UL"),""!==this.FElementClassName?a.setAttribute("role","tablist"):(a.style.setProperty("list-style-type","none"),a.style.setProperty("margin","0"),a.style.setProperty("padding","0"),a.style.setProperty("display","inline-block")),this.FShowTabs||a.style.setProperty("display","none"),this.GetContainer().appendChild(a);for(var y=0,L=F.GetCount()-1;y<=L;y++)e=y,(s=F.Get(e))!==r&&(""===s&&(s="tab"+pas.SysUtils.IntToStr(e)),l=document.createElement("LI"),""!==this.FElementClassName?l.setAttribute("class","nav-item"):(l.style.setProperty("float","left"),0!==this.FBorderStyle&&l.style.setProperty("border-bottom","1px solid lightgray")),1===this.FDragMode&&l.setAttribute("draggable","true"),pas["WEBLib.Controls"].SetHTMLElementFont(l,this.FFont,!(""===this.FElementClassName&&0===this.FElementFont)),a.appendChild(l),this.FEnabled?(h=document.createElement("A")).setAttribute("href","#"+s):h=document.createElement("SPAN"),1===this.FDragMode&&h.setAttribute("draggable","false"),h.innerHTML=s,h.setAttribute("id",n+"_"+pas.SysUtils.IntToStr(e)),""!==this.FElementClassName?(this.FTabIndex===e?h.setAttribute("class","nav-link active"):h.setAttribute("class","nav-link"),h.setAttribute("role","tab"),h.setAttribute("data-toggle","tab"),h.setAttribute("aria-controls",s),this.FTabIndex===e?h.setAttribute("aria-selected","true"):h.setAttribute("aria-selected","false")):(h.style.setProperty("display","block"),h.style.setProperty("text-align","center"),h.style.setProperty("padding","3px 15px"),h.style.setProperty("text-decoration","none"),h.style.setProperty("min-width","50px"),h.style.setProperty("color","inherit"),h.style.setProperty("font-family","inherit"),h.style.setProperty("font-style","inherit"),h.style.setProperty("font-size","inherit"),this.FEnabled||h.style.setProperty("pointer-events","none"),this.FTabIndex===e&&(-1!==this.FSelectedColor&&h.style.setProperty("background-color",pas["WEBLib.Graphics"].ColorToHTML(this.FSelectedColor)),-1!==this.FSelectedTextColor&&h.style.setProperty("color",pas["WEBLib.Graphics"].ColorToHTML(this.FSelectedTextColor)))),l.appendChild(h));for(var M=0,E=this.GetControlsCount()-1;M<=E;M++)e=M,t.TTabSheet.isPrototypeOf(this.GetControls(e))&&(T=Math.round(a.offsetHeight)-1,this.GetControls(e).FMargins.SetTop(T),this.GetControls(e).GetElementHandle().style.setProperty("white-space",""));F=rtl.freeLoc(F)}else this.GetIsLinked()||(this.ClearChildElements(),4 in this.FComponentState&&this.RenderDesigning("TWebPageControl",this.GetContainer(),this,!0,""));this.DoUpdateResize(),null!=p&&(p.SetAlign(0),p.SetAlign(5)),this.UpdateElement(),this.GetIsLinked()||0!==this.GetControlsCount()||this.GetElementHandle().style.setProperty("border","1px solid lightgray")}},this.DoUpdateResize=function(){for(var e=0,i=0,s=0,n=this.GetControlsCount()-1;s<=n;s++)e=s,t.TTabSheet.isPrototypeOf(this.GetControls(e))&&this.GetControls(e).SetVisible(!1);for(var r=0,o=this.GetControlsCount()-1;r<=o;r++)e=r,t.TTabSheet.isPrototypeOf(this.GetControls(e))&&(this.GetControls(e).SetVisible(!0),this.GetControls(e).SetAlign(0),this.GetControls(e).SetAlign(5),this.GetControls(e).SetVisible(!1));i=this.FTabIndex;for(var a=0,l=this.GetControlsCount()-1;a<=l;a++)e=a,3 in this.GetControls(e).FComponentState&&e<=this.FTabIndex&&(i+=1),t.TTabSheet.isPrototypeOf(this.GetControls(e))&&this.GetControls(e).SetVisible(i===e)},this.Loaded=function(){pas["WEBLib.Controls"].TCustomControl.Loaded.call(this),this.DoUpdateList(),this.SetTabIndex(this.FTabIndex),this.FOldVisible=this.FVisible},this.VisibleChanged=function(){pas["WEBLib.Controls"].TControl.VisibleChanged.call(this),this.FOldVisible!==this.FVisible&&(this.DoUpdateList(),this.FOldVisible=this.FVisible)},this.ItemsChanged=function(e){var i=0,s=null;0===this.PageCount()&&this.FItems.GetCount()>0&&this.GetElementHandle().childElementCount>0&&this.GetElementHandle().removeChild(this.GetElementHandle().firstChild);for(var n=0,r=this.FItems.GetCount()-1;n<=r;n++)i=n,this.PageCount()<=i&&((s=t.TTabSheet.$create("Create$1",[this.FOwner])).SetParent(this),s.SetName(this.FName+"sheet"+pas.SysUtils.IntToStr(i+1))),this.GetPage(i).SetCaption(this.FItems.Get(i));for(var o=this.PageCount()-1;o>=0;o--)(i=o)>=this.FItems.GetCount()&&(s=this.GetPage(i),s=rtl.freeLoc(s));this.DoUpdateList()},this.SetParent=function(e){var i=null,s=null;pas["WEBLib.Controls"].TControl.SetParent.apply(this,arguments),this.FDesignTime&&(s=pas["WEBLib.Forms"].GetParentForm(this),this.FDesignTime=!1,(i=t.TWebTabSheet.$create("Create$1",[s])).SetParent(this),i.SetCaption("Page1"),i.SetName(this.GetUniqueName()),(i=t.TWebTabSheet.$create("Create$1",[s])).SetParent(this),i.SetCaption("Page2"),i.SetName(this.GetUniqueName())),this.DoUpdateList()},this.GetUniqueName=function(){var t,e="",i=0,s=0,n=!1;s=1,t=this.FName+"sheet";do{e=t+pas.SysUtils.IntToStr(s),n=!0;for(var r=0,o=this.FOwner.GetComponentCount()-1;r<=o;r++)if(i=r,this.FOwner.GetComponent(i).FName===e){n=!1,s+=1;break}}while(!n);return e},this.EnableDrag=function(){null!=this.GetContainer()&&function t(e){for(var i=0,s="",n=0,r=e.children.length-1;n<=r;n++)i=n,"LI"===(s=e.children.item(i).tagName)?(e.children.item(i).setAttribute("draggable","true"),t(e.children.item(i))):"A"===s?e.children.item(i).setAttribute("draggable","false"):"UL"===s&&t(e.children.item(i))}(this.GetContainer())},this.DisableDrag=function(){null!=this.GetContainer()&&function t(e){for(var i=0,s="",n=0,r=e.children.length-1;n<=r;n++)i=n,"LI"===(s=e.children.item(i).tagName)?(e.children.item(i).removeAttribute("draggable"),t(e.children.item(i))):"A"===s?e.children.item(i).removeAttribute("draggable"):"UL"===s&&t(e.children.item(i))}(this.GetContainer())},this.CreateInitialize=function(){pas["WEBLib.Controls"].TCustomControl.CreateInitialize.call(this),this.FDesignTime=4 in this.FComponentState&&!(1 in this.FOwner.FComponentState||0 in this.FOwner.FComponentState),this.FControlStyle=rtl.unionSet(this.FControlStyle,rtl.createSet(0)),this.SetBorderStyle(0),this.FItems=pas.Classes.TStringList.$create("Create$1"),this.FItems.FOnChange=rtl.createCallback(this,"ItemsChanged"),this.FTabIndex=0,this.FPrevTabIndex=this.FTabIndex,this.FShowTabs=!0,this.SetTabStop(!1),this.FSelectedColor=12632256,this.FSelectedTextColor=0,4 in this.FComponentState&&(this.SetWidth(400),this.SetHeight(300)),this.FEnablePropagation=!0,this.FOldVisible=!0},this.Destroy=function(){rtl.free(this,"FItems"),pas["WEBLib.Controls"].TCustomControl.Destroy.call(this)},this.EndUpdate=function(){pas["WEBLib.Controls"].TCustomControl.EndUpdate.call(this),this.DoUpdateList()},this.PageCount=function(){var e=0,i=0;e=0;for(var s=0,n=this.GetControlsCount()-1;s<=n;s++)i=s,t.TTabSheet.isPrototypeOf(this.GetControls(i))&&(e+=1);return e},rtl.addIntf(this,pas.System.IUnknown);var e=this.$rtti;e.addProperty("Align",2,pas["WEBLib.Controls"].$rtti.TAlign,"FAlign","SetAlign",{Default:pas["WEBLib.Controls"].TAlign.alNone}),e.addProperty("AlignWithMargins",2,rtl.boolean,"FAlignWithMargins","SetAlignWithMargins",{Default:!1}),e.addProperty("Anchors",2,pas["WEBLib.Controls"].$rtti.TAnchors,"FAnchors","SetAnchors",{Default:rtl.createSet(0,1)}),e.addProperty("BorderStyle",2,pas["WEBLib.Controls"].$rtti.TBorderStyle,"FBorderStyle","SetBorderStyle",{Default:pas["WEBLib.Controls"].TBorderStyle.bsNone}),e.addProperty("ChildOrder",2,rtl.longint,"FChildOrder","SetChildOrderEx",{Default:0}),e.addProperty("DragMode",2,pas["WEBLib.Controls"].$rtti.TDragMode,"FDragMode","SetDragMode",{Default:pas["WEBLib.Controls"].TDragMode.dmManual}),e.addProperty("ElementClassName",2,pas["WEBLib.Controls"].$rtti.TElementClassName,"FElementClassName","SetElementClassName"),e.addProperty("ElementFont",2,pas["WEBLib.Controls"].$rtti.TElementFont,"FElementFont","SetElementFont",{Default:pas["WEBLib.Controls"].TElementFont.efProperty}),e.addProperty("ElementID",3,pas["WEBLib.Controls"].$rtti.TElementID,"GetID","SetID"),e.addProperty("ElementPosition",2,pas["WEBLib.Controls"].$rtti.TElementPosition,"FElementPosition","SetElementPosition",{Default:pas["WEBLib.Controls"].TElementPosition.epAbsolute}),e.addProperty("Enabled",2,rtl.boolean,"FEnabled","SetEnabled",{Default:!0}),e.addProperty("Font",2,pas["WEBLib.Graphics"].$rtti.TFont,"FFont","SetFont"),e.addProperty("Height",3,rtl.longint,"GetHeight","SetHeight"),e.addProperty("HeightPercent",2,rtl.double,"FHeightPercent","SetHeightPercent",{Default:100}),e.addProperty("HeightStyle",2,pas["WEBLib.Controls"].$rtti.TSizeStyle,"FHeightStyle","SetHeightStyle",{Default:pas["WEBLib.Controls"].TSizeStyle.ssAbsolute}),e.addProperty("Hint",2,rtl.string,"FHint","SetHint"),e.addProperty("TabIndex",2,rtl.longint,"FTabIndex","SetTabIndex"),e.addProperty("Left",3,rtl.longint,"GetLeft","SetLeft"),e.addProperty("Margins",2,pas["WEBLib.Controls"].$rtti.TMargins,"FMargins","SetMargins"),e.addProperty("ParentFont",2,rtl.boolean,"FParentFont","SetParentFont",{Default:!0}),e.addProperty("PopupMenu",0,pas["WEBLib.Menus"].$rtti.TPopupMenu,"FPopupMenu","FPopupMenu"),e.addProperty("ShowHint",2,rtl.boolean,"FShowHint","SetShowHint",{Default:!1}),e.addProperty("ShowTabs",2,rtl.boolean,"FShowTabs","SetShowTabs",{Default:!0}),e.addProperty("SelectedColor",2,pas["WEBLib.Graphics"].$rtti.TColor,"FSelectedColor","SetSelectedColor",{Default:12632256}),e.addProperty("SelectedTextColor",2,pas["WEBLib.Graphics"].$rtti.TColor,"FSelectedTextColor","SetSelectedTextColor",{Default:0}),e.addProperty("TabOrder",2,rtl.longint,"FTabOrder","SetTabOrder"),e.addProperty("TabStop",2,rtl.boolean,"FTabStop","SetTabStop",{Default:!0}),e.addProperty("Top",3,rtl.longint,"GetTop","SetTop"),e.addProperty("Visible",2,rtl.boolean,"FVisible","SetVisible",{Default:!0}),e.addProperty("Width",3,rtl.longint,"GetWidth","SetWidth"),e.addProperty("WidthPercent",2,rtl.double,"FWidthPercent","SetWidthPercent",{Default:100}),e.addProperty("WidthStyle",2,pas["WEBLib.Controls"].$rtti.TSizeStyle,"FWidthStyle","SetWidthStyle",{Default:pas["WEBLib.Controls"].TSizeStyle.ssAbsolute}),e.addProperty("OnChange",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnChange","FOnChange"),e.addProperty("OnClick",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnClick","FOnClick"),e.addProperty("OnDblClick",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnDblClick","FOnDblClick"),e.addProperty("OnKeyDown",0,pas["WEBLib.Controls"].$rtti.TKeyEvent,"FOnKeyDown","FOnKeyDown"),e.addProperty("OnKeyPress",0,pas["WEBLib.Controls"].$rtti.TKeyPressEvent,"FOnKeyPress","FOnKeyPress"),e.addProperty("OnKeyUp",0,pas["WEBLib.Controls"].$rtti.TKeyEvent,"FOnKeyUp","FOnKeyUp"),e.addProperty("OnMouseDown",0,pas["WEBLib.Controls"].$rtti.TMouseEvent,"FOnMouseDown","FOnMouseDown"),e.addProperty("OnMouseUp",0,pas["WEBLib.Controls"].$rtti.TMouseEvent,"FOnMouseUp","FOnMouseUp"),e.addProperty("OnMouseMove",0,pas["WEBLib.Controls"].$rtti.TMouseMoveEvent,"FOnMouseMove","FOnMouseMove"),e.addProperty("OnMouseLeave",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnMouseLeave","FOnMouseLeave"),e.addProperty("OnMouseEnter",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnMouseEnter","FOnMouseEnter"),e.addProperty("OnEnter",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnEnter","FOnEnter"),e.addProperty("OnExit",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnExit","FOnExit"),e.addProperty("OnDragDrop",0,pas["WEBLib.Controls"].$rtti.TDragDropEvent,"FOnDragDrop","FOnDragDrop"),e.addProperty("OnDragOver",0,pas["WEBLib.Controls"].$rtti.TDragOverEvent,"FOnDragOver","FOnDragOver"),e.addProperty("OnEndDrag",0,pas["WEBLib.Controls"].$rtti.TEndDragEvent,"FonEndDrag","FonEndDrag"),e.addProperty("OnStartDrag",0,pas["WEBLib.Controls"].$rtti.TStartDragEvent,"FOnStartDrag","FOnStartDrag")}))}),["WEBLib.Forms","WEBLib.Utils"]),rtl.module("WEBLib.DropDown",["System","Classes","WEBLib.Controls","WEBLib.Forms","Web","JS","WEBLib.Menus","WEBLib.Graphics"],(function(){"use strict";rtl.createClass(this,"TCustomDropDownControl",pas["WEBLib.Menus"].TWebCustomControl,(function(){this.$init=function(){pas["WEBLib.Menus"].TWebCustomControl.$init.call(this),this.FDoClickLayer=null,this.FLayer$1=null,this.FControl=null,this.FDropDown=null,this.FTextElement=null,this.FButton=null,this.FOnCloseUp=null,this.FOnDropDown=null,this.FText="",this.FAutoDropDown=!1,this.FElementInputClassName="",this.FButtonImageURL="",this.FDropDownHeight=0,this.FDropDownWidth=0,this.FDropDownColor=0,this.FDropDownShadow=!1},this.$final=function(){this.FLayer$1=void 0,this.FControl=void 0,this.FDropDown=void 0,this.FTextElement=void 0,this.FButton=void 0,this.FOnCloseUp=void 0,this.FOnDropDown=void 0,pas["WEBLib.Menus"].TWebCustomControl.$final.call(this)},this.SetText=function(t){this.FText=t,this.HasEdit()?this.FTextElement.value=t:this.FTextElement.innerHTML=""!==t?t:"&nbsp;"},this.GetText=function(){var t="";return t=this.FText,this.HasEdit()&&(t=this.FTextElement.value),t},this.SetButtonImageURL=function(t){this.FButtonImageURL!==t&&(this.FButtonImageURL=t,this.UpdateElement())},this.UpdateElementVisual=function(){var t=0;pas["WEBLib.Controls"].TCustomControl.UpdateElementVisual.call(this),this.HasEdit()||1!==this.FBorderStyle||this.GetElementHandle().style.setProperty("border","1px solid silver"),this.GetElementHandle().style.removeProperty("overflow"),t=this.GetHeight()-1,pas["WEBLib.Controls"].SetHTMLElementFont(this.FTextElement,this.FFont,1===this.FElementFont),this.FButton.style.setProperty("height",pas.SysUtils.TIntegerHelper.ToString$1.call({get:function(){return t},set:function(e){t=e}})+"px"),this.FTextElement.style.setProperty("height",pas.SysUtils.TIntegerHelper.ToString$1.call({get:function(){return t},set:function(e){t=e}})+"px"),this.FButton.style.setProperty("line-height",pas.SysUtils.TIntegerHelper.ToString$1.call({get:function(){return t},set:function(e){t=e}})+"px"),this.FTextElement.style.setProperty("line-height",pas.SysUtils.TIntegerHelper.ToString$1.call({get:function(){return t},set:function(e){t=e}})+"px"),""!==this.FButtonImageURL?this.FButton.innerHTML='<img src="'+this.FButtonImageURL+'">':this.FButton.innerHTML='<i class="arrow down"></i>',""!==this.FElementInputClassName?this.FTextElement.classList.add(this.FElementInputClassName):this.FTextElement.classList.contains(this.FElementInputClassName)&&this.FTextElement.classList.remove(this.FElementInputClassName)},this.CreateInitialize=function(){pas["WEBLib.Controls"].TCustomControl.CreateInitialize.call(this),this.FAutoDropDown=!1,this.FDropDownColor=16777215,this.FDropDownWidth=0,this.FDropDownHeight=0,this.FDropDownShadow=!0},this.HandleDoClickLayer=function(t){return this.HideDropDown(),!0,!0},this.Click=function(){pas["WEBLib.Controls"].TControl.Click.call(this),(this.GetElementEvent().target===this.FButton||this.GetElementEvent().target.parentElement===this.FButton||this.FAutoDropDown)&&this.ToggleDropDown()},this.HasEdit=function(){return!1,!1},this.CreateChildElements=function(t){var e=null;this.HasEdit()?(this.FTextElement=document.createElement("INPUT"),this.FTextElement.setAttribute("type","TEXT"),0===this.FElementFont&&pas["WEBLib.Controls"].SetHTMLElementFont(this.FTextElement,this.FFont,1===this.FElementFont)):(this.FTextElement=document.createElement("DIV"),this.FTextElement.setAttribute("type","TEXT"),this.FTextElement.style.setProperty("padding-left","2px"),this.FTextElement.style.setProperty("padding-right","2px"),this.FTextElement.style.setProperty("text-overflow","ellipsis"),0===this.FElementFont&&pas["WEBLib.Controls"].SetHTMLElementFont(this.FTextElement,this.FFont,1===this.FElementFont)),this.FButton=document.createElement("DIV"),this.FTextElement.style.setProperty("display","inline-block"),this.FTextElement.style.setProperty("width","calc(100% - 25px)"),0===(e=t.getBoundingClientRect()).height&&(e.height=26),this.FTextElement.style.setProperty("height",pas.SysUtils.TDoubleHelper.ToString$3.call({p:e,get:function(){return this.p.height},set:function(t){this.p.height=t}})+"px"),this.FTextElement.style.setProperty("box-sizing","border-box"),this.FTextElement.style.setProperty("line-height",pas.SysUtils.TDoubleHelper.ToString$3.call({p:e,get:function(){return this.p.height},set:function(t){this.p.height=t}})+"px"),this.FTextElement.style.setProperty("vertical-align","middle"),this.FButton.style.setProperty("background-color","silver"),this.FButton.style.setProperty("display","inline-block"),this.FButton.style.setProperty("width","25px"),this.FButton.style.setProperty("height",pas.SysUtils.TDoubleHelper.ToString$3.call({p:e,get:function(){return this.p.height},set:function(t){this.p.height=t}})+"px"),this.FButton.style.setProperty("line-height",pas.SysUtils.TDoubleHelper.ToString$3.call({p:e,get:function(){return this.p.height},set:function(t){this.p.height=t}})+"px"),this.FButton.style.setProperty("text-align","center"),this.FButton.style.setProperty("vertical-align","middle"),this.FDropDown=document.createElement("DIV"),this.FDropDown.style.setProperty("position","absolute"),this.FDropDown.style.setProperty("display","none"),this.FDropDown.style.setProperty("background-color","#f1f1f1"),this.FDropDown.style.setProperty("box-shadow","0px 8px 8px 0px rgba(0,0,0,0.2)"),this.FDropDown.style.setProperty("z-index","1"),this.FTextElement.innerHTML="&nbsp;",t.appendChild(this.FTextElement),t.appendChild(this.FButton),this.FLayer$1=document.createElement("SPAN"),this.FLayer$1.style.setProperty("top","0"),this.FLayer$1.style.setProperty("left","0"),this.FLayer$1.style.setProperty("right","0"),this.FLayer$1.style.setProperty("bottom","0"),this.FLayer$1.style.setProperty("webkit-user-select","none"),this.FLayer$1.style.setProperty("moz-user-select","none"),this.FLayer$1.style.setProperty("khtml-user-select","none"),this.FLayer$1.style.setProperty("ms-user-select","none"),this.FLayer$1.style.setProperty("user-select","none"),this.FLayer$1.style.setProperty("position","absolute"),this.AddInstanceStyle(".arrow { border: solid black; border-width: 0 2px 2px 0;  display: inline-block;  padding: 2px;}\r\n.down { transform: rotate(45deg); -webkit-transform: rotate(45deg);};"),this.FButton.innerHTML='<i class="arrow down"></i>'},this.CreateElement=function(){return document.createElement("DIV")},this.ClearMethodPointers=function(){pas["WEBLib.Controls"].TControl.ClearMethodPointers.call(this),this.FDoClickLayer=null},this.GetMethodPointers=function(){pas["WEBLib.Controls"].TControl.GetMethodPointers.call(this),null===this.FDoClickLayer&&(this.FDoClickLayer=rtl.createCallback(this,"HandleDoClickLayer"))},this.DoDropDown=function(){null!=this.FOnDropDown&&this.FOnDropDown(this)},this.DoCloseUp=function(){null!=this.FOnCloseUp&&this.FOnCloseUp(this)},this.ShowDropDown=function(){var t=null,e=0,i=0;null!=this.GetElementHandle()&&(this.FLayer$1.style.setProperty("z-index",pas["WEBLib.Forms"].Application.MaxZIndexStr()),document.body.appendChild(this.FLayer$1),this.FLayer$1.addEventListener("click",this.FDoClickLayer),this.FLayer$1.appendChild(this.FDropDown),this.FDropDown.style.setProperty("display","block"),null!=this.FControl&&(this.FControl.SetLeft(0),this.FControl.SetTop(0),this.FControl.SetElementPosition(0),this.FControl.SetElementFont(this.FElementFont),this.FControl.SetVisible(!0),t=this.GetElementHandle().getBoundingClientRect(),this.FDropDown.style.setProperty("left",pas.SysUtils.TDoubleHelper.ToString$3.call({p:t,get:function(){return this.p.left},set:function(t){this.p.left=t}})+"px"),this.FDropDown.style.setProperty("top",pas.SysUtils.TDoubleHelper.ToString$3.call({p:t,get:function(){return this.p.bottom},set:function(t){this.p.bottom=t}})+"px"),t=this.FControl.GetElementHandle().getBoundingClientRect(),e=this.FDropDownWidth>0?this.FDropDownWidth:Math.max(t.width,this.FControl.GetWidth()),this.FDropDown.style.setProperty("width",pas.SysUtils.TDoubleHelper.ToString$3.call({get:function(){return e},set:function(t){e=t}})+"px"),i=this.FDropDownHeight>0?this.FDropDownHeight:Math.max(t.height,this.FControl.GetHeight()),this.FDropDown.style.setProperty("height",pas.SysUtils.TDoubleHelper.ToString$3.call({get:function(){return i},set:function(t){i=t}})+"px"),-1!==this.FDropDownColor&&this.FDropDown.style.setProperty("background-color",pas["WEBLib.Graphics"].ColorToHTML(this.FDropDownColor)),this.FDropDown.appendChild(this.FControl.GetElementHandle())),this.FDropDownShadow&&this.FDropDown.style.setProperty("box-shadow","0px 8px 8px 0px rgba(0,0,0,0.2)"),this.DoDropDown())},this.HideDropDown=function(){this.DoCloseUp(),this.FLayer$1.removeEventListener("click",this.FDoClickLayer),this.FLayer$1.parentElement.removeChild(this.FLayer$1),this.FDropDown.style.setProperty("display","none"),this.FDropDown.parentElement.removeChild(this.FDropDown)},this.ToggleDropDown=function(){"none"===this.FDropDown.style.getPropertyValue("display")?this.ShowDropDown():this.HideDropDown()},rtl.addIntf(this,pas.System.IUnknown);var t=this.$rtti;t.addProperty("AutoDropDown",0,rtl.boolean,"FAutoDropDown","FAutoDropDown",{Default:!1}),t.addProperty("DropDownColor",0,pas["WEBLib.Graphics"].$rtti.TColor,"FDropDownColor","FDropDownColor",{Default:16777215}),t.addProperty("DropDownWidth",0,rtl.longint,"FDropDownWidth","FDropDownWidth",{Default:0}),t.addProperty("DropDownHeight",0,rtl.longint,"FDropDownHeight","FDropDownHeight",{Default:0}),t.addProperty("DropDownShadow",0,rtl.boolean,"FDropDownShadow","FDropDownShadow",{Default:!0}),t.addProperty("OnDropDown",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnDropDown","FOnDropDown"),t.addProperty("OnCloseUp",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnCloseUp","FOnCloseUp")})),rtl.createClass(this,"TDropDownControl",this.TCustomDropDownControl,(function(){rtl.addIntf(this,pas.System.IUnknown);var t=this.$rtti;t.addProperty("Align",2,pas["WEBLib.Controls"].$rtti.TAlign,"FAlign","SetAlign",{Default:pas["WEBLib.Controls"].TAlign.alNone}),t.addProperty("AlignWithMargins",2,rtl.boolean,"FAlignWithMargins","SetAlignWithMargins",{Default:!1}),t.addProperty("Anchors",2,pas["WEBLib.Controls"].$rtti.TAnchors,"FAnchors","SetAnchors",{Default:rtl.createSet(0,1)}),t.addProperty("BiDiMode",2,pas["WEBLib.Controls"].$rtti.TBiDiMode,"FBiDiMode","SetBiDiMode",{Default:pas["WEBLib.Controls"].TBiDiMode.bdLeftToRight}),t.addProperty("BorderStyle",2,pas["WEBLib.Controls"].$rtti.TBorderStyle,"FBorderStyle","SetBorderStyle",{Default:pas["WEBLib.Controls"].TBorderStyle.bsSingle}),t.addProperty("ButtonImageURL",2,rtl.string,"FButtonImageURL","SetButtonImageURL"),t.addProperty("ChildOrder",2,rtl.longint,"FChildOrder","SetChildOrderEx",{Default:0}),t.addProperty("Color",2,pas["WEBLib.Graphics"].$rtti.TColor,"FColor","SetColor"),t.addProperty("Control",0,pas["WEBLib.Menus"].$rtti.TWebCustomControl,"FControl","FControl"),t.addProperty("DragMode",2,pas["WEBLib.Controls"].$rtti.TDragMode,"FDragMode","SetDragMode",{Default:pas["WEBLib.Controls"].TDragMode.dmManual}),t.addProperty("Font",2,pas["WEBLib.Graphics"].$rtti.TFont,"FFont","SetFont"),t.addProperty("ElementClassName",2,pas["WEBLib.Controls"].$rtti.TElementClassName,"FElementClassName","SetElementClassName"),t.addProperty("ElementInputClassName",0,pas["WEBLib.Controls"].$rtti.TElementClassName,"FElementInputClassName","FElementInputClassName"),t.addProperty("ElementID",3,pas["WEBLib.Controls"].$rtti.TElementID,"GetID","SetID"),t.addProperty("ElementFont",2,pas["WEBLib.Controls"].$rtti.TElementFont,"FElementFont","SetElementFont",{Default:pas["WEBLib.Controls"].TElementFont.efProperty}),t.addProperty("ElementPosition",2,pas["WEBLib.Controls"].$rtti.TElementPosition,"FElementPosition","SetElementPosition",{Default:pas["WEBLib.Controls"].TElementPosition.epAbsolute}),t.addProperty("Enabled",2,rtl.boolean,"FEnabled","SetEnabled",{Default:!0}),t.addProperty("Height",3,rtl.longint,"GetHeight","SetHeight"),t.addProperty("HeightPercent",2,rtl.double,"FHeightPercent","SetHeightPercent",{Default:100}),t.addProperty("HeightStyle",2,pas["WEBLib.Controls"].$rtti.TSizeStyle,"FHeightStyle","SetHeightStyle",{Default:pas["WEBLib.Controls"].TSizeStyle.ssAbsolute}),t.addProperty("Hint",2,rtl.string,"FHint","SetHint"),t.addProperty("Left",3,rtl.longint,"GetLeft","SetLeft"),t.addProperty("ParentColor",2,rtl.boolean,"FParentColor","SetParentColor",{Default:!1}),t.addProperty("ParentFont",2,rtl.boolean,"FParentFont","SetParentFont",{Default:!0}),t.addProperty("PopupMenu",0,pas["WEBLib.Menus"].$rtti.TPopupMenu,"FPopupMenu","FPopupMenu"),t.addProperty("Role",3,rtl.string,"GetRole","SetRole"),t.addProperty("ShowFocus",2,rtl.boolean,"FShowFocus","SetShowFocus",{Default:!1}),t.addProperty("ShowHint",2,rtl.boolean,"FShowHint","SetShowHint",{Default:!1}),t.addProperty("TabOrder",2,rtl.longint,"FTabOrder","SetTabOrder"),t.addProperty("TabStop",2,rtl.boolean,"FTabStop","SetTabStop",{Default:!0}),t.addProperty("Text",3,rtl.string,"GetText","SetText"),t.addProperty("TextDirection",0,pas["WEBLib.Controls"].$rtti.TTextDirection,"FTextDirection","FTextDirection",{Default:pas["WEBLib.Controls"].TTextDirection.tdDefault}),t.addProperty("Top",3,rtl.longint,"GetTop","SetTop"),t.addProperty("Visible",2,rtl.boolean,"FVisible","SetVisible",{Default:!0}),t.addProperty("Width",3,rtl.longint,"GetWidth","SetWidth"),t.addProperty("WidthPercent",2,rtl.double,"FWidthPercent","SetWidthPercent",{Default:100}),t.addProperty("WidthStyle",2,pas["WEBLib.Controls"].$rtti.TSizeStyle,"FWidthStyle","SetWidthStyle",{Default:pas["WEBLib.Controls"].TSizeStyle.ssAbsolute}),t.addProperty("OnClick",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnClick","FOnClick"),t.addProperty("OnCloseUp",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnCloseUp","FOnCloseUp"),t.addProperty("OnDblClick",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnDblClick","FOnDblClick"),t.addProperty("OnDropDown",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnDropDown","FOnDropDown"),t.addProperty("OnKeyDown",0,pas["WEBLib.Controls"].$rtti.TKeyEvent,"FOnKeyDown","FOnKeyDown"),t.addProperty("OnKeyPress",0,pas["WEBLib.Controls"].$rtti.TKeyPressEvent,"FOnKeyPress","FOnKeyPress"),t.addProperty("OnKeyUp",0,pas["WEBLib.Controls"].$rtti.TKeyEvent,"FOnKeyUp","FOnKeyUp"),t.addProperty("OnMouseDown",0,pas["WEBLib.Controls"].$rtti.TMouseEvent,"FOnMouseDown","FOnMouseDown"),t.addProperty("OnMouseUp",0,pas["WEBLib.Controls"].$rtti.TMouseEvent,"FOnMouseUp","FOnMouseUp"),t.addProperty("OnMouseMove",0,pas["WEBLib.Controls"].$rtti.TMouseMoveEvent,"FOnMouseMove","FOnMouseMove"),t.addProperty("OnMouseLeave",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnMouseLeave","FOnMouseLeave"),t.addProperty("OnMouseEnter",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnMouseEnter","FOnMouseEnter"),t.addProperty("OnMouseWheel",0,pas["WEBLib.Controls"].$rtti.TMouseWheelEvent,"FOnMouseWheel","FOnMouseWheel"),t.addProperty("OnEnter",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnEnter","FOnEnter"),t.addProperty("OnExit",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnExit","FOnExit"),t.addProperty("OnDragDrop",0,pas["WEBLib.Controls"].$rtti.TDragDropEvent,"FOnDragDrop","FOnDragDrop"),t.addProperty("OnDragOver",0,pas["WEBLib.Controls"].$rtti.TDragOverEvent,"FOnDragOver","FOnDragOver"),t.addProperty("OnEndDrag",0,pas["WEBLib.Controls"].$rtti.TEndDragEvent,"FonEndDrag","FonEndDrag"),t.addProperty("OnStartDrag",0,pas["WEBLib.Controls"].$rtti.TStartDragEvent,"FOnStartDrag","FOnStartDrag")}))}),["SysUtils","Math"]),rtl.module("WEBLib.Crypto",["System","Classes","JS","Web","Types"],(function(){"use strict";this.BinaryStringToAB=function(t){var e,i,s=0,n=null,r=null;e=(r=new String(t)).length,i=new ArrayBuffer(e),n=new Uint8Array(i);for(var o=0,a=e-1;o<=a;o++)n[s=o]=r.charCodeAt(s);return n.buffer}}),["SysUtils"]),rtl.module("WEBLib.TMSFNCStyles",["System","Classes","WEBLib.Graphics","WEBLib.Controls","WEBLib.Forms","WEBLib.TMSFNCTypes","WEBLib.TMSFNCCustomComponent","WEBLib.TMSFNCGraphicsTypes","JS","WEBLib.JSON"],(function(){"use strict";var t=this;rtl.createClass(this,"TTMSFNCStyles",pas.System.TObject,(function(){this.ExtractColor=function(t){var e=0,i="",s="",n=null,r=0,o=0;function a(t){return pas.SysUtils.StrToInt(pas.SysUtils.Trim(pas.SysUtils.StringReplace(t,"rgb(","",rtl.createSet(0))))}if(e=-1,""!==t)if(i=pas.SysUtils.LowerCase(pas.SysUtils.StringReplace(t," ","",rtl.createSet(0))),1===pas.System.Pos("linear-gradient",i))0===(r=pas.System.Pos("rgb",i))&&(r=pas.System.Pos("#",i)),o=pas.System.Pos$1(")",i,r),s=pas.System.Copy(i,r,o-r+1),0===(r=pas.System.Pos$1("rgb",i,o))&&(r=pas.System.Pos("#",i)),o=pas.System.Pos$1(")",i,r),pas.System.Copy(i,r,o-r+1),e=this.ExtractColor(s);else if(1===pas.System.Pos("rgb",i)){n=pas.Classes.TStringList.$create("Create$1");try{n.SetDelimiter(","),n.SetDelimitedText(i),e=pas["WEBLib.TMSFNCGraphicsTypes"].MakeGraphicsColor(a(n.Get(0)),a(n.Get(1)),a(n.Get(2)))}finally{n=rtl.freeLoc(n)}}else 1===pas.System.Pos("#",i)&&(e=pas["WEBLib.Graphics"].HexToColor(i));return e},this.GetStyleBackgroundFill=function(){return this.FindCSSStyleProperty(".TMSFNCGridStyle","background")},this.GetStyleBackgroundStroke=function(){return this.FindCSSStyleProperty(".TMSFNCGridStyle","border-color")},this.GetStyleDefaultButtonFill=function(){return this.FindCSSStyleProperty(".TMSFNCButtonStyle","background")},this.GetStyleDefaultButtonStroke=function(){return this.FindCSSStyleProperty(".TMSFNCButtonStyle","border-color")},this.GetStyleSelectionFill=function(){return this.FindCSSStyleProperty(".TMSFNCGridStyle","--selection")},this.GetStyleLineFill=function(){return this.FindCSSStyleProperty(".TMSFNCGridStyle","--linefill")},this.GetStyleTextColor=function(){return this.FindCSSStyleProperty(".TMSFNCHeaderItemStyle","color")},this.FindCSSStyleRule=function(e){var i,s;i=e,s=t.CSSStyleFileName;for(var n=0;n<document.styleSheets.length;n++){var r=document.styleSheets[n].href;if(null!=r&&s==r.substring(r.lastIndexOf("/")+1))for(var o=document.styleSheets[n].rules||document.styleSheets[n].cssRules,a=0;a<o.length;a++)if(o[a].selectorText.startsWith(i))return o[a]}return null},this.FindCSSStyleProperty=function(t,e){var i="",s=null,n="";return i="",null!=(s=this.FindCSSStyleRule(t))&&(n=e,i=s.style.getPropertyValue(n)),i},this.StyleServicesEnabled=function(){return!0,!0},this.GetStyleLineFillColor=function(t){var e=!1,i="",s=0;return e=!1,this.StyleServicesEnabled()&&""!==(i=this.GetStyleLineFill())&&(s=this.ExtractColor(i),t.set(s),e=-1!==s),e},this.GetStyleBackgroundFillColor=function(t){var e=!1,i="",s=0;return e=!1,this.StyleServicesEnabled()&&""!==(i=this.GetStyleBackgroundFill())&&(s=this.ExtractColor(i),t.set(s),e=-1!==s),e},this.GetStyleBackgroundStrokeColor=function(t){var e=!1,i="",s=0;return e=!1,this.StyleServicesEnabled()&&""!==(i=this.GetStyleBackgroundStroke())&&(s=this.ExtractColor(i),t.set(s),e=-1!==s),e},this.GetStyleSelectionFillColor=function(t){var e=!1,i="",s=0;return e=!1,this.StyleServicesEnabled()&&""!==(i=this.GetStyleSelectionFill())&&(s=this.ExtractColor(i),t.set(s),e=-1!==s),e},this.GetStyleTextFontColor=function(t){var e=!1,i="",s=0;return e=!1,this.StyleServicesEnabled()&&""!==(i=this.GetStyleTextColor())&&(s=this.ExtractColor(i),t.set(s),e=-1!==s),e},this.GetStyleDefaultButtonFillColor=function(t){var e=!1,i="",s=0;return e=!1,this.StyleServicesEnabled()&&""!==(i=this.GetStyleDefaultButtonFill())&&(s=this.ExtractColor(i),t.set(s),e=-1!==s),e},this.GetStyleDefaultButtonStrokeColor=function(t){var e=!1,i="",s=0;return e=!1,this.StyleServicesEnabled()&&""!==(i=this.GetStyleDefaultButtonStroke())&&(s=this.ExtractColor(i),t.set(s),e=-1!==s),e}})),this.CSSStyleFileName=""}),["WEBLib.TMSFNCUtils","SysUtils","WEBLib.TMSFNCPersistence","WEBLib.TMSFNCGraphics"]),rtl.module("WEBLib.TMSFNCUndo",["System","Classes","WEBLib.TMSFNCTypes"],(function(){"use strict";rtl.createClass(this,"TTMSFNCUndoManager",pas.Classes.TCollection,(function(){}))}),["SysUtils","WEBLib.TMSFNCPersistence"]),rtl.module("WEBLib.TMSFNCCustomControl",["System","Classes","WEBLib.Controls","WEBLib.TMSFNCGraphics","WEBLib.Graphics","WEBLib.TMSFNCStyles","WEBLib.TMSFNCPersistence","WEBLib.TMSFNCUndo","Types","WEBLib.TMSFNCGraphicsTypes","WEBLib.TMSFNCTypes","TypInfo","WEBLib.Forms","WEBLib.Menus"],(function(){"use strict";var t=this;rtl.createClass(this,"TTMSFNCCustomDesignerForm",pas["WEBLib.Forms"].TForm,(function(){rtl.addIntf(this,pas.System.IUnknown)})),rtl.createClass(this,"TTMSFNCCustomControlBaseCommon",pas["WEBLib.Menus"].TWebCustomControl,(function(){this.$init=function(){pas["WEBLib.Menus"].TWebCustomControl.$init.call(this),this.FResourceScaleFactor=0,this.FPaintScaleFactor=0,this.FDesigntimeFormPixelsPerInch=0,this.FAllowFocus=!1,this.FAdaptToStyle=!1,this.FAdaptedToStyle=!1,this.FTransparent=!1,this.FBufferedPainting=!1,this.FNativeCanvas=!1,this.FAntiAliasing=!1,this.FOptimizedHTMLDrawing=!1,this.FShowAcceleratorChar=!1,this.FTextQuality=0,this.FOnInternalDblClick=null,this.FOnInternalMouseDown=null,this.FOnInternalMouseMove=null,this.FOnInternalMouseUp=null},this.$final=function(){this.FOnInternalDblClick=void 0,this.FOnInternalMouseDown=void 0,this.FOnInternalMouseMove=void 0,this.FOnInternalMouseUp=void 0,pas["WEBLib.Menus"].TWebCustomControl.$final.call(this)},this.GetAllowFocus=function(){return this.FAllowFocus},this.SetAllowFocus=function(t){this.FAllowFocus=t},this.SetAntiAliasing=function(t){this.FAntiAliasing!==t&&(this.FAntiAliasing=t,this.Invalidate())},this.SetShowAcceleratorChar=function(t){this.FShowAcceleratorChar!==t&&(this.FShowAcceleratorChar=t,this.Invalidate())},this.ConvertScreenToClient=function(t){var e=pas["WEBLib.TMSFNCTypes"].TPointF.$new(),i=pas.Types.TPoint.$new();return i.$assign(this.ScreenToClient(pas.Types.Point(Math.round(t.X),Math.round(t.Y)))),e.$assign(pas["WEBLib.TMSFNCTypes"].PointF(i.x,i.y)),e},this.GetAdaptToStyle=function(){return this.FAdaptToStyle},this.SetEnabled=function(t){pas["WEBLib.Controls"].TControl.SetEnabled.apply(this,arguments),this.Invalidate()},this.SetDefaultGraphicColors=function(){var t=0;t=-1,pas["WEBLib.TMSFNCStyles"].TTMSFNCStyles.GetStyleBackgroundFillColor({get:function(){return t},set:function(e){t=e}})?pas["WEBLib.TMSFNCGraphics"].TTMSFNCGraphics.DefaultPopupFillColor=t:pas["WEBLib.TMSFNCGraphics"].TTMSFNCGraphics.DefaultPopupFillColor=16777215,t=-1,pas["WEBLib.TMSFNCStyles"].TTMSFNCStyles.GetStyleBackgroundStrokeColor({get:function(){return t},set:function(e){t=e}})?pas["WEBLib.TMSFNCGraphics"].TTMSFNCGraphics.DefaultPopupStrokeColor=t:pas["WEBLib.TMSFNCGraphics"].TTMSFNCGraphics.DefaultPopupStrokeColor=12632256,t=-1,pas["WEBLib.TMSFNCStyles"].TTMSFNCStyles.GetStyleDefaultButtonFillColor({get:function(){return t},set:function(e){t=e}})?pas["WEBLib.TMSFNCGraphics"].TTMSFNCGraphics.DefaultButtonFillColor=t:pas["WEBLib.TMSFNCGraphics"].TTMSFNCGraphics.DefaultButtonFillColor=pas["WEBLib.TMSFNCGraphicsTypes"].MakeGraphicsColor(225,225,225),t=-1,pas["WEBLib.TMSFNCStyles"].TTMSFNCStyles.GetStyleLineFillColor({get:function(){return t},set:function(e){t=e}})?pas["WEBLib.TMSFNCGraphics"].TTMSFNCGraphics.DefaultButtonStrokeColor=t:pas["WEBLib.TMSFNCGraphics"].TTMSFNCGraphics.DefaultButtonStrokeColor=11119017,t=-1,pas["WEBLib.TMSFNCStyles"].TTMSFNCStyles.GetStyleTextFontColor({get:function(){return t},set:function(e){t=e}})?pas["WEBLib.TMSFNCGraphics"].TTMSFNCGraphics.DefaultTextFontColor=t:pas["WEBLib.TMSFNCGraphics"].TTMSFNCGraphics.DefaultTextFontColor=0,t=-1,pas["WEBLib.TMSFNCStyles"].TTMSFNCStyles.GetStyleSelectionFillColor({get:function(){return t},set:function(e){t=e}})?(pas["WEBLib.TMSFNCGraphics"].TTMSFNCGraphics.DefaultSelectionFillColor=t,pas["WEBLib.TMSFNCGraphics"].TTMSFNCGraphics.DefaultButtonFillColorFocused=pas["WEBLib.TMSFNCGraphicsTypes"].Blend(t,pas["WEBLib.TMSFNCGraphics"].TTMSFNCGraphics.DefaultButtonFillColor,25),pas["WEBLib.TMSFNCGraphics"].TTMSFNCGraphics.DefaultButtonStrokeColorFocused=pas["WEBLib.TMSFNCGraphicsTypes"].Blend(t,pas["WEBLib.TMSFNCGraphics"].TTMSFNCGraphics.DefaultButtonStrokeColor,30)):(pas["WEBLib.TMSFNCGraphics"].TTMSFNCGraphics.DefaultSelectionFillColor=0,pas["WEBLib.TMSFNCGraphics"].TTMSFNCGraphics.DefaultButtonFillColorFocused=pas["WEBLib.TMSFNCGraphicsTypes"].MakeGraphicsColor(229,241,251),pas["WEBLib.TMSFNCGraphics"].TTMSFNCGraphics.DefaultButtonStrokeColorFocused=pas["WEBLib.TMSFNCGraphicsTypes"].MakeGraphicsColor(60,127,177)),pas["WEBLib.TMSFNCGraphics"].TTMSFNCGraphics.DefaultButtonStrokeColorDisabled=11119017,pas["WEBLib.TMSFNCGraphics"].TTMSFNCGraphics.DefaultButtonFillColorDisabled=13882323},this.SetAdaptToStyle=function(t){this.FAdaptToStyle=t,this.InitializeStyle()},this.CancelHint=function(){},this.BeginDrag$1=function(){},this.InitializeStyle=function(){this.SetDefaultGraphicColors(),this.DestroyGraphicElements(),this.GetAdaptToStyle()?(this.FAdaptedToStyle=!0,this.ApplyStyle()):this.FAdaptedToStyle&&(this.ResetToDefaultStyle(),this.FAdaptedToStyle=!1),this.Invalidate()},this.ApplyStyle=function(){},this.ResetToDefaultStyle=function(){},this.HandleMouseLeave=function(){},this.HandleMouseEnter=function(){},this.HandleMouseDown=function(t,e,i,s){},this.HandleMouseMove=function(t,e,i){},this.HandleDblClick=function(t,e){},this.HandleMouseUp=function(t,e,i,s){},this.HandleKeyPress=function(t){},this.HandleKeyDown=function(t,e){},this.HandleDialogKey=function(t,e){},this.HandleKeyUp=function(t,e){},this.HandleMouseWheel=function(t,e,i){},this.HandleDragOver=function(t,e,i){},this.HandleDragDrop=function(t,e){},this.Create$1=function(t){var e=0;return pas["WEBLib.Controls"].TControl.Create$1.apply(this,arguments),e=96,this.FDesigntimeFormPixelsPerInch=e,this.FPaintScaleFactor=1,this.FResourceScaleFactor=1,this.SetDefaultGraphicColors(),this.FAdaptToStyle=!1,this.FAdaptedToStyle=!1,this.FTransparent=!1,this.FNativeCanvas=!1,this.FBufferedPainting=!1,this.FAntiAliasing=!0,this.FOptimizedHTMLDrawing=!0,this.FShowAcceleratorChar=!0,this.FTextQuality=1,this.FAllowFocus=!0,this},this.Destroy=function(){pas["WEBLib.Controls"].TCustomControl.Destroy.call(this)},this.ScalePaintValue=function(t){return pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.MulDivInt(t,Math.round(100*this.FPaintScaleFactor),100)},this.ScalePaintValue$1=function(t){return t*this.FPaintScaleFactor},rtl.addIntf(this,pas.System.IUnknown)})),rtl.createClass(this,"TTMSFNCCustomControlBase",this.TTMSFNCCustomControlBaseCommon,(function(){this.$init=function(){t.TTMSFNCCustomControlBaseCommon.$init.call(this),this.FStored=!1,this.FHitTest=!1},this.MouseWheel=function(t,e,i){pas["WEBLib.Controls"].TControl.MouseWheel.apply(this,arguments),this.HandleMouseWheel(rtl.refSet(t),e,i)},this.DoMouseLeave=function(){pas["WEBLib.Controls"].TControl.DoMouseLeave.call(this),this.HandleMouseLeave()},this.DoMouseEnter=function(){pas["WEBLib.Controls"].TControl.DoMouseEnter.call(this),this.HandleMouseEnter()},this.GetLocalRect=function(){var t=pas["WEBLib.TMSFNCTypes"].TRectF.$new();return t.$assign(pas["WEBLib.TMSFNCTypes"].RectF(0,0,this.GetWidth(),this.GetHeight())),t},this.MouseDown=function(t,e,i,s){pas["WEBLib.Controls"].TControl.MouseDown.apply(this,arguments),this.HandleMouseDown(t,rtl.refSet(e),i,s),null!=this.FOnInternalMouseDown&&this.FOnInternalMouseDown(this)},this.MouseMove=function(t,e,i){pas["WEBLib.Controls"].TControl.MouseMove.apply(this,arguments),this.HandleMouseMove(rtl.refSet(t),e,i),null!=this.FOnInternalMouseMove&&this.FOnInternalMouseMove(this)},this.MouseUp=function(t,e,i,s){pas["WEBLib.Controls"].TControl.MouseUp.apply(this,arguments),this.HandleMouseUp(t,rtl.refSet(e),i,s),null!=this.FOnInternalMouseUp&&this.FOnInternalMouseUp(this)},this.DragOver=function(t,e,i,s,n){pas["WEBLib.Controls"].TControl.DragOver.apply(this,arguments),this.HandleDragOver(t,pas["WEBLib.TMSFNCTypes"].PointF(e,i),n)},this.KeyDown=function(t,e){pas["WEBLib.Controls"].TControl.KeyDown.apply(this,arguments),this.HandleDialogKey(t,rtl.refSet(e)),this.HandleKeyDown(t,rtl.refSet(e)),t.get()},this.KeyPress=function(t){pas["WEBLib.Controls"].TControl.KeyPress.apply(this,arguments),this.HandleKeyPress(t)},this.KeyUp=function(t,e){pas["WEBLib.Controls"].TControl.KeyUp.apply(this,arguments),this.HandleKeyUp(t,rtl.refSet(e))},this.DblClick=function(){var t=pas["WEBLib.TMSFNCTypes"].TPointF.$new();pas["WEBLib.Controls"].TControl.DblClick.call(this),t.$assign(this.ConvertScreenToClient(pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.GetMousePos()))),this.HandleDblClick(t.X,t.Y),null!=this.FOnInternalDblClick&&this.FOnInternalDblClick(this)},this.Create$1=function(e){return t.TTMSFNCCustomControlBaseCommon.Create$1.apply(this,arguments),this.FHitTest=!0,this.FStored=!0,this.FControlStyle=rtl.unionSet(this.FControlStyle,rtl.createSet(0)),this},this.BeginUpdate=function(){pas["WEBLib.Controls"].TControl.BeginUpdate.call(this)},this.EndUpdate=function(){pas["WEBLib.Controls"].TCustomControl.EndUpdate.call(this)},this.DragDrop=function(t,e,i){pas["WEBLib.Controls"].TControl.DragDrop.apply(this,arguments),this.HandleDragDrop(t,pas["WEBLib.TMSFNCTypes"].PointF(e,i))},this.CanFocus=function(){return pas["WEBLib.Controls"].TControl.CanFocus.call(this)&&this.GetAllowFocus()},rtl.addIntf(this,pas.System.IUnknown)})),this.$rtti.$MethodVar("TTMSFNCCustomControlBeforeDrawEvent",{procsig:rtl.newTIProcSig([["Sender",pas.System.$rtti.TObject],["AGraphics",pas["WEBLib.TMSFNCGraphics"].$rtti.TTMSFNCGraphics],["ARect",pas["WEBLib.TMSFNCTypes"].$rtti.TRectF],["ADefaultDraw",rtl.boolean,1]]),methodkind:0}),this.$rtti.$MethodVar("TTMSFNCCustomControlAfterDrawEvent",{procsig:rtl.newTIProcSig([["Sender",pas.System.$rtti.TObject],["AGraphics",pas["WEBLib.TMSFNCGraphics"].$rtti.TTMSFNCGraphics],["ARect",pas["WEBLib.TMSFNCTypes"].$rtti.TRectF]]),methodkind:0}),this.$rtti.$MethodVar("TTMSFNCCustomControlCanSavePropertyEvent",{procsig:rtl.newTIProcSig([["Sender",pas.System.$rtti.TObject],["AObject",pas.System.$rtti.TObject],["APropertyName",rtl.string],["APropertyType",pas.System.$rtti.TTypeKind],["ACanSave",rtl.boolean,1]]),methodkind:0}),this.$rtti.$MethodVar("TTMSFNCCustomControlCanLoadPropertyEvent",{procsig:rtl.newTIProcSig([["Sender",pas.System.$rtti.TObject],["AObject",pas.System.$rtti.TObject],["APropertyName",rtl.string],["APropertyType",pas.System.$rtti.TTypeKind],["ACanLoad",rtl.boolean,1]]),methodkind:0}),rtl.createClass(this,"TTMSFNCCustomControl",this.TTMSFNCCustomControlBase,(function(){this.FBlockPersistenceInterface=!1,this.$init=function(){t.TTMSFNCCustomControlBase.$init.call(this),this.FBlockInvalidate=!1,this.FAppearancePersisting=!1,this.FExporting=!1,this.FExportRect=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),this.FOnBeforeDraw=null,this.FOnAfterDraw=null,this.FOnCanSaveProperty=null,this.FOnCanLoadProperty=null,this.FCheckedChk=null,this.FUnCheckedChk=null,this.FCheckedFocusChk=null,this.FUnCheckedFocusChk=null,this.FCheckedDisabledChk=null,this.FUnCheckedDisabledChk=null,this.FCheckedRd=null,this.FUnCheckedRd=null,this.FCheckedFocusRd=null,this.FUnCheckedFocusRd=null,this.FCheckedDisabledRd=null,this.FUnCheckedDisabledRd=null,this.FDownBtn=null,this.FNormalBtn=null,this.FDownFocusBtn=null,this.FNormalFocusBtn=null,this.FNormalDisabledBtn=null,this.FFill=null,this.FStroke=null,this.FUndoManager=null},this.$final=function(){this.FExportRect=void 0,this.FOnBeforeDraw=void 0,this.FOnAfterDraw=void 0,this.FOnCanSaveProperty=void 0,this.FOnCanLoadProperty=void 0,this.FCheckedChk=void 0,this.FUnCheckedChk=void 0,this.FCheckedFocusChk=void 0,this.FUnCheckedFocusChk=void 0,this.FCheckedDisabledChk=void 0,this.FUnCheckedDisabledChk=void 0,this.FCheckedRd=void 0,this.FUnCheckedRd=void 0,this.FCheckedFocusRd=void 0,this.FUnCheckedFocusRd=void 0,this.FCheckedDisabledRd=void 0,this.FUnCheckedDisabledRd=void 0,this.FDownBtn=void 0,this.FNormalBtn=void 0,this.FDownFocusBtn=void 0,this.FNormalFocusBtn=void 0,this.FNormalDisabledBtn=void 0,this.FFill=void 0,this.FStroke=void 0,this.FUndoManager=void 0,t.TTMSFNCCustomControlBase.$final.call(this)},this.SetFill=function(t){this.FFill.Assign(t)},this.SetStroke=function(t){this.FStroke.Assign(t)},this.GetVersionNumber=function(t,e,i,s){return"",""},this.IsAppearanceProperty=function(t,e,i){var s,n=!1,r="",o="";return n=!1,null!=(s=pas.TypInfo.GetPropInfo$2(t,e))&&(r=pas["WEBLib.TMSFNCPersistence"].TTMSFNCPersistence.GetPropInfoName(s),n=(n="TAlphaColor"===(o=pas["WEBLib.TMSFNCPersistence"].TTMSFNCPersistence.GetPropInfoTypeName(s))||"TColor"===o||"TGraphicsColor"===o||"TTMSFNCGraphicsFill"===o||"TTMSFNCGraphicsStroke"===o||pas.System.Pos("Appearance",r)>0)||"Fill"===e||"Stroke"===e||"Font"===e),n},this.CanSaveProperty=function(t,e,i){var s=!1;return s=!(t===this&&!this.FBlockPersistenceInterface)||-1===pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.IndexOfTextInArray(e,pas["WEBLib.TMSFNCPersistence"].ExcludePropertyList),this.FAppearancePersisting&&(s=s&&this.IsAppearanceProperty(t,e,i)),this.DoCanSaveProperty(t,e,i,{get:function(){return s},set:function(t){s=t}}),s},this.CanLoadProperty=function(t,e,i){var s=!1;return s=!(t===this&&!this.FBlockPersistenceInterface)||-1===pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.IndexOfTextInArray(e,pas["WEBLib.TMSFNCPersistence"].ExcludePropertyList),this.DoCanLoadProperty(t,e,i,{get:function(){return s},set:function(t){s=t}}),s},this.GetContentRect=function(){var t=pas["WEBLib.TMSFNCTypes"].TRectF.$new();return t.$assign(this.GetControlRect()),t},this.GetControlRect=function(){var t=pas["WEBLib.TMSFNCTypes"].TRectF.$new();return this.IsExporting()?t.$assign(this.FExportRect):t.$assign(pas["WEBLib.TMSFNCTypes"].RectF(0,0,this.GetWidth(),this.GetHeight())),t},this.GetLocalRect=function(){var e=pas["WEBLib.TMSFNCTypes"].TRectF.$new();return this.IsExporting()?e.$assign(this.FExportRect):e.$assign(t.TTMSFNCCustomControlBase.GetLocalRect.call(this)),e},this.IsExporting=function(){return this.FExporting},this.SetColor=function(t){pas["WEBLib.Controls"].TControl.SetColor.apply(this,arguments),null!=this.FFill&&this.FFill.SetColor(t),this.Invalidate()},this.RegisterRuntimeClasses=function(){},this.ApplyStyle=function(){var e=0;t.TTMSFNCCustomControlBaseCommon.ApplyStyle.call(this),e=-1,pas["WEBLib.TMSFNCStyles"].TTMSFNCStyles.GetStyleBackgroundFillColor({get:function(){return e},set:function(t){e=t}})&&this.FFill.SetColor(e),e=-1,pas["WEBLib.TMSFNCStyles"].TTMSFNCStyles.GetStyleLineFillColor({get:function(){return e},set:function(t){e=t}})&&this.FStroke.SetColor(e)},this.ResetToDefaultStyle=function(){t.TTMSFNCCustomControlBaseCommon.ResetToDefaultStyle.call(this),this.FFill.SetColor(16777215),this.FStroke.SetColor(12632256)},this.DestroyGraphicElements=function(){null!=this.FDownBtn&&(rtl.free(this,"FDownBtn"),this.FDownBtn=null),null!=this.FNormalBtn&&(rtl.free(this,"FNormalBtn"),this.FNormalBtn=null),null!=this.FDownFocusBtn&&(rtl.free(this,"FDownFocusBtn"),this.FDownFocusBtn=null),null!=this.FNormalFocusBtn&&(rtl.free(this,"FNormalFocusBtn"),this.FNormalFocusBtn=null),null!=this.FNormalDisabledBtn&&(rtl.free(this,"FNormalDisabledBtn"),this.FNormalDisabledBtn=null),null!=this.FCheckedChk&&(rtl.free(this,"FCheckedChk"),this.FCheckedChk=null),null!=this.FCheckedFocusChk&&(rtl.free(this,"FCheckedFocusChk"),this.FCheckedFocusChk=null),null!=this.FUnCheckedDisabledChk&&(rtl.free(this,"FUnCheckedDisabledChk"),this.FUnCheckedDisabledChk=null),null!=this.FCheckedDisabledChk&&(rtl.free(this,"FCheckedDisabledChk"),this.FCheckedDisabledChk=null),null!=this.FUnCheckedChk&&(rtl.free(this,"FUnCheckedChk"),this.FUnCheckedChk=null),null!=this.FUnCheckedFocusChk&&(rtl.free(this,"FUnCheckedFocusChk"),this.FUnCheckedFocusChk=null),null!=this.FCheckedRd&&(rtl.free(this,"FCheckedRd"),this.FCheckedRd=null),null!=this.FCheckedFocusRd&&(rtl.free(this,"FCheckedFocusRd"),this.FCheckedFocusRd=null),null!=this.FUnCheckedRd&&(rtl.free(this,"FUnCheckedRd"),this.FUnCheckedRd=null),null!=this.FUnCheckedFocusRd&&(rtl.free(this,"FUnCheckedFocusRd"),this.FUnCheckedFocusRd=null),null!=this.FUnCheckedDisabledRd&&(rtl.free(this,"FUnCheckedDisabledRd"),this.FUnCheckedDisabledRd=null),null!=this.FCheckedDisabledRd&&(rtl.free(this,"FCheckedDisabledRd"),this.FCheckedDisabledRd=null)},this.UpdateControlAfterResize=function(){},this.DoBeforeDraw=function(t,e,i){null!=this.FOnBeforeDraw&&this.FOnBeforeDraw(this,t,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(e),i)},this.DoAfterDraw=function(t,e){null!=this.FOnAfterDraw&&this.FOnAfterDraw(this,t,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(e))},this.DoCanSaveProperty=function(t,e,i,s){null!=this.FOnCanSaveProperty&&this.FOnCanSaveProperty(this,t,e,i,s)},this.DoCanLoadProperty=function(t,e,i,s){null!=this.FOnCanLoadProperty&&this.FOnCanLoadProperty(this,t,e,i,s)},this.DrawBackground=function(t,e){t.FFill.Assign(this.FFill),t.FFill.SetColor(this.FColor),t.FStroke.Assign(this.FStroke),t.DrawRectangle$2(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(e),2)},this.StrokeChanged=function(t){this.Invalidate()},this.FillChanged=function(t){0!==this.FFill.FKind&&3!==this.FFill.FKind&&-1!==this.FFill.FColor?this.SetColor(this.FFill.FColor):this.SetColor(-1),this.Invalidate()},this.Draw=function(t,e){},this.DrawControl=function(){var t=null,e=null,i=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),s=!1,n=null;this.FBufferedPainting?(t=pas["WEBLib.TMSFNCGraphics"].TTMSFNCGraphics.$create("CreateBitmapCanvas",[this.GetWidth(),this.GetHeight(),this.FNativeCanvas,!0])).BeginScene():t=pas["WEBLib.TMSFNCGraphics"].TTMSFNCGraphics.$create("Create$1",[this.GetCanvas(),this.FNativeCanvas]),t.FOptimizedHTMLDrawing=this.FOptimizedHTMLDrawing,t.GetContext().SetSize(this.GetWidth(),this.GetHeight()),t.GetContext().SetAntiAliasing(this.FAntiAliasing),t.GetContext().SetShowAcceleratorChar(this.FShowAcceleratorChar),t.GetContext().SetTextQuality(this.FTextQuality);try{if(i.$assign(pas["WEBLib.TMSFNCTypes"].RectF(0,0,this.GetWidth(),this.GetHeight())),s=!0,this.DoBeforeDraw(t,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(i),{get:function(){return s},set:function(t){s=t}}),s&&(this.DrawBackground(t,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(i)),this.Draw(t,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(i)),this.DoAfterDraw(t,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(i))),this.FBufferedPainting&&t.EndScene(),t.GetContext().Render(),this.FBufferedPainting){n=pas["WEBLib.TMSFNCTypes"].TTMSFNCBitmap.$create("Create$3");try{n.Assign(t.FBitmap),e=pas["WEBLib.TMSFNCGraphics"].TTMSFNCGraphics.$create("Create$1",[this.GetCanvas(),!1]);try{e.GetContext().SetSize(this.GetWidth(),this.GetHeight()),e.GetContext().SetAntiAliasing(this.FAntiAliasing),e.GetContext().SetShowAcceleratorChar(this.FShowAcceleratorChar),e.GetContext().SetTextQuality(this.FTextQuality),e.DrawBitmap$1(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(i),n,!0,!1,!0,!1)}finally{e=rtl.freeLoc(e)}}finally{n=rtl.freeLoc(n)}}}finally{t=rtl.freeLoc(t)}},this.CaptureEx=function(){this.Capture()},this.ReleaseCaptureEx=function(){this.ReleaseCapture()},this.Assign=function(e){t.TTMSFNCCustomControl.isPrototypeOf(e)?(this.FFill.Assign(rtl.as(e,t.TTMSFNCCustomControl).FFill),this.FStroke.Assign(rtl.as(e,t.TTMSFNCCustomControl).FStroke)):pas["WEBLib.Controls"].TControl.Assign.apply(this,arguments)},this.Create$1=function(e){return t.TTMSFNCCustomControlBase.Create$1.apply(this,arguments),this.SetColor(16777215),this.FLinkTouchEvents=!0,this.FAllowTouch=!1,this.SetTabStop(!0),this.FFill=pas["WEBLib.TMSFNCGraphicsTypes"].TTMSFNCGraphicsFill.$create("Create$1",[1,16777215,8421504,-1,-1]),this.FStroke=pas["WEBLib.TMSFNCGraphicsTypes"].TTMSFNCGraphicsStroke.$create("Create$1",[1,12632256]),this.FFill.FOnChanged=rtl.createCallback(this,"FillChanged"),this.FStroke.FOnChanged=rtl.createCallback(this,"StrokeChanged"),this.IsDesignerForm()||this.RegisterRuntimeClasses(),this},this.Destroy=function(){null!=this.FUndoManager&&(rtl.free(this,"FUndoManager"),this.FUndoManager=null),null!=this.FDownBtn&&(rtl.free(this,"FDownBtn"),this.FDownBtn=null),null!=this.FNormalBtn&&(rtl.free(this,"FNormalBtn"),this.FNormalBtn=null),null!=this.FDownFocusBtn&&(rtl.free(this,"FDownFocusBtn"),this.FDownFocusBtn=null),null!=this.FNormalFocusBtn&&(rtl.free(this,"FNormalFocusBtn"),this.FNormalFocusBtn=null),null!=this.FNormalDisabledBtn&&(rtl.free(this,"FNormalDisabledBtn"),this.FNormalDisabledBtn=null),null!=this.FCheckedChk&&(rtl.free(this,"FCheckedChk"),this.FCheckedChk=null),null!=this.FCheckedFocusChk&&(rtl.free(this,"FCheckedFocusChk"),this.FCheckedFocusChk=null),null!=this.FUnCheckedDisabledChk&&(rtl.free(this,"FUnCheckedDisabledChk"),this.FUnCheckedDisabledChk=null),null!=this.FCheckedDisabledChk&&(rtl.free(this,"FCheckedDisabledChk"),this.FCheckedDisabledChk=null),null!=this.FUnCheckedChk&&(rtl.free(this,"FUnCheckedChk"),this.FUnCheckedChk=null),null!=this.FUnCheckedFocusChk&&(rtl.free(this,"FUnCheckedFocusChk"),this.FUnCheckedFocusChk=null),null!=this.FCheckedRd&&(rtl.free(this,"FCheckedRd"),this.FCheckedRd=null),null!=this.FCheckedFocusRd&&(rtl.free(this,"FCheckedFocusRd"),this.FCheckedFocusRd=null),null!=this.FUnCheckedRd&&(rtl.free(this,"FUnCheckedRd"),this.FUnCheckedRd=null),null!=this.FUnCheckedFocusRd&&(rtl.free(this,"FUnCheckedFocusRd"),this.FUnCheckedFocusRd=null),null!=this.FUnCheckedDisabledRd&&(rtl.free(this,"FUnCheckedDisabledRd"),this.FUnCheckedDisabledRd=null),null!=this.FCheckedDisabledRd&&(rtl.free(this,"FCheckedDisabledRd"),this.FCheckedDisabledRd=null),rtl.free(this,"FFill"),rtl.free(this,"FStroke"),t.TTMSFNCCustomControlBaseCommon.Destroy.call(this)},this.IsDesignTime=function(){var t=!1;return t=!1,null!=this.FOwner&&(t=4 in this.FComponentState&&!(1 in this.FOwner.FComponentState||0 in this.FOwner.FComponentState)),t},this.IsDesigning=function(){return 4 in this.FComponentState},this.IsDesignerForm=function(){var e,i=!1;return e=pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.GetOwnerForm(this),i=this.IsDesigning(),null!=e&&(i=i||t.TTMSFNCCustomDesignerForm.isPrototypeOf(e)),i},this.IsDestroying=function(){return 3 in this.FComponentState},this.Resize=function(){pas["WEBLib.Controls"].TCustomControl.Resize.call(this),this.UpdateControlAfterResize()},this.Paint=function(){pas["WEBLib.Controls"].TCustomControl.Paint.call(this),this.FBlockInvalidate||this.DrawControl()},rtl.addIntf(this,pas["WEBLib.TMSFNCPersistence"].ITMSFNCPersistence),rtl.addIntf(this,pas.System.IUnknown);var e=this.$rtti;e.addProperty("AdaptToStyle",3,rtl.boolean,"GetAdaptToStyle","SetAdaptToStyle",{Default:!1}),e.addProperty("AllowFocus",3,rtl.boolean,"GetAllowFocus","SetAllowFocus",{Default:!0}),e.addProperty("Align",2,pas["WEBLib.Controls"].$rtti.TAlign,"FAlign","SetAlign",{Default:pas["WEBLib.Controls"].TAlign.alNone}),e.addProperty("AlignWithMargins",2,rtl.boolean,"FAlignWithMargins","SetAlignWithMargins",{Default:!1}),e.addProperty("DoubleBuffered",0,rtl.boolean,"FDoubleBuffered","FDoubleBuffered",{Default:!1}),e.addProperty("Color",2,pas["WEBLib.Graphics"].$rtti.TColor,"FColor","SetColor"),e.addProperty("Margins",2,pas["WEBLib.Controls"].$rtti.TMargins,"FMargins","SetMargins"),e.addProperty("Enabled",2,rtl.boolean,"FEnabled","SetEnabled",{Default:!0}),e.addProperty("Font",2,pas["WEBLib.Graphics"].$rtti.TFont,"FFont","SetFont"),e.addProperty("ParentDoubleBuffered",0,rtl.boolean,"FParentDoubleBuffered","FParentDoubleBuffered",{Default:!0}),e.addProperty("TabStop",2,rtl.boolean,"FTabStop","SetTabStop",{Default:!0}),e.addProperty("ShowHint",2,rtl.boolean,"FShowHint","SetShowHint",{Default:!1}),e.addProperty("Hint",2,rtl.string,"FHint","SetHint"),e.addProperty("TabOrder",2,rtl.longint,"FTabOrder","SetTabOrder"),e.addProperty("Visible",2,rtl.boolean,"FVisible","SetVisible",{Default:!0}),e.addProperty("OnClick",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnClick","FOnClick"),e.addProperty("OnDblClick",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnDblClick","FOnDblClick"),e.addProperty("OnEnter",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnEnter","FOnEnter"),e.addProperty("OnExit",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnExit","FOnExit"),e.addProperty("OnKeyDown",0,pas["WEBLib.Controls"].$rtti.TKeyEvent,"FOnKeyDown","FOnKeyDown"),e.addProperty("OnKeyPress",0,pas["WEBLib.Controls"].$rtti.TKeyPressEvent,"FOnKeyPress","FOnKeyPress"),e.addProperty("OnKeyUp",0,pas["WEBLib.Controls"].$rtti.TKeyEvent,"FOnKeyUp","FOnKeyUp"),e.addProperty("OnMouseDown",0,pas["WEBLib.Controls"].$rtti.TMouseEvent,"FOnMouseDown","FOnMouseDown"),e.addProperty("OnMouseEnter",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnMouseEnter","FOnMouseEnter"),e.addProperty("OnMouseLeave",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnMouseLeave","FOnMouseLeave"),e.addProperty("OnMouseMove",0,pas["WEBLib.Controls"].$rtti.TMouseMoveEvent,"FOnMouseMove","FOnMouseMove"),e.addProperty("OnMouseUp",0,pas["WEBLib.Controls"].$rtti.TMouseEvent,"FOnMouseUp","FOnMouseUp"),e.addProperty("OnMouseWheel",0,pas["WEBLib.Controls"].$rtti.TMouseWheelEvent,"FOnMouseWheel","FOnMouseWheel"),e.addProperty("OnMouseWheelUp",0,pas["WEBLib.Controls"].$rtti.TMouseWheelUpDownEvent,"FOnMouseWheelUp","FOnMouseWheelUp"),e.addProperty("OnMouseWheelDown",0,pas["WEBLib.Controls"].$rtti.TMouseWheelUpDownEvent,"FOnMouseWheelDown","FOnMouseWheelDown"),e.addProperty("OnDragOver",0,pas["WEBLib.Controls"].$rtti.TDragOverEvent,"FOnDragOver","FOnDragOver"),e.addProperty("OnDragDrop",0,pas["WEBLib.Controls"].$rtti.TDragDropEvent,"FOnDragDrop","FOnDragDrop"),e.addProperty("PopupMenu",0,pas["WEBLib.Menus"].$rtti.TPopupMenu,"FPopupMenu","FPopupMenu"),e.addProperty("ShowAcceleratorChar",2,rtl.boolean,"FShowAcceleratorChar","SetShowAcceleratorChar",{Default:!0}),e.addProperty("OnBeforeDraw",0,t.$rtti.TTMSFNCCustomControlBeforeDrawEvent,"FOnBeforeDraw","FOnBeforeDraw"),e.addProperty("OnAfterDraw",0,t.$rtti.TTMSFNCCustomControlAfterDrawEvent,"FOnAfterDraw","FOnAfterDraw"),e.addProperty("OnCanSaveProperty",0,t.$rtti.TTMSFNCCustomControlCanSavePropertyEvent,"FOnCanSaveProperty","FOnCanSaveProperty"),e.addProperty("OnCanLoadProperty",0,t.$rtti.TTMSFNCCustomControlCanLoadPropertyEvent,"FOnCanLoadProperty","FOnCanLoadProperty")}))}),["WEBLib.TMSFNCUtils","SysUtils","WEBLib.StdCtrls"]),rtl.module("WEBLib.TMSFNCWebBrowser.WEB",["System"],(function(){"use strict";var t=this.$impl;this.RegisterWebBrowserService=function(){pas["WEBLib.TMSFNCWebBrowser"].TTMSFNCWebBrowserPlatformServices.Current().SupportsPlatformService$1(rtl.getIntfGUIDR(pas["WEBLib.TMSFNCWebBrowser"].ITMSFNCWebBrowserService),{p:t,get:function(){return this.p.WebBrowserService},set:function(t){rtl.setIntfP(this.p,"WebBrowserService",t)}})||(rtl.setIntfP(t,"WebBrowserService",rtl.queryIntfT(t.TTMSFNCWEBWebBrowserService.$create("Create$1"),pas["WEBLib.TMSFNCWebBrowser"].ITMSFNCWebBrowserService),!0),pas["WEBLib.TMSFNCWebBrowser"].TTMSFNCWebBrowserPlatformServices.Current().AddPlatformService(rtl.getIntfGUIDR(pas["WEBLib.TMSFNCWebBrowser"].ITMSFNCWebBrowserService),t.WebBrowserService))},this.$implcode=function(){rtl.createClass(t,"TTMSFNCWEBWebBrowserService",pas["WEBLib.TMSFNCWebBrowser"].TTMSFNCWebBrowserFactoryService,(function(){this.DoCreateWebBrowser=function(e){var i=null,s=!1;try{i=rtl.setIntfL(i,rtl.queryIntfT(t.TTMSFNCWEBWebBrowser.$create("Create$1",[e]),pas["WEBLib.TMSFNCWebBrowser"].ITMSFNCCustomWebBrowser),!0),s=!0}finally{s||rtl._Release(i)}return i},rtl.addIntf(this,pas["WEBLib.TMSFNCWebBrowser"].ITMSFNCWebBrowserService),rtl.addIntf(this,pas.System.IUnknown)})),rtl.createClass(t,"TTMSFNCWEBWebBrowser",pas.System.TInterfacedObject,(function(){this.$init=function(){pas.System.TInterfacedObject.$init.call(this),this.FCustomObjectMessage=null,this.FExternalBrowser=!1,this.FWebControl=null},this.$final=function(){this.FWebControl=void 0,pas.System.TInterfacedObject.$final.call(this)},this.ClearMethodPointers=function(){this.FCustomObjectMessage=null},this.BeforeChangeParent=function(){},this.SetEnableContextMenu=function(t){},this.SetEnableShowDebugConsole=function(t){},this.SetEnableAcceleratorKeys=function(t){},this.LoadHTML=function(t){null!=this.FWebControl&&null!=this.FWebControl.GetElementHandle()&&(this.FWebControl.GetElementHandle().innerHTML=t)},this.UpdateEnabled=function(){},this.UpdateBounds=function(){},this.Initialize=function(){},this.DeInitialize=function(){},this.ExecuteJavascript=function(t,e,i){var s,n="",r="",o="",a="",l="",h=0,F=null;n=pas.SysUtils.StringReplace(pas["WEBLib.TMSFNCTypes"].CreateNewGUID(),"{","",rtl.createSet(0)),n=pas.SysUtils.StringReplace(n,"}","",rtl.createSet(0)),r="function "+(s="executeScript"+(n=pas.SysUtils.StringReplace(n,"-","",rtl.createSet(0))))+"(){\r\n",pas.System.Pos("function",t)>0?(a=t,h=pas.System.Pos("function ",t)+9,l=pas.System.Copy(t,h,pas.System.Pos("(",t)-h),r=r+" return ("+(a=pas.SysUtils.StringReplace(a,l+"();","",rtl.createSet(0)))+")();\r\n"):r=r+" return "+t+"\r\n",r+="}",F=this.FWebControl.GetElementHandle();var p,c,u=document.createElement("script");u.id=n,u.text=r,F&&F.ownerDocument?(F.ownerDocument.body.append(u),p=F.ownerDocument.defaultView):(document.body.append(u),p=document.body.defaultView),c=p,o=(o=function(t,e,i){try{return new Function("return function() {return this."+e+"("+i+")};")()}catch(t){return function(){}}}(0,s,void 0).apply(c))?o.toString():"",null!=e&&e(o),null!=i&&i(this);var d=document.getElementById(n);d&&d.parentNode.removeChild(d)},this.Create$1=function(t){return this.FExternalBrowser=!1,this.FWebControl=t,this.ClearMethodPointers(),this},rtl.addIntf(this,pas["WEBLib.TMSFNCWebBrowser"].ITMSFNCCustomWebBrowser,{ExecuteJavaScript:"ExecuteJavascript"}),rtl.addIntf(this,pas.System.IUnknown)})),t.WebBrowserService=null}}),["Classes","SysUtils","WEBLib.Controls","WEBLib.TMSFNCWebBrowser","WEBLib.TMSFNCUtils","WEBLib.TMSFNCTypes","Web"]),rtl.module("WEBLib.TMSFNCWebBrowser",["System","Types","WEBLib.TMSFNCCustomControl","WEBLib.TMSFNCGraphics","WEBLib.TMSFNCUtils","WEBLib.TMSFNCTypes","Classes","TypInfo","contnrs","WEBLib.StdCtrls","WEBLib.Forms","WEBLib.Controls"],(function(){"use strict";var t=this;this.DESIGNTIMEMESSAGE="Selectable/Draggable area (only active at designtime)",rtl.createInterface(this,"ITMSFNCCustomWebBrowser","{F74562D0-56C7-4ED2-B01B-8C9C16DD9361}",["SetEnableContextMenu","SetEnableShowDebugConsole","SetEnableAcceleratorKeys","LoadHTML","UpdateBounds","UpdateEnabled","BeforeChangeParent","Initialize","DeInitialize","ExecuteJavaScript"],pas.System.IUnknown),rtl.createInterface(this,"ITMSFNCWebBrowserService","{4B7A5FE1-A889-47C6-B40F-A611BB6266E6}",["CreateWebBrowser","DestroyWebBrowser"],pas.System.IUnknown),rtl.createClass(this,"TTMSFNCCustomWebBrowser",pas["WEBLib.TMSFNCCustomControl"].TTMSFNCCustomControl,(function(){this.$init=function(){pas["WEBLib.TMSFNCCustomControl"].TTMSFNCCustomControl.$init.call(this),this.FDesigntimeEnabled=!1,this.FCanDestroyDispatch=!1,this.FSyncValue="",this.FSyncValueExecuted=!1,this.FInitialized=!1,this.FWebBrowser=null,this.FExternalBrowser=!1,this.FEnableShowDebugConsole=!1,this.FEnableAcceleratorKeys=!1,this.FEnableContextMenu=!1,this.FOnInitialized=null},this.$final=function(){rtl.setIntfP(this,"FWebBrowser",null),this.FOnInitialized=void 0,pas["WEBLib.TMSFNCCustomControl"].TTMSFNCCustomControl.$final.call(this)},this.SetEnableContextMenu=function(t){this.FEnableContextMenu=t,null!=this.FWebBrowser&&this.FWebBrowser.SetEnableContextMenu(t)},this.SetEnableShowDebugConsole=function(t){this.FEnableShowDebugConsole=t,null!=this.FWebBrowser&&this.FWebBrowser.SetEnableShowDebugConsole(t)},this.SetDesigntimeEnabled=function(t){this.FDesigntimeEnabled=t,this.IsDesigning()&&(this.FDesigntimeEnabled&&!this.FInitialized?this.Initialize():this.DeInitialize())},this.SetEnabledAcceleratorKeys=function(t){this.FEnableAcceleratorKeys=t,null!=this.FWebBrowser&&this.FWebBrowser.SetEnableAcceleratorKeys(t)},this.DoExecuteJavaScriptSync=function(t){this.FSyncValue=t,this.FSyncValueExecuted=!0},this.CanCreateBrowser=function(){return!0,!0},this.UpdateElement=function(){pas["WEBLib.Controls"].TControl.UpdateElement.call(this),null!=this.GetElementHandle()&&this.GetElementHandle().style.setProperty("overflow","auto")},this.CreateClasses=function(){},this.Initialized=function(){this.FInitialized=!0,null!=this.FOnInitialized&&this.FOnInitialized(this)},this.SetParent=function(t){null!=this.FWebBrowser&&this.FWebBrowser.BeforeChangeParent(),pas["WEBLib.Controls"].TControl.SetParent.apply(this,arguments),this.Initialize(),this.BeginUpdate(),this.EndUpdate()},this.SetEnabled=function(t){pas["WEBLib.TMSFNCCustomControl"].TTMSFNCCustomControlBaseCommon.SetEnabled.apply(this,arguments),null!=this.FWebBrowser&&this.FWebBrowser.UpdateEnabled()},this.Draw=function(e,i){var s="",n=0;pas["WEBLib.TMSFNCCustomControl"].TTMSFNCCustomControl.Draw.apply(this,arguments),this.IsDesigning()&&(e.FFont.SetSize(12),e.FFont.SetName("Montserrat"),s=t.DESIGNTIMEMESSAGE,n=e.CalculateTextHeight$1(s),e.DrawText$1(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(pas["WEBLib.TMSFNCTypes"].RectF(this.ScalePaintValue(5),this.ScalePaintValue(5),this.GetWidth()-this.ScalePaintValue(5),n+this.ScalePaintValue(5))),s,!1,1,0,0,0,-1,-1,!0,!1,-1,-1))},this.Loaded=function(){pas["WEBLib.Controls"].TCustomControl.Loaded.call(this),this.Initialize(),null!=this.FWebBrowser&&this.FWebBrowser.UpdateBounds()},this.ExecuteJavaScript=function(t,e,i){null!=this.FWebBrowser&&(i&&this.FInitialized,this.FWebBrowser.ExecuteJavaScript(t,e,null))},this.ExecuteJavaScriptSync=function(t){var e="";return e="",null!=this.FWebBrowser&&(this.FSyncValue="",this.FSyncValueExecuted=!1,this.FWebBrowser.ExecuteJavaScript(t,rtl.createCallback(this,"DoExecuteJavaScriptSync"),null),e=this.FSyncValue),e},this.LoadHTML=function(t){null!=this.FWebBrowser&&this.FWebBrowser.LoadHTML(t)},this.Initialize=function(){(this.IsDesigning()&&this.FDesigntimeEnabled||!this.IsDesigning())&&null!=this.FWebBrowser&&this.FWebBrowser.Initialize()},this.DeInitialize=function(){this.FInitialized=!1,null!=this.FWebBrowser&&this.FWebBrowser.DeInitialize()},this.Create$1=function(e){var i=null;try{pas["WEBLib.TMSFNCCustomControl"].TTMSFNCCustomControl.Create$1.apply(this,arguments),this.FCanDestroyDispatch=!0,this.FDesigntimeEnabled=!0,this.FExternalBrowser=!1,this.FEnableShowDebugConsole=!0,this.FEnableContextMenu=!0,this.FEnableAcceleratorKeys=!0,this.CanCreateBrowser()&&t.TTMSFNCWebBrowserPlatformServices.Current().SupportsPlatformService$1(rtl.getIntfGUIDR(t.ITMSFNCWebBrowserService),{get:function(){return i},set:function(t){i=rtl.setIntfL(i,t)}})&&rtl.setIntfP(this,"FWebBrowser",i.CreateWebBrowser(this),!0),this.CreateClasses(),this.SetWidth(500),this.SetHeight(350),this.Initialized()}finally{rtl._Release(i)}return this},this.Destroy=function(){var e=null;try{this.CanCreateBrowser()&&t.TTMSFNCWebBrowserPlatformServices.Current().SupportsPlatformService$1(rtl.getIntfGUIDR(t.ITMSFNCWebBrowserService),{get:function(){return e},set:function(t){e=rtl.setIntfL(e,t)}})&&e.DestroyWebBrowser(this.FWebBrowser),null!=this.FWebBrowser&&(this.FWebBrowser.DeInitialize(),rtl.setIntfP(this,"FWebBrowser",null)),pas["WEBLib.TMSFNCCustomControl"].TTMSFNCCustomControl.Destroy.call(this)}finally{rtl._Release(e)}},this.UpdateControlAfterResize=function(){pas["WEBLib.TMSFNCCustomControl"].TTMSFNCCustomControl.UpdateControlAfterResize.call(this),null!=this.FWebBrowser&&this.FWebBrowser.UpdateBounds()},rtl.addIntf(this,pas["WEBLib.TMSFNCPersistence"].ITMSFNCPersistence),rtl.addIntf(this,pas.System.IUnknown)})),rtl.createClass(this,"TTMSFNCWebBrowserList",pas.Classes.TList,(function(){})),rtl.createClass(this,"TTMSFNCWebBrowserFactoryService",pas.System.TInterfacedObject,(function(){this.$init=function(){pas.System.TInterfacedObject.$init.call(this),this.FWebBrowsers=null},this.$final=function(){this.FWebBrowsers=void 0,pas.System.TInterfacedObject.$final.call(this)},this.DoRemoveWebBrowser=function(t){null!==this.FWebBrowsers&&null!==t&&this.FWebBrowsers.Remove(t)},this.Create$1=function(){return pas.System.TObject.Create.call(this),this.FWebBrowsers=t.TTMSFNCWebBrowserList.$create("Create$1"),this},this.Destroy=function(){pas.SysUtils.FreeAndNil({p:this,get:function(){return this.p.FWebBrowsers},set:function(t){this.p.FWebBrowsers=t}}),pas.System.TObject.Destroy.call(this)},this.CreateWebBrowser=function(t){var e=null,i=!1;try{e=rtl.setIntfL(e,this.DoCreateWebBrowser(t),!0),this.FWebBrowsers.Add(e),i=!0}finally{i||rtl._Release(e)}return e},this.DestroyWebBrowser=function(t){this.DoRemoveWebBrowser(t)},rtl.addIntf(this,t.ITMSFNCWebBrowserService),rtl.addIntf(this,pas.System.IUnknown)})),rtl.createClass(this,"TTMSFNCWebBrowserPlatformServicesService",pas.System.TObject,(function(){this.$init=function(){pas.System.TObject.$init.call(this),this.FInterface=null,this.FGUID=""},this.$final=function(){rtl.setIntfP(this,"FInterface",null),pas.System.TObject.$final.call(this)},this.Create$1=function(t,e){return this.FGUID=t,rtl.setIntfP(this,"FInterface",e),this}})),rtl.createClass(this,"TTMSFNCWebBrowserPlatformServicesList",pas.contnrs.TObjectList,(function(){this.GetItem$1=function(t){return this.GetItem(t)},this.GetValue=function(t){var e=null,i=0,s=!1;try{e=rtl.setIntfL(e,null);for(var n=0,r=this.GetCount()-1;n<=r;n++)if(i=n,this.GetItem$1(i).FGUID===t){e=rtl.setIntfL(e,this.GetItem$1(i).FInterface);break}s=!0}finally{s||rtl._Release(e)}return e},this.ContainsKey=function(t){var e=!1,i=0;e=!1;for(var s=0,n=this.GetCount()-1;s<=n;s++)if(i=s,this.GetItem$1(i).FGUID===t){e=!0;break}return e}})),rtl.createClass(this,"TTMSFNCWebBrowserPlatformServices",pas.System.TObject,(function(){this.FCurrent=null,this.FCurrentReleased=!1,this.$init=function(){pas.System.TObject.$init.call(this),this.FServicesList=null},this.$final=function(){this.FServicesList=void 0,pas.System.TObject.$final.call(this)},this.Create$1=function(){return pas.System.TObject.Create.call(this),this.FServicesList=t.TTMSFNCWebBrowserPlatformServicesList.$create("Create$2"),this},this.Destroy=function(){pas.SysUtils.FreeAndNil({p:this,get:function(){return this.p.FServicesList},set:function(t){this.p.FServicesList=t}}),pas.System.TObject.Destroy.call(this)},this.AddPlatformService=function(e,i){var s=null;try{this.FServicesList.ContainsKey(pas.SysUtils.GUIDToString(e))||pas.SysUtils.Supports$1(i,e,{get:function(){return s},set:function(t){s=t}})&&this.FServicesList.Add$1(t.TTMSFNCWebBrowserPlatformServicesService.$create("Create$1",[pas.SysUtils.GUIDToString(e),i]))}finally{rtl._Release(s)}},this.SupportsPlatformService$1=function(t,e){var i=!1,s=rtl.createIntfRefs();try{this.FServicesList.ContainsKey(pas.SysUtils.GUIDToString(t))?i=pas.SysUtils.Supports$1(s.ref(1,this.FServicesList.GetValue(pas.SysUtils.GUIDToString(t))),t,e):(e.set(null),i=!1)}finally{s.free()}return i},this.Current=function(){return null!==this.FCurrent||this.FCurrentReleased||(t.TTMSFNCWebBrowserPlatformServices.FCurrent=t.TTMSFNCWebBrowserPlatformServices.$create("Create$1")),this.FCurrent}})),t.$init=function(){t.TTMSFNCWebBrowserPlatformServices.FCurrentReleased=!1,pas["WEBLib.TMSFNCWebBrowser.WEB"].RegisterWebBrowserService()}}),["SysUtils","WEBLib.TMSFNCGraphicsTypes","WEBLib.TMSFNCWebBrowser.WEB"]),rtl.module("WEBLib.TMSFNCCustomWEBControl",["System","Classes","Types","DateUtils","WEBLib.Forms","Web","contnrs","WEBLib.Controls","WEBLib.TMSFNCTypes","WEBLib.TMSFNCGraphicsTypes","WEBLib.TMSFNCWebBrowser"],(function(){"use strict";var t=this,e=t.$impl;this.LB="\r",this.TTMSFNCCustomWEBControlLinkKind={0:"mlkLink",mlkLink:0,1:"mlkScript",mlkScript:1,2:"mlkStyle",mlkStyle:2},rtl.createClass(this,"TTMSFNCCustomWEBControlLink",pas.System.TObject,(function(){this.$init=function(){pas.System.TObject.$init.call(this),this.FCharSet="",this.FType="",this.FURL="",this.FContent="",this.FDefer=!1,this.FAsync=!1,this.FRel="",this.FKind=0},this.CreateScript=function(t,e,i,s,n,r){return this.Create$1(1,t,e,i,"",s,n,r),this},this.Create$1=function(t,e,i,s,n,r,o,a){return this.FKind=t,this.FURL=e,this.FType=i,this.FCharSet=s,this.FDefer=o,this.FRel=n,this.FAsync=a,this.FContent=r,this}})),rtl.createClass(this,"TTMSFNCCustomWEBControlLinksList",pas.contnrs.TObjectList,(function(){this.GetItem$1=function(t){return this.GetItem(t)}})),rtl.createClass(this,"TTMSFNCCustomWEBControlEventData",pas.Classes.TPersistent,(function(){this.$init=function(){pas.Classes.TPersistent.$init.call(this),this.FEvent="",this.FEventName="",this.FID="",this.FCustomData=""},this.Create$1=function(){return this.FEvent="",this},this.Destroy=function(){pas.System.TObject.Destroy.call(this)};var t=this.$rtti;t.addProperty("ID",0,rtl.string,"FID","FID"),t.addProperty("EventName",0,rtl.string,"FEventName","FEventName")})),rtl.createClass(this,"TTMSFNCCustomWEBControl",pas["WEBLib.TMSFNCWebBrowser"].TTMSFNCCustomWebBrowser,(function(){this.$init=function(){pas["WEBLib.TMSFNCWebBrowser"].TTMSFNCCustomWebBrowser.$init.call(this),this.FControlInitialized=!1,this.FEventData=null,this.FUpdateCount$1=0,this.FRemoveMargins=!1},this.SetControlInitialized=function(t){this.FControlInitialized=t},this.ParseEvent=function(i){var s,n,r="",o="",a=null,l=0,h=0;if(r=i,s=n=1===pas.System.Pos(e.EVENTDATAPREFIX,r),n){l=pas.System.Pos(e.EVENTDATAPREFIX,r),(h=pas.System.Pos(e.CUSTOMDATAPREFIX,r))>0?(o=pas.System.Copy(r,h+e.CUSTOMDATAPREFIX.length,r.length-h-1),r=pas.System.Copy(r,l+e.EVENTDATAPREFIX.length,h-e.EVENTDATAPREFIX.length-1)):(r=pas.System.Copy(r,l+e.EVENTDATAPREFIX.length,r.length-1),o=""),""!==o&&(o=pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.URLDecode(o)),r=pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.URLDecode(r),a=t.TTMSFNCCustomWEBControlEventData.$create("Create$1");try{pas["WEBLib.TMSFNCTypes"].TTMSFNCObjectHelper.FromJSON.call(a,r),a.FCustomData=o,"Initialized"===a.FEventName?(this.SetControlInitialized(!0),this.DoControlInitialized()):this.CallCustomEvent(a)}finally{a=rtl.freeLoc(a)}}return s},this.IsControlReady=function(){return!0,!0},this.Loaded=function(){pas["WEBLib.TMSFNCWebBrowser"].TTMSFNCCustomWebBrowser.Loaded.call(this),this.BeginUpdate(),this.EndUpdate()},this.DestroyControl=function(){null!=this.FEventData&&(this.UnbindEvents(),this.ClearMethodPointers()),this.RemoveStyles(),this.RemoveScripts()},this.DoControlInitialized=function(){},this.Initialized=function(){pas["WEBLib.TMSFNCWebBrowser"].TTMSFNCCustomWebBrowser.Initialized.call(this),this.FControlInitialized=!1,this.InitializeControl(),this.IsDesigning()&&(this.SetEnableContextMenu(!1),this.SetEnableShowDebugConsole(!1),this.SetEnabledAcceleratorKeys(!1))},this.InitializeControl=function(){this.FUpdateCount$1>0||this.IsDestroying()||this.FControlInitialized||(null===this.FEventData&&(this.GetMethodPointers(),this.BindEvents()),this.InitializeHTML())},this.InitializeHTML=function(){this.FUpdateCount$1>0||this.IsDestroying()||this.FControlInitialized||(this.LoadStyles(),!1,this.LoadScripts(!0),this.LoadScripts(!1),this.LoadHTML(this.GetHTML()))},this.LoadScripts=function(e){var i=null,s=0,n=null,r="",o="",a="",l="",h="",F="",p=!1,c=!1,u=!1,d=null;if(this.IsControlReady()){u=e,d=this.GetElementHandle(),i=t.TTMSFNCCustomWEBControlLinksList.$create("Create$2");try{u?this.GetHeadLinks(i,!0):this.GetBodyLinks(i,!0,!0);for(var S=0,C=i.GetCount()-1;S<=C;S++){s=S,n=i.GetItem$1(s),r="WEBLib.TMSFNCWEBControl."+pas.SysUtils.StringReplace(this.GetControlID()," ","",rtl.createSet(0))+".",o=n.FURL,a=n.FType,n.FCharSet,c=n.FDefer,p=n.FAsync,h=n.FRel,F=n.FContent;var T=n.FKind;if(0===T?l="LINK":1===T&&(l="SCRIPT"),r=u?r+l+"HEAD"+pas.SysUtils.IntToStr(s):r+l+"BODY"+pas.SysUtils.IntToStr(s),!(document.getElementById(r)||document.querySelector('script[src="'+o+'"]')||document.querySelector('link[href="'+o+'"]'))){var m=document.createElement(l);m.id=r,""!=a&&(m.type=a),"LINK"==l?(""!=h&&(m.rel=h),""!=o&&(m.href=o)):(m.defer=c,m.async=p,""!=o&&(m.src=o)),m.innerHTML=F,d&&d.ownerDocument?u?d.ownerDocument.head.appendChild(m):d.ownerDocument.body.appendChild(m):u?document.head.appendChild(m):document.body.appendChild(m)}}}finally{i=rtl.freeLoc(i)}}},this.RemoveScripts=function(){var e=0,i="",s="",n=null,r=null;n=t.TTMSFNCCustomWEBControlLinksList.$create("Create$2"),this.GetHeadLinks(n,!1);try{for(var o=0,a=n.GetCount()-1;o<=a;o++){e=o,r=n.GetItem$1(e),s="WEBLib.TMSFNCWEBControl."+pas.SysUtils.StringReplace(this.GetControlID()," ","",rtl.createSet(0))+".";var l=r.FKind;0===l?i="LINK":1===l&&(i="SCRIPT"),s=s+i+"HEAD"+pas.SysUtils.IntToStr(e),(p=document.getElementById(s))&&p.parentNode.removeChild(p)}n.Clear(),this.GetBodyLinks(n,!1,!1);for(var h=0,F=n.GetCount()-1;h<=F;h++){e=h,r=n.GetItem$1(e),s="WEBLib.TMSFNCWEBControl."+pas.SysUtils.StringReplace(this.GetControlID()," ","",rtl.createSet(0))+".";var p,c=r.FKind;0===c?i="LINK":1===c&&(i="SCRIPT"),s=s+i+"BODY"+pas.SysUtils.IntToStr(e),(p=document.getElementById(s))&&p.parentNode.removeChild(p)}}finally{n=rtl.freeLoc(n)}},this.LoadStyles=function(){var t="",e="",i=null;if(this.IsControlReady()){if(i=this.GetElementHandle(),e=this.GetHeadStyle(),t="WEBLib.TMSFNCWEBControl."+pas.SysUtils.StringReplace(this.GetControlID()," ","",rtl.createSet(0))+".Styles",document.getElementById(t))return;(t=document.createElement("style")).id=t,t.innerHTML=e,i&&i.ownerDocument?i.ownerDocument.head.appendChild(t):document.head.appendChild(t)}},this.RemoveStyles=function(){var t;t="WEBLib.TMSFNCWEBControl."+pas.SysUtils.StringReplace(this.GetControlID()," ","",rtl.createSet(0))+".Styles";var e=document.getElementById(t);e&&e.parentNode.removeChild(e)},this.CreateClasses=function(){pas["WEBLib.TMSFNCWebBrowser"].TTMSFNCCustomWebBrowser.CreateClasses.call(this)},this.GetLinks=function(e,i,s){var n="",r="";s&&!this.IsControlReady()||(i?(n=(n=(n=(n=n+this.GetGlobalVariables()+t.LB+t.LB)+"var "+this.GetControlVariable()+" = null;"+t.LB)+this.GetCommunicationLayer()+t.LB+t.LB)+this.GetWaitForInitialization()+t.LB+t.LB,""!==(r=this.GetCustomFunctions())&&(n=n+r+t.LB+t.LB)):n="Include",""!==n&&e.Add$1(t.TTMSFNCCustomWEBControlLink.$create("CreateScript",["","text/javascript","",n,!1,!1])))},this.GetBodyLinks=function(t,e,i){i&&!this.IsControlReady()||this.GetLinks(t,e,i)},this.GetHeadLinks=function(t,e){e&&!this.IsControlReady()||this.LoadLinks(t)},this.LoadLinks=function(t){},this.GetCustomCSS=function(){return"",""},this.HandleDoEventData=function(t){var e;return e=t.detail,this.ParseEvent(e),!0,!0},this.BindEvents=function(){null!=this.GetElementBindHandle()&&(this.GetMethodPointers(),this.GetElementBindHandle().addEventListener(this.GetEventDataName(),this.FEventData))},this.UnbindEvents=function(){null!=this.GetElementBindHandle()&&this.GetElementBindHandle().removeEventListener(this.GetEventDataName(),this.FEventData)},this.ClearMethodPointers=function(){pas["WEBLib.Controls"].TControl.ClearMethodPointers.call(this),this.FEventData=null},this.GetMethodPointers=function(){pas["WEBLib.Controls"].TControl.GetMethodPointers.call(this),null===this.FEventData&&(this.FEventData=rtl.createCallback(this,"HandleDoEventData"))},this.SetName=function(t){this.DestroyControl(),this.FControlInitialized=!1,pas["WEBLib.Controls"].TCustomControl.SetName.apply(this,arguments),this.FUpdateCount$1>0||this.InitializeControl()},this.CallCustomEvent=function(t){},this.GetGlobalVariables=function(){return"",""},this.GetCustomFunctions=function(){return"",""},this.GetCommunicationLayer=function(){return"var "+this.GetControlID()+"sendObjectMessage = function(parameters, customdata = undefined) {"+t.LB+'  var v = "'+e.EVENTDATAPREFIX+'" + parameters;'+t.LB+"  if (customdata) {"+t.LB+'    v = v + "'+e.CUSTOMDATAPREFIX+'" + customdata;'+t.LB+"  }"+t.LB+'  var event = new CustomEvent("'+this.GetEventDataName()+'", {detail: v});'+t.LB+"  if (!"+this.GetControlVariable()+"){"+t.LB+"  "+this.GetControlVariable()+' = document.getElementById("'+this.GetID()+'");'+t.LB+"  }"+t.LB+"  if ("+this.GetControlVariable()+"){"+t.LB+"    "+this.GetControlVariable()+".dispatchEvent(event);"+t.LB+"  }"+t.LB+"};"},this.GetDefaultHTML=function(){return"  <style>"+t.LB+"  #notfound {"+t.LB+"    background: #d7ebf6;"+t.LB+"    padding: 0;"+t.LB+"    border: #000000;"+t.LB+"    width: 100%;"+t.LB+"    height: 100%;"+t.LB+"    margin: 0;"+t.LB+"    padding: 0;"+t.LB+"    border: solid #211b19;"+t.LB+"    border-width: thin;"+t.LB+"    overflow:hidden;"+t.LB+"    display:block;"+t.LB+"    -webkit-box-sizing: border-box;"+t.LB+"            box-sizing: border-box;"+t.LB+"    position: relative;"+t.LB+"  }"+t.LB+"  #notfound .notfound {"+t.LB+"    position: absolute;"+t.LB+"    left: 50%;"+t.LB+"    top: 50%;"+t.LB+"    -webkit-transform: translate(-50%, -50%);"+t.LB+"        -ms-transform: translate(-50%, -50%);"+t.LB+"            transform: translate(-50%, -50%);"+t.LB+"  }"+t.LB+"  .notfound {"+t.LB+"    max-width: 520px;"+t.LB+"    width: 100%;"+t.LB+"    line-height: 1.4;"+t.LB+"    text-align: center;"+t.LB+"  }"+t.LB+"  .notfound .notfound-404 {"+t.LB+"    position: relative;"+t.LB+"    height: 200px;"+t.LB+"    margin: 0px auto 20px;"+t.LB+"    z-index: -1;"+t.LB+"  }"+t.LB+"  .notfound .notfound-404 h2 {"+t.LB+"    font-family: 'Montserrat', sans-serif;"+t.LB+"    font-size: 28px;"+t.LB+"    font-weight: 400;"+t.LB+"    text-transform: uppercase;"+t.LB+"    color: #211b19;"+t.LB+"    background: #d7ebf6;"+t.LB+"    padding: 10px 5px;"+t.LB+"    margin: auto;"+t.LB+"    display: inline-block;"+t.LB+"    position: absolute;"+t.LB+"    bottom: 0px;"+t.LB+"    left: 0;"+t.LB+"    right: 0;"+t.LB+"  }"+t.LB+"  @media only screen and (max-width: 767px) {"+t.LB+"    .notfound .notfound-404 h1 {"+t.LB+"      font-size: 148px;"+t.LB+"    }"+t.LB+"  }"+t.LB+"  @media only screen and (max-width: 480px) {"+t.LB+"    .notfound .notfound-404 {"+t.LB+"      height: 148px;"+t.LB+"      margin: 0px auto 10px;"+t.LB+"    }"+t.LB+"    .notfound .notfound-404 h1 {"+t.LB+"      font-size: 86px;"+t.LB+"    }"+t.LB+"    .notfound .notfound-404 h2 {"+t.LB+"      font-size: 16px;"+t.LB+"    }"+t.LB+"    .notfound a {"+t.LB+"      padding: 7px 15px;"+t.LB+"      font-size: 14px;"+t.LB+"    }"+t.LB+"  }"+t.LB+" </style>"+t.LB+'  <div id="notfound">'+t.LB+'    <div class="notfound">'+t.LB+'      <div class="notfound-404">'+t.LB+"        <h2>"+this.GetDefaultHTMLMessage()+"</h2>"+t.LB+"      </div>"+t.LB+"    </div>"+t.LB+"  </div>"+t.LB},this.GetHeadStyle=function(){var e,i="";return i="",""!==(e=this.GetCustomCSS())&&(i=i+t.LB+e),this.FRemoveMargins&&(i=i+t.LB+"body,html {"+t.LB+"  margin: 0;"+t.LB+"  padding: 0;"+t.LB+"}"),i},this.GetBody=function(){return'<div id="'+this.GetControlID()+'" style="height:100%; width:100%"></div>'},this.GetControlID=function(){return this.FName+"_id"},this.GetControlVariable=function(){return this.FName+"_var"},this.GetEventDataName=function(){return this.FName+"_eventdata"},this.GetDefaultHTMLMessage=function(){return this.FName+"cannot be initialized"},this.GetDefaultEventDataObject=function(){var e="",i=null;i=t.TTMSFNCCustomWEBControlEventData.$create("Create$1");try{e=pas["WEBLib.TMSFNCTypes"].TTMSFNCObjectHelper.ToJSON$1.call(i)}finally{i=rtl.freeLoc(i)}return e},this.GetWaitForInitialization=function(){return"function "+this.GetControlID()+"initialize () {"+t.LB+this.GetWaitInitVariables()+t.LB+"  if ("+this.GetWaitInitCondition()+") {"+t.LB+"    setTimeout("+this.GetControlID()+"initialize, 200);"+t.LB+"  } else {"+t.LB+this.GetWaitInitElseStatement()+t.LB+"    var o = "+this.GetDefaultEventDataObject()+";"+t.LB+'    o["EventName"] = "Initialized";'+t.LB+"    "+this.GetControlID()+"sendObjectMessage(JSON.stringify(o));"+t.LB+"  };"+t.LB+"};"+t.LB+t.LB+this.GetControlID()+"initialize();"},this.GetWaitInitVariables=function(){return"",""},this.GetWaitInitCondition=function(){return"false","false"},this.GetWaitInitElseStatement=function(){return"",""},this.GetHTML=function(){return"",this.IsControlReady()?this.GetBody():this.GetDefaultHTML()},this.Assign=function(e){pas["WEBLib.TMSFNCCustomControl"].TTMSFNCCustomControl.Assign.apply(this,arguments),t.TTMSFNCCustomWEBControl.isPrototypeOf(e)},this.Create$1=function(t){return pas["WEBLib.TMSFNCWebBrowser"].TTMSFNCCustomWebBrowser.Create$1.apply(this,arguments),""===this.GetID()&&this.IsDesigning()&&this.SetID(this.GetNewName()),this},this.Destroy=function(){this.DestroyControl(),this.SetControlInitialized(!1),pas["WEBLib.TMSFNCWebBrowser"].TTMSFNCCustomWebBrowser.Destroy.call(this)},this.BeginUpdate=function(){pas["WEBLib.TMSFNCCustomControl"].TTMSFNCCustomControlBase.BeginUpdate.call(this),this.FUpdateCount$1+=1},this.EndUpdate=function(){pas["WEBLib.TMSFNCCustomControl"].TTMSFNCCustomControlBase.EndUpdate.call(this),this.FUpdateCount$1-=1,0===this.FUpdateCount$1&&(this.FControlInitialized||this.InitializeControl())},rtl.addIntf(this,pas["WEBLib.TMSFNCPersistence"].ITMSFNCPersistence),rtl.addIntf(this,pas.System.IUnknown),this.$rtti.addProperty("DesigntimeEnabled",2,rtl.boolean,"FDesigntimeEnabled","SetDesigntimeEnabled",{Default:!0})})),t.$implcode=function(){e.EVENTDATAPREFIX="jsevent://",e.CUSTOMDATAPREFIX="customdata://"}}),["Math","WEBLib.TMSFNCUtils","SysUtils"]),rtl.module("WEBLib.TMSFNCWXCommon",["System","SysUtils","WEBLib.TMSFNCGraphics"],(function(){"use strict";this.TTMSFNCWXLibraryLocation={0:"llOffline",llOffline:0,1:"llOnline",llOnline:1},this.$rtti.$Enum("TTMSFNCWXLibraryLocation",{minvalue:0,maxvalue:1,ordtype:1,enumtype:this.TTMSFNCWXLibraryLocation}),this.FloatToJSValue=function(t,e){return pas.SysUtils.FloatToStr(t)},this.JSStringToFloat=function(t){return pas.SysUtils.StrToFloat(t)},this.GetDesignHeaderTextHeight=function(t){var e=0,i=null;(i=pas["WEBLib.TMSFNCGraphics"].TTMSFNCGraphics.$create("CreateBitmapCanvas",[1,1,!1,!0])).BeginScene();try{e=Math.round(i.CalculateTextHeight$1("AAA")+t)}finally{i.EndScene(),i=rtl.freeLoc(i)}return e}}),["Classes","WEBLib.TMSFNCUtils"]),rtl.module("WEBLib.RegularExpressions",["System","JS","Web","SysUtils","Types"],(function(){"use strict";var t=this.$impl;this.TRegExOption={0:"roNone",roNone:0,1:"roIgnoreCase",roIgnoreCase:1,2:"roMultiLine",roMultiLine:2,3:"roSingleLine",roSingleLine:3,4:"roJSUnicode",roJSUnicode:4},rtl.recNewT(this,"TRegEx",(function(){this.FJSRegExp=null,this.FPattern="",this.$new=function(){var t=Object.create(this);return t.FOptions={},t},this.$eq=function(t){return this.FJSRegExp===t.FJSRegExp&&this.FPattern===t.FPattern&&rtl.eqSet(this.FOptions,t.FOptions)},this.$assign=function(t){return this.FJSRegExp=t.FJSRegExp,this.FPattern=t.FPattern,this.FOptions=rtl.refSet(t.FOptions),this},this.GetJSRegExFlags=function(t){var e="";return e="g"+t,1 in this.FOptions&&(e+="i"),2 in this.FOptions&&(e+="m"),3 in this.FOptions&&(e+="s"),4 in this.FOptions&&(e+="u"),e},this.Create=function(t){return this.Create$1(t,{}),this},this.Create$1=function(e,i){var s=null,n="",r="";this.FPattern=t.RemoveLineEnding(e),this.FOptions=rtl.refSet(i);try{this.FJSRegExp=new RegExp(this.FPattern,this.GetJSRegExFlags(""))}catch(e){if(s=e,!t.GetJSExceptionDetails(s,{get:function(){return n},set:function(t){n=t}},{get:function(){return r},set:function(t){r=t}}))throw s;throw r=t.FormatErrorMessage(n,r),pas.SysUtils.Exception.$create("Create$1",[r])}return this},this.IsMatch=function(t){return this.IsMatch$1(t,1)},this.IsMatch$1=function(e,i){var s=!1,n=null,r="",o="";try{this.FJSRegExp=new RegExp(this.FPattern,this.GetJSRegExFlags("y")),this.FJSRegExp.lastIndex=i-1,s=rtl.length(this.FJSRegExp.exec(e))>0}catch(e){if(n=e,!t.GetJSExceptionDetails(n,{get:function(){return r},set:function(t){r=t}},{get:function(){return o},set:function(t){o=t}}))throw n;throw o=t.FormatErrorMessage(r,o),pas.SysUtils.Exception.$create("Create$1",[o])}return s}})),this.$implcode=function(){t.GetJSExceptionDetails=function(t,e,i){var s,n,r=!1;return r=!1,pas.SysUtils.Exception.isPrototypeOf(t)||(r=!0,s=t.name,n=t.message,e.set(s),i.set(n)),r},t.FormatErrorMessage=function(t,e){return pas.SysUtils.Format("%s: %s",pas.System.VarRecs(18,t,18,e))},t.RemoveLineEnding=function(t){var e="";return e=pas.StrUtils.TrimRightSet(t,["\n","\r"]),e=pas.StrUtils.TrimLeftSet(e,["\n","\r"])}}}),["StrUtils"]),rtl.module("WEBLib.TMSFNCWXBarcode.Consts",["System"],(function(){"use strict";var t=this;this.BARCODE_GET="BARCODE_GET",this.BARCODE_SIZE="BARCODE_SIZE",this.CONTROL_ID="#TTMSFNCWXBARCODECONTROLID#",this.DATA_OBJECT="#TTMSFNCWXBARCODEDATAOBJECT#",this.CREATEBARCODEJS=this.CONTROL_ID+'getBarcode(%s, %s, %s, %s, %s, {bcid: "%s", text: "%s", includetext: %s, height: %f, width: %f, scale: %d, textsize: %d, alttext: "%s", includecheck: %s, includecheckintext: %s, inkspread: %f, inkspreadh: %f, inkspreadv: %f, dotty: %s, showborder: %s, borderw: %f, borderl: %d, borderr: %d, bordert: %d, borderb: %d, borderc: "%s"%s})',this.CLEARBARCODEJS=this.CONTROL_ID+"clearBarcode()",this.LB="\r",this.INCH_MM=25.4,this.LIBRARY_PPI=72,this.GetBarcodeJavascript=function(e){return"function "+e+"getBarcode(elemId, bgcolor, useDefSize, sync, getSize, opt) {"+t.LB+"  let options = {"+t.LB+"    bcid: opt.bcid,"+t.LB+"    text: opt.text,"+t.LB+"    alttext: opt.alttext,"+t.LB+"    includetext: opt.includetext,"+t.LB+"    textsize: opt.textsize,"+t.LB+"    scale: opt.scale,"+t.LB+"    includecheck: opt.includecheck,"+t.LB+"    includecheckintext: opt.includecheckintext,"+t.LB+"    inkspread: opt.inkspread,"+t.LB+"    inkspreadh: opt.inkspreadh,"+t.LB+"    inkspreadv: opt.inkspreadv,"+t.LB+"    dotty: opt.dotty,"+t.LB+"    showborder: opt.showborder,"+t.LB+"    borderwidth: opt.borderw,"+t.LB+"    borderleft: opt.borderl,"+t.LB+"    borderright: opt.borderr,"+t.LB+"    bordertop: opt.bordert,"+t.LB+"    borderbottom: opt.borderb,"+t.LB+"    bordercolor: opt.borderc,"+t.LB+"  };"+t.LB+"  if (!useDefSize && !getSize) { "+t.LB+"    options.height = opt.height; "+t.LB+"    if (opt.width != 0) {"+t.LB+"      options.width = opt.width;"+t.LB+"    }"+t.LB+"  };"+t.LB+"  if (opt.textyalign) { options.textyalign = opt.textyalign };"+t.LB+"  if (opt.textxalign) { options.textxalign = opt.textxalign };"+t.LB+"  if (opt.raw) { options.raw = opt.raw };"+t.LB+"  if (opt.custinfoenc) { options.custinfoenc = opt.custinfoenc };"+t.LB+"  if (opt.parse) { options.parse = opt.parse };"+t.LB+"  if (opt.eclevel) { options.eclevel = opt.eclevel };"+t.LB+"  if (opt.layers) { options.layers = opt.layers };"+t.LB+"  if (opt.readerinit) { options.readerinit = opt.readerinit };"+t.LB+"  if (opt.ecaddchars) { options.ecaddchars = opt.ecaddchars };"+t.LB+"  if (opt.includestartstop) { options.includestartstop = opt.includestartstop };"+t.LB+"  if (opt.semi) { options.semi = opt.semi };"+t.LB+"  if (opt.shortfinder) { options.shortfinder = opt.shortfinder };"+t.LB+"  if (opt.columns) { options.columns = opt.columns };"+t.LB+"  if (opt.rows) { options.rows = opt.rows };"+t.LB+"  if (opt.rowheight) { options.rowheight = opt.rowheight };"+t.LB+"  if (opt.sepheight) { options.sepheight = opt.sepheight };"+t.LB+"  if (opt.mode) { options.mode = opt.mode };"+t.LB+"  if (opt.hidestars) { options.hidestars = opt.hidestars };"+t.LB+"  if (opt.version) { options.version = opt.version };"+t.LB+"  if (opt.segments) { options.segments = opt.segments };"+t.LB+"  if (opt.ratio) { options.ratio = opt.ratio };"+t.LB+"  if (opt.guardwhitespace) { options.guardwhitespace = opt.guardwhitespace };"+t.LB+"  if (opt.isbntextsize) { options.isbntextsize = opt.isbntextsize };"+t.LB+"  if (opt.isbntextxoffset) { options.isbntextxoffset = opt.isbntextxoffset };"+t.LB+"  if (opt.isbntextyoffset) { options.isbntextyoffset = opt.isbntextyoffset };"+t.LB+"  if (opt.ismntextsize) { options.ismntextsize = opt.ismntextsize };"+t.LB+"  if (opt.ismntextxoffset) { options.ismntextxoffset = opt.ismntextxoffset };"+t.LB+"  if (opt.ismntextyoffset) { options.ismntextyoffset = opt.ismntextyoffset };"+t.LB+"  if (opt.issntextsize) { options.issntextsize = opt.issntextsize };"+t.LB+"  if (opt.issntextxoffset) { options.issntextxoffset = opt.issntextxoffset };"+t.LB+"  if (opt.issntextyoffset) { options.issntextyoffset = opt.issntextyoffset };"+t.LB+"  if (opt.type) { options.type = opt.type };"+t.LB+"  if (opt.rowmult) { options.rowmult = opt.rowmult };"+t.LB+"  if (opt.checktype) { options.checktype = opt.checktype };"+t.LB+"  if (opt.badmod11) { options.badmod11 = opt.badmod11 };"+t.LB+"  if (opt.unidirectional) { options.unidirectional = opt.unidirectional };"+t.LB+"  if (opt.pzn8) { options.pzn8 = opt.pzn8 };"+t.LB+"  if (opt.altstartstop) { options.altstartstop = opt.altstartstop };"+t.LB+"  try {"+t.LB+"    let elem = document.getElementById(elemId);"+t.LB+"    if (elem) {"+t.LB+"      elem.style.backgroundColor = bgcolor;"+t.LB+"    } else {"+t.LB+"      document.body.style.backgroundColor = bgcolor;"+t.LB+"    }"+t.LB+'    let canvas = bwipjs.toCanvas("'+e+'", options)'+t.LB+'    let dataURL = canvas.toDataURL("image/png");'+t.LB+"    debugger;"+t.LB+"    if (!getSize) {"+t.LB+"      var o = "+t.DATA_OBJECT+";"+t.LB+'      o["EventName"] = "'+t.BARCODE_GET+'";'+t.LB+"      var customdata = dataURL;"+t.LB+"      var cd = encodeURIComponent(JSON.stringify(customdata))"+t.LB+"      "+e+"sendObjectMessage(JSON.stringify(o), cd);"+t.LB+"      return dataURL;"+t.LB+"    } else {"+t.LB+"      if (!sync) {"+t.LB+"        var o = "+t.DATA_OBJECT+";"+t.LB+'        o["EventName"] = "'+t.BARCODE_SIZE+'";'+t.LB+"        var customdata = {Width: canvas.width, Height: canvas.height};"+t.LB+"        var cd = encodeURIComponent(JSON.stringify(customdata))"+t.LB+"        "+e+"sendObjectMessage(JSON.stringify(o), cd);"+t.LB+"      }"+t.LB+"      return {Width: canvas.width, Height: canvas.height};"+t.LB+"    }"+t.LB+"  } catch (err) {"+t.LB+'    let canvas = document.getElementById("'+e+'");'+t.LB+"    if (canvas) {"+t.LB+'      let context = canvas.getContext("2d");'+t.LB+"      context.clearRect(0, 0, canvas.width, canvas.height);"+t.LB+"    };"+t.LB+'    return "";'+t.LB+"  }"+t.LB+"}"+t.LB+t.LB+"function "+e+"clearBarcode() {"+t.LB+'  let canvas = document.getElementById("'+e+'");'+t.LB+"  if (canvas) {"+t.LB+'    let context = canvas.getContext("2d");'+t.LB+"    context.clearRect(0, 0, canvas.width, canvas.height);"+t.LB+"  };"+t.LB+"}"}})),rtl.module("WEBLib.TMSFNCWXBarcode",["System","Classes","WEBLib.TMSFNCCustomWEBControl","WEBLib.TMSFNCTypes","WEBLib.TMSFNCWebBrowser","WEBLib.TMSFNCGraphicsTypes","WEBLib.TMSFNCCustomControl","WEBLib.TMSFNCWXCommon","WEBLib.JSON","WEBLib.Forms"],(function(){"use strict";var t=this;rtl.createClass(this,"TTMSFNCWXBarcodeBorder",pas.Classes.TPersistent,(function(){this.$init=function(){pas.Classes.TPersistent.$init.call(this),this.FOnChanged=null,this.FGapTop=0,this.FWidth=0,this.FGapLeft=0,this.FColor=0,this.FVisible=!1,this.FGapRight=0,this.FGapBottom=0},this.$final=function(){this.FOnChanged=void 0,pas.Classes.TPersistent.$final.call(this)},this.IsWidthStored=function(){return 1!==this.FWidth},this.SetColor=function(t){this.FColor!==t&&(this.FColor=t,this.Changed())},this.SetGapBottom=function(t){this.FGapBottom!==t&&(this.FGapBottom=t,this.Changed())},this.SetGapLeft=function(t){this.FGapLeft!==t&&(this.FGapLeft=t,this.Changed())},this.SetGapRight=function(t){this.FGapRight!==t&&(this.FGapRight=t,this.Changed())},this.SetGapTop=function(t){this.FGapTop!==t&&(this.FGapTop=t,this.Changed())},this.SetVisible=function(t){this.FVisible!==t&&(this.FVisible=t,this.Changed())},this.SetWidth=function(t){this.FWidth!==t&&(this.FWidth=t,this.Changed())},this.Changed=function(){null!=this.FOnChanged&&this.FOnChanged(this)},this.Create$1=function(){return this.FColor=0,this.FGapBottom=0,this.FGapLeft=0,this.FGapRight=0,this.FGapTop=0,this.FVisible=!1,this.FWidth=1,this};var t=this.$rtti;t.addProperty("Color",2,pas["WEBLib.Graphics"].$rtti.TColor,"FColor","SetColor",{Default:0}),t.addProperty("Visible",2,rtl.boolean,"FVisible","SetVisible",{Default:!1}),t.addProperty("Width",14,rtl.double,"FWidth","SetWidth",{stored:"IsWidthStored"}),t.addProperty("GapLeft",2,rtl.longint,"FGapLeft","SetGapLeft",{Default:0}),t.addProperty("GapRight",2,rtl.longint,"FGapRight","SetGapRight",{Default:0}),t.addProperty("GapTop",2,rtl.longint,"FGapTop","SetGapTop",{Default:0}),t.addProperty("GapBottom",2,rtl.longint,"FGapBottom","SetGapBottom",{Default:0})})),this.TTMSFNCWXBarcodeAusPostCustInfoEnc={0:"cieNumeric",cieNumeric:0,1:"cieCharacter",cieCharacter:1},this.$rtti.$Enum("TTMSFNCWXBarcodeAusPostCustInfoEnc",{minvalue:0,maxvalue:1,ordtype:1,enumtype:this.TTMSFNCWXBarcodeAusPostCustInfoEnc}),this.TTMSFNCWXBarcodeMailmarkType={0:"mt7",mt7:0,1:"mt9",mt9:1,2:"mt29",mt29:2},this.$rtti.$Enum("TTMSFNCWXBarcodeMailmarkType",{minvalue:0,maxvalue:2,ordtype:1,enumtype:this.TTMSFNCWXBarcodeMailmarkType}),this.TTMSFNCWXBarcodePZNVariant={0:"pvPZN7",pvPZN7:0,1:"pvPZN8",pvPZN8:1},this.$rtti.$Enum("TTMSFNCWXBarcodePZNVariant",{minvalue:0,maxvalue:1,ordtype:1,enumtype:this.TTMSFNCWXBarcodePZNVariant}),this.TTMSFNCWXBarcodeMSICheckType={0:"mctMod10",mctMod10:0,1:"mctMod1010",mctMod1010:1,2:"mctMod11",mctMod11:2,3:"mctNcrMod11",mctNcrMod11:3,4:"mctMod1110",mctMod1110:4,5:"NcrMod1110",NcrMod1110:5},this.$rtti.$Enum("TTMSFNCWXBarcodeMSICheckType",{minvalue:0,maxvalue:5,ordtype:1,enumtype:this.TTMSFNCWXBarcodeMSICheckType}),this.TTMSFNCWXBarcodePosiCodeVersion={0:"pcvA",pcvA:0,1:"pcvB",pcvB:1,2:"pcvLimitedA",pcvLimitedA:2,3:"pcvLimitedB",pcvLimitedB:3},this.$rtti.$Enum("TTMSFNCWXBarcodePosiCodeVersion",{minvalue:0,maxvalue:3,ordtype:1,enumtype:this.TTMSFNCWXBarcodePosiCodeVersion}),this.TTMSFNCWXBarcodeCodeOneVersion={0:"covA",covA:0,1:"covB",covB:1,2:"covC",covC:2,3:"covD",covD:3,4:"covE",covE:4,5:"covF",covF:5,6:"covG",covG:6,7:"covH",covH:7,8:"covT16",covT16:8,9:"covT32",covT32:9,10:"covT48",covT48:10,11:"covS10",covS10:11,12:"covS20",covS20:12,13:"covS30",covS30:13},this.$rtti.$Enum("TTMSFNCWXBarcodeCodeOneVersion",{minvalue:0,maxvalue:13,ordtype:1,enumtype:this.TTMSFNCWXBarcodeCodeOneVersion}),rtl.createClass(this,"TTMSFNCWXBarcodeSettings",pas.Classes.TPersistent,(function(){this.$init=function(){pas.Classes.TPersistent.$init.call(this),this.FParse=!1,this.FPDF417RowMult=0,this.FOnChanged=null,this.FHanXinVersion=0,this.FISSNTextSize=0,this.FMode=0,this.FChannelCodeShortFinder=!1,this.FMSIBadMod11=!1,this.FISMNTextXOffset=0,this.FBC412Semi=!1,this.FISMNTextYOffset=0,this.FISBNTextXOffset=0,this.FISBNTextYOffset=0,this.FBC412IncludeStartStop=!1,this.FPlesseyUndirectional=!1,this.FAztecCodeECAddChars=0,this.FRows=0,this.FColumns=0,this.FAztecCodeLayers=0,this.FRowHeight=0,this.FPZNVariant=0,this.FISMNTextSize=0,this.FGuardWhiteSpace=!1,this.FMailmarkType=0,this.FISBNTextSize=0,this.FMSICheckType=0,this.FECLevel=0,this.FAztecCodeReaderInit=!1,this.FDotCodeRatio=0,this.FCodabarAltStartStop=!1,this.FISSNTextXOffset=0,this.FCodeOneVersion=0,this.FCode39HideStars=!1,this.FAusPosCustInfoEnc=0,this.FISSNTextYOffset=0,this.FSepHeight=0,this.FRaw=!1,this.FSegments=0,this.FPosiCodeVersion=0},this.$final=function(){this.FOnChanged=void 0,pas.Classes.TPersistent.$final.call(this)},this.IsDotCodeRatioStored=function(){return 1.5!==this.FDotCodeRatio},this.SetAusPosCustInfoEnc=function(t){this.FAusPosCustInfoEnc!==t&&(this.FAusPosCustInfoEnc=t,this.Changed())},this.SetAztecCodeECAddChars=function(t){this.FAztecCodeECAddChars!==t&&(this.FAztecCodeECAddChars=t,this.Changed())},this.SetAztecCodeLayers=function(t){this.FAztecCodeLayers!==t&&(this.FAztecCodeLayers=t,this.Changed())},this.SetAztecCodeReaderInit=function(t){this.FAztecCodeReaderInit!==t&&(this.FAztecCodeReaderInit=t,this.Changed())},this.SetBC412IncludeStartStop=function(t){this.FBC412IncludeStartStop!==t&&(this.FBC412IncludeStartStop=t,this.Changed())},this.SetBC412Semi=function(t){this.FBC412Semi!==t&&(this.FBC412Semi=t,this.Changed())},this.SetChannelCodeShortFinder=function(t){this.FChannelCodeShortFinder!==t&&(this.FChannelCodeShortFinder=t,this.Changed())},this.SetCodabarAltStartStop=function(t){this.FCodabarAltStartStop!==t&&(this.FCodabarAltStartStop=t,this.Changed())},this.SetCode39HideStars=function(t){this.FCode39HideStars!==t&&(this.FCode39HideStars=t,this.Changed())},this.SetCodeOneVersion=function(t){this.FCodeOneVersion!==t&&(this.FCodeOneVersion=t,this.Changed())},this.SetColumns=function(t){this.FColumns!==t&&(this.FColumns=t,this.Changed())},this.SetDotCodeRatio=function(t){this.FDotCodeRatio!==t&&(this.FDotCodeRatio=t,this.Changed())},this.SetECLevel=function(t){this.FECLevel!==t&&(this.FECLevel=t,this.Changed())},this.SetGuardWhiteSpace=function(t){this.FGuardWhiteSpace!==t&&(this.FGuardWhiteSpace=t,this.Changed())},this.SetHanXinVersion=function(t){this.FHanXinVersion!==t&&(this.FHanXinVersion=t,this.Changed())},this.SetISBNTextSize=function(t){this.FISBNTextSize!==t&&(this.FISBNTextSize=t,this.Changed())},this.SetISBNTextXOffset=function(t){this.FISBNTextXOffset!==t&&(this.FISBNTextXOffset=t,this.Changed())},this.SetISBNTextYOffset=function(t){this.FISBNTextYOffset!==t&&(this.FISBNTextYOffset=t,this.Changed())},this.SetISMNTextSize=function(t){this.FISMNTextSize!==t&&(this.FISMNTextSize=t,this.Changed())},this.SetISMNTextXOffset=function(t){this.FISMNTextXOffset!==t&&(this.FISMNTextXOffset=t,this.Changed())},this.SetISMNTextYOffset=function(t){this.FISMNTextYOffset!==t&&(this.FISMNTextYOffset=t,this.Changed())},this.SetISSNTextSize=function(t){this.FISSNTextSize!==t&&(this.FISSNTextSize=t,this.Changed())},this.SetISSNTextXOffset=function(t){this.FISSNTextXOffset!==t&&(this.FISSNTextXOffset=t,this.Changed())},this.SetISSNTextYOffset=function(t){this.FISSNTextYOffset!==t&&(this.FISSNTextYOffset=t,this.Changed())},this.SetMailmarkType=function(t){this.FMailmarkType!==t&&(this.FMailmarkType=t,this.Changed())},this.SetMode=function(t){this.FMode!==t&&(this.FMode=t,this.Changed())},this.SetMSIBadMod11=function(t){this.FMSIBadMod11!==t&&(this.FMSIBadMod11=t,this.Changed())},this.SetMSICheckType=function(t){this.FMSICheckType!==t&&(this.FMSICheckType=t,this.Changed())},this.SetParse=function(t){this.FParse!==t&&(this.FParse=t,this.Changed())},this.SetPDF417RowMult=function(t){this.FPDF417RowMult!==t&&(this.FPDF417RowMult=t,this.Changed())},this.SetPlesseyUndirectional=function(t){this.FPlesseyUndirectional!==t&&(this.FPlesseyUndirectional=t,this.Changed())},this.SetPosiCodeVersion=function(t){this.FPosiCodeVersion!==t&&(this.FPosiCodeVersion=t,this.Changed())},this.SetPZNVariant=function(t){this.FPZNVariant!==t&&(this.FPZNVariant=t,this.Changed())},this.SetRaw=function(t){this.FRaw!==t&&(this.FRaw=t,this.Changed())},this.SetRowHeight=function(t){this.FRowHeight!==t&&(this.FRowHeight=t,this.Changed())},this.SetRows=function(t){this.FRows!==t&&(this.FRows=t,this.Changed())},this.SetSegments=function(t){this.FSegments!==t&&(this.FSegments=t,this.Changed())},this.SetSepHeight=function(t){this.FSepHeight!==t&&(this.FSepHeight=t,this.Changed())},this.Changed=function(){null!=this.FOnChanged&&this.FOnChanged(this)},this.Create$1=function(){return this.FRaw=!1,this.FParse=!1,this.FColumns=-1,this.FRows=-1,this.FGuardWhiteSpace=!1,this.FDotCodeRatio=1.5,this.FMode=-1,this.FRowHeight=10,this.FSepHeight=1,this.FECLevel=-1,this.FSegments=-1,this.FISBNTextSize=-1,this.FISBNTextXOffset=-1,this.FISBNTextYOffset=-1,this.FISMNTextSize=-1,this.FISMNTextXOffset=-1,this.FISMNTextYOffset=-1,this.FISSNTextSize=-1,this.FISSNTextXOffset=-1,this.FISSNTextYOffset=-1,this.FAusPosCustInfoEnc=1,this.FMailmarkType=0,this.FPZNVariant=0,this.FBC412IncludeStartStop=!1,this.FBC412Semi=!1,this.FCode39HideStars=!1,this.FMSICheckType=0,this.FMSIBadMod11=!1,this.FChannelCodeShortFinder=!1,this.FPlesseyUndirectional=!1,this.FCodabarAltStartStop=!1,this.FAztecCodeECAddChars=3,this.FAztecCodeLayers=-1,this.FAztecCodeReaderInit=!1,this.FHanXinVersion=1,this.FPosiCodeVersion=0,this.FCodeOneVersion=0,this.FPDF417RowMult=3,this};var e=this.$rtti;e.addProperty("Raw",2,rtl.boolean,"FRaw","SetRaw",{Default:!1}),e.addProperty("Parse",2,rtl.boolean,"FParse","SetParse",{Default:!1}),e.addProperty("Columns",2,rtl.longint,"FColumns","SetColumns",{Default:-1}),e.addProperty("Rows",2,rtl.longint,"FRows","SetRows",{Default:-1}),e.addProperty("GuardWhiteSpace",2,rtl.boolean,"FGuardWhiteSpace","SetGuardWhiteSpace",{Default:!1}),e.addProperty("DotCodeRatio",14,rtl.double,"FDotCodeRatio","SetDotCodeRatio",{stored:"IsDotCodeRatioStored"}),e.addProperty("Mode",2,rtl.longint,"FMode","SetMode",{Default:-1}),e.addProperty("RowHeight",2,rtl.longint,"FRowHeight","SetRowHeight",{Default:10}),e.addProperty("SeparatorHeight",2,rtl.longint,"FSepHeight","SetSepHeight",{Default:1}),e.addProperty("ECLevel",2,rtl.longint,"FECLevel","SetECLevel",{Default:-1}),e.addProperty("Segments",2,rtl.longint,"FSegments","SetSegments",{Default:-1}),e.addProperty("ISBNTextSize",2,rtl.longint,"FISBNTextSize","SetISBNTextSize",{Default:-1}),e.addProperty("ISBNTextXOffset",2,rtl.longint,"FISBNTextXOffset","SetISBNTextXOffset",{Default:-1}),e.addProperty("ISBNTextYOffset",2,rtl.longint,"FISBNTextYOffset","SetISBNTextYOffset",{Default:-1}),e.addProperty("ISMNTextSize",2,rtl.longint,"FISMNTextSize","SetISMNTextSize",{Default:-1}),e.addProperty("ISMNTextXOffset",2,rtl.longint,"FISMNTextXOffset","SetISMNTextXOffset",{Default:-1}),e.addProperty("ISMNTextYOffset",2,rtl.longint,"FISMNTextYOffset","SetISMNTextYOffset",{Default:-1}),e.addProperty("ISSNTextSize",2,rtl.longint,"FISSNTextSize","SetISSNTextSize",{Default:-1}),e.addProperty("ISSNTextXOffset",2,rtl.longint,"FISSNTextXOffset","SetISSNTextXOffset",{Default:-1}),e.addProperty("ISSNTextYOffset",2,rtl.longint,"FISSNTextYOffset","SetISSNTextYOffset",{Default:-1}),e.addProperty("AusPosCustInfoEnc",2,t.$rtti.TTMSFNCWXBarcodeAusPostCustInfoEnc,"FAusPosCustInfoEnc","SetAusPosCustInfoEnc",{Default:t.TTMSFNCWXBarcodeAusPostCustInfoEnc.cieCharacter}),e.addProperty("MailmarkType",2,t.$rtti.TTMSFNCWXBarcodeMailmarkType,"FMailmarkType","SetMailmarkType",{Default:t.TTMSFNCWXBarcodeMailmarkType.mt7}),e.addProperty("PZNVariant",2,t.$rtti.TTMSFNCWXBarcodePZNVariant,"FPZNVariant","SetPZNVariant",{Default:t.TTMSFNCWXBarcodePZNVariant.pvPZN7}),e.addProperty("BC412IncludeStartStop",2,rtl.boolean,"FBC412IncludeStartStop","SetBC412IncludeStartStop",{Default:!1}),e.addProperty("BC412Semi",2,rtl.boolean,"FBC412Semi","SetBC412Semi",{Default:!1}),e.addProperty("Code39HideStars",2,rtl.boolean,"FCode39HideStars","SetCode39HideStars",{Default:!1}),e.addProperty("MSICheckType",2,t.$rtti.TTMSFNCWXBarcodeMSICheckType,"FMSICheckType","SetMSICheckType",{Default:t.TTMSFNCWXBarcodeMSICheckType.mctMod10}),e.addProperty("MSIBadMod11",2,rtl.boolean,"FMSIBadMod11","SetMSIBadMod11",{Default:!1}),e.addProperty("ChannelCodeShortFinder",2,rtl.boolean,"FChannelCodeShortFinder","SetChannelCodeShortFinder",{Default:!1}),e.addProperty("PlesseyUndricetional",2,rtl.boolean,"FPlesseyUndirectional","SetPlesseyUndirectional",{Default:!1}),e.addProperty("CodabarAltStartStop",2,rtl.boolean,"FCodabarAltStartStop","SetCodabarAltStartStop",{Default:!1}),e.addProperty("AztecCodeECAddChars",2,rtl.longint,"FAztecCodeECAddChars","SetAztecCodeECAddChars",{Default:3}),e.addProperty("AztecCodeLayers",2,rtl.longint,"FAztecCodeLayers","SetAztecCodeLayers",{Default:-1}),e.addProperty("AztecCodeReaderInit",2,rtl.boolean,"FAztecCodeReaderInit","SetAztecCodeReaderInit",{Default:!1}),e.addProperty("HanXinVersion",2,rtl.longint,"FHanXinVersion","SetHanXinVersion",{Default:1}),e.addProperty("PosiCodeVersion",2,t.$rtti.TTMSFNCWXBarcodePosiCodeVersion,"FPosiCodeVersion","SetPosiCodeVersion",{Default:t.TTMSFNCWXBarcodePosiCodeVersion.pcvA}),e.addProperty("CodeOneVersion",2,t.$rtti.TTMSFNCWXBarcodeCodeOneVersion,"FCodeOneVersion","SetCodeOneVersion",{Default:t.TTMSFNCWXBarcodeCodeOneVersion.covA}),e.addProperty("PDF417RowMult",2,rtl.longint,"FPDF417RowMult","SetPDF417RowMult",{Default:3})})),this.TTMSFNCWXBarcodeType={0:"bciAusPost",bciAusPost:0,1:"bciAztecCode",bciAztecCode:1,2:"bciAztecCodeCompact",bciAztecCodeCompact:2,3:"bciAztecRunes",bciAztecRunes:3,4:"bciBC412",bciBC412:4,5:"bciChannelCode",bciChannelCode:5,6:"bciCodablockF",bciCodablockF:6,7:"bciCode11",bciCode11:7,8:"bciCode128",bciCode128:8,9:"bciCode16K",bciCode16K:9,10:"bciCode2of5",bciCode2of5:10,11:"bciCode32",bciCode32:11,12:"bciCode39",bciCode39:12,13:"bciCode39Ext",bciCode39Ext:13,14:"bciCode49",bciCode49:14,15:"bciCode93",bciCode93:15,16:"bciCode93Ext",bciCode93Ext:16,17:"bciCodeOne",bciCodeOne:17,18:"bciCOOP2of5",bciCOOP2of5:18,19:"bciDaft",bciDaft:19,20:"bciGS1DataBarExp",bciGS1DataBarExp:20,21:"bciGS1DataBarExpComp",bciGS1DataBarExpComp:21,22:"bciGS1DataBarExpStack",bciGS1DataBarExpStack:22,23:"bciGS1DataBarExpStackComp",bciGS1DataBarExpStackComp:23,24:"bciGS1DataBarLimited",bciGS1DataBarLimited:24,25:"bciGS1DataBarLimitedComp",bciGS1DataBarLimitedComp:25,26:"bciGS1DataBarOmni",bciGS1DataBarOmni:26,27:"bciGS1DataBarOmniComp",bciGS1DataBarOmniComp:27,28:"bciGS1DataBarStacked",bciGS1DataBarStacked:28,29:"bciGS1DataBarStackComp",bciGS1DataBarStackComp:29,30:"bciGS1DataBarStackOmni",bciGS1DataBarStackOmni:30,31:"bciGS1DataBarStackOmniComp",bciGS1DataBarStackOmniComp:31,32:"bciGS1DataBarTruncated",bciGS1DataBarTruncated:32,33:"bciGS1DataBarTruncComp",bciGS1DataBarTruncComp:33,34:"bciDatalogic2of5",bciDatalogic2of5:34,35:"bciDataMatrix",bciDataMatrix:35,36:"bciDataMatrixRect",bciDataMatrixRect:36,37:"bciDataMatrixRectExt",bciDataMatrixRectExt:37,38:"bciDotCode",bciDotCode:38,39:"bciEAN13",bciEAN13:39,40:"bciEAN13Comp",bciEAN13Comp:40,41:"bciEAN14",bciEAN14:41,42:"bciEAN2",bciEAN2:42,43:"bciEAN5",bciEAN5:43,44:"bciEAN8",bciEAN8:44,45:"bciEAN8Copm",bciEAN8Copm:45,46:"bciFlattermarken",bciFlattermarken:46,47:"bciGS1128",bciGS1128:47,48:"bciGS1128Comp",bciGS1128Comp:48,49:"bciGS1Comp2DComp",bciGS1Comp2DComp:49,50:"bciGS1DataMatrix",bciGS1DataMatrix:50,51:"bciGS1DataMatrixRect",bciGS1DataMatrixRect:51,52:"bciGS1DotCode",bciGS1DotCode:52,53:"bciGS1NACoupon",bciGS1NACoupon:53,54:"bciHanXin",bciHanXin:54,55:"bciHIBCAztecCode",bciHIBCAztecCode:55,56:"bciHIBCCodablockF",bciHIBCCodablockF:56,57:"bciHIBCCode128",bciHIBCCode128:57,58:"bciHIBCCode39",bciHIBCCode39:58,59:"bciHIBCDataMatrix",bciHIBCDataMatrix:59,60:"bciHIBCDataMatrixRect",bciHIBCDataMatrixRect:60,61:"bciHIBCMicroPDF417",bciHIBCMicroPDF417:61,62:"bciHIBCPDF417",bciHIBCPDF417:62,63:"bciIATA2of5",bciIATA2of5:63,64:"bciIdentcode",bciIdentcode:64,65:"bciIndustrial2of5",bciIndustrial2of5:65,66:"bciInterleaved2of5",bciInterleaved2of5:66,67:"bciISBN",bciISBN:67,68:"bciISMN",bciISMN:68,69:"bciISSN",bciISSN:69,70:"bciITF14",bciITF14:70,71:"bciJapanPost",bciJapanPost:71,72:"bciKix",bciKix:72,73:"bciLeitcode",bciLeitcode:73,74:"bciMailmark",bciMailmark:74,75:"bciMatrix2of5",bciMatrix2of5:75,76:"bciMaxiCode",bciMaxiCode:76,77:"bciMicroPDF417",bciMicroPDF417:77,78:"bciMSI",bciMSI:78,79:"bciOneCode",bciOneCode:79,80:"bciPDF417",bciPDF417:80,81:"bciPDF417Comp",bciPDF417Comp:81,82:"bciPharmacode",bciPharmacode:82,83:"bciPharmacode2",bciPharmacode2:83,84:"bciPlanet",bciPlanet:84,85:"bciPlessey",bciPlessey:85,86:"bciPosiCode",bciPosiCode:86,87:"bciPostnet",bciPostnet:87,88:"bciPZN",bciPZN:88,89:"bciCodabar",bciCodabar:89,90:"bciCustom1DSymb",bciCustom1DSymb:90,91:"bciRoyalMail",bciRoyalMail:91,92:"bciSSCC18",bciSSCC18:92,93:"bciSymbol",bciSymbol:93,94:"bciTelepen",bciTelepen:94,95:"bciTelepenNumeric",bciTelepenNumeric:95,96:"bciUltracode",bciUltracode:96,97:"bciUPCA",bciUPCA:97,98:"bciUPCAComp",bciUPCAComp:98,99:"bciUPCE",bciUPCE:99,100:"bciUPCEComp",bciUPCEComp:100},this.$rtti.$Enum("TTMSFNCWXBarcodeType",{minvalue:0,maxvalue:100,ordtype:1,enumtype:this.TTMSFNCWXBarcodeType}),this.TTMSFNCWXBarcodeTextAlign={0:"taOffLeft",taOffLeft:0,1:"taLeft",taLeft:1,2:"taCenter",taCenter:2,3:"taRight",taRight:3,4:"taOffRight",taOffRight:4,5:"taJustify",taJustify:5},this.$rtti.$Enum("TTMSFNCWXBarcodeTextAlign",{minvalue:0,maxvalue:5,ordtype:1,enumtype:this.TTMSFNCWXBarcodeTextAlign}),this.$rtti.$MethodVar("TTMSFNCWXBarcodeGetEvent",{procsig:rtl.newTIProcSig([["Sender",pas.System.$rtti.TObject],["ABitmap",pas["WEBLib.TMSFNCTypes"].$rtti.TTMSFNCBitmap]]),methodkind:0}),rtl.createClass(this,"TTMSFNCWXCustomBarcode",pas["WEBLib.TMSFNCCustomWEBControl"].TTMSFNCCustomWEBControl,(function(){this.$init=function(){pas["WEBLib.TMSFNCCustomWEBControl"].TTMSFNCCustomWEBControl.$init.call(this),this.FBarcodeInitialized=!1,this.FComponentID="",this.FText="",this.FOnGetBarcode=null,this.FBarcodeType=0,this.FScale=0,this.FIncludeText=!1,this.FTextSize=0,this.FVerticalTextAlign=0,this.FHorizontalTextAlign=0,this.FAltText="",this.FIncludeCheckInText=!1,this.FIncludeCheck=!1,this.FVerticalInkspread=0,this.FHorizontalInkspread=0,this.FInkspread=0,this.FDotty=!1,this.FBarcodeBorder=null,this.FDefaultSize=!1,this.FSettings=null,this.FLibraryLocation=0},this.$final=function(){this.FOnGetBarcode=void 0,this.FBarcodeBorder=void 0,this.FSettings=void 0,pas["WEBLib.TMSFNCCustomWEBControl"].TTMSFNCCustomWEBControl.$final.call(this)},this.IsTextStored=function(){return""!==this.FText},this.SetText=function(t){var e="";if(this.FText!==t){if(e=this.GetFormattedBarcodeText(t),!(0 in this.FComponentState)&&!this.ValidateBarcodeText(e))throw this.ClearBarcode(),pas.SysUtils.Exception.$create("Create$1",['The selected barcode does not accept the "'+t+'" format']);this.FText=e,0 in this.FComponentState||this.Change()}},this.SetBarcodeType=function(t){var e="";if(this.FBarcodeType!==t){if(this.FBarcodeType=t,0 in this.FComponentState)return;if((e=this.GetFormattedBarcodeText(this.FText))!==this.FText&&(this.FText=e),!this.ValidateBarcodeText(this.FText))throw this.FText="",this.ClearBarcode(),pas.SysUtils.Exception.$create("Create$1",['The selected barcode does not accept the "'+e+'" format']);this.Change()}},this.SetScale=function(t){this.FScale!==t&&(this.FScale=t,this.Change())},this.SetIncludeText=function(t){this.FIncludeText!==t&&(this.FIncludeText=t,this.Change())},this.SetTextSize=function(t){this.FTextSize!==t&&(this.FTextSize=t,this.Change())},this.SetHorizontalTextAlign=function(t){this.FHorizontalTextAlign!==t&&(this.FHorizontalTextAlign=t,this.Change())},this.SetVerticalTextAlign=function(t){this.FVerticalTextAlign!==t&&(this.FVerticalTextAlign=t,this.Change())},this.IsAltTextStored=function(){return""!==this.FAltText},this.SetAltText=function(t){this.FAltText=t},this.SetIncludeCheck=function(t){this.FIncludeCheck!==t&&(this.FIncludeCheck=t,this.Change())},this.SetIncludeCheckInText=function(t){this.FIncludeCheckInText!==t&&(this.FIncludeCheckInText=t,this.Change())},this.IsHorizontalInkspreadStored=function(){return 0!==this.FHorizontalInkspread},this.IsInkspreadStored=function(){return 0!==this.FInkspread},this.IsVerticalInkspreadStored=function(){return 0!==this.FVerticalInkspread},this.SetHorizontalInkspread=function(t){this.FHorizontalInkspread!==t&&(this.FHorizontalInkspread=t,this.Change())},this.SetInkspread=function(t){this.FInkspread!==t&&(this.FInkspread=t,this.Change())},this.SetVerticalInkspread=function(t){this.FVerticalInkspread!==t&&(this.FVerticalInkspread=t,this.Change())},this.SetDotty=function(t){this.FDotty!==t&&(this.FDotty=t,this.Change())},this.SetBarcodeBorder=function(t){this.FBarcodeBorder.Assign(t)},this.SetSettings=function(t){this.FSettings.Assign(t)},this.ClearBarcode=function(){this.ExecuteJavaScript(pas.StrUtils.ReplaceStr(pas["WEBLib.TMSFNCWXBarcode.Consts"].CLEARBARCODEJS,pas["WEBLib.TMSFNCWXBarcode.Consts"].CONTROL_ID,this.GetControlID()),null,!1)},this.GetFormattedBarcodeText=function(t){var e="";e=t;var i=this.FBarcodeType;if(67===i){if(pas.System.Pos("-",t)>0)return e;pas.System.Insert("-",{get:function(){return e},set:function(t){e=t}},4),pas.System.Insert("-",{get:function(){return e},set:function(t){e=t}},7),pas.System.Insert("-",{get:function(){return e},set:function(t){e=t}},13),13===t.length&&pas.System.Insert("-",{get:function(){return e},set:function(t){e=t}},16)}else if(68===i){if(pas.System.Pos("-",t)>0)return e;0===pas.System.Pos("M",t)?(pas.System.Insert("-",{get:function(){return e},set:function(t){e=t}},4),pas.System.Insert("-",{get:function(){return e},set:function(t){e=t}},6),pas.System.Insert("-",{get:function(){return e},set:function(t){e=t}},11),13===t.length&&pas.System.Insert("-",{get:function(){return e},set:function(t){e=t}},16)):(pas.System.Insert("-",{get:function(){return e},set:function(t){e=t}},2),pas.System.Insert("-",{get:function(){return e},set:function(t){e=t}},6),10===t.length&&pas.System.Insert("-",{get:function(){return e},set:function(t){e=t}},12))}else if(69===i){if(pas.System.Pos("-",t)>0)return e;0===pas.System.Pos("-",t)&&pas.System.Insert("-",{get:function(){return e},set:function(t){e=t}},5)}return e},this.IsNumberBetweenRange=function(t,e,i){var s=0;return pas.SysUtils.TryStrToInt(t,{get:function(){return s},set:function(t){s=t}})&&s>=e&&s<=i},this.IsNumberWithLength=function(t,e,i){var s=0;return pas.SysUtils.TryStrToInt(t,{get:function(){return s},set:function(t){s=t}})&&t.length>=e&&t.length<=i},this.IsAscii=function(t,e){var i=!1,s="",n=0;i=!1,n=e?256:127;for(var r=t,o=0,a=r.length-1;o<=a;o++)if(s=r.charAt(o),pas.Math.InRange(s.charCodeAt(),32,n))return i=!0;return i},this.MatchesRegex=function(t,e){var i=pas["WEBLib.RegularExpressions"].TRegEx.$new();return i.$assign(pas["WEBLib.RegularExpressions"].TRegEx.$new().Create(e)),i.IsMatch(t)},this.ValidateBarcodeText=function(t){var e=!1,i=0;if(e=!1,""===t)return e=!0;var s=this.FBarcodeType;return 0===s?e=0===this.FSettings.FAusPosCustInfoEnc?this.MatchesRegex(t,"^(00|11|59|62)[0-9]{8}[0-9]*$"):this.MatchesRegex(t,"^(00|11|59|62)[0-9]{8}[0-9A-Za-z #]*$"):1===s||2===s||6===s||8===s||9===s||17===s||35===s||36===s||37===s||38===s||54===s||76===s||77===s||80===s||81===s||86===s||96===s?e=this.IsAscii(t,!0):3===s?e=this.IsNumberBetweenRange(t,0,255):4===s?e=this.MatchesRegex(t,"^[0-9A-NP-Z]+$"):5===s?e=this.IsNumberBetweenRange(t,0,7742862):7===s?e=this.MatchesRegex(t,"^[0-9\\-]+$"):10===s||18===s||34===s||46===s||63===s||65===s||66===s||75===s||78===s?e=this.MatchesRegex(t,"^[0-9]+$"):11===s?e=this.MatchesRegex(t,"^[0-9]{8,9}$"):12===s||15===s||55===s||56===s||57===s||58===s||59===s||60===s||61===s||62===s?e=this.MatchesRegex(t,"^[0-9A-Z\\+%\\$\\-\\/\\. ]+$"):13===s||14===s||16===s||94===s?e=this.IsAscii(t,!1):19===s?e=this.MatchesRegex(t,"^[DAFT]+$"):20===s||22===s||47===s||50===s||51===s||52===s||53===s?e=this.MatchesRegex(t,"^(\\([0-9]{2,4}\\)[0-9A-Za-z!\"%&'\\(\\)\\*\\+,\\-\\.\\/:;<=>\\?_#]+)+$"):21===s||23===s||48===s||49===s?e=this.MatchesRegex(t,"^(\\([0-9]{2,4}\\)[0-9A-Za-z!\"%&'\\(\\)\\*\\+,\\-\\.\\/:;<=>\\?_#]+)+\\|(\\([0-9]{2,4}\\)[0-9A-Za-z!\"%&'\\(\\)\\*\\+,\\-\\.\\/:;<=>\\?_#]+)+$"):24===s?e=this.MatchesRegex(t,"^\\(01\\)(0|1)[0-9]{12,13}$"):25===s?e=this.MatchesRegex(t,"^\\(01\\)(0|1)[0-9]{12,13}\\|(\\([0-9]{2,4}\\)[0-9A-Za-z!\"%&'\\(\\)\\*\\+,\\-\\.\\/:;<=>\\?_#]+)+$"):26===s||28===s||30===s||32===s||41===s?e=this.MatchesRegex(t,"^\\(01\\)[0-9]{13,14}$"):27===s||29===s||31===s||33===s?e=this.MatchesRegex(t,"^\\(01\\)[0-9]{13,14}\\|(\\([0-9]{2,4}\\)[0-9A-Za-z!\"%&'\\(\\)\\*\\+,\\-\\.\\/:;<=>\\?_#]+)+$"):39===s?e=this.MatchesRegex(t,"^([0-9]{12,13})(?: ([0-9]{2}|[0-9]{5}))?$"):40===s?e=this.MatchesRegex(t,"^([0-9]{12,13})(?: ([0-9]{2}|[0-9]{5}))?\\|(\\([0-9]{2,4}\\)[0-9A-Za-z!\"%&'\\(\\)\\*\\+,\\-\\.\\/:;<=>\\?_#]+)+$"):42===s?e=pas.SysUtils.TryStrToInt(t,{get:function(){return i},set:function(t){i=t}})&&2===t.length:43===s?e=pas.SysUtils.TryStrToInt(t,{get:function(){return i},set:function(t){i=t}})&&5===t.length:44===s?e=this.MatchesRegex(t,"^([0-9]{7,8})(?: ([0-9]{2}|[0-9]{5}))?$"):45===s?e=this.MatchesRegex(t,"^([0-9]{7,8})(?: ([0-9]{2}|[0-9]{5}))?\\|(\\([0-9]{2,4}\\)[0-9A-Za-z!\"%&'\\(\\)\\*\\+,\\-\\.\\/:;<=>\\?_#]+)+$"):64===s?e=this.IsNumberWithLength(t,11,12):67===s?e=this.MatchesRegex(t,"^(?=(?:\\D*\\d){9,10}(?:(?:\\D*\\d){3})?$)[\\d-]+(?: ([0-9]{2}|[0-9]{5}))?$"):68===s?e=this.MatchesRegex(t,"^(?:979-?0-?|M-?)(?:\\d{9}|(?=[\\d-]{11}$)\\d+-\\d+-\\d)(?: ([0-9]{2}|[0-9]{5}))?$"):69===s?e=this.MatchesRegex(t,"^[0-9]{4}-[0-9]{3}[0-9xX]? [0-9]{2}(?: ([0-9]{2}|[0-9]{5}))?$"):70===s?e=this.IsNumberWithLength(t,13,14):71===s?e=this.MatchesRegex(t,"^[0-9A-Z\\-]+$"):72===s?e=this.MatchesRegex(t,"^[0-9A-Z]+$"):73===s?e=this.IsNumberWithLength(t,13,14):74===s?e=this.MatchesRegex(t,"^JGB (0|1|2|A|B|C)[0-9A-Z][0-9A-Z][0-9]{7}[0-9]{8}[0-9A-Z ]{9}(0|1)[0-9A-Z ]{7}[ ]{6}[ -~]*$"):79===s?e=this.MatchesRegex(t,"^[0-9]{31}$"):82===s?e=this.IsNumberBetweenRange(t,3,131070):83===s?e=this.IsNumberBetweenRange(t,4,64570080):84===s?e=(11===t.length||13===t.length)&&pas.SysUtils.TryStrToInt(t,{get:function(){return i},set:function(t){i=t}}):85===s?e=this.MatchesRegex(t,"^[0-9A-F]+$"):87===s?e=(11===t.length||9===t.length||5===t.length)&&pas.SysUtils.TryStrToInt(t,{get:function(){return i},set:function(t){i=t}}):88===s?e=0===this.FSettings.FPZNVariant?this.MatchesRegex(t,"^[0-9]{7}$"):this.MatchesRegex(t,"^[0-9]{8}$"):89===s?e=this.FSettings.FCodabarAltStartStop?this.MatchesRegex(t,"^[TNE\\*][0-9\\+$:\\-/.]*[TNE\\*]$"):this.MatchesRegex(t,"^[A-D][0-9\\+$:\\-/.]*[A-D]$"):90===s?e=this.MatchesRegex(t,"^[1-9]+$"):91===s?e=this.MatchesRegex(t,"^[0-9A-Z]+$"):92===s?e=this.MatchesRegex(t,"^\\(00\\)[0-9]{17,18}$"):93===s?e=this.MatchesRegex(t,"^(fima|fimb|fimc|fimd)$"):95===s?e=this.FSettings.FParse?this.MatchesRegex(t,"^[0-9X\\^]$"):this.MatchesRegex(t,"^[0-9X]$"):97===s?e=this.MatchesRegex(t,"^[0-9]{11,12}(?: ([0-9]{2}|[0-9]{5}))?$"):98===s?e=this.MatchesRegex(t,"^[0-9]{11,12}(?: ([0-9]{2}|[0-9]{5}))?\\|(\\([0-9]{2,4}\\)[0-9A-Za-z!\"%&'\\(\\)\\*\\+,\\-\\.\\/:;<=>\\?_#]+)+$"):99===s?e=this.MatchesRegex(t,"^[0-9]{7,8}(?: ([0-9]{2}|[0-9]{5}))?$"):100===s&&(e=this.MatchesRegex(t,"^[0-9]{7,8}(?: ([0-9]{2}|[0-9]{5}))?\\|(\\([0-9]{2,4}\\)[0-9A-Za-z!\"%&'\\(\\)\\*\\+,\\-\\.\\/:;<=>\\?_#]+)+$")),e},this.DoControlInitialized=function(){pas["WEBLib.TMSFNCCustomWEBControl"].TTMSFNCCustomWEBControl.DoControlInitialized.call(this),this.FBarcodeInitialized=!0,this.Change()},this.GetCustomFunctions=function(){return pas.SysUtils.StringReplace(pas["WEBLib.TMSFNCWXBarcode.Consts"].GetBarcodeJavascript(this.GetControlID()),pas["WEBLib.TMSFNCWXBarcode.Consts"].DATA_OBJECT,this.GetDefaultEventDataObject(),rtl.createSet(0))},this.GetWaitInitVariables=function(){return'  var e = document.getElementById("'+this.GetID()+'");'+pas["WEBLib.TMSFNCWXBarcode.Consts"].LB+'  var e2 = document.getElementById("'+this.GetControlID()+'");'},this.GetWaitInitCondition=function(){return"!window.bwipjs || !e || !e2","!window.bwipjs || !e || !e2"},this.GetCustomCSS=function(){return"body,html {"+pas["WEBLib.TMSFNCWXBarcode.Consts"].LB+"  margin: 0;"+pas["WEBLib.TMSFNCWXBarcode.Consts"].LB+"  padding: 0;"+pas["WEBLib.TMSFNCWXBarcode.Consts"].LB+"}"+pas["WEBLib.TMSFNCWXBarcode.Consts"].LB+pas["WEBLib.TMSFNCWXBarcode.Consts"].LB+"#"+this.GetControlID()+" {"+pas["WEBLib.TMSFNCWXBarcode.Consts"].LB+"  position: absolute;"+pas["WEBLib.TMSFNCWXBarcode.Consts"].LB+"  top: 50%;"+pas["WEBLib.TMSFNCWXBarcode.Consts"].LB+"  left: 50%;"+pas["WEBLib.TMSFNCWXBarcode.Consts"].LB+"  transform: translate(-50%, -50%);"+pas["WEBLib.TMSFNCWXBarcode.Consts"].LB+"}"},this.GetBody=function(){return'<canvas id="'+this.GetControlID()+'"></canvas>'},this.LoadLinks=function(t){pas["WEBLib.TMSFNCCustomWEBControl"].TTMSFNCCustomWEBControl.LoadLinks.apply(this,arguments),t.Add$1(pas["WEBLib.TMSFNCCustomWEBControl"].TTMSFNCCustomWEBControlLink.$create("CreateScript",["https://cdn.jsdelivr.net/npm/bwip-js@latest/dist/bwip-js.min.js","","","",!1,!1]))},this.InitializeHTML=function(){pas["WEBLib.TMSFNCCustomWEBControl"].TTMSFNCCustomWEBControl.InitializeHTML.call(this)},this.CallCustomEvent=function(t){if(pas["WEBLib.TMSFNCCustomWEBControl"].TTMSFNCCustomWEBControl.CallCustomEvent.apply(this,arguments),""!==t.FEventName){var e=pas.StrUtils.IndexStr(t.FEventName,[pas["WEBLib.TMSFNCWXBarcode.Consts"].BARCODE_GET,pas["WEBLib.TMSFNCWXBarcode.Consts"].BARCODE_SIZE]);0===e?this.DoHandleGetBarcode(t.FCustomData):1===e&&this.DoHandleGetBarcodeSize(t.FCustomData)}},this.DoHandleGetBarcode=function(t){var e="",i=null;e=t,e=pas.SysUtils.StringReplace(e,'"',"",rtl.createSet(0)),(i=pas["WEBLib.TMSFNCTypes"].TTMSFNCBitmap.$create("Create$3")).SetURL(e),null!=this.FOnGetBarcode&&this.FOnGetBarcode(this,i),i=rtl.freeLoc(i)},this.DoHandleBarcodeChanged=function(t){this.Change()},this.DoHandleGetBarcodeSize=function(t){var e=0,i=0,s=null;s=pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.ParseJSON(t);try{e=pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.GetJSONIntegerValue(s,"Width"),i=pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.GetJSONIntegerValue(s,"Height"),this.ExecuteJavaScript(this.GetBarcodeExecuteJS(!1,!1,e,i),null,!1)}finally{s=rtl.freeLoc(s)}},this.GetBarcodeExecuteJS=function(e,i,s,n){var r,o,a,l,h,F,p,c,u,d,S=0,C=0,T=0,m=0,g="",f="",b="",y="",L="";if(S=0,C=0,m=0,this.FBarcodeType in t.TwoDimensionalBarcodes)0!==this.FScale&&0!==n&&0!==this.GetHeight()&&((T=s/n)>=this.GetWidth()/this.GetHeight()?(this.FIncludeText&&0!==(n-=this.FTextSize)&&(T=s/n),C=25.4*this.GetWidth()/72/this.FScale,0!==T&&(S=C/T)):(this.FIncludeText?(S=this.GetHeight()-this.FScale*this.FTextSize,0!==(n-=this.FTextSize)&&(T=s/n)):S=this.GetHeight()-1,C=(S=25.4*S/72/this.FScale)*T));else{var M=this.FBarcodeType;67===M?m=this.FSettings.FISBNTextSize:68===M?m=this.FSettings.FISMNTextSize:69===M&&(m=this.FSettings.FISSNTextSize),S=25.4*(S=this.FIncludeText?this.GetHeight()-m-1-this.FScale*this.FTextSize:this.GetHeight()-1)/72/this.FScale,i=!1}y=this.GetSettingsAsString(),p=pas.SysUtils.BoolToStr$1(this.FDefaultSize,"true","false"),F=pas.SysUtils.BoolToStr$1(i,"true","false"),d=pas.SysUtils.BoolToStr$1(e,"true","false"),r=pas.SysUtils.BoolToStr$1(this.FIncludeText,"true","false"),o=pas.SysUtils.BoolToStr$1(this.FIncludeCheck,"true","false"),a=pas.SysUtils.BoolToStr$1(this.FIncludeCheckInText,"true","false"),l=pas.SysUtils.BoolToStr$1(this.FDotty,"true","false"),h=pas.SysUtils.BoolToStr$1(this.FBarcodeBorder.FVisible,"true","false"),b=pas["WEBLib.TMSFNCGraphics"].TTMSFNCGraphics.ColorToHTML(this.FBarcodeBorder.FColor),pas.System.Delete({get:function(){return b},set:function(t){b=t}},1,1);var E=this.FHorizontalTextAlign;0===E?g='"offleft"':1===E?g='"left"':3===E?g='"right"':4===E?g='"offright"':5===E&&(g='"justify"'),2!==this.FHorizontalTextAlign&&(y=y+", textxalign: "+g);var P=this.FVerticalTextAlign;return 0===P?f='"center"':1===P&&(f='"above"'),2!==this.FVerticalTextAlign&&(y=y+", textyalign: "+f),4 in this.FComponentState&&null==pas["WEBLib.Forms"].VSIDE&&(S-=rtl.trunc(pas["WEBLib.TMSFNCWXCommon"].GetDesignHeaderTextHeight(this.ScalePaintValue(10))/2)),c='"'+this.GetID()+'"',u='"'+pas["WEBLib.TMSFNCGraphics"].TTMSFNCGraphics.ColorToHTML(this.FColor)+'"',L=pas.SysUtils.StringReplace(this.FText,"\r\n","\\n",rtl.createSet(0)),L=pas.SysUtils.StringReplace(L,"\r","\\n",rtl.createSet(0)),L=pas.SysUtils.StringReplace(L,"\n","\\n",rtl.createSet(0)),pas.SysUtils.Format(pas.StrUtils.ReplaceStr(pas["WEBLib.TMSFNCWXBarcode.Consts"].CREATEBARCODEJS,pas["WEBLib.TMSFNCWXBarcode.Consts"].CONTROL_ID,this.GetControlID()),pas.System.VarRecs(18,c,18,u,18,p,18,d,18,F,18,this.GetBarcodeTypeAsString(),18,L,18,r,3,S,3,C,0,this.FScale,0,this.FTextSize,18,this.FAltText,18,o,18,a,3,this.FInkspread,3,this.FHorizontalInkspread,3,this.FVerticalInkspread,18,l,18,h,3,this.FBarcodeBorder.FWidth,0,this.FBarcodeBorder.FGapLeft,0,this.FBarcodeBorder.FGapRight,0,this.FBarcodeBorder.FGapTop,0,this.FBarcodeBorder.FGapBottom,18,b,18,y))},this.GetBarcodeTypeAsString=function(){var t="",e=this.FBarcodeType;return 0===e?t="auspost":1===e?t="azteccode":2===e?t="azteccodecompact":3===e?t="aztecrune":4===e?t="bc412":5===e?t="channelcode":6===e?t="codablockf":7===e?t="code11":8===e?t="code128":9===e?t="code16k":10===e?t="code2of5":11===e?t="code32":12===e?t="code39":13===e?t="code39ext":14===e?t="code49":15===e?t="code93":16===e?t="code93ext":17===e?t="codeone":18===e?t="coop2of5":19===e?t="daft":20===e?t="databarexpanded":21===e?t="databarexpandedcomposite":22===e?t="databarexpandedstacked":23===e?t="databarexpandedstackedcomposite":24===e?t="databarlimited":25===e?t="databarlimitedcomposite":26===e?t="databaromni":27===e?t="databaromnicomposite":28===e?t="databarstacked":29===e?t="databarstackedcomposite":30===e?t="databarstackedomni":31===e?t="databarstackedomnicomposite":32===e?t="databartruncated":33===e?t="databartruncatedcomposite":34===e?t="datalogic2of5":35===e?t="datamatrix":36===e?t="datamatrixrectangular":37===e?t="datamatrixrectangularextension":38===e?t="dotcode":39===e?t="ean13":40===e?t="ean13composite":41===e?t="ean14":42===e?t="ean2":43===e?t="ean5":44===e?t="ean8":45===e?t="ean8composite":46===e?t="flattermarken":47===e?t="gs1-128":48===e?t="gs1-128composite":49===e?t="gs1-cc":50===e?t="gs1datamatrix":51===e?t="gs1datamatrixrectangular":52===e?t="gs1dotcode":53===e?t="gs1northamericancoupon":54===e?t="hanxin":55===e?t="hibcazteccode":56===e?t="hibccodablockf":57===e?t="hibccode128":58===e?t="hibccode39":59===e?t="hibcdatamatrix":60===e?t="hibcdatamatrixrectangular":61===e?t="hibcmicropdf417":62===e?t="hibcpdf417":63===e?t="iata2of5":64===e?t="identcode":65===e?t="industrial2of5":66===e?t="interleaved2of5":67===e?t="isbn":68===e?t="ismn":69===e?t="issn":70===e?t="itf14":71===e?t="japanpost":72===e?t="kix":73===e?t="leitcode":74===e?t="mailmark":75===e?t="matrix2of5":76===e?t="maxicode":77===e?t="micropdf417":78===e?t="msi":79===e?t="onecode":80===e?t="pdf417":81===e?t="pdf417compact":82===e?t="pharmacode":83===e?t="pharmacode2":84===e?t="planet":85===e?t="plessey":86===e?t="posicode":87===e?t="postnet":88===e?t="pzn":89===e?t="codabar":90===e?t="raw":91===e?t="royalmail":92===e?t="sscc18":93===e?t="symbol":94===e?t="telepen":95===e?t="telepennumeric":96===e?t="ultracode":97===e?t="upca":98===e?t="upcacomposite":99===e?t="upce":100===e&&(t="upcecomposite"),t},this.GetSettingsAsString=function(){var t="";t="";var e=this.FBarcodeType;if(0===e){var i=this.FSettings.FAusPosCustInfoEnc;0===i?t=', custinfoenc: "numeric"':1===i&&(t=', custinfoenc: "character"')}else if(1===e||2===e)this.FSettings.FParse&&(t+=", parse: true"),-1!==this.FSettings.FECLevel&&(t=t+", eclevel: "+pas.SysUtils.IntToStr(this.FSettings.FECLevel)),-1!==this.FSettings.FAztecCodeLayers&&(t=t+", layers: "+pas.SysUtils.IntToStr(this.FSettings.FAztecCodeLayers)),this.FSettings.FAztecCodeReaderInit&&(t+=", readerinit: true"),this.FSettings.FRaw&&(t+=", raw: true"),t=t+", ecaddchars: "+pas.SysUtils.IntToStr(this.FSettings.FAztecCodeECAddChars);else if(4===e)this.FSettings.FBC412IncludeStartStop&&(t+=", includestartstop: true"),this.FSettings.FBC412Semi&&(t+=", semi: true");else if(5===e)this.FSettings.FChannelCodeShortFinder&&(t+=", shortfinder: true");else if(6===e)this.FSettings.FParse&&(t+=", parse: true"),-1!==this.FSettings.FColumns&&(t=t+", columns: "+pas.SysUtils.IntToStr(this.FSettings.FColumns)),-1!==this.FSettings.FRows&&(t=t+", rows: "+pas.SysUtils.IntToStr(this.FSettings.FRows)),this.FSettings.FRaw&&(t+=", raw: true"),t=t+", rowheight: "+pas.SysUtils.IntToStr(this.FSettings.FRowHeight)+", sepheight: "+pas.SysUtils.IntToStr(this.FSettings.FSepHeight);else if(8===e)this.FSettings.FParse&&(t+=", parse: true"),this.FSettings.FRaw&&(t+=", raw: true");else if(9===e)this.FSettings.FParse&&(t+=", parse: true"),-1!==this.FSettings.FMode&&(t=t+", mode: "+pas.SysUtils.IntToStr(this.FSettings.FMode)),-1!==this.FSettings.FRows&&(t=t+", rows: "+pas.SysUtils.IntToStr(this.FSettings.FRows)),this.FSettings.FRaw&&(t+=", raw: true"),t=t+", rowheight: "+pas.SysUtils.IntToStr(this.FSettings.FRowHeight)+", sepheight: "+pas.SysUtils.IntToStr(this.FSettings.FSepHeight);else if(12===e)this.FSettings.FCode39HideStars&&(t=", hidestars: true");else if(13===e)this.FSettings.FParse&&(t=", parse: true"),this.FSettings.FCode39HideStars&&(t+=", hidestars: true");else if(14===e)this.FSettings.FParse&&(t=", parse: true"),-1!==this.FSettings.FMode&&(t=t+", mode: "+pas.SysUtils.IntToStr(this.FSettings.FMode)),-1!==this.FSettings.FRows&&(t=t+", rows: "+pas.SysUtils.IntToStr(this.FSettings.FRows)),t=t+", rowheight: "+pas.SysUtils.IntToStr(this.FSettings.FRowHeight)+", sepheight: "+pas.SysUtils.IntToStr(this.FSettings.FSepHeight);else if(16===e||94===e||95===e)this.FSettings.FParse&&(t=", parse: true");else if(17===e){this.FSettings.FParse&&(t=", parse: true");var s=this.FSettings.FCodeOneVersion;0===s?t+=', version: "A"':1===s?t+=', version: "B"':2===s?t+=', version: "C"':3===s?t+=', version: "D"':4===s?t+=', version: "E"':5===s?t+=', version: "F"':6===s?t+=', version: "G"':7===s?t+=', version: "H"':8===s?t+=', version: "T-16"':9===s?t+=', version: "T-32"':10===s?t+=', version: "T-48"':11===s?t+=', version: "S-10"':12===s?t+=', version: "S-20"':13===s&&(t+=', version: "S-30"')}else if(22===e||53===e)-1!==this.FSettings.FSegments&&(t=", segments: "+pas.SysUtils.IntToStr(this.FSettings.FSegments));else if(35===e||36===e||37===e)this.FSettings.FParse&&(t=", parse: true"),-1!==this.FSettings.FColumns&&(t=t+", columns: "+pas.SysUtils.IntToStr(this.FSettings.FColumns)),-1!==this.FSettings.FRows&&(t=t+", rows: "+pas.SysUtils.IntToStr(this.FSettings.FRows)),this.FSettings.FRaw&&(t+=", raw: true");else if(38===e)t=", ratio: "+pas["WEBLib.TMSFNCWXCommon"].FloatToJSValue(this.FSettings.FDotCodeRatio,"0.###"),this.FSettings.FParse&&(t+=", parse: true"),-1!==this.FSettings.FColumns&&(t=t+", columns: "+pas.SysUtils.IntToStr(this.FSettings.FColumns)),-1!==this.FSettings.FRows&&(t=t+", rows: "+pas.SysUtils.IntToStr(this.FSettings.FRows));else if(39===e||43===e||44===e)this.FSettings.FGuardWhiteSpace&&(t=", guardwhitespace: true");else if(50===e)-1!==this.FSettings.FColumns&&(t=t+", columns: "+pas.SysUtils.IntToStr(this.FSettings.FColumns)),-1!==this.FSettings.FRows&&(t=t+", rows: "+pas.SysUtils.IntToStr(this.FSettings.FRows));else if(52===e)t=", ratio: "+pas["WEBLib.TMSFNCWXCommon"].FloatToJSValue(this.FSettings.FDotCodeRatio,"0.###"),-1!==this.FSettings.FColumns&&(t=t+", columns: "+pas.SysUtils.IntToStr(this.FSettings.FColumns)),-1!==this.FSettings.FRows&&(t=t+", rows: "+pas.SysUtils.IntToStr(this.FSettings.FRows));else if(54===e){if(t=", version: "+pas.SysUtils.IntToStr(this.FSettings.FHanXinVersion),this.FSettings.FParse&&(t+=", parse: true"),-1!==this.FSettings.FECLevel){var n=this.FSettings.FECLevel;t+=1===n?', eclevel: "L1"':2===n?', eclevel: "L2"':3===n?', eclevel: "L3"':', eclevel: "L4"'}}else if(67===e)this.FSettings.FGuardWhiteSpace&&(t=", guardwhitespace: true"),-1!==this.FSettings.FISBNTextSize&&(t=t+", isbntextsize: "+pas.SysUtils.IntToStr(this.FSettings.FISBNTextSize)),-1!==this.FSettings.FISBNTextXOffset&&(t=t+", isbntextxoffset: "+pas.SysUtils.IntToStr(this.FSettings.FISBNTextXOffset)),-1!==this.FSettings.FISBNTextYOffset&&(t=t+", isbntextyoffset: "+pas.SysUtils.IntToStr(this.FSettings.FISBNTextYOffset));else if(68===e)this.FSettings.FGuardWhiteSpace&&(t=", guardwhitespace: true"),-1!==this.FSettings.FISMNTextSize&&(t=t+", ismntextsize: "+pas.SysUtils.IntToStr(this.FSettings.FISMNTextSize)),-1!==this.FSettings.FISMNTextXOffset&&(t=t+", ismntextxoffset: "+pas.SysUtils.IntToStr(this.FSettings.FISMNTextXOffset)),-1!==this.FSettings.FISMNTextYOffset&&(t=t+", ismntextyoffset: "+pas.SysUtils.IntToStr(this.FSettings.FISMNTextYOffset));else if(69===e)this.FSettings.FGuardWhiteSpace&&(t=", guardwhitespace: true"),-1!==this.FSettings.FISSNTextSize&&(t=t+", issntextsize: "+pas.SysUtils.IntToStr(this.FSettings.FISSNTextSize)),-1!==this.FSettings.FISSNTextXOffset&&(t=t+", issntextxoffset: "+pas.SysUtils.IntToStr(this.FSettings.FISSNTextXOffset)),-1!==this.FSettings.FISSNTextYOffset&&(t=t+", issntextyoffset: "+pas.SysUtils.IntToStr(this.FSettings.FISSNTextYOffset));else if(74===e){var r=this.FSettings.FMailmarkType;0===r?t=", type: 7":1===r?t=", type: 9":2===r&&(t=", type: 29")}else if(76===e)-1!==this.FSettings.FMode&&(t=t+", mode: "+pas.SysUtils.IntToStr(this.FSettings.FMode)),this.FSettings.FParse&&(t+=", parse: true");else if(77===e)t=", rowmult: "+pas.SysUtils.IntToStr(this.FSettings.FPDF417RowMult),this.FSettings.FParse&&(t+=", parse: true"),-1!==this.FSettings.FColumns&&(t=t+", columns: "+pas.SysUtils.IntToStr(this.FSettings.FColumns)),-1!==this.FSettings.FRows&&(t=t+", rows: "+pas.SysUtils.IntToStr(this.FSettings.FRows)),this.FSettings.FRaw&&(t+=", raw: true");else if(78===e){var o=this.FSettings.FMSICheckType;0===o?t=', checktype: "mod10"':1===o?t=', checktype: "mod1010"':2===o?t=', checktype: "mod11"':3===o?t=', checktype: "ncrmod11"':4===o?t=', checktype: "mod1110"':5===o&&(t=', checktype: "ncrmod1110"'),this.FSettings.FMSIBadMod11&&(t+=", badmod11: true")}else if(80===e||81===e)t=", rowmult: "+pas.SysUtils.IntToStr(this.FSettings.FPDF417RowMult),this.FSettings.FParse&&(t+=", parse: true"),-1!==this.FSettings.FColumns&&(t=t+", columns: "+pas.SysUtils.IntToStr(this.FSettings.FColumns)),-1!==this.FSettings.FRows&&(t=t+", rows: "+pas.SysUtils.IntToStr(this.FSettings.FRows)),this.FSettings.FRaw&&(t+=", raw: true"),-1!==this.FSettings.FECLevel&&(t=t+", eclevel: "+pas.SysUtils.IntToStr(this.FSettings.FECLevel));else if(85===e)this.FSettings.FPlesseyUndirectional&&(t=", unidirectional: true");else if(86===e){this.FSettings.FParse&&(t+=", parse: true");var a=this.FSettings.FPosiCodeVersion;0===a?t+=', version: "a"':1===a?t+=', version: "b"':2===a?t+=', version: "limiteda"':3===a&&(t+=', version: "limitedb"')}else if(88===e)1===this.FSettings.FPZNVariant&&(t=", pzn8: true");else if(89===e)this.FSettings.FCodabarAltStartStop&&(t=", altstartstop: true");else if(96===e&&(this.FSettings.FParse&&(t+=", parse: true"),-1!==this.FSettings.FECLevel)){var l=this.FSettings.FECLevel;t+=0===l?', eclevel: "E0"':1===l?', eclevel: "E1"':2===l?', eclevel: "E2"':3===l?', eclevel: "E3"':4===l?', eclevel: "E4"':', eclevel: "E5"'}return t},this.Change=function(){this.FBarcodeInitialized&&this.ExecuteJavaScript(this.GetBarcodeExecuteJS(!1,!0,0,0),null,!1)},this.FillChanged$1=function(t){this.Change()},this.Create$1=function(e){return this.FBarcodeInitialized=!1,this.FLibraryLocation=1,this.FComponentID="",this.FScale=1,this.FText="123456",this.FBarcodeType=8,this.FIncludeText=!0,this.FVerticalTextAlign=2,this.FHorizontalTextAlign=2,this.FTextSize=10,this.FAltText="",this.FInkspread=0,this.FVerticalInkspread=0,this.FHorizontalInkspread=0,this.FDotty=!1,this.FDefaultSize=!1,this.FBarcodeBorder=t.TTMSFNCWXBarcodeBorder.$create("Create$1"),this.FBarcodeBorder.FOnChanged=rtl.createCallback(this,"DoHandleBarcodeChanged"),this.FSettings=t.TTMSFNCWXBarcodeSettings.$create("Create$1"),this.FSettings.FOnChanged=rtl.createCallback(this,"DoHandleBarcodeChanged"),pas["WEBLib.TMSFNCCustomWEBControl"].TTMSFNCCustomWEBControl.Create$1.apply(this,arguments),this.SetWidth(250),this.SetHeight(150),this.FFill.FOnChanged=rtl.createCallback(this,"FillChanged$1"),this},this.Destroy=function(){rtl.free(this,"FBarcodeBorder"),rtl.free(this,"FSettings"),pas["WEBLib.TMSFNCCustomWEBControl"].TTMSFNCCustomWEBControl.Destroy.call(this)},this.GetBarcode=function(e){var i=null,s="",n="",r=0,o=0,a=null;if(i=null,s=this.GetFormattedBarcodeText(e),!(0 in this.FComponentState)&&!this.ValidateBarcodeText(s))throw this.ClearBarcode(),pas.SysUtils.Exception.$create("Create$1",['The selected barcode does not accept the "'+e+'" format']);if(this.FText=s,s="",this.FBarcodeType in t.TwoDimensionalBarcodes&&(s=this.ExecuteJavaScriptSync(this.GetBarcodeExecuteJS(!0,!0,0,0))),""!==s){a=pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.ParseJSON(s);try{r=pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.GetJSONIntegerValue(a,"Width"),o=pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.GetJSONIntegerValue(a,"Height"),n=this.ExecuteJavaScriptSync(this.GetBarcodeExecuteJS(!1,!1,r,o))}finally{a=rtl.freeLoc(a)}}else n=this.ExecuteJavaScriptSync(this.GetBarcodeExecuteJS(!0,!1,0,0));return""===(n=pas.SysUtils.StringReplace(n,'"',"",rtl.createSet(0)))||(i=pas["WEBLib.TMSFNCTypes"].TTMSFNCBitmap.$create("Create$3")).SetURL(n),i},this.Resize=function(){pas["WEBLib.TMSFNCCustomControl"].TTMSFNCCustomControl.Resize.call(this),this.Change()},rtl.addIntf(this,pas["WEBLib.TMSFNCPersistence"].ITMSFNCPersistence),rtl.addIntf(this,pas.System.IUnknown)})),rtl.createClass(this,"TTMSFNCWXBarcode",this.TTMSFNCWXCustomBarcode,(function(){rtl.addIntf(this,pas["WEBLib.TMSFNCPersistence"].ITMSFNCPersistence),rtl.addIntf(this,pas.System.IUnknown);var e=this.$rtti;e.addProperty("AltText",14,rtl.string,"FAltText","SetAltText",{stored:"IsAltTextStored"}),e.addProperty("BarcodeBorder",2,t.$rtti.TTMSFNCWXBarcodeBorder,"FBarcodeBorder","SetBarcodeBorder"),e.addProperty("BarcodeType",2,t.$rtti.TTMSFNCWXBarcodeType,"FBarcodeType","SetBarcodeType",{Default:t.TTMSFNCWXBarcodeType.bciCode128}),e.addProperty("DefaultSize",0,rtl.boolean,"FDefaultSize","FDefaultSize",{Default:!1}),e.addProperty("Dotty",2,rtl.boolean,"FDotty","SetDotty",{Default:!1}),e.addProperty("IncludeText",2,rtl.boolean,"FIncludeText","SetIncludeText",{Default:!0}),e.addProperty("IncludeCheck",2,rtl.boolean,"FIncludeCheck","SetIncludeCheck",{Default:!1}),e.addProperty("IncludeCheckInText",2,rtl.boolean,"FIncludeCheckInText","SetIncludeCheckInText",{Default:!1}),e.addProperty("LibraryLocation",0,pas["WEBLib.TMSFNCWXCommon"].$rtti.TTMSFNCWXLibraryLocation,"FLibraryLocation","FLibraryLocation",{Default:pas["WEBLib.TMSFNCWXCommon"].TTMSFNCWXLibraryLocation.llOnline}),e.addProperty("Scale",2,rtl.longint,"FScale","SetScale",{Default:1}),e.addProperty("Text",14,rtl.string,"FText","SetText",{stored:"IsTextStored"}),e.addProperty("TextSize",2,rtl.longint,"FTextSize","SetTextSize",{Default:10}),e.addProperty("VerticalTextAlign",2,pas["WEBLib.TMSFNCGraphicsTypes"].$rtti.TTMSFNCGraphicsTextAlign,"FVerticalTextAlign","SetVerticalTextAlign",{Default:pas["WEBLib.TMSFNCGraphicsTypes"].TTMSFNCGraphicsTextAlign.gtaTrailing}),e.addProperty("HorizontalTextAlign",2,t.$rtti.TTMSFNCWXBarcodeTextAlign,"FHorizontalTextAlign","SetHorizontalTextAlign",{Default:t.TTMSFNCWXBarcodeTextAlign.taCenter}),e.addProperty("Inkspread",14,rtl.double,"FInkspread","SetInkspread",{stored:"IsInkspreadStored"}),e.addProperty("VerticalInkspread",14,rtl.double,"FVerticalInkspread","SetVerticalInkspread",{stored:"IsVerticalInkspreadStored"}),e.addProperty("HorizontalInkspread",14,rtl.double,"FHorizontalInkspread","SetHorizontalInkspread",{stored:"IsHorizontalInkspreadStored"}),e.addProperty("Settings",2,t.$rtti.TTMSFNCWXBarcodeSettings,"FSettings","SetSettings"),e.addProperty("OnGetBarcode",0,t.$rtti.TTMSFNCWXBarcodeGetEvent,"FOnGetBarcode","FOnGetBarcode"),e.attr=[pas.Classes.ComponentPlatformsAttribute,"Create$1",[0]]})),this.TwoDimensionalBarcodes=rtl.createSet(50,52,1,2,3,35,36,37,51,38,54,80,81,77,76,74,59,55,56,60,61,62,17,96)}),["WEBLib.TMSFNCUtils","WEBLib.TMSFNCGraphics","StrUtils","SysUtils","Math","WEBLib.RegularExpressions","WEBLib.TMSFNCWXBarcode.Consts"]),rtl.module("WEBLib.TMSFNCPDFRichTextLib.General",["System"],(function(){"use strict";var t=this.$impl;this.RegisterPDFRichTextLibService=function(){pas["WEBLib.TMSFNCPDFCoreLibBase"].TTMSFNCPDFLibPlatformServices.Current().SupportsPlatformService$1(rtl.getIntfGUIDR(pas["WEBLib.TMSFNCPDFRichTextLib"].ITMSFNCPDFRichTextLibService),{p:t,get:function(){return this.p.PDFRichTextLibService},set:function(t){rtl.setIntfP(this.p,"PDFRichTextLibService",t)}})||(rtl.setIntfP(t,"PDFRichTextLibService",rtl.queryIntfT(t.TTMSFNCGeneralPDFRichTextLibService.$create("Create$1"),pas["WEBLib.TMSFNCPDFRichTextLib"].ITMSFNCPDFRichTextLibService),!0),pas["WEBLib.TMSFNCPDFCoreLibBase"].TTMSFNCPDFLibPlatformServices.Current().AddPlatformService(rtl.getIntfGUIDR(pas["WEBLib.TMSFNCPDFRichTextLib"].ITMSFNCPDFRichTextLibService),t.PDFRichTextLibService))},this.$implcode=function(){rtl.createClass(t,"TTMSFNCGeneralPDFRichTextLibService",pas["WEBLib.TMSFNCPDFRichTextLib"].TTMSFNCPDFRichTextLibFactoryService,(function(){this.DoCreatePDFRichTextLib=function(){var e=null,i=!1;try{e=rtl.setIntfL(e,rtl.queryIntfT(t.TTMSFNCGeneralPDFRichTextLib.$create("Create$1"),pas["WEBLib.TMSFNCPDFRichTextLib"].ITMSFNCCustomPDFRichTextLib),!0),i=!0}finally{i||rtl._Release(e)}return e},rtl.addIntf(this,pas["WEBLib.TMSFNCPDFRichTextLib"].ITMSFNCPDFRichTextLibService),rtl.addIntf(this,pas.System.IUnknown)})),rtl.createClass(t,"TTMSFNCGeneralPDFRichTextLib",pas.System.TInterfacedObject,(function(){this.Create$1=function(){return this},this.Destroy=function(){pas.System.TObject.Destroy.call(this)},rtl.addIntf(this,pas["WEBLib.TMSFNCPDFRichTextLib"].ITMSFNCCustomPDFRichTextLib),rtl.addIntf(this,pas.System.IUnknown)})),t.PDFRichTextLibService=null}}),["Classes","WEBLib.TMSFNCPDFRichTextLib","SysUtils","WEBLib.TMSFNCTypes","WEBLib.TMSFNCPDFCoreLibBase","WEBLib.TMSFNCGraphicsTypes","Types"]),rtl.module("WEBLib.TMSFNCPDFRichTextLib",["System","Classes","WEBLib.TMSFNCPDFCoreLibBase","WEBLib.TMSFNCGraphicsTypes","WEBLib.TMSFNCTypes","contnrs"],(function(){"use strict";var t=this;rtl.createInterface(this,"ITMSFNCCustomPDFRichTextLib","{E4E9AE27-E487-4D46-BA6C-33B6BA6E54E4}",[],pas.System.IUnknown),rtl.createInterface(this,"ITMSFNCPDFRichTextLibService","{6E174355-3C72-46C3-AC61-454E9711B9BD}",["CreatePDFRichTextLib"],pas.System.IUnknown),rtl.createClass(this,"TTMSFNCCustomPDFRichTextLib",pas.Classes.TPersistent,(function(){this.$init=function(){pas.Classes.TPersistent.$init.call(this),this.FPDFRichTextLib=null},this.$final=function(){rtl.setIntfP(this,"FPDFRichTextLib",null),pas.Classes.TPersistent.$final.call(this)},this.Create$1=function(){var e=null;try{pas["WEBLib.TMSFNCPDFCoreLibBase"].TTMSFNCPDFLibPlatformServices.Current().SupportsPlatformService$1(rtl.getIntfGUIDR(t.ITMSFNCPDFRichTextLibService),{get:function(){return e},set:function(t){e=rtl.setIntfL(e,t)}})&&rtl.setIntfP(this,"FPDFRichTextLib",e.CreatePDFRichTextLib(),!0)}finally{rtl._Release(e)}return this},this.Destroy=function(){null!=this.FPDFRichTextLib&&rtl.setIntfP(this,"FPDFRichTextLib",null),pas.System.TObject.Destroy.call(this)},this.GetPDFRichTextLib=function(){var t=null,e=!1;try{t=rtl.setIntfL(t,this.FPDFRichTextLib),e=!0}finally{e||rtl._Release(t)}return t}})),rtl.createClass(this,"TTMSFNCPDFRichTextLibList",pas.Classes.TList,(function(){})),rtl.createClass(this,"TTMSFNCPDFRichTextLibFactoryService",pas.System.TInterfacedObject,(function(){this.$init=function(){pas.System.TInterfacedObject.$init.call(this),this.FPDFRichTextLibs=null},this.$final=function(){this.FPDFRichTextLibs=void 0,pas.System.TInterfacedObject.$final.call(this)},this.CreatePDFRichTextLib=function(){var t=null,e=!1;try{t=rtl.setIntfL(t,this.DoCreatePDFRichTextLib(),!0),this.FPDFRichTextLibs.Add(t),e=!0}finally{e||rtl._Release(t)}return t},this.Create$1=function(){return pas.System.TObject.Create.call(this),this.FPDFRichTextLibs=t.TTMSFNCPDFRichTextLibList.$create("Create$1"),this},this.Destroy=function(){pas.SysUtils.FreeAndNil({p:this,get:function(){return this.p.FPDFRichTextLibs},set:function(t){this.p.FPDFRichTextLibs=t}}),pas.System.TObject.Destroy.call(this)},rtl.addIntf(this,t.ITMSFNCPDFRichTextLibService),rtl.addIntf(this,pas.System.IUnknown)})),rtl.createClass(this,"TTMSFNCPDFRichTextLib",this.TTMSFNCCustomPDFRichTextLib,(function(){})),t.$init=function(){pas["WEBLib.TMSFNCPDFRichTextLib.General"].RegisterPDFRichTextLibService()}}),["WEBLib.TMSFNCPDFRichTextLib.General","SysUtils"]),rtl.module("WEBLib.TMSFNCPDFGraphicsLibHTMLEngine",["System","WEBLib.TMSFNCTypes","WEBLib.Graphics","WEBLib.TMSFNCBitmapContainer","WEBLib.TMSFNCGraphics","WEBLib.TMSFNCPDFLib","WEBLib.TMSFNCGraphicsTypes","contnrs"],(function(){"use strict";var t=this,e=t.$impl;rtl.createClass(this,"TTMSFNCPDFGraphicsLibHTMLLine",pas.System.TObject,(function(){this.$init=function(){pas.System.TObject.$init.call(this),this.FTextColor=0,this.FFontSize=0,this.FFontStyle={},this.FLineBreak=!1,this.FBitmap=null,this.FHasImage=!1,this.FFontName="",this.FIsURL=!1,this.FText="",this.FURL="",this.FBackgroundColor=0,this.FBitmapHeight=0,this.FBitmapWidth=0,this.FSuperscript=!1,this.FSubscript=!1,this.FTextAlign=0,this.FOffset=0,this.FBullet=!1,this.FLineColor=0,this.FIsLine=!1},this.$final=function(){this.FFontStyle=void 0,this.FBitmap=void 0,pas.System.TObject.$final.call(this)},this.Create$1=function(){return this.FBitmap=pas["WEBLib.TMSFNCTypes"].TTMSFNCBitmap.$create("Create$3"),this.Reset(),this},this.Destroy=function(){rtl.free(this,"FBitmap"),pas.System.TObject.Destroy.call(this)},this.Reset=function(){this.FLineBreak=!1,this.FBackgroundColor=-1,this.FTextColor=0,this.FHasImage=!1,this.FTextAlign=1,this.FSubscript=!1,this.FBullet=!1,this.FSuperscript=!1,this.FIsURL=!1,this.FFontName="",this.FFontStyle={},this.FFontSize=-1,this.FText="",this.FURL="",this.FOffset=0,this.FBitmapWidth=0,this.FBitmapHeight=0}})),rtl.createClass(this,"TTMSFNCPDFGraphicsLibHTMLLineBreak",this.TTMSFNCPDFGraphicsLibHTMLLine,(function(){this.Create$1=function(){return t.TTMSFNCPDFGraphicsLibHTMLLine.Create$1.call(this),this.FLineBreak=!0,this}})),rtl.createClass(this,"TTMSFNCPDFGraphicsLibHTMLImage",this.TTMSFNCPDFGraphicsLibHTMLLine,(function(){this.Create$1=function(){return t.TTMSFNCPDFGraphicsLibHTMLLine.Create$1.call(this),this.FHasImage=!0,this}})),rtl.createClass(this,"TTMSFNCPDFGraphicsLibHTMLLines",pas.contnrs.TObjectList,(function(){})),rtl.createClass(this,"TTMSFNCPDFGraphicsLibHTMLEngine",pas.System.TObject,(function(){this.ParseHTML=function(e,i){var s=!1,n=null;function r(t){return 1===pas.System.Pos("#",t)?pas["WEBLib.TMSFNCGraphics"].TTMSFNCGraphics.HTMLToColor(t):pas["WEBLib.TMSFNCGraphics"].TTMSFNCGraphics.TextToColor(t)}function o(t){var e=0,i=0;return pas.System.val$6(t,{get:function(){return i},set:function(t){i=t}},{get:function(){return e},set:function(t){e=t}}),i}function a(e){var s,a="",l="",h="",F="",p="",c="",u="",d=!1,S=0,C=0,T="",m=!1,g=!1,f="",b=!1,y=0,L=0,M=0,E=!1,P=null,B=null,D=null,N=0,v=0,O=0,I=0,W=0,A=!1,G=0,$=0,R=null,x="";for(g=!1,E=!1,y=0,0,f="",x="","",c="",d=!1,!1,l="",P=t.TTMSFNCPDFGraphicsLibHTMLLine.$create("Create$1");e.get().length>0&&!d;){for(b=!1,S=pas.System.Pos("<",e.get()),C=(a=S>0?pas.System.Copy(e.get(),1,S-1):e.get()).length;pas.System.Pos("&nbsp;",a)>0;)pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.TagReplaceString("&nbsp;"," ",{get:function(){return a},set:function(t){a=t}});for(;pas.System.Pos("&lt;",a)>0;)pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.TagReplaceString("&lt;","<",{get:function(){return a},set:function(t){a=t}});for(;pas.System.Pos("&gt;",a)>0;)pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.TagReplaceString("&gt;",">",{get:function(){return a},set:function(t){a=t}});if(C>0&&(E&&pas.System.Delete(e,1,C),E||(P.FIsURL=g,P.FText=x+a,P.FHasImage=b,g&&(P.FTextColor=16711680,P.FURL=f,P.FFontStyle=rtl.unionSet(P.FFontStyle,rtl.createSet(3))),(""!==P.FText||P.FHasImage)&&(n.Add$1(P),P=t.TTMSFNCPDFGraphicsLibHTMLLine.$create("Create$1")),""!==x&&(n.Add$1(t.TTMSFNCPDFGraphicsLibHTMLLineBreak.$create("Create$1")),x=""),c+=a,(m=!0)?(l+=pas.System.Copy(e.get(),1,C),m||c===a||e.set(""),pas.System.Delete(e,1,C)):(d=!0,n.Add$1(t.TTMSFNCPDFGraphicsLibHTMLLine.$create("Create$1"))))),1===(S=pas.System.Pos("<",e.get()))&&e.get().length<=2&&e.set(""),W=0,!d&&1===S&&e.get().length>2){if("/"===e.get().charAt(2-W-1)&&e.get().length>3){var w=pas.System.upcase(e.get().charAt(3-W-1));"A"===w?g&&(g=!1):"B"===w?">"!==e.get().charAt(4-W-1)||(P.FFontStyle=rtl.diffSet(P.FFontStyle,rtl.createSet(0))):"S"===w?"U"===(T=pas.System.upcase(e.get().charAt(4-W-1)))?(P.FSuperscript=!1,P.FSubscript=!1):"H"===T||(P.FFontStyle=rtl.diffSet(P.FFontStyle,rtl.createSet(2))):"F"===w?P.Reset():"I"===w?">"!==e.get().charAt(3-W-1)?d=!0:P.FFontStyle=rtl.unionSet(P.FFontStyle,rtl.createSet(1)):"L"===w||"P"===w?(d=!0,n.Add$1(t.TTMSFNCPDFGraphicsLibHTMLLineBreak.$create("Create$1"))):"U"===w?">"!==e.get().charAt(4-W-1)&&y>0||(P.FFontStyle=rtl.diffSet(P.FFontStyle,rtl.createSet(3,2))):"Z"===w&&(E=!1)}else{var k=pas.System.upcase(e.get().charAt(2-W-1));if("A"===k)h=pas.SysUtils.UpperCase(pas.System.Copy(e.get(),3,pas.System.Pos(">",e.get())-1)),pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.VarPos("HREF",h,{get:function(){return S},set:function(t){S=t}})>0&&(h=pas.System.Copy(e.get(),3,pas.System.Pos(">",e.get())-1),F=pas.System.Copy(h,S+4,h.length),F=pas.System.Copy(F,pas.System.Pos('"',F)+1,F.length),f=F=pas.System.Copy(F,1,pas.System.Pos('"',F)-1),g=!0);else if("B"===k)">"===(T=pas.System.upcase(e.get().charAt(3-W-1)))?P.FFontStyle=rtl.unionSet(P.FFontStyle,rtl.createSet(0)):"R"===T?(d=!0,n.Add$1(t.TTMSFNCPDFGraphicsLibHTMLLineBreak.$create("Create$1"))):"O"===T&&(l+=pas.System.Copy(e.get(),1,pas.System.Pos(">",e.get())),h=pas.SysUtils.UpperCase(pas.System.Copy(e.get(),6,pas.System.Pos(">",e.get())-1)),pas.System.Pos("BGCOLOR",h)>0&&(F=pas.System.Copy(h,pas.System.Pos("BGCOLOR",h)+7,h.length),F=pas.System.Copy(F,pas.System.Pos('"',F)+1,F.length),F=pas.System.Copy(F,1,pas.System.Pos('"',F)-1)));else if("H"===k){"R"===pas.System.upcase(e.get().charAt(3-W-1))&&(d=!0,h=pas.System.Copy(e.get(),4,pas.System.Pos(">",e.get())-1),$=0,pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.VarPos("COLOR",pas.SysUtils.UpperCase(h),{get:function(){return S},set:function(t){S=t}})>0&&(F=pas.System.Copy(h,S+5,h.length),F=pas.System.Copy(F,pas.System.Pos('"',F)+1,F.length),$=r(F=pas.System.Copy(F,1,pas.System.Pos('"',F)-1))),(R=t.TTMSFNCPDFGraphicsLibHTMLLineBreak.$create("Create$1")).FLineColor=$,R.FIsLine=!0,n.Add$1(R))}else if("I"===k)">"===(T=pas.System.upcase(e.get().charAt(3-W-1)))?P.FFontStyle=rtl.unionSet(P.FFontStyle,rtl.createSet(1)):"N"===T?(h=pas.System.Copy(e.get(),3,pas.System.Pos(">",e.get())-1),F=pas.System.Copy(h,pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.IPos("x",h)+2,h.length),F=pas.System.Copy(F,pas.System.Pos('"',F)+1,F.length),F=pas.System.Copy(F,1,pas.System.Pos('"',F)-1),pas.System.val$6(F,{get:function(){return L},set:function(t){L=t}},{get:function(){return M},set:function(t){M=t}}),0===M&&(P.FOffset=L)):"M"===T&&(h=pas.System.Copy(e.get(),3,pas.System.Pos(">",e.get())-1),F=pas.System.Copy(h,pas.System.Pos("SRC",pas.SysUtils.UpperCase(h))+4,h.length),F=pas.System.Copy(F,pas.System.Pos('"',F)+1,F.length),F=pas.System.Copy(F,1,pas.System.Pos('"',F)-1),h=pas.SysUtils.UpperCase(h),O=0,I=0,G=1,pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.VarPos("ALIGN",h,{get:function(){return S},set:function(t){S=t}})>0&&(p=pas.System.Copy(h,S+5,h.length),p=pas.System.Copy(p,pas.System.Pos('"',p)+1,p.length),p=pas.System.Copy(p,1,pas.System.Pos('"',p)-1),pas.System.Pos("RIGHT",p)>0&&(G=2),pas.System.Pos("LEFT",p)>0&&(G=1),pas.System.Pos("CENTER",p)>0&&(G=0)),pas.System.Pos("WIDTH",h)>0&&(p=pas.System.Copy(h,pas.System.Pos("WIDTH",h)+6,h.length),p=pas.System.Copy(p,pas.System.Pos('"',p)+1,p.length),p=pas.System.Copy(p,1,pas.System.Pos('"',p)-1),pas.System.val$6(p,{get:function(){return O},set:function(t){O=t}},{get:function(){return M},set:function(t){M=t}})),pas.System.Pos("HEIGHT",h)>0&&(p=pas.System.Copy(h,pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.IPos("HEIGHT",h)+7,h.length),p=pas.System.Copy(p,pas.System.Pos('"',p)+1,p.length),p=pas.System.Copy(p,1,pas.System.Pos('"',p)-1),pas.System.val$6(p,{get:function(){return I},set:function(t){I=t}},{get:function(){return M},set:function(t){M=t}})),D=null,A=!1,0===pas.System.Pos(":",F)&&null!=i&&(D=i.FindBitmap$1(F)),N=0,v=0,null!=D&&(pas["WEBLib.TMSFNCTypes"].IsBitmapEmpty(D)||(O>0&&I>0&&(N=O,v=I),O>0&&0===I&&(N=O,v=Math.round(O/D.GetWidth()*D.GetHeight())),0===O&&I>0&&(N=Math.round(I/D.GetHeight()*D.GetWidth()),v=I),0===O&&0===I&&(N=D.GetWidth(),v=D.GetHeight()),(B=t.TTMSFNCPDFGraphicsLibHTMLImage.$create("Create$1")).FBitmap.Assign(D),B.FBitmapWidth=N,B.FBitmapHeight=v,B.FTextAlign=G,n.Add$1(B)),A&&(D=rtl.freeLoc(D))));else if("L"===k)x="",pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.VarPos(">",e.get(),{get:function(){return S},set:function(t){S=t}})>0&&(h=pas.SysUtils.UpperCase(pas.System.Copy(e.get(),3,S-1)),pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.VarPos("TYPE",h,{get:function(){return S},set:function(t){S=t}})>0&&(F=pas.System.Copy(h,S+4,h.length),F=pas.System.Copy(F,pas.System.Pos('"',F)+1,F.length),u=F=pas.System.Copy(F,1,pas.System.Pos('"',F)-1))),x="CIRCLE"===u?"•":"SQUARE"===u?"▪":"STAR"===u?"★":"ARROW"===u?"→":"TICK"===u?"✓":"-",x+=" ";else if("U"===k)">"!==e.get().charAt(3-W-1)?(y+=1,d=!0):P.FFontStyle=rtl.unionSet(P.FFontStyle,rtl.createSet(3));else if("P"===k)pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.VarPos(">",e.get(),{get:function(){return S},set:function(t){S=t}})>0&&(h=pas.SysUtils.UpperCase(pas.System.Copy(e.get(),3,S-1)),pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.VarPos("ALIGN",h,{get:function(){return S},set:function(t){S=t}})>0&&(F=pas.System.Copy(h,S+5,h.length),F=pas.System.Copy(F,pas.System.Pos('"',F)+1,F.length),F=pas.System.Copy(F,1,pas.System.Pos('"',F)-1),pas.System.Pos("RIGHT",F)>0&&(P.FTextAlign=2),pas.System.Pos("LEFT",F)>0&&(P.FTextAlign=1),pas.System.Pos("CENTER",F)>0&&(P.FTextAlign=0)),pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.VarPos("INDENT",h,{get:function(){return S},set:function(t){S=t}})>0&&(F=pas.System.Copy(h,S+6,h.length),F=pas.System.Copy(F,pas.System.Pos('"',F)+1,F.length),F=pas.System.Copy(F,1,pas.System.Pos('"',F)-1),P.FOffset=o(F)),pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.VarPos("BGCOLOR",h,{get:function(){return S},set:function(t){S=t}})>0&&(F=pas.System.Copy(h,S+5,h.length),F=pas.System.Copy(F,pas.System.Pos('"',F)+1,F.length),F=pas.System.Copy(F,1,pas.System.Pos('"',F)-1),P.FBackgroundColor=r(F)));else if("F"===k){if(pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.VarPos(">",e.get(),{get:function(){return S},set:function(t){S=t}})>0&&(h=pas.SysUtils.UpperCase(pas.System.Copy(e.get(),6,S-6)),pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.VarPos("ALIGN",h,{get:function(){return S},set:function(t){S=t}})>0&&(F=pas.System.Copy(h,S+5,h.length),F=pas.System.Copy(F,pas.System.Pos('"',F)+1,F.length),F=pas.System.Copy(F,1,pas.System.Pos('"',F)-1),pas.System.Pos("RIGHT",F)>0&&(P.FTextAlign=2),pas.System.Pos("LEFT",F)>0&&(P.FTextAlign=1),pas.System.Pos("CENTER",F)>0&&(P.FTextAlign=0)),pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.VarPos("FACE",h,{get:function(){return S},set:function(t){S=t}})>0&&(F=pas.System.Copy(e.get(),S+4,h.length),F=pas.System.Copy(F,pas.System.Pos('"',F)+1,F.length),F=pas.System.Copy(F,1,pas.System.Pos('"',F)-1),P.FFontName=F),pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.VarPos("INDENT",h,{get:function(){return S},set:function(t){S=t}})>0&&(F=pas.System.Copy(h,S+6,h.length),F=pas.System.Copy(F,pas.System.Pos('"',F)+1,F.length),F=pas.System.Copy(F,1,pas.System.Pos('"',F)-1),P.FOffset=o(F)),pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.VarPos("BULLET",h,{get:function(){return S},set:function(t){S=t}})>0&&(P.FBullet=!0),pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.VarPos(" COLOR",h,{get:function(){return S},set:function(t){S=t}})>0&&(F=pas.System.Copy(h,S+6,h.length),F=pas.System.Copy(F,pas.System.Pos('"',F)+1,F.length),(F=pas.System.Copy(F,1,pas.System.Pos('"',F)-1)).length>0&&(P.FTextColor=r(F))),pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.VarPos("BGCOLOR",h,{get:function(){return S},set:function(t){S=t}})>0&&(F=pas.System.Copy(h,S+7,h.length),F=pas.System.Copy(F,pas.System.Pos('"',F)+1,F.length),(F=pas.System.Copy(F,1,pas.System.Pos('"',F)-1)).length>0&&(P.FBackgroundColor=r(F))),pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.VarPos("SIZE",h,{get:function(){return S},set:function(t){S=t}})>0)){F=pas.System.Copy(h,S+4,h.length),F=pas.System.Copy(F,pas.System.Pos("=",F)+1,F.length),F=pas.System.Copy(F,pas.System.Pos('"',F)+1,F.length);var H=o(F=pas.System.Copy(F,1,pas.System.Pos('"',F)-1));P.FFontSize=1===H?8:2===H?10:3===H?12:4===H?14:5===H?16:o(F)}}else"S"===k?">"===(T=pas.System.upcase(e.get().charAt(3-W-1)))?P.FFontStyle=rtl.unionSet(P.FFontStyle,rtl.createSet(2)):"H"===T||(1===pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.IPos("<SUB>",e.get())?P.FSubscript=!0:1===pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.IPos("<SUP>",e.get())&&(P.FSuperscript=!0)):"Z"===k&&(E=!0)}pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.VarPos(">",e.get(),{get:function(){return S},set:function(t){S=t}})>0?(l+=pas.System.Copy(e.get(),1,S),pas.System.Delete(e,1,S)):pas.System.Delete(e,1,e.get().length)}}return s=l,-1===n.IndexOf$1(P)&&(P=rtl.freeLoc(P)),s}if(n=t.TTMSFNCPDFGraphicsLibHTMLLines.$create("Create$2"),pas.System.Pos("&",e)>0)do{s=!1,pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.TagReplaceString("&amp;","&",{get:function(){return e},set:function(t){e=t}})&&(s=!0),pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.TagReplaceString("&quot;",'"',{get:function(){return e},set:function(t){e=t}})&&(s=!0),pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.TagReplaceString("&sect;","§",{get:function(){return e},set:function(t){e=t}})&&(s=!0),pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.TagReplaceString("&permil;","®‰",{get:function(){return e},set:function(t){e=t}})&&(s=!0),pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.TagReplaceString("&reg;","®",{get:function(){return e},set:function(t){e=t}})&&(s=!0),pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.TagReplaceString("&copy;","©",{get:function(){return e},set:function(t){e=t}})&&(s=!0),pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.TagReplaceString("&para;","¶",{get:function(){return e},set:function(t){e=t}})&&(s=!0),pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.TagReplaceString("&trade;","™",{get:function(){return e},set:function(t){e=t}})&&(s=!0),pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.TagReplaceString("&euro;","€",{get:function(){return e},set:function(t){e=t}})&&(s=!0),pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.TagReplaceString("&pound;","£",{get:function(){return e},set:function(t){e=t}})&&(s=!0),pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.TagReplaceString("&dollar;","$",{get:function(){return e},set:function(t){e=t}})&&(s=!0)}while(s);for(e=function(t,e){var i="",s=0;i="";for(var n=1,r=t.length;n<=r;n++)s=n,"\r"!==t.charAt(s-1)&&"\n"!==t.charAt(s-1)?i+=t.charAt(s-1):"\r"===t.charAt(s-1)&&e&&(i+="<BR>");return i}(e=function(t){var e,i="",s=0;return(e=pas.System.Pos("<#",t))>0?(i=pas.System.Copy(t,1,e-1),pas.System.Delete({get:function(){return t},set:function(e){t=e}},1,e),(s=pas.System.Pos(">",t))>0&&pas.System.Delete({get:function(){return t},set:function(e){t=e}},s,1),i+=t):i=t,i}(e),!0),"";e.length>0;)a({get:function(){return e},set:function(t){e=t}});return n},this.DrawHTMLText=function(e,i,s,n,r,o,a){var l=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),h=null,F=null,p=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),c="",u=0,d=0,S=0,C=null,T=null,m=0,g=0,f="",b=[],y=[],L=0,M=0,E=0,P=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),B=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),D=0,N=0,v=0,O=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),I=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),W=0,A=!1,G=0,$=void 0,R=rtl.createIntfRefs();try{if(l.$assign(pas["WEBLib.TMSFNCTypes"].RectF(0,0,0,0)),null==e)return l;W=R.ref(1,e.GetPDFGraphicsLib()).GetLineBreakMode(),R.ref(2,e.GetPDFGraphicsLib()).SetLineBreakMode(0),h=this.ParseHTML(i,n),u=s.Left,d=s.Top,m=0,g=0,v=R.ref(3,e.GetPDFGraphicsLib()).GetStroke().FColor,D=R.ref(4,e.GetPDFGraphicsLib()).GetFill().FColor,N=R.ref(5,e.GetPDFGraphicsLib()).GetFill().FColorTo,G=R.ref(6,e.GetPDFGraphicsLib()).GetStroke().FWidth,A=!0,C=pas["WEBLib.TMSFNCPDFCoreLibBase"].TTMSFNCPDFGraphicsLibFont.$create("Create$1"),T=pas["WEBLib.TMSFNCPDFCoreLibBase"].TTMSFNCPDFGraphicsLibFont.$create("Create$1");try{if(C.Assign(R.ref(7,e.GetPDFGraphicsLib()).GetFont()),T.Assign(R.ref(8,e.GetPDFGraphicsLib()).GetFont()),null!=h){E=1.4*R.ref(9,e.GetPDFGraphicsLib()).GetFont().FSize;var x=h.GetEnumerator();try{for(;x.MoveNext();)if($=x.GetCurrent(),F=rtl.getObject($),t.TTMSFNCPDFGraphicsLibHTMLImage.isPrototypeOf(F)){if(null!=F.FBitmap){if(d+F.FBitmapHeight*o>s.Bottom&&r&&!a&&(d=s.Top,R.ref(10,e.GetPDFInitializationLib()).NotifyNewPage()),!a){var w=F.FTextAlign;0===w?R.ref(11,e.GetPDFGraphicsLib()).DrawImage$2(F.FBitmap,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(pas["WEBLib.TMSFNCTypes"].RectF(s.Left+(s.Right-s.Left-F.FBitmapWidth*o)/2,d,s.Left+(s.Right-s.Left-F.FBitmapWidth*o)/2+F.FBitmapWidth*o,d+F.FBitmapHeight*o)),!0,!0,0,1,!0):1===w?R.ref(12,e.GetPDFGraphicsLib()).DrawImage$2(F.FBitmap,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(pas["WEBLib.TMSFNCTypes"].RectF(u,d,u+F.FBitmapWidth*o,d+F.FBitmapHeight*o)),!0,!0,0,1,!0):2===w&&R.ref(13,e.GetPDFGraphicsLib()).DrawImage$2(F.FBitmap,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(pas["WEBLib.TMSFNCTypes"].RectF(s.Right-F.FBitmapWidth*o,d,s.Right,d+F.FBitmapHeight*o)),!0,!0,0,1,!0)}u+=F.FBitmapWidth*o,E=F.FBitmapHeight*o,g=Math.max(g,E)}}else if(R.ref(14,e.GetPDFGraphicsLib()).GetFont().BeginUpdate(),R.ref(15,e.GetPDFGraphicsLib()).GetFont().SetColor(F.FTextColor),F.FFontSize>0?R.ref(16,e.GetPDFGraphicsLib()).GetFont().SetSize(F.FFontSize*o):R.ref(17,e.GetPDFGraphicsLib()).GetFont().SetSizeNoScale(C.FSize),(F.FSubscript||F.FSuperscript)&&R.ref(19,e.GetPDFGraphicsLib()).GetFont().SetSizeNoScale(Math.round(.7*R.ref(18,e.GetPDFGraphicsLib()).GetFont().FSize)),R.ref(20,e.GetPDFGraphicsLib()).GetFont().SetStyle(rtl.refSet(F.FFontStyle)),""!==F.FFontName?R.ref(21,e.GetPDFGraphicsLib()).GetFont().SetName(F.FFontName):R.ref(22,e.GetPDFGraphicsLib()).GetFont().SetName(C.FName),R.ref(23,e.GetPDFGraphicsLib()).GetFont().EndUpdate(),R.ref(24,e.GetPDFGraphicsLib()).GetURLFont().BeginUpdate(),R.ref(25,e.GetPDFGraphicsLib()).GetURLFont().Assign(R.ref(26,e.GetPDFGraphicsLib()).GetFont()),R.ref(27,e.GetPDFGraphicsLib()).GetURLFont().EndUpdate(),F.FLineBreak)F.FIsLine&&(R.ref(28,e.GetPDFGraphicsLib()).GetStroke().SetColor(F.FLineColor),R.ref(29,e.GetPDFGraphicsLib()).GetStroke().SetWidth(1),R.ref(30,e.GetPDFGraphicsLib()).DrawLine(pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(s.Left,d)),pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(m,d))),g+=2),d+=E,E=1.4*R.ref(31,e.GetPDFGraphicsLib()).GetFont().FSize,u=s.Left,A=!0;else{for(A&&(u+=F.FOffset,F.FBullet&&(B.$assign(R.ref(32,e.GetPDFGraphicsLib()).DrawText$2(F.FText,pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(0,0)),!0)),u-=B.Right-B.Left),A=!1),c=F.FText,b=rtl.arraySetLength(b,"",1),(y=rtl.arraySetLength(y,pas["WEBLib.TMSFNCTypes"].TRectF,1))[0].$assign(pas["WEBLib.TMSFNCTypes"].RectF(u,d,s.Right,d+1.4*R.ref(33,e.GetPDFGraphicsLib()).GetFont().FSize)),I.$assign(R.ref(34,e.GetPDFGraphicsLib()).DrawText$3(c,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(pas["WEBLib.TMSFNCTypes"].RectF(0,0,1e4,1e4)),!0)),y[0].$assign(pas["WEBLib.TMSFNCTypes"].RectF(u,d,s.Right,d+(I.Bottom-I.Top))),S=d+(I.Bottom-I.Top),M=R.ref(35,e.GetPDFGraphicsLib()).DrawText$1(c,rtl.arrayRef(y),0,!0),f=pas.System.Copy(c,1,c.length-M),b[rtl.length(b)-1]=f,pas.System.Delete({get:function(){return c},set:function(t){c=t}},1,f.length),E=Math.max(E,y[0].Bottom-y[0].Top);M>0;)(y=rtl.arraySetLength(y,pas["WEBLib.TMSFNCTypes"].TRectF,rtl.length(y)+1))[rtl.length(y)-1].$assign(pas["WEBLib.TMSFNCTypes"].RectF(s.Left+F.FOffset,S,s.Right,S+1.4*R.ref(36,e.GetPDFGraphicsLib()).GetFont().FSize)),I.$assign(R.ref(37,e.GetPDFGraphicsLib()).DrawText$3(c,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(pas["WEBLib.TMSFNCTypes"].RectF(0,0,1e4,1e4)),!0)),y[rtl.length(y)-1].$assign(pas["WEBLib.TMSFNCTypes"].RectF(s.Left+F.FOffset,S,s.Right,S+(I.Bottom-I.Top))),S+=I.Bottom-I.Top,E=Math.max(E,I.Bottom-I.Top),M=R.ref(38,e.GetPDFGraphicsLib()).DrawText(c,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(y[rtl.length(y)-1]),1,0,!0),f=pas.System.Copy(c,1,c.length-M),(b=rtl.arraySetLength(b,"",rtl.length(b)+1))[rtl.length(b)-1]=f,pas.System.Delete({get:function(){return c},set:function(t){c=t}},1,f.length);for(var k=0,H=rtl.length(b)-1;k<=H;k++){if(y[L=k].Bottom>s.Bottom&&r&&!a){d=s.Top;for(var U=L,j=rtl.length(y)-1;U<=j;U++)y[M=U].$assign(pas["WEBLib.TMSFNCTypes"].RectF(y[M].Left,d,y[M].Right,d+(y[M].Bottom-y[M].Top))),d+=y[M].Bottom-y[M].Top;R.ref(39,e.GetPDFInitializationLib()).NotifyNewPage()}p.$assign(R.ref(40,e.GetPDFGraphicsLib()).DrawText$3(b[L],pas["WEBLib.TMSFNCTypes"].TRectF.$clone(y[L]),!0));var V=F.FTextAlign;if(1===V?P.$assign(pas["WEBLib.TMSFNCTypes"].RectF(y[L].Left,y[L].Top,y[L].Left+(p.Right-p.Left),y[L].Top+(p.Bottom-p.Top))):0===V?P.$assign(pas["WEBLib.TMSFNCTypes"].RectF(y[L].Left+(y[L].Right-y[L].Left-(p.Right-p.Left))/2,y[L].Top,y[L].Left+(y[L].Right-y[L].Left-(p.Right-p.Left))/2+(p.Right-p.Left),y[L].Top+(p.Bottom-p.Top))):2===V&&P.$assign(pas["WEBLib.TMSFNCTypes"].RectF(y[L].Right-(p.Right-p.Left),y[L].Top,y[L].Right,y[L].Top+(p.Bottom-p.Top))),!a){-1!==F.FBackgroundColor&&(R.ref(41,e.GetPDFGraphicsLib()).GetStroke().SetColor(-1),R.ref(42,e.GetPDFGraphicsLib()).GetFill().SetColor(F.FBackgroundColor),R.ref(43,e.GetPDFGraphicsLib()).GetFill().SetColorTo(-1),R.ref(44,e.GetPDFGraphicsLib()).DrawRectangle(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(P))),F.FSubscript?O.$assign(pas["WEBLib.TMSFNCTypes"].RectF(y[L].Left,y[L].Bottom-.3*(y[L].Bottom-y[L].Top),y[L].Right,y[L].Bottom-.3*(y[L].Bottom-y[L].Top)+(y[L].Bottom-y[L].Top))):F.FSuperscript?O.$assign(pas["WEBLib.TMSFNCTypes"].RectF(y[L].Left,y[L].Top-.3*(y[L].Bottom-y[L].Top),y[L].Right,y[L].Top-.3*(y[L].Bottom-y[L].Top)+(y[L].Bottom-y[L].Top))):O.$assign(y[L]);var z=F.FTextAlign;0===z?R.ref(45,e.GetPDFGraphicsLib()).SetAlignment(0):1===z?R.ref(46,e.GetPDFGraphicsLib()).SetAlignment(1):2===z&&R.ref(47,e.GetPDFGraphicsLib()).SetAlignment(2),F.FIsURL?R.ref(48,e.GetPDFGraphicsLib()).AddURL(b[L],F.FURL,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(O)):R.ref(49,e.GetPDFGraphicsLib()).DrawText$3(b[L],pas["WEBLib.TMSFNCTypes"].TRectF.$clone(O),!1)}u=y[L].Left+(p.Right-p.Left),d=y[L].Top,m=Math.max(m,u),g=Math.max(g,d+(p.Bottom-p.Top)),E=Math.max(E,p.Bottom-p.Top)}}}finally{x=rtl.freeLoc(x)}h=rtl.freeLoc(h)}}finally{R.ref(50,e.GetPDFGraphicsLib()).SetLineBreakMode(W),R.ref(51,e.GetPDFGraphicsLib()).GetFont().BeginUpdate(),R.ref(52,e.GetPDFGraphicsLib()).GetFont().Assign(C),R.ref(53,e.GetPDFGraphicsLib()).GetURLFont().Assign(T),R.ref(54,e.GetPDFGraphicsLib()).GetFont().EndUpdate(),R.ref(55,e.GetPDFGraphicsLib()).GetFill().SetColor(D),R.ref(56,e.GetPDFGraphicsLib()).GetFill().SetColorTo(N),R.ref(57,e.GetPDFGraphicsLib()).GetStroke().SetColor(v),R.ref(58,e.GetPDFGraphicsLib()).GetStroke().SetWidth(G),C=rtl.freeLoc(C),T=rtl.freeLoc(T)}l.$assign(pas["WEBLib.TMSFNCTypes"].RectF(s.Left,s.Top,m,g))}finally{R.free()}return l}})),t.$implcode=function(){e.FColorLookup=null,rtl.createClass(e,"TTMSFNCPDFCoreLibBaseColor",pas.System.TObject,(function(){this.$init=function(){pas.System.TObject.$init.call(this),this.FColor=0},this.Create$1=function(t){return this.FColor=t,this}}))},t.$init=function(){e.FColorLookup=pas.Classes.TStringList.$create("Create$1"),e.FColorLookup.AddObject("aliceblue",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[16775408])),e.FColorLookup.AddObject("antiquewhite",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[14150650])),e.FColorLookup.AddObject("aqua",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[16776960])),e.FColorLookup.AddObject("aquamarine",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[13959039])),e.FColorLookup.AddObject("azure",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[16777200])),e.FColorLookup.AddObject("beige",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[14480885])),e.FColorLookup.AddObject("bisque",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[12903679])),e.FColorLookup.AddObject("black",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[0])),e.FColorLookup.AddObject("blanchedalmond",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[13495295])),e.FColorLookup.AddObject("blue",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[16711680])),e.FColorLookup.AddObject("blueviolet",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[14822282])),e.FColorLookup.AddObject("brown",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[2763429])),e.FColorLookup.AddObject("burlywood",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[8894686])),e.FColorLookup.AddObject("cadetblue",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[10526303])),e.FColorLookup.AddObject("chartreuse",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[65407])),e.FColorLookup.AddObject("chocolate",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[1993170])),e.FColorLookup.AddObject("coral",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[5275647])),e.FColorLookup.AddObject("cornflowerblue",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[15570276])),e.FColorLookup.AddObject("cornsilk",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[14481663])),e.FColorLookup.AddObject("crimson",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[3937500])),e.FColorLookup.AddObject("cyan",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[16776960])),e.FColorLookup.AddObject("darkblue",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[9109504])),e.FColorLookup.AddObject("darkcyan",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[9145088])),e.FColorLookup.AddObject("darkgoldenrod",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[755384])),e.FColorLookup.AddObject("darkgray",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[11119017])),e.FColorLookup.AddObject("darkgreen",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[25600])),e.FColorLookup.AddObject("darkgrey",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[11119017])),e.FColorLookup.AddObject("darkkhaki",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[7059389])),e.FColorLookup.AddObject("darkmagenta",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[9109643])),e.FColorLookup.AddObject("darkolivegreen",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[3107669])),e.FColorLookup.AddObject("darkorange",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[36095])),e.FColorLookup.AddObject("darkorchid",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[13382297])),e.FColorLookup.AddObject("darkred",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[139])),e.FColorLookup.AddObject("darksalmon",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[8034025])),e.FColorLookup.AddObject("darkseagreen",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[9419919])),e.FColorLookup.AddObject("darkslateblue",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[9125192])),e.FColorLookup.AddObject("darkslategray",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[5197615])),e.FColorLookup.AddObject("darkslategrey",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[5197615])),e.FColorLookup.AddObject("darkturquoise",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[13749760])),e.FColorLookup.AddObject("darkviolet",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[13828244])),e.FColorLookup.AddObject("deeppink",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[9639167])),e.FColorLookup.AddObject("deepskyblue",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[16760576])),e.FColorLookup.AddObject("dimgray",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[6908265])),e.FColorLookup.AddObject("dimgrey",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[6908265])),e.FColorLookup.AddObject("dodgerblue",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[16748574])),e.FColorLookup.AddObject("firebrick",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[2237106])),e.FColorLookup.AddObject("floralwhite",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[15792895])),e.FColorLookup.AddObject("forestgreen",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[2263842])),e.FColorLookup.AddObject("fuchsia",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[16711935])),e.FColorLookup.AddObject("gainsboro",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[14474460])),e.FColorLookup.AddObject("ghostwhite",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[16775416])),e.FColorLookup.AddObject("gold",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[55295])),e.FColorLookup.AddObject("goldenrod",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[2139610])),e.FColorLookup.AddObject("gray",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[8421504])),e.FColorLookup.AddObject("green",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[32768])),e.FColorLookup.AddObject("greenyellow",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[3145645])),e.FColorLookup.AddObject("grey",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[8421504])),e.FColorLookup.AddObject("honeydew",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[15794160])),e.FColorLookup.AddObject("hotpink",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[11823615])),e.FColorLookup.AddObject("indianred",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[6053069])),e.FColorLookup.AddObject("indigo",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[8519755])),e.FColorLookup.AddObject("ivory",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[15794175])),e.FColorLookup.AddObject("khaki",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[9234160])),e.FColorLookup.AddObject("lavender",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[16443110])),e.FColorLookup.AddObject("lavenderblush",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[16118015])),e.FColorLookup.AddObject("lawngreen",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[64636])),e.FColorLookup.AddObject("lemonchiffon",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[13499135])),e.FColorLookup.AddObject("lightblue",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[15128749])),e.FColorLookup.AddObject("lightcoral",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[8421616])),e.FColorLookup.AddObject("lightcyan",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[16777184])),e.FColorLookup.AddObject("lightgoldenrodyellow",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[13826810])),e.FColorLookup.AddObject("lightgray",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[13882323])),e.FColorLookup.AddObject("lightgreen",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[9498256])),e.FColorLookup.AddObject("lightgrey",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[13882323])),e.FColorLookup.AddObject("lightpink",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[12695295])),e.FColorLookup.AddObject("lightsalmon",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[8036607])),e.FColorLookup.AddObject("lightseagreen",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[11186720])),e.FColorLookup.AddObject("lightskyblue",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[16436871])),e.FColorLookup.AddObject("lightslategray",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[10061943])),e.FColorLookup.AddObject("lightslategrey",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[10061943])),e.FColorLookup.AddObject("lightsteelblue",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[14599344])),e.FColorLookup.AddObject("lightyellow",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[14745599])),e.FColorLookup.AddObject("lime",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[65280])),e.FColorLookup.AddObject("limegreen",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[3329330])),e.FColorLookup.AddObject("linen",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[15134970])),e.FColorLookup.AddObject("magenta",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[16711935])),e.FColorLookup.AddObject("maroon",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[128])),e.FColorLookup.AddObject("mediumaquamarine",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[11193702])),e.FColorLookup.AddObject("mediumblue",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[13434880])),e.FColorLookup.AddObject("mediumorchid",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[13850042])),e.FColorLookup.AddObject("mediumpurple",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[14381203])),e.FColorLookup.AddObject("mediumseagreen",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[7451452])),e.FColorLookup.AddObject("mediumslateblue",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[15624315])),e.FColorLookup.AddObject("mediumspringgreen",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[10156544])),e.FColorLookup.AddObject("mediumturquoise",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[13422920])),e.FColorLookup.AddObject("mediumvioletred",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[8721863])),e.FColorLookup.AddObject("midnightblue",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[7346457])),e.FColorLookup.AddObject("mintcream",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[16449525])),e.FColorLookup.AddObject("mistyrose",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[14804223])),e.FColorLookup.AddObject("moccasin",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[11920639])),e.FColorLookup.AddObject("navajowhite",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[11394815])),e.FColorLookup.AddObject("navy",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[8388608])),e.FColorLookup.AddObject("oldlace",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[15136253])),e.FColorLookup.AddObject("olive",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[32896])),e.FColorLookup.AddObject("olivedrab",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[2330219])),e.FColorLookup.AddObject("orange",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[42495])),e.FColorLookup.AddObject("orangered",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[17919])),e.FColorLookup.AddObject("orchid",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[14053594])),e.FColorLookup.AddObject("palegoldenrod",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[11200750])),e.FColorLookup.AddObject("palegreen",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[10025880])),e.FColorLookup.AddObject("paleturquoise",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[15658671])),e.FColorLookup.AddObject("palevioletred",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[9662683])),e.FColorLookup.AddObject("papayawhip",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[14020607])),e.FColorLookup.AddObject("peachpuff",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[12180223])),e.FColorLookup.AddObject("peru",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[4163021])),e.FColorLookup.AddObject("pink",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[13353215])),e.FColorLookup.AddObject("plum",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[14524637])),e.FColorLookup.AddObject("powderblue",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[15130800])),e.FColorLookup.AddObject("purple",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[8388736])),e.FColorLookup.AddObject("red",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[255])),e.FColorLookup.AddObject("rosybrown",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[9408444])),e.FColorLookup.AddObject("royalblue",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[14772545])),e.FColorLookup.AddObject("saddlebrown",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[1262987])),e.FColorLookup.AddObject("salmon",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[7504122])),e.FColorLookup.AddObject("sandybrown",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[6333684])),e.FColorLookup.AddObject("seagreen",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[5737262])),e.FColorLookup.AddObject("seashell",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[15660543])),e.FColorLookup.AddObject("sienna",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[2970272])),e.FColorLookup.AddObject("skyblue",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[15453831])),e.FColorLookup.AddObject("slateblue",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[13458026])),e.FColorLookup.AddObject("slategray",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[9470064])),e.FColorLookup.AddObject("slategrey",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[9470064])),e.FColorLookup.AddObject("snow",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[16448255])),e.FColorLookup.AddObject("springgreen",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[8388352])),e.FColorLookup.AddObject("steelblue",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[11829830])),e.FColorLookup.AddObject("violet",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[15631086])),e.FColorLookup.AddObject("thistle",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[14204888])),e.FColorLookup.AddObject("tan",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[9221330])),e.FColorLookup.AddObject("tomato",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[4678655])),e.FColorLookup.AddObject("turquoise",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[13688896])),e.FColorLookup.AddObject("wheat",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[11788021])),e.FColorLookup.AddObject("whitesmoke",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[16119285])),e.FColorLookup.AddObject("yellowgreen",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[3329434])),e.FColorLookup.AddObject("red",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[255])),e.FColorLookup.AddObject("black",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[0])),e.FColorLookup.AddObject("blue",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[16711680])),e.FColorLookup.AddObject("green",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[32768])),e.FColorLookup.AddObject("aqua",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[16776960])),e.FColorLookup.AddObject("yellow",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[65535])),e.FColorLookup.AddObject("fuchsia",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[16711935])),e.FColorLookup.AddObject("white",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[16777215])),e.FColorLookup.AddObject("lime",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[65280])),e.FColorLookup.AddObject("silver",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[12632256])),e.FColorLookup.AddObject("gray",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[8421504])),e.FColorLookup.AddObject("olive",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[32896])),e.FColorLookup.AddObject("navy",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[8388608])),e.FColorLookup.AddObject("purple",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[8388736])),e.FColorLookup.AddObject("teal",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[8421376])),e.FColorLookup.AddObject("orange",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[42495])),e.FColorLookup.AddObject("maroon",e.TTMSFNCPDFCoreLibBaseColor.$create("Create$1",[128])),e.FColorLookup.Sort()}}),["Classes","SysUtils","WEBLib.TMSFNCPDFCoreLibBase","WEBLib.TMSFNCUtils","Math"]),rtl.module("WEBLib.TMSFNCPDFGraphicsLib.General",["System"],(function(){"use strict";var t=this.$impl;this.RegisterPDFGraphicsLibGeneralService=function(){pas["WEBLib.TMSFNCPDFCoreLibBase"].TTMSFNCPDFLibPlatformServices.Current().SupportsPlatformService$1(rtl.getIntfGUIDR(pas["WEBLib.TMSFNCPDFGraphicsLib"].ITMSFNCPDFGraphicsLibGeneralService),{p:t,get:function(){return this.p.PDFGraphicsLibService},set:function(t){rtl.setIntfP(this.p,"PDFGraphicsLibService",t)}})||(rtl.setIntfP(t,"PDFGraphicsLibService",rtl.queryIntfT(t.TTMSFNCGeneralPDFGraphicsLibService.$create("Create$1"),pas["WEBLib.TMSFNCPDFGraphicsLib"].ITMSFNCPDFGraphicsLibGeneralService),!0),pas["WEBLib.TMSFNCPDFCoreLibBase"].TTMSFNCPDFLibPlatformServices.Current().AddPlatformService(rtl.getIntfGUIDR(pas["WEBLib.TMSFNCPDFGraphicsLib"].ITMSFNCPDFGraphicsLibGeneralService),t.PDFGraphicsLibService))},this.$implcode=function(){rtl.createClass(t,"TTMSFNCGeneralPDFGraphicsLibService",pas["WEBLib.TMSFNCPDFGraphicsLib"].TTMSFNCPDFGraphicsLibFactoryService,(function(){this.DoCreatePDFGraphicsLib=function(){return t.TTMSFNCGeneralPDFGraphicsLib.$create("Create$1")},rtl.addIntf(this,pas["WEBLib.TMSFNCPDFGraphicsLib"].ITMSFNCPDFGraphicsLibGeneralService),rtl.addIntf(this,pas.System.IUnknown)})),rtl.createClass(t,"TTMSFNCGeneralPDFGraphicsLib",pas["WEBLib.TMSFNCPDFCoreLibBase"].TTMSFNCPDFGraphicsLibBase,(function(){this.$init=function(){pas["WEBLib.TMSFNCPDFCoreLibBase"].TTMSFNCPDFGraphicsLibBase.$init.call(this),this.FPathRect=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),this.FOutput=null,this.FTextRect=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),this.FPDFRichTextLib=null,this.FPDFLib=null,this.FPageWidth=0,this.FPageHeight=0,this.FOnNotifyNewPage=null},this.$final=function(){this.FPathRect=void 0,this.FOutput=void 0,this.FTextRect=void 0,rtl.setIntfP(this,"FPDFRichTextLib",null),rtl.setIntfP(this,"FPDFLib",null),this.FOnNotifyNewPage=void 0,pas["WEBLib.TMSFNCPDFCoreLibBase"].TTMSFNCPDFGraphicsLibBase.$final.call(this)},this.GetOnNotifyNewPage=function(){return this.FOnNotifyNewPage},this.SetOnNotifyNewPage=function(t){this.FOnNotifyNewPage=t},this.SetAlignment$1=function(t){this.SetAlignment(t)},this.SetBitmapContainer$1=function(t){this.SetBitmapContainer(t)},this.SetLineBreakMode$1=function(t){this.SetLineBreakMode(t)},this.CreateClasses=function(){pas["WEBLib.TMSFNCPDFCoreLibBase"].TTMSFNCPDFGraphicsLibBase.CreateClasses.call(this)},this.InitializeAppearance=function(){},this.UpdateFill=function(){pas["WEBLib.TMSFNCPDFCoreLibBase"].TTMSFNCPDFGraphicsLibBase.UpdateFill.call(this)},this.UpdateStroke=function(){pas["WEBLib.TMSFNCPDFCoreLibBase"].TTMSFNCPDFGraphicsLibBase.UpdateStroke.call(this)},this.UpdateFont=function(){pas["WEBLib.TMSFNCPDFCoreLibBase"].TTMSFNCPDFGraphicsLibBase.UpdateFont.call(this),null!=this.FOutput&&null!=this.FOutput.FOnFontChanged&&this.FOutput.FOnFontChanged(this)},this.UpdatePathRect=function(t){(t.X<this.FPathRect.Left||-1===this.FPathRect.Left)&&(this.FPathRect.Left=t.X),(t.Y<this.FPathRect.Top||-1===this.FPathRect.Top)&&(this.FPathRect.Top=t.Y),(t.X>this.FPathRect.Right||-1===this.FPathRect.Right)&&(this.FPathRect.Right=t.X),(t.Y>this.FPathRect.Bottom||-1===this.FPathRect.Bottom)&&(this.FPathRect.Bottom=t.Y)},this.SetCanvas=function(t){this.FOutput=t},this.SetPDFLib=function(t){rtl.setIntfP(this,"FPDFLib",rtl.intfAsIntfT(t,pas["WEBLib.TMSFNCPDFLib"].ITMSFNCCustomPDFLib))},this.SetPageWidth=function(t){this.FPageWidth=t},this.SetPageHeight=function(t){this.FPageHeight=t},this.NotifyNewPage=function(){null!=this.GetOnNotifyNewPage()&&this.GetOnNotifyNewPage()(this)},this.SetPDFRichTextLib=function(t){rtl.setIntfP(this,"FPDFRichTextLib",t)},this.DrawRectangle=function(t){this.DrawSaveState(),this.DrawPathBegin(),this.DrawPathMoveToPoint(pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(t.Left,t.Top))),this.DrawPathAddLineToPoint(pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(t.Right,t.Top))),this.DrawPathAddLineToPoint(pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(t.Right,t.Bottom))),this.DrawPathAddLineToPoint(pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(t.Left,t.Bottom))),this.DrawPathClose(),-1!==this.FFill.FColor&&-1!==this.FStroke.FColor&&0!==this.FFill.FKind&&0!==this.FStroke.FKind?this.DrawPathEnd(4):-1!==this.FFill.FColor&&0!==this.FFill.FKind?this.DrawPathEnd(0):-1!==this.FStroke.FColor&&0!==this.FStroke.FKind&&this.DrawPathEnd(2),this.DrawRestoreState()},this.DrawEllipse=function(t){this.DrawSaveState(),this.DrawPathBegin(),this.DrawPathMoveToPoint(pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(t.Left,t.Top+(t.Bottom-t.Top)/2))),this.DrawPathAddEllipse(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(t)),this.DrawPathClose(),-1!==this.FFill.FColor&&-1!==this.FStroke.FColor&&0!==this.FFill.FKind&&0!==this.FStroke.FKind?this.DrawPathEnd(4):-1!==this.FFill.FColor&&0!==this.FFill.FKind?this.DrawPathEnd(0):-1!==this.FStroke.FColor&&0!==this.FStroke.FKind&&this.DrawPathEnd(2),this.DrawRestoreState()},this.DrawLine=function(t,e){0!==this.FStroke.FKind&&(this.DrawPathBegin(),this.DrawPathMoveToPoint(pas["WEBLib.TMSFNCTypes"].TPointF.$clone(t)),this.DrawPathAddLineToPoint(pas["WEBLib.TMSFNCTypes"].TPointF.$clone(e)),this.DrawPathEnd(2))},this.AddURL=function(t,e,i){var s=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),n=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),r=null;if(null!=this.FOutput){r=pas["WEBLib.TMSFNCPDFCoreLibBase"].TTMSFNCPDFGraphicsLibFont.$create("Create$1");try{r.Assign(this.FFont),this.FFont.Assign(this.FURLFont),s.$assign(this.DrawText$3(t,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(i),!1));var o=this.FAlignment;1===o?n.$assign(pas["WEBLib.TMSFNCTypes"].RectF(i.Left,this.FPageHeight-i.Top-(s.Bottom-s.Top),i.Left+(s.Right-s.Left),this.FPageHeight-i.Top)):0===o?n.$assign(pas["WEBLib.TMSFNCTypes"].RectF(i.Left+(i.Right-i.Left-(s.Right-s.Left))/2,this.FPageHeight-i.Top-(s.Bottom-s.Top),i.Left+(i.Right-i.Left-(s.Right-s.Left))/2+(s.Right-s.Left),this.FPageHeight-i.Top)):2===o&&n.$assign(pas["WEBLib.TMSFNCTypes"].RectF(i.Right-(s.Right-s.Left),this.FPageHeight-i.Top-(s.Bottom-s.Top),i.Right,this.FPageHeight-i.Top)),this.FOutput.NotifyURL(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(n),e),this.FFont.Assign(r)}finally{r=rtl.freeLoc(r)}}},this.DrawSaveState=function(){null!=this.FOutput&&this.FOutput.WriteString("q"+pas["WEBLib.TMSFNCPDFCoreLibBase"].PDFLB)},this.DrawSetTransform$1=function(t){null!=this.FOutput&&this.FOutput.WriteMatrix$1(t.m11,t.m12,t.m21,t.m22,t.m31,t.m32)},this.DrawRestoreState=function(){null!=this.FOutput&&this.FOutput.WriteString("Q"+pas["WEBLib.TMSFNCPDFCoreLibBase"].PDFLB)},this.DrawPathBegin=function(){var t="";null!=this.FOutput&&(this.FPathRect.$assign(pas["WEBLib.TMSFNCTypes"].RectF(-1,-1,-1,-1)),this.FOutput.WriteString("n"+pas["WEBLib.TMSFNCPDFCoreLibBase"].PDFLB),-1!==this.FStroke.FColor&&0!==this.FStroke.FKind&&this.FOutput.WriteStrokeColor(this.FStroke.FColor),-1!==this.FFill.FColor&&0!==this.FFill.FKind&&(this.FFill.FColorTo!==this.FFill.FColor&&-1!==this.FFill.FColorTo&&2===this.FFill.FKind?(t="",this.FOutput.NotifyShading(this.FFill.FColor,this.FFill.FColorTo,this.FFill.FOrientation,{get:function(){return t},set:function(e){t=e}}),this.FOutput.WriteString("/Pattern cs"+pas["WEBLib.TMSFNCPDFCoreLibBase"].PDFLB),this.FOutput.WriteString(t+" scn"+pas["WEBLib.TMSFNCPDFCoreLibBase"].PDFLB)):this.FOutput.WriteFillColor(this.FFill.FColor)),this.FStroke.FWidth>0&&this.FOutput.WriteStrokeWidth(this.FStroke.FWidth),this.FOutput.WriteStrokeKind(this.FStroke.FKind))},this.DrawPathBeginClip=function(){null!=this.FOutput&&this.FOutput.WriteString("W"+pas["WEBLib.TMSFNCPDFCoreLibBase"].PDFLB)},this.DrawPathMoveToPoint=function(t){var e=pas["WEBLib.TMSFNCTypes"].TPointF.$new();null!=this.FOutput&&(e.X=t.X,e.Y=this.FPageHeight-t.Y,this.UpdatePathRect(pas["WEBLib.TMSFNCTypes"].TPointF.$clone(e)),this.FOutput.MoveTo(pas["WEBLib.TMSFNCTypes"].TPointF.$clone(e)))},this.DrawPathAddLineToPoint=function(t){var e=pas["WEBLib.TMSFNCTypes"].TPointF.$new();null!=this.FOutput&&(e.X=t.X,e.Y=this.FPageHeight-t.Y,this.UpdatePathRect(pas["WEBLib.TMSFNCTypes"].TPointF.$clone(e)),this.FOutput.LineTo(pas["WEBLib.TMSFNCTypes"].TPointF.$clone(e)))},this.DrawPathAddRectangle=function(t){var e=0,i=0,s=0,n=0;null!=this.FOutput&&(s=t.Right-t.Left,n=t.Bottom-t.Top,e=t.Left,i=this.FPageHeight-t.Top-n,this.UpdatePathRect(pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(e,i))),this.UpdatePathRect(pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(e+s,i+n))),this.FOutput.WriteRectangle(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(pas["WEBLib.TMSFNCTypes"].RectF(e,i,e+s,i+n))))},this.DrawPathAddEllipse=function(t){var e=0,i=0,s=0,n=0,r=0,o=0,a=0,l=0,h=0;null!=this.FOutput&&(a=t.Right-t.Left,l=t.Bottom-t.Top,e=t.Left,i=this.FPageHeight-t.Top-l,h=4/3*(Math.sqrt(2)-1),r=e+(s=a/2),o=i+(n=l/2),this.UpdatePathRect(pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(e,i))),this.UpdatePathRect(pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(e+a,i+l))),this.FOutput.CurveTo(e,o-n*h,r-s*h,i,r,i),this.FOutput.CurveTo(r+s*h,i,e+a,o-n*h,e+a,o),this.FOutput.CurveTo(e+a,o+n*h,r+s*h,i+l,r,i+l),this.FOutput.CurveTo(r-s*h,i+l,e,o+n*h,e,o))},this.DrawPathClose=function(){null!=this.FOutput&&this.FOutput.WriteString("h"+pas["WEBLib.TMSFNCPDFCoreLibBase"].PDFLB)},this.DrawPathEnd=function(t){if(null!=this.FOutput){var e=t;0===e||1===e?(1===t&&this.DrawPathClose(),this.FOutput.WriteString("f"+pas["WEBLib.TMSFNCPDFCoreLibBase"].PDFLB)):2===e||3===e?(3===t&&this.DrawPathClose(),this.FOutput.WriteString("S"+pas["WEBLib.TMSFNCPDFCoreLibBase"].PDFLB)):4!==e&&5!==e||(5===t&&this.DrawPathClose(),this.FOutput.WriteString("B"+pas["WEBLib.TMSFNCPDFCoreLibBase"].PDFLB)),this.FFill.FColorTo!==this.FFill.FColor&&-1!==this.FFill.FColorTo&&2===this.FFill.FKind&&this.FOutput.NotifyShadingRect(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(this.FPathRect))}},this.CalculateText$1=function(t,e){var i=pas["WEBLib.TMSFNCTypes"].TRectF.$new();return i.$assign(this.DrawText$3(t,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(e),!0)),i},this.DrawImage$2=function(t,e,i,s,n,r,o){var a=pas["WEBLib.TMSFNCTypes"].TRectF.$new();return a.$assign(this.DrawImage$3(t,16777215,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(e),i,s,n,r,o)),a},this.DrawImage$3=function(t,e,i,s,n,r,o,a){var l=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),h="",F=pas["WEBLib.TMSFNCTypes"].TPointF.$new(),p=pas["WEBLib.TMSFNCTypes"].TSizeF.$new(),c=0,u=0,d=0,S=0,C=pas["WEBLib.TMSFNCTypes"].TRectF.$new();return null!=this.FOutput&&null!=t&&(h="",c=0,u=0,d=0,S=0,pas["WEBLib.TMSFNCPDFCoreLibBase"].GetAspectSize({get:function(){return c},set:function(t){c=t}},{get:function(){return u},set:function(t){u=t}},{get:function(){return d},set:function(t){d=t}},{get:function(){return S},set:function(t){S=t}},t.GetWidth(),t.GetHeight(),i.Right-i.Left,i.Bottom-i.Top,n,s,!1),a?(c=i.Left+(i.Right-i.Left-d)/2,u=i.Top+(i.Bottom-i.Top-S)/2):(c=i.Left,u=i.Top),C.$assign(pas["WEBLib.TMSFNCTypes"].RectF(c,u,c+d,u+S)),l.$assign(C),this.FOutput.NotifyBitmap(t,r,o,e,{get:function(){return h},set:function(t){h=t}}),F.X=C.Left,F.Y=this.FPageHeight-C.Top-(C.Bottom-C.Top),p.cx=C.Right-C.Left,p.cy=C.Bottom-C.Top,this.DrawSaveState(),this.FOutput.WriteMatrix(pas["WEBLib.TMSFNCTypes"].TPointF.$clone(F),pas["WEBLib.TMSFNCTypes"].TSizeF.$clone(p)),this.FOutput.WriteString(h+" Do"+pas["WEBLib.TMSFNCPDFCoreLibBase"].PDFLB),this.DrawRestoreState()),l},this.DrawHTMLText$1=function(t,e,i,s,n){var r=pas["WEBLib.TMSFNCTypes"].TRectF.$new();return this.FTextRect.$assign(pas["WEBLib.TMSFNCPDFGraphicsLibHTMLEngine"].TTMSFNCPDFGraphicsLibHTMLEngine.DrawHTMLText(this.FPDFLib,t,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(e),this.FBitmapContainer,i,s,n)),r.$assign(this.FTextRect),r},this.DrawText=function(t,e,i,s,n){var r=[],o=0;r=rtl.arraySetLength(r,pas["WEBLib.TMSFNCTypes"].TRectF,i);for(var a=0,l=i-1;a<=l;a++)r[o=a].$assign(pas["WEBLib.TMSFNCTypes"].RectF(e.Left+(e.Right-e.Left)/i*o,e.Top,e.Left+(e.Right-e.Left)/i*(o+1),e.Bottom));return this.DrawText$1(t,rtl.arrayRef(r),s,n)},this.DrawText$1=function(t,e,i,s){var n=0,r=0,o=0,a="",l="",h="",F=0,p=0,c=0,u=!1,d=0,S=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),C=0,T=0,m=0,g="";if(n=0,null!=this.FOutput){this.IsUnicodeText(t)?this.FOutput.NotifyUnicode(t):this.FOutput.NotifyText(t);for(var f=0,b=rtl.length(e)-1;f<=b;f++){for(r=f,S.$assign(e[r]),pas["WEBLib.TMSFNCTypes"].InflateRectEx(S,-i,0),S.Top=this.FPageHeight-S.Top-this.FOutput.FFontSize,S.Bottom=this.FPageHeight-S.Bottom-this.FOutput.FFontSize,c=0,o=1,a=this.FindNextWord(t,{get:function(){return o},set:function(t){o=t}}),g=t,pas.System.Delete({get:function(){return g},set:function(t){g=t}},1,o-1),t=g,p=this.MeasureTextWidth(a),C=this.FOutput.FFontSize,c+=p,a.length>0&&" "===a.charAt(a.length-1)&&(c+=this.FOutput.FFontWordSpacing);t.length>0;){if((F=a.length)>=2&&("\n"===a.charAt(F-1)&&"\r"===a.charAt(F-1-1)||"\r"===a.charAt(F-1)&&"\n"===a.charAt(F-1-1))?(a=pas.System.Copy(a,1,F-2),u=!0):F>=1&&"\n"===a.charAt(F-1)||"\r"===a.charAt(F-1)?(a=pas.System.Copy(a,1,F-1),u=!0):u=!1,o=1,l=this.FindNextWord(t,{get:function(){return o},set:function(t){o=t}}),g=t,pas.System.Delete({get:function(){return g},set:function(t){g=t}},1,o-1),t=g,p=this.MeasureTextWidth(l),S.Left+c+p>S.Right||u){if(""!==a){if(d=this.GetCharacterCount(a,S.Right-S.Left),h=pas.System.Copy(a,1,d),!s){this.FOutput.BeginText(),this.FOutput.WriteFont(),this.FOutput.WriteFontColor(),this.FOutput.WriteFontLeading();var y=this.FAlignment;if(1===y?this.FOutput.MoveTextTo(pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(S.Left,S.Top))):0===y?this.FOutput.MoveTextTo(pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(S.Left+(S.Right-S.Left-c)/2,S.Top))):2===y&&this.FOutput.MoveTextTo(pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(S.Right-c,S.Top))),this.FOutput.AddText(h),this.FOutput.EndText(),T=this.FStroke.FColor,m=this.FStroke.FWidth,this.FStroke.SetColor(this.FFont.FColor),this.FStroke.SetWidth(.05*this.FFont.FSize),3 in this.FFont.FStyle){var L=this.FAlignment;1===L?this.DrawLine(pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(S.Left,this.FPageHeight-S.Top-C+1.4*C*.8)),pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(S.Left+c,this.FPageHeight-S.Top-C+1.4*C*.8))):0===L?this.DrawLine(pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(S.Left+(S.Right-S.Left-c)/2,this.FPageHeight-S.Top-C+1.4*C*.8)),pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(S.Left+(S.Right-S.Left-c)/2+c,this.FPageHeight-S.Top-C+1.4*C*.8))):2===L&&this.DrawLine(pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(S.Right-c,this.FPageHeight-S.Top-C+1.4*C*.8)),pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(S.Right,this.FPageHeight-S.Top-C+1.4*C*.8)))}if(2 in this.FFont.FStyle){var M=this.FAlignment;1===M?this.DrawLine(pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(S.Left,this.FPageHeight-S.Top-C+1.4*C*.5)),pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(S.Left+c,this.FPageHeight-S.Top-C+1.4*C*.5))):0===M?this.DrawLine(pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(S.Left+(S.Right-S.Left-c)/2,this.FPageHeight-S.Top-C+1.4*C*.5)),pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(S.Left+(S.Right-S.Left-c)/2+c,this.FPageHeight-S.Top-C+1.4*C*.5))):2===M&&this.DrawLine(pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(S.Right-c,this.FPageHeight-S.Top-C+1.4*C*.5)),pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(S.Right,this.FPageHeight-S.Top-C+1.4*C*.5)))}this.FStroke.SetColor(T),this.FStroke.SetWidth(m)}c=0}if(a="",S.Top=S.Top-1.4*this.FOutput.FFontSize,pas.System.Int(S.Top)<pas.System.Int(S.Bottom+1.4*this.FOutput.FFontSize)){t=l+t;break}}c+=p,l.length>0&&" "===l.charAt(l.length-1)&&(c+=this.FOutput.FFontWordSpacing),a+=l}if(""!==a&&(d=this.GetCharacterCount(a,S.Right-S.Left),h=pas.System.Copy(a,1,d),!s)){this.FOutput.BeginText(),this.FOutput.WriteFont(),this.FOutput.WriteFontColor(),this.FOutput.WriteFontLeading();var E=this.FAlignment;if(1===E?this.FOutput.MoveTextTo(pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(S.Left,S.Top))):0===E?this.FOutput.MoveTextTo(pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(S.Left+(S.Right-S.Left-c)/2,S.Top))):2===E&&this.FOutput.MoveTextTo(pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(S.Right-c,S.Top))),this.FOutput.AddText(h),this.FOutput.EndText(),T=this.FStroke.FColor,m=this.FStroke.FWidth,this.FStroke.SetColor(this.FFont.FColor),this.FStroke.SetWidth(.05*this.FFont.FSize),3 in this.FFont.FStyle){var P=this.FAlignment;1===P?this.DrawLine(pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(S.Left,this.FPageHeight-S.Top-C+1.4*C*.8)),pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(S.Left+c,this.FPageHeight-S.Top-C+1.4*C*.8))):0===P?this.DrawLine(pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(S.Left+(S.Right-S.Left-c)/2,this.FPageHeight-S.Top-C+1.4*C*.8)),pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(S.Left+(S.Right-S.Left-c)/2+c,this.FPageHeight-S.Top-C+1.4*C*.8))):2===P&&this.DrawLine(pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(S.Right-c,this.FPageHeight-S.Top-C+1.4*C*.8)),pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(S.Right,this.FPageHeight-S.Top-C+1.4*C*.8)))}if(2 in this.FFont.FStyle){var B=this.FAlignment;1===B?this.DrawLine(pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(S.Left,this.FPageHeight-S.Top-C+1.4*C*.5)),pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(S.Left+c,this.FPageHeight-S.Top-C+1.4*C*.5))):0===B?this.DrawLine(pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(S.Left+(S.Right-S.Left-c)/2,this.FPageHeight-S.Top-C+1.4*C*.5)),pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(S.Left+(S.Right-S.Left-c)/2+c,this.FPageHeight-S.Top-C+1.4*C*.5))):2===B&&this.DrawLine(pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(S.Right-c,this.FPageHeight-S.Top-C+1.4*C*.5)),pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(S.Right,this.FPageHeight-S.Top-C+1.4*C*.5)))}this.FStroke.SetColor(T),this.FStroke.SetWidth(m)}}n=t.length}return n},this.DrawText$2=function(t,e,i){var s=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),n=pas["WEBLib.TMSFNCTypes"].TPointF.$new(),r=0,o=0,a=0,l=0;return pas.System.Pos("\r",t)>0||pas.System.Pos("\n",t)>0?s.$assign(this.DrawText$3(t,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(pas["WEBLib.TMSFNCTypes"].RectF(e.X,e.Y,e.X+1e4,e.Y+1e4)),i)):null!=this.FOutput&&(this.IsUnicodeText(t)?this.FOutput.NotifyUnicode(t):this.FOutput.NotifyText(t),r=this.MeasureTextWidth(t),o=this.FOutput.FFontSize,i||(n.X=e.X,n.Y=this.FPageHeight-e.Y-o,this.FOutput.BeginText(),this.FOutput.WriteFont(),this.FOutput.WriteFontColor(),this.FOutput.MoveTextTo(pas["WEBLib.TMSFNCTypes"].TPointF.$clone(n)),this.FOutput.AddText(t),this.FOutput.EndText(),a=this.FStroke.FColor,l=this.FStroke.FWidth,this.FStroke.SetColor(this.FFont.FColor),this.FStroke.SetWidth(.05*this.FFont.FSize),3 in this.FFont.FStyle&&this.DrawLine(pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(e.X,e.Y+1.4*o*.8)),pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(e.X+r,e.Y+1.4*o*.8))),2 in this.FFont.FStyle&&this.DrawLine(pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(e.X,e.Y+1.4*o*.5)),pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(e.X+r,e.Y+1.4*o*.5))),this.FStroke.SetColor(a),this.FStroke.SetWidth(l)),this.FTextRect.$assign(pas["WEBLib.TMSFNCTypes"].RectF(e.X,e.Y,e.X+r,e.Y+1.4*o)),s.$assign(this.FTextRect)),s},this.DrawText$3=function(t,e,i){var s=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),n=0,r="",o="",a="",l=0,h=0,F=0,p=!1,c=0,u=0,d=0,S=0,C=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),T=0,m=0;if(C.$assign(e),null!=this.FOutput){for(this.IsUnicodeText(t)?this.FOutput.NotifyUnicode(t):this.FOutput.NotifyText(t),e.Top=this.FPageHeight-e.Top-this.FOutput.FFontSize,e.Bottom=this.FPageHeight-e.Bottom-this.FOutput.FFontSize,F=0,n=1,S=0,u=0,r=this.FindNextWord(t,{get:function(){return n},set:function(t){n=t}}),h=this.MeasureTextWidth(r),d=this.FOutput.FFontSize,F+=h,r.length>0&&" "===r.charAt(r.length-1)&&(F+=this.FOutput.FFontWordSpacing);n<=t.length;){if((l=r.length)>=2&&("\n"===r.charAt(l-1)&&"\r"===r.charAt(l-1-1)||"\r"===r.charAt(l-1)&&"\n"===r.charAt(l-1-1))?(r=pas.System.Copy(r,1,l-2),p=!0):l>=1&&("\n"===r.charAt(l-1)||"\r"===r.charAt(l-1))?(r=pas.System.Copy(r,1,l-1),p=!0):p=!1,o=this.FindNextWord(t,{get:function(){return n},set:function(t){n=t}}),h=this.MeasureTextWidth(o),e.Left+F+h>e.Right||p){if(""!==r){if(c=this.GetCharacterCount(r,e.Right-e.Left),a=pas.System.Copy(r,1,c),S+=1,F>u&&(u=F),!i){this.FOutput.BeginText(),this.FOutput.WriteFont(),this.FOutput.WriteFontColor(),this.FOutput.WriteFontLeading();var g=this.FAlignment;if(1===g?this.FOutput.MoveTextTo(pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(e.Left,e.Top))):0===g?this.FOutput.MoveTextTo(pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(e.Left+(e.Right-e.Left-F)/2,e.Top))):2===g&&this.FOutput.MoveTextTo(pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(e.Right-F,e.Top))),this.FOutput.AddText(a),this.FOutput.EndText(),T=this.FStroke.FColor,m=this.FStroke.FWidth,this.FStroke.SetColor(this.FFont.FColor),this.FStroke.SetWidth(.05*this.FFont.FSize),3 in this.FFont.FStyle){var f=this.FAlignment;1===f?this.DrawLine(pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(e.Left,this.FPageHeight-e.Top-d+1.4*d*.8)),pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(e.Left+F,this.FPageHeight-e.Top-d+1.4*d*.8))):0===f?this.DrawLine(pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(e.Left+(e.Right-e.Left-F)/2,this.FPageHeight-e.Top-d+1.4*d*.8)),pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(e.Left+(e.Right-e.Left-F)/2+F,this.FPageHeight-e.Top-d+1.4*d*.8))):2===f&&this.DrawLine(pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(e.Right-F,this.FPageHeight-e.Top-d+1.4*d*.8)),pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(e.Right,this.FPageHeight-e.Top-d+1.4*d*.8)))}if(2 in this.FFont.FStyle){var b=this.FAlignment;1===b?this.DrawLine(pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(e.Left,this.FPageHeight-e.Top-d+1.4*d*.5)),pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(e.Left+F,this.FPageHeight-e.Top-d+1.4*d*.5))):0===b?this.DrawLine(pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(e.Left+(e.Right-e.Left-F)/2,this.FPageHeight-e.Top-d+1.4*d*.5)),pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(e.Left+(e.Right-e.Left-F)/2+F,this.FPageHeight-e.Top-d+1.4*d*.5))):2===b&&this.DrawLine(pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(e.Right-F,this.FPageHeight-e.Top-d+1.4*d*.5)),pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(e.Right,this.FPageHeight-e.Top-d+1.4*d*.5)))}this.FStroke.SetColor(T),this.FStroke.SetWidth(m)}F=0}if(r="",e.Top=e.Top-1.4*this.FOutput.FFontSize,pas.System.Int(e.Top)<pas.System.Int(e.Bottom+1.4*this.FOutput.FFontSize)&&!i)break}F+=h,o.length>0&&" "===o.charAt(o.length-1)&&(F+=this.FOutput.FFontWordSpacing),r+=o}if(""!==r)for(c=this.GetCharacterCount(r,e.Right-e.Left);c>0;){if(a=pas.System.Copy(r,1,c),pas.System.Delete({get:function(){return r},set:function(t){r=t}},1,c),S+=1,F>u&&(u=F),!i){this.FOutput.BeginText(),this.FOutput.WriteFont(),this.FOutput.WriteFontColor(),this.FOutput.WriteFontLeading();var y=this.FAlignment;if(1===y?this.FOutput.MoveTextTo(pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(e.Left,e.Top))):0===y?this.FOutput.MoveTextTo(pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(e.Left+(e.Right-e.Left-F)/2,e.Top))):2===y&&this.FOutput.MoveTextTo(pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(e.Right-F,e.Top))),this.FOutput.AddText(a),this.FOutput.EndText(),T=this.FStroke.FColor,m=this.FStroke.FWidth,this.FStroke.SetColor(this.FFont.FColor),this.FStroke.SetWidth(.05*this.FFont.FSize),3 in this.FFont.FStyle){var L=this.FAlignment;1===L?this.DrawLine(pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(e.Left,this.FPageHeight-e.Top-d+1.4*d*.8)),pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(e.Left+F,this.FPageHeight-e.Top-d+1.4*d*.8))):0===L?this.DrawLine(pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(e.Left+(e.Right-e.Left-F)/2,this.FPageHeight-e.Top-d+1.4*d*.8)),pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(e.Left+(e.Right-e.Left-F)/2+F,this.FPageHeight-e.Top-d+1.4*d*.8))):2===L&&this.DrawLine(pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(e.Right-F,this.FPageHeight-e.Top-d+1.4*d*.8)),pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(e.Right,this.FPageHeight-e.Top-d+1.4*d*.8)))}if(2 in this.FFont.FStyle){var M=this.FAlignment;1===M?this.DrawLine(pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(e.Left,this.FPageHeight-e.Top-d+1.4*d*.5)),pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(e.Left+F,this.FPageHeight-e.Top-d+1.4*d*.5))):0===M?this.DrawLine(pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(e.Left+(e.Right-e.Left-F)/2,this.FPageHeight-e.Top-d+1.4*d*.5)),pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(e.Left+(e.Right-e.Left-F)/2+F,this.FPageHeight-e.Top-d+1.4*d*.5))):2===M&&this.DrawLine(pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(e.Right-F,this.FPageHeight-e.Top-d+1.4*d*.5)),pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(e.Right,this.FPageHeight-e.Top-d+1.4*d*.5)))}this.FStroke.SetColor(T),this.FStroke.SetWidth(m)}c=this.GetCharacterCount(r,e.Right-e.Left),e.Top=e.Top-1.4*this.FOutput.FFontSize}this.FTextRect.$assign(pas["WEBLib.TMSFNCTypes"].RectF(C.Left,C.Top,C.Left+u,C.Top+S*this.FOutput.FFontSize*1.4)),s.$assign(this.FTextRect)}return s},this.FindNextWord=function(t,e){var i,s="",n=0;if(s="",i=t.length,e.get()>i)return s;for(1,n=e.get();;){if(n-1>=1&&"\n"===t.charAt(n-1)&&"\r"===t.charAt(n-1-1)||n-1>=1&&"\r"===t.charAt(n-1)&&"\n"===t.charAt(n-1-1)||" "===t.charAt(n-1)){s=" "===t.charAt(n-1)?pas.System.Copy(t,e.get(),n-(e.get()-1)):pas.System.Copy(t,e.get(),n-e.get());break}if("\n"===t.charAt(n-1)||"\r"===t.charAt(n-1)||" "===t.charAt(n-1)){s=pas.System.Copy(t,e.get(),n-(e.get()-1));break}if(n>=i){s=pas.System.Copy(t,e.get(),n-(e.get()-1));break}n+=1}return e.set(n+1),s},this.MeasureTextWidth=function(t){var e=0,i=0,s="",n=0;e=0;for(var r=1,o=t.length;r<=o;r++)i=r,"\n"!==t.charAt(i-1)&&"\r"!==t.charAt(i-1)&&(s=t.charAt(i-1),(n=this.FOutput.GetFontCharWidth(t,i)*this.FOutput.FFontSize/1e3)>0?n+=this.FOutput.FFontCharSpacing:n=0," "===s&&this.FOutput.FFontWordSpacing>0&&i!==t.length&&(n+=this.FOutput.FFontWordSpacing),e+=n);return e-=this.FOutput.FFontCharSpacing},this.GetCharacterCount=function(t,e){var i=0,s=0,n="",r=0,o=0;i=0,o=0;for(var a=1,l=t.length;a<=l&&(s=a,n=t.charAt(s-1),(r=this.FOutput.GetFontCharWidth(t,s)*this.FOutput.FFontSize/1e3)>0?r+=this.FOutput.FFontCharSpacing:r=0," "===n&&this.FOutput.FFontWordSpacing>0&&s!==t.length&&(r+=this.FOutput.FFontWordSpacing),!((o+=r)>e));a++)i+=1;return i},this.IsUnicodeText=function(t){var e=!1;return e=!1,null!=this.FOutput&&(e=this.FOutput.IsUnicodeString(t)),e},this.GetFill=function(){return this.FFill},this.GetStroke=function(){return this.FStroke},this.GetAlignment=function(){return this.FAlignment},this.GetFont=function(){return this.FFont},this.GetURLFont=function(){return this.FURLFont},this.GetLineBreakMode=function(){return this.FLineBreakMode},this.Destroy=function(){this.FOutput=null,pas["WEBLib.TMSFNCPDFCoreLibBase"].TTMSFNCPDFGraphicsLibBase.Destroy.call(this)},rtl.addIntf(this,pas["WEBLib.TMSFNCPDFGraphicsLib"].ITMSFNCCustomPDFGraphicsLib,{SetFill:"SetFill$1",SetStroke:"SetStroke$1",SetFont:"SetFont$1",SetURLFont:"SetURLFont$1",SetLineBreakMode:"SetLineBreakMode$1",SetBitmapContainer:"SetBitmapContainer$1",SetAlignment:"SetAlignment$1"}),rtl.addIntf(this,pas["WEBLib.TMSFNCPDFGraphicsLib"].ITMSFNCCustomPDFInitializationLib),rtl.addIntf(this,pas["WEBLib.TMSFNCPDFGraphicsLib"].ITMSFNCCustomPDFGraphicsExLib),rtl.addIntf(this,pas.System.IUnknown)})),t.PDFGraphicsLibService=null}}),["Classes","WEBLib.TMSFNCPDFGraphicsLib","SysUtils","WEBLib.TMSFNCTypes","WEBLib.Graphics","WEBLib.TMSFNCPDFLib","WEBLib.TMSFNCPDFRichTextLib","WEBLib.TMSFNCPDFCoreLibBase","WEBLib.TMSFNCPDFGraphicsLibHTMLEngine","WEBLib.TMSFNCUtils","WEBLib.TMSFNCBitmapContainer","WEBLib.TMSFNCGraphicsTypes","Types"]),rtl.module("WEBLib.TMSFNCPDFGraphicsLib",["System","Classes","WEBLib.TMSFNCPDFCoreLibBase","WEBLib.TMSFNCPDFRichTextLib","WEBLib.TMSFNCTypes","WEBLib.TMSFNCBitmapContainer","WEBLib.TMSFNCGraphicsTypes"],(function(){"use strict";var t=this;rtl.createInterface(this,"ITMSFNCCustomPDFGraphicsLib","{EDB1C5AC-6E2B-4B0C-BA5C-884837A6DFF2}",["SetLineBreakMode","SetBitmapContainer","DrawRectangle","DrawEllipse","DrawLine","AddURL","DrawSetTransform$1","DrawSaveState","DrawRestoreState","DrawPathBegin","DrawPathBeginClip","DrawPathAddRectangle","SetAlignment","CalculateText$1","DrawImage$2","DrawImage$3","DrawHTMLText$1","DrawText","DrawText$1","DrawText$2","DrawText$3","GetAlignment","GetFill","GetStroke","GetFont","GetURLFont","GetLineBreakMode"],pas.System.IUnknown),rtl.createInterface(this,"ITMSFNCCustomPDFInitializationLib","{AAC3B710-EEBB-46BE-8450-3D70123B49CA}",["SetPDFLib","SetCanvas","SetPageWidth","SetPageHeight","SetOnNotifyNewPage","InitializeAppearance","NotifyNewPage"],pas.System.IUnknown),rtl.createInterface(this,"ITMSFNCCustomPDFGraphicsExLib","{4BA4B9BC-CBD2-4852-BE93-573753A37365}",["SetPDFRichTextLib"],pas.System.IUnknown),rtl.createInterface(this,"ITMSFNCPDFGraphicsLibGeneralService","{0F974932-4204-489D-95DE-DBEFF4DEF5D7}",["CreatePDFGraphicsLib"],pas.System.IUnknown),rtl.createClass(this,"TTMSFNCCustomPDFGraphicsLib",pas.Classes.TPersistent,(function(){this.$init=function(){pas.Classes.TPersistent.$init.call(this),this.FPDFGraphicsLib=null,this.FPDFGraphicsExLib=null,this.FPDFRichTextLib=null,this.FPDFInitializationLib=null},this.$final=function(){rtl.setIntfP(this,"FPDFGraphicsLib",null),rtl.setIntfP(this,"FPDFGraphicsExLib",null),this.FPDFRichTextLib=void 0,rtl.setIntfP(this,"FPDFInitializationLib",null),pas.Classes.TPersistent.$final.call(this)},this.Create$2=function(e){var i=null,s=null,n=rtl.createIntfRefs();try{pas["WEBLib.TMSFNCPDFCoreLibBase"].TTMSFNCPDFLibPlatformServices.Current().SupportsPlatformService$1(rtl.getIntfGUIDR(t.ITMSFNCPDFGraphicsLibGeneralService),{get:function(){return i},set:function(t){i=rtl.setIntfL(i,t)}})&&(s=i.CreatePDFGraphicsLib(),pas.SysUtils.Supports$3(s,t.ITMSFNCCustomPDFGraphicsLib.$guid,{p:this,get:function(){return this.p.FPDFGraphicsLib},set:function(t){this.p.FPDFGraphicsLib=t}}),pas.SysUtils.Supports$3(s,t.ITMSFNCCustomPDFGraphicsExLib.$guid,{p:this,get:function(){return this.p.FPDFGraphicsExLib},set:function(t){this.p.FPDFGraphicsExLib=t}}),pas.SysUtils.Supports$3(s,t.ITMSFNCCustomPDFInitializationLib.$guid,{p:this,get:function(){return this.p.FPDFInitializationLib},set:function(t){this.p.FPDFInitializationLib=t}}),this.FPDFGraphicsLib._AddRef(),this.FPDFGraphicsExLib._AddRef(),this.FPDFInitializationLib._AddRef()),this.FPDFRichTextLib=pas["WEBLib.TMSFNCPDFRichTextLib"].TTMSFNCPDFRichTextLib.$create("Create$1"),this.FPDFGraphicsExLib.SetPDFRichTextLib(n.ref(1,this.FPDFRichTextLib.GetPDFRichTextLib()))}finally{n.free(),rtl._Release(i),rtl._Release(this.FPDFGraphicsLib),rtl._Release(this.FPDFGraphicsExLib),rtl._Release(this.FPDFInitializationLib)}return this},this.Destroy=function(){null!=this.FPDFRichTextLib&&(rtl.free(this,"FPDFRichTextLib"),this.FPDFRichTextLib=null),null!=this.FPDFGraphicsLib&&rtl.setIntfP(this,"FPDFGraphicsLib",null),pas.System.TObject.Destroy.call(this)},this.GetPDFGraphicsLib=function(){var t=null,e=!1;try{t=rtl.setIntfL(t,this.FPDFGraphicsLib),e=!0}finally{e||rtl._Release(t)}return t},this.GetPDFGraphicsExLib=function(){var t=null,e=!1;try{t=rtl.setIntfL(t,this.FPDFGraphicsExLib),e=!0}finally{e||rtl._Release(t)}return t},this.GetPDFInitializationLib=function(){var t=null,e=!1;try{t=rtl.setIntfL(t,this.FPDFInitializationLib),e=!0}finally{e||rtl._Release(t)}return t}})),rtl.createClass(this,"TTMSFNCPDFGraphicsLibList",pas.Classes.TList,(function(){})),rtl.createClass(this,"TTMSFNCPDFGraphicsLibFactoryService",pas.System.TInterfacedObject,(function(){this.$init=function(){pas.System.TInterfacedObject.$init.call(this),this.FPDFGraphicsLibs=null},this.$final=function(){this.FPDFGraphicsLibs=void 0,pas.System.TInterfacedObject.$final.call(this)},this.CreatePDFGraphicsLib=function(){var t;return t=this.DoCreatePDFGraphicsLib(),this.FPDFGraphicsLibs.Add(t),t},this.Create$1=function(){return pas.System.TObject.Create.call(this),this.FPDFGraphicsLibs=t.TTMSFNCPDFGraphicsLibList.$create("Create$1"),this},this.Destroy=function(){pas.SysUtils.FreeAndNil({p:this,get:function(){return this.p.FPDFGraphicsLibs},set:function(t){this.p.FPDFGraphicsLibs=t}}),pas.System.TObject.Destroy.call(this)},rtl.addIntf(this,t.ITMSFNCPDFGraphicsLibGeneralService),rtl.addIntf(this,pas.System.IUnknown)})),rtl.createClass(this,"TTMSFNCPDFGraphicsLib",this.TTMSFNCCustomPDFGraphicsLib,(function(){})),t.$init=function(){pas["WEBLib.TMSFNCPDFGraphicsLib.General"].RegisterPDFGraphicsLibGeneralService()}}),["WEBLib.TMSFNCPDFGraphicsLib.General","SysUtils"]),rtl.module("WEBLib.TMSFNCPDFLib.General.WEB",["System","Classes","Types","WEBLib.TMSFNCPDFCoreLibBase","WEBLib.Graphics","WEBLib.TMSFNCTypes","WEBLib.TMSFNCUtils","contnrs"],(function(){"use strict";var t=this,e=t.$impl;rtl.recNewT(this,"TTMSFNCGeneralPDFLibFontMetrics",(function(){this.CapHeight=0,this.Ascent=0,this.Descent=0,this.ItalicAngle=0,this.Fixed=!1,this.TrueType=!1,this.$new=function(){var t=Object.create(this);return t.FontBox=pas.Types.TRect.$new(),t},this.$eq=function(t){return this.CapHeight===t.CapHeight&&this.Ascent===t.Ascent&&this.Descent===t.Descent&&this.FontBox.$eq(t.FontBox)&&this.ItalicAngle===t.ItalicAngle&&this.Fixed===t.Fixed&&this.TrueType===t.TrueType},this.$assign=function(t){return this.CapHeight=t.CapHeight,this.Ascent=t.Ascent,this.Descent=t.Descent,this.FontBox.$assign(t.FontBox),this.ItalicAngle=t.ItalicAngle,this.Fixed=t.Fixed,this.TrueType=t.TrueType,this}})),rtl.createClass(this,"TTMSFNCGeneralPDFLibFontItem",pas.System.TObject,(function(){this.$init=function(){pas.System.TObject.$init.call(this),this.FAscent=0,this.FBBox=pas.Types.TRect.$new(),this.FDescent=0,this.FCapHeight=0,this.FFileName="",this.FName="",this.FItalicAngle=0,this.FFixed=!1,this.FStyle={},this.FData=pas["WEBLib.TMSFNCUtils"].TTMSFNCUtilsFile.$new()},this.$final=function(){this.FBBox=void 0,this.FStyle=void 0,this.FData=void 0,pas.System.TObject.$final.call(this)}})),rtl.createClass(this,"TTMSFNCGeneralPDFLibFontItems",pas.contnrs.TObjectList,(function(){this.GetItem$1=function(t){return this.GetItem(t)}})),rtl.createClass(this,"TTMSFNCGeneralPDFLibInitializer",pas.System.TObject,(function(){this.$init=function(){pas.System.TObject.$init.call(this),this.FFontCol=null},this.$final=function(){this.FFontCol=void 0,pas.System.TObject.$final.call(this)},this.InternalInitializeFontProperties=function(t,i,s,n,r,o,a,l,h,F){var p=e.TTMSFNCGeneralPDFLibFontTableDirEntry.$new(),c=e.TTMSFNCGeneralPDFLibFontTableDirEntry.$new(),u=e.TTMSFNCGeneralPDFLibFontTableDirEntry.$new(),d=e.TTMSFNCGeneralPDFLibFontTableDirEntry.$new(),S=e.TTMSFNCGeneralPDFLibFontPostScript.$new(),C=e.TTMSFNCGeneralPDFLibFontHead.$new(),T=e.TTMSFNCGeneralPDFLibFontOS2Data.$new(),m=e.TTMSFNCGeneralPDFLibFontNameRecord.$new(),g=[],f=0,b=0,y=0,L=0,M=e.TTMSFNCGeneralPDFLibFontTableDir.$new(),E=[],P=[],B="";if(null!=t&&(t.SetPosition(0),0!==t.GetSize())){M.st=rtl.trunc(e.ReadUInt32(t,-1)/65536),M.nt=e.ReadUInt16(t,-1),M.sr=e.ReadUInt16(t,-1),M.es=e.ReadUInt16(t,-1),M.rs=e.ReadUInt16(t,-1),E=rtl.arraySetLength(E,e.TTMSFNCGeneralPDFLibFontTableDirEntry,M.nt);for(var D=0,N=M.nt-1;D<=N;D++)E[f=D].t=e.ReadString(t,4,-1),E[f].cs=e.ReadUInt32(t,-1),E[f].o=e.ReadUInt32(t,-1),E[f].l=e.ReadUInt32(t,-1);if(p.$assign(e.GetTableForName(e.TTMSFNCGeneralPDFLibFontTableDir.$clone(M),rtl.arrayRef(E),6)),p.o<=t.GetSize()){t.SetPosition(p.o),L=t.GetPosition(),e.ReadUInt16(t,-1),b=e.ReadUInt16(t,-1),y=e.ReadUInt16(t,-1),g=rtl.arraySetLength(g,e.TTMSFNCGeneralPDFLibFontNameEntry,b);for(var v=0,O=b-1;v<=O;v++)f=v,m.pID=e.ReadUInt16(t,-1),m.eID=e.ReadUInt16(t,-1),m.lID=e.ReadUInt16(t,-1),m.nID=e.ReadUInt16(t,-1),m.sl=e.ReadUInt16(t,-1),m.so=e.ReadUInt16(t,-1),g[f].i.$assign(m);for(var I=0,W=b-1;I<=W;I++){if(f=I,t.SetPosition(L+y+g[f].i.so),1===g[f].i.eID){P=rtl.arraySetLength(P,0,rtl.trunc(g[f].i.sl/2));for(var A=0,G=rtl.length(P)-1;A<=G;A++)P[A]=e.ReadUInt16(t,-1);B=String.fromCharCode.apply(null,P),g[f].v=B}else g[f].v=e.ReadString(t,g[f].i.sl,-1);""===i.get()&&1===g[f].i.nID&&1033===g[f].i.lID&&1===g[f].i.eID&&i.set(g[f].v)}}if(c.$assign(e.GetTableForName(e.TTMSFNCGeneralPDFLibFontTableDir.$clone(M),rtl.arrayRef(E),7)),c.o<=t.GetSize()&&(t.SetPosition(c.o),T.v=e.ReadUInt16(t,-1),T.xavgchw=e.ReadInt16(t,!0,-1),T.uswecl=e.ReadUInt16(t,-1),T.uswicl=e.ReadUInt16(t,-1),T.fst=e.ReadInt16(t,!0,-1),T.ysubxsize=e.ReadInt16(t,!0,-1),T.ysubysize=e.ReadInt16(t,!0,-1),T.ysubxoff=e.ReadInt16(t,!0,-1),T.ysubyoff=e.ReadInt16(t,!0,-1),T.ysupxsize=e.ReadInt16(t,!0,-1),T.ysupysize=e.ReadInt16(t,!0,-1),T.ysupxoff=e.ReadInt16(t,!0,-1),T.ysupyoff=e.ReadInt16(t,!0,-1),T.ystos=e.ReadInt16(t,!0,-1),T.ystop=e.ReadInt16(t,!0,-1),T.sfc=e.ReadInt16(t,!0,-1),T.pns=e.ReadBytes(t,10,-1),T.ulur1=e.ReadUInt32(t,-1),T.ulur2=e.ReadUInt32(t,-1),T.ulur3=e.ReadUInt32(t,-1),T.ulur4=e.ReadUInt32(t,-1),T.avndid=e.ReadString(t,4,-1),T.fssel=e.ReadUInt16(t,-1),T.usfchidx=e.ReadUInt16(t,-1),T.uslchidx=e.ReadUInt16(t,-1),T.stasc=e.ReadInt16(t,!0,-1),T.stdesc=e.ReadInt16(t,!0,-1),T.stlgap=e.ReadInt16(t,!0,-1),T.uswasc=e.ReadUInt16(t,-1),T.uswdesc=e.ReadUInt16(t,-1),T.v>=1&&(T.ulcpr1=e.ReadUInt32(t,-1),T.ulcpr2=e.ReadUInt32(t,-1)),T.v>=2&&(T.sxh=(65535&e.ReadUInt16(t,-1))<<16>>16,T.sch=(65535&e.ReadUInt16(t,-1))<<16>>16,T.usdc=e.ReadUInt16(t,-1),T.usbc=e.ReadUInt16(t,-1),T.usmaxct=e.ReadUInt16(t,-1)),s.set(0!=(32&T.fssel)),o.set(T.stasc),a.set(T.stdesc),T.v>=2?h.set(T.sch):h.set(o.get())),u.$assign(e.GetTableForName(e.TTMSFNCGeneralPDFLibFontTableDir.$clone(M),rtl.arrayRef(E),8)),u.o<t.GetSize()&&(t.SetPosition(u.o),S.ft=e.ReadFixed(t),S.ia=e.ReadInt32(t,-1),S.ups=e.ReadInt16(t,!0,-1),S.utck=e.ReadInt16(t,!0,-1),S.isfp=e.ReadUInt32(t,-1),S.minmtype42=e.ReadUInt32(t,-1),S.maxmtype42=e.ReadUInt32(t,-1),S.minmtype1=e.ReadUInt32(t,-1),S.maxmtype1=e.ReadUInt32(t,-1),l.set(S.ia/65536),n.set(0!==l.get()),r.set(0!==S.isfp)),d.$assign(e.GetTableForName(e.TTMSFNCGeneralPDFLibFontTableDir.$clone(M),rtl.arrayRef(E),1)),d.o<t.GetSize()){for(t.SetPosition(d.o),C.v=e.ReadFixed(t),C.fr=e.ReadFixed(t),C.csa=e.ReadUInt32(t,-1),C.mn=e.ReadUInt32(t,-1),C.f=e.ReadUInt16(t,-1),C.upe=e.ReadUInt16(t,-1),C.cd=e.ReadInt32(t,-1)+e.ReadInt32(t,-1),C.md=e.ReadInt32(t,-1)+e.ReadInt32(t,-1),f=0;f<=3;f++)C.bb[f]=e.ReadInt16(t,!0,-1);C.ms=e.ReadUInt16(t,-1),C.lrpp=e.ReadUInt16(t,-1),C.fdh=e.ReadInt16(t,!0,-1),C.ilf=e.ReadInt16(t,!0,-1),C.gldf=e.ReadInt16(t,!0,-1),F.$assign(pas.Types.Rect(C.bb[0],C.bb[3],C.bb[2],C.bb[1]))}}},this.Create$1=function(){var e=this;var i="",s=null,n=null,r=!1,o=!1,a=!1,l=pas.Types.TRect.$new(),h=0,F=0,p=0,c=0,u=0;this.FFontCol=t.TTMSFNCGeneralPDFLibFontItems.$create("Create$2"),function(){for(var i=null,s=null,n=0,r=0,o=pas["WEBLib.TMSFNCPDFLib"].GetFontCacheCount()-1;r<=o;r++)n=r,null!=(s=pas["WEBLib.TMSFNCPDFLib"].GetFontCacheItem(n))&&s.FLoaded&&((i=t.TTMSFNCGeneralPDFLibFontItem.$create("Create")).FFileName="",i.FData.$assign(s.FData),e.FFontCol.Add$1(i))}();for(var d=0,S=this.FFontCol.GetCount()-1;d<=S;d++){u=d,n=this.FFontCol.GetItem$1(u),i="",r=!1,o=!1,a=!1,h=0,F=0,p=0,c=0,l.$assign(pas.Types.Rect(0,0,0,0)),s=pas.Classes.TMemoryStream.$create("Create");try{s.Write(n.FData.Data,n.FData.Data.length),s.SetPosition(0),this.InternalInitializeFontProperties(s,{get:function(){return i},set:function(t){i=t}},{get:function(){return r},set:function(t){r=t}},{get:function(){return o},set:function(t){o=t}},{get:function(){return a},set:function(t){a=t}},{get:function(){return h},set:function(t){h=t}},{get:function(){return F},set:function(t){F=t}},{get:function(){return c},set:function(t){c=t}},{get:function(){return p},set:function(t){p=t}},l),n.FName=i,n.FStyle={},r&&(n.FStyle=rtl.unionSet(n.FStyle,rtl.createSet(0))),o&&(n.FStyle=rtl.unionSet(n.FStyle,rtl.createSet(1))),n.FFixed=a,n.FAscent=h,n.FDescent=F,n.FItalicAngle=c,n.FCapHeight=p,n.FBBox.$assign(l)}finally{s=rtl.freeLoc(s)}}return this},this.InitializeFontFallBackList=function(t){t.Add("Tahoma"),t.Add("SimSun"),t.Add("Arial Unicode MS")},this.Destroy=function(){null!=this.FFontCol&&(rtl.free(this,"FFontCol"),this.FFontCol=null),pas.System.TObject.Destroy.call(this)}})),rtl.createClass(this,"TTMSFNCGeneralPDFLibFontInitializer",pas.System.TObject,(function(){this.$init=function(){pas.System.TObject.$init.call(this),this.FTTFMetrics=t.TTMSFNCGeneralPDFLibFontMetrics.$new(),this.FTTFDataStream=null,this.FTTFFileStream=null,this.FTTFCreateFontPackage=!1,this.FTTFEmbed=null,this.FFullFont=!1,this.FBase="",this.FSize=0,this.FUsedCharArray=null,this.FGlyphIDs=null,this.FCharArray=pas["WEBLib.TMSFNCPDFCoreLibBase"].TTMSFNCPDFGraphicsLibFontCharArray.$new(),this.FCharWidths=[],this.FUnitsPerEm=0,this.FMainInitializer=null,this.FIsFixedWidth=!1},this.$final=function(){this.FTTFMetrics=void 0,this.FTTFDataStream=void 0,this.FTTFFileStream=void 0,this.FTTFEmbed=void 0,this.FUsedCharArray=void 0,this.FGlyphIDs=void 0,this.FCharArray=void 0,this.FCharWidths=void 0,this.FMainInitializer=void 0,pas.System.TObject.$final.call(this)},this.InternalInitializeCharWidths=function(t){var i=0,s=0,n=0,r=0,o=0,a=0,l=e.TTMSFNCGeneralPDFLibFontCmapHeader.$new(),h=e.TTMSFNCGeneralPDFLibFontCmapHead.$new(),F=e.TTMSFNCGeneralPDFLibFontCmapFormat4.$new(),p=e.TTMSFNCGeneralPDFLibFontMaxp.$new(),c=[],u=[],d=e.TTMSFNCGeneralPDFLibFontTableDirEntry.$new(),S=e.TTMSFNCGeneralPDFLibFontTableDirEntry.$new(),C=e.TTMSFNCGeneralPDFLibFontTableDirEntry.$new(),T=e.TTMSFNCGeneralPDFLibFontTableDirEntry.$new(),m=e.TTMSFNCGeneralPDFLibFontTableDirEntry.$new(),g=e.TTMSFNCGeneralPDFLibFontTableDir.$new(),f=[],b=0,y=0,L=0,M=0,E=0,P=0,B=[],D=[],N=[],v=0,O=[],I=0,W=0,A=0,G=0,$=0,R=0;if(null!=t&&(t.SetPosition(0),0!==t.GetSize())){g.st=rtl.trunc(e.ReadUInt32(t,-1)/65536),g.nt=e.ReadUInt16(t,-1),g.sr=e.ReadUInt16(t,-1),g.es=e.ReadUInt16(t,-1),g.rs=e.ReadUInt16(t,-1),f=rtl.arraySetLength(f,e.TTMSFNCGeneralPDFLibFontTableDirEntry,g.nt);for(var x=0,w=g.nt-1;x<=w;x++)f[i=x].t=e.ReadString(t,4,-1),f[i].cs=e.ReadUInt32(t,-1),f[i].o=e.ReadUInt32(t,-1),f[i].l=e.ReadUInt32(t,-1);if(S.$assign(e.GetTableForName(e.TTMSFNCGeneralPDFLibFontTableDir.$clone(g),rtl.arrayRef(f),3)),S.o<t.GetSize()&&(t.SetPosition(S.o),p.v=e.ReadFixed(t),p.ng=e.ReadUInt16(t,-1)),d.$assign(e.GetTableForName(e.TTMSFNCGeneralPDFLibFontTableDir.$clone(g),rtl.arrayRef(f),5)),d.o<=t.GetSize()){t.SetPosition(d.o),l.v=e.ReadUInt16(t,-1),l.n=e.ReadUInt16(t,-1),a=4294967295;for(var k=0,H=l.n-1;k<=H;k++)if(i=k,b=e.ReadUInt16(t,8*i),y=e.ReadUInt16(t,8*i+2),3===b)if(0===y)a=e.ReadUInt32(t,4+8*i);else if(1===y){a=e.ReadUInt32(t,4+8*i);break}if(0!==a&&0==(1&a)&&(t.SetPosition(d.o+a),d.o,F.fmt=e.ReadUInt16(t,-1),4===F.fmt)){F.l=e.ReadUInt16(t,-1),F.lng=e.ReadUInt16(t,-1),F.sgX2=e.ReadUInt16(t,-1),s=rtl.trunc(F.sgX2/2),F.shrange=e.ReadUInt16(t,-1),F.selr=e.ReadUInt16(t,-1),F.rng=e.ReadUInt16(t,-1);try{B=e.ReadUInt16Array(t,s),e.ReadUInt16(t,-1),D=e.ReadUInt16Array(t,s),N=e.ReadUInt16Array(t,s),v=t.GetPosition(),O=e.ReadUInt16Array(t,s),this.FCharArray.c=0,this.FCharArray.v=rtl.arraySetLength(this.FCharArray.v,0,0),this.FCharWidths=rtl.arraySetLength(this.FCharWidths,pas["WEBLib.TMSFNCPDFCoreLibBase"].TTMSFNCPDFGraphicsLibFontCharWidth,0),o=0;for(var U=0,j=s-1;U<=j;U++)if(I=D[i=U],W=B[i],A=N[i],$=v+2*i+(G=O[i]),65535!==I&&65535!==W)for(var V=I,z=W;V<=z;V++)L=V,0===G?(n=L+A&65535,o=Math.max(n,o),this.FCharArray.c+=1,this.FCharArray.v=rtl.arraySetLength(this.FCharArray.v,0,this.FCharArray.c),this.FCharWidths=rtl.arraySetLength(this.FCharWidths,pas["WEBLib.TMSFNCPDFCoreLibBase"].TTMSFNCPDFGraphicsLibFontCharWidth,this.FCharArray.c),this.FCharArray.v[this.FCharArray.c-1]=L,this.FCharWidths[this.FCharArray.c-1].g=n):(R=$+2*(L-I),t.SetPosition(R),0!==(r=e.ReadUInt16(t,-1))&&(r=r+A&65535,o=Math.max(r,o),this.FCharArray.c+=1,this.FCharArray.v=rtl.arraySetLength(this.FCharArray.v,0,this.FCharArray.c),this.FCharWidths=rtl.arraySetLength(this.FCharWidths,pas["WEBLib.TMSFNCPDFCoreLibBase"].TTMSFNCPDFGraphicsLibFontCharWidth,this.FCharArray.c),this.FCharArray.v[this.FCharArray.c-1]=L,this.FCharWidths[this.FCharArray.c-1].g=r));if(T.$assign(e.GetTableForName(e.TTMSFNCGeneralPDFLibFontTableDir.$clone(g),rtl.arrayRef(f),4)),T.o<=t.GetSize()&&(t.SetPosition(T.o),c=e.ReadBytes(t,T.l,-1),m.$assign(e.GetTableForName(e.TTMSFNCGeneralPDFLibFontTableDir.$clone(g),rtl.arrayRef(f),2)),m.o<=t.GetSize()&&(t.SetPosition(m.o),u=e.ReadBytes(t,m.l,-1),C.$assign(e.GetTableForName(e.TTMSFNCGeneralPDFLibFontTableDir.$clone(g),rtl.arrayRef(f),1)),C.o<=t.GetSize()&&(t.SetPosition(C.o),e.ReadBytes(t,18,-1),h.uem=e.ReadUInt16(t,-1),0!==(M=h.uem)))))if(this.FUnitsPerEm=M,E=rtl.trunc(1e3*e.GetUInt16(rtl.arrayRef(c),0)/M),this.FIsFixedWidth)for(var X=0,K=this.FCharArray.c-1;X<=K;X++)i=X,this.FCharWidths[i].w=E;else{P=e.GetUInt16(rtl.arrayRef(u),17);for(var J=0,Y=this.FCharArray.c-1;J<=Y;J++)i=J,0!==this.FCharWidths[i].g&&(this.FCharWidths[i].g<=P?this.FCharWidths[i].w=rtl.trunc(1e3*e.GetUInt16(rtl.arrayRef(c),2*this.FCharWidths[i].g)/M):this.FCharWidths[i].w=E)}}finally{}}}t.SetPosition(0)}},this.CompressFontStream=function(t){var e=null,i=null,s=null,n=null;if(e=null,0===t.GetSize())return e;i=pas["WEBLib.TMSFNCPDFCoreLibBase"].CreateStringStream("");try{n=pas["WEBLib.TMSFNCPDFCoreLibBase"].TCompressionStream.$create("Create$1",[3,i]);try{s=t,n.CopyFrom(s,0)}finally{n=rtl.freeLoc(n)}i.SetPosition(0),e=i}finally{}return e};var i=["OS/2","cmap","glyf","head","hhea","hmtx","loca","maxp","name","post"],s=[0,0,0],n=[0,0,0];this.InternalInitializeFontFile=function(){var t=this,r=e.TTMSFNCGeneralPDFLibFontTableDirEntry.$new(),o=e.TTMSFNCGeneralPDFLibFontTableDirEntry.$new(),a=e.TTMSFNCGeneralPDFLibFontTableDirEntry.$new(),l=e.TTMSFNCGeneralPDFLibFontTableDirEntry.$new(),h=e.TTMSFNCGeneralPDFLibFontTableDirEntry.$new(),F=e.TTMSFNCGeneralPDFLibFontTableDirEntry.$new(),p=e.TTMSFNCGeneralPDFLibFontTableDirEntry.$new(),c=e.TTMSFNCGeneralPDFLibFontTableDirEntry.$new(),u=e.TTMSFNCGeneralPDFLibFontTableDirEntry.$new(),d=e.TTMSFNCGeneralPDFLibFontTableDirEntry.$new(),S=e.TTMSFNCGeneralPDFLibFontOS2Data.$new(),C=e.TTMSFNCGeneralPDFLibFontPostScript.$new(),T=e.TTMSFNCGeneralPDFLibFontHead.$new(),m=e.TTMSFNCGeneralPDFLibFontHhea.$new(),g=e.TTMSFNCGeneralPDFLibFontMaxp.$new(),f=0,b=0,y=0,L=0,M=0,E=0,P=e.TTMSFNCGeneralPDFLibFontTableDir.$new(),B=[],D=null,N=null,v=null,O=[],I=[],W=0,A=0,G=[],$=[],R=[],x=[],w=[];function k(t,e){return pas.Math.CompareValue(t,e)}function H(t,i,s){var n,r=0,o=0;o=0;for(var a=0,l=rtl.length(s)-1;a<=l;a++)o+=(255&s[r=a])<<24-r%4*8;return o&=4294967295,n=e.StringToBytes(t),e.WriteBytes(v,rtl.arrayRef(n),0,4),e.WriteInt32(v,o),e.WriteInt32(v,i),e.WriteInt32(v,rtl.length(s)),e.BuildUInt32$1(rtl.arrayRef(n))+o+o+i+rtl.length(s)}if(null!=(D=this.FTTFFileStream)&&(D.SetPosition(0),0!==D.GetSize())){P.st=rtl.trunc(e.ReadUInt32(D,-1)/65536),P.nt=e.ReadUInt16(D,-1),P.sr=e.ReadUInt16(D,-1),P.es=e.ReadUInt16(D,-1),P.rs=e.ReadUInt16(D,-1),B=rtl.arraySetLength(B,e.TTMSFNCGeneralPDFLibFontTableDirEntry,P.nt);for(var U=0,j=P.nt-1;U<=j;U++)B[f=U].t=e.ReadString(D,4,-1),B[f].cs=e.ReadUInt32(D,-1),B[f].o=e.ReadUInt32(D,-1),B[f].l=e.ReadUInt32(D,-1);if(r.$assign(e.GetTableForName(e.TTMSFNCGeneralPDFLibFontTableDir.$clone(P),rtl.arrayRef(B),6)),o.$assign(e.GetTableForName(e.TTMSFNCGeneralPDFLibFontTableDir.$clone(P),rtl.arrayRef(B),7)),o.o<=D.GetSize()&&(D.SetPosition(o.o),S.v=e.ReadUInt16(D,-1),S.xavgchw=e.ReadInt16(D,!1,-1),S.uswecl=e.ReadUInt16(D,-1),S.uswicl=e.ReadUInt16(D,-1),S.fst=e.ReadInt16(D,!1,-1),S.ysubxsize=e.ReadInt16(D,!1,-1),S.ysubysize=e.ReadInt16(D,!1,-1),S.ysubxoff=e.ReadInt16(D,!1,-1),S.ysubyoff=e.ReadInt16(D,!1,-1),S.ysupxsize=e.ReadInt16(D,!1,-1),S.ysupysize=e.ReadInt16(D,!1,-1),S.ysupxoff=e.ReadInt16(D,!1,-1),S.ysupyoff=e.ReadInt16(D,!1,-1),S.ystos=e.ReadInt16(D,!1,-1),S.ystop=e.ReadInt16(D,!1,-1),S.sfc=e.ReadInt16(D,!1,-1),S.pns=e.ReadBytes(D,10,-1),S.ulur1=e.ReadUInt32(D,-1),S.ulur2=e.ReadUInt32(D,-1),S.ulur3=e.ReadUInt32(D,-1),S.ulur4=e.ReadUInt32(D,-1),S.avndid=e.ReadString(D,4,-1),S.fssel=e.ReadUInt16(D,-1),S.usfchidx=e.ReadUInt16(D,-1),S.uslchidx=e.ReadUInt16(D,-1),S.stasc=e.ReadInt16(D,!1,-1),S.stdesc=e.ReadInt16(D,!1,-1),S.stlgap=e.ReadInt16(D,!1,-1),S.uswasc=e.ReadUInt16(D,-1),S.uswdesc=e.ReadUInt16(D,-1)),a.$assign(e.GetTableForName(e.TTMSFNCGeneralPDFLibFontTableDir.$clone(P),rtl.arrayRef(B),8)),a.o<D.GetSize())if(D.SetPosition(a.o),C.ft=e.ReadFixed(D),C.ia=e.ReadInt32(D,-1),C.ups=e.ReadInt16(D,!1,-1),C.utck=e.ReadInt16(D,!1,-1),C.isfp=e.ReadUInt32(D,-1),C.minmtype42=e.ReadUInt32(D,-1),C.maxmtype42=e.ReadUInt32(D,-1),C.minmtype1=e.ReadUInt32(D,-1),C.maxmtype1=e.ReadUInt32(D,-1),C.ng=e.ReadUInt16(D,-1),1===C.ft)for(R=rtl.arraySetLength(R,"",rtl.length(e.MAC_GLYPH_NAMES)),f=0;f<=257;f++)R[f]=e.MAC_GLYPH_NAMES[f];else if(2===C.ft){R=rtl.arraySetLength(R,"",C.ng-1),L=-2147483648;for(var V=0,z=C.ng-1;V<=z;V++)f=V,y=e.ReadUInt16(D,-1),x[f]=y,y<=32767&&(L=Math.max(L,y));if(L>=rtl.length(e.MAC_GLYPH_NAMES)){w=rtl.arraySetLength(w,"",L-rtl.length(e.MAC_GLYPH_NAMES)+1);for(var X=0,K=rtl.length(w)-1;X<=K;X++)f=X,M=e.ReadUInt8(D,-1),w[f]=e.ReadString(D,M,-1)}for(var J=0,Y=C.ng-1;J<=Y;J++)(y=x[f=J])<rtl.length(e.MAC_GLYPH_NAMES)?R[f]=e.MAC_GLYPH_NAMES[y]:y>=rtl.length(e.MAC_GLYPH_NAMES)&&y<=32767?R[f]=w[y-rtl.length(e.MAC_GLYPH_NAMES)]:R[f]=".undefined"}if(u.$assign(e.GetTableForName(e.TTMSFNCGeneralPDFLibFontTableDir.$clone(P),rtl.arrayRef(B),4)),d.$assign(e.GetTableForName(e.TTMSFNCGeneralPDFLibFontTableDir.$clone(P),rtl.arrayRef(B),5)),l.$assign(e.GetTableForName(e.TTMSFNCGeneralPDFLibFontTableDir.$clone(P),rtl.arrayRef(B),1)),l.o<D.GetSize()){for(D.SetPosition(l.o),T.v=e.ReadFixed(D),T.fr=e.ReadFixed(D),T.csa=e.ReadUInt32(D,-1),T.mn=e.ReadUInt32(D,-1),T.f=e.ReadUInt16(D,-1),T.upe=e.ReadUInt16(D,-1),T.cd=e.ReadInt32(D,-1)+e.ReadInt32(D,-1),T.md=e.ReadInt32(D,-1)+e.ReadInt32(D,-1),f=0;f<=3;f++)T.bb[f]=e.ReadInt16(D,!1,-1);T.ms=e.ReadUInt16(D,-1),T.lrpp=e.ReadUInt16(D,-1),T.fdh=e.ReadInt16(D,!1,-1),T.ilf=e.ReadInt16(D,!1,-1),T.gldf=e.ReadInt16(D,!1,-1)}if(h.$assign(e.GetTableForName(e.TTMSFNCGeneralPDFLibFontTableDir.$clone(P),rtl.arrayRef(B),2)),h.o<D.GetSize()&&(D.SetPosition(h.o),m.v=e.ReadFixed(D),m.asc=e.ReadUInt16(D,-1),m.desc=e.ReadUInt16(D,-1),m.lg=e.ReadUInt16(D,-1),m.awm=e.ReadUInt16(D,-1),m.mlsb=e.ReadUInt16(D,-1),m.mrsb=e.ReadUInt16(D,-1),m.xme=e.ReadUInt16(D,-1),m.csr=e.ReadInt16(D,!1,-1),m.cslr=e.ReadInt16(D,!1,-1),m.co=e.ReadInt16(D,!1,-1),m.r1=e.ReadInt16(D,!1,-1),m.r2=e.ReadInt16(D,!1,-1),m.r3=e.ReadInt16(D,!1,-1),m.r4=e.ReadInt16(D,!1,-1),m.mdf=e.ReadInt16(D,!1,-1),m.nohm=e.ReadUInt16(D,-1)),F.$assign(e.GetTableForName(e.TTMSFNCGeneralPDFLibFontTableDir.$clone(P),rtl.arrayRef(B),3)),F.o<D.GetSize()&&(D.SetPosition(F.o),g.v=e.ReadFixed(D),g.ng=e.ReadUInt16(D,-1),g.mxp=e.ReadUInt16(D,-1),g.mxc=e.ReadUInt16(D,-1),g.mxcp=e.ReadUInt16(D,-1),g.mxcc=e.ReadUInt16(D,-1),g.mxz=e.ReadUInt16(D,-1),g.mxtp=e.ReadUInt16(D,-1),g.mxs=e.ReadUInt16(D,-1),g.mxfd=e.ReadUInt16(D,-1),g.mxid=e.ReadUInt16(D,-1),g.mxse=e.ReadUInt16(D,-1),g.mxsoi=e.ReadUInt16(D,-1),g.mxce=e.ReadUInt16(D,-1),g.mxcd=e.ReadUInt16(D,-1)),p.$assign(e.GetTableForName(e.TTMSFNCGeneralPDFLibFontTableDir.$clone(P),rtl.arrayRef(B),10)),p.o<D.GetSize()){D.SetPosition(p.o),G=rtl.arraySetLength(G,0,g.ng+1);for(var _=0,Z=g.ng+1;_<=Z;_++)f=_,0===T.ilf?G[f]=2*e.ReadUInt16(D,-1):1===T.ilf&&(G[f]=e.ReadInt32(D,-1))}c.$assign(e.GetTableForName(e.TTMSFNCGeneralPDFLibFontTableDir.$clone(P),rtl.arrayRef(B),9)),N=pas.Classes.TMemoryStream.$create("Create");try{this.FGlyphIDs.Clear(),this.FGlyphIDs.Add(0);for(var q=0,Q=this.FUsedCharArray.GetCount()-1;q<=Q;q++)f=q,E=this.FUsedCharArray.GetItem(f),(b=this.FCharArray.IndexOf(E))>-1?(E=this.FCharWidths[b].g,this.FGlyphIDs.Add(E)):this.FGlyphIDs.Add(0);!function(){var i=!1,s=null,n=0,r=0,o=0,a=0,l=0,h=0,F=0,p=[];D.SetPosition(c.o);for(var u=0,d=t.FGlyphIDs.GetCount()-1;u<=d;u++){if(f=u,o=t.FGlyphIDs.GetItem(f),h=G[o],F=G[o+1]-h,!Number.isNaN(F)&&(D.SetPosition(D.GetPosition()+(h-n)),p=e.ReadBytes(D,F,-1),rtl.length(p)>=2&&255===p[0]&&255===p[1])){r=10;do{l=(255&p[r])<<8|255&p[r+1],a=(255&p[r+=2])<<8|255&p[r+1],-1===t.FGlyphIDs.IndexOf(a)&&(null==s&&(s=pas["WEBLib.TMSFNCPDFCoreLibBase"].TTMSFNCPDFGraphicsLibUsedFontCharArray.$create("Create$1")),s.Add(a)),r+=2,r+=0!=(1&l)?4:2,0!=(128&l)?r+=8:0!=(64&l)?r+=4:0!=(8&l)&&(r+=2)}while(0!=(32&l))}n=G[o+1]}if(null!=s){for(var S=0,C=s.GetCount()-1;S<=C;S++)f=S,t.FGlyphIDs.Add(s.GetItem(f));t.FGlyphIDs.Sort(k),i=!1,s=rtl.freeLoc(s)}else i=!0}(),this.FGlyphIDs.Sort(k),O=rtl.arraySetLength(O,[],rtl.length(i)),I=rtl.arraySetLength(I,0,this.FGlyphIDs.GetCount()+1),O[3]=function(){var t=[];N.Clear(),e.WriteFixed(N,T.v),e.WriteFixed(N,T.fr),e.WriteUInt32(N,0),e.WriteUInt32(N,T.mn),e.WriteUInt16(N,T.f),e.WriteUInt16(N,T.upe),e.WriteUInt64(N,T.cd),e.WriteUInt64(N,T.md),e.WriteInt16(N,T.bb[0]),e.WriteInt16(N,T.bb[1]),e.WriteInt16(N,T.bb[2]),e.WriteInt16(N,T.bb[3]),e.WriteUInt16(N,T.ms),e.WriteUInt16(N,T.lrpp),e.WriteInt16(N,T.fdh),e.WriteInt16(N,1),e.WriteInt16(N,T.gldf),t=rtl.arraySetLength(t,0,rtl.length(pas["WEBLib.TMSFNCTypes"].TTMSFNCMemoryStream.GetBytes.call(N)));for(var i=0,s=rtl.length(pas["WEBLib.TMSFNCTypes"].TTMSFNCMemoryStream.GetBytes.call(N))-1;i<=s;i++)t[f=i]=pas["WEBLib.TMSFNCTypes"].TTMSFNCMemoryStream.GetBytes.call(N)[f];return t}(),O[4]=function(){var i=[];N.Clear(),e.WriteFixed(N,m.v),e.WriteUInt16(N,m.asc),e.WriteUInt16(N,m.desc),e.WriteUInt16(N,m.lg),e.WriteUInt16(N,m.awm),e.WriteUInt16(N,m.mlsb),e.WriteUInt16(N,m.mrsb),e.WriteUInt16(N,m.xme),e.WriteInt16(N,m.csr),e.WriteInt16(N,m.cslr),e.WriteInt16(N,m.co),e.WriteInt16(N,m.r1),e.WriteInt16(N,m.r2),e.WriteInt16(N,m.r3),e.WriteInt16(N,m.r4),e.WriteInt16(N,m.mdf),e.WriteUInt16(N,t.FGlyphIDs.SubSetCount(0,m.nohm)),i=rtl.arraySetLength(i,0,rtl.length(pas["WEBLib.TMSFNCTypes"].TTMSFNCMemoryStream.GetBytes.call(N)));for(var s=0,n=rtl.length(pas["WEBLib.TMSFNCTypes"].TTMSFNCMemoryStream.GetBytes.call(N))-1;s<=n;s++)i[f=s]=pas["WEBLib.TMSFNCTypes"].TTMSFNCMemoryStream.GetBytes.call(N)[f];return i}(),O[7]=function(){var i=[];N.Clear(),e.WriteFixed(N,1),e.WriteUInt16(N,t.FGlyphIDs.GetCount()),e.WriteUInt16(N,g.mxp),e.WriteUInt16(N,g.mxc),e.WriteUInt16(N,g.mxcp),e.WriteUInt16(N,g.mxcc),e.WriteUInt16(N,g.mxz),e.WriteUInt16(N,g.mxtp),e.WriteUInt16(N,g.mxs),e.WriteUInt16(N,g.mxfd),e.WriteUInt16(N,0),e.WriteUInt16(N,g.mxse),e.WriteUInt16(N,0),e.WriteUInt16(N,g.mxce),e.WriteUInt16(N,g.mxcd),i=rtl.arraySetLength(i,0,rtl.length(pas["WEBLib.TMSFNCTypes"].TTMSFNCMemoryStream.GetBytes.call(N)));for(var s=0,n=rtl.length(pas["WEBLib.TMSFNCTypes"].TTMSFNCMemoryStream.GetBytes.call(N))-1;s<=n;s++)i[f=s]=pas["WEBLib.TMSFNCTypes"].TTMSFNCMemoryStream.GetBytes.call(N)[f];return i}(),O[8]=(D.SetPosition(r.o),e.ReadBytes(D,r.l,-1)),O[0]=function(){var i,s=[];N.Clear(),e.WriteUInt16(N,0),e.WriteInt16(N,S.xavgchw),e.WriteUInt16(N,S.uswecl),e.WriteUInt16(N,S.uswicl),e.WriteInt16(N,S.fst),e.WriteInt16(N,S.ysubxsize),e.WriteInt16(N,S.ysubysize),e.WriteInt16(N,S.ysubxoff),e.WriteInt16(N,S.ysubyoff),e.WriteInt16(N,S.ysupxsize),e.WriteInt16(N,S.ysupysize),e.WriteInt16(N,S.ysupxoff),e.WriteInt16(N,S.ysupyoff),e.WriteInt16(N,S.ystos),e.WriteInt16(N,S.ystop),e.WriteInt8(N,S.sfc),e.WriteInt8(N,S.sfsc),e.WriteBytes(N,S.pns,0,rtl.length(S.pns)),e.WriteUInt32(N,0),e.WriteUInt32(N,0),e.WriteUInt32(N,0),e.WriteUInt32(N,0),i=e.StringToBytes(S.avndid),e.WriteBytes(N,rtl.arrayRef(i),0,rtl.length(i)),e.WriteUInt16(N,S.fssel),t.FUsedCharArray.GetCount()>0?(e.WriteUInt16(N,t.FUsedCharArray.GetItem(0)),e.WriteUInt16(N,t.FUsedCharArray.GetItem(t.FUsedCharArray.GetCount()-1))):(e.WriteUInt16(N,0),e.WriteUInt16(N,0)),e.WriteUInt16(N,S.stasc),e.WriteUInt16(N,S.stdesc),e.WriteUInt16(N,S.stlgap),e.WriteUInt16(N,S.uswasc),e.WriteUInt16(N,S.uswdesc),s=rtl.arraySetLength(s,0,rtl.length(pas["WEBLib.TMSFNCTypes"].TTMSFNCMemoryStream.GetBytes.call(N)));for(var n=0,r=rtl.length(pas["WEBLib.TMSFNCTypes"].TTMSFNCMemoryStream.GetBytes.call(N))-1;n<=r;n++)s[f=n]=pas["WEBLib.TMSFNCTypes"].TTMSFNCMemoryStream.GetBytes.call(N)[f];return s}(),O[2]=function(){var i=[],n=0,r=0,o=0,a=0,l=0,h=0,F=0,p=0,u=0,d=0,S=0,C=0,T=[];N.Clear(),D.SetPosition(c.o);for(var m=0,g=t.FGlyphIDs.GetCount()-1;m<=g;m++){if(f=m,n=t.FGlyphIDs.GetItem(f),l=G[n],h=G[n+1]-l,I[a]=o,a+=1,D.SetPosition(D.GetPosition()+(l-r)),T=e.ReadBytes(D,h,-1),rtl.length(T)>=2&&255===T[0]&&255===T[1]){F=10,p=0;do{T[F]=254&T[F],p=(255&T[F])<<8|255&T[F+1],u=(255&T[F+=2])<<8|255&T[F+1],-1===t.FGlyphIDs.IndexOf(u)&&(t.FGlyphIDs.Add(u),t.FGlyphIDs.Sort(k)),d=t.FGlyphIDs.HeadSetCount(u),T[F]=d>>>8,T[F+1]=d,F+=2,F+=0!=(1&p)?4:2,0!=(128&p)?F+=8:0!=(64&p)?F+=4:0!=(8&p)&&(F+=2)}while(0!=(32&p));e.WriteBytes(N,rtl.arrayRef(T),0,F),o+=F}else rtl.length(T)>0&&(F=10+2*((255&T[0])<<8|255&T[1]),e.WriteBytes(N,rtl.arrayRef(T),0,F),o+=F,C=(255&T[F])<<8|255&T[F+1],e.WriteInt8(N,0),e.WriteInt8(N,0),o+=2,F=F+2+C,e.WriteBytes(N,rtl.arrayRef(T),F,rtl.length(T)-F),o=o+rtl.length(T)-F);o%4!=0&&(S=4-o%4,e.WriteBytes(N,rtl.arrayRef(s),0,S),o+=S),r=G[n+1]}I[a]=o,a+=1,i=rtl.arraySetLength(i,0,rtl.length(pas["WEBLib.TMSFNCTypes"].TTMSFNCMemoryStream.GetBytes.call(N)));for(var b=0,y=rtl.length(pas["WEBLib.TMSFNCTypes"].TTMSFNCMemoryStream.GetBytes.call(N))-1;b<=y;b++)i[f=b]=pas["WEBLib.TMSFNCTypes"].TTMSFNCMemoryStream.GetBytes.call(N)[f];return i}(),O[6]=function(){var t=[];N.Clear();for(var i=0,s=rtl.length(I)-1;i<=s;i++)f=i,e.WriteUInt32(N,I[f]);t=rtl.arraySetLength(t,0,rtl.length(pas["WEBLib.TMSFNCTypes"].TTMSFNCMemoryStream.GetBytes.call(N)));for(var n=0,r=rtl.length(pas["WEBLib.TMSFNCTypes"].TTMSFNCMemoryStream.GetBytes.call(N))-1;n<=r;n++)t[f=n]=pas["WEBLib.TMSFNCTypes"].TTMSFNCMemoryStream.GetBytes.call(N)[f];return t}(),O[1]=function(){var i,s=[],n=[],r=[],o=[],a=0,l=0,h=0,F=0,p=0,c=0;if(N.Clear(),e.WriteUInt16(N,0),e.WriteUInt16(N,1),e.WriteUInt16(N,3),e.WriteUInt16(N,1),e.WriteUInt32(N,12),n=rtl.arraySetLength(n,0,t.FUsedCharArray.GetCount()+1),r=rtl.arraySetLength(r,0,t.FUsedCharArray.GetCount()+1),o=rtl.arraySetLength(o,0,t.FUsedCharArray.GetCount()+1),t.FUsedCharArray.GetCount()>0){F=h=t.FUsedCharArray.GetItem(0),c=t.FGlyphIDs.HeadSetCount(t.FGlyphIDs.GetItem(1));for(var u=1,d=t.FUsedCharArray.GetCount()-1;u<=d;u++)f=u,l=t.FUsedCharArray.GetItem(f),p=t.FGlyphIDs.HeadSetCount(t.FGlyphIDs.GetItem(f+1)),l===F+1&&p-c==l-h||(0!==c?(n[a]=h,r[a]=F,o[a]=c-h,a+=1):h!==F&&(n[a]=h+1,r[a]=F,o[a]=c-h,a+=1),c=p,h=l),F=l;n[a]=h,r[a]=F,o[a]=c-h,a+=1}n[a]=65535,r[a]=65535,o[a]=1,a+=1,i=pas.Math.Floor(2*Math.pow(2,Math.log2(a))),e.WriteUInt16(N,4),e.WriteUInt16(N,16+4*a*2),e.WriteUInt16(N,0),e.WriteUInt16(N,2*a),e.WriteUInt16(N,i),e.WriteUInt16(N,pas.Math.Floor(Math.log2(rtl.trunc(i/2)))),e.WriteUInt16(N,2*a-i);for(var S=0,C=a-1;S<=C;S++)f=S,e.WriteUInt16(N,r[f]);e.WriteUInt16(N,0);for(var T=0,m=a-1;T<=m;T++)f=T,e.WriteUInt16(N,n[f]);for(var g=0,b=a-1;g<=b;g++)f=g,e.WriteUInt16(N,o[f]);for(var y=0,L=a-1;y<=L;y++)f=y,e.WriteUInt16(N,0);s=rtl.arraySetLength(s,0,rtl.length(pas["WEBLib.TMSFNCTypes"].TTMSFNCMemoryStream.GetBytes.call(N)));for(var M=0,E=rtl.length(pas["WEBLib.TMSFNCTypes"].TTMSFNCMemoryStream.GetBytes.call(N))-1;M<=E;M++)s[f=M]=pas["WEBLib.TMSFNCTypes"].TTMSFNCMemoryStream.GetBytes.call(N)[f];return s}(),O[5]=function(){var i=[],s=0,n=0,r=0,o=0,a=0,l=[];N.Clear(),D.SetPosition(u.o);for(var h=0,F=t.FGlyphIDs.GetCount()-1;h<=F;h++)f=h,(n=(a=t.FGlyphIDs.GetItem(f))<m.nohm?4*a:m.nohm+4*(a-m.nohm)*2)!==s&&(r=n-s,D.SetPosition(D.GetPosition()+r)),o=a<m.nohm?4:2,l=e.ReadBytes(D,o,-1),e.WriteBytes(N,rtl.arrayRef(l),0,o),s=n+o;i=rtl.arraySetLength(i,0,rtl.length(pas["WEBLib.TMSFNCTypes"].TTMSFNCMemoryStream.GetBytes.call(N)));for(var p=0,c=rtl.length(pas["WEBLib.TMSFNCTypes"].TTMSFNCMemoryStream.GetBytes.call(N))-1;p<=c;p++)i[f=p]=pas["WEBLib.TMSFNCTypes"].TTMSFNCMemoryStream.GetBytes.call(N)[f];return i}(),O[9]=function(){var i=[],s=0,n="",r=0,o=0,a=0,l=[],h=[];N.Clear(),e.WriteFixed(N,2),e.WriteFixed(N,C.ia),e.WriteInt16(N,C.ups),e.WriteInt16(N,C.utck),e.WriteUInt32(N,C.isfp),e.WriteUInt32(N,C.minmtype42),e.WriteUInt32(N,C.minmtype42),e.WriteUInt32(N,C.minmtype42),e.WriteUInt32(N,C.minmtype42),e.WriteUInt16(N,t.FGlyphIDs.GetCount());for(var F=0,p=t.FGlyphIDs.GetCount()-1;F<=p;F++){for(f=F,n="",(s=t.FGlyphIDs.GetItem(f))>=0&&s<=rtl.length(R)-1&&(n=R[s]),o=-1,r=0;r<=257;r++)if(e.MAC_GLYPH_NAMES[r]===n){o=r;break}if(-1!==o)e.WriteUInt16(N,o);else{a=-1;for(var c=0,u=rtl.length(l)-1;c<=u;c++)if(l[r=c]===n){a=r;break}-1===a&&(a=rtl.length(l),(l=rtl.arraySetLength(l,"",a+1))[a]=n),e.WriteUInt16(N,258+a)}}for(var d=0,S=rtl.length(l)-1;d<=S;d++)f=d,h=e.StringToBytes(l[f]),e.WriteInt8(N,rtl.length(h)),e.WriteBytes(N,rtl.arrayRef(h),0,rtl.length(h));i=rtl.arraySetLength(i,0,rtl.length(pas["WEBLib.TMSFNCTypes"].TTMSFNCMemoryStream.GetBytes.call(N)));for(var T=0,m=rtl.length(pas["WEBLib.TMSFNCTypes"].TTMSFNCMemoryStream.GetBytes.call(N))-1;T<=m;T++)i[f=T]=pas["WEBLib.TMSFNCTypes"].TTMSFNCMemoryStream.GetBytes.call(N)[f];return i}()}finally{N=rtl.freeLoc(N)}v=pas.Classes.TMemoryStream.$create("Create");try{for(it=rtl.length(i),nt=it,e.WriteInt32(v,65536),e.WriteInt16(v,nt),at=16*(rt=e.HighestOneBit(nt)),e.WriteInt16(v,at),ot=e.Log2I(rt),e.WriteInt16(v,ot),st=16*nt-at,e.WriteInt16(v,st),W=65536+e.BuildUint32(nt,at)+e.BuildUint32(ot,st),A=12+16*rtl.length(i),$=rtl.arraySetLength($,0,rtl.length(i)),f=0;f<=9;f++)W+=H(i[f],A,rtl.arrayRef(O[f])),$[f]=A,A+=Math.round((rtl.length(O[f])+3)/4*4);for(W=2981146554-rtl.lw(4294967295&W),O[3][8]=rtl.lw(W>>>24),O[3][9]=rtl.lw(W>>>16),O[3][10]=rtl.lw(W>>>8),O[3][11]=W,f=0;f<=9;f++)v.SetPosition($[f]),tt=rtl.arrayRef(O[f]),et=void 0,et=rtl.length(tt),e.WriteBytes(v,rtl.arrayRef(tt),0,et),et%4!=0&&e.WriteBytes(v,rtl.arrayRef(n),0,4-et%4);this.FTTFEmbed.LoadFromStream(v)}finally{v=rtl.freeLoc(v)}var tt,et,it,st,nt,rt,ot,at}},this.Create$1=function(t,e,i,s){var n=this,r=pas["WEBLib.TMSFNCUtils"].TTMSFNCUtilsFile.$new(),o=null;function a(t,e){var i=null,s=null,r=0;if(i=null,null!=n.FMainInitializer&&null!=n.FMainInitializer.FFontCol)for(var o=0,a=n.FMainInitializer.FFontCol.GetCount()-1;o<=a;o++)if(r=o,s=n.FMainInitializer.FFontCol.GetItem$1(r),pas.SysUtils.LowerCase(s.FName)===pas.SysUtils.LowerCase(t)&&rtl.eqSet(s.FStyle,e)){i=s;break}return i}return this.FMainInitializer=t,this.FBase=e,this.FSize=s,this.FUsedCharArray=pas["WEBLib.TMSFNCPDFCoreLibBase"].TTMSFNCPDFGraphicsLibUsedFontCharArray.$create("Create$1"),this.FGlyphIDs=pas["WEBLib.TMSFNCPDFCoreLibBase"].TTMSFNCPDFGraphicsLibUsedFontCharArray.$create("Create$1"),this.FTTFCreateFontPackage=!0,this.FTTFFileStream=pas.Classes.TMemoryStream.$create("Create"),this.FTTFEmbed=pas.Classes.TMemoryStream.$create("Create"),o=null,0 in i&&1 in i?o=a(this.FBase,rtl.createSet(0,1)):0 in i?o=a(this.FBase,rtl.createSet(0)):1 in i&&(o=a(this.FBase,rtl.createSet(1))),null==o&&(o=a(this.FBase,{})),null!=o?(r.$assign(o.FData),this.FTTFMetrics.CapHeight=o.FCapHeight,this.FTTFMetrics.Ascent=o.FAscent,this.FTTFMetrics.Descent=o.FDescent,this.FTTFMetrics.FontBox.$assign(o.FBBox),this.FTTFMetrics.ItalicAngle=Math.round(o.FItalicAngle),this.FTTFMetrics.Fixed=o.FFixed,this.FTTFMetrics.TrueType=!0):(r.Data=null,r.Name="",this.FTTFMetrics.CapHeight=0,this.FTTFMetrics.Ascent=0,this.FTTFMetrics.Descent=0,this.FTTFMetrics.FontBox.$assign(pas.Types.Bounds(0,0,0,0)),this.FTTFMetrics.ItalicAngle=0,this.FTTFMetrics.Fixed=!1,this.FTTFMetrics.TrueType=!1),null!=r.Data&&n.FTTFFileStream.Write(r.Data,r.Data.length),this.FTTFFileStream.SetPosition(0),this},this.Destroy=function(){null!=this.FTTFEmbed&&(rtl.free(this,"FTTFEmbed"),this.FTTFEmbed=null),null!=this.FTTFFileStream&&(rtl.free(this,"FTTFFileStream"),this.FTTFFileStream=null),null!=this.FUsedCharArray&&(rtl.free(this,"FUsedCharArray"),this.FUsedCharArray=null),null!=this.FGlyphIDs&&(rtl.free(this,"FGlyphIDs"),this.FGlyphIDs=null),pas.System.TObject.Destroy.call(this)},this.GetFontMetrics=function(){var e=t.TTMSFNCGeneralPDFLibFontMetrics.$new();return e.Ascent=0,e.CapHeight=0,e.Descent=0,e.FontBox.$assign(pas.Types.Bounds(0,0,0,0)),e.ItalicAngle=0,e.Fixed=!1,e.TrueType=!0,null!=this.FMainInitializer&&(e.CapHeight=this.FTTFMetrics.CapHeight,e.Ascent=this.FTTFMetrics.Ascent,e.Descent=this.FTTFMetrics.Descent,e.FontBox.$assign(this.FTTFMetrics.FontBox),e.ItalicAngle=this.FTTFMetrics.ItalicAngle,e.Fixed=this.FTTFMetrics.Fixed,e.TrueType=this.FTTFMetrics.TrueType),e},this.GetCharArray=function(){var t=pas["WEBLib.TMSFNCPDFCoreLibBase"].TTMSFNCPDFGraphicsLibFontCharArray.$new();return t.$assign(this.FCharArray),t},this.GetCharWidths=function(){var t=[],e=0;t=rtl.arraySetLength(t,pas["WEBLib.TMSFNCPDFCoreLibBase"].TTMSFNCPDFGraphicsLibFontCharWidth,rtl.length(this.FCharWidths));for(var i=0,s=rtl.length(t)-1;i<=s;i++)t[e=i].$assign(this.FCharWidths[e]);return rtl.arrayRef(t)},this.GetUnitsPerEM=function(){return this.FUnitsPerEm},this.GetUsedCharArray=function(){return this.FUsedCharArray},this.GetGlyphIds=function(){return this.FGlyphIDs},this.GetTTFDataLength=function(){return this.FTTFEmbed.GetSize()},this.GetTTFDataCompressedLength=function(){var t=0;return t=0,null!=this.FTTFDataStream&&(t=this.FTTFDataStream.GetSize()),t},this.GetTTFDataCompressed=function(){return this.FTTFDataStream},this.CompressTTFData=function(){this.FFullFont?this.FTTFDataStream=this.CompressFontStream(this.FTTFFileStream):this.FTTFDataStream=this.CompressFontStream(this.FTTFEmbed)},this.InitializeCharWidths=function(){null!=this.FMainInitializer&&this.InternalInitializeCharWidths(this.FTTFFileStream)},this.InitializeFontFile=function(){this.InternalInitializeFontFile()}})),t.$implcode=function(){rtl.recNewT(e,"TTMSFNCGeneralPDFLibFontNameRecord",(function(){this.pID=0,this.eID=0,this.lID=0,this.nID=0,this.sl=0,this.so=0,this.$eq=function(t){return this.pID===t.pID&&this.eID===t.eID&&this.lID===t.lID&&this.nID===t.nID&&this.sl===t.sl&&this.so===t.so},this.$assign=function(t){return this.pID=t.pID,this.eID=t.eID,this.lID=t.lID,this.nID=t.nID,this.sl=t.sl,this.so=t.so,this}})),rtl.recNewT(e,"TTMSFNCGeneralPDFLibFontNameEntry",(function(){this.v="",this.$new=function(){var t=Object.create(this);return t.i=e.TTMSFNCGeneralPDFLibFontNameRecord.$new(),t},this.$eq=function(t){return this.i.$eq(t.i)&&this.v===t.v},this.$assign=function(t){return this.i.$assign(t.i),this.v=t.v,this}})),rtl.recNewT(e,"TTMSFNCGeneralPDFLibFontOS2Data",(function(){this.v=0,this.xavgchw=0,this.uswecl=0,this.uswicl=0,this.fst=0,this.ysubxsize=0,this.ysubysize=0,this.ysubxoff=0,this.ysubyoff=0,this.ysupxsize=0,this.ysupysize=0,this.ysupxoff=0,this.ysupyoff=0,this.ystos=0,this.ystop=0,this.sfc=0,this.sfsc=0,this.ulur1=0,this.ulur2=0,this.ulur3=0,this.ulur4=0,this.avndid="",this.fssel=0,this.usfchidx=0,this.uslchidx=0,this.stasc=0,this.stdesc=0,this.stlgap=0,this.uswasc=0,this.uswdesc=0,this.ulcpr1=0,this.ulcpr2=0,this.sxh=0,this.sch=0,this.usdc=0,this.usbc=0,this.usmaxct=0,this.$new=function(){var t=Object.create(this);return t.pns=[],t},this.$eq=function(t){return this.v===t.v&&this.xavgchw===t.xavgchw&&this.uswecl===t.uswecl&&this.uswicl===t.uswicl&&this.fst===t.fst&&this.ysubxsize===t.ysubxsize&&this.ysubysize===t.ysubysize&&this.ysubxoff===t.ysubxoff&&this.ysubyoff===t.ysubyoff&&this.ysupxsize===t.ysupxsize&&this.ysupysize===t.ysupysize&&this.ysupxoff===t.ysupxoff&&this.ysupyoff===t.ysupyoff&&this.ystos===t.ystos&&this.ystop===t.ystop&&this.sfc===t.sfc&&this.sfsc===t.sfsc&&this.pns===t.pns&&this.ulur1===t.ulur1&&this.ulur2===t.ulur2&&this.ulur3===t.ulur3&&this.ulur4===t.ulur4&&this.avndid===t.avndid&&this.fssel===t.fssel&&this.usfchidx===t.usfchidx&&this.uslchidx===t.uslchidx&&this.stasc===t.stasc&&this.stdesc===t.stdesc&&this.stlgap===t.stlgap&&this.uswasc===t.uswasc&&this.uswdesc===t.uswdesc&&this.ulcpr1===t.ulcpr1&&this.ulcpr2===t.ulcpr2&&this.sxh===t.sxh&&this.sch===t.sch&&this.usdc===t.usdc&&this.usbc===t.usbc&&this.usmaxct===t.usmaxct},this.$assign=function(t){return this.v=t.v,this.xavgchw=t.xavgchw,this.uswecl=t.uswecl,this.uswicl=t.uswicl,this.fst=t.fst,this.ysubxsize=t.ysubxsize,this.ysubysize=t.ysubysize,this.ysubxoff=t.ysubxoff,this.ysubyoff=t.ysubyoff,this.ysupxsize=t.ysupxsize,this.ysupysize=t.ysupysize,this.ysupxoff=t.ysupxoff,this.ysupyoff=t.ysupyoff,this.ystos=t.ystos,this.ystop=t.ystop,this.sfc=t.sfc,this.sfsc=t.sfsc,this.pns=rtl.arrayRef(t.pns),this.ulur1=t.ulur1,this.ulur2=t.ulur2,this.ulur3=t.ulur3,this.ulur4=t.ulur4,this.avndid=t.avndid,this.fssel=t.fssel,this.usfchidx=t.usfchidx,this.uslchidx=t.uslchidx,this.stasc=t.stasc,this.stdesc=t.stdesc,this.stlgap=t.stlgap,this.uswasc=t.uswasc,this.uswdesc=t.uswdesc,this.ulcpr1=t.ulcpr1,this.ulcpr2=t.ulcpr2,this.sxh=t.sxh,this.sch=t.sch,this.usdc=t.usdc,this.usbc=t.usbc,this.usmaxct=t.usmaxct,this}})),rtl.recNewT(e,"TTMSFNCGeneralPDFLibFontCmapHead",(function(){this.uem=0,this.$eq=function(t){return this.uem===t.uem},this.$assign=function(t){return this.uem=t.uem,this}})),rtl.recNewT(e,"TTMSFNCGeneralPDFLibFontCmapHeader",(function(){this.v=0,this.n=0,this.$eq=function(t){return this.v===t.v&&this.n===t.n},this.$assign=function(t){return this.v=t.v,this.n=t.n,this}})),rtl.recNewT(e,"TTMSFNCGeneralPDFLibFontCmapFormat4",(function(){this.fmt=0,this.l=0,this.lng=0,this.sgX2=0,this.shrange=0,this.selr=0,this.rng=0,this.$eq=function(t){return this.fmt===t.fmt&&this.l===t.l&&this.lng===t.lng&&this.sgX2===t.sgX2&&this.shrange===t.shrange&&this.selr===t.selr&&this.rng===t.rng},this.$assign=function(t){return this.fmt=t.fmt,this.l=t.l,this.lng=t.lng,this.sgX2=t.sgX2,this.shrange=t.shrange,this.selr=t.selr,this.rng=t.rng,this}})),rtl.recNewT(e,"TTMSFNCGeneralPDFLibFontHead",(function(){this.v=0,this.fr=0,this.csa=0,this.mn=0,this.f=0,this.upe=0,this.cd=0,this.md=0,this.ms=0,this.lrpp=0,this.fdh=0,this.ilf=0,this.gldf=0,this.$new=function(){var t=Object.create(this);return t.bb=rtl.arraySetLength(null,0,4),t},this.$eq=function(t){return this.v===t.v&&this.fr===t.fr&&this.csa===t.csa&&this.mn===t.mn&&this.f===t.f&&this.upe===t.upe&&this.cd===t.cd&&this.md===t.md&&rtl.arrayEq(this.bb,t.bb)&&this.ms===t.ms&&this.lrpp===t.lrpp&&this.fdh===t.fdh&&this.ilf===t.ilf&&this.gldf===t.gldf},this.$assign=function(t){return this.v=t.v,this.fr=t.fr,this.csa=t.csa,this.mn=t.mn,this.f=t.f,this.upe=t.upe,this.cd=t.cd,this.md=t.md,this.bb=t.bb.slice(0),this.ms=t.ms,this.lrpp=t.lrpp,this.fdh=t.fdh,this.ilf=t.ilf,this.gldf=t.gldf,this}})),rtl.recNewT(e,"TTMSFNCGeneralPDFLibFontHhea",(function(){this.v=0,this.asc=0,this.desc=0,this.lg=0,this.awm=0,this.mlsb=0,this.mrsb=0,this.xme=0,this.csr=0,this.cslr=0,this.co=0,this.r1=0,this.r2=0,this.r3=0,this.r4=0,this.mdf=0,this.nohm=0,this.$eq=function(t){return this.v===t.v&&this.asc===t.asc&&this.desc===t.desc&&this.lg===t.lg&&this.awm===t.awm&&this.mlsb===t.mlsb&&this.mrsb===t.mrsb&&this.xme===t.xme&&this.csr===t.csr&&this.cslr===t.cslr&&this.co===t.co&&this.r1===t.r1&&this.r2===t.r2&&this.r3===t.r3&&this.r4===t.r4&&this.mdf===t.mdf&&this.nohm===t.nohm},this.$assign=function(t){return this.v=t.v,this.asc=t.asc,this.desc=t.desc,this.lg=t.lg,this.awm=t.awm,this.mlsb=t.mlsb,this.mrsb=t.mrsb,this.xme=t.xme,this.csr=t.csr,this.cslr=t.cslr,this.co=t.co,this.r1=t.r1,this.r2=t.r2,this.r3=t.r3,this.r4=t.r4,this.mdf=t.mdf,this.nohm=t.nohm,this}})),rtl.recNewT(e,"TTMSFNCGeneralPDFLibFontMaxp",(function(){this.v=0,this.ng=0,this.mxp=0,this.mxc=0,this.mxcp=0,this.mxcc=0,this.mxz=0,this.mxtp=0,this.mxs=0,this.mxfd=0,this.mxid=0,this.mxse=0,this.mxsoi=0,this.mxce=0,this.mxcd=0,this.$eq=function(t){return this.v===t.v&&this.ng===t.ng&&this.mxp===t.mxp&&this.mxc===t.mxc&&this.mxcp===t.mxcp&&this.mxcc===t.mxcc&&this.mxz===t.mxz&&this.mxtp===t.mxtp&&this.mxs===t.mxs&&this.mxfd===t.mxfd&&this.mxid===t.mxid&&this.mxse===t.mxse&&this.mxsoi===t.mxsoi&&this.mxce===t.mxce&&this.mxcd===t.mxcd},this.$assign=function(t){return this.v=t.v,this.ng=t.ng,this.mxp=t.mxp,this.mxc=t.mxc,this.mxcp=t.mxcp,this.mxcc=t.mxcc,this.mxz=t.mxz,this.mxtp=t.mxtp,this.mxs=t.mxs,this.mxfd=t.mxfd,this.mxid=t.mxid,this.mxse=t.mxse,this.mxsoi=t.mxsoi,this.mxce=t.mxce,this.mxcd=t.mxcd,this}})),rtl.recNewT(e,"TTMSFNCGeneralPDFLibFontPostScript",(function(){this.ft=0,this.ia=0,this.ups=0,this.utck=0,this.isfp=0,this.minmtype42=0,this.maxmtype42=0,this.minmtype1=0,this.maxmtype1=0,this.ng=0,this.$eq=function(t){return this.ft===t.ft&&this.ia===t.ia&&this.ups===t.ups&&this.utck===t.utck&&this.isfp===t.isfp&&this.minmtype42===t.minmtype42&&this.maxmtype42===t.maxmtype42&&this.minmtype1===t.minmtype1&&this.maxmtype1===t.maxmtype1&&this.ng===t.ng},this.$assign=function(t){return this.ft=t.ft,this.ia=t.ia,this.ups=t.ups,this.utck=t.utck,this.isfp=t.isfp,this.minmtype42=t.minmtype42,this.maxmtype42=t.maxmtype42,this.minmtype1=t.minmtype1,this.maxmtype1=t.maxmtype1,this.ng=t.ng,this}})),rtl.recNewT(e,"TTMSFNCGeneralPDFLibFontTableDir",(function(){this.st=0,this.nt=0,this.sr=0,this.es=0,this.rs=0,this.$eq=function(t){return this.st===t.st&&this.nt===t.nt&&this.sr===t.sr&&this.es===t.es&&this.rs===t.rs},this.$assign=function(t){return this.st=t.st,this.nt=t.nt,this.sr=t.sr,this.es=t.es,this.rs=t.rs,this}})),rtl.recNewT(e,"TTMSFNCGeneralPDFLibFontTableDirEntry",(function(){this.t="",this.cs=0,this.o=0,this.l=0,this.$eq=function(t){return this.t===t.t&&this.cs===t.cs&&this.o===t.o&&this.l===t.l},this.$assign=function(t){return this.t=t.t,this.cs=t.cs,this.o=t.o,this.l=t.l,this}})),e.TTMSFNCGeneralPDFLibFontTableType={0:"ttUnknown",ttUnknown:0,1:"ttHead",ttHead:1,2:"tthhea",tthhea:2,3:"ttmaxp",ttmaxp:3,4:"tthmtx",tthmtx:4,5:"ttcmap",ttcmap:5,6:"ttname",ttname:6,7:"ttOS2",ttOS2:7,8:"ttpost",ttpost:8,9:"ttglyf",ttglyf:9,10:"ttloca",ttloca:10,11:"ttprep",ttprep:11,12:"ttfpgm",ttfpgm:12,13:"ttcvt",ttcvt:13},e.TableNames=["","head","hhea","maxp","hmtx","cmap","name","OS/2","post","glyf","loca","prep","fpgm","cvt "],e.MAC_GLYPH_NAMES=[".notdef",".null","nonmarkingreturn","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","nonbreakingspace","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron","Lslash","lslash","Scaron","scaron","Zcaron","zcaron","brokenbar","Eth","eth","Yacute","yacute","Thorn","thorn","minus","multiply","onesuperior","twosuperior","threesuperior","onehalf","onequarter","threequarters","franc","Gbreve","gbreve","Idotaccent","Scedilla","scedilla","Cacute","cacute","Ccaron","ccaron","dcroat"],e.ReadUInt8=function(t,e){var i,s=[],n=0;return-1!==e&&(n=t.GetPosition(),t.SetPosition(t.GetPosition()+e)),s=rtl.arraySetLength(s,0,1),t.Read({get:function(){return s},set:function(t){s=t}},1),i=s[0],-1!==e&&t.SetPosition(n),i},e.GetUInt16=function(t,e){return(t[2*e]<<8)+t[2*e+1]>>>0},e.ReadUInt16=function(t,e){var i,s=[],n=0;return-1!==e&&(n=t.GetPosition(),t.SetPosition(t.GetPosition()+e)),s=rtl.arraySetLength(s,0,2),t.Read({get:function(){return s},set:function(t){s=t}},2),i=(s[0]<<8)+s[1]>>>0,-1!==e&&t.SetPosition(n),i},e.ReadUInt16Array=function(t,i){var s=[];s=rtl.arraySetLength(s,0,i);for(var n=0,r=i-1;n<=r;n++)s[n]=e.ReadUInt16(t,-1);return s},e.ReadInt32=function(t,e){var i,s=[],n=0;return-1!==e&&(n=t.GetPosition(),t.SetPosition(t.GetPosition()+e)),s=rtl.arraySetLength(s,0,4),t.Read({get:function(){return s},set:function(t){s=t}},4),i=(s[0]<<24)+(s[1]<<16)+(s[2]<<8)+s[3],-1!==e&&t.SetPosition(n),i},e.ReadInt16=function(t,i,s){var n=0;return n=e.ReadUInt16(t,s),i&&32768==(32768&n)&&(n-=65536),n},e.ReadFixed=function(t){return e.ReadInt16(t,!1,-1)+e.ReadUInt16(t,-1)/65535},e.ReadUInt32=function(t,i){return rtl.lw(e.ReadInt32(t,i)>>>0)},e.Log2I=function(t){var e=0;return e=-1,0!=(4294901760&t)&&(t>>>=16,e+=16),0!=(65280&t)&&(t>>>=8,e+=8),0!=(255&t)&&(t>>>=4,e+=4),0!=(12&t)&&(t>>>=2,e+=2),0!=(2&t)&&(t>>>=1,e+=1),0!==t&&(e+=1),e},e.HighestOneBit=function(t){return t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)-(t>>>1)},e.ReadBytes=function(t,e,i){var s,n=[],r=0;return-1!==i&&(r=t.GetPosition(),t.SetPosition(t.GetPosition()+i)),n=rtl.arraySetLength(n,0,e),t.Read({get:function(){return n},set:function(t){n=t}},e),s=rtl.arrayRef(n),-1!==i&&t.SetPosition(r),s},e.ReadString=function(t,i,s){var n,r="",o=0;n=e.ReadBytes(t,i,s);for(var a=0,l=rtl.length(n)-1;a<=l;a++)o=n[a],r+=String.fromCharCode(o);return r},e.BuildUint32=function(t,e){return(65535&t)<<16|65535&e},e.BuildUInt32$1=function(t){return(255&t[0])<<24|(255&t[1])<<16|(255&t[2])<<8|255&t[3]},e.WriteBytes=function(t,e,i,s){t.Write$1(e,i,s)},e.WriteInt8=function(t,e){var i=[];(i=rtl.arraySetLength(i,0,1))[0]=e,t.Write(i,1)},e.WriteInt16=function(t,i){e.WriteInt8(t,i>>>8&255),e.WriteInt8(t,255&i)},e.WriteInt32=function(t,i){e.WriteInt8(t,i>>>24&255),e.WriteInt8(t,i>>>16&255),e.WriteInt8(t,i>>>8&255),e.WriteInt8(t,255&i)},e.WriteInt64=function(t,i){e.WriteInt8(t,0),e.WriteInt8(t,255&Math.floor(i/281474976710656)),e.WriteInt8(t,255&Math.floor(i/1099511627776)),e.WriteInt8(t,255&Math.floor(i/4294967296)),e.WriteInt8(t,255&Math.floor(i/16777216)),e.WriteInt8(t,255&Math.floor(i/65536)),e.WriteInt8(t,255&Math.floor(i/256)),e.WriteInt8(t,255&i)},e.WriteUInt16=function(t,i){e.WriteInt16(t,i)},e.WriteUInt32=function(t,i){e.WriteInt32(t,i)},e.WriteUInt64=function(t,i){e.WriteInt64(t,i)},e.WriteFixed=function(t,i){var s,n;s=pas.Math.Floor(i),n=pas.Math.Floor(65536*(i-s)),e.WriteInt16(t,s),e.WriteInt16(t,n)},e.StringToBytes=function(t){var e="";e=t;for(var i,s,n=[],r=0;r<e.length;r++){i=e.charCodeAt(r),s=[];do{s.push(255&i),i>>=8}while(i);n=n.concat(s.reverse())}return n},e.GetTableType=function(t){var i=0;for(i=e.TTMSFNCGeneralPDFLibFontTableType.ttcvt;0!==i&&0!==pas.SysUtils.CompareText(t,e.TableNames[i]);)i-=1;return i},e.GetTableForName=function(t,i,s){for(var n=e.TTMSFNCGeneralPDFLibFontTableDirEntry.$new(),r=0,o=0,a=t.nt-1;o<=a;o++)if(r=o,e.GetTableType(i[r].t)===s){n.$assign(i[r]);break}return n}}}),["Math","SysUtils","WEBLib.TMSFNCPDFLib"]),rtl.module("WEBLib.TMSFNCPDFLib.General",["System"],(function(){"use strict";var t=this.$impl;this.RegisterPDFLibGeneralService=function(){pas["WEBLib.TMSFNCPDFCoreLibBase"].TTMSFNCPDFLibPlatformServices.Current().SupportsPlatformService$1(rtl.getIntfGUIDR(pas["WEBLib.TMSFNCPDFLib"].ITMSFNCPDFLibGeneralService),{p:t,get:function(){return this.p.PDFLibService},set:function(t){rtl.setIntfP(this.p,"PDFLibService",t)}})||(rtl.setIntfP(t,"PDFLibService",rtl.queryIntfT(t.TTMSFNCGeneralPDFLibService.$create("Create$1"),pas["WEBLib.TMSFNCPDFLib"].ITMSFNCPDFLibGeneralService),!0),pas["WEBLib.TMSFNCPDFCoreLibBase"].TTMSFNCPDFLibPlatformServices.Current().AddPlatformService(rtl.getIntfGUIDR(pas["WEBLib.TMSFNCPDFLib"].ITMSFNCPDFLibGeneralService),t.PDFLibService))},this.$implcode=function(){rtl.createClass(t,"TTMSFNCGeneralPDFLibService",pas["WEBLib.TMSFNCPDFLib"].TTMSFNCPDFLibFactoryService,(function(){this.DoCreatePDFLib=function(){var e=null,i=!1;try{e=rtl.setIntfL(e,rtl.queryIntfT(t.TTMSFNCGeneralPDFLib.$create("Create$1"),pas["WEBLib.TMSFNCPDFLib"].ITMSFNCCustomPDFLib),!0),i=!0}finally{i||rtl._Release(e)}return e},rtl.addIntf(this,pas["WEBLib.TMSFNCPDFLib"].ITMSFNCPDFLibGeneralService),rtl.addIntf(this,pas.System.IUnknown)})),t.DefaultMediaBox=pas["WEBLib.TMSFNCTypes"].TRectF.$clone({Left:0,Top:0,Right:612,Bottom:792}),t.PDFStart17="%PDF-1.7\r\n%ùúûü",t.PDFStart14="%PDF-1.4\r\n%äåæð",t.PDFStart=t.PDFStart17,t.PDFEnd="%%EOF",t.PDFCR="\r",t.PDFLF="\n",t.PDFLB=t.PDFCR+t.PDFLF,t.PDFMaxXref=65535,t.PDFDestOutputProfileRef="{PDFDESTOUTPUTPROFILEREFERENCE}",t.PDFDestOutputProfileLengthRef="{PDFDESTOUTPUTPROFILELENGTHREFERENCE}",t.PDFPageFontTextRef="{PDFPAGEFONTTEXTREFERENCE%s}",t.PDFPageFontGlyphTextRef="{PDFPAGEFONTGLYPHTEXTREFERENCE%s}",t.PDFPageRef="{PDFPAGEREFERENCE}",t.PDFPageChildRef="{PDFPAGECHILDREFERENCE}",t.PDFPageAcroFormRef="{PDFPAGEACROFORMREFERENCE}",t.PDFPageAcroFormFieldsRef="{PDFPAGEACROFORMFIELDSREFERENCE}",t.PDFPageAcroFormFieldContentRef="{PDFPAGEACROFORMFIELDCONTENTREFERENCE}",t.PDFPageContentRef="{PDFPAGECONTENTREFERENCE}",t.PDFPageContentLengthRef="{PDFPAGECONTENTLENGTHREFERENCE}",t.PDFPageCountRef="{PDFPAGECOUNTREFERENCE}",t.PDFPageFontRef="{PDFPAGEFONTREFERENCE}",t.PDFPagePatternRef="{PDFPAGEPATTERNREFERENCE}",t.PDFPageAnnotationsRef="{PDFPAGEANNOTATIONSREFERENCE}",t.PDFPageShadingObjectRef="{PDFPAGESHADINGOBJECTREFERENCE%s}",t.PDFPageBitmapObjectRef="{PDFPAGEBITMAPOBJECTREFERENCE%s}",t.PDFPageXObjectRef="{PDFPAGEXOBJECTREFERENCE}",t.TTMSFNCGeneralPDFLibObjectType={0:"lotDirect",lotDirect:0,1:"lotIndirect",lotIndirect:1},rtl.createClass(t,"TTMSFNCGeneralPDFLibObject",pas.System.TObject,(function(){this.$init=function(){pas.System.TObject.$init.call(this),this.FPDFLib=null,this.FXRefNumber=0,this.FNumber=0,this.FType=0,this.FXRefObject=null,this.FRefNameOriginal="",this.FInactive=!1,this.FRefNameGlyphOriginal=""},this.$final=function(){this.FPDFLib=void 0,this.FXRefObject=void 0,pas.System.TObject.$final.call(this)},this.SetNumber=function(t){this.FNumber=t,this.FType=t<0?1:0},this.GetRef=function(){var t;return""!==(t=this.GetRefName())?t+" "+pas.SysUtils.IntToStr(this.GetRefIndex(!1))+" 0 R":pas.SysUtils.IntToStr(this.GetRefIndex(!1))+" 0 R"},this.GetRefName=function(){var t,e="";return e="",""!==(t=this.GetRefNameNotEscaped())&&(e="/"+t),e},this.GetRefNameNotEscaped=function(){var t,e="";return e="",""!==(t=this.GetRefNameBase())&&(e=t+pas.SysUtils.IntToStr(this.GetRefIndex(!0))),e},this.GetRefNameBase=function(){return"",""},this.GetRefIndex=function(t){var e=0;return e=-1,null!=this.FPDFLib&&null!=this.FPDFLib.FXRefObjects&&(e=this.FPDFLib.FXRefObjects.IndexOfObject(this,t)),e},this.Create$1=function(t,e,i){return this.FPDFLib=t,this.FXRefNumber=i,this.FNumber=e,this.FXRefObject=null,this},this.Destroy=function(){this.FXRefObject=null,pas.System.TObject.Destroy.call(this)}})),rtl.createClass(t,"TTMSFNCGeneralPDFLibDestOutputProfile",t.TTMSFNCGeneralPDFLibObject,(function(){})),rtl.createClass(t,"TTMSFNCGeneralPDFLibInfo",t.TTMSFNCGeneralPDFLibObject,(function(){})),rtl.createClass(t,"TTMSFNCGeneralPDFLibCatalog",t.TTMSFNCGeneralPDFLibObject,(function(){})),rtl.createClass(t,"TTMSFNCGeneralPDFLibPages",t.TTMSFNCGeneralPDFLibObject,(function(){})),rtl.createClass(t,"TTMSFNCGeneralPDFLibOutputIntent",t.TTMSFNCGeneralPDFLibObject,(function(){})),rtl.createClass(t,"TTMSFNCGeneralPDFLibPageList",pas.Classes.TList,(function(){this.GetItem=function(t){return rtl.getObject(this.Get(t))}})),rtl.createClass(t,"TTMSFNCGeneralPDFLibFonts",pas.Classes.TList,(function(){this.GetItem=function(t){return rtl.getObject(this.Get(t))}})),rtl.createClass(t,"TTMSFNCGeneralPDFLibXObjects",pas.Classes.TList,(function(){this.GetItem=function(t){return rtl.getObject(this.Get(t))}})),rtl.createClass(t,"TTMSFNCGeneralPDFLibShadings",pas.Classes.TList,(function(){})),rtl.createClass(t,"TTMSFNCGeneralPDFLibPatterns",pas.Classes.TList,(function(){this.GetItem=function(t){return rtl.getObject(this.Get(t))}})),rtl.createClass(t,"TTMSFNCGeneralPDFLibAnnotations",pas.Classes.TList,(function(){this.GetItem=function(t){return rtl.getObject(this.Get(t))}})),rtl.createClass(t,"TTMSFNCGeneralPDFLibBitmaps",pas.Classes.TList,(function(){this.GetItem=function(t){return rtl.getObject(this.Get(t))}})),rtl.createClass(t,"TTMSFNCGeneralPDFLibAcroFormFields",pas.Classes.TList,(function(){})),rtl.createClass(t,"TTMSFNCGeneralPDFLibPage",t.TTMSFNCGeneralPDFLibObject,(function(){this.$init=function(){t.TTMSFNCGeneralPDFLibObject.$init.call(this),this.FPageNumber=0,this.FFontList=null,this.FXObjectList=null,this.FShadings=null,this.FPatterns=null,this.FBitmaps=null,this.FContent=null,this.FAnnotations=null,this.FInsertPageNumber=0},this.$final=function(){this.FFontList=void 0,this.FXObjectList=void 0,this.FShadings=void 0,this.FPatterns=void 0,this.FBitmaps=void 0,this.FContent=void 0,this.FAnnotations=void 0,t.TTMSFNCGeneralPDFLibObject.$final.call(this)},this.Create$2=function(e,i){return t.TTMSFNCGeneralPDFLibObject.Create$1.call(this,e,-1,0),this.FPageNumber=i,this.FInsertPageNumber=i,this.FFontList=t.TTMSFNCGeneralPDFLibFonts.$create("Create$1"),this.FXObjectList=t.TTMSFNCGeneralPDFLibXObjects.$create("Create$1"),this.FShadings=t.TTMSFNCGeneralPDFLibShadings.$create("Create$1"),this.FBitmaps=t.TTMSFNCGeneralPDFLibBitmaps.$create("Create$1"),this.FAnnotations=t.TTMSFNCGeneralPDFLibAnnotations.$create("Create$1"),this.FPatterns=t.TTMSFNCGeneralPDFLibPatterns.$create("Create$1"),this},this.Destroy=function(){this.FContent=null,null!=this.FAnnotations&&(rtl.free(this,"FAnnotations"),this.FAnnotations=null),null!=this.FBitmaps&&(rtl.free(this,"FBitmaps"),this.FBitmaps=null),null!=this.FShadings&&(rtl.free(this,"FShadings"),this.FShadings=null),null!=this.FPatterns&&(rtl.free(this,"FPatterns"),this.FPatterns=null),null!=this.FXObjectList&&(rtl.free(this,"FXObjectList"),this.FXObjectList=null),null!=this.FFontList&&(rtl.free(this,"FFontList"),this.FFontList=null),t.TTMSFNCGeneralPDFLibObject.Destroy.call(this)}})),rtl.createClass(t,"TTMSFNCGeneralPDFLibAcroFormField",t.TTMSFNCGeneralPDFLibObject,(function(){this.$init=function(){t.TTMSFNCGeneralPDFLibObject.$init.call(this),this.FContent=null},this.$final=function(){this.FContent=void 0,t.TTMSFNCGeneralPDFLibObject.$final.call(this)},this.Destroy=function(){this.FContent=null,t.TTMSFNCGeneralPDFLibObject.Destroy.call(this)}})),rtl.createClass(t,"TTMSFNCGeneralPDFLibContent",t.TTMSFNCGeneralPDFLibObject,(function(){this.$init=function(){t.TTMSFNCGeneralPDFLibObject.$init.call(this),this.FPage=null},this.$final=function(){this.FPage=void 0,t.TTMSFNCGeneralPDFLibObject.$final.call(this)},this.Destroy=function(){this.FPage=null,t.TTMSFNCGeneralPDFLibObject.Destroy.call(this)}})),rtl.createClass(t,"TTMSFNCGeneralPDFLibAcroForm",t.TTMSFNCGeneralPDFLibObject,(function(){})),rtl.createClass(t,"TTMSFNCGeneralPDFLibFont",t.TTMSFNCGeneralPDFLibObject,(function(){this.$init=function(){t.TTMSFNCGeneralPDFLibObject.$init.call(this),this.FInitializer=null,this.FSize=0,this.FName="",this.FStyle={},this.FBase="",this.FUnicode=!1,this.FDescent=0,this.FAscent=0,this.FBox=pas.Types.TRect.$new(),this.FItalicAngle=0,this.FFontFile=null,this.FFontDescriptor=null,this.FFontDescendant=null,this.FFontUnicode=null,this.FTrueType=!1,this.FCapHeight=0,this.FUnitsPerEm=0},this.$final=function(){this.FInitializer=void 0,this.FStyle=void 0,this.FBox=void 0,this.FFontFile=void 0,this.FFontDescriptor=void 0,this.FFontDescendant=void 0,this.FFontUnicode=void 0,t.TTMSFNCGeneralPDFLibObject.$final.call(this)},this.GetGlyphIDs=function(){return this.FInitializer.GetGlyphIds()},this.GetCharArray=function(){var t=pas["WEBLib.TMSFNCPDFCoreLibBase"].TTMSFNCPDFGraphicsLibFontCharArray.$new();return t.$assign(this.FInitializer.GetCharArray()),t},this.GetCharWidths=function(){return this.FInitializer.GetCharWidths()},this.GetUsedCharArray=function(){return this.FInitializer.GetUsedCharArray()},this.GetRefNameBase=function(){return"FT","FT"},this.BoxAsString=function(){return pas.SysUtils.IntToStr(this.FBox.Left)+" "+pas.SysUtils.IntToStr(this.FBox.Bottom)+" "+pas.SysUtils.IntToStr(this.FBox.Right)+" "+pas.SysUtils.IntToStr(this.FBox.Top)},this.WidthsAsString=function(){var t="",e=0,i=0,s=0;t="";for(var n=this.FirstGlyph(),r=this.LastGlyph();n<=r;n++)e=n,i=this.GetUsedCharArray().IndexOf(e),s=this.GetCharArray().IndexOf(e),i>-1&&s>-1?t=t+pas.SysUtils.IntToStr(this.GetCharWidths()[s].w)+" ":t+="0 ";return t=pas.SysUtils.Trim(t)},this.GlyphsAndWidthsAsString=function(){var t="",e=0,i=0,s=0;t="";for(var n=0,r=this.GetUsedCharArray().GetCount()-1;n<=r;n++)e=n,i=this.GetUsedCharArray().GetItem(e),(s=this.GetCharArray().IndexOf(i))>-1&&(t=this.FPDFLib.FEmbedFonts&&!this.FPDFLib.FFullFontEmbedding?t+pas.SysUtils.IntToStr(this.GetGlyphIDs().IndexOf(this.GetCharWidths()[s].g))+"["+pas.SysUtils.IntToStr(this.GetCharWidths()[s].w)+"] ":t+pas.SysUtils.IntToStr(this.GetCharWidths()[s].g)+"["+pas.SysUtils.IntToStr(this.GetCharWidths()[s].w)+"] ");return t=pas.SysUtils.Trim(t)},this.FirstGlyphAsString=function(){return pas.SysUtils.IntToStr(this.FirstGlyph())},this.LastGlyphAsString=function(){return pas.SysUtils.IntToStr(this.LastGlyph())},this.FirstGlyph=function(){var t=0;return t=0,this.GetUsedCharArray().GetCount()>0&&(t=this.GetUsedCharArray().GetItem(0)),t},this.LastGlyph=function(){var t=0;return t=0,this.GetUsedCharArray().GetCount()>0&&(t=this.GetUsedCharArray().GetItem(this.GetUsedCharArray().GetCount()-1)),t},this.Create$2=function(e,i,s,n,r,o){return t.TTMSFNCGeneralPDFLibObject.Create$1.call(this,e,-1,0),this.FInitializer=pas["WEBLib.TMSFNCPDFLib.General.WEB"].TTMSFNCGeneralPDFLibFontInitializer.$create("Create$1",[i,s,o,r]),this.FFontFile=null,this.FFontDescriptor=null,this.FFontDescendant=null,this.FFontUnicode=null,this.FBase=s,this.FSize=r,this.FName=n,this.FStyle=rtl.refSet(o),this},this.Destroy=function(){null!=this.FInitializer&&(rtl.free(this,"FInitializer"),this.FInitializer=null),this.FFontFile=null,this.FFontDescriptor=null,this.FFontDescendant=null,this.FFontUnicode=null,t.TTMSFNCGeneralPDFLibObject.Destroy.call(this)}})),rtl.createClass(t,"TTMSFNCGeneralPDFLibFontDescriptor",t.TTMSFNCGeneralPDFLibObject,(function(){this.$init=function(){t.TTMSFNCGeneralPDFLibObject.$init.call(this),this.FFont=null},this.$final=function(){this.FFont=void 0,t.TTMSFNCGeneralPDFLibObject.$final.call(this)},this.Create$2=function(e,i){return t.TTMSFNCGeneralPDFLibObject.Create$1.call(this,e,-1,0),this.FFont=i,this},this.Destroy=function(){this.FFont=null,t.TTMSFNCGeneralPDFLibObject.Destroy.call(this)}})),rtl.createClass(t,"TTMSFNCGeneralPDFLibFontFile",t.TTMSFNCGeneralPDFLibObject,(function(){this.$init=function(){t.TTMSFNCGeneralPDFLibObject.$init.call(this),this.FFont=null},this.$final=function(){this.FFont=void 0,t.TTMSFNCGeneralPDFLibObject.$final.call(this)},this.Create$2=function(e,i){return t.TTMSFNCGeneralPDFLibObject.Create$1.call(this,e,-1,0),this.FFont=i,this},this.Destroy=function(){this.FFont=null,t.TTMSFNCGeneralPDFLibObject.Destroy.call(this)},this.InitializeFontFile=function(){null!=this.FFont&&(this.FFont.FInitializer.FFullFont=this.FPDFLib.FFullFontEmbedding,this.FFont.FInitializer.InitializeFontFile())}})),rtl.createClass(t,"TTMSFNCGeneralPDFLibFontDescendant",t.TTMSFNCGeneralPDFLibObject,(function(){this.$init=function(){t.TTMSFNCGeneralPDFLibObject.$init.call(this),this.FFont=null},this.$final=function(){this.FFont=void 0,t.TTMSFNCGeneralPDFLibObject.$final.call(this)},this.Create$2=function(e,i){return t.TTMSFNCGeneralPDFLibObject.Create$1.call(this,e,-1,0),this.FFont=i,this},this.Destroy=function(){this.FFont=null,t.TTMSFNCGeneralPDFLibObject.Destroy.call(this)}})),rtl.createClass(t,"TTMSFNCGeneralPDFLibFontUnicode",t.TTMSFNCGeneralPDFLibObject,(function(){this.$init=function(){t.TTMSFNCGeneralPDFLibObject.$init.call(this),this.FFont=null},this.$final=function(){this.FFont=void 0,t.TTMSFNCGeneralPDFLibObject.$final.call(this)},this.Create$2=function(e,i){return t.TTMSFNCGeneralPDFLibObject.Create$1.call(this,e,-1,0),this.FFont=i,this},this.Destroy=function(){this.FFont=null,t.TTMSFNCGeneralPDFLibObject.Destroy.call(this)}})),rtl.createClass(t,"TTMSFNCGeneralPDFLibXObject",t.TTMSFNCGeneralPDFLibObject,(function(){})),rtl.createClass(t,"TTMSFNCGeneralPDFLibBitmap",t.TTMSFNCGeneralPDFLibXObject,(function(){this.$init=function(){t.TTMSFNCGeneralPDFLibXObject.$init.call(this),this.FStream=null,this.FBitmap=null,this.FImageType=0,this.FQuality=0,this.FBackgroundColor=0},this.$final=function(){this.FStream=void 0,this.FBitmap=void 0,t.TTMSFNCGeneralPDFLibXObject.$final.call(this)},this.GetRefNameBase=function(){return"IM","IM"},this.Create$2=function(e,i,s,n,r,o){return t.TTMSFNCGeneralPDFLibObject.Create$1.call(this,e,-1,0),this.FBitmap=pas["WEBLib.TMSFNCTypes"].TTMSFNCBitmap.$create("Create$3"),this.FBitmap.Assign(i),this.FImageType=n,this.FQuality=r,this.FBackgroundColor=o,this.FStream=pas.Classes.TMemoryStream.$create("Create"),this.FStream.LoadFromStream(s),this},this.Destroy=function(){null!=this.FStream&&(rtl.free(this,"FStream"),this.FStream=null),null!=this.FBitmap&&(rtl.free(this,"FBitmap"),this.FBitmap=null),t.TTMSFNCGeneralPDFLibObject.Destroy.call(this)}})),rtl.createClass(t,"TTMSFNCGeneralPDFLibShadingSubFunction",t.TTMSFNCGeneralPDFLibObject,(function(){this.$init=function(){t.TTMSFNCGeneralPDFLibObject.$init.call(this),this.FFillColor=0,this.FFillColorTo=0},this.Create$2=function(e,i,s){return t.TTMSFNCGeneralPDFLibObject.Create$1.call(this,e,-1,0),this.FFillColor=i,this.FFillColorTo=s,this}})),rtl.createClass(t,"TTMSFNCGeneralPDFLibShadingSubFunctions",pas.Classes.TList,(function(){})),rtl.createClass(t,"TTMSFNCGeneralPDFLibShadingFunction",t.TTMSFNCGeneralPDFLibObject,(function(){this.$init=function(){t.TTMSFNCGeneralPDFLibObject.$init.call(this),this.FSubFunctions=null},this.$final=function(){this.FSubFunctions=void 0,t.TTMSFNCGeneralPDFLibObject.$final.call(this)},this.Create$2=function(e){return t.TTMSFNCGeneralPDFLibObject.Create$1.call(this,e,-1,0),this.FSubFunctions=t.TTMSFNCGeneralPDFLibShadingSubFunctions.$create("Create$1"),this},this.Destroy=function(){null!=this.FSubFunctions&&(rtl.free(this,"FSubFunctions"),this.FSubFunctions=null),t.TTMSFNCGeneralPDFLibObject.Destroy.call(this)},this.SubFunctionsRef=function(){var t="",e=null,i=void 0;if(t="",null!=this.FSubFunctions){var s=this.FSubFunctions.GetEnumerator();try{for(;s.MoveNext();)i=s.GetCurrent(),e=rtl.getObject(i),t=t+pas.SysUtils.IntToStr(this.FPDFLib.FXRefObjects.IndexOf$1(e.FXRefObject))+" 0 R "}finally{s=rtl.freeLoc(s)}t=pas.SysUtils.Trim(t)}return t}})),rtl.createClass(t,"TTMSFNCGeneralPDFLibShading",t.TTMSFNCGeneralPDFLibObject,(function(){this.$init=function(){t.TTMSFNCGeneralPDFLibObject.$init.call(this),this.FFunction=null,this.FRect=pas["WEBLib.TMSFNCTypes"].TRectF.$new()},this.$final=function(){this.FFunction=void 0,this.FRect=void 0,t.TTMSFNCGeneralPDFLibObject.$final.call(this)},this.Create$2=function(e){return t.TTMSFNCGeneralPDFLibObject.Create$1.call(this,e,-1,0),this},this.Destroy=function(){this.FFunction=null,t.TTMSFNCGeneralPDFLibObject.Destroy.call(this)},this.RectAsString=function(){var e="";if(e="0 0 0 0",t.TTMSFNCGeneralPDFLibLinearGradient.isPrototypeOf(this)){var i=rtl.as(this,t.TTMSFNCGeneralPDFLibLinearGradient).FFillOrientation;0===i?e=pas.SysUtils.IntToStr(Math.round(this.FRect.Left))+" "+pas.SysUtils.IntToStr(Math.round(this.FRect.Top))+" "+pas.SysUtils.IntToStr(Math.round(this.FRect.Right))+" "+pas.SysUtils.IntToStr(Math.round(this.FRect.Bottom-(this.FRect.Bottom-this.FRect.Top))):1===i&&(e=pas.SysUtils.IntToStr(Math.round(this.FRect.Left))+" "+pas.SysUtils.IntToStr(Math.round(this.FRect.Bottom))+" "+pas.SysUtils.IntToStr(Math.round(this.FRect.Left))+" "+pas.SysUtils.IntToStr(Math.round(this.FRect.Bottom-(this.FRect.Bottom-this.FRect.Top))))}return e}})),rtl.createClass(t,"TTMSFNCGeneralPDFLibAnnotation",t.TTMSFNCGeneralPDFLibObject,(function(){this.$init=function(){t.TTMSFNCGeneralPDFLibObject.$init.call(this),this.FAcroFormField=null,this.FRect=pas["WEBLib.TMSFNCTypes"].TRectF.$new()},this.$final=function(){this.FAcroFormField=void 0,this.FRect=void 0,t.TTMSFNCGeneralPDFLibObject.$final.call(this)},this.Create$2=function(e,i){return t.TTMSFNCGeneralPDFLibObject.Create$1.call(this,e,-1,0),this.FRect.$assign(i),this},this.Destroy=function(){this.FAcroFormField=null,t.TTMSFNCGeneralPDFLibObject.Destroy.call(this)},this.RectAsString=function(){return pas.SysUtils.IntToStr(Math.round(this.FRect.Left))+" "+pas.SysUtils.IntToStr(Math.round(this.FRect.Top))+" "+pas.SysUtils.IntToStr(Math.round(this.FRect.Right))+" "+pas.SysUtils.IntToStr(Math.round(this.FRect.Bottom))}})),rtl.createClass(t,"TTMSFNCGeneralPDFLibURL",t.TTMSFNCGeneralPDFLibAnnotation,(function(){this.$init=function(){t.TTMSFNCGeneralPDFLibAnnotation.$init.call(this),this.FURL=""},this.Create$3=function(e,i,s){return t.TTMSFNCGeneralPDFLibAnnotation.Create$2.call(this,e,i),this.FURL=s,this}})),rtl.createClass(t,"TTMSFNCGeneralPDFLibGoTo",t.TTMSFNCGeneralPDFLibAnnotation,(function(){this.$init=function(){t.TTMSFNCGeneralPDFLibAnnotation.$init.call(this),this.FDestination=""},this.Create$3=function(e,i,s){return t.TTMSFNCGeneralPDFLibAnnotation.Create$2.call(this,e,i),this.FDestination=s,this}})),rtl.createClass(t,"TTMSFNCGeneralPDFLibAcroFormFieldContent",t.TTMSFNCGeneralPDFLibObject,(function(){})),rtl.createClass(t,"TTMSFNCGeneralPDFLibPattern",t.TTMSFNCGeneralPDFLibObject,(function(){this.$init=function(){t.TTMSFNCGeneralPDFLibObject.$init.call(this),this.FShading=null},this.$final=function(){this.FShading=void 0,t.TTMSFNCGeneralPDFLibObject.$final.call(this)},this.GetRefNameBase=function(){return"PT","PT"},this.Destroy=function(){this.FShading=null,t.TTMSFNCGeneralPDFLibObject.Destroy.call(this)}})),rtl.createClass(t,"TTMSFNCGeneralPDFLibLinearGradient",t.TTMSFNCGeneralPDFLibShading,(function(){this.$init=function(){t.TTMSFNCGeneralPDFLibShading.$init.call(this),this.FFillOrientation=0},this.Create$3=function(e,i){return t.TTMSFNCGeneralPDFLibShading.Create$2.call(this,e),this.FFillOrientation=i,this}})),rtl.createClass(t,"TTMSFNCGeneralPDFLibXRefObject",pas.System.TObject,(function(){this.$init=function(){pas.System.TObject.$init.call(this),this.FXRefOffset=0,this.FXRefNumber=0,this.FXRefType="",this.FXRefObject=null,this.FInXRefList=!1},this.$final=function(){this.FXRefObject=void 0,pas.System.TObject.$final.call(this)},this.Create$1=function(t){return null!=t?(this.FXRefType="n",this.FXRefNumber=t.FNumber,this.FXRefObject=t):(this.FXRefType="f",this.FXRefNumber=0),this.FXRefOffset=-1,this.FInXRefList=!0,this},this.Destroy=function(){null!=this.FXRefObject&&(rtl.free(this,"FXRefObject"),this.FXRefObject=null),pas.System.TObject.Destroy.call(this)},this.FormatValue=function(t,e){var i="",s="";i="";for(var n=0,r=e-(s=t>0?pas.SysUtils.IntToStr(t):"0").length-1;n<=r;n++)n,i+="0";return i+=s},this.GenerateXRefValue=function(){return this.$class.FormatValue(this.FXRefOffset,10)+" "+this.$class.FormatValue(this.FXRefNumber,5)+" "+this.FXRefType}})),rtl.createClass(t,"TTMSFNCGeneralPDFLibXRefObjects",pas.contnrs.TObjectList,(function(){this.GetItem$1=function(t){return this.GetItem(t)},this.AddObjectClass=function(e){var i,s,n=null;return n=e.$create("Create$1",[null,-1,0]),i=t.TTMSFNCGeneralPDFLibXRefObject.$create("Create$1",[n]),s=this.Add$1(i),null!=n&&(n.SetNumber(s),n.FXRefObject=i),i},this.AddObject=function(e){var i,s;return i=t.TTMSFNCGeneralPDFLibXRefObject.$create("Create$1",[e]),s=this.Add$1(i),null!=e&&(e.SetNumber(s),e.FXRefObject=i),i},this.IndexOfObject=function(t,e){var i=0,s=0,n=0,r=null;if(i=-1,n=-1,null!=t)for(var o=0,a=this.GetCount()-1;o<=a;o++)if(s=o,null!=(r=this.GetItem$1(s).FXRefObject)){if((!e||e&&r.$class.ClassType()===t.$class.ClassType())&&(n+=1),this.GetItem$1(s).FXRefObject===t){i=n;break}}else e||(n+=1);return i}})),rtl.createClass(t,"TTMSFNCGeneralPDFLib",pas.System.TInterfacedObject,(function(){this.$init=function(){pas.System.TInterfacedObject.$init.call(this),this.FOnBeforeDrawHeader=null,this.FOnBeforeDrawFooter=null,this.FOnBeforeDrawPageNumber=null,this.FOnAfterDrawHeader=null,this.FOnAfterDrawFooter=null,this.FOnAfterDrawPageNumber=null,this.FOnNewPageStarted=null,this.FPageHeight=0,this.FPageWidth=0,this.FBlockFontUpdate=!1,this.FOSFontList=null,this.FInfo=null,this.FDestOutputProfile=null,this.FInitializer=null,this.FAcroForm=null,this.FOutputIntent=null,this.FActivePage=null,this.FActiveFont=null,this.FActiveShading=null,this.XRefAddress=0,this.FXRefObjects=null,this.FFontList=null,this.FAcroFormFields=null,this.FPageCount=0,this.FOutput=null,this.FPDFFileName="",this.FDocumentStarted=!1,this.FPageStarted=!1,this.FPDFGraphicsLib=null,this.FPDFGraphicsExLib=null,this.FPDFInitializationLib=null,this.FMediaBox=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),this.FPageOrientation=0,this.FAuthor="",this.FSubject="",this.FAllowsPrinting=!1,this.FTitle="",this.FCreator="",this.FAllowsCopying=!1,this.FKeywords=null,this.FBleedBox=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),this.FCropBox=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),this.FArtBox=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),this.FTrimBox=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),this.FPageSize=0,this.FPageNumberFormat="",this.FPageNumber=0,this.FPageNumberSize=0,this.FPageNumberMargins=null,this.FHeader="",this.FFooter="",this.FHeaderSize=0,this.FHeaderMargins=null,this.FFooterMargins=null,this.FFooterSize=0,this.FFooterAlignment=0,this.FHeaderAlignment=0,this.FPageNumberAlignment=0,this.FProducer="",this.FEmbedFonts=!1,this.FFullFontEmbedding=!1,this.FFontFallBackList=null,this.FFooterFont=null,this.FHeaderFont=null,this.FPageNumberFont=null,this.FPDFStandard=0},this.$final=function(){this.FOnBeforeDrawHeader=void 0,this.FOnBeforeDrawFooter=void 0,this.FOnBeforeDrawPageNumber=void 0,this.FOnAfterDrawHeader=void 0,this.FOnAfterDrawFooter=void 0,this.FOnAfterDrawPageNumber=void 0,this.FOnNewPageStarted=void 0,this.FOSFontList=void 0,this.FInfo=void 0,this.FDestOutputProfile=void 0,this.FInitializer=void 0,this.FAcroForm=void 0,this.FOutputIntent=void 0,this.FActivePage=void 0,this.FActiveFont=void 0,this.FActiveShading=void 0,this.FXRefObjects=void 0,this.FFontList=void 0,this.FAcroFormFields=void 0,this.FOutput=void 0,rtl.setIntfP(this,"FPDFGraphicsLib",null),rtl.setIntfP(this,"FPDFGraphicsExLib",null),rtl.setIntfP(this,"FPDFInitializationLib",null),this.FMediaBox=void 0,this.FKeywords=void 0,this.FBleedBox=void 0,this.FCropBox=void 0,this.FArtBox=void 0,this.FTrimBox=void 0,this.FPageNumberMargins=void 0,this.FHeaderMargins=void 0,this.FFooterMargins=void 0,this.FFontFallBackList=void 0,this.FFooterFont=void 0,this.FHeaderFont=void 0,this.FPageNumberFont=void 0,pas.System.TInterfacedObject.$final.call(this)},this.SetPageSize=function(t){this.FPageSize=t,this.UpdateBoxRect()},this.SetPageOrientation=function(t){this.FPageOrientation=t,this.UpdateBoxRect()},this.SetFooter=function(t){this.FFooter=t},this.SetFooterSize=function(t){this.FFooterSize=t},this.SetHeader=function(t){this.FHeader=t},this.SetHeaderSize=function(t){this.FHeaderSize=t},this.SetBitmapContainer=function(t){null!=this.FPDFGraphicsLib&&this.FPDFGraphicsLib.SetBitmapContainer(t)},this.GetMediaBox=function(){var t=pas["WEBLib.TMSFNCTypes"].TRectF.$new();return t.$assign(this.FMediaBox),t},this.GetFooterFont=function(){return this.FFooterFont},this.GetHeaderFont=function(){return this.FHeaderFont},this.GetPageNumberFont=function(){return this.FPageNumberFont},this.GetPageHeight=function(){return this.FPageHeight},this.GetPageWidth=function(){return this.FPageWidth},this.GetOnAfterDrawFooter=function(){return this.FOnAfterDrawFooter},this.GetOnAfterDrawHeader=function(){return this.FOnAfterDrawHeader},this.GetOnAfterDrawPageNumber=function(){return this.FOnAfterDrawPageNumber},this.GetOnBeforeDrawFooter=function(){return this.FOnBeforeDrawFooter},this.GetOnBeforeDrawHeader=function(){return this.FOnBeforeDrawHeader},this.GetOnBeforeDrawPageNumber=function(){return this.FOnBeforeDrawPageNumber},this.GetOnNewPageStarted=function(){return this.FOnNewPageStarted},this.DoNewPageStarted=function(t){null!=this.GetOnNewPageStarted()&&this.GetOnNewPageStarted()(this,t)},this.DoBeforeDrawHeader=function(t,e,i,s,n,r){null!=this.GetOnBeforeDrawHeader()&&this.GetOnBeforeDrawHeader()(this,e,i,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(s),n,r)},this.DoBeforeDrawPageNumber=function(t,e,i,s,n,r){null!=this.GetOnBeforeDrawPageNumber()&&this.GetOnBeforeDrawPageNumber()(this,e,i,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(s),n,r)},this.DoBeforeDrawFooter=function(t,e,i,s,n,r){null!=this.GetOnBeforeDrawFooter()&&this.GetOnBeforeDrawFooter()(this,e,i,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(s),n,r)},this.DoAfterDrawHeader=function(t,e,i,s,n){null!=this.GetOnAfterDrawHeader()&&this.GetOnAfterDrawHeader()(this,e,i,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(s),n)},this.DoAfterDrawPageNumber=function(t,e,i,s,n){null!=this.GetOnAfterDrawPageNumber()&&this.GetOnAfterDrawPageNumber()(this,e,i,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(s),n)},this.DoAfterDrawFooter=function(t,e,i,s,n){null!=this.GetOnAfterDrawFooter()&&this.GetOnAfterDrawFooter()(this,e,i,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(s),n)},this.FontChanged=function(t){this.UpdateFontList(!1)},this.NotifyURL=function(e,i,s){var n=null;null!=this.FActivePage&&(n=t.TTMSFNCGeneralPDFLibURL.$create("Create$3",[this,i,s]),this.FXRefObjects.AddObject(n),this.FActivePage.FAnnotations.Add(n))},this.NotifyGoTo=function(e,i,s){var n=null;null!=this.FActivePage&&(n=t.TTMSFNCGeneralPDFLibGoTo.$create("Create$3",[this,i,s]),this.FXRefObjects.AddObject(n),this.FActivePage.FAnnotations.Add(n))},this.NotifyUnicode=function(t,e){var i=0,s=0,n=!1,r="",o="",a="",l=!1;if(null!=this.FOutput&&null!=this.FActiveFont){r=this.FActiveFont.FBase;var h=this.FFontFallBackList.GetEnumerator();try{for(;h.MoveNext();){r=h.GetCurrent(),l=0===this.FActiveFont.GetUsedCharArray().GetCount(),n=!0;for(var F=1,p=e.length;F<=p;F++)if(i=F,(s=e.charCodeAt(i-1))>=32&&this.FActiveFont.GetCharArray().IndexOf(s)<0){n=!1;break}if(n)break;l&&(this.FActiveFont.FInactive=!0,this.FActiveFont=null),o=this.VerifyFontName(r),this.FBlockFontUpdate=!0,this.FPDFGraphicsLib.GetFont().SetName(o),this.FBlockFontUpdate=!1,this.UpdateFontList(!0)}}finally{h=rtl.freeLoc(h)}null==this.FActiveFont||this.FActiveFont.FUnicode||(a=this.FActiveFont.FBase,(l=0===this.FActiveFont.GetUsedCharArray().GetCount())&&(this.FActiveFont.FInactive=!0,this.FActiveFont=null),this.FBlockFontUpdate=!0,this.FPDFGraphicsLib.GetFont().SetName(this.VerifyFontName(a)),this.FBlockFontUpdate=!1,this.UpdateFontList(!0),this.FActiveFont.FUnicode=!0,this.UpdateFontList(!0))}},this.NotifyText=function(t,e){this.UpdateFontList(!1)},this.NotifyShading=function(e,i,s,n,r){var o=null,a=null,l=null,h=null;null!=this.FActivePage&&(o=t.TTMSFNCGeneralPDFLibLinearGradient.$create("Create$3",[this,n]),this.FXRefObjects.AddObject(o),a=t.TTMSFNCGeneralPDFLibShadingFunction.$create("Create$2",[this]),this.FXRefObjects.AddObject(a),o.FFunction=a,l=t.TTMSFNCGeneralPDFLibShadingSubFunction.$create("Create$2",[this,i,s]),this.FXRefObjects.AddObject(l),a.FSubFunctions.Add(l),l=t.TTMSFNCGeneralPDFLibShadingSubFunction.$create("Create$2",[this,i,s]),this.FXRefObjects.AddObject(l),a.FSubFunctions.Add(l),this.FActivePage.FShadings.Add(o),(h=t.TTMSFNCGeneralPDFLibPattern.$create("Create$1",[this,-1,0])).FShading=o,this.FXRefObjects.AddObject(h),this.FActivePage.FPatterns.Add(h),r.set(pas.SysUtils.Format(t.PDFPageShadingObjectRef,pas.System.VarRecs(18,h.GetRefNameNotEscaped()))),h.FRefNameOriginal=r.get(),this.FActiveShading=o)},this.NotifyShadingRect=function(t,e){null!=this.FActiveShading&&this.FActiveShading.FRect.$assign(e)},this.NotifyBitmap=function(e,i,s,n,r,o){var a,l,h,F,p=null,c=null,u=null,d=void 0,S="",C=null;if(null!=this.FActivePage&&null!=i){u=pas.Classes.TMemoryStream.$create("Create");try{a=i.Image(),l=a,h=n,(F=document.createElement("canvas")).width=l.width,F.height=l.height,F.getContext("2d").drawImage(l,0,0),S=F.toDataURL("image/jpeg",h).replace(/^data:image\/(png|jpg|jpeg);base64,/,"");for(var T=window.atob(S),m=T.length,g=new Uint8Array(m),f=0;f<m;f++)g[f]=T.charCodeAt(f);u.Write(g,g.length),p=null;var b=this.FXRefObjects.GetEnumerator();try{for(;b.MoveNext();)if(d=b.GetCurrent(),null!=(C=rtl.getObject(d)).FXRefObject&&t.TTMSFNCGeneralPDFLibBitmap.isPrototypeOf(C.FXRefObject)&&null!=(c=rtl.as(C.FXRefObject,t.TTMSFNCGeneralPDFLibBitmap)).FStream&&n===c.FQuality&&r===c.FBackgroundColor&&this.CompareStreams(c.FStream,u)){p=c;break}}finally{b=rtl.freeLoc(b)}null==p&&(p=t.TTMSFNCGeneralPDFLibBitmap.$create("Create$2",[this,i,u,s,n,r]),this.FXRefObjects.AddObject(p)),this.FActivePage.FBitmaps.IndexOf(p)<0&&this.FActivePage.FBitmaps.Add(p),this.FActivePage.FXObjectList.IndexOf(p)<0&&this.FActivePage.FXObjectList.Add(p),o.set(pas.SysUtils.Format(t.PDFPageBitmapObjectRef,pas.System.VarRecs(18,p.GetRefNameNotEscaped()))),p.FRefNameOriginal=o.get()}finally{u=rtl.freeLoc(u)}}},this.UpdateBoxRect=function(){var t=0,e=0,i=null;try{var s=this.FPageSize;0===s?this.FMediaBox.$assign(pas["WEBLib.TMSFNCTypes"].RectF(0,0,2384,3370)):1===s?this.FMediaBox.$assign(pas["WEBLib.TMSFNCTypes"].RectF(0,0,1684,2384)):2===s?this.FMediaBox.$assign(pas["WEBLib.TMSFNCTypes"].RectF(0,0,1190,1684)):3===s?this.FMediaBox.$assign(pas["WEBLib.TMSFNCTypes"].RectF(0,0,842,1190)):4===s?this.FMediaBox.$assign(pas["WEBLib.TMSFNCTypes"].RectF(0,0,595,842)):5===s?this.FMediaBox.$assign(pas["WEBLib.TMSFNCTypes"].RectF(0,0,420,595)):6===s?this.FMediaBox.$assign(pas["WEBLib.TMSFNCTypes"].RectF(0,0,298,420)):7===s?this.FMediaBox.$assign(pas["WEBLib.TMSFNCTypes"].RectF(0,0,210,298)):8===s?this.FMediaBox.$assign(pas["WEBLib.TMSFNCTypes"].RectF(0,0,148,210)):9===s?this.FMediaBox.$assign(pas["WEBLib.TMSFNCTypes"].RectF(0,0,2835,4008)):10===s?this.FMediaBox.$assign(pas["WEBLib.TMSFNCTypes"].RectF(0,0,2004,2835)):11===s?this.FMediaBox.$assign(pas["WEBLib.TMSFNCTypes"].RectF(0,0,1417,2004)):12===s?this.FMediaBox.$assign(pas["WEBLib.TMSFNCTypes"].RectF(0,0,1001,1417)):13===s?this.FMediaBox.$assign(pas["WEBLib.TMSFNCTypes"].RectF(0,0,709,1001)):14===s?this.FMediaBox.$assign(pas["WEBLib.TMSFNCTypes"].RectF(0,0,499,709)):15===s?this.FMediaBox.$assign(pas["WEBLib.TMSFNCTypes"].RectF(0,0,354,499)):16===s?this.FMediaBox.$assign(pas["WEBLib.TMSFNCTypes"].RectF(0,0,249,354)):17===s?this.FMediaBox.$assign(pas["WEBLib.TMSFNCTypes"].RectF(0,0,176,249)):18===s?this.FMediaBox.$assign(pas["WEBLib.TMSFNCTypes"].RectF(0,0,125,176)):19===s?this.FMediaBox.$assign(pas["WEBLib.TMSFNCTypes"].RectF(0,0,88,125)):20===s?this.FMediaBox.$assign(pas["WEBLib.TMSFNCTypes"].RectF(0,0,1837,578)):21===s?this.FMediaBox.$assign(pas["WEBLib.TMSFNCTypes"].RectF(0,0,578,919)):22===s?this.FMediaBox.$assign(pas["WEBLib.TMSFNCTypes"].RectF(0,0,919,649)):23===s?this.FMediaBox.$assign(pas["WEBLib.TMSFNCTypes"].RectF(0,0,649,459)):24===s?this.FMediaBox.$assign(pas["WEBLib.TMSFNCTypes"].RectF(0,0,459,323)):25===s?this.FMediaBox.$assign(pas["WEBLib.TMSFNCTypes"].RectF(0,0,3090,2186)):26===s?this.FMediaBox.$assign(pas["WEBLib.TMSFNCTypes"].RectF(0,0,3628,2551)):27===s?this.FMediaBox.$assign(pas["WEBLib.TMSFNCTypes"].RectF(0,0,2551,1814)):28===s?this.FMediaBox.$assign(pas["WEBLib.TMSFNCTypes"].RectF(0,0,1814,1276)):29===s?this.FMediaBox.$assign(pas["WEBLib.TMSFNCTypes"].RectF(0,0,1276,907)):30===s?this.FMediaBox.$assign(pas["WEBLib.TMSFNCTypes"].RectF(0,0,907,638)):31===s?this.FMediaBox.$assign(pas["WEBLib.TMSFNCTypes"].RectF(0,0,3458,2438)):32===s?this.FMediaBox.$assign(pas["WEBLib.TMSFNCTypes"].RectF(0,0,2438,1729)):33===s?this.FMediaBox.$assign(pas["WEBLib.TMSFNCTypes"].RectF(0,0,1729,1219)):34===s?this.FMediaBox.$assign(pas["WEBLib.TMSFNCTypes"].RectF(0,0,612,792)):35===s?this.FMediaBox.$assign(pas["WEBLib.TMSFNCTypes"].RectF(0,0,612,1008)):36===s?this.FMediaBox.$assign(pas["WEBLib.TMSFNCTypes"].RectF(0,0,792,1224)):37===s?this.FMediaBox.$assign(pas["WEBLib.TMSFNCTypes"].RectF(0,0,1224,792)):38===s?this.FMediaBox.$assign(pas["WEBLib.TMSFNCTypes"].RectF(0,0,522,756)):39===s?this.FMediaBox.$assign(pas["WEBLib.TMSFNCTypes"].RectF(0,0,1584,1224)):40===s?this.FMediaBox.$assign(pas["WEBLib.TMSFNCTypes"].RectF(0,0,2448,1584)):41===s?this.FMediaBox.$assign(pas["WEBLib.TMSFNCTypes"].RectF(0,0,3168,2448)):42===s?this.FMediaBox.$assign(pas["WEBLib.TMSFNCTypes"].RectF(0,0,954,1188)):43===s?this.FMediaBox.$assign(pas["WEBLib.TMSFNCTypes"].RectF(0,0,1044,1332)):44===s?this.FMediaBox.$assign(pas["WEBLib.TMSFNCTypes"].RectF(0,0,954,1584)):45===s?this.FMediaBox.$assign(pas["WEBLib.TMSFNCTypes"].RectF(0,0,954,1782)):46===s?this.FMediaBox.$assign(pas["WEBLib.TMSFNCTypes"].RectF(0,0,1116,1440)):47===s?this.FMediaBox.$assign(pas["WEBLib.TMSFNCTypes"].RectF(0,0,1188,1512)):48===s?this.FMediaBox.$assign(pas["WEBLib.TMSFNCTypes"].RectF(0,0,1260,1584)):49===s?this.FMediaBox.$assign(pas["WEBLib.TMSFNCTypes"].RectF(0,0,1296,1656)):50===s?this.FMediaBox.$assign(pas["WEBLib.TMSFNCTypes"].RectF(0,0,1368,1728)):51===s?this.FMediaBox.$assign(pas["WEBLib.TMSFNCTypes"].RectF(0,0,1440,1800)):52===s?this.FMediaBox.$assign(pas["WEBLib.TMSFNCTypes"].RectF(0,0,1584,2160)):53===s?this.FMediaBox.$assign(pas["WEBLib.TMSFNCTypes"].RectF(0,0,536,697)):54===s?this.FMediaBox.$assign(pas["WEBLib.TMSFNCTypes"].RectF(0,0,349,527)):55===s?this.FMediaBox.$assign(pas["WEBLib.TMSFNCTypes"].RectF(0,0,570,731)):56===s?this.FMediaBox.$assign(pas["WEBLib.TMSFNCTypes"].RectF(0,0,366,561)):57===s?this.FMediaBox.$assign(pas["WEBLib.TMSFNCTypes"].RectF(0,0,621,782)):58===s?this.FMediaBox.$assign(pas["WEBLib.TMSFNCTypes"].RectF(0,0,391,612)):59===s?this.FMediaBox.$assign(pas["WEBLib.TMSFNCTypes"].RectF(0,0,672,884)):60===s?this.FMediaBox.$assign(pas["WEBLib.TMSFNCTypes"].RectF(0,0,366,561)):61===s&&this.FMediaBox.$assign(pas["WEBLib.TMSFNCTypes"].RectF(0,0,this.GetPageWidth(),this.GetPageHeight())),1===this.FPageOrientation&&(t=this.FMediaBox.Right-this.FMediaBox.Left,e=this.FMediaBox.Bottom-this.FMediaBox.Top,this.FMediaBox.Bottom=this.FMediaBox.Top+t,this.FMediaBox.Right=this.FMediaBox.Left+e),this.FCropBox.$assign(this.FMediaBox),this.FBleedBox.$assign(this.FMediaBox),this.FArtBox.$assign(this.FMediaBox),this.FTrimBox.$assign(this.FMediaBox),null!=(i=rtl.setIntfL(i,this.FPDFInitializationLib))&&(i.SetPageWidth(this.FMediaBox.Right-this.FMediaBox.Left),i.SetPageHeight(this.FMediaBox.Bottom-this.FMediaBox.Top))}finally{rtl._Release(i)}},this.FinishPage=function(){var e=0,i=null,s=null,n=null,r=null,o=null;if(this.FPageStarted){this.FPageStarted=!1;for(var a=0,l=this.FActivePage.FFontList.GetCount()-1;a<=l;a++)e=a,i=this.FActivePage.FFontList.GetItem(e),this.FOutput.ReplaceString(i.FRefNameOriginal,i.GetRefName());for(var h=0,F=this.FActivePage.FPatterns.GetCount()-1;h<=F;h++)e=h,s=this.FActivePage.FPatterns.GetItem(e),this.FOutput.ReplaceString(s.FRefNameOriginal,s.GetRefName());for(var p=0,c=this.FActivePage.FBitmaps.GetCount()-1;p<=c;p++)e=p,n=this.FActivePage.FBitmaps.GetItem(e),this.FOutput.ReplaceString(n.FRefNameOriginal,n.GetRefName());for(var u=0,d=this.FActivePage.FAnnotations.GetCount()-1;u<=d;u++)e=u,o=this.FActivePage.FAnnotations.GetItem(e),this.FOutput.ReplaceString(o.FRefNameOriginal,o.GetRefName());null!=(r=this.FOutput.FinishContentStream(t.PDFPageContentLengthRef,!0,""))&&this.FOutput.Streams().Add$1(r),this.FOutput.StartNewStream(null),this.FOutput.WriteString(t.PDFLB),this.FOutput.WriteString("endstream"+t.PDFLB),this.FOutput.WriteString("endobj"+t.PDFLB),this.FOutput.ClearProperties()}},this.UpdateFontList=function(e){var i=null,s=null,n=null,r=null,o=null,a=null,l="",h=pas["WEBLib.TMSFNCPDFLib.General.WEB"].TTMSFNCGeneralPDFLibFontMetrics.$new();try{if(this.FBlockFontUpdate)return;null!=(i=rtl.setIntfL(i,this.FPDFGraphicsLib))&&null!=this.FOutput&&(l=this.VerifyFontName(i.GetFont().FName),this.FBlockFontUpdate=!0,i.GetFont().SetName(l),this.FBlockFontUpdate=!1,this.FOutput.FFontBase!==l||rtl.neSet(this.FOutput.FFontStyle,i.GetFont().FStyle)||e||this.FOutput.FFontUnicode&&!e?(this.FOutput.FFontBase=pas.SysUtils.StringReplace(l," ","",rtl.createSet(0)),this.FOutput.FFontName=this.FOutput.FFontBase,0 in i.GetFont().FStyle&&1 in i.GetFont().FStyle?this.FOutput.FFontName=this.FOutput.FFontName+",BoldItalic":0 in i.GetFont().FStyle?this.FOutput.FFontName=this.FOutput.FFontName+",Bold":1 in i.GetFont().FStyle&&(this.FOutput.FFontName=this.FOutput.FFontName+",Italic"),null==(s=this.SearchForFont(this.FOutput.FFontName,e))&&(s=t.TTMSFNCGeneralPDFLibFont.$create("Create$2",[this,this.FInitializer,l,this.FOutput.FFontName,i.GetFont().FSize,i.GetFont().FStyle]),this.FXRefObjects.AddObject(s),this.FFontList.Add(s),h.$assign(s.FInitializer.GetFontMetrics()),s.FAscent=h.Ascent,s.FCapHeight=h.CapHeight,s.FItalicAngle=h.ItalicAngle,s.FDescent=h.Descent,s.FBox.$assign(h.FontBox),s.FTrueType=h.TrueType,s.FInitializer.FIsFixedWidth=h.Fixed,s.FInitializer.InitializeCharWidths(),s.FUnitsPerEm=s.FInitializer.GetUnitsPerEM(),s.FRefNameOriginal=pas.SysUtils.Format(t.PDFPageFontTextRef,pas.System.VarRecs(18,s.GetRefNameNotEscaped())),s.FRefNameGlyphOriginal=pas.SysUtils.Format(t.PDFPageFontGlyphTextRef,pas.System.VarRecs(18,s.GetRefNameNotEscaped()))),null==s.FFontDescriptor&&(n=t.TTMSFNCGeneralPDFLibFontDescriptor.$create("Create$2",[this,s]),this.FXRefObjects.AddObject(n).FXRefType="n",s.FFontDescriptor=n),null==s.FFontUnicode&&s.FUnicode&&(o=t.TTMSFNCGeneralPDFLibFontUnicode.$create("Create$2",[this,s]),this.FXRefObjects.AddObject(o).FXRefType="n",s.FFontUnicode=o),null==s.FFontDescendant&&s.FUnicode&&(a=t.TTMSFNCGeneralPDFLibFontDescendant.$create("Create$2",[this,s]),this.FXRefObjects.AddObject(a).FXRefType="n",s.FFontDescendant=a),null==s.FFontFile&&this.FEmbedFonts&&s.FTrueType&&(r=t.TTMSFNCGeneralPDFLibFontFile.$create("Create$2",[this,s]),this.FXRefObjects.AddObject(r).FXRefType="n",s.FFontFile=r)):s=this.SearchForFont(this.FOutput.FFontName,e),this.FActiveFont=s,null!=s&&null!=this.FActivePage&&-1===this.FActivePage.FFontList.IndexOf(s)&&this.FActivePage.FFontList.Add(s),null!=s?(this.FOutput.FFontCapHeight=s.FCapHeight,this.FOutput.FFontUnitsPerEm=s.FUnitsPerEm):(this.FOutput.FFontCapHeight=0,this.FOutput.FFontUnitsPerEm=0),this.FOutput.FFontSize=i.GetFont().FSize,this.FOutput.FFontColor=i.GetFont().FColor,this.FOutput.FFontStyle=rtl.refSet(i.GetFont().FStyle),this.FOutput.FFontLeading=i.GetFont().FSize,this.FOutput.FFontWordSpacing=0,this.FOutput.FFontCharSpacing=0,this.FOutput.FFontUnicode=null!=s&&s.FUnicode,this.FOutput.FFontEmbedding=this.FEmbedFonts&&!this.FFullFontEmbedding,null!=s&&(this.FOutput.FFontRefName=s.FRefNameOriginal,this.FOutput.FFontGlyphRefName=s.FRefNameGlyphOriginal,this.FOutput.FFontCharWidths=s.GetCharWidths(),this.FOutput.FFontCharArray.$assign(s.GetCharArray()),this.FOutput.FFontUsedCharArray=s.GetUsedCharArray()))}finally{rtl._Release(i)}},this.WriteFontList=function(){var e=null,i=null,s=null,n=null,r=null,o=null,a=0,l="",h=null,F=0,p=0,c=0,u=void 0;if(null!=this.FOutput){var d=this.FXRefObjects.GetEnumerator();try{for(;d.MoveNext();)if(u=d.GetCurrent(),null!=(e=rtl.getObject(u)).FXRefObject)if(t.TTMSFNCGeneralPDFLibFont.isPrototypeOf(e.FXRefObject))(i=rtl.as(e.FXRefObject,t.TTMSFNCGeneralPDFLibFont)).FInactive||(this.FOutput.StartNewStream(e),this.FOutput.WriteString(pas.SysUtils.IntToStr(this.FXRefObjects.IndexOf$1(e))+" 0 obj"+t.PDFLB),this.FOutput.WriteString("<<"),this.FOutput.WriteString("/Type/Font"),this.FOutput.WriteString("/BaseFont/"+i.FName),i.FUnicode?(this.FOutput.WriteString("/Subtype/Type0"),this.FOutput.WriteString("/Encoding/Identity-H")):(this.FOutput.WriteString("/Subtype/TrueType"),this.FOutput.WriteString("/Encoding/WinAnsiEncoding")),null!=i.FFontDescriptor&&this.FOutput.WriteString("/FontDescriptor "+pas.SysUtils.IntToStr(this.FXRefObjects.IndexOf$1(i.FFontDescriptor.FXRefObject))+" 0 R"),this.FOutput.WriteString("/Name"+i.GetRefName()),null!=i.FFontDescendant&&this.FOutput.WriteString("/DescendantFonts["+pas.SysUtils.IntToStr(this.FXRefObjects.IndexOf$1(i.FFontDescendant.FXRefObject))+" 0 R]"),i.FUnicode?null!=i.FFontUnicode&&this.FEmbedFonts&&this.FOutput.WriteString("/ToUnicode "+pas.SysUtils.IntToStr(this.FXRefObjects.IndexOf$1(i.FFontUnicode.FXRefObject))+" 0 R"):(this.FOutput.WriteString("/FirstChar "+i.FirstGlyphAsString()),this.FOutput.WriteString("/LastChar "+i.LastGlyphAsString()),this.FOutput.WriteString("/Widths["+i.WidthsAsString()+"]")),this.FOutput.WriteString(">>"+t.PDFLB),this.FOutput.WriteString("endobj"+t.PDFLB));else if(t.TTMSFNCGeneralPDFLibFontDescriptor.isPrototypeOf(e.FXRefObject))(s=rtl.as(e.FXRefObject,t.TTMSFNCGeneralPDFLibFontDescriptor)).FFont.FInactive||(this.FOutput.StartNewStream(e),this.FOutput.WriteString(pas.SysUtils.IntToStr(this.FXRefObjects.IndexOf$1(e))+" 0 obj"+t.PDFLB),this.FOutput.WriteString("<<"),this.FOutput.WriteString("/Type/FontDescriptor"),this.FOutput.WriteString("/FontName/"+s.FFont.FName),this.FOutput.WriteString("/Ascent "+pas.SysUtils.IntToStr(s.FFont.FAscent)),this.FOutput.WriteString("/CapHeight "+pas.SysUtils.IntToStr(s.FFont.FCapHeight)),this.FOutput.WriteString("/Descent "+pas.SysUtils.IntToStr(s.FFont.FDescent)),this.FOutput.WriteString("/ItalicAngle "+pas.SysUtils.IntToStr(s.FFont.FItalicAngle)),this.FOutput.WriteString("/StemV 87"),this.FOutput.WriteString("/Flags 32"),this.FOutput.WriteString("/MissingWidth 600"),this.FOutput.WriteString("/FontBBox["+s.FFont.BoxAsString()+"]"),null!=s.FFont&&null!=s.FFont.FFontFile&&this.FEmbedFonts&&this.FOutput.WriteString("/FontFile2 "+pas.SysUtils.IntToStr(this.FXRefObjects.IndexOf$1(s.FFont.FFontFile.FXRefObject))+" 0 R"),this.FOutput.WriteString(">>"+t.PDFLB),this.FOutput.WriteString("endobj"+t.PDFLB));else if(t.TTMSFNCGeneralPDFLibFontFile.isPrototypeOf(e.FXRefObject))(r=rtl.as(e.FXRefObject,t.TTMSFNCGeneralPDFLibFontFile)).FFont.FInactive||(a=r.FFont.FInitializer.GetTTFDataLength(),r.FFont.FInitializer.CompressTTFData(),F=r.FFont.FInitializer.GetTTFDataCompressedLength(),this.FOutput.StartNewStream(e),this.FOutput.WriteString(pas.SysUtils.IntToStr(this.FXRefObjects.IndexOf$1(e))+" 0 obj"+t.PDFLB),this.FOutput.WriteString("<<"),this.FOutput.WriteString("/Length "+pas.SysUtils.IntToStr(F)),this.FOutput.WriteString("/Length1 "+pas.SysUtils.IntToStr(a)),this.FOutput.WriteString("/Filter"),this.FOutput.WriteString("/FlateDecode"),this.FOutput.WriteString(">>"+t.PDFLB),this.FOutput.WriteString("stream"+t.PDFLB),null!=(h=r.FFont.FInitializer.GetTTFDataCompressed())&&this.FOutput.Streams().Add$1(h),this.FOutput.StartNewStream(null),this.FOutput.WriteString(t.PDFLB),this.FOutput.WriteString("endstream"+t.PDFLB),this.FOutput.WriteString("endobj"+t.PDFLB));else if(t.TTMSFNCGeneralPDFLibFontDescendant.isPrototypeOf(e.FXRefObject)){if(!(n=rtl.as(e.FXRefObject,t.TTMSFNCGeneralPDFLibFontDescendant)).FFont.FInactive)this.FOutput.StartNewStream(e),this.FOutput.WriteString(pas.SysUtils.IntToStr(this.FXRefObjects.IndexOf$1(e))+" 0 obj"+t.PDFLB),this.FOutput.WriteString("<<"),this.FOutput.WriteString("/Type/Font"),this.FOutput.WriteString("/Subtype/CIDFontType2"),1===this.FPDFStandard&&this.FOutput.WriteString("/CIDToGIDMap/Identity"),this.FOutput.WriteString("/BaseFont/"+n.FFont.FName),this.FOutput.WriteString("/CIDSystemInfo<</Supplement 0/Ordering(Identity)/Registry(Adobe)>>"),this.FOutput.WriteString("/DW 600"),this.FOutput.WriteString("/W["+n.FFont.GlyphsAndWidthsAsString()+"]"),null!=n.FFont&&null!=n.FFont.FFontDescriptor&&this.FOutput.WriteString("/FontDescriptor "+pas.SysUtils.IntToStr(this.FXRefObjects.IndexOf$1(n.FFont.FFontDescriptor.FXRefObject))+" 0 R"),this.FOutput.WriteString(">>"+t.PDFLB),this.FOutput.WriteString("endobj"+t.PDFLB)}else if(t.TTMSFNCGeneralPDFLibFontUnicode.isPrototypeOf(e.FXRefObject)&&!(o=rtl.as(e.FXRefObject,t.TTMSFNCGeneralPDFLibFontUnicode)).FFont.FInactive){l=(l="/CIDInit /ProcSet findresource begin"+t.PDFLF+"12 dict begin"+t.PDFLF+"begincmap"+t.PDFLF+"/CIDSystemInfo"+t.PDFLF+"<<"+t.PDFLF+"/Registry ("+o.FFont.GetRefNameNotEscaped()+"+0)"+t.PDFLF+"/Ordering (UCS)"+t.PDFLF+"/Supplement 0"+t.PDFLF+">> def"+t.PDFLF+"/CMapName /"+o.FFont.GetRefNameNotEscaped()+"+0 def"+t.PDFLF+"/CMapType 2 def"+t.PDFLF+"1 begincodespacerange"+t.PDFLF+"<"+this.FOutput.AddHex4(o.FFont.FirstGlyph())+"> <"+this.FOutput.AddHex4(o.FFont.LastGlyph())+">"+t.PDFLF+"endcodespacerange"+t.PDFLF)+pas.SysUtils.IntToStr(o.FFont.GetUsedCharArray().GetCount())+" beginbfchar"+t.PDFLF;for(var S=0,C=o.FFont.GetUsedCharArray().GetCount()-1;S<=C;S++)p=S,(c=o.FFont.GetCharArray().IndexOf(o.FFont.GetUsedCharArray().GetItem(p)))>-1&&(l=this.FEmbedFonts&&!this.FFullFontEmbedding?l+"<"+this.FOutput.AddHex4(o.FFont.GetGlyphIDs().IndexOf(o.FFont.GetCharWidths()[c].g))+"><"+this.FOutput.AddHex4(o.FFont.GetCharArray().v[c])+">"+t.PDFLF:l+"<"+this.FOutput.AddHex4(o.FFont.GetCharWidths()[c].g)+"><"+this.FOutput.AddHex4(o.FFont.GetCharArray().v[c])+">"+t.PDFLF);l=(l=l+"endbfchar"+t.PDFLF)+"endcmap"+t.PDFLF+"CMapName currentdict /CMap defineresource pop"+t.PDFLF+"end"+t.PDFLF+"end",h=this.FOutput.CompressString(l),F=0,null!=h&&(F=h.GetSize()),this.FOutput.StartNewStream(e),this.FOutput.WriteString(pas.SysUtils.IntToStr(this.FXRefObjects.IndexOf$1(e))+" 0 obj"+t.PDFLB),this.FOutput.WriteString("<<"),this.FOutput.WriteString("/Length "+pas.SysUtils.IntToStr(F)),this.FOutput.WriteString("/Filter"),this.FOutput.WriteString("/FlateDecode"),this.FOutput.WriteString(">>"+t.PDFLB),this.FOutput.WriteString("stream"+t.PDFLB),null!=h&&this.FOutput.Streams().Add$1(h),this.FOutput.StartNewStream(null),this.FOutput.WriteString(t.PDFLB),this.FOutput.WriteString("endstream"+t.PDFLB),this.FOutput.WriteString("endobj"+t.PDFLB)}}finally{d=rtl.freeLoc(d)}}},this.InitializeFontList=function(){var e=null,i=null,s=void 0;if(null!=this.FOutput){var n=this.FXRefObjects.GetEnumerator();try{for(;n.MoveNext();)s=n.GetCurrent(),null!=(e=rtl.getObject(s)).FXRefObject&&t.TTMSFNCGeneralPDFLibFontFile.isPrototypeOf(e.FXRefObject)&&((i=rtl.as(e.FXRefObject,t.TTMSFNCGeneralPDFLibFontFile)).FFont.FInactive||i.InitializeFontFile())}finally{n=rtl.freeLoc(n)}}},this.UpdateGlyphIds=function(){var t=0,e=0,i=0,s=null;if(this.FEmbedFonts&&!this.FFullFontEmbedding&&null!=this.FActivePage)for(var n=0,r=this.FActivePage.FFontList.GetCount()-1;n<=r;n++){t=n;for(var o=0,a=(s=this.FActivePage.FFontList.GetItem(t)).GetUsedCharArray().GetCount()-1;o<=a;o++)e=o,(i=s.GetCharArray().IndexOf(s.GetUsedCharArray().GetItem(e)))>-1&&this.FOutput.ReplaceString(pas.SysUtils.Format(pas["WEBLib.TMSFNCPDFCoreLibBase"].PDFPageFontGlyphRef,pas.System.VarRecs(18,pas.SysUtils.IntToStr(s.GetUsedCharArray().GetItem(e)),18,s.FRefNameGlyphOriginal)),this.FOutput.AddHex4(s.GetGlyphIDs().IndexOf(s.GetCharWidths()[i].g)))}},this.WriteBitmapList=function(){var e=null,i=null,s=null,n=0,r=void 0;if(null!=this.FOutput){var o=this.FXRefObjects.GetEnumerator();try{for(;o.MoveNext();)r=o.GetCurrent(),null!=(e=rtl.getObject(r)).FXRefObject&&t.TTMSFNCGeneralPDFLibBitmap.isPrototypeOf(e.FXRefObject)&&(i=rtl.as(e.FXRefObject,t.TTMSFNCGeneralPDFLibBitmap),s=pas.Classes.TMemoryStream.$create("Create"),i.FStream.SetPosition(0),s.CopyFrom(i.FStream,i.FStream.GetSize()),n=0,null!=s&&(n=s.GetSize()),this.FOutput.StartNewStream(e),this.FOutput.WriteString(pas.SysUtils.IntToStr(this.FXRefObjects.IndexOf$1(e))+" 0 obj"+t.PDFLB),this.FOutput.WriteString("<<"),this.FOutput.WriteString("/Type/XObject"),this.FOutput.WriteString("/Subtype/Image"),this.FOutput.WriteString("/Filter/DCTDecode"),this.FOutput.WriteString("/Width "+pas.SysUtils.IntToStr(i.FBitmap.GetWidth())),this.FOutput.WriteString("/Height "+pas.SysUtils.IntToStr(i.FBitmap.GetHeight())),this.FOutput.WriteString("/ColorSpace/DeviceRGB"),this.FOutput.WriteString("/BitsPerComponent 8"),this.FOutput.WriteString("/Length "+pas.SysUtils.IntToStr(n)),this.FOutput.WriteString(">>"+t.PDFLB),this.FOutput.WriteString("stream"+t.PDFLB),null!=s&&this.FOutput.Streams().Add$1(s),this.FOutput.StartNewStream(null),this.FOutput.WriteString(t.PDFLB),this.FOutput.WriteString("endstream"+t.PDFLB),this.FOutput.WriteString("endobj"+t.PDFLB))}finally{o=rtl.freeLoc(o)}}},this.WriteAcroFormFieldList=function(){var e=null,i=void 0;if(null!=this.FOutput){var s=this.FXRefObjects.GetEnumerator();try{for(;s.MoveNext();)i=s.GetCurrent(),null!=(e=rtl.getObject(i)).FXRefObject&&(t.TTMSFNCGeneralPDFLibAcroFormField.isPrototypeOf(e.FXRefObject)?(this.FOutput.StartNewStream(e),this.FOutput.WriteString(pas.SysUtils.IntToStr(this.FXRefObjects.IndexOf$1(e))+" 0 obj"+t.PDFLB),this.FOutput.WriteString("<<"),this.FOutput.WriteString(">>"+t.PDFLB),this.FOutput.WriteString("endobj"+t.PDFLB)):t.TTMSFNCGeneralPDFLibAcroFormFieldContent.isPrototypeOf(e.FXRefObject)&&(this.FOutput.StartNewStream(e),this.FOutput.WriteString(pas.SysUtils.IntToStr(this.FXRefObjects.IndexOf$1(e))+" 0 obj"+t.PDFLB),this.FOutput.WriteString("<<"),this.FOutput.WriteString(">>"+t.PDFLB),this.FOutput.WriteString("stream"+t.PDFLB),this.FOutput.WriteString("endstream"+t.PDFLB),this.FOutput.WriteString("endobj"+t.PDFLB)))}finally{s=rtl.freeLoc(s)}}},this.WriteAnnotationList=function(){var e=null,i=null,s=null,n=null,r=void 0;if(null!=this.FOutput){var o=this.FXRefObjects.GetEnumerator();try{for(;o.MoveNext();)r=o.GetCurrent(),null!=(e=rtl.getObject(r)).FXRefObject&&t.TTMSFNCGeneralPDFLibAnnotation.isPrototypeOf(e.FXRefObject)&&(i=rtl.as(e.FXRefObject,t.TTMSFNCGeneralPDFLibAnnotation),this.FOutput.StartNewStream(e),this.FOutput.WriteString(pas.SysUtils.IntToStr(this.FXRefObjects.IndexOf$1(e))+" 0 obj"+t.PDFLB),this.FOutput.WriteString("<<"),this.FOutput.WriteString("/Type/Annot"),(t.TTMSFNCGeneralPDFLibURL.isPrototypeOf(i)||t.TTMSFNCGeneralPDFLibGoTo.isPrototypeOf(i))&&(this.FOutput.WriteString("/Subtype/Link"),this.FOutput.WriteString("/A"),this.FOutput.WriteString("<<"),t.TTMSFNCGeneralPDFLibURL.isPrototypeOf(i)?(s=rtl.as(i,t.TTMSFNCGeneralPDFLibURL),this.FOutput.WriteString("/Type/Action/S/URI/URI("+s.FURL+")")):t.TTMSFNCGeneralPDFLibGoTo.isPrototypeOf(i)&&(n=rtl.as(i,t.TTMSFNCGeneralPDFLibGoTo),this.FOutput.WriteString("/Type/Action/S/GoTo/D["+n.FDestination+"]")),this.FOutput.WriteString(">>"),this.FOutput.WriteString("/BS"),this.FOutput.WriteString("<<"),this.FOutput.WriteString("/W 0/S/S"),this.FOutput.WriteString(">>")),this.FOutput.WriteString("/Rect["+i.RectAsString()+"]"),this.FOutput.WriteString(">>"+t.PDFLB),this.FOutput.WriteString("endobj"+t.PDFLB))}finally{o=rtl.freeLoc(o)}}},this.WritePatternList=function(){var e=null,i=null,s=void 0;if(null!=this.FOutput){var n=this.FXRefObjects.GetEnumerator();try{for(;n.MoveNext();)s=n.GetCurrent(),null!=(e=rtl.getObject(s)).FXRefObject&&t.TTMSFNCGeneralPDFLibPattern.isPrototypeOf(e.FXRefObject)&&(i=rtl.as(e.FXRefObject,t.TTMSFNCGeneralPDFLibPattern),this.FOutput.StartNewStream(e),this.FOutput.WriteString(pas.SysUtils.IntToStr(this.FXRefObjects.IndexOf$1(e))+" 0 obj"+t.PDFLB),this.FOutput.WriteString("<<"),this.FOutput.WriteString("/Type/Pattern"),this.FOutput.WriteString("/PatternType 2"),null!=i.FShading&&this.FOutput.WriteString("/Shading "+pas.SysUtils.IntToStr(this.FXRefObjects.IndexOf$1(i.FShading.FXRefObject))+" 0 R"),this.FOutput.WriteString(">>"+t.PDFLB),this.FOutput.WriteString("endobj"+t.PDFLB))}finally{n=rtl.freeLoc(n)}}},this.WriteShadingList=function(){var e=null,i=null,s=null,n=null,r=void 0;if(null!=this.FOutput){var o=this.FXRefObjects.GetEnumerator();try{for(;o.MoveNext();)r=o.GetCurrent(),null!=(e=rtl.getObject(r)).FXRefObject&&(t.TTMSFNCGeneralPDFLibShading.isPrototypeOf(e.FXRefObject)?(n=rtl.as(e.FXRefObject,t.TTMSFNCGeneralPDFLibShading),this.FOutput.StartNewStream(e),this.FOutput.WriteString(pas.SysUtils.IntToStr(this.FXRefObjects.IndexOf$1(e))+" 0 obj"+t.PDFLB),this.FOutput.WriteString("<<"),t.TTMSFNCGeneralPDFLibLinearGradient.isPrototypeOf(n)&&this.FOutput.WriteString("/ShadingType 2"),this.FOutput.WriteString("/Extend[false false]"),this.FOutput.WriteString("/ColorSpace/DeviceRGB"),this.FOutput.WriteString("/Coords["+n.RectAsString()+"]"),null!=n.FFunction&&this.FOutput.WriteString("/Function "+pas.SysUtils.IntToStr(this.FXRefObjects.IndexOf$1(n.FFunction.FXRefObject))+" 0 R"),this.FOutput.WriteString(">>"+t.PDFLB),this.FOutput.WriteString("endobj"+t.PDFLB)):t.TTMSFNCGeneralPDFLibShadingFunction.isPrototypeOf(e.FXRefObject)?(i=rtl.as(e.FXRefObject,t.TTMSFNCGeneralPDFLibShadingFunction),this.FOutput.StartNewStream(e),this.FOutput.WriteString(pas.SysUtils.IntToStr(this.FXRefObjects.IndexOf$1(e))+" 0 obj"+t.PDFLB),this.FOutput.WriteString("<<"),this.FOutput.WriteString("/FunctionType 3"),this.FOutput.WriteString("/Domain[0 1]"),this.FOutput.WriteString("/Encode[0 1 0 1]"),this.FOutput.WriteString("/Bounds[1]"),this.FOutput.WriteString("/Functions["+i.SubFunctionsRef()+"]"),this.FOutput.WriteString(">>"+t.PDFLB),this.FOutput.WriteString("endobj"+t.PDFLB)):t.TTMSFNCGeneralPDFLibShadingSubFunction.isPrototypeOf(e.FXRefObject)&&(s=rtl.as(e.FXRefObject,t.TTMSFNCGeneralPDFLibShadingSubFunction),this.FOutput.StartNewStream(e),this.FOutput.WriteString(pas.SysUtils.IntToStr(this.FXRefObjects.IndexOf$1(e))+" 0 obj"+t.PDFLB),this.FOutput.WriteString("<<"),this.FOutput.WriteString("/FunctionType 2"),this.FOutput.WriteString("/Domain[0 1]"),this.FOutput.WriteString("/C0["+this.FOutput.ConvertColorToString(s.FFillColor)+"]"),this.FOutput.WriteString("/C1["+this.FOutput.ConvertColorToString(s.FFillColorTo)+"]"),this.FOutput.WriteString("/N 1"),this.FOutput.WriteString(">>"+t.PDFLB),this.FOutput.WriteString("endobj"+t.PDFLB)))}finally{o=rtl.freeLoc(o)}}},this.WriteXRefTable=function(){var e="",i="",s=0,n=null,r=void 0;i="",s=0;var o=this.FXRefObjects.GetEnumerator();try{for(;o.MoveNext();)r=o.GetCurrent(),(n=rtl.getObject(r)).FInXRefList&&(s+=1,i=i+n.GenerateXRefValue()+t.PDFLB)}finally{o=rtl.freeLoc(o)}e="xref"+t.PDFLB+"0 "+pas.SysUtils.IntToStr(s)+t.PDFLB,e+=i,this.FOutput.WriteString(e)},this.SetPDFGraphicsLib=function(t){rtl.setIntfP(this,"FPDFGraphicsLib",t)},this.SetPDFGraphicsExLib=function(t){rtl.setIntfP(this,"FPDFGraphicsExLib",t)},this.SetPDFInitializationLib=function(t){rtl.setIntfP(this,"FPDFInitializationLib",t)},this.BeginDocument=function(e){var i,s,n=null;this.FPDFFileName=e,this.FDocumentStarted=!0,(n=this.FXRefObjects.AddObject(null)).FXRefNumber=65535,this.FOutput.StartNewStream(null);var r=this.FPDFStandard;if(0===r?this.FOutput.WriteString(t.PDFStart+t.PDFLB):1===r&&this.FOutput.WriteString(t.PDFStart14+t.PDFLB),n=this.FXRefObjects.AddObjectClass(t.TTMSFNCGeneralPDFLibCatalog),this.FOutput.StartNewStream(n),this.FOutput.WriteString(pas.SysUtils.IntToStr(this.FXRefObjects.IndexOf$1(n))+" 0 obj"+t.PDFLB),this.FOutput.WriteString("<<"),this.FOutput.WriteString("/Type/Catalog"),this.FOutput.WriteString("/Pages 2 0 R"),1===this.FPDFStandard&&(this.FOutput.WriteString("/OutputIntents[3 0 R]"),this.FOutput.WriteString("/MarkInfo <</Marked true>>/Metadata 5 0 R/StructTreeRoot<<>>")),this.FOutput.WriteString(">>"+t.PDFLB),this.FOutput.WriteString("endobj"+t.PDFLB),n=this.FXRefObjects.AddObjectClass(t.TTMSFNCGeneralPDFLibPages),this.FOutput.StartNewStream(n),this.FOutput.WriteString(pas.SysUtils.IntToStr(this.FXRefObjects.IndexOf$1(n))+" 0 obj"+t.PDFLB),this.FOutput.WriteString("<<"),this.FOutput.WriteString("/Type/Pages"),this.FOutput.WriteString("/Kids["+t.PDFPageChildRef+"]"),this.FOutput.WriteString("/Count "+t.PDFPageCountRef),this.FOutput.WriteString(">>"+t.PDFLB),this.FOutput.WriteString("endobj"+t.PDFLB),i=pas.SysUtils.Now(),s=pas["WEBLib.TMSFNCPDFCoreLibBase"].ConvertToPDFDate(i),pas["WEBLib.TMSFNCPDFCoreLibBase"].DateTimeToIso(i),1===this.FPDFStandard)throw this.FOutputIntent=t.TTMSFNCGeneralPDFLibOutputIntent.$create("Create$1",[this,-1,0]),n=this.FXRefObjects.AddObject(this.FOutputIntent),this.FOutput.StartNewStream(n),this.FOutput.WriteString(pas.SysUtils.IntToStr(this.FXRefObjects.IndexOf$1(n))+" 0 obj"+t.PDFLB),this.FOutput.WriteString("<<"),this.FOutput.WriteString("/Type/OutputIntent"),this.FOutput.WriteString("/OutputCondition()"),this.FOutput.WriteString("/OutputConditionIdentifier(sRGB)"),this.FOutput.WriteString("/RegistryName(http://www.color.org)"),this.FOutput.WriteString("/Info(sRGB IEC61966-2.1)"),this.FOutput.WriteString("/S/GTS_PDFA1"),this.FOutput.WriteString("/DestOutputProfile "+t.PDFDestOutputProfileRef+" 0 R"),this.FOutput.WriteString(">>"+t.PDFLB),this.FOutput.WriteString("endobj"+t.PDFLB),this.FDestOutputProfile=t.TTMSFNCGeneralPDFLibDestOutputProfile.$create("Create$1",[this,-1,0]),n=this.FXRefObjects.AddObject(this.FDestOutputProfile),this.FOutput.StartNewStream(n),this.FOutput.WriteString(pas.SysUtils.IntToStr(this.FXRefObjects.IndexOf$1(n))+" 0 obj"+t.PDFLB),this.FOutput.WriteString("<<"),this.FOutput.WriteString(t.PDFDestOutputProfileLengthRef),this.FOutput.WriteString(">>"+t.PDFLB),this.FOutput.WriteString("stream"+t.PDFLB),this.FOutput.StartContentStream(n),pas.SysUtils.Exception.$create("Create$1",["Write ICC Array"]);this.FInfo=t.TTMSFNCGeneralPDFLibInfo.$create("Create$1",[this,-1,0]),n=this.FXRefObjects.AddObject(this.FInfo),this.FOutput.StartNewStream(n),this.FOutput.WriteString(pas.SysUtils.IntToStr(this.FXRefObjects.IndexOf$1(n))+" 0 obj"+t.PDFLB),this.FOutput.WriteString("<<"),this.FOutput.WriteString("/Producer <>"),this.FOutput.WriteString("/Author ("+this.FAuthor+")"),this.FOutput.WriteString("/CreationDate (D:"+s+")"),this.FOutput.WriteString("/Creator ("+this.FCreator+")"),this.FOutput.WriteString("/Keywords ("+this.GetKeywordsString()+")"),this.FOutput.WriteString("/Subject ("+this.FSubject+")"),this.FOutput.WriteString("/Title ("+this.FTitle+")"),this.FOutput.WriteString("/ModDate (D:"+s+")"),this.FOutput.WriteString(">>"+t.PDFLB),this.FOutput.WriteString("endobj"+t.PDFLB)},this.NewPage=function(){var e=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),i=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),s=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),n=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),r=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),o=null,a=null;i.$assign(this.FMediaBox),e.$assign(this.FArtBox),s.$assign(this.FBleedBox),n.$assign(this.FCropBox),r.$assign(this.FTrimBox),this.InitializeFontList(),this.UpdateGlyphIds(),this.FinishPage(),this.FActivePage=t.TTMSFNCGeneralPDFLibPage.$create("Create$2",[this,this.FPageCount]),o=this.FXRefObjects.AddObject(this.FActivePage),this.FOutput.StartNewStream(o),this.FOutput.WriteString(t.PDFPageRef+" 0 obj"+t.PDFLB),this.FOutput.WriteString("<<"),this.FOutput.WriteString("/Type/Page"),this.FOutput.WriteString("/Parent 2 0 R"),this.FOutput.WriteString("/MediaBox["+pas.SysUtils.IntToStr(Math.round(i.Left))+" "+pas.SysUtils.IntToStr(Math.round(i.Top))+" "+pas.SysUtils.IntToStr(Math.round(i.Right))+" "+pas.SysUtils.IntToStr(Math.round(i.Bottom))+"]"),this.FOutput.WriteString("/ArtBox["+pas.SysUtils.IntToStr(Math.round(e.Left))+" "+pas.SysUtils.IntToStr(Math.round(e.Top))+" "+pas.SysUtils.IntToStr(Math.round(e.Right))+" "+pas.SysUtils.IntToStr(Math.round(e.Bottom))+"]"),this.FOutput.WriteString("/BleedBox["+pas.SysUtils.IntToStr(Math.round(s.Left))+" "+pas.SysUtils.IntToStr(Math.round(s.Top))+" "+pas.SysUtils.IntToStr(Math.round(s.Right))+" "+pas.SysUtils.IntToStr(Math.round(s.Bottom))+"]"),this.FOutput.WriteString("/CropBox["+pas.SysUtils.IntToStr(Math.round(n.Left))+" "+pas.SysUtils.IntToStr(Math.round(n.Top))+" "+pas.SysUtils.IntToStr(Math.round(n.Right))+" "+pas.SysUtils.IntToStr(Math.round(n.Bottom))+"]"),this.FOutput.WriteString("/Trimbox["+pas.SysUtils.IntToStr(Math.round(r.Left))+" "+pas.SysUtils.IntToStr(Math.round(r.Top))+" "+pas.SysUtils.IntToStr(Math.round(r.Right))+" "+pas.SysUtils.IntToStr(Math.round(r.Bottom))+"]"),this.FOutput.WriteString("/Contents "+t.PDFPageContentRef+" 0 R"),this.FOutput.WriteString("/ProcSet[/PDF/Text/ImageC]"),this.FOutput.WriteString("/Annots["+t.PDFPageAnnotationsRef+"]"),this.FOutput.WriteString("/Resources"),this.FOutput.WriteString("<<"),this.FOutput.WriteString("/XObject"),this.FOutput.WriteString("<<"),this.FOutput.WriteString(t.PDFPageXObjectRef),this.FOutput.WriteString(">>"),this.FOutput.WriteString("/Font"),this.FOutput.WriteString("<<"),this.FOutput.WriteString(t.PDFPageFontRef),this.FOutput.WriteString(">>"),this.FOutput.WriteString("/Pattern"),this.FOutput.WriteString("<<"),this.FOutput.WriteString(t.PDFPagePatternRef),this.FOutput.WriteString(">>"),this.FOutput.WriteString(">>"),this.FOutput.WriteString(">>"+t.PDFLB),this.FOutput.WriteString("endobj"+t.PDFLB),this.UpdateFontList(!1),(a=t.TTMSFNCGeneralPDFLibContent.$create("Create$1",[this,-1,0])).FPage=this.FActivePage,o=this.FXRefObjects.AddObject(a),this.FActivePage.FContent=a,this.FOutput.StartNewStream(o),this.FOutput.WriteString(t.PDFPageContentRef+" 0 obj"+t.PDFLB),this.FOutput.WriteString("<<"),this.FOutput.WriteString(t.PDFPageContentLengthRef),this.FOutput.WriteString(">>"+t.PDFLB),this.FOutput.WriteString("stream"+t.PDFLB),this.FOutput.StartContentStream(o),null!=this.FPDFInitializationLib&&(this.FPDFInitializationLib.SetCanvas(this.FOutput),this.FPDFInitializationLib.SetPageWidth(i.Right-i.Left),this.FPDFInitializationLib.SetPageHeight(i.Bottom-i.Top),this.FPDFInitializationLib.InitializeAppearance()),this.DoNewPageStarted(this.GetPageIndex()),this.DrawHeader(),this.DrawFooter(),this.DrawPageNumber(),this.FPageCount+=1,this.FPageStarted=!0},this.DrawHeader=function(){var t,e=null,i=pas["WEBLib.TMSFNCTypes"].TSizeF.$new(),s=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),n=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),r=!1;null!=this.FPDFGraphicsLib&&(t=this.FPDFGraphicsLib.GetAlignment(),(e=pas["WEBLib.TMSFNCPDFCoreLibBase"].TTMSFNCPDFGraphicsLibFont.$create("Create$1")).Assign(this.FPDFGraphicsLib.GetFont()),this.FPDFGraphicsLib.SetAlignment(this.FHeaderAlignment),this.FPDFGraphicsLib.GetFont().Assign(this.GetHeaderFont()),s.$assign(this.GetHeaderRect()),r=!0,this.DoBeforeDrawHeader(this,this.GetPageIndex(),this.FHeader,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(s),this.FPDFGraphicsLib,{get:function(){return r},set:function(t){r=t}}),r&&(pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.IsHTMLUnicode(this.FHeader)?(n.$assign(this.FPDFGraphicsLib.DrawHTMLText$1(this.FHeader,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(s),!1,1,!0)),i.cx=n.Right-n.Left,i.cy=n.Bottom-n.Top,this.FPDFGraphicsLib.DrawHTMLText$1(this.FHeader,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(pas["WEBLib.TMSFNCTypes"].RectF(s.Left,s.Top+(s.Bottom-s.Top-i.cy)/2,s.Left+(s.Right-s.Left),s.Top+(s.Bottom-s.Top-i.cy)/2+i.cy)),!1,1,!1)):(n.$assign(this.FPDFGraphicsLib.DrawText$3(this.FHeader,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(s),!0)),i.cx=n.Right-n.Left,i.cy=n.Bottom-n.Top,this.FPDFGraphicsLib.DrawText$3(this.FHeader,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(pas["WEBLib.TMSFNCTypes"].RectF(s.Left,s.Top+(s.Bottom-s.Top-i.cy)/2,s.Left+(s.Right-s.Left),s.Top+(s.Bottom-s.Top-i.cy)/2+i.cy)),!1)),this.DoAfterDrawHeader(this,this.GetPageIndex(),this.FHeader,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(s),this.FPDFGraphicsLib)),this.FPDFGraphicsLib.SetAlignment(t),this.FPDFGraphicsLib.GetFont().Assign(e),e=rtl.freeLoc(e))},this.DrawFooter=function(){var t,e=null,i=pas["WEBLib.TMSFNCTypes"].TSizeF.$new(),s=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),n=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),r=!1;null!=this.FPDFGraphicsLib&&(t=this.FPDFGraphicsLib.GetAlignment(),(e=pas["WEBLib.TMSFNCPDFCoreLibBase"].TTMSFNCPDFGraphicsLibFont.$create("Create$1")).Assign(this.FPDFGraphicsLib.GetFont()),this.FPDFGraphicsLib.SetAlignment(this.FFooterAlignment),this.FPDFGraphicsLib.GetFont().Assign(this.GetFooterFont()),s.$assign(this.GetFooterRect()),r=!0,this.DoBeforeDrawFooter(this,this.GetPageIndex(),this.FFooter,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(s),this.FPDFGraphicsLib,{get:function(){return r},set:function(t){r=t}}),r&&(pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.IsHTMLUnicode(this.FFooter)?(n.$assign(this.FPDFGraphicsLib.DrawHTMLText$1(this.FFooter,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(s),!1,1,!0)),i.cx=n.Right-n.Left,i.cy=n.Bottom-n.Top,this.FPDFGraphicsLib.DrawHTMLText$1(this.FFooter,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(pas["WEBLib.TMSFNCTypes"].RectF(s.Left,s.Top+(s.Bottom-s.Top-i.cy)/2,s.Left+(s.Right-s.Left),s.Top+(s.Bottom-s.Top-i.cy)/2+i.cy)),!1,1,!1)):(n.$assign(this.FPDFGraphicsLib.DrawText$3(this.FFooter,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(s),!0)),i.cx=n.Right-n.Left,i.cy=n.Bottom-n.Top,this.FPDFGraphicsLib.DrawText$3(this.FFooter,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(pas["WEBLib.TMSFNCTypes"].RectF(s.Left,s.Top+(s.Bottom-s.Top-i.cy)/2,s.Left+(s.Right-s.Left),s.Top+(s.Bottom-s.Top-i.cy)/2+i.cy)),!1)),this.DoAfterDrawFooter(this,this.GetPageIndex(),this.FFooter,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(s),this.FPDFGraphicsLib)),this.FPDFGraphicsLib.SetAlignment(t),this.FPDFGraphicsLib.GetFont().Assign(e),e=rtl.freeLoc(e))},this.DrawPageNumber=function(){var t,e,i=null,s=pas["WEBLib.TMSFNCTypes"].TSizeF.$new(),n=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),r=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),o=!1;null!=this.FPDFGraphicsLib&&0!==this.FPageNumber&&(t=this.FPDFGraphicsLib.GetAlignment(),(i=pas["WEBLib.TMSFNCPDFCoreLibBase"].TTMSFNCPDFGraphicsLibFont.$create("Create$1")).Assign(this.FPDFGraphicsLib.GetFont()),this.FPDFGraphicsLib.SetAlignment(this.FPageNumberAlignment),this.FPDFGraphicsLib.GetFont().Assign(this.GetPageNumberFont()),n.$assign(this.GetPageNumberRect()),o=!0,e=pas.SysUtils.Format(this.FPageNumberFormat,pas.System.VarRecs(0,this.GetPageIndex()+1)),this.DoBeforeDrawPageNumber(this,this.GetPageIndex(),e,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(n),this.FPDFGraphicsLib,{get:function(){return o},set:function(t){o=t}}),o&&(pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.IsHTMLUnicode(e)?(r.$assign(this.FPDFGraphicsLib.DrawHTMLText$1(e,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(n),!1,1,!0)),s.cx=r.Right-r.Left,s.cy=r.Bottom-r.Top,this.FPDFGraphicsLib.DrawHTMLText$1(e,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(pas["WEBLib.TMSFNCTypes"].RectF(n.Left,n.Top+(n.Bottom-n.Top-s.cy)/2,n.Left+(n.Right-n.Left),n.Top+(n.Bottom-n.Top-s.cy)/2+s.cy)),!1,1,!1)):(r.$assign(this.FPDFGraphicsLib.DrawText$3(e,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(n),!0)),s.cx=r.Right-r.Left,s.cy=r.Bottom-r.Top,this.FPDFGraphicsLib.DrawText$3(e,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(pas["WEBLib.TMSFNCTypes"].RectF(n.Left,n.Top+(n.Bottom-n.Top-s.cy)/2,n.Left+(n.Right-n.Left-n.Left),n.Top+(n.Bottom-n.Top-s.cy)/2+s.cy)),!1)),this.DoAfterDrawPageNumber(this,this.GetPageIndex(),e,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(n),this.FPDFGraphicsLib)),this.FPDFGraphicsLib.SetAlignment(t),this.FPDFGraphicsLib.GetFont().Assign(i),i=rtl.freeLoc(i))},this.GetPDFGraphicsLib=function(){var t=null,e=!1;try{t=rtl.setIntfL(t,this.FPDFGraphicsLib),e=!0}finally{e||rtl._Release(t)}return t},this.GetPDFInitializationLib=function(){var t=null,e=!1;try{t=rtl.setIntfL(t,this.FPDFInitializationLib),e=!0}finally{e||rtl._Release(t)}return t};this.CompareStreams=function(t,e){var i=!1,s=[],n=[];if(i=!1,t.SetPosition(0),e.SetPosition(0),t.GetSize()!==e.GetSize())return i;for(;t.GetPosition()<t.GetSize();)if(t.Read({get:function(){return s},set:function(t){s=t}},4096),e.Read({get:function(){return n},set:function(t){n=t}},4096),s!==n)return i;return i=!0},this.VerifyFontName=function(t){var e="",i=0,s=0;for(e=t,i=this.FOSFontList.IndexOf(e),s=0;-1===i&&s>=0&&s<=this.FFontFallBackList.GetCount()-1;)e=this.FFontFallBackList.Get(s),-1===(i=this.FOSFontList.IndexOf(e))&&(s+=1);return e},this.SearchForFont=function(t,e){var i=null,s=null,n=void 0;i=null;var r=this.FFontList.GetEnumerator();try{for(;r.MoveNext();)if(n=r.GetCurrent(),!(s=rtl.getObject(n)).FInactive&&s.FName===t&&s.FUnicode===e){i=s;break}}finally{r=rtl.freeLoc(r)}return i},this.GetPageReferences=function(){var e="",i=null,s=null,n=0,r=void 0;e="",s=t.TTMSFNCGeneralPDFLibPageList.$create("Create$1");try{var o=this.FXRefObjects.GetEnumerator();try{for(;o.MoveNext();)r=o.GetCurrent(),null!=(i=rtl.getObject(r)).FXRefObject&&t.TTMSFNCGeneralPDFLibPage.isPrototypeOf(i.FXRefObject)&&s.Add(rtl.as(i.FXRefObject,t.TTMSFNCGeneralPDFLibPage))}finally{o=rtl.freeLoc(o)}s.Sort(t.ComparePageNumbers);for(var a=0,l=s.GetCount()-1;a<=l;a++)n=a,e=e+pas.SysUtils.IntToStr(this.FXRefObjects.IndexOf$1(s.GetItem(n).FXRefObject))+" 0 R ";e=pas.SysUtils.Trim(e)}finally{s=rtl.freeLoc(s)}return e},this.GetAcroFormFieldReferences=function(){var e="",i=null,s=void 0;e="";var n=this.FXRefObjects.GetEnumerator();try{for(;n.MoveNext();)s=n.GetCurrent(),null!=(i=rtl.getObject(s)).FXRefObject&&t.TTMSFNCGeneralPDFLibAcroFormField.isPrototypeOf(i.FXRefObject)&&(e=e+pas.SysUtils.IntToStr(this.FXRefObjects.IndexOf$1(i))+" 0 R ")}finally{n=rtl.freeLoc(n)}return e=pas.SysUtils.Trim(e)},this.GetKeywordsString=function(){var t="";t="";var e=this.FKeywords.GetEnumerator();try{for(;e.MoveNext();)t=t+e.GetCurrent()+" "}finally{e=rtl.freeLoc(e)}return t=pas.SysUtils.Trim(t)},this.GetFontRefs=function(t){var e="",i=0;if(e="",null!=t)for(var s=0,n=t.FFontList.GetCount()-1;s<=n;s++)i=s,t.FFontList.GetItem(i).FInactive||(e+=t.FFontList.GetItem(i).GetRef());return e=pas.SysUtils.Trim(e)},this.GetXObjectRefs=function(t){var e="",i=0;if(e="",null!=t)for(var s=0,n=t.FXObjectList.GetCount()-1;s<=n;s++)i=s,e+=t.FXObjectList.GetItem(i).GetRef();return e=pas.SysUtils.Trim(e)},this.GetAnnotationsRef=function(t){var e="",i=0,s=null,n=null;if(e="",null!=t)for(var r=0,o=t.FAnnotations.GetCount()-1;r<=o;r++)i=r,e=null!=(s=(n=t.FAnnotations.GetItem(i)).FAcroFormField)?e+s.GetRef()+" ":e+n.GetRef()+" ";return e=pas.SysUtils.Trim(e)},this.GetPatternRef=function(t){var e="",i=0;if(e="",null!=t)for(var s=0,n=t.FPatterns.GetCount()-1;s<=n;s++)i=s,e+=t.FPatterns.GetItem(i).GetRef();return e=pas.SysUtils.Trim(e)},this.GetContentRef=function(t){var e="";return e="",null!=t.FContent&&null!=t.FContent.FXRefObject&&(e=pas.SysUtils.IntToStr(this.FXRefObjects.IndexOf$1(t.FContent.FXRefObject))),e=pas.SysUtils.Trim(e)},this.GetAcroFormRef=function(){var t="";return t="",null!=this.FAcroForm&&null!=this.FAcroForm.FXRefObject&&(t=pas.SysUtils.IntToStr(this.FXRefObjects.IndexOf$1(this.FAcroForm.FXRefObject))),t=pas.SysUtils.Trim(t)},this.GetDestOutputProfileRef=function(){var t="";return t="",null!=this.FDestOutputProfile&&null!=this.FDestOutputProfile.FXRefObject&&(t=pas.SysUtils.IntToStr(this.FXRefObjects.IndexOf$1(this.FDestOutputProfile.FXRefObject))),t=pas.SysUtils.Trim(t)},this.GetPageRef=function(t){var e="";return e="",null!=t&&null!=t.FXRefObject&&(e=pas.SysUtils.IntToStr(this.FXRefObjects.IndexOf$1(t.FXRefObject))),e=pas.SysUtils.Trim(e)},this.GetPageCount=function(){return this.FPageCount},this.GetPageIndex=function(){var t=0;return t=0,null!=this.FActivePage&&(t=this.FActivePage.FPageNumber),t},this.GetHeaderRect=function(){var t=pas["WEBLib.TMSFNCTypes"].TRectF.$new();return t.$assign(pas["WEBLib.TMSFNCTypes"].RectF(this.FMediaBox.Left+this.FHeaderMargins.FLeft,this.FMediaBox.Top+this.FHeaderMargins.FTop,this.FMediaBox.Right-this.FMediaBox.Left-this.FHeaderMargins.FRight,this.FMediaBox.Top+this.FHeaderMargins.FTop+this.FHeaderSize)),t},this.GetPageNumberRect=function(){var t=pas["WEBLib.TMSFNCTypes"].TRectF.$new();t.$assign(pas["WEBLib.TMSFNCTypes"].RectF(0,0,0,0));var e=this.FPageNumber;return 1===e?t.$assign(pas["WEBLib.TMSFNCTypes"].RectF(this.FMediaBox.Left+this.FPageNumberMargins.FLeft,this.FMediaBox.Top+this.FPageNumberMargins.FTop,this.FMediaBox.Right-this.FMediaBox.Left-this.FPageNumberMargins.FRight,this.FMediaBox.Top+this.FPageNumberMargins.FTop+this.FPageNumberSize)):2===e&&t.$assign(pas["WEBLib.TMSFNCTypes"].RectF(this.FMediaBox.Left+this.FPageNumberMargins.FLeft,this.FMediaBox.Bottom-this.FPageNumberSize-this.FPageNumberMargins.FBottom,this.FMediaBox.Right-this.FMediaBox.Left-this.FPageNumberMargins.FRight,this.FMediaBox.Bottom-this.FPageNumberMargins.FBottom)),t},this.GetFooterRect=function(){var t=pas["WEBLib.TMSFNCTypes"].TRectF.$new();return t.$assign(pas["WEBLib.TMSFNCTypes"].RectF(this.FMediaBox.Left+this.FFooterMargins.FLeft,this.FMediaBox.Bottom-this.FFooterSize-this.FFooterMargins.FBottom,this.FMediaBox.Right-this.FMediaBox.Left-this.FFooterMargins.FRight,this.FMediaBox.Bottom-this.FFooterMargins.FBottom)),t},this.EndDocument=function(e){var i=null,s=null,n=0,r=null,o=null,a=null,l=null,h=null;if(i=null,this.FDocumentStarted){this.InitializeFontList(),this.UpdateGlyphIds(),this.FinishPage(),this.WriteFontList(),this.WriteBitmapList(),this.WriteAcroFormFieldList(),this.WriteAnnotationList(),this.WriteShadingList(),this.WritePatternList();for(var F=0,p=this.FOutput.Streams().GetCount()-1;F<=p;F++)n=F,(r=this.FOutput.Streams().GetItem$1(n)).SetPosition(0),pas["WEBLib.TMSFNCPDFCoreLibBase"].TTMSFNCPDFGraphicsLibOutputWriterStream.isPrototypeOf(r)&&null!=(o=rtl.as(r,pas["WEBLib.TMSFNCPDFCoreLibBase"].TTMSFNCPDFGraphicsLibOutputWriterStream)).FReference&&t.TTMSFNCGeneralPDFLibXRefObject.isPrototypeOf(o.FReference)&&(a=rtl.as(o.FReference,t.TTMSFNCGeneralPDFLibXRefObject),t.TTMSFNCGeneralPDFLibPages.isPrototypeOf(a.FXRefObject)?(this.FOutput.FStream=rtl.as(r,pas["WEBLib.TMSFNCPDFCoreLibBase"].TTMSFNCPDFGraphicsLibOutputWriterStream),this.FOutput.ReplaceStrings([t.PDFPageChildRef,t.PDFPageCountRef],[this.GetPageReferences(),pas.SysUtils.IntToStr(this.FPageCount)])):t.TTMSFNCGeneralPDFLibOutputIntent.isPrototypeOf(a.FXRefObject)?(this.FOutput.FStream=rtl.as(r,pas["WEBLib.TMSFNCPDFCoreLibBase"].TTMSFNCPDFGraphicsLibOutputWriterStream),this.FOutput.ReplaceStrings([t.PDFDestOutputProfileRef],[this.GetDestOutputProfileRef()])):t.TTMSFNCGeneralPDFLibCatalog.isPrototypeOf(a.FXRefObject)?(this.FOutput.FStream=rtl.as(r,pas["WEBLib.TMSFNCPDFCoreLibBase"].TTMSFNCPDFGraphicsLibOutputWriterStream),this.FOutput.ReplaceStrings([t.PDFPageAcroFormRef],[this.GetAcroFormRef()])):t.TTMSFNCGeneralPDFLibPage.isPrototypeOf(a.FXRefObject)?(l=rtl.as(a.FXRefObject,t.TTMSFNCGeneralPDFLibPage),this.FOutput.FStream=rtl.as(r,pas["WEBLib.TMSFNCPDFCoreLibBase"].TTMSFNCPDFGraphicsLibOutputWriterStream),this.FOutput.ReplaceStrings([t.PDFPageFontRef,t.PDFPageXObjectRef,t.PDFPageContentRef,t.PDFPagePatternRef,t.PDFPageRef,t.PDFPageAnnotationsRef],[this.GetFontRefs(l),this.GetXObjectRefs(l),this.GetContentRef(l),this.GetPatternRef(l),this.GetPageRef(l),this.GetAnnotationsRef(l)])):t.TTMSFNCGeneralPDFLibContent.isPrototypeOf(a.FXRefObject)?(l=rtl.as(a.FXRefObject,t.TTMSFNCGeneralPDFLibContent).FPage,this.FOutput.FStream=rtl.as(r,pas["WEBLib.TMSFNCPDFCoreLibBase"].TTMSFNCPDFGraphicsLibOutputWriterStream),this.FOutput.ReplaceStrings([t.PDFPageContentRef],[this.GetContentRef(l)])):t.TTMSFNCGeneralPDFLibAcroForm.isPrototypeOf(a.FXRefObject)?(this.FOutput.FStream=rtl.as(r,pas["WEBLib.TMSFNCPDFCoreLibBase"].TTMSFNCPDFGraphicsLibOutputWriterStream),this.FOutput.ReplaceStrings([t.PDFPageAcroFormRef,t.PDFPageAcroFormFieldsRef],[this.GetAcroFormRef(),this.GetAcroFormFieldReferences()])):t.TTMSFNCGeneralPDFLibAcroFormField.isPrototypeOf(a.FXRefObject)&&(h=rtl.as(a.FXRefObject,t.TTMSFNCGeneralPDFLibAcroFormField),this.FOutput.FStream=rtl.as(r,pas["WEBLib.TMSFNCPDFCoreLibBase"].TTMSFNCPDFGraphicsLibOutputWriterStream),null!=h.FContent&&this.FOutput.ReplaceStrings([t.PDFPageAcroFormFieldContentRef],[h.FContent.GetRef()])));this.FOutput.FStream=pas["WEBLib.TMSFNCPDFCoreLibBase"].CreateStringStream("");for(var c=0,u=this.FOutput.Streams().GetCount()-1;c<=u;c++)n=c,(r=this.FOutput.Streams().GetItem$1(n)).SetPosition(0),pas["WEBLib.TMSFNCPDFCoreLibBase"].TTMSFNCPDFGraphicsLibOutputWriterStream.isPrototypeOf(r)&&null!=(o=rtl.as(r,pas["WEBLib.TMSFNCPDFCoreLibBase"].TTMSFNCPDFGraphicsLibOutputWriterStream)).FReference&&t.TTMSFNCGeneralPDFLibXRefObject.isPrototypeOf(o.FReference)&&((a=rtl.as(o.FReference,t.TTMSFNCGeneralPDFLibXRefObject)).FXRefOffset=this.FOutput.FStream.GetPosition()),this.FOutput.FStream.CopyFrom(r,r.GetSize());if(this.FOutput.Streams().Add$1(this.FOutput.FStream),this.FOutput.SetStreamPosition(this.FOutput.FStream.GetSize()),this.XRefAddress=this.FOutput.GetStreamPosition(),this.WriteXRefTable(),this.FOutput.WriteString("trailer"+t.PDFLB),this.FOutput.WriteString("<<"),this.FOutput.WriteString("/Root 1 0 R"),this.FOutput.WriteString("/Info "+pas.SysUtils.IntToStr(this.FXRefObjects.IndexOf$1(this.FInfo.FXRefObject))+" 0 R"),this.FOutput.WriteString("/Size "+pas.SysUtils.IntToStr(this.FXRefObjects.GetCount())),1===this.FPDFStandard)throw pas.SysUtils.Exception.$create("Create$1",["PDF Standard A1"]);if(this.FOutput.WriteString(">>"+t.PDFLB),this.FOutput.WriteString("startxref"+t.PDFLB),this.FOutput.WriteString(pas.SysUtils.IntToStr(this.XRefAddress)+t.PDFLB),this.FOutput.WriteString(t.PDFEnd+t.PDFLB),this.FOutput.SetStreamPosition(0),(s=pas.Classes.TMemoryStream.$create("Create")).CopyFrom(this.FOutput.FStream,this.FOutput.FStream.GetSize()),""!==this.FPDFFileName)try{e&&pas["WEBLib.TMSFNCTypes"].TTMSFNCMemoryStream.OpenFile.call(s,"application/pdf")}finally{s=rtl.freeLoc(s)}else i=s;this.FFontList.Clear(),this.FActivePage=null,this.FXRefObjects.Clear(),this.FOutput.ClearProperties(),this.FOutput.Streams().Clear(),this.FDocumentStarted=!1,this.FPageCount=0}return i},this.Create$1=function(){var e=pas["WEBLib.TMSFNCTypes"].TRectF.$new();return pas.System.TObject.Create.call(this),this.FPageHeight=0,this.FPageWidth=0,this.FFontFallBackList=pas.Classes.TStringList.$create("Create$1"),this.FOSFontList=pas.Classes.TStringList.$create("Create$1"),this.FOSFontList.SetCaseSensitive(!1),pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.GetFonts(this.FOSFontList),this.FEmbedFonts=!0,this.FFullFontEmbedding=!1,this.FInitializer=pas["WEBLib.TMSFNCPDFLib.General.WEB"].TTMSFNCGeneralPDFLibInitializer.$create("Create$1"),this.FInitializer.InitializeFontFallBackList(this.FFontFallBackList),this.FPageCount=0,this.FOutput=pas["WEBLib.TMSFNCPDFCoreLibBase"].TTMSFNCPDFGraphicsLibOutputWriter.$create("Create$1"),this.FOutput.FOnFontChanged=rtl.createCallback(this,"FontChanged"),this.FOutput.FOnNotifyURL=rtl.createCallback(this,"NotifyURL"),this.FOutput.FOnNotifyGoTo=rtl.createCallback(this,"NotifyGoTo"),this.FOutput.FOnNotifyText=rtl.createCallback(this,"NotifyText"),this.FOutput.FOnNotifyUnicode=rtl.createCallback(this,"NotifyUnicode"),this.FOutput.FOnNotifyBitmap=rtl.createCallback(this,"NotifyBitmap"),this.FOutput.FOnNotifyShading=rtl.createCallback(this,"NotifyShading"),this.FOutput.FOnNotifyShadingRect=rtl.createCallback(this,"NotifyShadingRect"),this.FXRefObjects=t.TTMSFNCGeneralPDFLibXRefObjects.$create("Create$2"),this.FFontList=t.TTMSFNCGeneralPDFLibFonts.$create("Create$1"),this.FAcroFormFields=t.TTMSFNCGeneralPDFLibAcroFormFields.$create("Create$1"),this.FMediaBox.$assign(t.DefaultMediaBox),this.FCropBox.$assign(t.DefaultMediaBox),this.FTrimBox.$assign(t.DefaultMediaBox),this.FArtBox.$assign(t.DefaultMediaBox),this.FBleedBox.$assign(t.DefaultMediaBox),this.FPageOrientation=0,this.FPageSize=34,this.FKeywords=pas.Classes.TStringList.$create("Create$1"),this.FAllowsPrinting=!0,this.FAllowsCopying=!0,this.FPDFStandard=0,this.FHeader="Header",this.FHeaderSize=30,e.$assign(pas["WEBLib.TMSFNCTypes"].RectF(5,5,5,5)),this.FHeaderMargins=pas["WEBLib.TMSFNCTypes"].TTMSFNCMargins.$create("Create$2",[e]),this.FHeaderAlignment=0,this.FHeaderFont=pas["WEBLib.TMSFNCPDFCoreLibBase"].TTMSFNCPDFGraphicsLibFont.$create("Create$1"),this.FFooter="Footer",this.FFooterSize=30,e.$assign(pas["WEBLib.TMSFNCTypes"].RectF(5,5,5,5)),this.FFooterMargins=pas["WEBLib.TMSFNCTypes"].TTMSFNCMargins.$create("Create$2",[e]),this.FFooterAlignment=0,this.FFooterFont=pas["WEBLib.TMSFNCPDFCoreLibBase"].TTMSFNCPDFGraphicsLibFont.$create("Create$1"),this.FPageNumber=0,this.FPageNumberFormat="%d",this.FPageNumberSize=30,e.$assign(pas["WEBLib.TMSFNCTypes"].RectF(5,5,5,5)),this.FPageNumberMargins=pas["WEBLib.TMSFNCTypes"].TTMSFNCMargins.$create("Create$2",[e]),this.FPageNumberAlignment=2,this.FPageNumberFont=pas["WEBLib.TMSFNCPDFCoreLibBase"].TTMSFNCPDFGraphicsLibFont.$create("Create$1"),this},this.Destroy=function(){this.FAcroForm=null,this.FOutputIntent=null,null!=this.FFontFallBackList&&(rtl.free(this,"FFontFallBackList"),this.FFontFallBackList=null),null!=this.FOSFontList&&(rtl.free(this,"FOSFontList"),this.FOSFontList=null),null!=this.FInitializer&&(rtl.free(this,"FInitializer"),this.FInitializer=null),null!=this.FFontList&&(rtl.free(this,"FFontList"),this.FFontList=null),null!=this.FAcroFormFields&&(rtl.free(this,"FAcroFormFields"),this.FAcroFormFields=null),null!=this.FXRefObjects&&(rtl.free(this,"FXRefObjects"),this.FXRefObjects=null),null!=this.FOutput&&(rtl.free(this,"FOutput"),this.FXRefObjects=null),null!=this.FFooterMargins&&(rtl.free(this,"FFooterMargins"),this.FFooterMargins=null),null!=this.FHeaderMargins&&(rtl.free(this,"FHeaderMargins"),this.FHeaderMargins=null),null!=this.FPageNumberMargins&&(rtl.free(this,"FPageNumberMargins"),this.FPageNumberMargins=null),null!=this.FKeywords&&(rtl.free(this,"FKeywords"),this.FKeywords=null),null!=this.FHeaderFont&&(rtl.free(this,"FHeaderFont"),this.FHeaderFont=null),null!=this.FPageNumberFont&&(rtl.free(this,"FPageNumberFont"),this.FPageNumberFont=null),null!=this.FFooterFont&&(rtl.free(this,"FFooterFont"),this.FFooterFont=null),pas.System.TObject.Destroy.call(this)},rtl.addIntf(this,pas["WEBLib.TMSFNCPDFLib"].ITMSFNCCustomPDFLib),rtl.addIntf(this,pas.System.IUnknown)})),t.PDFLibService=null,t.ComparePageNumbers=function(t,e){return pas.Math.CompareValue(t.FInsertPageNumber,e.FInsertPageNumber)}}}),["Classes","Math","DateUtils","Types","SysUtils","WEBLib.TMSFNCPDFGraphicsLib","WEBLib.TMSFNCGraphicsTypes","WEBLib.TMSFNCPDFLib","WEBLib.TMSFNCUtils","WEBLib.TMSFNCPDFCoreLibBase","WEBLib.Graphics","WEBLib.TMSFNCTypes","WEBLib.TMSFNCBitmapContainer","contnrs","Web","WEBLib.TMSFNCPDFLib.General.WEB"]),rtl.module("WEBLib.TMSFNCPDFLib",["System","Classes","Types","Web","WEBLib.TMSFNCUtils","WEBLib.TMSFNCPDFGraphicsLib","WEBLib.TMSFNCPDFCoreLibBase","WEBLib.TMSFNCCustomComponent","WEBLib.TMSFNCGraphicsTypes","WEBLib.TMSFNCPDFRichTextLib","WEBLib.TMSFNCTypes","WEBLib.TMSFNCBitmapContainer"],(function(){"use strict";var t=this,e=t.$impl;this.TTMSFNCPDFLibPageSize={0:"psA0",psA0:0,1:"psA1",psA1:1,2:"psA2",psA2:2,3:"psA3",psA3:3,4:"psA4",psA4:4,5:"psA5",psA5:5,6:"psA6",psA6:6,7:"psA7",psA7:7,8:"psA8",psA8:8,9:"psB0",psB0:9,10:"psB1",psB1:10,11:"psB2",psB2:11,12:"psB3",psB3:12,13:"psB4",psB4:13,14:"psB5",psB5:14,15:"psB6",psB6:15,16:"psB7",psB7:16,17:"psB8",psB8:17,18:"psB9",psB9:18,19:"psB10",psB10:19,20:"psC2",psC2:20,21:"psC3",psC3:21,22:"psC4",psC4:22,23:"psC5",psC5:23,24:"psC6",psC6:24,25:"psD0",psD0:25,26:"psSRA0",psSRA0:26,27:"psSRA1",psSRA1:27,28:"psSRA2",psSRA2:28,29:"psSRA3",psSRA3:29,30:"psSRA4",psSRA4:30,31:"psRA0",psRA0:31,32:"psRA1",psRA1:32,33:"psRA2",psRA2:33,34:"psLetter",psLetter:34,35:"psLegal",psLegal:35,36:"psLedger",psLedger:36,37:"psTabloid",psTabloid:37,38:"psExecutive",psExecutive:38,39:"psANSIC",psANSIC:39,40:"psANSID",psANSID:40,41:"psANSIE",psANSIE:41,42:"psFoolscap",psFoolscap:42,43:"psSmallPost",psSmallPost:43,44:"psSheetAnd13Cap",psSheetAnd13Cap:44,45:"psSheetAnd12Cap",psSheetAnd12Cap:45,46:"psDemy",psDemy:46,47:"psLargePost",psLargePost:47,48:"psSmallmedium",psSmallmedium:48,49:"psMedium",psMedium:49,50:"psSmallRoyal",psSmallRoyal:50,51:"psRoyal",psRoyal:51,52:"psImperial",psImperial:52,53:"psMetricCrownQuarto",psMetricCrownQuarto:53,54:"psMetricCrownOctavo",psMetricCrownOctavo:54,55:"psMetricLargeCrownQuarto",psMetricLargeCrownQuarto:55,56:"psMetricLargeCrownOctavo",psMetricLargeCrownOctavo:56,57:"psMetricDemyQuarto",psMetricDemyQuarto:57,58:"psMetricDemyOctavo",psMetricDemyOctavo:58,59:"psMetricRoyalQuarto",psMetricRoyalQuarto:59,60:"psMetricRoyalOctavo",psMetricRoyalOctavo:60,61:"psCustom",psCustom:61},this.TTMSFNCPDFLibStandard={0:"pdfNone",pdfNone:0,1:"pdfA1",pdfA1:1},this.TTMSFNCPDFLibPageOrientation={0:"poPortrait",poPortrait:0,1:"poLandscape",poLandscape:1},this.TTMSFNCPDFLibPageNumber={0:"pnNone",pnNone:0,1:"pnHeader",pnHeader:1,2:"pnFooter",pnFooter:2},rtl.createInterface(this,"ITMSFNCCustomPDFLib","{69FD5F00-62C7-48D8-878A-B19F31C9537B}",["BeginDocument","NewPage","SetPageSize","SetPageOrientation","SetFooter","SetFooterSize","SetHeader","SetHeaderSize","SetBitmapContainer","SetPDFGraphicsLib","SetPDFGraphicsExLib","SetPDFInitializationLib","GetPDFGraphicsLib","GetPDFInitializationLib","GetMediaBox","GetPageCount","EndDocument"],pas.System.IUnknown),rtl.createInterface(this,"ITMSFNCPDFLibGeneralService","{7434C5E1-A00F-4592-B34F-46756818C122}",["CreatePDFLib"],pas.System.IUnknown),rtl.createClass(this,"TTMSFNCCustomPDFLib",pas["WEBLib.TMSFNCCustomComponent"].TTMSFNCCustomComponent,(function(){this.$init=function(){pas["WEBLib.TMSFNCCustomComponent"].TTMSFNCCustomComponent.$init.call(this),this.FPDFLib=null,this.FPDFGraphicsLib=null},this.$final=function(){rtl.setIntfP(this,"FPDFLib",null),this.FPDFGraphicsLib=void 0,pas["WEBLib.TMSFNCCustomComponent"].TTMSFNCCustomComponent.$final.call(this)},this.SetPageSize=function(t){null!=this.FPDFLib&&this.FPDFLib.SetPageSize(t)},this.SetPageOrientation=function(t){null!=this.FPDFLib&&this.FPDFLib.SetPageOrientation(t)},this.SetFooter=function(t){null!=this.FPDFLib&&this.FPDFLib.SetFooter(t)},this.SetFooterSize=function(t){null!=this.FPDFLib&&this.FPDFLib.SetFooterSize(t)},this.SetHeader=function(t){null!=this.FPDFLib&&this.FPDFLib.SetHeader(t)},this.SetHeaderSize=function(t){null!=this.FPDFLib&&this.FPDFLib.SetHeaderSize(t)},this.SetBitmapContainer=function(t){null!=this.FPDFLib&&this.FPDFLib.SetBitmapContainer(t)},this.Initialize=function(e){var i=null,s=null,n=rtl.createIntfRefs();try{pas["WEBLib.TMSFNCPDFCoreLibBase"].TTMSFNCPDFLibPlatformServices.Current().SupportsPlatformService$1(rtl.getIntfGUIDR(t.ITMSFNCPDFLibGeneralService),{get:function(){return i},set:function(t){i=rtl.setIntfL(i,t)}})&&rtl.setIntfP(this,"FPDFLib",i.CreatePDFLib(),!0),this.FPDFGraphicsLib=pas["WEBLib.TMSFNCPDFGraphicsLib"].TTMSFNCPDFGraphicsLib.$create("Create$2",[e]),this.FPDFLib.SetPDFGraphicsLib(n.ref(1,this.FPDFGraphicsLib.GetPDFGraphicsLib())),this.FPDFLib.SetPDFGraphicsExLib(n.ref(2,this.FPDFGraphicsLib.GetPDFGraphicsExLib())),this.FPDFLib.SetPDFInitializationLib(n.ref(3,this.FPDFGraphicsLib.GetPDFInitializationLib())),n.ref(4,this.FPDFLib.GetPDFInitializationLib()).SetPDFLib(this.FPDFLib),this.FPDFLib._Release(),null!=(s=rtl.setIntfL(s,this.Initialization(),!0))&&s.SetOnNotifyNewPage(rtl.createCallback(this,"DoNotifyNewPage"))}finally{n.free(),rtl._Release(i),rtl._Release(s)}},this.DoNotifyNewPage=function(t){this.NewPage()},this.Initialization=function(){var t=null,e=!1;try{t=rtl.setIntfL(t,null),null!=this.FPDFGraphicsLib&&(t=rtl.setIntfL(t,this.FPDFGraphicsLib.GetPDFInitializationLib(),!0)),e=!0}finally{e||rtl._Release(t)}return t},this.PDFLib=function(){var t=null,e=!1;try{t=rtl.setIntfL(t,this.FPDFLib),e=!0}finally{e||rtl._Release(t)}return t},this.Create$5=function(){return this.Create$1(null),this},this.Create$1=function(t){return pas["WEBLib.TMSFNCCustomComponent"].TTMSFNCCustomComponent.Create$1.apply(this,arguments),this.Initialize(!0),this},this.Destroy=function(){null!=this.FPDFLib&&rtl.setIntfP(this,"FPDFLib",null),null!=this.FPDFGraphicsLib&&(rtl.free(this,"FPDFGraphicsLib"),this.FPDFGraphicsLib=null),pas["WEBLib.Controls"].TCustomControl.Destroy.call(this)},this.BeginDocument=function(t){null!=this.FPDFLib&&this.FPDFLib.BeginDocument(t)},this.NewPage=function(){null!=this.FPDFLib&&this.FPDFLib.NewPage()},this.Graphics=function(){var t=null,e=!1;try{t=rtl.setIntfL(t,null),null!=this.FPDFGraphicsLib&&(t=rtl.setIntfL(t,this.FPDFGraphicsLib.GetPDFGraphicsLib(),!0)),e=!0}finally{e||rtl._Release(t)}return t},this.EndDocument=function(e){var i=null;if(i=null,null!=this.FPDFLib){if(0===this.FPDFLib.GetPageCount())throw pas.SysUtils.Exception.$create("Create$1",[pas.SysUtils.Format(rtl.getResStr(t,"sTMSFNCPDFLibNoPages"),pas.System.VarRecs(18,this.$classname))]);i=this.FPDFLib.EndDocument(e)}return i},rtl.addIntf(this,pas["WEBLib.TMSFNCPersistence"].ITMSFNCPersistence),rtl.addIntf(this,pas.System.IUnknown)})),rtl.createClass(this,"TTMSFNCPDFLibList",pas.Classes.TList,(function(){})),rtl.createClass(this,"TTMSFNCPDFLibFactoryService",pas.System.TInterfacedObject,(function(){this.$init=function(){pas.System.TInterfacedObject.$init.call(this),this.FPDFLibs=null},this.$final=function(){this.FPDFLibs=void 0,pas.System.TInterfacedObject.$final.call(this)},this.CreatePDFLib=function(){var t=null,e=!1;try{t=rtl.setIntfL(t,this.DoCreatePDFLib(),!0),this.FPDFLibs.Add(t),e=!0}finally{e||rtl._Release(t)}return t},this.Create$1=function(){return pas.System.TObject.Create.call(this),this.FPDFLibs=t.TTMSFNCPDFLibList.$create("Create$1"),this},this.Destroy=function(){pas.SysUtils.FreeAndNil({p:this,get:function(){return this.p.FPDFLibs},set:function(t){this.p.FPDFLibs=t}}),pas.System.TObject.Destroy.call(this)},rtl.addIntf(this,t.ITMSFNCPDFLibGeneralService),rtl.addIntf(this,pas.System.IUnknown)})),rtl.createClass(this,"TTMSFNCPDFLib",this.TTMSFNCCustomPDFLib,(function(){rtl.addIntf(this,pas["WEBLib.TMSFNCPersistence"].ITMSFNCPersistence),rtl.addIntf(this,pas.System.IUnknown),this.$rtti.attr=[pas.Classes.ComponentPlatformsAttribute,"Create$1",[0]]})),rtl.createClass(this,"TTMSFNCPDFLibFontCacheItem",pas.System.TObject,(function(){this.$init=function(){pas.System.TObject.$init.call(this),this.FData=pas["WEBLib.TMSFNCUtils"].TTMSFNCUtilsFile.$new(),this.FLoaded=!1},this.$final=function(){this.FData=void 0,pas.System.TObject.$final.call(this)}})),this.GetFontCacheCount=function(){var t=0;return t=0,null!=e.FFontCache&&(t=e.FFontCache.GetCount()),t},this.GetFontCacheItem=function(t){var i=null;return i=null,null!=e.FFontCache&&t>=0&&t<=e.FFontCache.GetCount()-1&&(i=e.FFontCache.GetItem$1(t)),i},t.$resourcestrings={sTMSFNCPDFLibNoPages:{org:'There are no pages in this document, please add a minimum of one page to create a valid PDF document. Pages can be added by using "%s.NewPage".'}},t.$implcode=function(){rtl.createClass(e,"TTMSFNCPDFLibFontCache",pas.contnrs.TObjectList,(function(){this.GetItem$1=function(t){return this.GetItem(t)}})),e.FFontCache=null},t.$init=function(){pas["WEBLib.TMSFNCPDFLib.General"].RegisterPDFLibGeneralService()}}),["Math","WEBLib.Forms","WEBLib.TMSFNCPDFLib.General","SysUtils","contnrs"]),rtl.module("WEBLib.TMSFNCScrollBar",["System","Classes","WEBLib.TMSFNCCustomControl","WEBLib.ExtCtrls","WEBLib.TMSFNCTypes","WEBLib.TMSFNCGraphics","WEBLib.Controls","WEBLib.TMSFNCGraphicsTypes"],(function(){"use strict";var t=this;rtl.createClass(this,"TTMSFNCScrollBarAppearance",pas.Classes.TPersistent,(function(){this.$init=function(){pas.Classes.TPersistent.$init.call(this),this.FOwner=null,this.FScrollButtonSize=0,this.FThumbButtonSize=0,this.FOnChange=null,this.FFixedThumb=!1,this.FArrowColor=0,this.FThumbStroke=null,this.FThumbButtonRightDownStroke=null,this.FThumbFill=null,this.FThumbButtonLeftFill=null,this.FScrollButtonLeftHoverFill=null,this.FScrollButtonLeftStroke=null,this.FScrollButtonRightFill=null,this.FThumbButtonLeftHoverFill=null,this.FThumbButtonLeftStroke=null,this.FScrollButtonLeftHoverStroke=null,this.FThumbButtonRightFill=null,this.FScrollButtonRightHoverFill=null,this.FScrollButtonRightStroke=null,this.FThumbButtonLeftHoverStroke=null,this.FScrollButtonLeftDownFill=null,this.FThumbButtonRightHoverFill=null,this.FThumbButtonRightStroke=null,this.FScrollButtonRightHoverStroke=null,this.FThumbButtonLeftDownFill=null,this.FScrollButtonLeftDownStroke=null,this.FThumbButtonRightHoverStroke=null,this.FScrollButtonRightDownFill=null,this.FThumbButtonLeftDownStroke=null,this.FThumbButtonRightDownFill=null,this.FScrollButtonRightDownStroke=null,this.FScrollButtonLeftFill=null},this.$final=function(){this.FOwner=void 0,this.FOnChange=void 0,this.FThumbStroke=void 0,this.FThumbButtonRightDownStroke=void 0,this.FThumbFill=void 0,this.FThumbButtonLeftFill=void 0,this.FScrollButtonLeftHoverFill=void 0,this.FScrollButtonLeftStroke=void 0,this.FScrollButtonRightFill=void 0,this.FThumbButtonLeftHoverFill=void 0,this.FThumbButtonLeftStroke=void 0,this.FScrollButtonLeftHoverStroke=void 0,this.FThumbButtonRightFill=void 0,this.FScrollButtonRightHoverFill=void 0,this.FScrollButtonRightStroke=void 0,this.FThumbButtonLeftHoverStroke=void 0,this.FScrollButtonLeftDownFill=void 0,this.FThumbButtonRightHoverFill=void 0,this.FThumbButtonRightStroke=void 0,this.FScrollButtonRightHoverStroke=void 0,this.FThumbButtonLeftDownFill=void 0,this.FScrollButtonLeftDownStroke=void 0,this.FThumbButtonRightHoverStroke=void 0,this.FScrollButtonRightDownFill=void 0,this.FThumbButtonLeftDownStroke=void 0,this.FThumbButtonRightDownFill=void 0,this.FScrollButtonRightDownStroke=void 0,this.FScrollButtonLeftFill=void 0,pas.Classes.TPersistent.$final.call(this)},this.SetThumbButtonSize=function(t){this.FThumbButtonSize!==t&&(this.FThumbButtonSize=t,this.Changed())},this.SetFixedThumb=function(t){this.FFixedThumb!==t&&(this.FFixedThumb=t,this.Changed())},this.SetArrowColor=function(t){this.FArrowColor!==t&&(this.FArrowColor=t,this.Changed())},this.SetScrollButtonLeftDownFill=function(t){this.FScrollButtonLeftDownFill.Assign(t)},this.SetScrollButtonLeftDownStroke=function(t){this.FScrollButtonLeftDownStroke.Assign(t)},this.SetScrollButtonLeftFill=function(t){this.FScrollButtonLeftFill.Assign(t)},this.SetScrollButtonLeftHoverFill=function(t){this.FScrollButtonLeftHoverFill.Assign(t)},this.SetScrollButtonLeftHoverStroke=function(t){this.FScrollButtonLeftHoverStroke.Assign(t)},this.SetScrollButtonLeftStroke=function(t){this.FScrollButtonLeftStroke.Assign(t)},this.SetScrollButtonRightDownFill=function(t){this.FScrollButtonRightDownFill.Assign(t)},this.SetScrollButtonRightDownStroke=function(t){this.FScrollButtonRightDownStroke.Assign(t)},this.SetScrollButtonRightFill=function(t){this.FScrollButtonRightFill.Assign(t)},this.SetScrollButtonRightHoverFill=function(t){this.FScrollButtonRightHoverFill.Assign(t)},this.SetScrollButtonRightHoverStroke=function(t){this.FScrollButtonRightHoverStroke.Assign(t)},this.SetScrollButtonRightStroke=function(t){this.FScrollButtonRightStroke.Assign(t)},this.SetScrollButtonSize=function(t){this.FScrollButtonSize!==t&&(this.FScrollButtonSize=t,this.Changed())},this.SetThumbButtonLeftDownFill=function(t){this.FThumbButtonLeftDownFill.Assign(t)},this.SetThumbButtonLeftDownStroke=function(t){this.FThumbButtonLeftDownStroke.Assign(t)},this.SetThumbButtonLeftFill=function(t){this.FThumbButtonLeftFill.Assign(t)},this.SetThumbButtonLeftHoverFill=function(t){this.FThumbButtonLeftHoverFill.Assign(t)},this.SetThumbButtonLeftHoverStroke=function(t){this.FThumbButtonLeftHoverStroke.Assign(t)},this.SetThumbButtonLeftStroke=function(t){this.FThumbButtonLeftStroke.Assign(t)},this.SetThumbButtonRightDownFill=function(t){this.FThumbButtonRightDownFill.Assign(t)},this.SetThumbButtonRightDownStroke=function(t){this.FThumbButtonRightDownStroke.Assign(t)},this.SetThumbButtonRightFill=function(t){this.FThumbButtonRightFill.Assign(t)},this.SetThumbButtonRightHoverFill=function(t){this.FThumbButtonRightHoverFill.Assign(t)},this.SetThumbButtonRightHoverStroke=function(t){this.FThumbButtonRightHoverStroke.Assign(t)},this.SetThumbButtonRightStroke=function(t){this.FThumbButtonRightStroke.Assign(t)},this.SetThumbFill=function(t){this.FThumbFill.Assign(t)},this.SetThumbStroke=function(t){this.FThumbStroke.Assign(t)},this.IsScrollButtonSizeStored=function(){return 18!==this.FScrollButtonSize},this.IsThumbButtonSizeStored=function(){return 18!==this.FThumbButtonSize},this.Changed=function(){this.FOwner.Changed()},this.FillChanged=function(t){this.Changed()},this.StrokeChanged=function(t){this.Changed()},this.Create$1=function(t){return this.FOwner=t,this.FThumbFill=pas["WEBLib.TMSFNCGraphicsTypes"].TTMSFNCGraphicsFill.$create("Create$1",[1,pas["WEBLib.TMSFNCGraphicsTypes"].MakeGraphicsColor(225,225,225),8421504,-1,-1]),this.FThumbFill.FOnChanged=rtl.createCallback(this,"FillChanged"),this.FThumbButtonLeftFill=pas["WEBLib.TMSFNCGraphicsTypes"].TTMSFNCGraphicsFill.$create("Create$1",[1,pas["WEBLib.TMSFNCGraphicsTypes"].MakeGraphicsColor(225,225,225),8421504,-1,-1]),this.FThumbButtonLeftFill.FOnChanged=rtl.createCallback(this,"FillChanged"),this.FThumbButtonRightFill=pas["WEBLib.TMSFNCGraphicsTypes"].TTMSFNCGraphicsFill.$create("Create$1",[1,pas["WEBLib.TMSFNCGraphicsTypes"].MakeGraphicsColor(225,225,225),8421504,-1,-1]),this.FThumbButtonRightFill.FOnChanged=rtl.createCallback(this,"FillChanged"),this.FThumbButtonLeftHoverFill=pas["WEBLib.TMSFNCGraphicsTypes"].TTMSFNCGraphicsFill.$create("Create$1",[1,pas["WEBLib.TMSFNCGraphicsTypes"].MakeGraphicsColor(229,241,251),8421504,-1,-1]),this.FThumbButtonLeftHoverFill.FOnChanged=rtl.createCallback(this,"FillChanged"),this.FThumbButtonRightHoverFill=pas["WEBLib.TMSFNCGraphicsTypes"].TTMSFNCGraphicsFill.$create("Create$1",[1,pas["WEBLib.TMSFNCGraphicsTypes"].MakeGraphicsColor(229,241,251),8421504,-1,-1]),this.FThumbButtonRightHoverFill.FOnChanged=rtl.createCallback(this,"FillChanged"),this.FThumbButtonLeftDownFill=pas["WEBLib.TMSFNCGraphicsTypes"].TTMSFNCGraphicsFill.$create("Create$1",[1,pas["WEBLib.TMSFNCGraphicsTypes"].Darker(pas["WEBLib.TMSFNCGraphicsTypes"].MakeGraphicsColor(229,241,251),40),8421504,-1,-1]),this.FThumbButtonLeftDownFill.FOnChanged=rtl.createCallback(this,"FillChanged"),this.FThumbButtonRightDownFill=pas["WEBLib.TMSFNCGraphicsTypes"].TTMSFNCGraphicsFill.$create("Create$1",[1,pas["WEBLib.TMSFNCGraphicsTypes"].Darker(pas["WEBLib.TMSFNCGraphicsTypes"].MakeGraphicsColor(229,241,251),40),8421504,-1,-1]),this.FThumbButtonRightDownFill.FOnChanged=rtl.createCallback(this,"FillChanged"),this.FScrollButtonLeftFill=pas["WEBLib.TMSFNCGraphicsTypes"].TTMSFNCGraphicsFill.$create("Create$1",[1,pas["WEBLib.TMSFNCGraphicsTypes"].MakeGraphicsColor(225,225,225),8421504,-1,-1]),this.FScrollButtonLeftFill.FOnChanged=rtl.createCallback(this,"FillChanged"),this.FScrollButtonRightFill=pas["WEBLib.TMSFNCGraphicsTypes"].TTMSFNCGraphicsFill.$create("Create$1",[1,pas["WEBLib.TMSFNCGraphicsTypes"].MakeGraphicsColor(225,225,225),8421504,-1,-1]),this.FScrollButtonRightFill.FOnChanged=rtl.createCallback(this,"FillChanged"),this.FScrollButtonLeftHoverFill=pas["WEBLib.TMSFNCGraphicsTypes"].TTMSFNCGraphicsFill.$create("Create$1",[1,pas["WEBLib.TMSFNCGraphicsTypes"].MakeGraphicsColor(229,241,251),8421504,-1,-1]),this.FScrollButtonLeftHoverFill.FOnChanged=rtl.createCallback(this,"FillChanged"),this.FScrollButtonRightHoverFill=pas["WEBLib.TMSFNCGraphicsTypes"].TTMSFNCGraphicsFill.$create("Create$1",[1,pas["WEBLib.TMSFNCGraphicsTypes"].MakeGraphicsColor(229,241,251),8421504,-1,-1]),this.FScrollButtonRightHoverFill.FOnChanged=rtl.createCallback(this,"FillChanged"),this.FScrollButtonLeftDownFill=pas["WEBLib.TMSFNCGraphicsTypes"].TTMSFNCGraphicsFill.$create("Create$1",[1,pas["WEBLib.TMSFNCGraphicsTypes"].Darker(pas["WEBLib.TMSFNCGraphicsTypes"].MakeGraphicsColor(229,241,251),40),8421504,-1,-1]),this.FScrollButtonLeftDownFill.FOnChanged=rtl.createCallback(this,"FillChanged"),this.FScrollButtonRightDownFill=pas["WEBLib.TMSFNCGraphicsTypes"].TTMSFNCGraphicsFill.$create("Create$1",[1,pas["WEBLib.TMSFNCGraphicsTypes"].Darker(pas["WEBLib.TMSFNCGraphicsTypes"].MakeGraphicsColor(229,241,251),40),8421504,-1,-1]),this.FScrollButtonRightDownFill.FOnChanged=rtl.createCallback(this,"FillChanged"),this.FThumbStroke=pas["WEBLib.TMSFNCGraphicsTypes"].TTMSFNCGraphicsStroke.$create("Create$1",[1,pas["WEBLib.TMSFNCGraphicsTypes"].Darker(11119017,40)]),this.FThumbStroke.FOnChanged=rtl.createCallback(this,"StrokeChanged"),this.FThumbButtonLeftStroke=pas["WEBLib.TMSFNCGraphicsTypes"].TTMSFNCGraphicsStroke.$create("Create$1",[1,pas["WEBLib.TMSFNCGraphicsTypes"].Darker(11119017,40)]),this.FThumbButtonLeftStroke.FOnChanged=rtl.createCallback(this,"StrokeChanged"),this.FThumbButtonRightStroke=pas["WEBLib.TMSFNCGraphicsTypes"].TTMSFNCGraphicsStroke.$create("Create$1",[1,pas["WEBLib.TMSFNCGraphicsTypes"].Darker(11119017,40)]),this.FThumbButtonRightStroke.FOnChanged=rtl.createCallback(this,"StrokeChanged"),this.FThumbButtonLeftHoverStroke=pas["WEBLib.TMSFNCGraphicsTypes"].TTMSFNCGraphicsStroke.$create("Create$1",[1,pas["WEBLib.TMSFNCGraphicsTypes"].MakeGraphicsColor(60,127,177)]),this.FThumbButtonLeftHoverStroke.FOnChanged=rtl.createCallback(this,"StrokeChanged"),this.FThumbButtonRightHoverStroke=pas["WEBLib.TMSFNCGraphicsTypes"].TTMSFNCGraphicsStroke.$create("Create$1",[1,pas["WEBLib.TMSFNCGraphicsTypes"].MakeGraphicsColor(60,127,177)]),this.FThumbButtonRightHoverStroke.FOnChanged=rtl.createCallback(this,"StrokeChanged"),this.FThumbButtonLeftDownStroke=pas["WEBLib.TMSFNCGraphicsTypes"].TTMSFNCGraphicsStroke.$create("Create$1",[1,pas["WEBLib.TMSFNCGraphicsTypes"].MakeGraphicsColor(60,127,177)]),this.FThumbButtonLeftDownStroke.FOnChanged=rtl.createCallback(this,"StrokeChanged"),this.FThumbButtonRightDownStroke=pas["WEBLib.TMSFNCGraphicsTypes"].TTMSFNCGraphicsStroke.$create("Create$1",[1,pas["WEBLib.TMSFNCGraphicsTypes"].MakeGraphicsColor(60,127,177)]),this.FThumbButtonRightDownStroke.FOnChanged=rtl.createCallback(this,"StrokeChanged"),this.FScrollButtonLeftStroke=pas["WEBLib.TMSFNCGraphicsTypes"].TTMSFNCGraphicsStroke.$create("Create$1",[1,pas["WEBLib.TMSFNCGraphicsTypes"].Darker(11119017,40)]),this.FScrollButtonLeftStroke.FOnChanged=rtl.createCallback(this,"StrokeChanged"),this.FScrollButtonRightStroke=pas["WEBLib.TMSFNCGraphicsTypes"].TTMSFNCGraphicsStroke.$create("Create$1",[1,pas["WEBLib.TMSFNCGraphicsTypes"].Darker(11119017,40)]),this.FScrollButtonRightStroke.FOnChanged=rtl.createCallback(this,"StrokeChanged"),this.FScrollButtonLeftHoverStroke=pas["WEBLib.TMSFNCGraphicsTypes"].TTMSFNCGraphicsStroke.$create("Create$1",[1,pas["WEBLib.TMSFNCGraphicsTypes"].MakeGraphicsColor(60,127,177)]),this.FScrollButtonLeftHoverStroke.FOnChanged=rtl.createCallback(this,"StrokeChanged"),this.FScrollButtonRightHoverStroke=pas["WEBLib.TMSFNCGraphicsTypes"].TTMSFNCGraphicsStroke.$create("Create$1",[1,pas["WEBLib.TMSFNCGraphicsTypes"].MakeGraphicsColor(60,127,177)]),this.FScrollButtonRightHoverStroke.FOnChanged=rtl.createCallback(this,"StrokeChanged"),this.FScrollButtonLeftDownStroke=pas["WEBLib.TMSFNCGraphicsTypes"].TTMSFNCGraphicsStroke.$create("Create$1",[1,pas["WEBLib.TMSFNCGraphicsTypes"].MakeGraphicsColor(60,127,177)]),this.FScrollButtonLeftDownStroke.FOnChanged=rtl.createCallback(this,"StrokeChanged"),this.FScrollButtonRightDownStroke=pas["WEBLib.TMSFNCGraphicsTypes"].TTMSFNCGraphicsStroke.$create("Create$1",[1,pas["WEBLib.TMSFNCGraphicsTypes"].MakeGraphicsColor(60,127,177)]),this.FScrollButtonRightDownStroke.FOnChanged=rtl.createCallback(this,"StrokeChanged"),this.FArrowColor=0,this.FFixedThumb=!1,this.FThumbButtonSize=18,this.FScrollButtonSize=18,this},this.Destroy=function(){rtl.free(this,"FThumbFill"),rtl.free(this,"FScrollButtonLeftFill"),rtl.free(this,"FScrollButtonRightFill"),rtl.free(this,"FScrollButtonLeftHoverFill"),rtl.free(this,"FScrollButtonRightHoverFill"),rtl.free(this,"FScrollButtonLeftDownFill"),rtl.free(this,"FScrollButtonRightDownFill"),rtl.free(this,"FThumbButtonLeftFill"),rtl.free(this,"FThumbButtonRightFill"),rtl.free(this,"FThumbButtonLeftHoverFill"),rtl.free(this,"FThumbButtonRightHoverFill"),rtl.free(this,"FThumbButtonLeftDownFill"),rtl.free(this,"FThumbButtonRightDownFill"),rtl.free(this,"FThumbStroke"),rtl.free(this,"FScrollButtonLeftStroke"),rtl.free(this,"FScrollButtonRightStroke"),rtl.free(this,"FScrollButtonLeftHoverStroke"),rtl.free(this,"FScrollButtonRightHoverStroke"),rtl.free(this,"FScrollButtonLeftDownStroke"),rtl.free(this,"FScrollButtonRightDownStroke"),rtl.free(this,"FThumbButtonLeftStroke"),rtl.free(this,"FThumbButtonRightStroke"),rtl.free(this,"FThumbButtonLeftHoverStroke"),rtl.free(this,"FThumbButtonRightHoverStroke"),rtl.free(this,"FThumbButtonLeftDownStroke"),rtl.free(this,"FThumbButtonRightDownStroke"),pas.System.TObject.Destroy.call(this)},this.Assign=function(e){t.TTMSFNCScrollBarAppearance.isPrototypeOf(e)&&(this.FThumbFill.Assign(rtl.as(e,t.TTMSFNCScrollBarAppearance).FThumbFill),this.FScrollButtonSize=rtl.as(e,t.TTMSFNCScrollBarAppearance).FScrollButtonSize,this.FThumbButtonSize=rtl.as(e,t.TTMSFNCScrollBarAppearance).FThumbButtonSize,this.FThumbButtonLeftFill.Assign(rtl.as(e,t.TTMSFNCScrollBarAppearance).FThumbButtonLeftFill),this.FThumbButtonLeftHoverFill.Assign(rtl.as(e,t.TTMSFNCScrollBarAppearance).FThumbButtonLeftHoverFill),this.FThumbButtonLeftDownFill.Assign(rtl.as(e,t.TTMSFNCScrollBarAppearance).FThumbButtonLeftDownFill),this.FThumbButtonRightFill.Assign(rtl.as(e,t.TTMSFNCScrollBarAppearance).FThumbButtonRightFill),this.FThumbButtonRightDownFill.Assign(rtl.as(e,t.TTMSFNCScrollBarAppearance).FThumbButtonRightDownFill),this.FThumbButtonRightHoverFill.Assign(rtl.as(e,t.TTMSFNCScrollBarAppearance).FThumbButtonRightHoverFill),this.FScrollButtonLeftFill.Assign(rtl.as(e,t.TTMSFNCScrollBarAppearance).FScrollButtonLeftFill),this.FScrollButtonLeftHoverFill.Assign(rtl.as(e,t.TTMSFNCScrollBarAppearance).FScrollButtonLeftHoverFill),this.FScrollButtonLeftDownFill.Assign(rtl.as(e,t.TTMSFNCScrollBarAppearance).FScrollButtonLeftDownFill),this.FScrollButtonRightFill.Assign(rtl.as(e,t.TTMSFNCScrollBarAppearance).FScrollButtonRightFill),this.FScrollButtonRightDownFill.Assign(rtl.as(e,t.TTMSFNCScrollBarAppearance).FScrollButtonRightDownFill),this.FScrollButtonRightHoverFill.Assign(rtl.as(e,t.TTMSFNCScrollBarAppearance).FScrollButtonRightHoverFill),this.FThumbButtonLeftStroke.Assign(rtl.as(e,t.TTMSFNCScrollBarAppearance).FThumbButtonLeftStroke),this.FThumbButtonLeftHoverStroke.Assign(rtl.as(e,t.TTMSFNCScrollBarAppearance).FThumbButtonLeftHoverStroke),this.FThumbButtonLeftDownStroke.Assign(rtl.as(e,t.TTMSFNCScrollBarAppearance).FThumbButtonLeftDownStroke),this.FThumbButtonRightStroke.Assign(rtl.as(e,t.TTMSFNCScrollBarAppearance).FThumbButtonRightStroke),this.FThumbButtonRightDownStroke.Assign(rtl.as(e,t.TTMSFNCScrollBarAppearance).FThumbButtonRightDownStroke),this.FThumbButtonRightHoverStroke.Assign(rtl.as(e,t.TTMSFNCScrollBarAppearance).FThumbButtonRightHoverStroke),this.FScrollButtonLeftStroke.Assign(rtl.as(e,t.TTMSFNCScrollBarAppearance).FScrollButtonLeftStroke),this.FScrollButtonLeftHoverStroke.Assign(rtl.as(e,t.TTMSFNCScrollBarAppearance).FScrollButtonLeftHoverStroke),this.FScrollButtonLeftDownStroke.Assign(rtl.as(e,t.TTMSFNCScrollBarAppearance).FScrollButtonLeftDownStroke),this.FScrollButtonRightStroke.Assign(rtl.as(e,t.TTMSFNCScrollBarAppearance).FScrollButtonRightStroke),this.FScrollButtonRightDownStroke.Assign(rtl.as(e,t.TTMSFNCScrollBarAppearance).FScrollButtonRightDownStroke),this.FScrollButtonRightHoverStroke.Assign(rtl.as(e,t.TTMSFNCScrollBarAppearance).FScrollButtonRightHoverStroke),this.Changed())},this.GetThumbButtonSize=function(){return this.FFixedThumb?0:this.FThumbButtonSize};var e=this.$rtti;e.addProperty("ThumbFill",2,pas["WEBLib.TMSFNCGraphicsTypes"].$rtti.TTMSFNCGraphicsFill,"FThumbFill","SetThumbFill"),e.addProperty("ScrollButtonLeftFill",2,pas["WEBLib.TMSFNCGraphicsTypes"].$rtti.TTMSFNCGraphicsFill,"FScrollButtonLeftFill","SetScrollButtonLeftFill"),e.addProperty("ScrollButtonRightFill",2,pas["WEBLib.TMSFNCGraphicsTypes"].$rtti.TTMSFNCGraphicsFill,"FScrollButtonRightFill","SetScrollButtonRightFill"),e.addProperty("ScrollButtonLeftHoverFill",2,pas["WEBLib.TMSFNCGraphicsTypes"].$rtti.TTMSFNCGraphicsFill,"FScrollButtonLeftHoverFill","SetScrollButtonLeftHoverFill"),e.addProperty("ScrollButtonRightHoverFill",2,pas["WEBLib.TMSFNCGraphicsTypes"].$rtti.TTMSFNCGraphicsFill,"FScrollButtonRightHoverFill","SetScrollButtonRightHoverFill"),e.addProperty("ScrollButtonLeftDownFill",2,pas["WEBLib.TMSFNCGraphicsTypes"].$rtti.TTMSFNCGraphicsFill,"FScrollButtonLeftDownFill","SetScrollButtonLeftDownFill"),e.addProperty("ScrollButtonRightDownFill",2,pas["WEBLib.TMSFNCGraphicsTypes"].$rtti.TTMSFNCGraphicsFill,"FScrollButtonRightDownFill","SetScrollButtonRightDownFill"),e.addProperty("ThumbButtonLeftFill",2,pas["WEBLib.TMSFNCGraphicsTypes"].$rtti.TTMSFNCGraphicsFill,"FThumbButtonLeftFill","SetThumbButtonLeftFill"),e.addProperty("ThumbButtonRightFill",2,pas["WEBLib.TMSFNCGraphicsTypes"].$rtti.TTMSFNCGraphicsFill,"FThumbButtonRightFill","SetThumbButtonRightFill"),e.addProperty("ThumbButtonLeftHoverFill",2,pas["WEBLib.TMSFNCGraphicsTypes"].$rtti.TTMSFNCGraphicsFill,"FThumbButtonLeftHoverFill","SetThumbButtonLeftHoverFill"),e.addProperty("ThumbButtonRightHoverFill",2,pas["WEBLib.TMSFNCGraphicsTypes"].$rtti.TTMSFNCGraphicsFill,"FThumbButtonRightHoverFill","SetThumbButtonRightHoverFill"),e.addProperty("ThumbButtonLeftDownFill",2,pas["WEBLib.TMSFNCGraphicsTypes"].$rtti.TTMSFNCGraphicsFill,"FThumbButtonLeftDownFill","SetThumbButtonLeftDownFill"),e.addProperty("ThumbButtonRightDownFill",2,pas["WEBLib.TMSFNCGraphicsTypes"].$rtti.TTMSFNCGraphicsFill,"FThumbButtonRightDownFill","SetThumbButtonRightDownFill"),e.addProperty("ThumbStroke",2,pas["WEBLib.TMSFNCGraphicsTypes"].$rtti.TTMSFNCGraphicsStroke,"FThumbStroke","SetThumbStroke"),e.addProperty("ScrollButtonLeftStroke",2,pas["WEBLib.TMSFNCGraphicsTypes"].$rtti.TTMSFNCGraphicsStroke,"FScrollButtonLeftStroke","SetScrollButtonLeftStroke"),e.addProperty("ScrollButtonRightStroke",2,pas["WEBLib.TMSFNCGraphicsTypes"].$rtti.TTMSFNCGraphicsStroke,"FScrollButtonRightStroke","SetScrollButtonRightStroke"),e.addProperty("ScrollButtonLeftHoverStroke",2,pas["WEBLib.TMSFNCGraphicsTypes"].$rtti.TTMSFNCGraphicsStroke,"FScrollButtonLeftHoverStroke","SetScrollButtonLeftHoverStroke"),e.addProperty("ScrollButtonRightHoverStroke",2,pas["WEBLib.TMSFNCGraphicsTypes"].$rtti.TTMSFNCGraphicsStroke,"FScrollButtonRightHoverStroke","SetScrollButtonRightHoverStroke"),e.addProperty("ScrollButtonLeftDownStroke",2,pas["WEBLib.TMSFNCGraphicsTypes"].$rtti.TTMSFNCGraphicsStroke,"FScrollButtonLeftDownStroke","SetScrollButtonLeftDownStroke"),e.addProperty("ScrollButtonRightDownStroke",2,pas["WEBLib.TMSFNCGraphicsTypes"].$rtti.TTMSFNCGraphicsStroke,"FScrollButtonRightDownStroke","SetScrollButtonRightDownStroke"),e.addProperty("ThumbButtonLeftStroke",2,pas["WEBLib.TMSFNCGraphicsTypes"].$rtti.TTMSFNCGraphicsStroke,"FThumbButtonLeftStroke","SetThumbButtonLeftStroke"),e.addProperty("ThumbButtonRightStroke",2,pas["WEBLib.TMSFNCGraphicsTypes"].$rtti.TTMSFNCGraphicsStroke,"FThumbButtonRightStroke","SetThumbButtonRightStroke"),e.addProperty("ThumbButtonLeftHoverStroke",2,pas["WEBLib.TMSFNCGraphicsTypes"].$rtti.TTMSFNCGraphicsStroke,"FThumbButtonLeftHoverStroke","SetThumbButtonLeftHoverStroke"),e.addProperty("ThumbButtonRightHoverStroke",2,pas["WEBLib.TMSFNCGraphicsTypes"].$rtti.TTMSFNCGraphicsStroke,"FThumbButtonRightHoverStroke","SetThumbButtonRightHoverStroke"),e.addProperty("ThumbButtonLeftDownStroke",2,pas["WEBLib.TMSFNCGraphicsTypes"].$rtti.TTMSFNCGraphicsStroke,"FThumbButtonLeftDownStroke","SetThumbButtonLeftDownStroke"),e.addProperty("ThumbButtonRightDownStroke",2,pas["WEBLib.TMSFNCGraphicsTypes"].$rtti.TTMSFNCGraphicsStroke,"FThumbButtonRightDownStroke","SetThumbButtonRightDownStroke"),e.addProperty("ThumbButtonSize",14,rtl.double,"FThumbButtonSize","SetThumbButtonSize",{stored:"IsThumbButtonSizeStored"}),e.addProperty("ScrollButtonSize",14,rtl.double,"FScrollButtonSize","SetScrollButtonSize",{stored:"IsScrollButtonSizeStored"}),e.addProperty("FixedThumb",2,rtl.boolean,"FFixedThumb","SetFixedThumb",{Default:!1}),e.addProperty("ArrowColor",2,pas["WEBLib.Graphics"].$rtti.TColor,"FArrowColor","SetArrowColor",{Default:0}),e.addProperty("OnChange",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnChange","FOnChange")})),this.TTMSFNCScrollBarMode={0:"sbmNone",sbmNone:0,1:"sbmScroll",sbmScroll:1,2:"sbmChangePageSize",sbmChangePageSize:2},this.TTMSFNCScrollBarHoveredButton={0:"shbNone",shbNone:0,1:"shbScrollMin",shbScrollMin:1,2:"shbScrollMax",shbScrollMax:2,3:"shbThumbMin",shbThumbMin:3,4:"shbThumbMax",shbThumbMax:4},this.TTMSFNCScrollBarDownButton={0:"sdbNone",sdbNone:0,1:"sdbScrollMin",sdbScrollMin:1,2:"sdbScrollMax",sdbScrollMax:2,3:"sdbThumbMin",sdbThumbMin:3,4:"sdbThumbMax",sdbThumbMax:4},this.TTMSFNCScrollButtonChange={0:"sbcNone",sbcNone:0,1:"sbcSmallSubstract",sbcSmallSubstract:1,2:"sbcSmallAdd",sbcSmallAdd:2,3:"sbcLargeSubstract",sbcLargeSubstract:3,4:"sbcLargeAdd",sbcLargeAdd:4},this.$rtti.$MethodVar("TTMSFNCScrollBarValueChanged",{procsig:rtl.newTIProcSig([["Sender",pas.System.$rtti.TObject],["Value",rtl.double]]),methodkind:0}),this.$rtti.$MethodVar("TTMSFNCScrollBarPageSizeChanged",{procsig:rtl.newTIProcSig([["Sender",pas.System.$rtti.TObject],["PageSize",rtl.double]]),methodkind:0}),this.TTMSFNCScrollBarKind={0:"sbkHorizontal",sbkHorizontal:0,1:"sbkVertical",sbkVertical:1},this.$rtti.$Enum("TTMSFNCScrollBarKind",{minvalue:0,maxvalue:1,ordtype:1,enumtype:this.TTMSFNCScrollBarKind}),rtl.createClass(this,"TTMSFNCCustomScrollBar",pas["WEBLib.TMSFNCCustomControl"].TTMSFNCCustomControl,(function(){this.$init=function(){pas["WEBLib.TMSFNCCustomControl"].TTMSFNCCustomControl.$init.call(this),this.FNeedsChange=!1,this.FSavedPageSize=0,this.FDesignTime=!1,this.FMinThumb=!1,this.FMaxThumb=!1,this.FMx=0,this.FMy=0,this.FCx=0,this.FCy=0,this.FTimer=null,this.FTime=0,this.FScrollBarMode=0,this.FScrollButtonChange=0,this.FHoveredButton=0,this.FDownButton=0,this.FKind=0,this.FValue=0,this.FTempValue=0,this.FMin=0,this.FMax=0,this.FPageSize=0,this.FSmallChange=0,this.FLargeChange=0,this.FAppearance=null,this.FOnValueChange=null,this.FOnPageSizeChanged=null,this.FTracking=!1},this.$final=function(){this.FTimer=void 0,this.FAppearance=void 0,this.FOnValueChange=void 0,this.FOnPageSizeChanged=void 0,pas["WEBLib.TMSFNCCustomControl"].TTMSFNCCustomControl.$final.call(this)},this.SetAppearance=function(t){this.FAppearance!==t&&(this.FAppearance.Assign(t),this.Changed())},this.SetKind=function(t){this.FKind!==t&&(this.FKind=t,0 in this.FComponentState?this.FNeedsChange=!0:this.SetBounds(this.GetLeft(),this.GetTop(),this.GetHeight(),this.GetWidth()),this.Changed())},this.SetMax=function(t){this.FMax!==t&&(this.FMax=t,this.Changed())},this.SetMin=function(t){this.FMin!==t&&(this.FMin=t,this.Changed())},this.SetValue=function(t){this.FValue!==t&&(this.FValue=Math.max(this.FMin,Math.min(this.FMax,t)),this.FTempValue=this.FValue,null!=this.FOnValueChange&&this.FOnValueChange(this,t),this.Changed())},this.SetPageSize=function(t){this.FPageSize!==t&&(this.FPageSize=Math.min(this.GetRange(),Math.max(0,t)),null!=this.FOnPageSizeChanged&&this.FOnPageSizeChanged(this,this.FPageSize),this.Changed())},this.IsLargeChangeStored=function(){return 20!==this.FLargeChange},this.IsMaxStored=function(){return 100!==this.FMax},this.IsMinStored=function(){return 0!==this.FMin},this.IsPageSizeStored=function(){return 20!==this.FPageSize},this.IsSmallChangeStored=function(){return 1!==this.FSmallChange},this.IsValueStored=function(){return 0!==this.FValue},this.SetTracking=function(t){this.FTracking!==t&&(this.FTracking=t,this.Changed())},this.ApplyStyle=function(){var t=0;pas["WEBLib.TMSFNCCustomControl"].TTMSFNCCustomControl.ApplyStyle.call(this),t=-1,pas["WEBLib.TMSFNCStyles"].TTMSFNCStyles.GetStyleBackgroundFillColor({get:function(){return t},set:function(e){t=e}})&&(this.FAppearance.FThumbFill.SetColor(t),this.FAppearance.FThumbButtonLeftFill.SetColor(t),this.FAppearance.FThumbButtonRightFill.SetColor(t),this.FAppearance.FScrollButtonLeftFill.SetColor(t),this.FAppearance.FScrollButtonRightFill.SetColor(t)),t=-1,pas["WEBLib.TMSFNCStyles"].TTMSFNCStyles.GetStyleLineFillColor({get:function(){return t},set:function(e){t=e}})&&(this.FAppearance.FThumbStroke.SetColor(t),this.FAppearance.FThumbButtonLeftStroke.SetColor(t),this.FAppearance.FThumbButtonRightStroke.SetColor(t),this.FAppearance.FScrollButtonLeftStroke.SetColor(t),this.FAppearance.FScrollButtonRightStroke.SetColor(t),this.FAppearance.FThumbButtonLeftHoverStroke.SetColor(t),this.FAppearance.FThumbButtonRightHoverStroke.SetColor(t),this.FAppearance.FScrollButtonLeftHoverStroke.SetColor(t),this.FAppearance.FScrollButtonRightHoverStroke.SetColor(t),this.FAppearance.FThumbButtonLeftDownStroke.SetColor(t),this.FAppearance.FThumbButtonRightDownStroke.SetColor(t),this.FAppearance.FScrollButtonLeftDownStroke.SetColor(t),this.FAppearance.FScrollButtonRightDownStroke.SetColor(t)),t=-1,pas["WEBLib.TMSFNCStyles"].TTMSFNCStyles.GetStyleSelectionFillColor({get:function(){return t},set:function(e){t=e}})&&(this.FAppearance.FThumbButtonLeftHoverFill.SetColor(pas["WEBLib.TMSFNCGraphicsTypes"].Blend(this.FFill.FColor,t,70)),this.FAppearance.FThumbButtonRightHoverFill.SetColor(pas["WEBLib.TMSFNCGraphicsTypes"].Blend(this.FFill.FColor,t,70)),this.FAppearance.FScrollButtonLeftHoverFill.SetColor(pas["WEBLib.TMSFNCGraphicsTypes"].Blend(this.FFill.FColor,t,70)),this.FAppearance.FScrollButtonRightHoverFill.SetColor(pas["WEBLib.TMSFNCGraphicsTypes"].Blend(this.FFill.FColor,t,70)),this.FAppearance.FThumbButtonLeftDownFill.SetColor(pas["WEBLib.TMSFNCGraphicsTypes"].Blend(this.FFill.FColor,t,50)),this.FAppearance.FThumbButtonRightDownFill.SetColor(pas["WEBLib.TMSFNCGraphicsTypes"].Blend(this.FFill.FColor,t,50)),this.FAppearance.FScrollButtonLeftDownFill.SetColor(pas["WEBLib.TMSFNCGraphicsTypes"].Blend(this.FFill.FColor,t,50)),this.FAppearance.FScrollButtonRightDownFill.SetColor(pas["WEBLib.TMSFNCGraphicsTypes"].Blend(this.FFill.FColor,t,50)),this.FAppearance.SetArrowColor(t))},this.ResetToDefaultStyle=function(){var e=null;pas["WEBLib.TMSFNCCustomControl"].TTMSFNCCustomControl.ResetToDefaultStyle.call(this),e=t.TTMSFNCScrollBarAppearance.$create("Create$1",[null]);try{this.FAppearance.Assign(e)}finally{e=rtl.freeLoc(e)}},this.HandleKeyDown=function(t,e){pas["WEBLib.TMSFNCCustomControl"].TTMSFNCCustomControlBaseCommon.HandleKeyDown.apply(this,arguments);var i=t.get();38===i||37===i?this.SetValue(this.FValue-this.FSmallChange):40===i||39===i?this.SetValue(this.FValue+this.FSmallChange):36===i?this.SetValue(this.FMin):35===i?this.SetValue(this.FMax):33===i?this.SetValue(this.FValue-this.FLargeChange):34===i&&this.SetValue(this.FValue+this.FLargeChange)},this.HandleMouseDown=function(t,e,i,s){pas["WEBLib.TMSFNCCustomControl"].TTMSFNCCustomControlBaseCommon.HandleMouseDown.apply(this,arguments),this.CaptureEx(),this.FCx=Math.abs(i-this.GetThumbRectangle().Left+this.GetScrollRectangle().Left),this.FCy=Math.abs(s-this.GetThumbRectangle().Top+this.GetScrollRectangle().Top),this.FMx=i,this.FMy=s,this.FSavedPageSize=this.FPageSize,this.FTime=0,this.FTimer.SetEnabled(!0),this.MouseOnThumbButtons(i,s)?(this.FScrollBarMode=2,this.FMinThumb=pas["WEBLib.TMSFNCTypes"].PtInRectEx(this.GetMinThumbButton(),pas["WEBLib.TMSFNCTypes"].PointF(i,s)),this.FMaxThumb=pas["WEBLib.TMSFNCTypes"].PtInRectEx(this.GetMaxThumbButton(),pas["WEBLib.TMSFNCTypes"].PointF(i,s))):this.MouseOnThumb(i,s)?this.FScrollBarMode=1:pas["WEBLib.TMSFNCTypes"].PtInRectEx(this.GetMinScrollButton(),pas["WEBLib.TMSFNCTypes"].PointF(i,s))?this.FScrollButtonChange=1:pas["WEBLib.TMSFNCTypes"].PtInRectEx(this.GetMaxScrollButton(),pas["WEBLib.TMSFNCTypes"].PointF(i,s))?this.FScrollButtonChange=2:pas["WEBLib.TMSFNCTypes"].PtInRectEx(this.GetScrollAreaMin(),pas["WEBLib.TMSFNCTypes"].PointF(i,s))?this.FScrollButtonChange=3:pas["WEBLib.TMSFNCTypes"].PtInRectEx(this.GetScrollAreaMax(),pas["WEBLib.TMSFNCTypes"].PointF(i,s))&&(this.FScrollButtonChange=4),pas["WEBLib.TMSFNCTypes"].PtInRectEx(this.GetMinThumbButton(),pas["WEBLib.TMSFNCTypes"].PointF(i,s))&&3!==this.FDownButton?(this.FDownButton=3,this.Changed()):pas["WEBLib.TMSFNCTypes"].PtInRectEx(this.GetMaxThumbButton(),pas["WEBLib.TMSFNCTypes"].PointF(i,s))&&4!==this.FDownButton?(this.FDownButton=4,this.Changed()):pas["WEBLib.TMSFNCTypes"].PtInRectEx(this.GetMinScrollButton(),pas["WEBLib.TMSFNCTypes"].PointF(i,s))&&1!==this.FDownButton?(this.FDownButton=1,this.Changed()):pas["WEBLib.TMSFNCTypes"].PtInRectEx(this.GetMaxScrollButton(),pas["WEBLib.TMSFNCTypes"].PointF(i,s))&&2!==this.FDownButton&&(this.FDownButton=2,this.Changed())},this.HandleMouseMove=function(t,e,i){var s=0,n=0;if(pas["WEBLib.TMSFNCCustomControl"].TTMSFNCCustomControlBaseCommon.HandleMouseMove.apply(this,arguments),2===this.FScrollBarMode){var r=this.FKind;0===r?this.SetControlCursor(9):1===r&&this.SetControlCursor(7);var o=this.FKind;s=0===o?this.GetRange()/(this.GetScrollRectangle().Right-this.GetScrollRectangle().Left)*(e-this.FMx):1===o?this.GetRange()/(this.GetScrollRectangle().Bottom-this.GetScrollRectangle().Top)*(i-this.FMy):0,this.FMinThumb?this.FValue-this.FMin>0?this.SetPageSize(this.FSavedPageSize-s*(this.GetRange()/(this.FValue-this.FMin))):this.SetPageSize(this.FSavedPageSize-s):this.FMaxThumb&&(this.FValue-this.FMin<this.GetRange()?this.SetPageSize(this.FSavedPageSize+s*(this.GetRange()/(this.FMax-this.FValue))):this.SetPageSize(this.FSavedPageSize+s))}else if(1===this.FScrollBarMode){var a=this.FKind;s=0===a?e-this.FCx:1===a?i-this.FCy:0,n=this.GetValue$1(s),this.FTracking?this.SetValue(n):(this.FTempValue=n,this.Changed())}else if(this.MouseOnThumbButtons(e,i)){var l=this.FKind;0===l?this.SetControlCursor(9):1===l&&this.SetControlCursor(7)}else this.SetControlCursor(0);pas["WEBLib.TMSFNCTypes"].PtInRectEx(this.GetMinThumbButton(),pas["WEBLib.TMSFNCTypes"].PointF(e,i))&&3!==this.FHoveredButton?(this.FHoveredButton=3,this.Changed()):pas["WEBLib.TMSFNCTypes"].PtInRectEx(this.GetMaxThumbButton(),pas["WEBLib.TMSFNCTypes"].PointF(e,i))&&4!==this.FHoveredButton?(this.FHoveredButton=4,this.Changed()):pas["WEBLib.TMSFNCTypes"].PtInRectEx(this.GetMinScrollButton(),pas["WEBLib.TMSFNCTypes"].PointF(e,i))&&1!==this.FHoveredButton?(this.FHoveredButton=1,this.Changed()):pas["WEBLib.TMSFNCTypes"].PtInRectEx(this.GetMaxScrollButton(),pas["WEBLib.TMSFNCTypes"].PointF(e,i))&&2!==this.FHoveredButton?(this.FHoveredButton=2,this.Changed()):pas["WEBLib.TMSFNCTypes"].PtInRectEx(this.GetMaxThumbButton(),pas["WEBLib.TMSFNCTypes"].PointF(e,i))||pas["WEBLib.TMSFNCTypes"].PtInRectEx(this.GetMinThumbButton(),pas["WEBLib.TMSFNCTypes"].PointF(e,i))||pas["WEBLib.TMSFNCTypes"].PtInRectEx(this.GetMaxScrollButton(),pas["WEBLib.TMSFNCTypes"].PointF(e,i))||pas["WEBLib.TMSFNCTypes"].PtInRectEx(this.GetMinScrollButton(),pas["WEBLib.TMSFNCTypes"].PointF(e,i))||0===this.FHoveredButton||(this.FHoveredButton=0,this.Changed())},this.HandleMouseUp=function(t,e,i,s){pas["WEBLib.TMSFNCCustomControl"].TTMSFNCCustomControlBaseCommon.HandleMouseUp.apply(this,arguments),this.ReleaseCaptureEx(),1!==this.FScrollBarMode||this.FTracking||this.SetValue(this.FTempValue),0===this.FScrollBarMode&&(pas["WEBLib.TMSFNCTypes"].PtInRectEx(this.GetMinScrollButton(),pas["WEBLib.TMSFNCTypes"].PointF(i,s))?this.SetValue(this.FValue-this.FSmallChange):pas["WEBLib.TMSFNCTypes"].PtInRectEx(this.GetMaxScrollButton(),pas["WEBLib.TMSFNCTypes"].PointF(i,s))?this.SetValue(this.FValue+this.FSmallChange):pas["WEBLib.TMSFNCTypes"].PtInRectEx(this.GetScrollAreaMin(),pas["WEBLib.TMSFNCTypes"].PointF(i,s))?this.SetValue(this.FValue-this.FLargeChange):pas["WEBLib.TMSFNCTypes"].PtInRectEx(this.GetScrollAreaMax(),pas["WEBLib.TMSFNCTypes"].PointF(i,s))&&this.SetValue(this.FValue+this.FLargeChange)),this.FDownButton=0,this.FMinThumb=!1,this.FMaxThumb=!1,this.FTimer.SetEnabled(!1),this.FTime=0,this.FScrollBarMode=0,this.SetControlCursor(0),this.FScrollButtonChange=0,this.Changed()},this.HandleMouseLeave=function(){pas["WEBLib.TMSFNCCustomControl"].TTMSFNCCustomControlBaseCommon.HandleMouseLeave.call(this),this.FTimer.SetEnabled(!1),this.FTime=0,this.FScrollBarMode=0,this.FScrollButtonChange=0,this.FMinThumb=!1,this.FMaxThumb=!1,this.FDownButton=0,this.FHoveredButton=0,this.Changed()},this.HandleMouseEnter=function(){pas["WEBLib.TMSFNCCustomControl"].TTMSFNCCustomControlBaseCommon.HandleMouseEnter.call(this)},this.HandleMouseWheel=function(t,e,i){pas["WEBLib.TMSFNCCustomControl"].TTMSFNCCustomControlBaseCommon.HandleMouseWheel.apply(this,arguments),e<0?this.SetValue(this.FValue+this.FLargeChange):this.SetValue(this.FValue-this.FLargeChange)},this.Changed=function(){this.Invalidate()},this.AppearanceChanged=function(t){this.Changed()},this.TimerChanged=function(t){this.FTime+=1,this.FTime>=4&&(1===this.FScrollButtonChange?(this.SetValue(this.FValue-this.FSmallChange),this.Changed()):2===this.FScrollButtonChange?(this.SetValue(this.FValue+this.FSmallChange),this.Changed()):3===this.FScrollButtonChange?(this.SetValue(this.FValue-this.FLargeChange),this.Changed()):4===this.FScrollButtonChange&&(this.SetValue(this.FValue+this.FLargeChange),this.Changed()))},this.GetMinScrollButton=function(){var t=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),e=pas["WEBLib.TMSFNCTypes"].TRectF.$new();e.$assign(this.GetLocalRect());var i=this.FKind;return 0===i?t.$assign(pas["WEBLib.TMSFNCTypes"].MakeRectF(e.Left,e.Top,this.FAppearance.FScrollButtonSize,e.Bottom-e.Top)):1===i&&t.$assign(pas["WEBLib.TMSFNCTypes"].MakeRectF(e.Left,e.Top,e.Right-e.Left,this.FAppearance.FScrollButtonSize)),t},this.GetMaxScrollButton=function(){var t=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),e=pas["WEBLib.TMSFNCTypes"].TRectF.$new();e.$assign(this.GetLocalRect());var i=this.FKind;return 0===i?t.$assign(pas["WEBLib.TMSFNCTypes"].MakeRectF(e.Right-this.FAppearance.FScrollButtonSize,e.Top,this.FAppearance.FScrollButtonSize,e.Bottom-e.Top)):1===i&&t.$assign(pas["WEBLib.TMSFNCTypes"].MakeRectF(e.Left,e.Bottom-this.FAppearance.FScrollButtonSize,e.Right-e.Left,this.FAppearance.FScrollButtonSize)),t},this.GetMinThumbButton=function(){var t=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),e=pas["WEBLib.TMSFNCTypes"].TRectF.$new();e.$assign(this.GetThumbRectangle());var i=this.FKind;return 0===i?t.$assign(pas["WEBLib.TMSFNCTypes"].MakeRectF(e.Left,e.Top,this.FAppearance.GetThumbButtonSize(),e.Bottom-e.Top)):1===i&&t.$assign(pas["WEBLib.TMSFNCTypes"].MakeRectF(e.Left,e.Top,e.Right-e.Left,this.FAppearance.GetThumbButtonSize())),t},this.GetMaxThumbButton=function(){var t=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),e=pas["WEBLib.TMSFNCTypes"].TRectF.$new();e.$assign(this.GetThumbRectangle());var i=this.FKind;return 0===i?t.$assign(pas["WEBLib.TMSFNCTypes"].MakeRectF(e.Left+(e.Right-e.Left)-this.FAppearance.GetThumbButtonSize(),e.Top,this.FAppearance.GetThumbButtonSize(),e.Bottom-e.Top)):1===i&&t.$assign(pas["WEBLib.TMSFNCTypes"].MakeRectF(e.Left,e.Top+(e.Bottom-e.Top)-this.FAppearance.GetThumbButtonSize(),e.Right-e.Left,this.FAppearance.GetThumbButtonSize())),t},this.GetScrollRectangle=function(){var t=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),e=this.FKind;return 0===e?(t.Left=this.GetMinScrollButton().Left+(this.GetMinScrollButton().Right-this.GetMinScrollButton().Left),t.Top=this.GetMinScrollButton().Top,t.Bottom=t.Top+(this.GetMinScrollButton().Bottom-this.GetMinScrollButton().Top),t.Right=t.Left+this.GetMaxScrollButton().Left-(this.GetMinScrollButton().Right-this.GetMinScrollButton().Left)):1===e&&(t.Left=this.GetMinScrollButton().Left,t.Top=this.GetMinScrollButton().Top+(this.GetMinScrollButton().Bottom-this.GetMinScrollButton().Top),t.Bottom=t.Top+this.GetMaxScrollButton().Top-(this.GetMinScrollButton().Bottom-this.GetMinScrollButton().Top),t.Right=t.Left+(this.GetMinScrollButton().Right-this.GetMinScrollButton().Left)),t},this.GetScrollAreaMin=function(){var t=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),e=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),i=pas["WEBLib.TMSFNCTypes"].TRectF.$new();e.$assign(this.GetScrollRectangle()),i.$assign(this.GetThumbRectangle());var s=this.FKind;return 0===s?(t.Left=e.Left,t.Top=e.Top,t.Right=t.Left+(i.Left-e.Left),t.Bottom=t.Top+(e.Bottom-e.Top)):1===s&&(t.Left=e.Left,t.Top=e.Top,t.Right=t.Left+(e.Right-e.Left),t.Bottom=t.Top+(i.Top-e.Top)),t},this.GetScrollAreaMax=function(){var t=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),e=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),i=pas["WEBLib.TMSFNCTypes"].TRectF.$new();e.$assign(this.GetScrollRectangle()),i.$assign(this.GetThumbRectangle());var s=this.FKind;return 0===s?(t.Left=i.Left+(i.Right-i.Left),t.Top=e.Top,t.Right=t.Left+(e.Right-e.Left)-(i.Right-i.Left)-i.Left+e.Left,t.Bottom=t.Top+(e.Bottom-e.Top)):1===s&&(t.Left=e.Left,t.Top=i.Top+(i.Bottom-i.Top),t.Right=t.Left+(e.Right-e.Left),t.Bottom=t.Top+(e.Bottom-e.Top)-(i.Bottom-i.Top)-i.Top+e.Top),t},this.GetThumbRectangle=function(){var t=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),e=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),i=0;e.$assign(this.GetScrollRectangle());var s=this.FKind;return 0===s?(i=(e.Right-e.Left)/this.GetRange()*this.FPageSize,t.Left=e.Left+this.GetValue(),t.Top=e.Top,t.Right=t.Left+Math.max(2*this.FAppearance.GetThumbButtonSize()+this.ScalePaintValue(10),i),t.Bottom=t.Top+(e.Bottom-e.Top)):1===s&&(i=(e.Bottom-e.Top)/this.GetRange()*this.FPageSize,t.Left=e.Left,t.Top=e.Top+this.GetValue(),t.Right=t.Left+(e.Right-e.Left),t.Bottom=t.Top+Math.max(2*this.FAppearance.GetThumbButtonSize()+this.ScalePaintValue(10),i)),t},this.GetValue=function(){var t=0,e=0,i=pas["WEBLib.TMSFNCTypes"].TRectF.$new();t=0,i.$assign(this.GetScrollRectangle());var s=this.FKind;return(e=0===s?i.Right-i.Left-Math.max(2*this.FAppearance.GetThumbButtonSize()+10,(i.Right-i.Left)/this.GetRange()*this.FPageSize):1===s?i.Bottom-i.Top-Math.max(2*this.FAppearance.GetThumbButtonSize()+10,(i.Bottom-i.Top)/this.GetRange()*this.FPageSize):0)<=0?t:t=this.FMax-this.FMin>0?this.FTracking?Math.min((this.FValue-this.FMin)/(this.FMax-this.FMin)*e,e):Math.min((this.FTempValue-this.FMin)/(this.FMax-this.FMin)*e,e):this.FMin},this.GetValue$1=function(t){var e=0,i=0,s=0,n=pas["WEBLib.TMSFNCTypes"].TRectF.$new();n.$assign(this.GetScrollRectangle());var r=this.FKind;return s=0===r?n.Right-n.Left-Math.max(2*this.FAppearance.GetThumbButtonSize()+10,(n.Right-n.Left)/this.GetRange()*this.FPageSize):1===r?n.Bottom-n.Top-Math.max(2*this.FAppearance.GetThumbButtonSize()+10,(n.Bottom-n.Top)/this.GetRange()*this.FPageSize):0,this.FMax-this.FMin>0&&s>0?(i=t/s*(this.FMax-this.FMin)+this.FMin,e=Math.max(Math.min(i,this.FMax),this.FMin)):e=0,e},this.GetRange=function(){return Math.max(2,this.FMax-this.FMin)},this.MouseOnThumbButtons=function(t,e){return(pas["WEBLib.TMSFNCTypes"].PtInRectEx(this.GetMinThumbButton(),pas["WEBLib.TMSFNCTypes"].PointF(t,e))||pas["WEBLib.TMSFNCTypes"].PtInRectEx(this.GetMaxThumbButton(),pas["WEBLib.TMSFNCTypes"].PointF(t,e)))&&!this.FAppearance.FFixedThumb},this.MouseOnThumb=function(t,e){return pas["WEBLib.TMSFNCTypes"].PtInRectEx(this.GetThumbRectangle(),pas["WEBLib.TMSFNCTypes"].PointF(t,e))},this.DrawScrollButtons=function(t){var e=null,i=null,s=null,n=null;this.FAppearance.FScrollButtonSize<=0||(e=this.FAppearance.FScrollButtonLeftFill,i=this.FAppearance.FScrollButtonRightFill,s=this.FAppearance.FScrollButtonLeftStroke,n=this.FAppearance.FScrollButtonRightStroke,1===this.FDownButton?(e=this.FAppearance.FScrollButtonLeftDownFill,s=this.FAppearance.FScrollButtonLeftDownStroke):1===this.FHoveredButton&&(e=this.FAppearance.FScrollButtonLeftHoverFill,s=this.FAppearance.FScrollButtonLeftHoverStroke),t.FFill.Assign(e),t.FStroke.Assign(s),t.DrawRectangle$2(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(this.GetMinScrollButton()),2),2===this.FDownButton?(i=this.FAppearance.FScrollButtonRightDownFill,n=this.FAppearance.FScrollButtonRightDownStroke):2===this.FHoveredButton&&(i=this.FAppearance.FScrollButtonRightHoverFill,n=this.FAppearance.FScrollButtonRightHoverStroke),t.FFill.Assign(i),t.FStroke.Assign(n),t.DrawRectangle$2(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(this.GetMaxScrollButton()),2),this.DrawArrow(t,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(this.GetMinScrollButton()),!0),this.DrawArrow(t,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(this.GetMaxScrollButton()),!1))},this.DrawThumb=function(t){t.FFill.Assign(this.FAppearance.FThumbFill),t.FStroke.Assign(this.FAppearance.FThumbStroke),t.DrawRectangle$2(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(this.GetThumbRectangle()),2),this.FAppearance.FFixedThumb||this.DrawThumbButtons(t)},this.DrawThumbButtons=function(t){var e=null,i=null,s=null,n=null;this.FAppearance.FThumbButtonSize<=0||(e=this.FAppearance.FThumbButtonLeftFill,i=this.FAppearance.FThumbButtonRightFill,s=this.FAppearance.FThumbButtonLeftStroke,n=this.FAppearance.FThumbButtonRightStroke,3===this.FDownButton?(e=this.FAppearance.FThumbButtonLeftDownFill,s=this.FAppearance.FThumbButtonLeftDownStroke):3===this.FHoveredButton&&(e=this.FAppearance.FThumbButtonLeftHoverFill,s=this.FAppearance.FThumbButtonLeftHoverStroke),t.FFill.Assign(e),t.FStroke.Assign(s),t.DrawRectangle$2(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(this.GetMinThumbButton()),2),4===this.FDownButton?(i=this.FAppearance.FThumbButtonRightDownFill,n=this.FAppearance.FThumbButtonRightDownStroke):4===this.FHoveredButton&&(i=this.FAppearance.FThumbButtonRightHoverFill,n=this.FAppearance.FThumbButtonRightHoverStroke),t.FFill.Assign(i),t.FStroke.Assign(n),t.DrawRectangle$2(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(this.GetMaxThumbButton()),2),this.DrawArrow(t,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(this.GetMinThumbButton()),!0),this.DrawArrow(t,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(this.GetMaxThumbButton()),!1))},this.DrawArrow=function(t,e,i){t.FStroke.SetColor(this.FAppearance.FArrowColor),1===this.FKind?(pas["WEBLib.TMSFNCTypes"].InflateRectEx(e,0,-4),i?(t.DrawLine$1(pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(e.Left+(e.Right-e.Left)/2,e.Top+(e.Bottom-e.Top)/3)),pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(e.Left+(e.Right-e.Left)/3,e.Top+(e.Bottom-e.Top)/3*2)),2,2),t.DrawLine$1(pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(e.Left+(e.Right-e.Left)/2,e.Top+(e.Bottom-e.Top)/3)),pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(e.Left+(e.Right-e.Left)/3*2,e.Top+(e.Bottom-e.Top)/3*2)),2,2)):(t.DrawLine$1(pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(e.Left+(e.Right-e.Left)/2,e.Top+(e.Bottom-e.Top)/3*2)),pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(e.Left+(e.Right-e.Left)/3,e.Top+(e.Bottom-e.Top)/3)),2,2),t.DrawLine$1(pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(e.Left+(e.Right-e.Left)/2,e.Top+(e.Bottom-e.Top)/3*2)),pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(e.Left+(e.Right-e.Left)/3*2,e.Top+(e.Bottom-e.Top)/3)),2,2))):(pas["WEBLib.TMSFNCTypes"].InflateRectEx(e,-4,0),i?(t.DrawLine$1(pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(e.Left+(e.Right-e.Left)/3*2,e.Top+(e.Bottom-e.Top)/3)),pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(e.Left+(e.Right-e.Left)/3,e.Top+(e.Bottom-e.Top)/2)),2,2),t.DrawLine$1(pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(e.Left+(e.Right-e.Left)/3*2,e.Top+(e.Bottom-e.Top)/3*2)),pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(e.Left+(e.Right-e.Left)/3,e.Top+(e.Bottom-e.Top)/2)),2,2)):(t.DrawLine$1(pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(e.Left+(e.Right-e.Left)/3,e.Top+(e.Bottom-e.Top)/3)),pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(e.Left+(e.Right-e.Left)/3*2,e.Top+(e.Bottom-e.Top)/2)),2,2),t.DrawLine$1(pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(e.Left+(e.Right-e.Left)/3,e.Top+(e.Bottom-e.Top)/3*2)),pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(e.Left+(e.Right-e.Left)/3*2,e.Top+(e.Bottom-e.Top)/2)),2,2)))},this.Draw=function(t,e){pas["WEBLib.TMSFNCCustomControl"].TTMSFNCCustomControl.Draw.apply(this,arguments),this.DrawThumb(t),this.DrawScrollButtons(t)},this.Create$1=function(e){return pas["WEBLib.TMSFNCCustomControl"].TTMSFNCCustomControl.Create$1.apply(this,arguments),this.FTracking=!0,this.FDesignTime=this.IsDesignTime(),this.FDesignTime&&(this.FFill.SetColor(pas["WEBLib.TMSFNCGraphicsTypes"].Lighter(pas["WEBLib.TMSFNCGraphicsTypes"].MakeGraphicsColor(225,225,225),40)),this.FStroke.SetColor(pas["WEBLib.TMSFNCGraphicsTypes"].Darker(11119017,40))),this.SetHeight(121),this.SetWidth(18),this.FKind=1,this.FValue=0,this.FMin=0,this.FMax=100,this.FSmallChange=1,this.FLargeChange=20,this.FAppearance=t.TTMSFNCScrollBarAppearance.$create("Create$1",[this]),this.FAppearance.FOnChange=rtl.createCallback(this,"AppearanceChanged"),this.FPageSize=20,this.FTimer=pas["WEBLib.ExtCtrls"].TTimer.$create("Create$1",[null]),this.FTimer.FOnTimer=rtl.createCallback(this,"TimerChanged"),this.FTimer.SetInterval(100),this},this.Destroy=function(){rtl.free(this,"FAppearance"),rtl.free(this,"FTimer"),pas["WEBLib.TMSFNCCustomControl"].TTMSFNCCustomControl.Destroy.call(this)},this.Assign=function(e){t.TTMSFNCScrollBar.isPrototypeOf(e)&&(this.FKind=rtl.as(e,t.TTMSFNCScrollBar).FKind,this.FValue=rtl.as(e,t.TTMSFNCScrollBar).FValue,this.FMin=rtl.as(e,t.TTMSFNCScrollBar).FMin,this.FMax=rtl.as(e,t.TTMSFNCScrollBar).FMax,this.FPageSize=rtl.as(e,t.TTMSFNCScrollBar).FPageSize,this.FSmallChange=rtl.as(e,t.TTMSFNCScrollBar).FSmallChange,this.FLargeChange=rtl.as(e,t.TTMSFNCScrollBar).FLargeChange,this.FAppearance.Assign(rtl.as(e,t.TTMSFNCScrollBar).FAppearance),this.FTracking=rtl.as(e,t.TTMSFNCScrollBar).FTracking,this.Changed())},rtl.addIntf(this,pas["WEBLib.TMSFNCPersistence"].ITMSFNCPersistence),rtl.addIntf(this,pas.System.IUnknown)})),rtl.createClass(this,"TTMSFNCScrollBar",this.TTMSFNCCustomScrollBar,(function(){this.RegisterRuntimeClasses=function(){pas.Classes.RegisterClass(t.TTMSFNCScrollBar)},rtl.addIntf(this,pas["WEBLib.TMSFNCPersistence"].ITMSFNCPersistence),rtl.addIntf(this,pas.System.IUnknown);var e=this.$rtti;e.addProperty("Fill",2,pas["WEBLib.TMSFNCGraphicsTypes"].$rtti.TTMSFNCGraphicsFill,"FFill","SetFill"),e.addProperty("Stroke",2,pas["WEBLib.TMSFNCGraphicsTypes"].$rtti.TTMSFNCGraphicsStroke,"FStroke","SetStroke"),e.addProperty("Appearance",2,t.$rtti.TTMSFNCScrollBarAppearance,"FAppearance","SetAppearance"),e.addProperty("Kind",2,t.$rtti.TTMSFNCScrollBarKind,"FKind","SetKind",{Default:t.TTMSFNCScrollBarKind.sbkVertical}),e.addProperty("LargeChange",12,rtl.double,"FLargeChange","FLargeChange",{stored:"IsLargeChangeStored"}),e.addProperty("Max",14,rtl.double,"FMax","SetMax",{stored:"IsMaxStored"}),e.addProperty("Tracking",2,rtl.boolean,"FTracking","SetTracking",{Default:!0}),e.addProperty("Min",14,rtl.double,"FMin","SetMin",{stored:"IsMinStored"}),e.addProperty("PageSize",14,rtl.double,"FPageSize","SetPageSize",{stored:"IsPageSizeStored"}),e.addProperty("Value",14,rtl.double,"FValue","SetValue",{stored:"IsValueStored"}),e.addProperty("SmallChange",12,rtl.double,"FSmallChange","FSmallChange",{stored:"IsSmallChangeStored"}),e.addProperty("OnValueChanged",0,t.$rtti.TTMSFNCScrollBarValueChanged,"FOnValueChange","FOnValueChange"),e.addProperty("OnPageSizeChanged",0,t.$rtti.TTMSFNCScrollBarPageSizeChanged,"FOnPageSizeChanged","FOnPageSizeChanged"),e.attr=[pas.Classes.ComponentPlatformsAttribute,"Create$1",[0]]}))}),["Math","WEBLib.TMSFNCStyles","WEBLib.TMSFNCUtils"]),rtl.module("WEBLib.TMSFNCCustomScrollControl",["System","Classes","WEBLib.TMSFNCCustomControl","WEBLib.StdCtrls","WEBLib.TMSFNCScrollBar","WEBLib.TMSFNCGraphics","WEBLib.TMSFNCTypes","WEBLib.ExtCtrls","Types","WEBLib.Controls"],(function(){"use strict";var t=this,e=t.$impl;this.SCROLLINGDELAY=0,this.SWIPECOUNT=300,this.DOWNCOUNT=100,this.TTMSFNCCustomScrollControlMode={0:"scmPixelScrolling",scmPixelScrolling:0,1:"scmItemScrolling",scmItemScrolling:1},this.TTMSFNCCustomScrollControlUpdate={0:"scuContinuous",scuContinuous:0,1:"scuOnce",scuOnce:1},rtl.createClass(this,"TTMSFNCCustomScrollControl",pas["WEBLib.TMSFNCCustomControl"].TTMSFNCCustomControl,(function(){this.$init=function(){pas["WEBLib.TMSFNCCustomControl"].TTMSFNCCustomControl.$init.call(this),this.FDownTime=0,this.FMouseUp=!1,this.FAnimateVerticalPos=!1,this.FAnimateHorizontalPos=!1,this.FAnimating=!1,this.FSpX=0,this.FSpY=0,this.FDoubleSelection=!1,this.FRangeSelection=!1,this.FScrolling=!1,this.FScrollX=0,this.FScrollY=0,this.FDownX=0,this.FDownY=0,this.FMouseX=0,this.FMouseY=0,this.FScrollVTo=0,this.FScrollHTo=0,this.FTimeStart=0,this.FTimeStop=0,this.FAnimateTimer=null,this.FDownTimer=null,this.FSaveHScrollPos=0,this.FSaveVScrollPos=0,this.FBlockScrollingUpdate=!1,this.FIsMouseDown=!1,this.FStretchScrollBars=!1,this.FUpdateCount$1=0,this.FVerticalScrollBar=null,this.FHorizontalScrollBar=null,this.FCustomVerticalScrollBar=null,this.FCustomHorizontalScrollBar=null,this.FVerticalScrollBarVisible=!1,this.FHorizontalScrollBarVisible=!1,this.FScrollMode=0,this.FApplyClipRect=!1,this.FScrollUpdate=0,this.FCustomScrollBars=!1,this.FTouchScrolling=!1,this.FProcessTouchScrolling=!1},this.$final=function(){this.FAnimateTimer=void 0,this.FDownTimer=void 0,this.FVerticalScrollBar=void 0,this.FHorizontalScrollBar=void 0,this.FCustomVerticalScrollBar=void 0,this.FCustomHorizontalScrollBar=void 0,pas["WEBLib.TMSFNCCustomControl"].TTMSFNCCustomControl.$final.call(this)},this.GetCanvasHeightOffset=function(){var t=0,e=null,i=null;return t=0,e=this.HorizontalScrollBar(),i=this.CustomHorizontalScrollBar(),null!=e&&null!=i&&(this.FCustomScrollBars&&i.FVisible&&null!=i.FParent?t=i.GetHeight():!this.FCustomScrollBars&&e.FVisible&&null!=e.FParent&&(t=e.GetHeight())),t},this.GetCanvasWidthOffset=function(){var t=0,e=null,i=null;return t=0,e=this.VerticalScrollBar(),i=this.CustomVerticalScrollBar(),null!=e&&null!=i&&(this.FCustomScrollBars&&i.FVisible&&null!=i.FParent?t=i.GetWidth():!this.FCustomScrollBars&&e.FVisible&&null!=e.FParent&&(t=e.GetWidth())),t},this.Animate=function(t){var i,s,n=0,r=0,o=!1,a=!1;r=this.GetVScrollValue(),n=this.GetHScrollValue(),i=Math.abs(this.FScrollHTo-n)/Math.max(1,6*Math.abs(this.FSpX)),s=Math.abs(this.FScrollVTo-r)/Math.max(1,6*Math.abs(this.FSpY)),a=!1,this.FAnimateVerticalPos&&(a=e.AnimateDouble({get:function(){return r},set:function(t){r=t}},{p:this,get:function(){return this.p.FScrollVTo},set:function(t){this.p.FScrollVTo=t}},s,.01)),o=!1,this.FAnimateHorizontalPos&&(o=e.AnimateDouble({get:function(){return n},set:function(t){n=t}},{p:this,get:function(){return this.p.FScrollHTo},set:function(t){this.p.FScrollHTo=t}},i,.01)),this.FAnimating=a||o,this.FAnimating?this.Scroll(n,r):(this.FAnimateVerticalPos=!1,this.FAnimateTimer.SetEnabled(!1),this.FAnimateHorizontalPos=!1)},this.DownTime=function(t){this.FDownTime+=1,100!==this.FDownTime&&this.FTouchScrolling||(this.FRangeSelection=!0,this.FDownTimer.SetEnabled(!1))},this.UpdateControlAfterResize=function(){this.FUpdateCount$1>0||3 in this.FComponentState||0 in this.FComponentState||(this.SaveScrollPosition(),this.UpdateControl(!1,!0),this.RestoreScrollPosition())},this.Scroll=function(t,e){var i,s;this.FBlockScrollingUpdate=!0,i=this.GetHScrollValue(),s=this.GetVScrollValue(),this.SetHScrollValue(t),this.SetVScrollValue(e),this.FBlockScrollingUpdate=!1,this.UpdateControlScroll(i,s,t,e)},this.UpdateControlScroll=function(t,e,i,s){},this.VerticalScrollPositionChanged=function(){},this.HorizontalScrollPositionChanged=function(){},this.VScrollChanged=function(t){this.FBlockScrollingUpdate||this.FCustomScrollBars||(this.FIsMouseDown||this.StopAnimationTimer(),this.VerticalScrollPositionChanged(),this.SetVScrollValue(this.GetVScrollValue()))},this.HScrollChanged=function(t){this.FBlockScrollingUpdate||this.FCustomScrollBars||(this.FIsMouseDown||this.StopAnimationTimer(),this.HorizontalScrollPositionChanged(),this.SetHScrollValue(this.GetHScrollValue()))},this.HandleMouseDown=function(t,i,s,n){pas["WEBLib.TMSFNCCustomControl"].TTMSFNCCustomControlBaseCommon.HandleMouseDown.apply(this,arguments),this.CaptureEx(),this.FProcessTouchScrolling&&(this.FIsMouseDown=!0,this.FTimeStart=e.GetTickCountX(),this.FTimeStop=this.FTimeStart,this.FScrollVTo=this.GetVScrollValue(),this.FScrollHTo=this.GetHScrollValue(),this.FScrollX=s,this.FScrollY=n,this.FDownX=s,this.FDownY=n,this.FMouseX=s,this.FMouseY=n,this.FMouseUp=!1,this.FDownTimer.SetEnabled(!0),this.FDoubleSelection=!this.FAnimateTimer.FEnabled,this.FRangeSelection=!1,this.FScrolling=!1,this.FDownTime=0)},this.HandleMouseMove=function(t,e,i){var s=0;pas["WEBLib.TMSFNCCustomControl"].TTMSFNCCustomControlBaseCommon.HandleMouseMove.apply(this,arguments),this.FProcessTouchScrolling&&this.FIsMouseDown&&(!0?(s=1,(this.FScrolling||Math.abs(this.FMouseX-e)>3||Math.abs(this.FMouseY-i)>3)&&!this.FRangeSelection&&this.FTouchScrolling&&(Math.abs(e-this.FDownX)>0||Math.abs(i-this.FDownY)>0)&&(this.FScrolling=!0,this.FDownTimer.SetEnabled(!1),this.FDoubleSelection=!1,this.FIsMouseDown&&!this.FMouseUp&&(this.Scroll(this.GetHScrollValue()-(e-this.FDownX)*s,this.GetVScrollValue()-(i-this.FDownY)*s),this.FDownY=i,this.FDownX=e))):this.FRangeSelection)},this.HandleMouseUp=function(t,i,s,n){var r=0;pas["WEBLib.TMSFNCCustomControl"].TTMSFNCCustomControlBaseCommon.HandleMouseUp.apply(this,arguments),this.ReleaseCaptureEx(),this.FProcessTouchScrolling&&this.FIsMouseDown&&(r=1,this.FIsMouseDown=!1,this.FMouseUp=!0,this.FScrolling=!1,this.FDownTimer.SetEnabled(!1),!this.FDoubleSelection&&this.FTouchScrolling?(this.FTimeStop=e.GetTickCountX(),this.FTimeStop-this.FTimeStart<300&&this.FTimeStop-this.FTimeStart>0&&(this.FSpY=Math.abs(n-this.FScrollY)/(this.FTimeStop-this.FTimeStart),this.FSpY>0&&(n-this.FScrollY>0?this.FScrollVTo=Math.max(0,Math.min(this.VerticalScrollBar().FMax-this.GetVViewPortSize(),this.FScrollVTo-Math.round(Math.abs(n-this.FScrollY)*this.FSpY*r*3))):this.FScrollVTo=Math.max(0,Math.min(this.VerticalScrollBar().FMax-this.GetVViewPortSize(),this.FScrollVTo+Math.round(Math.abs(n-this.FScrollY)*this.FSpY*r*3))),this.FAnimateVerticalPos=!0,this.FAnimateTimer.SetEnabled(!0)),this.FSpX=Math.abs(s-this.FScrollX)/(this.FTimeStop-this.FTimeStart),this.FSpX>0&&(s-this.FScrollX>0?this.FScrollHTo=Math.max(0,Math.min(this.HorizontalScrollBar().FMax-this.GetHViewPortSize(),this.FScrollHTo-Math.round(Math.abs(s-this.FScrollX)*this.FSpX*r*3))):this.FScrollHTo=Math.max(0,Math.min(this.HorizontalScrollBar().FMax-this.GetHViewPortSize(),this.FScrollHTo+Math.round(Math.abs(s-this.FScrollX)*this.FSpX*r*3))),this.FAnimateHorizontalPos=!0,this.FAnimateTimer.SetEnabled(!0)))):this.HandleSelection(t,rtl.refSet(i),s,n),this.FRangeSelection=!1)},this.HandleSelection=function(t,e,i,s){},this.HCustomScrollChanged=function(t,e){!this.FBlockScrollingUpdate&&this.FCustomScrollBars&&(this.FIsMouseDown||this.StopAnimationTimer(),this.HorizontalScrollPositionChanged(),this.SetHScrollValue(this.GetHScrollValue()))},this.VCustomScrollChanged=function(t,e){!this.FBlockScrollingUpdate&&this.FCustomScrollBars&&(this.FIsMouseDown||this.StopAnimationTimer(),this.VerticalScrollPositionChanged(),this.SetVScrollValue(this.GetVScrollValue()))},this.UpdateControlScrollBarCalculations=function(){},this.UpdateControlScrollBars=function(t,e){var i=null,s=null,n=null,r=null,o=0,a=0,l=0,h=0,F=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),p=null,c=null;this.FUpdateCount$1>0||3 in this.FComponentState||(this.FBlockScrollingUpdate=!0,e&&this.UpdateControlScrollBarCalculations(),i=this.VerticalScrollBar(),s=this.HorizontalScrollBar(),n=this.CustomVerticalScrollBar(),r=this.CustomHorizontalScrollBar(),null!=i&&null!=s&&null!=n&&null!=r&&(e?F.$assign(this.GetCalculationRect()):F.$assign(this.GetContentRect()),l=F.Right-F.Left,h=F.Bottom-F.Top,o=this.GetTotalContentWidth(),a=this.GetTotalContentHeight(),s.SetVisible(o>0&&1===pas["WEBLib.TMSFNCTypes"].CompareValueEx(o,l,0)&&this.FHorizontalScrollBarVisible&&!this.ColumnStretchingActive()&&!this.FCustomScrollBars),i.SetVisible(a>0&&1===pas["WEBLib.TMSFNCTypes"].CompareValueEx(a,h,0)&&this.FVerticalScrollBarVisible&&!this.FCustomScrollBars),r.SetVisible(o>0&&1===pas["WEBLib.TMSFNCTypes"].CompareValueEx(o,l,0)&&this.FHorizontalScrollBarVisible&&!this.ColumnStretchingActive()&&this.FCustomScrollBars),n.SetVisible(a>0&&1===pas["WEBLib.TMSFNCTypes"].CompareValueEx(a,h,0)&&this.FVerticalScrollBarVisible&&this.FCustomScrollBars),n.FVisible&&this.FCustomScrollBars?n.SetParent(this):n.SetParent(null),r.FVisible&&this.FCustomScrollBars?r.SetParent(this):r.SetParent(null),i.FVisible&&!this.FCustomScrollBars?i.SetParent(this):i.SetParent(null),s.FVisible&&!this.FCustomScrollBars?s.SetParent(this):s.SetParent(null),p=pas["WEBLib.TMSFNCTypes"].TTMSFNCMargins.$create("Create$1"),c=pas["WEBLib.TMSFNCTypes"].TTMSFNCMargins.$create("Create$1"),this.FCustomScrollBars?n.FVisible&&this.FStretchScrollBars?c.SetRight(n.GetWidth()+1):c.SetRight(1):i.FVisible&&this.FStretchScrollBars?c.SetRight(i.GetWidth()+1):c.SetRight(1),p.SetTop(1),p.SetRight(1),c.SetBottom(1),c.SetLeft(1),this.FCustomScrollBars?r.FVisible?p.SetBottom(r.GetHeight()+1):p.SetBottom(1):s.FVisible?p.SetBottom(s.GetHeight()+1):p.SetBottom(1),this.FStretchScrollBars||(F.$assign(this.GetCalculationRect()),c.SetLeft(c.FLeft+F.Left),c.SetRight(c.FRight+(this.GetWidth()-F.Right)),p.SetTop(p.FTop+F.Top),p.SetBottom(p.FBottom+(this.GetHeight()-F.Bottom))),s.SetLeft(Math.round(c.FLeft)),s.SetTop(Math.round(this.GetHeight()-c.FBottom-s.GetHeight())),i.SetLeft(Math.round(this.GetWidth()-p.FRight-i.GetWidth())),i.SetTop(Math.round(p.FTop)),s.SetWidth(Math.round(Math.max(0,this.GetWidth()-c.FRight-c.FLeft))),i.SetHeight(Math.round(Math.max(0,this.GetHeight()-p.FBottom-p.FTop))),r.SetLeft(Math.round(c.FLeft)),r.SetTop(Math.round(this.GetHeight()-c.FBottom-r.GetHeight())),n.SetLeft(Math.round(this.GetWidth()-p.FRight-n.GetWidth())),n.SetTop(Math.round(p.FTop)),r.SetWidth(Math.round(Math.max(0,this.GetWidth()-c.FRight-c.FLeft))),n.SetHeight(Math.round(Math.max(0,this.GetHeight()-p.FBottom-p.FTop))),c=rtl.freeLoc(c),p=rtl.freeLoc(p),F.$assign(this.GetContentRect()),l=F.Right-F.Left,h=F.Bottom-F.Top,1===this.FScrollMode?(i.SetPageSize(Math.round(Math.max(0,this.GetVerticalContentViewPortSize()))),i.SetMax(Math.max(i.GetPageSize(),this.GetVerticalContentCount()))):(i.SetPageSize(Math.round(Math.max(0,Math.min(a,h)))),i.SetMax(Math.round(Math.max(i.GetPageSize(),a))),i.SetPosition(Math.min(i.GetPosition(),i.FMax))),i.FSmallChange=Math.max(-2147483648,rtl.trunc(i.GetPageSize()/5)),i.FLargeChange=Math.max(-2147483648,i.GetPageSize()),1===this.FScrollMode?(s.SetPageSize(Math.round(Math.max(0,this.GetHorizontalContentViewPortSize()))),s.SetMax(Math.max(s.GetPageSize(),this.GetHorizontalContentCount()))):(s.SetPageSize(Math.round(Math.max(0,Math.min(o,l)))),s.SetMax(Math.round(Math.max(s.GetPageSize(),o))),s.SetPosition(Math.min(s.GetPosition(),s.FMax))),s.FSmallChange=Math.max(-2147483648,rtl.trunc(s.GetPageSize()/5)),s.FLargeChange=Math.max(-2147483648,s.GetPageSize()),1===this.FScrollMode?(n.SetPageSize(Math.max(0,Math.round(this.GetVerticalContentViewPortSize()))),n.SetMax(this.GetVerticalContentCount()-n.FPageSize)):(n.SetPageSize(Math.round(Math.max(0,Math.min(a,h)))),n.SetMax(Math.round(a-h))),n.FSmallChange=n.FPageSize/5,n.FLargeChange=n.FPageSize,1===this.FScrollMode?(r.SetPageSize(Math.max(0,Math.round(this.GetHorizontalContentViewPortSize()))),r.SetMax(this.GetHorizontalContentCount()-r.FPageSize)):(r.SetPageSize(Math.round(Math.max(0,Math.min(o,l)))),r.SetMax(Math.round(o-l))),r.FSmallChange=r.FPageSize/5,r.FLargeChange=r.FPageSize),this.FBlockScrollingUpdate=!1,t&&this.UpdateControlScrollBars(!1,!1))},this.UpdateControl=function(t,e){this.UpdateControlCache(),this.UpdateControlScrollBars(!0,!0),this.UpdateControlDisplay()},this.UpdateControlCache=function(){},this.UpdateControlDisplay=function(){},this.StopAnimationTimer=function(){this.FAnimateTimer.SetEnabled(!1),this.FAnimating=!1},this.SetHScrollValue=function(t){this.FCustomScrollBars?this.CustomHorizontalScrollBar().SetValue(t):this.HorizontalScrollBar().GetPageSize()>0&&this.HorizontalScrollBar().SetPosition(Math.round(Math.min(this.HorizontalScrollBar().FMax-this.HorizontalScrollBar().GetPageSize(),Math.max(0,t))))},this.SetVScrollValue=function(t){this.FCustomScrollBars?this.CustomVerticalScrollBar().SetValue(t):this.VerticalScrollBar().GetPageSize()>0&&this.VerticalScrollBar().SetPosition(Math.round(Math.min(this.VerticalScrollBar().FMax-this.VerticalScrollBar().GetPageSize(),Math.max(0,t))))},this.Loaded=function(){pas["WEBLib.Controls"].TCustomControl.Loaded.call(this),this.UpdateControl(!0,!0)},this.Draw=function(t,e){var i=null,s=pas["WEBLib.TMSFNCTypes"].TRectF.$new();pas["WEBLib.TMSFNCCustomControl"].TTMSFNCCustomControl.Draw.apply(this,arguments),s.$assign(this.GetContentClipRect()),i=null,this.FApplyClipRect&&(i=t.SaveState(!1),t.ClipRect(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(s))),this.DrawContent(t,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(s)),this.FApplyClipRect&&t.RestoreState(i,!1)},this.DrawContent=function(t,e){},this.GetTotalContentWidth=function(){return 0,0},this.GetTotalContentHeight=function(){return 0,0},this.GetHorizontalContentViewPortSize=function(){return 0,0},this.GetVerticalContentViewPortSize=function(){return 0,0},this.GetHorizontalContentCount=function(){return 0,0},this.GetVerticalContentCount=function(){return 0,0},this.GetCalculationRect=function(){var t=pas["WEBLib.TMSFNCTypes"].TRectF.$new();return t.$assign(this.GetLocalRect()),t},this.GetContentClipRect=function(){var t=pas["WEBLib.TMSFNCTypes"].TRectF.$new();return t.$assign(this.GetContentRect()),t},this.GetContentRect=function(){var t=pas["WEBLib.TMSFNCTypes"].TRectF.$new();return t.$assign(pas["WEBLib.TMSFNCCustomControl"].TTMSFNCCustomControl.GetContentRect.call(this)),this.FCustomScrollBars?(this.CustomHorizontalScrollBar().FVisible&&(t.Bottom=t.Bottom-this.CustomHorizontalScrollBar().GetHeight()-1),this.CustomVerticalScrollBar().FVisible&&(t.Right=t.Right-this.CustomVerticalScrollBar().GetWidth()-1)):(this.HorizontalScrollBar().FVisible&&(t.Bottom=t.Bottom-this.HorizontalScrollBar().GetHeight()-1),this.VerticalScrollBar().FVisible&&(t.Right=t.Right-this.VerticalScrollBar().GetWidth()-1)),t},this.GetHScrollValue=function(){return this.FCustomScrollBars?this.CustomHorizontalScrollBar().FValue:Math.min(this.HorizontalScrollBar().FMax-this.HorizontalScrollBar().GetPageSize(),Math.max(0,Math.round(this.HorizontalScrollBar().GetPosition())))},this.GetVScrollValue=function(){return this.FCustomScrollBars?this.CustomVerticalScrollBar().FValue:Math.min(this.VerticalScrollBar().FMax-this.VerticalScrollBar().GetPageSize(),Math.max(0,Math.round(this.VerticalScrollBar().GetPosition())))},this.GetVViewPortSize=function(){return this.FCustomScrollBars?this.CustomVerticalScrollBar().FPageSize:this.VerticalScrollBar().GetPageSize()},this.GetHViewPortSize=function(){return this.FCustomScrollBars?this.CustomHorizontalScrollBar().FPageSize:this.HorizontalScrollBar().GetPageSize()},this.Create$1=function(t){return pas["WEBLib.TMSFNCCustomControl"].TTMSFNCCustomControl.Create$1.apply(this,arguments),this.FTouchScrolling=!1,this.FProcessTouchScrolling=!1,this.FAnimateTimer=pas["WEBLib.ExtCtrls"].TTimer.$create("Create$1",[this]),this.FAnimateTimer.SetInterval(1),this.FAnimateTimer.SetEnabled(!1),this.FAnimateTimer.FOnTimer=rtl.createCallback(this,"Animate"),this.FDownTimer=pas["WEBLib.ExtCtrls"].TTimer.$create("Create$1",[this]),this.FDownTimer.SetInterval(1),this.FDownTimer.SetEnabled(!1),this.FDownTimer.FOnTimer=rtl.createCallback(this,"DownTime"),this.FApplyClipRect=!0,this.FStretchScrollBars=!0,this.FScrollMode=0,this.FScrollUpdate=0,this.FCustomVerticalScrollBar=pas["WEBLib.TMSFNCScrollBar"].TTMSFNCScrollBar.$create("Create$1",[this]),this.FCustomVerticalScrollBar.SetParent(this),this.FCustomHorizontalScrollBar=pas["WEBLib.TMSFNCScrollBar"].TTMSFNCScrollBar.$create("Create$1",[this]),this.FCustomHorizontalScrollBar.SetParent(this),this.FVerticalScrollBar=pas["WEBLib.StdCtrls"].TScrollBar.$create("Create$1",[this]),this.FVerticalScrollBar.SetParent(this),this.FHorizontalScrollBar=pas["WEBLib.StdCtrls"].TScrollBar.$create("Create$1",[this]),this.FHorizontalScrollBar.SetParent(this),this.FCustomVerticalScrollBar.FAppearance.SetThumbButtonSize(0),this.FCustomHorizontalScrollBar.FAppearance.SetThumbButtonSize(0),this.FCustomHorizontalScrollBar.SetKind(0),this.FVerticalScrollBar.FDoubleBuffered=!1,this.FHorizontalScrollBar.FDoubleBuffered=!1,this.FVerticalScrollBar.SetKind(1),this.FVerticalScrollBar.SetVisible(!0),this.FHorizontalScrollBar.SetVisible(!0),this.FCustomVerticalScrollBar.SetVisible(!1),this.FCustomHorizontalScrollBar.SetVisible(!1),this.FVerticalScrollBar.FOnChange=rtl.createCallback(this,"VScrollChanged"),this.FHorizontalScrollBar.FOnChange=rtl.createCallback(this,"HScrollChanged"),this.FCustomHorizontalScrollBar.FOnValueChange=rtl.createCallback(this,"HCustomScrollChanged"),this.FCustomVerticalScrollBar.FOnValueChange=rtl.createCallback(this,"VCustomScrollChanged"),this.FVerticalScrollBarVisible=!0,this.FHorizontalScrollBarVisible=!0,this},this.Destroy=function(){rtl.free(this,"FCustomVerticalScrollBar"),rtl.free(this,"FCustomHorizontalScrollBar"),rtl.free(this,"FVerticalScrollBar"),rtl.free(this,"FHorizontalScrollBar"),pas["WEBLib.TMSFNCCustomControl"].TTMSFNCCustomControl.Destroy.call(this)},this.Assign=function(e){pas["WEBLib.TMSFNCCustomControl"].TTMSFNCCustomControl.Assign.apply(this,arguments),t.TTMSFNCCustomScrollControl.isPrototypeOf(e)&&(this.FStretchScrollBars=rtl.as(e,t.TTMSFNCCustomScrollControl).FStretchScrollBars,this.FScrollMode=rtl.as(e,t.TTMSFNCCustomScrollControl).FScrollMode,this.FScrollUpdate=rtl.as(e,t.TTMSFNCCustomScrollControl).FScrollUpdate,this.FApplyClipRect=rtl.as(e,t.TTMSFNCCustomScrollControl).FApplyClipRect)},this.BeginUpdate=function(){pas["WEBLib.TMSFNCCustomControl"].TTMSFNCCustomControlBase.BeginUpdate.call(this),this.FUpdateCount$1+=1},this.EndUpdate=function(){pas["WEBLib.TMSFNCCustomControl"].TTMSFNCCustomControlBase.EndUpdate.call(this),this.FUpdateCount$1-=1,0===this.FUpdateCount$1&&this.UpdateControl(!0,!0)},this.SaveScrollPosition=function(){this.FSaveHScrollPos=this.GetHScrollValue(),this.FSaveVScrollPos=this.GetVScrollValue()},this.RestoreScrollPosition=function(){this.Scroll(this.FSaveHScrollPos,this.FSaveVScrollPos)},this.GetVerticalScrollPosition=function(){return this.GetVScrollValue()},this.GetHorizontalScrollPosition=function(){return this.GetHScrollValue()},this.HorizontalScrollBar=function(){return this.FHorizontalScrollBar},this.VerticalScrollBar=function(){return this.FVerticalScrollBar},this.CustomHorizontalScrollBar=function(){return this.FCustomHorizontalScrollBar},this.CustomVerticalScrollBar=function(){return this.FCustomVerticalScrollBar},rtl.addIntf(this,pas["WEBLib.TMSFNCPersistence"].ITMSFNCPersistence),rtl.addIntf(this,pas.System.IUnknown)})),t.$implcode=function(){e.GetTickCountX=function(){var t=0,e=0,i=0,s=0;return pas.SysUtils.DecodeTime(pas.SysUtils.Now(),{get:function(){return t},set:function(e){t=e}},{get:function(){return e},set:function(t){e=t}},{get:function(){return i},set:function(t){i=t}},{get:function(){return s},set:function(t){s=t}}),s+1e3*i+60*e*1e3+60*t*60*1e3},e.AnimateDouble=function(t,e,i,s){var n=!1;return n=!0,t.get()>e.get()-s&&t.get()<e.get()+s?(t.set(e.get()),n=!1):(i=Math.max(s,i),t.get()<e.get()?t.set(t.get()+i):t.set(t.get()-i)),n}}}),["WEBLib.Forms","Math","WEBLib.TMSFNCGraphicsTypes","SysUtils"]),rtl.module("WEBLib.TMSFNCCustomList",["System","Classes","WEBLib.TMSFNCTypes","WEBLib.TMSFNCGraphics","WEBLib.TMSFNCGraphicsTypes","WEBLib.TMSFNCCustomControl","WEBLib.TMSFNCCustomScrollControl","WEBLib.Controls"],(function(){"use strict";var t=this;rtl.createClass(this,"TTMSFNCCustomListItem",pas.Classes.TCollectionItem,(function(){this.$init=function(){pas.Classes.TCollectionItem.$init.call(this),this.FRowSpan=0,this.FColumnSpan=0,this.FVisible=!1,this.FText="",this.FEnabled=!1,this.FMargins=null,this.FCanDeselect=!1,this.FCanSelect=!1,this.FVerticalTextAlign=0,this.FHorizontalTextAlign=0,this.FHint="",this.FEmpty=!1,this.FSelected=!1,this.FOwner=null},this.$final=function(){this.FMargins=void 0,this.FOwner=void 0,pas.Classes.TCollectionItem.$final.call(this)},this.SetColumnSpan=function(t){this.FColumnSpan!==t&&(this.FColumnSpan=t,this.FOwner.CalculateItems(!0))},this.SetRowSpan=function(t){this.FRowSpan!==t&&(this.FRowSpan=t,this.FOwner.CalculateItems(!0))},this.SetVisible=function(t){this.FVisible!==t&&(this.FVisible=t,this.FOwner.CalculateItems(!0))},this.SetText=function(t){this.FText!==t&&(this.FText=t,this.FOwner.InvalidateItems())},this.SetEnabled=function(t){this.FEnabled!==t&&(this.FEnabled=t,this.FOwner.InvalidateItems())},this.SetMargins=function(t){this.FMargins.Assign(t)},this.SetCanDeselect=function(t){this.FCanDeselect=t},this.SetCanSelect=function(t){this.FCanSelect=t},this.SetHorizontalTextAlign=function(t){this.FHorizontalTextAlign!==t&&(this.FHorizontalTextAlign=t,this.FOwner.InvalidateItems())},this.SetVerticalTextAlign=function(t){this.FVerticalTextAlign!==t&&(this.FVerticalTextAlign=t,this.FOwner.InvalidateItems())},this.SetSelected=function(t){this.FSelected!==t&&(this.FSelected=t,this.FOwner.InvalidateItems())},this.MarginsChanged=function(t){this.FOwner.CalculateItems(!0)},this.Create$1=function(e){return pas.Classes.TCollectionItem.Create$1.apply(this,arguments),this.FSelected=!1,this.FHorizontalTextAlign=0,this.FVerticalTextAlign=0,null!=e&&(this.FOwner=rtl.as(this.FCollection,t.TTMSFNCCustomListItems).FOwner$1),this.FColumnSpan=1,this.FCanDeselect=!0,this.FCanSelect=!0,this.FRowSpan=1,this.FMargins=pas["WEBLib.TMSFNCTypes"].TTMSFNCMargins.$create("Create$1"),this.FMargins.FOnChange=rtl.createCallback(this,"MarginsChanged"),this.FEnabled=!0,this.FVisible=!0,this.FEmpty=!1,null!=this.FOwner&&this.FOwner.CalculateItems(!0),this},this.Assign=function(e){t.TTMSFNCCustomListItem.isPrototypeOf(e)&&(this.FRowSpan=rtl.as(e,t.TTMSFNCCustomListItem).FRowSpan,this.FColumnSpan=rtl.as(e,t.TTMSFNCCustomListItem).FColumnSpan,this.FVisible=rtl.as(e,t.TTMSFNCCustomListItem).FVisible,this.FEmpty=rtl.as(e,t.TTMSFNCCustomListItem).FEmpty,this.FText=rtl.as(e,t.TTMSFNCCustomListItem).FText,this.FEnabled=rtl.as(e,t.TTMSFNCCustomListItem).FEnabled,this.FMargins.Assign(rtl.as(e,t.TTMSFNCCustomListItem).FMargins),this.FCanDeselect=rtl.as(e,t.TTMSFNCCustomListItem).FCanDeselect,this.FCanSelect=rtl.as(e,t.TTMSFNCCustomListItem).FCanSelect,this.FHint=rtl.as(e,t.TTMSFNCCustomListItem).FHint,this.FVerticalTextAlign=rtl.as(e,t.TTMSFNCCustomListItem).FVerticalTextAlign,this.FHorizontalTextAlign=rtl.as(e,t.TTMSFNCCustomListItem).FHorizontalTextAlign,this.FSelected=rtl.as(e,t.TTMSFNCCustomListItem).FSelected,this.FText=rtl.as(e,t.TTMSFNCCustomListItem).FText)},this.Destroy=function(){rtl.free(this,"FMargins"),pas.Classes.TCollectionItem.Destroy.call(this),null!=this.FOwner&&this.FOwner.CalculateItems(!0)};var e=this.$rtti;e.addProperty("ColumnSpan",2,rtl.longint,"FColumnSpan","SetColumnSpan",{Default:1}),e.addProperty("RowSpan",2,rtl.longint,"FRowSpan","SetRowSpan",{Default:1}),e.addProperty("Visible",2,rtl.boolean,"FVisible","SetVisible",{Default:!0}),e.addProperty("Enabled",2,rtl.boolean,"FEnabled","SetEnabled",{Default:!0}),e.addProperty("Margins",2,pas["WEBLib.TMSFNCTypes"].$rtti.TTMSFNCMargins,"FMargins","SetMargins"),e.addProperty("Hint",0,rtl.string,"FHint","FHint")})),rtl.createClass(this,"TTMSFNCCustomListItems",pas["WEBLib.TMSFNCTypes"].TTMSFNCOwnedCollection,(function(){this.$init=function(){pas["WEBLib.TMSFNCTypes"].TTMSFNCOwnedCollection.$init.call(this),this.FOwner$1=null},this.$final=function(){this.FOwner$1=void 0,pas["WEBLib.TMSFNCTypes"].TTMSFNCOwnedCollection.$final.call(this)},this.GetItem$1=function(t){return this.GetItem(t)},this.CreateItemClass=function(){return t.TTMSFNCCustomListItem},this.Create$3=function(t){return pas.Classes.TOwnedCollection.Create$2.call(this,t,this.CreateItemClass()),this.FOwner$1=t,this},this.Add$1=function(){return pas.Classes.TCollection.Add.call(this)}})),rtl.createClass(this,"TTMSFNCCustomListAppearance",pas.Classes.TPersistent,(function(){this.$init=function(){pas.Classes.TPersistent.$init.call(this),this.FOwner=null,this.FStrokeHover=null,this.FFillDown=null,this.FVerticalSpacing=0,this.FStrokeDown=null,this.FFillSelected=null,this.FHorizontalSpacing=0,this.FStrokeSelected=null,this.FFill=null,this.FFillHover=null,this.FStroke=null,this.FFillDisabled=null,this.FStrokeDisabled=null,this.FFont=null,this.FItemHeight=0,this.FItemWidth=0,this.FTextFormat=""},this.$final=function(){this.FOwner=void 0,this.FStrokeHover=void 0,this.FFillDown=void 0,this.FStrokeDown=void 0,this.FFillSelected=void 0,this.FStrokeSelected=void 0,this.FFill=void 0,this.FFillHover=void 0,this.FStroke=void 0,this.FFillDisabled=void 0,this.FStrokeDisabled=void 0,this.FFont=void 0,pas.Classes.TPersistent.$final.call(this)},this.SetFill=function(t){this.FFill.Assign(t)},this.SetFillDown=function(t){this.FFillDown.Assign(t)},this.SetFillHover=function(t){this.FFillHover.Assign(t)},this.SetFillSelected=function(t){this.FFillSelected.Assign(t)},this.SetHorizontalSpacing=function(t){this.FHorizontalSpacing!==t&&(this.FHorizontalSpacing=t,this.Changed())},this.SetStroke=function(t){this.FStroke.Assign(t)},this.SetStrokeDown=function(t){this.FStrokeDown.Assign(t)},this.SetStrokeHover=function(t){this.FStrokeHover.Assign(t)},this.SetStrokeSelected=function(t){this.FStrokeSelected.Assign(t)},this.SetVerticalSpacing=function(t){this.FVerticalSpacing!==t&&(this.FVerticalSpacing=t,this.Changed())},this.SetFillDisabled=function(t){this.FFillDisabled.Assign(t)},this.SetStrokeDisabled=function(t){this.FStrokeDisabled.Assign(t)},this.SetFont=function(t){this.FFont.Assign(t)},this.IsHorizontalSpacingStored=function(){return 4!==this.FHorizontalSpacing},this.IsVerticalSpacingStored=function(){return 4!==this.FVerticalSpacing},this.IsItemHeightStored=function(){return-1!==this.FItemHeight},this.IsItemWidthStored=function(){return-1!==this.FItemWidth},this.SetItemHeight=function(t){this.FItemHeight!==t&&(this.FItemHeight=t,this.Changed())},this.SetItemWidth=function(t){this.FItemWidth!==t&&(this.FItemWidth=t,this.Changed())},this.SetTextFormat=function(t){this.FTextFormat!==t&&(this.FTextFormat=t,this.Changed())},this.IsTextFormatStored=function(){return"%s"!==this.FTextFormat},this.Changed=function(){this.FOwner.CalculateItems(!0)},this.FontChanged=function(t){this.FOwner.InvalidateItems()},this.FillChanged=function(t){this.FOwner.InvalidateItems()},this.StrokeChanged=function(t){this.FOwner.InvalidateItems()},this.Create$1=function(t){return this.FOwner=t,this.FItemHeight=-1,this.FItemWidth=-1,this.FTextFormat="%s",this.FFill=pas["WEBLib.TMSFNCGraphicsTypes"].TTMSFNCGraphicsFill.$create("Create$1",[1,16777215,8421504,-1,-1]),this.FFillHover=pas["WEBLib.TMSFNCGraphicsTypes"].TTMSFNCGraphicsFill.$create("Create$1",[1,16777215,8421504,-1,-1]),this.FFillHover.SetColor(pas["WEBLib.TMSFNCGraphicsTypes"].Lighter(10061943,50)),this.FFillDown=pas["WEBLib.TMSFNCGraphicsTypes"].TTMSFNCGraphicsFill.$create("Create$1",[1,16777215,8421504,-1,-1]),this.FFillDown.SetColor(pas["WEBLib.TMSFNCGraphicsTypes"].Lighter(9470064,50)),this.FFillSelected=pas["WEBLib.TMSFNCGraphicsTypes"].TTMSFNCGraphicsFill.$create("Create$1",[1,16777215,8421504,-1,-1]),this.FFillSelected.SetColor(pas["WEBLib.TMSFNCGraphicsTypes"].Lighter(9470064,50)),this.FFillDisabled=pas["WEBLib.TMSFNCGraphicsTypes"].TTMSFNCGraphicsFill.$create("Create$1",[1,16777215,8421504,-1,-1]),this.FFillDisabled.SetColor(pas["WEBLib.TMSFNCGraphicsTypes"].Lighter(8421504,50)),this.FStroke=pas["WEBLib.TMSFNCGraphicsTypes"].TTMSFNCGraphicsStroke.$create("Create$1",[1,12632256]),this.FStroke.SetColor(11119017),this.FStrokeHover=pas["WEBLib.TMSFNCGraphicsTypes"].TTMSFNCGraphicsStroke.$create("Create$1",[1,12632256]),this.FStrokeHover.SetColor(10061943),this.FStrokeDown=pas["WEBLib.TMSFNCGraphicsTypes"].TTMSFNCGraphicsStroke.$create("Create$1",[1,12632256]),this.FStrokeDown.SetColor(9470064),this.FStrokeSelected=pas["WEBLib.TMSFNCGraphicsTypes"].TTMSFNCGraphicsStroke.$create("Create$1",[1,12632256]),this.FStrokeSelected.SetColor(5197615),this.FStrokeDisabled=pas["WEBLib.TMSFNCGraphicsTypes"].TTMSFNCGraphicsStroke.$create("Create$1",[1,12632256]),this.FStrokeDisabled.SetColor(11119017),this.FFont=pas["WEBLib.TMSFNCGraphicsTypes"].TTMSFNCGraphicsFont.$create("Create$2"),this.FFont.FOnChanged=rtl.createCallback(this,"FontChanged"),this.FFill.FOnChanged=rtl.createCallback(this,"FillChanged"),this.FFillDown.FOnChanged=rtl.createCallback(this,"FillChanged"),this.FFillHover.FOnChanged=rtl.createCallback(this,"FillChanged"),this.FFillSelected.FOnChanged=rtl.createCallback(this,"FillChanged"),this.FFillDisabled.FOnChanged=rtl.createCallback(this,"FillChanged"),this.FStroke.FOnChanged=rtl.createCallback(this,"StrokeChanged"),this.FStrokeHover.FOnChanged=rtl.createCallback(this,"StrokeChanged"),this.FStrokeDown.FOnChanged=rtl.createCallback(this,"StrokeChanged"),this.FStrokeDisabled.FOnChanged=rtl.createCallback(this,"StrokeChanged"),this.FStrokeSelected.FOnChanged=rtl.createCallback(this,"StrokeChanged"),this.FHorizontalSpacing=4,this.FVerticalSpacing=4,this},this.Assign=function(e){t.TTMSFNCCustomListAppearance.isPrototypeOf(e)&&(this.FFill.Assign(rtl.as(e,t.TTMSFNCCustomListAppearance).FFill),this.FFillHover.Assign(rtl.as(e,t.TTMSFNCCustomListAppearance).FFillHover),this.FFillSelected.Assign(rtl.as(e,t.TTMSFNCCustomListAppearance).FFillSelected),this.FFillDisabled.Assign(rtl.as(e,t.TTMSFNCCustomListAppearance).FFillDisabled),this.FFillDown.Assign(rtl.as(e,t.TTMSFNCCustomListAppearance).FFillDown),this.FStroke.Assign(rtl.as(e,t.TTMSFNCCustomListAppearance).FStroke),this.FStrokeHover.Assign(rtl.as(e,t.TTMSFNCCustomListAppearance).FStrokeHover),this.FStrokeSelected.Assign(rtl.as(e,t.TTMSFNCCustomListAppearance).FStrokeSelected),this.FStrokeDown.Assign(rtl.as(e,t.TTMSFNCCustomListAppearance).FStrokeDown),this.FStrokeDisabled.Assign(rtl.as(e,t.TTMSFNCCustomListAppearance).FStrokeDisabled),this.FVerticalSpacing=rtl.as(e,t.TTMSFNCCustomListAppearance).FVerticalSpacing,this.FHorizontalSpacing=rtl.as(e,t.TTMSFNCCustomListAppearance).FHorizontalSpacing,this.FFont.Assign(rtl.as(e,t.TTMSFNCCustomListAppearance).FFont),this.FTextFormat=rtl.as(e,t.TTMSFNCCustomListAppearance).FTextFormat)},this.Destroy=function(){rtl.free(this,"FFont"),rtl.free(this,"FFill"),rtl.free(this,"FFillDown"),rtl.free(this,"FFillSelected"),rtl.free(this,"FFillHover"),rtl.free(this,"FFillDisabled"),rtl.free(this,"FStroke"),rtl.free(this,"FStrokeDown"),rtl.free(this,"FStrokeSelected"),rtl.free(this,"FStrokeHover"),rtl.free(this,"FStrokeDisabled"),pas.System.TObject.Destroy.call(this)};var e=this.$rtti;e.addProperty("ItemWidth",14,rtl.double,"FItemWidth","SetItemWidth",{stored:"IsItemWidthStored"}),e.addProperty("ItemHeight",14,rtl.double,"FItemHeight","SetItemHeight",{stored:"IsItemHeightStored"}),e.addProperty("Stroke",2,pas["WEBLib.TMSFNCGraphicsTypes"].$rtti.TTMSFNCGraphicsStroke,"FStroke","SetStroke"),e.addProperty("Fill",2,pas["WEBLib.TMSFNCGraphicsTypes"].$rtti.TTMSFNCGraphicsFill,"FFill","SetFill"),e.addProperty("StrokeHover",2,pas["WEBLib.TMSFNCGraphicsTypes"].$rtti.TTMSFNCGraphicsStroke,"FStrokeHover","SetStrokeHover"),e.addProperty("FillHover",2,pas["WEBLib.TMSFNCGraphicsTypes"].$rtti.TTMSFNCGraphicsFill,"FFillHover","SetFillHover"),e.addProperty("StrokeDown",2,pas["WEBLib.TMSFNCGraphicsTypes"].$rtti.TTMSFNCGraphicsStroke,"FStrokeDown","SetStrokeDown"),e.addProperty("FillDown",2,pas["WEBLib.TMSFNCGraphicsTypes"].$rtti.TTMSFNCGraphicsFill,"FFillDown","SetFillDown"),e.addProperty("StrokeSelected",2,pas["WEBLib.TMSFNCGraphicsTypes"].$rtti.TTMSFNCGraphicsStroke,"FStrokeSelected","SetStrokeSelected"),e.addProperty("FillSelected",2,pas["WEBLib.TMSFNCGraphicsTypes"].$rtti.TTMSFNCGraphicsFill,"FFillSelected","SetFillSelected"),e.addProperty("StrokeDisabled",2,pas["WEBLib.TMSFNCGraphicsTypes"].$rtti.TTMSFNCGraphicsStroke,"FStrokeDisabled","SetStrokeDisabled"),e.addProperty("FillDisabled",2,pas["WEBLib.TMSFNCGraphicsTypes"].$rtti.TTMSFNCGraphicsFill,"FFillDisabled","SetFillDisabled"),e.addProperty("VerticalSpacing",14,rtl.double,"FVerticalSpacing","SetVerticalSpacing",{stored:"IsVerticalSpacingStored"}),e.addProperty("HorizontalSpacing",14,rtl.double,"FHorizontalSpacing","SetHorizontalSpacing",{stored:"IsHorizontalSpacingStored"}),e.addProperty("Font",2,pas["WEBLib.TMSFNCGraphicsTypes"].$rtti.TTMSFNCGraphicsFont,"FFont","SetFont"),e.addProperty("TextFormat",14,rtl.string,"FTextFormat","SetTextFormat",{stored:"IsTextFormatStored"})})),rtl.recNewT(this,"TTMSFNCCustomListDisplayItem",(function(){this.Item=null,this.PageIndex=0,this.Column=0,this.Row=0,this.ColumnSpan=0,this.RowSpan=0,this.$new=function(){var t=Object.create(this);return t.Rect=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),t.AbsRect=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),t},this.$eq=function(t){return this.Rect.$eq(t.Rect)&&this.AbsRect.$eq(t.AbsRect)&&this.Item===t.Item&&this.PageIndex===t.PageIndex&&this.Column===t.Column&&this.Row===t.Row&&this.ColumnSpan===t.ColumnSpan&&this.RowSpan===t.RowSpan},this.$assign=function(t){return this.Rect.$assign(t.Rect),this.AbsRect.$assign(t.AbsRect),this.Item=t.Item,this.PageIndex=t.PageIndex,this.Column=t.Column,this.Row=t.Row,this.ColumnSpan=t.ColumnSpan,this.RowSpan=t.RowSpan,this}})),this.$rtti.$MethodVar("TTMSFNCCustomListItemSelected",{procsig:rtl.newTIProcSig([["Sender",pas.System.$rtti.TObject],["AItemIndex",rtl.longint]]),methodkind:0}),this.$rtti.$MethodVar("TTMSFNCCustomListItemClick",{procsig:rtl.newTIProcSig([["Sender",pas.System.$rtti.TObject],["AItemIndex",rtl.longint]]),methodkind:0}),this.$rtti.$MethodVar("TTMSFNCCustomListItemBeforeDrawBackground",{procsig:rtl.newTIProcSig([["Sender",pas.System.$rtti.TObject],["AGraphics",pas["WEBLib.TMSFNCGraphics"].$rtti.TTMSFNCGraphics],["ARect",pas["WEBLib.TMSFNCTypes"].$rtti.TRectF],["AItemIndex",rtl.longint],["ADefaultDraw",rtl.boolean,1]]),methodkind:0}),this.$rtti.$MethodVar("TTMSFNCCustomListItemAfterDrawBackground",{procsig:rtl.newTIProcSig([["Sender",pas.System.$rtti.TObject],["AGraphics",pas["WEBLib.TMSFNCGraphics"].$rtti.TTMSFNCGraphics],["ARect",pas["WEBLib.TMSFNCTypes"].$rtti.TRectF],["AItemIndex",rtl.longint]]),methodkind:0}),this.$rtti.$MethodVar("TTMSFNCCustomListItemBeforeDrawContent",{procsig:rtl.newTIProcSig([["Sender",pas.System.$rtti.TObject],["AGraphics",pas["WEBLib.TMSFNCGraphics"].$rtti.TTMSFNCGraphics],["ARect",pas["WEBLib.TMSFNCTypes"].$rtti.TRectF],["AItemIndex",rtl.longint],["ADefaultDraw",rtl.boolean,1]]),methodkind:0}),this.$rtti.$MethodVar("TTMSFNCCustomListItemAfterDrawContent",{procsig:rtl.newTIProcSig([["Sender",pas.System.$rtti.TObject],["AGraphics",pas["WEBLib.TMSFNCGraphics"].$rtti.TTMSFNCGraphics],["ARect",pas["WEBLib.TMSFNCTypes"].$rtti.TRectF],["AItemIndex",rtl.longint]]),methodkind:0}),this.$rtti.$MethodVar("TTMSFNCCustomListItemBeforeDrawText",{procsig:rtl.newTIProcSig([["Sender",pas.System.$rtti.TObject],["AGraphics",pas["WEBLib.TMSFNCGraphics"].$rtti.TTMSFNCGraphics],["ARect",pas["WEBLib.TMSFNCTypes"].$rtti.TRectF],["AItemIndex",rtl.longint],["AText",rtl.string,1],["ADefaultDraw",rtl.boolean,1]]),methodkind:0}),this.$rtti.$MethodVar("TTMSFNCCustomListItemAfterDrawText",{procsig:rtl.newTIProcSig([["Sender",pas.System.$rtti.TObject],["AGraphics",pas["WEBLib.TMSFNCGraphics"].$rtti.TTMSFNCGraphics],["ARect",pas["WEBLib.TMSFNCTypes"].$rtti.TRectF],["AItemIndex",rtl.longint],["AText",rtl.string]]),methodkind:0}),this.$rtti.$MethodVar("TTMSFNCCustomListBeforeDraw",{procsig:rtl.newTIProcSig([["Sender",pas.System.$rtti.TObject],["AGraphics",pas["WEBLib.TMSFNCGraphics"].$rtti.TTMSFNCGraphics],["ARect",pas["WEBLib.TMSFNCTypes"].$rtti.TRectF],["ADefaultDraw",rtl.boolean,1]]),methodkind:0}),this.$rtti.$MethodVar("TTMSFNCCustomListAfterDraw",{procsig:rtl.newTIProcSig([["Sender",pas.System.$rtti.TObject],["AGraphics",pas["WEBLib.TMSFNCGraphics"].$rtti.TTMSFNCGraphics],["ARect",pas["WEBLib.TMSFNCTypes"].$rtti.TRectF]]),methodkind:0}),rtl.createClass(this,"TTMSFNCCustomListDisplayList",pas.Classes.TList,(function(){this.GetItem=function(e){var i=t.TTMSFNCCustomListDisplayItem.$new();return i.$assign(rtl.getObject(this.Get(e))),i}})),this.TTMSFNCCustomListOrientation={0:"toVertical",toVertical:0,1:"toHorizontal",toHorizontal:1},this.$rtti.$Enum("TTMSFNCCustomListOrientation",{minvalue:0,maxvalue:1,ordtype:1,enumtype:this.TTMSFNCCustomListOrientation}),rtl.createClass(this,"TTMSFNCCustomList",pas["WEBLib.TMSFNCCustomScrollControl"].TTMSFNCCustomScrollControl,(function(){this.$init=function(){pas["WEBLib.TMSFNCCustomScrollControl"].TTMSFNCCustomScrollControl.$init.call(this),this.FDownX$1=0,this.FDownY$1=0,this.FDisplayList=null,this.FUpdateCount$2=0,this.FRows=0,this.FColumns=0,this.FPageCount=0,this.FItems=null,this.FAppearance=null,this.FSelectedItemIndex=0,this.FFocusedItemIndex=0,this.FHoveredItemIndex=0,this.FDownItemIndex=0,this.FDragItemIndex=0,this.FOnItemBeforeDrawText=null,this.FOnAfterDraw$1=null,this.FOnItemAfterDrawBackground=null,this.FOnItemSelected=null,this.FOnItemAfterDrawText=null,this.FOnBeforeDraw$1=null,this.FOnItemBeforeDrawBackground=null,this.FOnItemDeselected=null,this.FOnItemClick=null,this.FOnItemBeforeDrawContent=null,this.FOnItemAfterDrawContent=null,this.FOrientation=0,this.FAllowMultiSelect=!1},this.$final=function(){this.FDisplayList=void 0,this.FItems=void 0,this.FAppearance=void 0,this.FOnItemBeforeDrawText=void 0,this.FOnAfterDraw$1=void 0,this.FOnItemAfterDrawBackground=void 0,this.FOnItemSelected=void 0,this.FOnItemAfterDrawText=void 0,this.FOnBeforeDraw$1=void 0,this.FOnItemBeforeDrawBackground=void 0,this.FOnItemDeselected=void 0,this.FOnItemClick=void 0,this.FOnItemBeforeDrawContent=void 0,this.FOnItemAfterDrawContent=void 0,pas["WEBLib.TMSFNCCustomScrollControl"].TTMSFNCCustomScrollControl.$final.call(this)},this.SetColumns=function(t){this.FColumns!==t&&(this.FColumns=t,this.CalculateItems(!0))},this.SetRows=function(t){this.FRows!==t&&(this.FRows=t,this.CalculateItems(!0))},this.SetAppearance=function(t){this.FAppearance.Assign(t)},this.SetOrientation=function(t){this.FOrientation!==t&&(this.FOrientation=t,0===this.FOrientation?(this.FAppearance.SetItemWidth(-1),this.SetColumns(1)):(this.FAppearance.SetItemHeight(-1),this.SetRows(1)),rtl.eqSet(rtl.intersectSet(this.FComponentState,rtl.createSet(0,6)),{})&&this.SetBounds(this.GetLeft(),this.GetTop(),this.GetHeight(),this.GetWidth()))},this.GetDisplayItem=function(e){var i=t.TTMSFNCCustomListDisplayItem.$new(),s=0,n=null;i.Rect.$assign(pas["WEBLib.TMSFNCTypes"].RectF(0,0,0,0)),i.Item=null,i.PageIndex=-1,i.Row=-1,i.Column=-1,i.ColumnSpan=-1,i.RowSpan=-1;for(var r=0,o=this.FDisplayList.GetCount()-1;r<=o;r++)if(s=r,null!=(n=this.FDisplayList.GetItem(s).Item)&&n.GetIndex()===e){i.$assign(this.FDisplayList.GetItem(s));break}return i},this.GetNextSelectableItem=function(){var t=0,e=0,i=null;t=this.FFocusedItemIndex;for(var s=0,n=this.FDisplayList.GetCount()-1;s<=n;s++)if(e=s,null!=(i=this.FDisplayList.GetItem(e).Item)&&i.FEnabled&&i.GetIndex()>this.FFocusedItemIndex){t=i.GetIndex();break}return t},this.GetPreviousSelectableItem=function(){var t=0,e=0,i=null;t=this.FFocusedItemIndex;for(var s=this.FDisplayList.GetCount()-1;s>=0;s--)if(e=s,null!=(i=this.FDisplayList.GetItem(e).Item)&&i.FEnabled&&i.GetIndex()<this.FFocusedItemIndex){t=i.GetIndex();break}return t},this.GetNextSelectableRowItem=function(){var e=0,i=0,s=null,n=t.TTMSFNCCustomListDisplayItem.$new();if(-1===(e=this.FFocusedItemIndex))return e=this.GetNextSelectableItem();n.$assign(this.GetDisplayItem(this.FFocusedItemIndex));for(var r=0,o=this.FDisplayList.GetCount()-1;r<=o;r++)if(i=r,null!=(s=this.FDisplayList.GetItem(i).Item)&&s.FEnabled&&s.GetIndex()>this.FFocusedItemIndex&&n.Column>=this.FDisplayList.GetItem(i).Column&&n.Column<=this.FDisplayList.GetItem(i).Column+(this.FDisplayList.GetItem(i).ColumnSpan-1)&&this.FDisplayList.GetItem(i).Row>n.Row){e=s.GetIndex();break}return e},this.GetPreviousSelectableRowItem=function(){var e=0,i=0,s=null,n=t.TTMSFNCCustomListDisplayItem.$new();if(-1===(e=this.FFocusedItemIndex))return e=this.GetPreviousSelectableItem();n.$assign(this.GetDisplayItem(this.FFocusedItemIndex));for(var r=this.FDisplayList.GetCount()-1;r>=0;r--)if(i=r,null!=(s=this.FDisplayList.GetItem(i).Item)&&s.FEnabled&&s.GetIndex()<this.FFocusedItemIndex&&n.Column>=this.FDisplayList.GetItem(i).Column&&n.Column<=this.FDisplayList.GetItem(i).Column+(this.FDisplayList.GetItem(i).ColumnSpan-1)&&this.FDisplayList.GetItem(i).Row<n.Row){e=s.GetIndex();break}return e},this.GetFirstSelectableItem=function(){var t=0,e=0,i=null;t=this.FFocusedItemIndex;for(var s=0,n=this.FDisplayList.GetCount()-1;s<=n;s++)if(e=s,null!=(i=this.FDisplayList.GetItem(e).Item)&&i.FEnabled){t=i.GetIndex();break}return t},this.GetLastSelectableItem=function(){var t=0,e=0,i=null;t=this.FFocusedItemIndex;for(var s=this.FDisplayList.GetCount()-1;s>=0;s--)if(e=s,null!=(i=this.FDisplayList.GetItem(e).Item)&&i.FEnabled){t=i.GetIndex();break}return t},this.CreateItemsCollection=function(){return t.TTMSFNCCustomListItems.$create("Create$3",[this])},this.ColumnStretchingActive=function(){return!1,!1},this.VerticalScrollPositionChanged=function(){pas["WEBLib.TMSFNCCustomScrollControl"].TTMSFNCCustomScrollControl.VerticalScrollPositionChanged.call(this),this.CalculateItems(!0)},this.HorizontalScrollPositionChanged=function(){pas["WEBLib.TMSFNCCustomScrollControl"].TTMSFNCCustomScrollControl.HorizontalScrollPositionChanged.call(this),this.CalculateItems(!0)},this.CalculateItems=function(e){var i,s,n,r,o,a,l,h,F=this,p=[],c=0,u=0,d=0,S=0,C=0,T=null,m=0,g=0,f=0,b=0,y=0,L=!1,M=0,E=0,P=0,B=0,D=0,N=0,v=0,O=0,I=0,W=t.TTMSFNCCustomListDisplayItem.$new(),A=pas["WEBLib.TMSFNCTypes"].TRectF.$new();function G(t,e,i,s,n,r,o,a,l){var h=0,p=0,c=0,u=0,d=0,S=0;s.set(!1);for(var C=e.get(),T=n-1;C<=T;C++){h=C;for(var m=i.get(),g=o-1;m<=g;m++){p=m,c=t.FColumnSpan,c=Math.min(c,F.FColumns-i.get()),u=t.FRowSpan,u=Math.min(u,F.FRows-e.get()),s.set(!0);for(var f=0,b=u-1;f<=b;f++){d=f;for(var y=0,L=c-1;y<=L;y++)S=y,l[h+d][p+S]&&s.set(!1)}if(s.get())break;i.set(i.get()+1)}if(s.get())break;i.set(0),e.set(e.get()+1)}}if(!(3 in this.FComponentState||this.FUpdateCount$2>0)&&(this.FDisplayList.Clear(),0!==this.FItems.GetCount())){for(A.$assign(this.GetContentRect()),o=A.Right-A.Left,a=A.Bottom-A.Top,l=-this.GetHorizontalScrollPosition(),h=-this.GetVerticalScrollPosition(),i=this.FAppearance.FHorizontalSpacing,E=n=o-(s=this.FAppearance.FVerticalSpacing),this.FAppearance.FItemWidth>-1?E=this.ScalePaintValue$1(this.FAppearance.FItemWidth):this.FColumns>0&&(E=(n-this.FColumns*i)/this.FColumns),0,P=r=a-s,this.FAppearance.FItemHeight>-1?P=this.ScalePaintValue$1(this.FAppearance.FItemHeight):this.FRows-0>0&&(P=(r-this.FRows*s)/this.FRows),C=0,M=0,0;C<=this.FItems.GetCount()-1;){for(d=0,c=0,p=rtl.arraySetLength(p,!1,0,0),p=rtl.arraySetLength(p,!1,this.FRows,this.FColumns);c<this.FRows;){for(;d<this.FColumns;){if(C>=0&&C<=this.FItems.GetCount()-1&&0===M){if(!(T=this.FItems.GetItem$1(C)).FVisible){C+=1;continue}m=T.FColumnSpan,g=T.FRowSpan,B=E*(m=Math.min(m,this.FColumns-d))+i*(m-1),D=P*(g=Math.min(g,this.FRows-c))+s*(g-1),N=(O=o*M+i+E*d+i*d)+l,v=(I=0+s+P*c+s*c)+h,W.Rect.$assign(pas["WEBLib.TMSFNCTypes"].RectF(N+T.FMargins.FLeft,v+T.FMargins.FTop,N+B-T.FMargins.FRight,v+D-T.FMargins.FBottom)),W.AbsRect.$assign(pas["WEBLib.TMSFNCTypes"].RectF(O+T.FMargins.FLeft,I+T.FMargins.FTop,O+B-T.FMargins.FRight,I+D-T.FMargins.FBottom)),W.Item=T,W.PageIndex=M,W.Column=d,W.Row=c,W.ColumnSpan=m,W.RowSpan=g,this.FDisplayList.Add(t.TTMSFNCCustomListDisplayItem.$clone(W)),f=(f=d)+m-1;for(var $=c,R=c+g-1;$<=R;$++){b=$;for(var x=d,w=f;x<=w;x++)y=x,p[b][y]=!0}}if(S=d+=1,u=c,L=!1,(C+=1)>=0&&C<=this.FItems.GetCount()-1&&G(this.FItems.GetItem$1(C),{get:function(){return u},set:function(t){u=t}},{get:function(){return S},set:function(t){S=t}},{get:function(){return L},set:function(t){L=t}},this.FRows,0,this.FColumns,0,rtl.arrayRef(p)),c=u,(d=S)>=this.FColumns||c>=this.FRows)break}if(S=d=0,u=c+=1,L=!1,C>=0&&C<=this.FItems.GetCount()-1&&G(this.FItems.GetItem$1(C),{get:function(){return u},set:function(t){u=t}},{get:function(){return S},set:function(t){S=t}},{get:function(){return L},set:function(t){L=t}},this.FRows,0,this.FColumns,0,rtl.arrayRef(p)),d=S,(c=u)>=this.FRows)break}M+=1}this.FPageCount=M,e?(this.UpdateControlScrollBars(!0,!0),this.CalculateItems(!1)):this.InvalidateItems()}},this.UpdateControlScroll=function(t,e,i,s){pas["WEBLib.TMSFNCCustomScrollControl"].TTMSFNCCustomScrollControl.UpdateControlScroll.apply(this,arguments),this.CalculateItems(!0)},this.ApplyStyle=function(){var t=0;pas["WEBLib.TMSFNCCustomControl"].TTMSFNCCustomControl.ApplyStyle.call(this),t=-1,pas["WEBLib.TMSFNCStyles"].TTMSFNCStyles.GetStyleBackgroundFillColor({get:function(){return t},set:function(e){t=e}})&&this.FFill.SetColor(t),t=-1,pas["WEBLib.TMSFNCStyles"].TTMSFNCStyles.GetStyleBackgroundStrokeColor({get:function(){return t},set:function(e){t=e}})&&this.FStroke.SetColor(t),t=-1,pas["WEBLib.TMSFNCStyles"].TTMSFNCStyles.GetStyleDefaultButtonFillColor({get:function(){return t},set:function(e){t=e}})&&this.FAppearance.FFill.SetColor(t),t=-1,pas["WEBLib.TMSFNCStyles"].TTMSFNCStyles.GetStyleSelectionFillColor({get:function(){return t},set:function(e){t=e}})&&(this.FAppearance.FFillSelected.SetColor(t),this.FAppearance.FFillDown.SetColor(t),this.FAppearance.FFillHover.SetColor(pas["WEBLib.TMSFNCGraphicsTypes"].Blend(t,this.FAppearance.FFill.FColor,25))),t=-1,pas["WEBLib.TMSFNCStyles"].TTMSFNCStyles.GetStyleDefaultButtonStrokeColor({get:function(){return t},set:function(e){t=e}})&&(this.FAppearance.FStroke.SetColor(t),this.FAppearance.FStrokeSelected.SetColor(t),this.FAppearance.FStrokeDown.SetColor(t),this.FAppearance.FStrokeHover.SetColor(t)),t=-1,pas["WEBLib.TMSFNCStyles"].TTMSFNCStyles.GetStyleTextFontColor({get:function(){return t},set:function(e){t=e}})&&this.FAppearance.FFont.SetColor(t)},this.ResetToDefaultStyle=function(){pas["WEBLib.TMSFNCCustomControl"].TTMSFNCCustomControl.ResetToDefaultStyle.call(this),this.FFill.SetKind(1),this.FStroke.SetKind(1),this.FFill.SetColor(16777215),this.FStroke.SetColor(12632256),this.FAppearance.FFill.SetColor(pas["WEBLib.TMSFNCGraphicsTypes"].Lighter(13882323,50)),this.FAppearance.FFillHover.SetColor(pas["WEBLib.TMSFNCGraphicsTypes"].Lighter(10061943,50)),this.FAppearance.FFillDown.SetColor(pas["WEBLib.TMSFNCGraphicsTypes"].Lighter(9470064,50)),this.FAppearance.FFillSelected.SetColor(pas["WEBLib.TMSFNCGraphicsTypes"].Lighter(9470064,50)),this.FAppearance.FFillDisabled.SetColor(pas["WEBLib.TMSFNCGraphicsTypes"].Lighter(8421504,50)),this.FAppearance.FStroke.SetColor(11119017),this.FAppearance.FStrokeHover.SetColor(10061943),this.FAppearance.FStrokeDown.SetColor(9470064),this.FAppearance.FStrokeSelected.SetColor(5197615),this.FAppearance.FStrokeDisabled.SetColor(11119017),this.FAppearance.FFont.SetColor(0),this.FAppearance.FFill.SetKind(1),this.FAppearance.FFillHover.SetKind(1),this.FAppearance.FFillDown.SetKind(1),this.FAppearance.FFillSelected.SetKind(1),this.FAppearance.FFillDisabled.SetKind(1),this.FAppearance.FStroke.SetKind(1),this.FAppearance.FStrokeHover.SetKind(1),this.FAppearance.FStrokeDown.SetKind(1),this.FAppearance.FStrokeSelected.SetKind(1),this.FAppearance.FStrokeDisabled.SetKind(1)},this.InvalidateItems=function(){this.Invalidate()},this.DoItemSelected=function(t){null!=this.FOnItemSelected&&this.FOnItemSelected(this,t)},this.DoItemClick=function(t){null!=this.FOnItemClick&&this.FOnItemClick(this,t)},this.DoItemDeselected=function(t){null!=this.FOnItemDeselected&&this.FOnItemDeselected(this,t)},this.DoItemBeforeDrawBackground=function(t,e,i,s){null!=this.FOnItemBeforeDrawBackground&&this.FOnItemBeforeDrawBackground(this,t,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(e),i,s)},this.DoItemAfterDrawBackground=function(t,e,i){null!=this.FOnItemAfterDrawBackground&&this.FOnItemAfterDrawBackground(this,t,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(e),i)},this.DoItemBeforeDrawContent=function(t,e,i,s){null!=this.FOnItemBeforeDrawContent&&this.FOnItemBeforeDrawContent(this,t,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(e),i,s)},this.DoItemAfterDrawContent=function(t,e,i){null!=this.FOnItemAfterDrawContent&&this.FOnItemAfterDrawContent(this,t,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(e),i)},this.DoItemBeforeDrawText=function(t,e,i,s,n){null!=this.FOnItemBeforeDrawText&&this.FOnItemBeforeDrawText(this,t,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(e),i,s,n)},this.DoItemAfterDrawText=function(t,e,i,s){null!=this.FOnItemAfterDrawText&&this.FOnItemAfterDrawText(this,t,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(e),i,s)},this.DoItemDrawContent=function(t,e,i){},this.DoBeforeDraw$1=function(t,e,i){null!=this.FOnBeforeDraw$1&&this.FOnBeforeDraw$1(this,t,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(e),i)},this.DoAfterDraw$1=function(t,e){null!=this.FOnAfterDraw$1&&this.FOnAfterDraw$1(this,t,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(e))},this.DrawItems=function(e){for(var i=0,s=0,n=this.FDisplayList.GetCount()-1;s<=n;s++)i=s,this.DrawItem(e,t.TTMSFNCCustomListDisplayItem.$clone(this.FDisplayList.GetItem(i)))},this.Draw=function(t,e){var i=!1;pas["WEBLib.TMSFNCCustomScrollControl"].TTMSFNCCustomScrollControl.Draw.apply(this,arguments),i=!0,this.DoBeforeDraw$1(t,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(e),{get:function(){return i},set:function(t){i=t}}),i&&(this.DrawItems(t),this.DoAfterDraw$1(t,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(e)))},this.DrawItem=function(e,i){null!=i.Item&&i.Item.FEmpty||(this.DrawItemBackGround(e,t.TTMSFNCCustomListDisplayItem.$clone(i)),this.DrawItemContent(e,t.TTMSFNCCustomListDisplayItem.$clone(i)),this.DrawItemText(e,t.TTMSFNCCustomListDisplayItem.$clone(i)))},this.DrawItemBackGround=function(t,e){var i=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),s=null,n=!1,r=pas["WEBLib.TMSFNCTypes"].TRectF.$new();null!=(s=e.Item)&&(t.FFill.Assign(this.FAppearance.FFill),t.FStroke.Assign(this.FAppearance.FStroke),s.FEnabled?s.GetIndex()===this.FDownItemIndex?(t.FFill.Assign(this.FAppearance.FFillDown),t.FStroke.Assign(this.FAppearance.FStrokeDown)):s.GetIndex()===this.FHoveredItemIndex?(t.FFill.Assign(this.FAppearance.FFillHover),t.FStroke.Assign(this.FAppearance.FStrokeHover)):s.FSelected&&(t.FFill.Assign(this.FAppearance.FFillSelected),t.FStroke.Assign(this.FAppearance.FStrokeSelected)):(t.FFill.Assign(this.FAppearance.FFillDisabled),t.FStroke.Assign(this.FAppearance.FStrokeDisabled)),i.$assign(e.Rect),n=!0,this.DoItemBeforeDrawBackground(t,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(e.Rect),s.GetIndex(),{get:function(){return n},set:function(t){n=t}}),n&&(t.DrawRectangle$2(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(i),2),this.IsFocused()&&this.FFocusedItemIndex===s.GetIndex()&&(r.$assign(i),pas["WEBLib.TMSFNCTypes"].InflateRectEx(r,this.ScalePaintValue(-2),this.ScalePaintValue(-2)),t.DrawFocusRectangle$3(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(r),0,2)),this.DoItemAfterDrawBackground(t,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(e.Rect),s.GetIndex())))},this.DrawItemContent=function(t,e){var i=null,s=!1,n=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),r=0;null!=(i=e.Item)&&(n.$assign(e.Rect),t.FFont.Assign(this.FAppearance.FFont),r=""!==i.FText?t.CalculateTextHeight$1(i.FText):0,2===i.FVerticalTextAlign?n.$assign(pas["WEBLib.TMSFNCTypes"].RectF(n.Left,n.Top,n.Right,n.Bottom-r)):1===i.FVerticalTextAlign?n.$assign(pas["WEBLib.TMSFNCTypes"].RectF(n.Left,n.Top+r,n.Right,n.Bottom)):n.$assign(pas["WEBLib.TMSFNCTypes"].RectF(n.Left,n.Top,n.Right,n.Bottom)),s=!0,this.DoItemBeforeDrawContent(t,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(n),i.GetIndex(),{get:function(){return s},set:function(t){s=t}}),s&&(this.DoItemDrawContent(t,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(n),i),this.DoItemAfterDrawContent(t,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(n),i.GetIndex())))},this.DrawItemText=function(t,e){var i=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),s=null,n="",r=!1;null!=(s=e.Item)&&""!==s.FText&&(i.$assign(e.Rect),n=s.FText,r=!0,pas["WEBLib.TMSFNCTypes"].InflateRectEx(i,this.ScalePaintValue(-2),this.ScalePaintValue(-2)),this.DoItemBeforeDrawText(t,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(e.Rect),s.GetIndex(),{get:function(){return n},set:function(t){n=t}},{get:function(){return r},set:function(t){r=t}}),r&&(t.DrawText$1(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(i),n,!1,s.FHorizontalTextAlign,s.FVerticalTextAlign,1,0,-1,-1,!0,!1,-1,-1),this.DoItemAfterDrawText(t,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(e.Rect),s.GetIndex(),n)))},this.HandleMouseWheel=function(e,i,s){var n=0,r=0,o=0,a=t.TTMSFNCCustomListDisplayItem.$new();pas["WEBLib.TMSFNCCustomControl"].TTMSFNCCustomControlBaseCommon.HandleMouseWheel.apply(this,arguments),n=this.GetVScrollValue(),r=this.GetHScrollValue(),o=0,null!=this.FDisplayList&&this.FDisplayList.GetCount()>0&&(a.$assign(this.FDisplayList.GetItem(this.FDisplayList.GetCount()-1)),o=a.AbsRect.Bottom-a.AbsRect.Top+this.FAppearance.FVerticalSpacing),i>0?this.Scroll(r,n-o):this.Scroll(r,n+o),s.set(!0)},this.HandleMouseDown=function(t,e,i,s){pas["WEBLib.TMSFNCCustomScrollControl"].TTMSFNCCustomScrollControl.HandleMouseDown.apply(this,arguments),this.CaptureEx(),this.FDownItemIndex=this.XYToItem(i,s),this.InvalidateItems(),this.FDownX$1=i,this.FDownY$1=s,this.FDragItemIndex=-1},this.HandleMouseUp=function(t,e,i,s){var n=0;pas["WEBLib.TMSFNCCustomScrollControl"].TTMSFNCCustomScrollControl.HandleMouseUp.apply(this,arguments),(Math.abs(i-this.FDownX$1)<=3&&Math.abs(s-this.FDownY$1)<=3&&!this.FAnimating||this.FScrolling)&&(this.ReleaseCaptureEx(),(n=this.XYToItem(i,s))===this.FDownItemIndex&&-1!==this.FDownItemIndex&&(this.ProcessSelection(n),-1!==n&&this.DoItemClick(n))),this.FDownItemIndex=-1,this.FHoveredItemIndex=-1,this.InvalidateItems()},this.HandleMouseMove=function(t,e,i){var s=0;pas["WEBLib.TMSFNCCustomScrollControl"].TTMSFNCCustomScrollControl.HandleMouseMove.apply(this,arguments),this.FAnimating||this.FScrolling||(-1!==this.FDownItemIndex&&(Math.abs(e-this.FDownX$1)>3||Math.abs(i-this.FDownY$1)>3)&&(this.FDragItemIndex=this.FDownItemIndex,this.ReleaseCaptureEx(),this.FDownItemIndex=-1,this.FHoveredItemIndex=-1,this.Invalidate(),this.BeginDrag$1()),this.FDownItemIndex>-1||(s=this.XYToItem(e,i))!==this.FHoveredItemIndex&&(this.FHoveredItemIndex=s,this.CancelHint(),this.InvalidateItems()))},this.HandleKeyDown=function(t,e){if(pas["WEBLib.TMSFNCCustomControl"].TTMSFNCCustomControlBaseCommon.HandleKeyDown.apply(this,arguments),t.get()in rtl.createSet(38,40,37,39,36,35)){var i=t.get();38===i?this.FFocusedItemIndex=this.GetPreviousSelectableRowItem():37===i?this.FFocusedItemIndex=this.GetPreviousSelectableItem():40===i?this.FFocusedItemIndex=this.GetNextSelectableRowItem():39===i?this.FFocusedItemIndex=this.GetNextSelectableItem():36===i?this.FFocusedItemIndex=this.GetFirstSelectableItem():35===i&&(this.FFocusedItemIndex=this.GetLastSelectableItem()),this.InvalidateItems()}13===t.get()&&(this.FDownItemIndex=this.FFocusedItemIndex,this.InvalidateItems())},this.HandleKeyUp=function(t,e){pas["WEBLib.TMSFNCCustomControl"].TTMSFNCCustomControlBaseCommon.HandleKeyUp.apply(this,arguments),13===t.get()&&(this.FDownItemIndex=-1,this.ProcessSelection(this.FFocusedItemIndex),this.InvalidateItems())},this.HandleMouseLeave=function(){pas["WEBLib.TMSFNCCustomControl"].TTMSFNCCustomControlBaseCommon.HandleMouseLeave.call(this),this.FHoveredItemIndex=-1,this.InvalidateItems()},this.ProcessSelection=function(t){var e=null,i=0;this.FSelectedItemIndex!==t&&t>=0&&t<=this.FItems.GetCount()-1&&(e=this.FItems.GetItem$1(t)).FCanSelect&&(i=this.FSelectedItemIndex,e.FCanDeselect&&e.FSelected?(this.FSelectedItemIndex=-1,e.SetSelected(!1)):(this.FSelectedItemIndex=e.GetIndex(),e.SetSelected(!0)),-1!==this.FSelectedItemIndex&&(this.FFocusedItemIndex=this.FSelectedItemIndex),!this.FAllowMultiSelect&&i>=0&&i<=this.FItems.GetCount()-1&&i!==this.FSelectedItemIndex&&this.FItems.GetItem$1(i).SetSelected(!1),e.FCanDeselect&&-1!==i&&this.DoItemDeselected(i),-1!==this.FSelectedItemIndex&&this.DoItemSelected(this.FSelectedItemIndex))},this.Create$1=function(e){return pas["WEBLib.TMSFNCCustomScrollControl"].TTMSFNCCustomScrollControl.Create$1.apply(this,arguments),this.FProcessTouchScrolling=!0,this.FTouchScrolling=!0,this.FColumns=1,this.FRows=1,this.FItems=this.CreateItemsCollection(),this.FDisplayList=t.TTMSFNCCustomListDisplayList.$create("Create$1"),this.FAppearance=t.TTMSFNCCustomListAppearance.$create("Create$1",[this]),this.FDragItemIndex=-1,this.FSelectedItemIndex=-1,this.FFocusedItemIndex=-1,this.FHoveredItemIndex=-1,this.FDownItemIndex=-1,this.FOrientation=1,this.FAllowMultiSelect=!1,this.SetWidth(300),this.SetHeight(50),this},this.Destroy=function(){rtl.free(this,"FAppearance"),rtl.free(this,"FDisplayList"),rtl.free(this,"FItems"),pas["WEBLib.TMSFNCCustomScrollControl"].TTMSFNCCustomScrollControl.Destroy.call(this)},this.Assign=function(e){pas["WEBLib.TMSFNCCustomScrollControl"].TTMSFNCCustomScrollControl.Assign.apply(this,arguments),t.TTMSFNCCustomList.isPrototypeOf(e)&&(this.FItems.Assign(rtl.as(e,t.TTMSFNCCustomList).FItems),this.FAppearance.Assign(rtl.as(e,t.TTMSFNCCustomList).FAppearance),this.FRows=rtl.as(e,t.TTMSFNCCustomList).FRows,this.FColumns=rtl.as(e,t.TTMSFNCCustomList).FColumns)},this.BeginUpdate=function(){pas["WEBLib.TMSFNCCustomScrollControl"].TTMSFNCCustomScrollControl.BeginUpdate.call(this),this.FUpdateCount$2+=1},this.EndUpdate=function(){pas["WEBLib.TMSFNCCustomScrollControl"].TTMSFNCCustomScrollControl.EndUpdate.call(this),this.FUpdateCount$2-=1,0===this.FUpdateCount$2&&this.CalculateItems(!0)},this.UpdateControlAfterResize=function(){pas["WEBLib.TMSFNCCustomScrollControl"].TTMSFNCCustomScrollControl.UpdateControlAfterResize.call(this),this.CalculateItems(!0)},this.XYToItem=function(t,e){var i=0,s=0,n=null;i=-1;for(var r=0,o=this.FDisplayList.GetCount()-1;r<=o;r++)if(s=r,pas["WEBLib.TMSFNCTypes"].PtInRectEx(this.FDisplayList.GetItem(s).Rect,pas["WEBLib.TMSFNCTypes"].PointF(t,e))&&null!=(n=this.FDisplayList.GetItem(s).Item)&&n.FEnabled&&!n.FEmpty){i=n.GetIndex();break}return i},rtl.addIntf(this,pas["WEBLib.TMSFNCPersistence"].ITMSFNCPersistence),rtl.addIntf(this,pas.System.IUnknown)})),t.$init=function(){pas.Classes.RegisterClass(t.TTMSFNCCustomList)}}),["SysUtils","WEBLib.Graphics","Math","WEBLib.Forms","WEBLib.TMSFNCUtils","WEBLib.TMSFNCStyles"]),rtl.module("WEBLib.TMSFNCWXPDFViewer.Common",["System"],(function(){"use strict";this.LB="\r",this.CONTROLID="#TTMSFNCWXPDFVIEWERID#",this.DATA_OBJECT="#TTMSFNCWXPDFVIEWERDATAOBJECT#",this.PDFVIEWERCSS="#"+this.CONTROLID+"_pdf-main-container {"+this.LB+"  width: 100%;"+this.LB+"  height: 100%;"+this.LB+"  margin: auto;"+this.LB+"}"+this.LB+this.LB+"#"+this.CONTROLID+"_pdf-contents {"+this.LB+"  display: none;"+this.LB+"}"+this.LB+this.LB+"#"+this.CONTROLID+"_pdf-canvas {"+this.LB+"  border: 1px solid rgba(0,0,0,0.2);"+this.LB+"  box-sizing: border-box;"+this.LB+"  position: relative;"+this.LB+"}"+this.LB+this.LB+"#"+this.CONTROLID+"_annotation-layer {"+this.LB+"  position: absolute;"+this.LB+"  left: 0;"+this.LB+"  top: 0;"+this.LB+"  right: 0;"+this.LB+"  bottom: 0;"+this.LB+"  overflow: hidden;"+this.LB+"  opacity: 0.2;"+this.LB+"  line-height: 1.0;"+this.LB+"}"+this.LB+this.LB+"#"+this.CONTROLID+"_annotation-layer > section {"+this.LB+"  color: transparent;"+this.LB+"  position: absolute;"+this.LB+"  white-space: pre;"+this.LB+"  cursor: text;"+this.LB+"  transform-origin: 0% 0%;"+this.LB+"}"+this.LB+this.LB+"#"+this.CONTROLID+"_annotation-layer > .linkAnnotation > a {"+this.LB+"  position: absolute;"+this.LB+"    font-size: 1em;"+this.LB+"    top: 0;"+this.LB+"    left: 0;"+this.LB+"    width: 100%;"+this.LB+"    height: 100%;"+this.LB+"}",this.PDFVIEWERHTMLCODE='<div id="'+this.CONTROLID+'_pdf-main-container">'+this.LB+'  <div id="'+this.CONTROLID+'_pdf-contents">'+this.LB+'    <canvas id="'+this.CONTROLID+'_pdf-canvas" style="border: 1px solid black; direction: ltr; margin-right: auto; margin-left: auto; display: block;"></canvas>'+this.LB+'    <div id="'+this.CONTROLID+'_annotation-layer"></div>'+this.LB+"  </div>"+this.LB+"</div>",this.ONPAGELOADEDEVENT="ONPAGELOADEDEVENT",this.ONPDFLOADEDEVENT="ONPDFLOADEDEVENT",this.ONPAGERENDEREDEVENT="ONPAGERENDEREDEVENT",this.ONPDFLOADERROREVENT="ONPDFLOADERROREVENT",this.ONGENERATETHUMBNAILEVENT="ONGENERATETHUMBNAILEVENT",this.ONHYPERLINKCLICKEVENT="ONHYPERLINKCLICKEVENT",this.ONMOUSEDOWNEVENT="ONMOUSEDOWNEVENT",this.ONMOUSEUPEVENT="ONMOUSEUPEVENT",this.ONMOUSEMOVEEVENT="ONMOUSEMOVEEVENT",this.ONFOUNDSEARCHTEXT="ONFOUNDSEARCHTEXT",this.ONGENERATEIMAGEPAGE="ONGENERATEIMAGEPAGE",this.ONTHUMBNAILPROGRESSEVENT="ONTHUMBNAILPROGRESSEVENT",this.ONNOTFOUNDSEARCHTEXT="ONNOTFOUNDSEARCHTEXT",this.ONFOUNDALLSEARCHTEXT="ONFOUNDALLSEARCHTEXT",this.ONPDFPAGEGETSTRING="ONPDFPAGEGETSTRING",this.PDFVIEWERJSVAR="var "+this.CONTROLID+"__PDF_DOC,"+this.LB+"  "+this.CONTROLID+"__THUMBNAILS_LOADED,"+this.LB+"  testHeight, testwidth,"+this.LB+"  "+this.CONTROLID+"__CURRENT_PAGE,"+this.LB+"  "+this.CONTROLID+"__TOTAL_PAGES,"+this.LB+"  "+this.CONTROLID+"__PAGE_RENDERING_IN_PROGRESS = 0,"+this.LB+"  "+this.CONTROLID+"__CANVAS,"+this.LB+"  "+this.CONTROLID+"__CANVAS_CTX;"+this.LB+"   var "+this.CONTROLID+"myEventBus, "+this.CONTROLID+"myLinkService;"+this.LB,this.THUMBNAILSIZETAG="%THUMBNAILSIZE%",this.PDFVIEWERJSMAKETHUMB="  function "+this.CONTROLID+"makeThumb(page) {"+this.LB+"    var vp = page.getViewport({scale: 1});"+this.LB+'    var canvas = document.createElement("canvas");'+this.LB+"    if (vp.height > vp.width) {"+this.LB+"      canvas.height = "+this.THUMBNAILSIZETAG+";"+this.LB+"      canvas.width = canvas.height * (vp.width / vp.height);"+this.LB+"    } else {"+this.LB+"      canvas.width = "+this.THUMBNAILSIZETAG+";"+this.LB+"      canvas.height = canvas.width * (vp.height / vp.width);"+this.LB+"    }"+this.LB+"    var vpscale = Math.min(canvas.width / vp.width, canvas.height / vp.height);"+this.LB+'    return page.render({canvasContext: canvas.getContext("2d"), viewport: page.getViewport({scale: vpscale})}).promise.then(function () {'+this.LB+"      return canvas;"+this.LB+"    });"+this.LB+"  }"+this.LB,this.PDFVIEWERJSIMAGEPAGE="  function "+this.CONTROLID+"GenerateImageActualPage() {"+this.LB+"    var dataURL = "+this.CONTROLID+"__CANVAS.toDataURL();"+this.LB+"    var o = "+this.DATA_OBJECT+";"+this.LB+'    o["EventName"] = "'+this.ONGENERATEIMAGEPAGE+'";'+this.LB+"    var customdata = ["+this.CONTROLID+"__CANVAS.width, "+this.CONTROLID+"__CANVAS.height, dataURL]"+this.LB+"    var cd = encodeURIComponent(JSON.stringify(customdata))"+this.LB+"    "+this.CONTROLID+"sendObjectMessage(JSON.stringify(o), cd);"+this.LB+"  }"+this.LB,this.PDFVIEWERJSSEARCHTEXT="  function "+this.CONTROLID+"searchPage(pageNumber, TextToSearch) {"+this.LB+"     return "+this.CONTROLID+"__PDF_DOC.getPage(pageNumber).then(function (page) {"+this.LB+"       return page.getTextContent();"+this.LB+"     }).then(function (content) {"+this.LB+"       var text = content.items.map(function (i) { return i.str; }).join('');"+this.LB+'       var re = new RegExp("(.{0,20})" + TextToSearch + "(.{0,20})", "gi"), m;'+this.LB+"       var lines = [];"+this.LB+"       while (m = re.exec(text)) {"+this.LB+'         var line = (m[1] ? "..." : "") + m[0] + (m[2] ? "..." : "");'+this.LB+"         lines.push(line);"+this.LB+"       }"+this.LB+"       return {page: pageNumber, items: lines};"+this.LB+"     });"+this.LB+"   }"+this.LB+"  function "+this.CONTROLID+"SearchText(TextToSearch) {"+this.LB+"    var results = [];"+this.LB+"    for (var i = 1; i <= "+this.CONTROLID+"__PDF_DOC.numPages; i++) {"+this.LB+"      results.push("+this.CONTROLID+"searchPage(i, TextToSearch));"+this.LB+"    }"+this.LB+"    Promise.all(results).then((searchResults) => {"+this.LB+"      if (searchResults.length == 1 && searchResults[0].items.length == 0) {"+this.LB+"        var o = "+this.DATA_OBJECT+";"+this.LB+'        o["EventName"] = "'+this.ONNOTFOUNDSEARCHTEXT+'";'+this.LB+"        "+this.CONTROLID+"sendObjectMessage(JSON.stringify(o));"+this.LB+"      } else {"+this.LB+"        var firstMatch = searchResults[0].page;"+this.LB+"        var allMatches = 0;"+this.LB+"        searchResults.forEach(function (result) {"+this.LB+"          if (firstMatch > result.page) { firstMatch = result.page }"+this.LB+"          allMatches += result.items.length;"+this.LB+"          var o = "+this.DATA_OBJECT+";"+this.LB+'          o["EventName"] = "'+this.ONFOUNDSEARCHTEXT+'";'+this.LB+"          var customdata = [result.page, JSON.stringify(result.items)]"+this.LB+"          var cd = encodeURIComponent(JSON.stringify(customdata))"+this.LB+"          "+this.CONTROLID+"sendObjectMessage(JSON.stringify(o), cd);"+this.LB+"        });"+this.LB+"        var o = "+this.DATA_OBJECT+";"+this.LB+'        o["EventName"] = "'+this.ONFOUNDALLSEARCHTEXT+'";'+this.LB+"        var customdata = [allMatches, firstMatch]"+this.LB+"        var cd = encodeURIComponent(JSON.stringify(customdata))"+this.LB+"        "+this.CONTROLID+"sendObjectMessage(JSON.stringify(o), cd);"+this.LB+"      }"+this.LB+"    });"+this.LB+"  }"+this.LB,this.PDFVIEWERJSGENERATETHUMBNAILS="  function "+this.CONTROLID+"generateThumbnails() {"+this.LB+"    "+this.CONTROLID+"__THUMBNAILS_LOADED = 0;"+this.LB+"    var pages = []; while (pages.length < "+this.CONTROLID+"__TOTAL_PAGES) pages.push(pages.length + 1);"+this.LB+"      pages.map(function (num) {"+this.LB+"        return Promise.all(["+this.CONTROLID+"__PDF_DOC.getPage(num).then("+this.CONTROLID+"makeThumb)"+this.LB+"          .then(function (canvas) {"+this.LB+"            "+this.CONTROLID+"__THUMBNAILS_LOADED++;"+this.LB+"            var dataURL = canvas.toDataURL();"+this.LB+"            var o = "+this.DATA_OBJECT+";"+this.LB+'            o["EventName"] = "'+this.ONGENERATETHUMBNAILEVENT+'";'+this.LB+"            var customdata = [num, dataURL]"+this.LB+"            var cd = encodeURIComponent(JSON.stringify(customdata))"+this.LB+"            "+this.CONTROLID+"sendObjectMessage(JSON.stringify(o), cd);"+this.LB+'            o["EventName"] = "'+this.ONTHUMBNAILPROGRESSEVENT+'";'+this.LB+"            customdata = ["+this.CONTROLID+"__THUMBNAILS_LOADED, "+this.CONTROLID+"__TOTAL_PAGES]"+this.LB+"            cd = encodeURIComponent(JSON.stringify(customdata))"+this.LB+"            "+this.CONTROLID+"sendObjectMessage(JSON.stringify(o), cd);"+this.LB+"        })]);"+this.LB+"      })"+this.LB+"  };"+this.LB,this.PDFVIEWERJSGENERATETHUMBNAILRANGE="  function "+this.CONTROLID+"generateThumbnailRange(startPage, endPage) {"+this.LB+"    "+this.CONTROLID+"__THUMBNAILS_LOADED = 0;"+this.LB+"    var pages = [];"+this.LB+"      for (var i= startPage; i<=endPage; i++) pages.push(i);"+this.LB+"      pages.map(function (num) {"+this.LB+"        return Promise.all(["+this.CONTROLID+"__PDF_DOC.getPage(num).then("+this.CONTROLID+"makeThumb)"+this.LB+"          .then(function (canvas) {"+this.LB+"            "+this.CONTROLID+"__THUMBNAILS_LOADED++;"+this.LB+"            var dataURL = canvas.toDataURL();"+this.LB+"            var o = "+this.DATA_OBJECT+";"+this.LB+'            o["EventName"] = "'+this.ONGENERATETHUMBNAILEVENT+'";'+this.LB+"            var customdata = [num, dataURL]"+this.LB+"            var cd = encodeURIComponent(JSON.stringify(customdata))"+this.LB+"            "+this.CONTROLID+"sendObjectMessage(JSON.stringify(o), cd);"+this.LB+'            o["EventName"] = "'+this.ONTHUMBNAILPROGRESSEVENT+'";'+this.LB+"            customdata = ["+this.CONTROLID+"__THUMBNAILS_LOADED, "+this.CONTROLID+"__TOTAL_PAGES]"+this.LB+"            cd = encodeURIComponent(JSON.stringify(customdata))"+this.LB+"            "+this.CONTROLID+"sendObjectMessage(JSON.stringify(o), cd);"+this.LB+"        })]);"+this.LB+"      })"+this.LB+"  };"+this.LB,this.PDFVIEWERJSGETPAGEJSON="  function "+this.CONTROLID+'GetPageString(page_nr, as_json, filename = "") {'+this.LB+"    "+this.CONTROLID+"__PDF_DOC.getPage(page_nr).then(function(page) {"+this.LB+"      page.getTextContent().then(function(content) {"+this.LB+"        var customdata;"+this.LB+"        if (as_json) {"+this.LB+"          customdata = [JSON.stringify(content.items), as_json, filename]"+this.LB+"        } else {"+this.LB+"          let res = content.items.map(function (s) {"+this.LB+"            if (s.hasEOL) {"+this.LB+'              return s.str + "\\n"'+this.LB+"            } else { "+this.LB+"              return s.str"+this.LB+"            }"+this.LB+'          }).join("");'+this.LB+"          customdata = [res, as_json]"+this.LB+"        }"+this.LB+"        var o = "+this.DATA_OBJECT+";"+this.LB+'        o["EventName"] = "'+this.ONPDFPAGEGETSTRING+'";'+this.LB+"        var cd = encodeURIComponent(JSON.stringify(customdata))"+this.LB+"        "+this.CONTROLID+"sendObjectMessage(JSON.stringify(o), cd);"+this.LB+"      });"+this.LB+"    });"+this.LB+"  };"+this.LB,this.PDFVIEWERJSSHOWPDFURL="  function "+this.CONTROLID+"showPDFUrl(pdf_url,page_no,zoom_pdf,rotate_angle,calc_thumb, pw) {"+this.LB+"    "+this.CONTROLID+"__THUMBNAILS_LOADED = 0;"+this.LB+"    "+this.CONTROLID+'__CANVAS = document.getElementById("'+this.CONTROLID+'_pdf-canvas"),'+this.LB+"    "+this.CONTROLID+"__CANVAS_CTX = "+this.CONTROLID+'__CANVAS.getContext("2d");'+this.LB+"    let connectionObject;"+this.LB+"    if (pw) { "+this.LB+"      connectionObject = {url: pdf_url, password: pw};"+this.LB+"    } else {"+this.LB+"      connectionObject = pdf_url"+this.LB+"    }"+this.LB+"    debugger;"+this.LB+"    pdfjsLib.getDocument(connectionObject).promise.then(function(pdf_doc) {"+this.LB+"      "+this.CONTROLID+"__PDF_DOC = pdf_doc;"+this.LB+"      "+this.CONTROLID+"__TOTAL_PAGES = "+this.CONTROLID+"__PDF_DOC.numPages;"+this.LB+"      var o = "+this.DATA_OBJECT+";"+this.LB+'      o["EventName"] = "'+this.ONPDFLOADEDEVENT+'";'+this.LB+"      var customdata = ["+this.CONTROLID+"__TOTAL_PAGES]"+this.LB+"      var cd = encodeURIComponent(JSON.stringify(customdata))"+this.LB+"      "+this.CONTROLID+"sendObjectMessage(JSON.stringify(o), cd);"+this.LB+"      if (calc_thumb) {"+this.LB+"      var pages = []; while (pages.length < "+this.CONTROLID+"__TOTAL_PAGES) pages.push(pages.length + 1);"+this.LB+"        pages.map(function (num) {"+this.LB+"          return Promise.all(["+this.CONTROLID+"__PDF_DOC.getPage(num).then("+this.CONTROLID+"makeThumb)"+this.LB+"            .then(function (canvas) {"+this.LB+"              "+this.CONTROLID+"__THUMBNAILS_LOADED++;"+this.LB+"              var dataURL = canvas.toDataURL();"+this.LB+"              var o = "+this.DATA_OBJECT+";"+this.LB+'              o["EventName"] = "'+this.ONGENERATETHUMBNAILEVENT+'";'+this.LB+"              var customdata = [num, dataURL]"+this.LB+"              var cd = encodeURIComponent(JSON.stringify(customdata))"+this.LB+"              "+this.CONTROLID+"sendObjectMessage(JSON.stringify(o), cd);"+this.LB+'              o["EventName"] = "'+this.ONTHUMBNAILPROGRESSEVENT+'";'+this.LB+"              customdata = ["+this.CONTROLID+"__THUMBNAILS_LOADED, "+this.CONTROLID+"__TOTAL_PAGES]"+this.LB+"              cd = encodeURIComponent(JSON.stringify(customdata))"+this.LB+"              "+this.CONTROLID+"sendObjectMessage(JSON.stringify(o), cd);"+this.LB+"          })]);"+this.LB+"        })"+this.LB+"      }"+this.LB+'      $("#'+this.CONTROLID+'_pdf-contents").show();'+this.LB+"      "+this.CONTROLID+"showPage(page_no,zoom_pdf,rotate_angle);"+this.LB+"    }).catch(function(error) {"+this.LB+"      var o = "+this.DATA_OBJECT+";"+this.LB+'      o["EventName"] = "'+this.ONPDFLOADERROREVENT+'";'+this.LB+"      var customdata = [error.message]"+this.LB+"      var cd = encodeURIComponent(JSON.stringify(customdata))"+this.LB+"      "+this.CONTROLID+"sendObjectMessage(JSON.stringify(o), cd);"+this.LB+"    });"+this.LB+"  }"+this.LB,this.PDFVIEWERJSSHOWPDFBASE64="  function "+this.CONTROLID+"showPDFBase64(pdf_data,page_no,zoom_pdf,rotate_angle,calc_thumb,pw) {"+this.LB+"    "+this.CONTROLID+"__THUMBNAILS_LOADED = 0;"+this.LB+"    "+this.CONTROLID+'__CANVAS = document.getElementById("'+this.CONTROLID+'_pdf-canvas"),'+this.LB+"    "+this.CONTROLID+"__CANVAS_CTX = "+this.CONTROLID+'__CANVAS.getContext("2d");'+this.LB+"    var pdfData = atob(pdf_data);"+this.LB+"    let connectionObject;"+this.LB+"    if (pw) { "+this.LB+"      connectionObject = {data: pdfData, password: pw};"+this.LB+"    } else {"+this.LB+"      connectionObject = {data: pdfData}"+this.LB+"    }"+this.LB+"    pdfjsLib.getDocument(connectionObject).promise.then(function(pdf_doc) {"+this.LB+"      debugger;"+this.LB+"      "+this.CONTROLID+"__PDF_DOC = pdf_doc;"+this.LB+"      "+this.CONTROLID+"__TOTAL_PAGES = "+this.CONTROLID+"__PDF_DOC.numPages;"+this.LB+"      var o = "+this.DATA_OBJECT+";"+this.LB+'      o["EventName"] = "'+this.ONPDFLOADEDEVENT+'";'+this.LB+"      var customdata = ["+this.CONTROLID+"__TOTAL_PAGES]"+this.LB+"      var cd = encodeURIComponent(JSON.stringify(customdata))"+this.LB+"      "+this.CONTROLID+"sendObjectMessage(JSON.stringify(o), cd);"+this.LB+"      if (calc_thumb) {"+this.LB+"        var pages = []; while (pages.length < "+this.CONTROLID+"__TOTAL_PAGES) pages.push(pages.length + 1);"+this.LB+"        pages.map(function (num) {"+this.LB+"          return Promise.all(["+this.CONTROLID+"__PDF_DOC.getPage(num).then("+this.CONTROLID+"makeThumb)"+this.LB+"            .then(function (canvas) {"+this.LB+"              "+this.CONTROLID+"__THUMBNAILS_LOADED++;"+this.LB+"              var dataURL = canvas.toDataURL();"+this.LB+"              var o = "+this.DATA_OBJECT+";"+this.LB+'              o["EventName"] = "'+this.ONGENERATETHUMBNAILEVENT+'";'+this.LB+"              var customdata = [num, dataURL]"+this.LB+"              var cd = encodeURIComponent(JSON.stringify(customdata))"+this.LB+"              "+this.CONTROLID+"sendObjectMessage(JSON.stringify(o), cd);"+this.LB+'              o["EventName"] = "'+this.ONTHUMBNAILPROGRESSEVENT+'";'+this.LB+"              customdata = ["+this.CONTROLID+"__THUMBNAILS_LOADED, "+this.CONTROLID+"__TOTAL_PAGES]"+this.LB+"              cd = encodeURIComponent(JSON.stringify(customdata))"+this.LB+"              "+this.CONTROLID+"sendObjectMessage(JSON.stringify(o), cd);"+this.LB+"            })"+this.LB+"          ]);"+this.LB+"        })"+this.LB+"      }"+this.LB+'      $("#'+this.CONTROLID+'_pdf-contents").show();'+this.LB+"      "+this.CONTROLID+"showPage(page_no,zoom_pdf,rotate_angle);"+this.LB+"    }).catch(function(error) {"+this.LB+"      var o = "+this.DATA_OBJECT+";"+this.LB+'      o["EventName"] = "'+this.ONPDFLOADERROREVENT+'";'+this.LB+"      var customdata = [error.message]"+this.LB+"      var cd = encodeURIComponent(JSON.stringify(customdata))"+this.LB+"      "+this.CONTROLID+"sendObjectMessage(JSON.stringify(o), cd);"+this.LB+"    });"+this.LB+"  }"+this.LB,this.PDFVIEWERJSSHOWPAGE="  function "+this.CONTROLID+"showPage(page_no,zoom_pdf,rotate_angle) {"+this.LB+"    "+this.CONTROLID+"myEventBus = new pdfjsViewer.EventBus();"+this.LB+"    "+this.CONTROLID+"myLinkService = new pdfjsViewer.PDFLinkService({"+this.CONTROLID+"myEventBus, externalLinkTarget: pdfjsLib.LinkTarget.BLANK});"+this.LB+"    "+this.CONTROLID+"__PAGE_RENDERING_IN_PROGRESS = 1;"+this.LB+"    "+this.CONTROLID+"__CURRENT_PAGE = page_no;"+this.LB+"    "+this.CONTROLID+'__CANVAS = document.getElementById("'+this.CONTROLID+'_pdf-canvas");'+this.LB+"    let parent = "+this.CONTROLID+"__CANVAS.parentNode;"+this.LB+"    parent.removeChild("+this.CONTROLID+"__CANVAS);"+this.LB+"    "+this.CONTROLID+'__CANVAS = document.createElement("canvas");'+this.LB+"    "+this.CONTROLID+'__CANVAS.id = "'+this.CONTROLID+'_pdf-canvas";'+this.LB+"    "+this.CONTROLID+'__CANVAS.style = "border: 1px solid black; direction: ltr; margin-right: auto; margin-left: auto; display: block;";'+this.LB+"    parent.insertBefore("+this.CONTROLID+"__CANVAS, parent.childNodes[0]);"+this.LB+"    "+this.CONTROLID+"__CANVAS_CTX = "+this.CONTROLID+'__CANVAS.getContext("2d");'+this.LB+'    $("#'+this.CONTROLID+'_annotation-layer").hide()'+this.LB+'    $("#'+this.CONTROLID+'_pdf-current-page").text(page_no);'+this.LB+"    "+this.CONTROLID+"__PDF_DOC.getPage(page_no).then(function(page) {"+this.LB+"      var o = "+this.DATA_OBJECT+";"+this.LB+'      o["EventName"] = "'+this.ONPAGELOADEDEVENT+'";'+this.LB+"      "+this.CONTROLID+"sendObjectMessage(JSON.stringify(o));"+this.LB+"      var outputScale = window.devicePixelRatio || 1.5;"+this.LB+"      if (outputScale === 1) { outputScale = 1.3 };"+this.LB+"      var scale_required = zoom_pdf;"+this.LB+"      if (rotate_angle != undefined ) {"+this.LB+"       var rotatedeg = rotate_angle;"+this.LB+"       var viewport = page.getViewport({scale: scale_required, rotation: rotatedeg});"+this.LB+"      } else { "+this.LB+"       var viewport = page.getViewport({scale: scale_required});"+this.LB+"      };"+this.LB+"      var vpHeight, vpWidth;"+this.LB+"      if (!viewport.height) {"+this.LB+"        vpHeight = viewport.viewBox[3];"+this.LB+"      } else {"+this.LB+"        vpHeight = viewport.height;"+this.LB+"      }"+this.LB+"      if (!viewport.width) {"+this.LB+"        vpWidth = viewport.viewBox[2];"+this.LB+"      } else {"+this.LB+"        vpWidth = viewport.width;"+this.LB+"      }"+this.LB+"      "+this.CONTROLID+"__CANVAS.height = Math.floor(vpHeight * outputScale);"+this.LB+"      "+this.CONTROLID+"__CANVAS.width = Math.floor(vpWidth * outputScale);"+this.LB+"      "+this.CONTROLID+'__CANVAS.style.height = Math.floor(vpHeight) + "px";'+this.LB+"      "+this.CONTROLID+'__CANVAS.style.width = Math.floor(vpWidth) + "px";'+this.LB+"      var transform = outputScale !== 1 ? [outputScale, 0, 0, outputScale, 0, 0] : null;"+this.LB+"      var renderContext = {"+this.LB+"        canvasContext: "+this.CONTROLID+"__CANVAS_CTX,"+this.LB+"        transform: transform,"+this.LB+"        viewport: viewport"+this.LB+"      };"+this.LB+"      page.render(renderContext).promise.then(function() {"+this.LB+"        return page.getAnnotations();"+this.LB+"      }).then(function(annotationData) {"+this.LB+"        if(annotationData.length == 0)"+this.LB+"          return;"+this.LB+'        var canvas_offset = $("#'+this.CONTROLID+'_pdf-canvas").offset();'+this.LB+'        var div_offset = $("#'+this.CONTROLID+'_pdf-contents").offset();'+this.LB+"        var left_offset = 0;"+this.LB+"        var top_offset = 0;"+this.LB+"        if (canvas_offset.left !== div_offset.left) {"+this.LB+"          if (div_offset.left == 0) {"+this.LB+"            left_offset = Math.max(canvas_offset.left, div_offset.left);"+this.LB+"          } else {"+this.LB+"            left_offset = canvas_offset.left - div_offset.left;"+this.LB+"          }"+this.LB+"        }"+this.LB+'        $("#'+this.CONTROLID+'_annotation-layer").html("").show();'+this.LB+'        $("#'+this.CONTROLID+"_annotation-layer\").css({ left: left_offset + 'px', top: top_offset + 'px', height: "+this.CONTROLID+"__CANVAS.style.height, width: "+this.CONTROLID+"__CANVAS.style.width });"+this.LB+"        pdfjsLib.AnnotationLayer.render({"+this.LB+"          linkService: "+this.CONTROLID+"myLinkService,"+this.LB+"          viewport: viewport.clone({ dontFlip: true}),"+this.LB+'          div: document.getElementById("'+this.CONTROLID+'_annotation-layer"),'+this.LB+"          annotations: annotationData,"+this.LB+"          page: page"+this.LB+"        });"+this.LB+'        var annotlayer = document.getElementById("'+this.CONTROLID+'_annotation-layer");'+this.LB+'        annotlayer.addEventListener("mousedown", e => {'+this.LB+"          var o = "+this.DATA_OBJECT+";"+this.LB+'          o["EventName"] = "'+this.ONMOUSEDOWNEVENT+'";'+this.LB+"          var customdata = [e.button,e.shiftKey,e.altKey,e.ctrlKey,e.clientX,e.clientY]"+this.LB+"          var cd = encodeURIComponent(JSON.stringify(customdata))"+this.LB+"          "+this.CONTROLID+"sendObjectMessage(JSON.stringify(o), cd);"+this.LB+"        });"+this.LB+'        annotlayer.addEventListener("mouseup", e => {'+this.LB+"          var o = "+this.DATA_OBJECT+";"+this.LB+'          o["EventName"] = "'+this.ONMOUSEUPEVENT+'";'+this.LB+"          var customdata = [e.button,e.shiftKey,e.altKey,e.ctrlKey,e.clientX,e.clientY]"+this.LB+"          var cd = encodeURIComponent(JSON.stringify(customdata))"+this.LB+"          "+this.CONTROLID+"sendObjectMessage(JSON.stringify(o), cd);"+this.LB+"        });"+this.LB+'        annotlayer.addEventListener("mousemove", e => {'+this.LB+"          var o = "+this.DATA_OBJECT+";"+this.LB+'          o["EventName"] = "'+this.ONMOUSEMOVEEVENT+'";'+this.LB+"          var customdata = [e.button,e.shiftKey,e.altKey,e.ctrlKey,e.clientX,e.clientY]"+this.LB+"          var cd = encodeURIComponent(JSON.stringify(customdata))"+this.LB+"          "+this.CONTROLID+"sendObjectMessage(JSON.stringify(o), cd);"+this.LB+"        });"+this.LB+"        for (let i = 0; i < annotationData.length; i++) {"+this.LB+"          var iddata = '[data-annotation-id=\"' + annotationData[i].id + '\"]';"+this.LB+"          var element = document.querySelector(iddata);"+this.LB+"          if (element) {"+this.LB+'            element.addEventListener("click", function (event) {'+this.LB+"              var o = "+this.DATA_OBJECT+";"+this.LB+'              o["EventName"] = "'+this.ONHYPERLINKCLICKEVENT+'";'+this.LB+"              var customdata = [annotationData[i].id, annotationData[i].subtype, annotationData[i].url]"+this.LB+"              var cd = encodeURIComponent(JSON.stringify(customdata))"+this.LB+"              "+this.CONTROLID+"sendObjectMessage(JSON.stringify(o), cd);"+this.LB+"              event.preventDefault();"+this.LB+"              return false;"+this.LB+"            });"+this.LB+"          }"+this.LB+"        }"+this.LB+"        var o = "+this.DATA_OBJECT+";"+this.LB+'        o["EventName"] = "'+this.ONPAGERENDEREDEVENT+'";'+this.LB+"        "+this.CONTROLID+"sendObjectMessage(JSON.stringify(o));"+this.LB+"        "+this.CONTROLID+"__PAGE_RENDERING_IN_PROGRESS = 0;"+this.LB+"      });"+this.LB+"    });"+this.LB+"  }",this.DEFAULT_PDF_BASE64="JVBERi0xLjcKJeLjz9MKNCAwIG9iago8PAovRmlsdGVyIC9GbGF0ZURlY29kZQovTGVuZ3RoIDQ5MQo+PgpzdHJlYW0KeJwVURG0LDEMXSxGg4vF6sfBYvDp4GJwtTg4GC0OLgarxY+D1Ysf9+f13JOT3pOkN7ff7/cRx+78zADoyW/Vq/chW8WqgspWGYO3ITSYLHgZlbXyMN5MyJiEN2E62gkjUF/37e4q7Njr4SX/wR38wm3oJpOkEU/iFi10TNq27VyL06a8ZSFlSkL7Tx1zvn5eeO34KeCCvMMKSse1QzvqjrTj2CE9pUR5gy1v5JN8/auOLNvTVgrB2yn7jluhy/HBHUNCjHPk3Xl8DlGZRVrhWbiVIxDXqd4gLaK2+eGprYGbHlPZzIcplrYuIOnEIO50BEC4BRIPnRwYp0zxNqVFlDZPjrRNbnJM4belsS7BJaa/QIy+GBebMpJYQuhHYktBtn7JuERVhrJePC5W5ZFEk4zEmjg+jXWs00xsVXxaV/jygTo+3orPgFaz9v7J7+WdHPSK/3xH8Rmr1HH6lPo2x986/p5jhSLvYXDEUFekl9E7o3AvDR9GGADuevRyIBDyPZb3PqVHlPZrgrQ+ucuB2Ne197qf2dcUTLHzF1FkkzHZojqLZawsyGw5yGiWMUVPGSfr5DFZw9YsmmVk1hxb71yl4kXIhEpI5L04St1eqS18/+DrOVF5Uuo3vt/U/z3T49HvR3r8B9dufD0KZW5kc3RyZWFtCmVuZG9iagozIDAgb2JqCjw8Ci9UeXBlIC9YT2JqZWN0Ci9TdWJ0eXBlIC9JbWFnZQovV2lkdGggNDAwCi9IZWlnaHQgMzAwCi9CaXRzUGVyQ29tcG9uZW50IDgKL0NvbG9yU3BhY2UgWy9JbmRleGVkIC9EZXZpY2VSR0IgMjU1IDQgMCBSXQovRmlsdGVyIC9GbGF0ZURlY29kZQovTGVuZ3RoIDYgMCBSCj4+CnN0cmVhbQp4nO2dSXKjShPHQUxnIAIW2uOV4QJspHCETiiO4ZP4Huy/kBSqjxxqAA3tfm27rfb/9yYoaoDMysyqUr+qKAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwD2qfBzLv/0SQEmzmGn+9ot8T9Kc+ML2YouJovqLG38A0tgYE39de73TRxdF5dR4/IWNPwDcX/sva64WXWQ9q6Hkmy9r/BFIv1YkDTeXRsduiKCPK1RfK5LEhKEc+rjgpn2kaXidXjyuLpMuc11kS6i1nb0TfRx/64WvNu2fzV7ndj7H8XjZ/LU0ffCOTH9CnrCA4mSCe+1OrqqREgfOU48Ug9dDUKzeUZJpfFpacs/P8jbINrB36pvCJuy6nnIlz92uq6a2Mtd4qU2PmpOutf2o5RutOM2nNzb9VJxT7VdwyWJt7GBtysbvM+W7zfH1bTXxsg9F+7Q9UOL21aVs3l6mv6JoPz047Dnrka6p4C/k+7vsdOhJw5yMEhq+Gno/R2jseChzvW10Y6Re53V15kaxa5vNp8WZCDM1frAbV7ZmQ39Ng62Cmo5FfpWhV9JhRkc3ep0bW2gwbmy2o6skXU//Vn3kfhh3e56zP5PgV/TvNyvYzctqpamHjSQdN5wvPcmDw5R1vzpJwcPTHwj/CrvYw/pYxzOayAvVjcKSIINh+VVhGc1WzipivaV9kFIdm+Aut55TFKwal5q4lBjOVCSsw+qDX7+PnT4SE2TJbnitlzNJVf62wn9aHWzK9I92/ye5W2nmQ7QVJXLa5sN0QXRLOTbxnJl+1lym0OzysZwUpvRiC8OiIvI9aZhQhW2RffC9kTYyX0iVXS9fN9BHkMz6SOZ5slvqsEyCPRwobXPyKcSec2445byyBbbWOrjgh+rjYv6x1p7VdKPriOtdlwVfz9d5GqVF08epr6OllalM/YNaTPac76RsT4bUtiyqpm3rlkrOx1eiQkpvtWUOD7l7wzrmt8vyctf3wRt5K+9zLsDZkrFrJNe1xbI9CfR8Omy3WxY3NXsUR3Xa7qfwQNZz5t7/pPp522/Fpih0bPdvn2Egy/GVRGDu4yoUw9E48ZdBgSr3glQ/XUoASHxv1e47+vRn29pcH+LOqI087P6GLI9rF812nDe51Eem4wbRDN/oYtnlZx+5d585aB9fVyuOA6yZw5Yz7Oly9UaXGzEZzntY+Tx71tP23aJ+F4v5h9gHOwf1JyLT1F+L/YROWTxYEaRIdhtKG2M7vnj2xXjXlWqsTbigNdj2WtfyWlswS330aVipjqtEs/pkGjkdxAWJebi+fRShso5eIpd5giKIxA8pyLZy1jzs8mz+D+KqfYTfoh/G1yxI7Zl97StR6Y1OSWUohjACXJt/uGpIr2Yq5YcHzdxdBe+jIZ8vxQCtVyJFaRiyYwoJaW/i/fX6smtv2FvZkdbxRFmeOP2smlG7skp9W1FQuS/f36UKFBCpfWgAnAlVBE5XbWxHL4lViQ+guYjrmfL4WjNnXGwfN/yVjqTqYGg29XlvaV4z7sUD+7DmEVnlt36kzi8lLmp1ZsEeqPdv5tMH8T/u9sVqT+KH08fZ2dV2XuBDuGYfqo8hfMSfLDHAzk4m0a61t669BFns3HnXrlbSFw+hrtpHOss3OSxWn8TiIvVZdvOus9BHNkuvSufzGu01Gx0esTCvhWIJH+6WzenNFbT6OK1Cfaw+Wh/X4ofMei/1YQVZ+ZGqFU/hpwWkkDH21UQqZ9HHvfihAyhRQc2NjLnP0t3VRzJL92/jJujijk4iTDKP01IfB+rv7pb0cVL7cOkyBLP6OBzCAh/C79hHPLpSpZW/k61XUmQ9uquVV1fYv98bX7lWSOy9Nk/dXExLEpw+6oWirukjC2IcheuTMwByRufXaMYrxwl3+2JnIDIrUd929pPHz7OPRfzQT5tJK54JciIV+YeTrUJmBSmtfdCFXcuS8Rff3bcPN/3hiOFNTvq4dB27Zpbcsg9bRy9jQK8SmdeJLLfnSbAn++TIiZvDyfd9juJiTE9sE0E8XwX2sTrfkux/w/tn/uhL+7iI56mVyODyFtYpOMH3gZp5EmAk3l6zD3qgrdiJIKtgba/7sPZe2qqX412nD6nDrqyVvRuHH4/7rV0BfD2RMcgA65geDurETj5QvLiosQmTVzP7OH24feigPp2iNN2F46sb8WO046rKiiGNTS4CtfahUwL2F7X082BlydlHbbWcZ2Ez2mxhjcUu2nbGVVpezM99tOq9Pqrpe0yw5OwHVDKxe5tcVsozDXryenbS3rycaSzLA9unwC0d2ek5+/h4fyUSMNMU2K0h3Y8fHHOzpixkDZVkxf0/6Yph7UvYrp2p4FRcc/tQl0RuTt2KXTre+afe79n1SFfp1fhhfxPukyQz1tYu2Mjgl9Zx/TrUQUPMy0FWpw5Hn/Vq/Dh/vD5K57L743viRzwn8st5hv+WcdR8LdfPDub2ES4pSoIak3hJHbL6EFW76malFvahduSmSX7cHbLXRVxdzmXXdRSrmbR0CnTwNBvv0mNvH6ePjh/h3KF4j31USfix3HXDZVdjv74KVur9mvfCPoLlfO3EajF8rdGk89mDYXV/Wx9+/St2gzP5oD724f3psHLYGfeRlkB0cff8omKn8dXB6+P0qeOriCbTIjN61fv2IR27cKMg/6OdlZPJnYv2ib3/I1YL+3AWklifIoEnDxqduRs3qm6CgfqFPqLa/QKyDqIHdbBgBJxurXVs/Uxkf1ITOe1t0tI+VqtPnH8QVdk0nbxoXRdFoe9cFXSjeQq6sd9W1fm4Hsvwt9l22E2VFLPfftI6b5oxb4NErj8sF1VTnuBX3oob0hI13yxedqCmK30jaZuu6kW2YnqfXTELHQt9TAOuzX673T7Nl02mtLftPlhLSTeEFuFrfTZdPW0Wk0rwfpb6iGjA9Z6fwOnPLhz9zbzMJ/yxhh/CFX2Avwj08b2APr4X0Mf3Avr4XkAf34tH0Eea/ByyR9CH+SnI+sl318fsj97+AL67PtJff8I/xXfXBwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADw7ajunQbwldw5UeInsdi7pb2aqf58WeXBpjw/iib4v+sa0keggur6/7zSmev7038keXxLHyO/6U73mFnznd/YJrff8qjmFZ4EkEz66L0+jtV8C3BLfuO8gI/ktn0kuvFWQ4acuv8rUDdLHI2R59/F7/4nGt6QirapmdlH1F71V2n9+R972z4S2l+0LQ3vWJ3y+6Z1Z3Sr+DHu6DMe1TqUxu2rG9rH3+SefbApFKIJawiDWsg425H2UWnchm30fUWeq5saZGPXtuzywHENpdwMeVeG8aUa8l05d3B1ubMli3yXD7YCPpiTHqRTEamjmGJAVe4Gka+zj6mGYRbEEtl/N+3Jl1Z0yo4WYM2Ms63nHpVQH3VDDnjUO/pGOd3En8I08NO0Yd/tD/TSLQvDcyhk6z2qWzdTT/SIg3akKseo4ORBig+yPaDciX2kstvoLqhT9RFl9F9nH1Fl2ED+FX1Y7zB9fFbSxuml3FW0pWdfp1VpXG7Rx+Spq8lx+93C42ao2yGL/VaJZbxu07qh6J8keV0V6hcT08c5NTLGTTEl8t6VuUnipi4Sw2M6tY8k7tqqTPw25aoH3umyFn0cw28Yb8adR6IxXh+8Q2Uum0OyPvJ4cd7vwLaSLYcw6naM31z12VuPbnMo208mMo6erKc5Ws9D5qURgIQv9lGKIqpwlKHxo+MdS719TLU1XLppmf8kh+9CaB8sVhUcf+2wPDBO7COJ82v7BrbBYLi7CMo9iy+RQwIL3ZN3ZAlrF6DUyNpH5s7p8W5xareth1GOTgo0JeXtbsqzvUYfjjGwD3t8XWXvqt6sZ3IVfUzOvrvohVU7BFvz15NHKsKHtYgvsUqXrDtuPVfPL11e7GMKJgWxDkxU9+tNCp9ZauFdj8c4a5pmHB/ba43uey/0ceRjHU0WnFCmXoTi9xgOfUqZWwZHRdO5LXqsZ6Hb5rI+zFwfseijs6/Q6p3fWcUE+/fG6y63Q64qjB8a1f5YGn+fu/YRiTB9SLUOjM62Cybwo0nKoS5nR3entKG7nEDX50Ph7INL/dI+qskp1UxgiIkJzm0N7CPj40XGf2Ld69I+zEwffNKAM4XB66bzW6OL33dCjnxuOZ9Lz0e75q9m9lHw1u1yZ64seyThGo63j9LOP/KLEo/Hr+wjoiGY81iBPip/lkon8qwvjrYn6Rcm0eqv6ONZ7MPIjuGyOpabHWe8lG4W6sPZR5vJS/0j+rgdPyahyLE2oX00tMM4XRZ+IJPzqm+bBPrgk5u4qlr20x/vxg8+G6yOdbTVcfV6pl6ggiv2kbYlnSY8/5J1Evi1B+PCPtJAH+t4LPMkOLOB7WMa1+ZjEpxEOg2Rm5yOVfX66OOk7Ljjpkmc5HnS97P40c/jx1R2bPR4BJ2fN1RpvusDv7W0j7jPgmUBp4/WPLClPN+zDznMYOclIvGczy5IgmEX5TNj2nt90InoRoZGcpx6O171V2ofTZHE9ugDG01knWUdNDOzDxn9/m+9s8br9FH1D6wPvz6dpuF/9a6q57+e2qOeluvuVR3UsMyS1u6UqHkjmpiz1bmBlH+jRePR8i49Xn+KXe7/iPyfWAn8d/ixv5h/U27/Igj+BuX4wPEXAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABE/wfIRmIKCmVuZHN0cmVhbQplbmRvYmoKNiAwIG9iagozNjg4CmVuZG9iago3IDAgb2JqCjw8Ci9GaWx0ZXIgL0ZsYXRlRGVjb2RlCi9MZW5ndGggMzIKPj4Kc3RyZWFtCnicK+QyNjBQAEEjI1MwnZzLpR9hoOCSzxXIBQBZ4gXxCmVuZHN0cmVhbQplbmRvYmoKNSAwIG9iago8PAovVHlwZSAvUGFnZQovTWVkaWFCb3ggWzAgMCAzMDAgMjI1XQovUmVzb3VyY2VzIDw8Ci9YT2JqZWN0IDw8Ci9YMCAzIDAgUgo+Pgo+PgovQ29udGVudHMgNyAwIFIKL1BhcmVudCAyIDAgUgo+PgplbmRvYmoKMiAwIG9iago8PAovVHlwZSAvUGFnZXMKL0tpZHMgWzUgMCBSXQovQ291bnQgMQo+PgplbmRvYmoKMSAwIG9iago8PAovVHlwZSAvQ2F0YWxvZwovUGFnZXMgMiAwIFIKPj4KZW5kb2JqCjggMCBvYmoKPDwKL0NyZWF0b3IgKDMtSGVpZ2h0c1wyMjIgSW1hZ2UgdG8gUERGIENvbnZlcnRlciA2LjE2LjAuMiBcKHd3dy5wZGYtdG9vbHMuY29tXCkpCi9Nb2REYXRlIChEOjIwMjEwOTEwMTUyNTU5KzAyJzAwJykKL0NyZWF0aW9uRGF0ZSAoRDoyMDIxMDkxMDE1MjU1OSswMicwMCcpCi9Qcm9kdWNlciAoMy1IZWlnaHRzXDIyMiBJbWFnZSB0byBQREYgQ29udmVydGVyIFNoZWxsIDYuMTYuMC4yIFwoaHR0cDovL3d3dy5wZGYtdG9vbHMuY29tXCkpCj4+CmVuZG9iagp4cmVmCjAgOQowMDAwMDAwMDAwIDY1NTM1IGYNCjAwMDAwMDQ3NjcgMDAwMDAgbg0KMDAwMDAwNDcxMCAwMDAwMCBuDQowMDAwMDAwNTc4IDAwMDAwIG4NCjAwMDAwMDAwMTUgMDAwMDAgbg0KMDAwMDAwNDU4MSAwMDAwMCBuDQowMDAwMDA0NDU4IDAwMDAwIG4NCjAwMDAwMDQ0NzggMDAwMDAgbg0KMDAwMDAwNDgxNiAwMDAwMCBuDQp0cmFpbGVyCjw8Ci9TaXplIDkKL1Jvb3QgMSAwIFIKL0luZm8gOCAwIFIKL0lEIFs8NUJEN0Q4MDgxNUFBRTE2QTIyMDdDNTA2NkNGRDJBRkQ+IDw1MUNDNzVDNTFBRkU3MzI0QzQ4MUI0NDQ4MkU5MTdCRj5dCj4+CnN0YXJ0eHJlZgo1MDg0CiUlRU9GCg=="})),rtl.module("WEBLib.TMSFNCWXPDFViewer",["System","Classes","WEBLib.Forms","SysUtils","WEBLib.Dialogs","StrUtils","Types","WEBLib.Controls","Web","contnrs","WEBLib.JSON","WEBLib.TMSFNCWebBrowser","WEBLib.TMSFNCCustomWEBControl","WEBLib.TMSFNCGraphics","WEBLib.TMSFNCGraphicsTypes","WEBLib.TMSFNCUtils","WEBLib.TMSFNCTypes","WEBLib.TMSFNCCustomControl","WEBLib.TMSFNCWXPDFViewer.Common","WEBLib.TMSFNCWXCommon"],(function(){"use strict";var t=this;this.$rtti.$MethodVar("TTMSFNCWXPDFViewerLoadError",{procsig:rtl.newTIProcSig([["Sender",pas.System.$rtti.TObject],["ErrorMsg",rtl.string]]),methodkind:0}),this.$rtti.$MethodVar("TTMSFNCWXPDFViewerLoaded",{procsig:rtl.newTIProcSig([["Sender",pas.System.$rtti.TObject],["NumPages",rtl.longint]]),methodkind:0}),this.$rtti.$MethodVar("TTMSFNCWXPDFViewerGenerateThumbnail",{procsig:rtl.newTIProcSig([["Sender",pas.System.$rtti.TObject],["NumPage",rtl.longint],["Base64Img",rtl.string]]),methodkind:0}),this.$rtti.$MethodVar("TTMSFNCWXPDFViewerGenerateImagePage",{procsig:rtl.newTIProcSig([["Sender",pas.System.$rtti.TObject],["ImgWidth",rtl.longint],["ImgHeight",rtl.longint],["Base64ImgPage",rtl.string]]),methodkind:0}),this.$rtti.$MethodVar("TTMSFNCWXPDFViewerHyperlinkClick",{procsig:rtl.newTIProcSig([["Sender",pas.System.$rtti.TObject],["Id",rtl.string],["LinkType",rtl.string],["LinkUrl",rtl.string]]),methodkind:0}),this.$rtti.$MethodVar("TTMSFNCWXPDFViewerFoundSearchText",{procsig:rtl.newTIProcSig([["Sender",pas.System.$rtti.TObject],["PageNumber",rtl.longint],["TextFound",rtl.string]]),methodkind:0}),this.$rtti.$MethodVar("TTMSFNCWXPDFViewerThumbnailProgressEvent",{procsig:rtl.newTIProcSig([["Sender",pas.System.$rtti.TObject],["APosition",rtl.longint],["ASize",rtl.longint]]),methodkind:0}),this.$rtti.$MethodVar("TTMSFNCWXPDFViewerSearchTextFinishEvent",{procsig:rtl.newTIProcSig([["Sender",pas.System.$rtti.TObject],["AFirst",rtl.longint],["ACount",rtl.longint]]),methodkind:0}),this.$rtti.$MethodVar("TTMSFNCWXPDFViewerGetPageTextEvent",{procsig:rtl.newTIProcSig([["Sender",pas.System.$rtti.TObject],["AText",rtl.string]]),methodkind:0}),this.TTMSFNCWXPDFViewerRotationAngle={0:"ANGLE_0",ANGLE_0:0,1:"ANGLE_90",ANGLE_90:1,2:"ANGLE_180",ANGLE_180:2,3:"ANGLE_270",ANGLE_270:3,4:"ANGLE_DEFAULT",ANGLE_DEFAULT:4},this.$rtti.$Enum("TTMSFNCWXPDFViewerRotationAngle",{minvalue:0,maxvalue:4,ordtype:1,enumtype:this.TTMSFNCWXPDFViewerRotationAngle}),rtl.createClass(this,"TTMSFNCWXCustomPDFViewer",pas["WEBLib.TMSFNCCustomWEBControl"].TTMSFNCCustomWEBControl,(function(){this.$init=function(){pas["WEBLib.TMSFNCCustomWEBControl"].TTMSFNCCustomWEBControl.$init.call(this),this.FLibraryLocation=0,this.FPageCount=0,this.FZoom=0,this.FOnLoadError=null,this.FOnLoaded=null,this.FActivePage=0,this.FOnPageRendered=null,this.FOnPageLoaded=null,this.FFileLoaded=!1,this.FFileUrl="",this.FFileName="",this.FFileBase64="",this.FPDFRotationAngle=0,this.FOnGenerateThumbnail=null,this.FOnHyperlinkClick=null,this.FOnFoundSearchText=null,this.FThumbnailSize=0,this.FOnGenerateImagePage=null,this.FOnThumbnailProgress=null,this.FOnViewerInitialized=null,this.FOnNotFoundSearchText=null,this.FOnSearchTextFinished=null,this.FCalculateThumbnails=!1,this.FOnGetPageText=null,this.FOnShowPage=null,this.FPassword=""},this.$final=function(){this.FOnLoadError=void 0,this.FOnLoaded=void 0,this.FOnPageRendered=void 0,this.FOnPageLoaded=void 0,this.FOnGenerateThumbnail=void 0,this.FOnHyperlinkClick=void 0,this.FOnFoundSearchText=void 0,this.FOnGenerateImagePage=void 0,this.FOnThumbnailProgress=void 0,this.FOnViewerInitialized=void 0,this.FOnNotFoundSearchText=void 0,this.FOnSearchTextFinished=void 0,this.FOnGetPageText=void 0,this.FOnShowPage=void 0,pas["WEBLib.TMSFNCCustomWEBControl"].TTMSFNCCustomWEBControl.$final.call(this)},this.SetActivePage=function(t){this.FActivePage!==t&&(this.FActivePage=t,this.ShowPage(this.FActivePage))},this.SetLibraryLocation=function(t){this.FLibraryLocation=t},this.SetZoom=function(t){this.FZoom!==t&&(this.FZoom=t,this.ShowPage(this.FActivePage))},this.FileOk=function(){return""!==this.FFileBase64||""!==this.FFileUrl},this.SetPDFRotationAngle=function(t){this.FPDFRotationAngle!==t&&(this.FPDFRotationAngle=t,this.ShowPage(this.FActivePage))},this.ShowPDFFile=function(){var t,e="",i="",s="",n="",r="";t=pas.SysUtils.IntToStr(this.FActivePage),i=pas.SysUtils.FormatFloat("#.##",this.FZoom),i=pas.StrUtils.ReplaceStr(i,",","."),s="undefined";var o=this.FPDFRotationAngle;0===o?s="0":1===o?s="90":2===o?s="180":3===o&&(s="270"),n=this.FCalculateThumbnails?"true":"false",r="",""!==this.FPassword&&(r=', "'+this.FPassword+'"'),e=""!==this.FFileBase64?this.GetControlID()+'showPDFBase64("'+this.FFileBase64+'",'+t+","+i+","+s+","+n+r+");":this.GetControlID()+'showPDFUrl("'+this.FFileUrl+'",'+t+","+i+","+s+","+n+r+");",this.ExecuteJavaScript(e,null,!1)},this.SetThumbnailSize=function(t){this.FThumbnailSize!==t&&(this.FThumbnailSize=t)},this.DoControlInitialized=function(){pas["WEBLib.TMSFNCCustomWEBControl"].TTMSFNCCustomWEBControl.DoControlInitialized.call(this),null!=this.FOnViewerInitialized&&this.FOnViewerInitialized(this)},this.Initialized=function(){pas["WEBLib.TMSFNCCustomWEBControl"].TTMSFNCCustomWEBControl.Initialized.call(this),this.InitializeHTML()},this.GetCustomCSS=function(){return pas.SysUtils.StringReplace(pas["WEBLib.TMSFNCWXPDFViewer.Common"].PDFVIEWERCSS,pas["WEBLib.TMSFNCWXPDFViewer.Common"].CONTROLID,this.GetControlID(),rtl.createSet(0))},this.GetCustomFunctions=function(){var t=this;function e(e){var i="";return i=pas.SysUtils.StringReplace(e,pas["WEBLib.TMSFNCWXPDFViewer.Common"].CONTROLID,t.GetControlID(),rtl.createSet(0)),i=pas.SysUtils.StringReplace(i,pas["WEBLib.TMSFNCWXPDFViewer.Common"].DATA_OBJECT,t.GetDefaultEventDataObject(),rtl.createSet(0))}return pas.SysUtils.StringReplace(pas["WEBLib.TMSFNCWXPDFViewer.Common"].PDFVIEWERJSVAR,pas["WEBLib.TMSFNCWXPDFViewer.Common"].CONTROLID,this.GetControlID(),rtl.createSet(0))+pas.SysUtils.StringReplace(e(pas["WEBLib.TMSFNCWXPDFViewer.Common"].PDFVIEWERJSMAKETHUMB),pas["WEBLib.TMSFNCWXPDFViewer.Common"].THUMBNAILSIZETAG,pas.SysUtils.IntToStr(this.FThumbnailSize),rtl.createSet(0))+e(pas["WEBLib.TMSFNCWXPDFViewer.Common"].PDFVIEWERJSIMAGEPAGE)+e(pas["WEBLib.TMSFNCWXPDFViewer.Common"].PDFVIEWERJSSEARCHTEXT)+e(pas["WEBLib.TMSFNCWXPDFViewer.Common"].PDFVIEWERJSSHOWPDFURL)+e(pas["WEBLib.TMSFNCWXPDFViewer.Common"].PDFVIEWERJSSHOWPDFBASE64)+e(pas["WEBLib.TMSFNCWXPDFViewer.Common"].PDFVIEWERJSGENERATETHUMBNAILS)+e(pas["WEBLib.TMSFNCWXPDFViewer.Common"].PDFVIEWERJSGENERATETHUMBNAILRANGE)+e(pas["WEBLib.TMSFNCWXPDFViewer.Common"].PDFVIEWERJSGETPAGEJSON)+e(pas["WEBLib.TMSFNCWXPDFViewer.Common"].PDFVIEWERJSSHOWPAGE)},this.GetBody=function(){return pas.SysUtils.StringReplace(pas["WEBLib.TMSFNCWXPDFViewer.Common"].PDFVIEWERHTMLCODE,pas["WEBLib.TMSFNCWXPDFViewer.Common"].CONTROLID,this.GetControlID(),rtl.createSet(0))},this.GetWaitInitVariables=function(){return'  var e = document.getElementById("'+this.GetID()+'");'+pas["WEBLib.TMSFNCWXPDFViewer.Common"].LB+'  var e2 = document.getElementById("'+this.GetControlID()+'_pdf-main-container");'},this.GetWaitInitCondition=function(){return"!window.pdfjsLib || !window.pdfjsViewer || !window.$ || !e || !e2 || !window.$('#"+this.GetControlID()+"_pdf-main-container')"},this.GetWaitInitElseStatement=function(){var t="",e="",i="",s="";return this.IsDesigning()&&(this.FFileLoaded=!1,e=pas.SysUtils.IntToStr(1),i=pas.SysUtils.FormatFloat("#.##",1),i=pas.StrUtils.ReplaceStr(i,",","."),s="0",t="    "+this.GetControlID()+'showPDFBase64("'+pas["WEBLib.TMSFNCWXPDFViewer.Common"].DEFAULT_PDF_BASE64+'",'+e+","+i+","+s+");"),t},this.LoadLinks=function(t){pas["WEBLib.TMSFNCCustomWEBControl"].TTMSFNCCustomWEBControl.LoadLinks.apply(this,arguments),t.Add$1(pas["WEBLib.TMSFNCCustomWEBControl"].TTMSFNCCustomWEBControlLink.$create("CreateScript",["https://code.jquery.com/jquery-3.5.1.min.js","","","",!1,!1])),t.Add$1(pas["WEBLib.TMSFNCCustomWEBControl"].TTMSFNCCustomWEBControlLink.$create("CreateScript",["https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.10.377/pdf.min.js","","","",!1,!1])),t.Add$1(pas["WEBLib.TMSFNCCustomWEBControl"].TTMSFNCCustomWEBControlLink.$create("CreateScript",["https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.10.377/pdf.worker.min.js","","","",!1,!1])),t.Add$1(pas["WEBLib.TMSFNCCustomWEBControl"].TTMSFNCCustomWEBControlLink.$create("CreateScript",["https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.10.377/pdf_viewer.min.js","","","",!1,!1]))},this.CallCustomEvent=function(t){if(pas["WEBLib.TMSFNCCustomWEBControl"].TTMSFNCCustomWEBControl.CallCustomEvent.apply(this,arguments),""!==t.FEventName){var e=pas.StrUtils.IndexStr(t.FEventName,[pas["WEBLib.TMSFNCWXPDFViewer.Common"].ONPAGELOADEDEVENT,pas["WEBLib.TMSFNCWXPDFViewer.Common"].ONPDFLOADEDEVENT,pas["WEBLib.TMSFNCWXPDFViewer.Common"].ONPAGERENDEREDEVENT,pas["WEBLib.TMSFNCWXPDFViewer.Common"].ONPDFLOADERROREVENT,pas["WEBLib.TMSFNCWXPDFViewer.Common"].ONGENERATETHUMBNAILEVENT,pas["WEBLib.TMSFNCWXPDFViewer.Common"].ONHYPERLINKCLICKEVENT,pas["WEBLib.TMSFNCWXPDFViewer.Common"].ONMOUSEDOWNEVENT,pas["WEBLib.TMSFNCWXPDFViewer.Common"].ONMOUSEUPEVENT,"ONFOUNDSEARCHTEXT","ONGENERATEIMAGEPAGE","ONTHUMBNAILPROGRESSEVENT","ONNOTFOUNDSEARCHTEXT","ONFOUNDALLSEARCHTEXT","ONBROWSERSCROLLEVENT","ONPDFPAGEGETSTRING","ONMOUSEMOVEEVENT"]);0===e?this.DoHandlePageLoadEvent():1===e?this.DoHandlePDFLoadEvent(t.FCustomData):2===e?this.DoHandlePageRenderEvent():3===e?this.DoHandleLoadErrorEvent(t.FCustomData):4===e?this.DoHandleGenerateThumbnail(t.FCustomData):5===e?this.DoHandleHyperlinkClick(t.FCustomData):6===e?this.DoHandleMouseDownEvent(t.FCustomData):7===e?this.DoHandleMouseUpEvent(t.FCustomData):8===e?this.DoHandleFoundSearchText(t.FCustomData):9===e?this.DoHandleGenerateImagePage(t.FCustomData):10===e?this.DoHandleThumbnailProgress(t.FCustomData):11===e?this.DoHandleNotFoundSearchText():12===e?this.DoHandleSearchTextFinished(t.FCustomData):13===e?this.DoHandleBrowserScroll(t.FCustomData):14===e?this.DoHandleGetPageString(t.FCustomData):15===e&&this.DoHandleMouseMoveEvent(t.FCustomData)}},this.DoHandlePageLoadEvent=function(){null!=this.FOnPageLoaded&&this.FOnPageLoaded(this)},this.DoHandlePDFLoadEvent=function(t){var e=null,i=null;e=pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.ParseJSON(t);try{i=rtl.as(e,pas["WEBLib.JSON"].TJSONArray),this.FFileLoaded=!0,this.FPageCount=pas.SysUtils.StrToInt(i.GetItem$1(0).GetStrValue()),null!=this.FOnLoaded&&this.FOnLoaded(this,this.FPageCount)}finally{e=rtl.freeLoc(e)}},this.DoHandlePageRenderEvent=function(){null!=this.FOnPageRendered&&this.FOnPageRendered(this)},this.DoHandleLoadErrorEvent=function(t){var e=null,i=null;e=pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.ParseJSON(t);try{i=rtl.as(e,pas["WEBLib.JSON"].TJSONArray),null!=this.FOnLoadError&&this.FOnLoadError(this,i.GetItem$1(0).GetStrValue())}finally{e=rtl.freeLoc(e)}},this.DoHandleGenerateThumbnail=function(t){var e=null,i=null;e=pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.ParseJSON(t);try{i=rtl.as(e,pas["WEBLib.JSON"].TJSONArray),null!=this.FOnGenerateThumbnail&&this.FOnGenerateThumbnail(this,pas.SysUtils.StrToInt(i.GetItem$1(0).GetStrValue()),i.GetItem$1(1).GetStrValue())}finally{e=rtl.freeLoc(e)}},this.DoHandleHyperlinkClick=function(t){var e=null,i=null;e=pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.ParseJSON(t);try{i=rtl.as(e,pas["WEBLib.JSON"].TJSONArray),null!=this.FOnHyperlinkClick&&this.FOnHyperlinkClick(this,i.GetItem$1(0).GetStrValue(),i.GetItem$1(1).GetStrValue(),i.GetItem$1(2).GetStrValue())}finally{e=rtl.freeLoc(e)}},this.DoHandleMouseDownEvent=function(t){var e=null,i=null,s=0,n={},r=0,o=0;e=pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.ParseJSON(t);try{i=rtl.as(e,pas["WEBLib.JSON"].TJSONArray),s=0;var a=pas.SysUtils.StrToInt(i.GetItem$1(0).GetStrValue());0===a?s=0:1===a?s=2:2===a&&(s=1),n=rtl.createSet(0,1,2),"false"===i.GetItem$1(1).GetStrValue()&&(n=rtl.excludeSet(n,0)),"false"===i.GetItem$1(2).GetStrValue()&&(n=rtl.excludeSet(n,1)),"false"===i.GetItem$1(3).GetStrValue()&&(n=rtl.excludeSet(n,2)),r=pas["WEBLib.TMSFNCWXCommon"].JSStringToFloat(i.GetItem$1(4).GetStrValue()),o=pas["WEBLib.TMSFNCWXCommon"].JSStringToFloat(i.GetItem$1(5).GetStrValue()),null!=this.FOnMouseDown&&this.FOnMouseDown(this,s,rtl.refSet(n),pas.System.Trunc(r),pas.System.Trunc(o))}finally{e=rtl.freeLoc(e)}},this.DoHandleMouseMoveEvent=function(t){var e=null,i=null,s={},n=0,r=0;e=pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.ParseJSON(t);try{i=rtl.as(e,pas["WEBLib.JSON"].TJSONArray),s=rtl.createSet(0,1,2),"false"===i.GetItem$1(1).GetStrValue()&&(s=rtl.excludeSet(s,0)),"false"===i.GetItem$1(2).GetStrValue()&&(s=rtl.excludeSet(s,1)),"false"===i.GetItem$1(3).GetStrValue()&&(s=rtl.excludeSet(s,2)),n=pas["WEBLib.TMSFNCWXCommon"].JSStringToFloat(i.GetItem$1(4).GetStrValue()),r=pas["WEBLib.TMSFNCWXCommon"].JSStringToFloat(i.GetItem$1(5).GetStrValue()),null!=this.FOnMouseMove&&this.FOnMouseMove(this,rtl.refSet(s),pas.System.Trunc(n),pas.System.Trunc(r))}finally{e=rtl.freeLoc(e)}},this.DoHandleMouseUpEvent=function(t){var e=null,i=null,s=0,n={},r=0,o=0;e=pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.ParseJSON(t);try{i=rtl.as(e,pas["WEBLib.JSON"].TJSONArray),s=0;var a=pas.SysUtils.StrToInt(i.GetItem$1(0).GetStrValue());0===a?s=0:1===a?s=2:2===a&&(s=1),n=rtl.createSet(0,1,2),"false"===i.GetItem$1(1).GetStrValue()&&(n=rtl.excludeSet(n,0)),"false"===i.GetItem$1(2).GetStrValue()&&(n=rtl.excludeSet(n,1)),"false"===i.GetItem$1(3).GetStrValue()&&(n=rtl.excludeSet(n,2)),r=pas["WEBLib.TMSFNCWXCommon"].JSStringToFloat(i.GetItem$1(4).GetStrValue()),o=pas["WEBLib.TMSFNCWXCommon"].JSStringToFloat(i.GetItem$1(5).GetStrValue()),null!=this.FOnMouseUp&&this.FOnMouseUp(this,s,rtl.refSet(n),pas.System.Trunc(r),pas.System.Trunc(o))}finally{e=rtl.freeLoc(e)}},this.DoHandleFoundSearchText=function(t){var e=null,i=null;e=pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.ParseJSON(t);try{i=rtl.as(e,pas["WEBLib.JSON"].TJSONArray),null!=this.FOnFoundSearchText&&this.FOnFoundSearchText(this,pas.SysUtils.StrToInt(i.GetItem$1(0).GetStrValue()),i.GetItem$1(1).GetStrValue())}finally{e=rtl.freeLoc(e)}},this.DoHandleGenerateImagePage=function(t){var e=null,i=null;e=pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.ParseJSON(t);try{i=rtl.as(e,pas["WEBLib.JSON"].TJSONArray),null!=this.FOnGenerateImagePage&&this.FOnGenerateImagePage(this,pas.SysUtils.StrToInt(i.GetItem$1(0).GetStrValue()),pas.SysUtils.StrToInt(i.GetItem$1(1).GetStrValue()),i.GetItem$1(2).GetStrValue())}finally{e=rtl.freeLoc(e)}},this.DoHandleThumbnailProgress=function(t){var e=null,i=null;e=pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.ParseJSON(t);try{i=rtl.as(e,pas["WEBLib.JSON"].TJSONArray),null!=this.FOnThumbnailProgress&&this.FOnThumbnailProgress(this,pas.SysUtils.StrToInt(i.GetItem$1(0).GetStrValue()),pas.SysUtils.StrToInt(i.GetItem$1(1).GetStrValue()))}finally{e=rtl.freeLoc(e)}},this.DoHandleNotFoundSearchText=function(){null!=this.FOnNotFoundSearchText&&this.FOnNotFoundSearchText(this)},this.DoHandleSearchTextFinished=function(t){var e=null,i=null;e=pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.ParseJSON(t);try{i=rtl.as(e,pas["WEBLib.JSON"].TJSONArray),null!=this.FOnSearchTextFinished&&this.FOnSearchTextFinished(this,pas.SysUtils.StrToInt(i.GetItem$1(1).GetStrValue()),pas.SysUtils.StrToInt(i.GetItem$1(0).GetStrValue()))}finally{e=rtl.freeLoc(e)}},this.DoHandleBrowserScroll=function(t){var e=null,i=null,s={},n=!1;e=pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.ParseJSON(t);try{i=rtl.as(e,pas["WEBLib.JSON"].TJSONArray),s={},pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.IsJSONTrue(i.GetItem$1(0))&&(s=rtl.unionSet(s,rtl.createSet(1))),pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.IsJSONTrue(i.GetItem$1(1))&&(s=rtl.unionSet(s,rtl.createSet(2))),pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.IsJSONTrue(i.GetItem$1(2))&&(s=rtl.unionSet(s,rtl.createSet(0))),pas.SysUtils.StrToInt(i.GetItem$1(3).GetStrValue())>0?null!=this.FOnMouseWheelUp&&this.FOnMouseWheelUp(this,rtl.refSet(s),pas.Types.TPoint.$clone(pas.Types.Point(0,0)),{get:function(){return n},set:function(t){n=t}}):null!=this.FOnMouseWheelDown&&this.FOnMouseWheelDown(this,rtl.refSet(s),pas.Types.TPoint.$clone(pas.Types.Point(0,0)),{get:function(){return n},set:function(t){n=t}})}finally{e=rtl.freeLoc(e)}},this.DoHandleGetPageString=function(t){var e=null,i=null,s=null;e=pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.ParseJSON(t);try{if("true"===(i=rtl.as(e,pas["WEBLib.JSON"].TJSONArray)).GetItem$1(1).GetStrValue()){s=pas.Classes.TStringList.$create("Create$1");try{s.SetTextStr(i.GetItem$1(0).GetStrValue()),s.SaveToFile(i.GetItem$1(2).GetStrValue())}finally{s=rtl.freeLoc(s)}}else null!=this.FOnGetPageText&&this.FOnGetPageText(this,i.GetItem$1(0).GetStrValue())}finally{e=rtl.freeLoc(e)}},this.Create$1=function(t){return this.FActivePage=1,this.FPageCount=0,this.FZoom=1,this.FFileUrl="",this.FFileName="",this.FFileBase64="",this.FThumbnailSize=96,this.FFileLoaded=!1,this.FPDFRotationAngle=0,this.FLibraryLocation=1,this.FCalculateThumbnails=!1,pas["WEBLib.TMSFNCCustomWEBControl"].TTMSFNCCustomWEBControl.Create$1.apply(this,arguments),this},this.Destroy=function(){pas["WEBLib.TMSFNCCustomWEBControl"].TTMSFNCCustomWEBControl.Destroy.call(this)},this.NextPage=function(){this.FileOk()&&this.FFileLoaded&&this.FActivePage<this.FPageCount&&(this.FActivePage+=1,this.ShowPage(this.FActivePage))},this.PreviousPage=function(){this.FileOk()&&this.FFileLoaded&&this.FActivePage>1&&(this.FActivePage-=1,this.ShowPage(this.FActivePage))},this.ShowPage=function(t){var e="",i="",s="";if(this.FileOk()&&this.FFileLoaded&&t<=this.FPageCount&&t>0){this.FActivePage=t,e=pas.SysUtils.FormatFloat("#.##",this.FZoom),e=pas.StrUtils.ReplaceStr(e,",","."),i="undefined";var n=this.FPDFRotationAngle;0===n?i="0":1===n?i="90":2===n?i="180":3===n&&(i="270"),s=this.GetControlID()+"showPage("+pas.SysUtils.IntToStr(this.FActivePage)+","+e+","+i+");",this.ExecuteJavaScript(s,null,!1),null!=this.FOnShowPage&&this.FOnShowPage(this,this.FActivePage)}},this.ZoomIn=function(){this.FileOk()&&this.FFileLoaded&&(this.FZoom=this.FZoom+.25,this.ShowPage(this.FActivePage))},this.ZoomOut=function(){this.FileOk()&&this.FFileLoaded&&this.FZoom>.25&&(this.FZoom=this.FZoom-.25,this.ShowPage(this.FActivePage))},this.TurnAngleLeft=function(){if(this.FileOk()&&this.FFileLoaded){var t=this.FPDFRotationAngle;0===t?this.FPDFRotationAngle=3:1===t?this.FPDFRotationAngle=0:2===t?this.FPDFRotationAngle=1:3===t&&(this.FPDFRotationAngle=2),this.ShowPage(this.FActivePage)}},this.TurnAngleRight=function(){if(this.FileOk()&&this.FFileLoaded){var t=this.FPDFRotationAngle;0===t?this.FPDFRotationAngle=1:1===t?this.FPDFRotationAngle=2:2===t?this.FPDFRotationAngle=3:3===t&&(this.FPDFRotationAngle=0),this.ShowPage(this.FActivePage)}},this.GenerateThumbnails=function(){this.FCalculateThumbnails&&this.FControlInitialized&&this.ExecuteJavaScript(this.GetControlID()+"generateThumbnails()",null,!1)},this.LoadFromBase64=function(t,e,i,s){""!==t&&(this.FFileLoaded=!1,this.FFileName="",this.FFileBase64=t,this.FFileUrl="",this.FActivePage=e,this.FZoom=this.FZoom,this.FPDFRotationAngle=s,this.ShowPDFFile())},rtl.addIntf(this,pas["WEBLib.TMSFNCPersistence"].ITMSFNCPersistence),rtl.addIntf(this,pas.System.IUnknown)})),rtl.createClass(this,"TTMSFNCWXPDFViewer",this.TTMSFNCWXCustomPDFViewer,(function(){rtl.addIntf(this,pas["WEBLib.TMSFNCPersistence"].ITMSFNCPersistence),rtl.addIntf(this,pas.System.IUnknown);var e=this.$rtti;e.addProperty("CalculateThumbnails",0,rtl.boolean,"FCalculateThumbnails","FCalculateThumbnails",{Default:!1}),e.addProperty("PageCount",0,rtl.longint,"FPageCount",""),e.addProperty("LibraryLocation",2,pas["WEBLib.TMSFNCWXCommon"].$rtti.TTMSFNCWXLibraryLocation,"FLibraryLocation","SetLibraryLocation",{Default:pas["WEBLib.TMSFNCWXCommon"].TTMSFNCWXLibraryLocation.llOnline}),e.addProperty("ActivePage",2,rtl.longint,"FActivePage","SetActivePage",{Default:1}),e.addProperty("Zoom",2,rtl.double,"FZoom","SetZoom"),e.addProperty("PDFRotationAngle",2,t.$rtti.TTMSFNCWXPDFViewerRotationAngle,"FPDFRotationAngle","SetPDFRotationAngle",{Default:t.TTMSFNCWXPDFViewerRotationAngle.ANGLE_0}),e.addProperty("ThumbnailSize",2,rtl.longint,"FThumbnailSize","SetThumbnailSize",{Default:96}),e.addProperty("Password",0,rtl.string,"FPassword","FPassword"),e.addProperty("OnLoaded",0,t.$rtti.TTMSFNCWXPDFViewerLoaded,"FOnLoaded","FOnLoaded"),e.addProperty("OnPageLoaded",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnPageLoaded","FOnPageLoaded"),e.addProperty("OnPageRendered",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnPageRendered","FOnPageRendered"),e.addProperty("OnLoadError",0,t.$rtti.TTMSFNCWXPDFViewerLoadError,"FOnLoadError","FOnLoadError"),e.addProperty("OnGenerateThumbnail",0,t.$rtti.TTMSFNCWXPDFViewerGenerateThumbnail,"FOnGenerateThumbnail","FOnGenerateThumbnail"),e.addProperty("OnGenerateImagePage",0,t.$rtti.TTMSFNCWXPDFViewerGenerateImagePage,"FOnGenerateImagePage","FOnGenerateImagePage"),e.addProperty("OnHyperlinkClick",0,t.$rtti.TTMSFNCWXPDFViewerHyperlinkClick,"FOnHyperlinkClick","FOnHyperlinkClick"),e.addProperty("OnFoundSearchText",0,t.$rtti.TTMSFNCWXPDFViewerFoundSearchText,"FOnFoundSearchText","FOnFoundSearchText"),e.addProperty("OnThumbnailProgress",0,t.$rtti.TTMSFNCWXPDFViewerThumbnailProgressEvent,"FOnThumbnailProgress","FOnThumbnailProgress"),e.addProperty("OnViewerInitialized",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnViewerInitialized","FOnViewerInitialized"),e.addProperty("OnNotFoundSearchText",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnNotFoundSearchText","FOnNotFoundSearchText"),e.addProperty("OnSearchTextFinished",0,t.$rtti.TTMSFNCWXPDFViewerSearchTextFinishEvent,"FOnSearchTextFinished","FOnSearchTextFinished"),e.addProperty("OnGetPageText",0,t.$rtti.TTMSFNCWXPDFViewerGetPageTextEvent,"FOnGetPageText","FOnGetPageText"),e.attr=[pas.Classes.ComponentPlatformsAttribute,"Create$1",[0]]}))})),rtl.module("WEBLib.TMSFNCWXPDFToolbar",["System","Classes","WEBLib.TMSFNCTypes","WEBLib.TMSFNCGraphics","WEBLib.TMSFNCGraphicsTypes","WEBLib.TMSFNCCustomControl","WEBLib.TMSFNCCustomScrollControl","WEBLib.TMSFNCUtils","WEBLib.Controls","WEBLib.TMSFNCCustomList","WEBLib.TMSFNCWXPDFViewer"],(function(){"use strict";var t=this,e=t.$impl;this.MAJ_VER=1,this.MIN_VER=0,this.REL_VER=0,this.BLD_VER=0,this.TTMSFNCWXPDFToolbarItemRole={0:"trOpenFile",trOpenFile:0,1:"trFirstPage",trFirstPage:1,2:"trPreviousPage",trPreviousPage:2,3:"trNextPage",trNextPage:3,4:"trLastPage",trLastPage:4,5:"trZoomIn",trZoomIn:5,6:"trZoomOut",trZoomOut:6,7:"trRotateLeft",trRotateLeft:7,8:"trRotateRight",trRotateRight:8,9:"trCustom",trCustom:9},this.$rtti.$Enum("TTMSFNCWXPDFToolbarItemRole",{minvalue:0,maxvalue:9,ordtype:1,enumtype:this.TTMSFNCWXPDFToolbarItemRole}),rtl.createClass(this,"TTMSFNCWXPDFToolbarItem",pas["WEBLib.TMSFNCCustomList"].TTMSFNCCustomListItem,(function(){this.$init=function(){pas["WEBLib.TMSFNCCustomList"].TTMSFNCCustomListItem.$init.call(this),this.FOnCustomEvent=null,this.FBitmap=null,this.FPDFRole=0},this.$final=function(){this.FOnCustomEvent=void 0,this.FBitmap=void 0,pas["WEBLib.TMSFNCCustomList"].TTMSFNCCustomListItem.$final.call(this)},this.SetBitmap=function(t){this.FBitmap.Assign(t),this.FOwner.InvalidateItems()},this.Create$1=function(t){return pas["WEBLib.TMSFNCCustomList"].TTMSFNCCustomListItem.Create$1.apply(this,arguments),this.FBitmap=pas["WEBLib.TMSFNCTypes"].TTMSFNCBitmap.$create("Create$3"),this.FPDFRole=0,this.SetCanSelect(!1),this.SetCanDeselect(!1),this},this.Destroy=function(){rtl.free(this,"FBitmap"),pas["WEBLib.TMSFNCCustomList"].TTMSFNCCustomListItem.Destroy.call(this)},this.Assign=function(e){pas["WEBLib.TMSFNCCustomList"].TTMSFNCCustomListItem.Assign.apply(this,arguments),t.TTMSFNCWXPDFToolbarItem.isPrototypeOf(e)&&(this.FPDFRole=rtl.as(e,t.TTMSFNCWXPDFToolbarItem).FPDFRole,this.FBitmap.Assign(rtl.as(e,t.TTMSFNCWXPDFToolbarItem).FBitmap))};var e=this.$rtti;e.addProperty("Text",2,rtl.string,"FText","SetText"),e.addProperty("HorizontalTextAlign",2,pas["WEBLib.TMSFNCGraphicsTypes"].$rtti.TTMSFNCGraphicsTextAlign,"FHorizontalTextAlign","SetHorizontalTextAlign",{Default:pas["WEBLib.TMSFNCGraphicsTypes"].TTMSFNCGraphicsTextAlign.gtaCenter}),e.addProperty("VerticalTextAlign",2,pas["WEBLib.TMSFNCGraphicsTypes"].$rtti.TTMSFNCGraphicsTextAlign,"FVerticalTextAlign","SetVerticalTextAlign",{Default:pas["WEBLib.TMSFNCGraphicsTypes"].TTMSFNCGraphicsTextAlign.gtaCenter}),e.addProperty("Bitmap",2,pas["WEBLib.TMSFNCTypes"].$rtti.TTMSFNCBitmap,"FBitmap","SetBitmap"),e.addProperty("PDFRole",0,t.$rtti.TTMSFNCWXPDFToolbarItemRole,"FPDFRole","FPDFRole",{Default:t.TTMSFNCWXPDFToolbarItemRole.trOpenFile}),e.addProperty("OnCustomEvent",0,pas["WEBLib.Controls"].$rtti.TNotifyEvent,"FOnCustomEvent","FOnCustomEvent")})),rtl.createClass(this,"TTMSFNCWXPDFToolbarItems",pas["WEBLib.TMSFNCCustomList"].TTMSFNCCustomListItems,(function(){this.GetItem$2=function(t){return this.GetItem$1(t)},this.CreateItemClass=function(){return t.TTMSFNCWXPDFToolbarItem},this.Add$2=function(){return pas["WEBLib.TMSFNCCustomList"].TTMSFNCCustomListItems.Add$1.call(this)}})),rtl.createClass(this,"TTMSFNCWXCustomPDFToolbar",pas["WEBLib.TMSFNCCustomList"].TTMSFNCCustomList,(function(){this.$init=function(){pas["WEBLib.TMSFNCCustomList"].TTMSFNCCustomList.$init.call(this),this.FOldLoaded=null,this.FOldShowPage=null,this.FViewer=null},this.$final=function(){this.FOldLoaded=void 0,this.FOldShowPage=void 0,this.FViewer=void 0,pas["WEBLib.TMSFNCCustomList"].TTMSFNCCustomList.$final.call(this)},this.SetViewer=function(t){this.FViewer!==t&&(this.FViewer=t,null!=this.FViewer?(this.FOldLoaded=this.FViewer.FOnLoaded,this.FViewer.FOnLoaded=rtl.createCallback(this,"DoPDFLoaded"),this.FOldShowPage=this.FViewer.FOnShowPage,this.FViewer.FOnShowPage=rtl.createCallback(this,"DoPDFShowPage"),this.EnableDefaultButtons()):(this.FOldLoaded=null,this.FOldShowPage=null,this.DisableAllButtons()))},this.GetItems=function(){return rtl.as(this.FItems,t.TTMSFNCWXPDFToolbarItems)},this.SetItems$1=function(t){this.GetItems().Assign(t)},this.SetOrientation=function(t){var e=0,i=0;i=this.FOrientation,e=1===this.FOrientation?this.FAppearance.FItemWidth:this.FAppearance.FItemHeight,pas["WEBLib.TMSFNCCustomList"].TTMSFNCCustomList.SetOrientation.apply(this,arguments),i!==t&&(1===t?(this.FAppearance.SetItemWidth(e),this.SetColumns(100)):(this.FAppearance.SetItemHeight(e),this.SetRows(100)))},this.GetVersion=function(){return this.$class.GetVersionNumber(1,0,0,0)},this.CreateItemsCollection=function(){return t.TTMSFNCWXPDFToolbarItems.$create("Create$3",[this])},this.DoItemDrawContent=function(e,i,s){var n=null;if(pas["WEBLib.TMSFNCCustomList"].TTMSFNCCustomList.DoItemDrawContent.apply(this,arguments),pas["WEBLib.TMSFNCTypes"].InflateRectEx(i,this.ScalePaintValue(-5),this.ScalePaintValue(-5)),pas["WEBLib.TMSFNCTypes"].IsBitmapEmpty(rtl.as(s,t.TTMSFNCWXPDFToolbarItem).FBitmap)){n=null;var r=rtl.as(s,t.TTMSFNCWXPDFToolbarItem).FPDFRole;if(0===r?n=pas["WEBLib.TMSFNCTypes"].TTMSFNCBitmap.CreateFromResource$1(t.TMSFNCWXPDFTOOLBAROPEN,pas["WEBLib.TMSFNCTypes"].HInstance()):1===r?n=pas["WEBLib.TMSFNCTypes"].TTMSFNCBitmap.CreateFromResource$1(t.TMSFNCWXPDFTOOLBARFIRST,pas["WEBLib.TMSFNCTypes"].HInstance()):2===r?n=pas["WEBLib.TMSFNCTypes"].TTMSFNCBitmap.CreateFromResource$1(t.TMSFNCWXPDFTOOLBARPREV,pas["WEBLib.TMSFNCTypes"].HInstance()):3===r?n=pas["WEBLib.TMSFNCTypes"].TTMSFNCBitmap.CreateFromResource$1(t.TMSFNCWXPDFTOOLBARNEXT,pas["WEBLib.TMSFNCTypes"].HInstance()):4===r?n=pas["WEBLib.TMSFNCTypes"].TTMSFNCBitmap.CreateFromResource$1(t.TMSFNCWXPDFTOOLBARLAST,pas["WEBLib.TMSFNCTypes"].HInstance()):5===r?n=pas["WEBLib.TMSFNCTypes"].TTMSFNCBitmap.CreateFromResource$1(t.TMSFNCWXPDFTOOLBARZOOMIN,pas["WEBLib.TMSFNCTypes"].HInstance()):6===r?n=pas["WEBLib.TMSFNCTypes"].TTMSFNCBitmap.CreateFromResource$1(t.TMSFNCWXPDFTOOLBARZOOMOUT,pas["WEBLib.TMSFNCTypes"].HInstance()):7===r?n=pas["WEBLib.TMSFNCTypes"].TTMSFNCBitmap.CreateFromResource$1(t.TMSFNCWXPDFTOOLBARROTLEFT,pas["WEBLib.TMSFNCTypes"].HInstance()):8===r&&(n=pas["WEBLib.TMSFNCTypes"].TTMSFNCBitmap.CreateFromResource$1(t.TMSFNCWXPDFTOOLBARROTRIGHT,pas["WEBLib.TMSFNCTypes"].HInstance())),null!=n)try{e.DrawBitmap$1(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(i),n,!0,!1,!0,!1)}finally{n=rtl.freeLoc(n)}}else e.DrawBitmap$1(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(i),rtl.as(s,t.TTMSFNCWXPDFToolbarItem).FBitmap,!0,!1,!0,!1)},this.DoItemClick=function(e){var i=null;if(pas["WEBLib.TMSFNCCustomList"].TTMSFNCCustomList.DoItemClick.apply(this,arguments),null!=this.FViewer){var s=rtl.as(this.GetItems().GetItem$2(e),t.TTMSFNCWXPDFToolbarItem).FPDFRole;0===s?((i=pas["WEBLib.Dialogs"].TWebOpenDialog.$create("Create$1",[this])).FAccept=".pdf,application/pdf",i.FOnChange=rtl.createCallback(this,"DoDialogPDFChanged"),i.FOnFileAsBase64=rtl.createCallback(this,"DoDialogFileBase64"),i.Execute()):1===s?this.FViewer.ShowPage(1):2===s?this.FViewer.PreviousPage():3===s?this.FViewer.NextPage():4===s?this.FViewer.ShowPage(this.FViewer.FPageCount):5===s?this.FViewer.ZoomIn():6===s?this.FViewer.ZoomOut():7===s?this.FViewer.TurnAngleLeft():8===s?this.FViewer.TurnAngleRight():9===s&&null!=rtl.as(this.GetItems().GetItem$2(e),t.TTMSFNCWXPDFToolbarItem).FOnCustomEvent&&rtl.as(this.GetItems().GetItem$2(e),t.TTMSFNCWXPDFToolbarItem).FOnCustomEvent(rtl.as(this.GetItems().GetItem$2(e),t.TTMSFNCWXPDFToolbarItem))}},this.Notification=function(t,e){pas["WEBLib.Menus"].TWebCustomControl.Notification.apply(this,arguments),1===e&&t===this.FViewer&&(this.FViewer=null)},this.DoDialogPDFChanged=function(t){rtl.as(t,pas["WEBLib.Dialogs"].TWebOpenDialog).FFiles.GetItem$1(0).GetFileAsBase64()},this.DoDialogFileBase64=function(t,e,i){this.FViewer.LoadFromBase64(i,1,1,4)},this.DoPDFLoaded=function(t,e){this.EnableDefaultButtons(),null!=this.FOldLoaded&&this.FOldLoaded(t,e)},this.DoPDFShowPage=function(t,e){var i={};1===e?(i=rtl.createSet(1,2),e===this.FViewer.FPageCount&&(i=rtl.unionSet(i,rtl.createSet(4,3))),this.ChangeButtonState(!1,rtl.refSet(i)),e!==this.FViewer.FPageCount&&this.ChangeButtonState(!0,rtl.createSet(4,3))):e===this.FViewer.FPageCount?(this.ChangeButtonState(!1,rtl.createSet(4,3)),this.ChangeButtonState(!0,rtl.createSet(2,1))):this.ChangeButtonState(!0,rtl.createSet(1,2,4,3)),null!=this.FOldShowPage&&this.FOldShowPage(t,e)},this.ChangeButtonState=function(e,i){var s=0;this.BeginUpdate();for(var n=0,r=this.GetItems().GetCount()-1;n<=r;n++)s=n,rtl.as(this.GetItems().GetItem$2(s),t.TTMSFNCWXPDFToolbarItem).FPDFRole in i&&this.GetItems().GetItem$2(s).SetEnabled(e);this.EndUpdate()},this.DisableAllButtons=function(){var t=0;this.BeginUpdate();for(var e=0,i=this.GetItems().GetCount()-1;e<=i;e++)t=e,this.GetItems().GetItem$2(t).SetEnabled(!1);this.EndUpdate()},this.EnableDefaultButtons=function(){var e=0;this.BeginUpdate();for(var i=0,s=this.GetItems().GetCount()-1;i<=s;i++)e=i,rtl.as(this.GetItems().GetItem$2(e),t.TTMSFNCWXPDFToolbarItem).FPDFRole in rtl.createSet(1,2)||rtl.as(this.GetItems().GetItem$2(e),t.TTMSFNCWXPDFToolbarItem).FPDFRole in rtl.createSet(4,3)&&this.FViewer.FPageCount<2||rtl.as(this.GetItems().GetItem$2(e),t.TTMSFNCWXPDFToolbarItem).FPDFRole in rtl.createSet(5,6,7,8)&&this.FViewer.FPageCount<1?this.GetItems().GetItem$2(e).SetEnabled(!1):this.GetItems().GetItem$2(e).SetEnabled(!0);this.EndUpdate()},this.Create$1=function(t){return pas["WEBLib.TMSFNCCustomList"].TTMSFNCCustomList.Create$1.apply(this,arguments),this.SetHeight(40),this.SetWidth(500),this.FAppearance.SetItemWidth(35),1===this.FOrientation?this.SetColumns(100):this.SetRows(100),4 in this.FComponentState&&this.InitializeDefault(),this},this.InitializeDefault=function(){var e=this;function i(i){var s=null;(s=rtl.as(e.GetItems().Add$2(),t.TTMSFNCWXPDFToolbarItem)).FPDFRole=i,s.SetCanSelect(!1),s.SetEnabled(!1)}this.BeginUpdate(),i(0),i(1),i(2),i(3),i(4),i(6),i(5),i(7),i(8),null!=this.FViewer&&this.FViewer.FPageCount>0&&this.EnableDefaultButtons(),this.EndUpdate()},rtl.addIntf(this,pas["WEBLib.TMSFNCPersistence"].ITMSFNCPersistence),rtl.addIntf(this,pas.System.IUnknown)})),rtl.createClass(this,"TTMSFNCWXPDFToolbar",this.TTMSFNCWXCustomPDFToolbar,(function(){this.RegisterRuntimeClasses=function(){pas["WEBLib.TMSFNCCustomControl"].TTMSFNCCustomControl.RegisterRuntimeClasses.call(this),pas.Classes.RegisterClass(t.TTMSFNCWXPDFToolbar)},rtl.addIntf(this,pas["WEBLib.TMSFNCPersistence"].ITMSFNCPersistence),rtl.addIntf(this,pas.System.IUnknown);var e=this.$rtti;e.addProperty("AntiAliasing",2,rtl.boolean,"FAntiAliasing","SetAntiAliasing",{Default:!0}),e.addProperty("Appearance",2,pas["WEBLib.TMSFNCCustomList"].$rtti.TTMSFNCCustomListAppearance,"FAppearance","SetAppearance"),e.addProperty("Items",3,t.$rtti.TTMSFNCWXPDFToolbarItems,"GetItems","SetItems$1"),e.addProperty("Viewer",2,pas["WEBLib.TMSFNCWXPDFViewer"].$rtti.TTMSFNCWXPDFViewer,"FViewer","SetViewer"),e.addProperty("Orientation",2,pas["WEBLib.TMSFNCCustomList"].$rtti.TTMSFNCCustomListOrientation,"FOrientation","SetOrientation",{Default:pas["WEBLib.TMSFNCCustomList"].TTMSFNCCustomListOrientation.toHorizontal}),e.addProperty("Version",1,rtl.string,"GetVersion",""),e.addProperty("OnItemSelected",0,pas["WEBLib.TMSFNCCustomList"].$rtti.TTMSFNCCustomListItemSelected,"FOnItemSelected","FOnItemSelected"),e.addProperty("OnItemClick",0,pas["WEBLib.TMSFNCCustomList"].$rtti.TTMSFNCCustomListItemClick,"FOnItemClick","FOnItemClick"),e.addProperty("OnItemBeforeDrawBackground",0,pas["WEBLib.TMSFNCCustomList"].$rtti.TTMSFNCCustomListItemBeforeDrawBackground,"FOnItemBeforeDrawBackground","FOnItemBeforeDrawBackground"),e.addProperty("OnItemAfterDrawBackground",0,pas["WEBLib.TMSFNCCustomList"].$rtti.TTMSFNCCustomListItemAfterDrawBackground,"FOnItemAfterDrawBackground","FOnItemAfterDrawBackground"),e.addProperty("OnItemBeforeDrawContent",0,pas["WEBLib.TMSFNCCustomList"].$rtti.TTMSFNCCustomListItemBeforeDrawContent,"FOnItemBeforeDrawContent","FOnItemBeforeDrawContent"),e.addProperty("OnItemAfterDrawContent",0,pas["WEBLib.TMSFNCCustomList"].$rtti.TTMSFNCCustomListItemAfterDrawContent,"FOnItemAfterDrawContent","FOnItemAfterDrawContent"),e.addProperty("OnBeforeDraw",0,pas["WEBLib.TMSFNCCustomList"].$rtti.TTMSFNCCustomListBeforeDraw,"FOnBeforeDraw$1","FOnBeforeDraw$1"),e.addProperty("OnAfterDraw",0,pas["WEBLib.TMSFNCCustomList"].$rtti.TTMSFNCCustomListAfterDraw,"FOnAfterDraw$1","FOnAfterDraw$1"),e.addProperty("OnItemBeforeDrawText",0,pas["WEBLib.TMSFNCCustomList"].$rtti.TTMSFNCCustomListItemBeforeDrawText,"FOnItemBeforeDrawText","FOnItemBeforeDrawText"),e.addProperty("OnItemAfterDrawText",0,pas["WEBLib.TMSFNCCustomList"].$rtti.TTMSFNCCustomListItemAfterDrawText,"FOnItemAfterDrawText","FOnItemAfterDrawText"),e.attr=[pas.Classes.ComponentPlatformsAttribute,"Create$1",[0]]})),this.TMSFNCWXPDFTOOLBAROPEN="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMiIgaGVpZ2h0PSIzMiIgdmlld0JveD0iMCAwIDMyIDMyIj48ZGVmcz48c3R5bGU+LmNscy0xe2ZpbGw6IzNhM2EzODt9PC9zdHlsZT48L2RlZnM+PHRpdGxlPkZvbGRlci1PcGVuPC90aXRsZT48ZyBpZD0iSWNvbiI+PHBhdGggY2xhc3M9ImNscy0xIiBkPSJNMjgsMTJWOEgxNUwxMiw1SDFWMjdIMjJMMzIsMTJaTTIsNmg5LjU5bDIuNywyLjcxLjMuMjlIMjd2M0gxMUwyLDI1LjVaTTIxLjQ2LDI2SDIuODdsOC42Ny0xM0gzMC4xM1oiLz48L2c+PC9zdmc+",this.TMSFNCWXPDFTOOLBARFIRST="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMiIgaGVpZ2h0PSIzMiIgdmlld0JveD0iMCAwIDMyIDMyIj48ZGVmcz48c3R5bGU+LmNscy0xe2ZpbGw6IzNhM2EzODt9PC9zdHlsZT48L2RlZnM+PHRpdGxlPm1tLVJld2luZDwvdGl0bGU+PGcgaWQ9Ikljb24iPjxwb2x5Z29uIGNsYXNzPSJjbHMtMSIgcG9pbnRzPSIyMiA5LjEyIDMxIDIuMjggMzEgMzAuNzIgMjIgMjMuODQgMjIgOS4xMiIvPjxwb2x5Z29uIGNsYXNzPSJjbHMtMSIgcG9pbnRzPSIyLjQgMTYuNSAyMSAzMC43MiAyMSAyLjI4IDIuOTUgMTYuMDEgMi40IDE2LjUiLz48L2c+PC9zdmc+",this.TMSFNCWXPDFTOOLBARPREV="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMiIgaGVpZ2h0PSIzMiIgdmlld0JveD0iMCAwIDMyIDMyIj48ZGVmcz48c3R5bGU+LmNscy0xe2ZpbGw6IzNhM2EzODt9PC9zdHlsZT48L2RlZnM+PHRpdGxlPm1tLUJhY2s8L3RpdGxlPjxnIGlkPSJJY29uIj48cG9seWdvbiBjbGFzcz0iY2xzLTEiIHBvaW50cz0iNi40IDE2LjUgMjUgMzAuNzIgMjUgMi4yOCA2Ljk1IDE2LjAxIDYuNCAxNi41Ii8+PC9nPjwvc3ZnPg==",this.TMSFNCWXPDFTOOLBARNEXT="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMiIgaGVpZ2h0PSIzMiIgdmlld0JveD0iMCAwIDMyIDMyIj48ZGVmcz48c3R5bGU+LmNscy0xe2ZpbGw6IzNhM2EzODt9PC9zdHlsZT48L2RlZnM+PHRpdGxlPm1tLUZvcndhcmQ8L3RpdGxlPjxnIGlkPSJJY29uIj48cG9seWdvbiBjbGFzcz0iY2xzLTEiIHBvaW50cz0iMjUuNiAxNi41IDcgMzAuNzIgNyAyLjI4IDI1LjA1IDE2LjAxIDI1LjYgMTYuNSIvPjwvZz48L3N2Zz4=",this.TMSFNCWXPDFTOOLBARLAST="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMiIgaGVpZ2h0PSIzMiIgdmlld0JveD0iMCAwIDMyIDMyIj48ZGVmcz48c3R5bGU+LmNscy0xe2ZpbGw6IzNhM2EzODt9PC9zdHlsZT48L2RlZnM+PHRpdGxlPm1tLUZhc3QtRm9yd2FyZDwvdGl0bGU+PGcgaWQ9Ikljb24iPjxwb2x5Z29uIGNsYXNzPSJjbHMtMSIgcG9pbnRzPSIxMSA5LjEyIDIgMi4yOCAyIDMwLjcyIDExIDIzLjg0IDExIDkuMTIiLz48cG9seWdvbiBjbGFzcz0iY2xzLTEiIHBvaW50cz0iMzAuNiAxNi41IDEyIDMwLjcyIDEyIDIuMjggMzAuMDUgMTYuMDEgMzAuNiAxNi41Ii8+PC9nPjwvc3ZnPg==",this.TMSFNCWXPDFTOOLBARROTLEFT="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMiIgaGVpZ2h0PSIzMiIgdmlld0JveD0iMCAwIDMyIDMyIj48ZGVmcz48c3R5bGU+LmNscy0xe2ZpbGw6IzNhM2EzODt9PC9zdHlsZT48L2RlZnM+PHRpdGxlPlJlcGVhdDwvdGl0bGU+PGcgaWQ9Ikljb24iIHRyYW5zZm9ybT0ncm90YXRlKDI3MCAxNiAxNiknPjxwYXRoIGNsYXNzPSJjbHMtMSIgZD0iTTE0LDEuMTV2MWExNCwxNCwwLDEsMCw3LC43OFYxMkgyMFYxSDMxVjJMMjEuMzQsMkExNSwxNSwwLDEsMSwxNCwxLjE1WiIvPjwvZz48L3N2Zz4=",this.TMSFNCWXPDFTOOLBARROTRIGHT="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMiIgaGVpZ2h0PSIzMiIgdmlld0JveD0iMCAwIDMyIDMyIj48ZGVmcz48c3R5bGU+LmNscy0xe2ZpbGw6IzNhM2EzODt9PC9zdHlsZT48L2RlZnM+PHRpdGxlPlJlZnJlc2g8L3RpdGxlPjxnIGlkPSJJY29uIiB0cmFuc2Zvcm09J3JvdGF0ZSg5MCAxNiAxNiknPjxwYXRoIGNsYXNzPSJjbHMtMSIgZD0iTTE4LDEuMTV2MWExNCwxNCwwLDEsMS03LC43OFYxMmgxVjFIMVYybDkuNjYsMEExNSwxNSwwLDEsMCwxOCwxLjE1WiIvPjwvZz48L3N2Zz4=",this.TMSFNCWXPDFTOOLBARZOOMIN="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMiIgaGVpZ2h0PSIzMiIgdmlld0JveD0iMCAwIDMyIDMyIj48ZGVmcz48c3R5bGU+LmNscy0xe2ZpbGw6IzNhM2EzODt9PC9zdHlsZT48L2RlZnM+PHRpdGxlPlpvb20tSW48L3RpdGxlPjxnIGlkPSJJY29uIj48cGF0aCBjbGFzcz0iY2xzLTEiIGQ9Ik0xLDEyYTExLDExLDAsMCwwLDE3LjIzLDkuMDZsOS4zNiw5LjM1YTIsMiwwLDAsMCwyLjgyLTIuODJsLTkuMzUtOS4zNkExMSwxMSwwLDEsMCwxLDEyWm0xLDBBMTAsMTAsMCwxLDEsMTIsMjIsMTAsMTAsMCwwLDEsMiwxMloiLz48cG9seWdvbiBjbGFzcz0iY2xzLTEiIHBvaW50cz0iMTMuNDQgMTEgMTMuNDQgNCAxMyA0IDEyLjA4IDQgMTIgNCAxMiAxMSA1IDExIDUgMTEuMDggNSAxMiA1IDEyLjQ0IDEyIDEyLjQ0IDEyIDE5IDEyLjA4IDE5IDEzIDE5IDEzLjQ0IDE5IDEzLjQ0IDEyLjQ0IDIwIDEyLjQ0IDIwIDEyIDIwIDExLjA4IDIwIDExIDEzLjQ0IDExIi8+PC9nPjwvc3ZnPg==",this.TMSFNCWXPDFTOOLBARZOOMOUT="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMiIgaGVpZ2h0PSIzMiIgdmlld0JveD0iMCAwIDMyIDMyIj48ZGVmcz48c3R5bGU+LmNscy0xe2ZpbGw6IzNhM2EzODt9PC9zdHlsZT48L2RlZnM+PHRpdGxlPlpvb20tT3V0PC90aXRsZT48ZyBpZD0iSWNvbiI+PHBhdGggY2xhc3M9ImNscy0xIiBkPSJNMSwxMmExMSwxMSwwLDAsMCwxNy4yMyw5LjA2bDkuMzYsOS4zNWEyLDIsMCwwLDAsMi44Mi0yLjgybC05LjM1LTkuMzZBMTEsMTEsMCwxLDAsMSwxMlptMSwwQTEwLDEwLDAsMSwxLDEyLDIyLDEwLDEwLDAsMCwxLDIsMTJaIi8+PHJlY3QgY2xhc3M9ImNscy0xIiB4PSI2IiB5PSIxMSIgd2lkdGg9IjEzIiBoZWlnaHQ9IjEuNSIvPjwvZz48L3N2Zz4=",t.$implcode=function(){rtl.createClass(e,"TTMSFNCWXPDFViewerOpen",pas["WEBLib.TMSFNCWXPDFViewer"].TTMSFNCWXPDFViewer,(function(){rtl.addIntf(this,pas["WEBLib.TMSFNCPersistence"].ITMSFNCPersistence),rtl.addIntf(this,pas.System.IUnknown)})),rtl.createClass(e,"TTMSFNCCustomListOpen",pas["WEBLib.TMSFNCCustomList"].TTMSFNCCustomList,(function(){rtl.addIntf(this,pas["WEBLib.TMSFNCPersistence"].ITMSFNCPersistence),rtl.addIntf(this,pas.System.IUnknown)}))},t.$init=function(){pas["WEBLib.TMSFNCTypes"].TTMSFNCBitmap.CreateFromResource(t.TMSFNCWXPDFTOOLBAROPEN),pas["WEBLib.TMSFNCTypes"].TTMSFNCBitmap.CreateFromResource(t.TMSFNCWXPDFTOOLBARFIRST),pas["WEBLib.TMSFNCTypes"].TTMSFNCBitmap.CreateFromResource(t.TMSFNCWXPDFTOOLBARPREV),pas["WEBLib.TMSFNCTypes"].TTMSFNCBitmap.CreateFromResource(t.TMSFNCWXPDFTOOLBARNEXT),pas["WEBLib.TMSFNCTypes"].TTMSFNCBitmap.CreateFromResource(t.TMSFNCWXPDFTOOLBARLAST),pas["WEBLib.TMSFNCTypes"].TTMSFNCBitmap.CreateFromResource(t.TMSFNCWXPDFTOOLBARZOOMOUT),pas["WEBLib.TMSFNCTypes"].TTMSFNCBitmap.CreateFromResource(t.TMSFNCWXPDFTOOLBARZOOMIN),pas["WEBLib.TMSFNCTypes"].TTMSFNCBitmap.CreateFromResource(t.TMSFNCWXPDFTOOLBARROTLEFT),pas["WEBLib.TMSFNCTypes"].TTMSFNCBitmap.CreateFromResource(t.TMSFNCWXPDFTOOLBARROTRIGHT)}}),["WEBLib.Dialogs"]),rtl.module("WEBLib.TMSFNCWXPDFThumbnailList",["System","Classes","WEBLib.TMSFNCTypes","WEBLib.TMSFNCGraphics","WEBLib.TMSFNCGraphicsTypes","WEBLib.TMSFNCCustomControl","WEBLib.TMSFNCCustomScrollControl","WEBLib.Controls","WEBLib.TMSFNCCustomList","WEBLib.TMSFNCWXPDFViewer"],(function(){"use strict";var t=this,e=t.$impl;this.MAJ_VER=1,this.MIN_VER=0,this.REL_VER=0,this.BLD_VER=0,rtl.createClass(this,"TTMSFNCWXThumbnailListItem",pas["WEBLib.TMSFNCCustomList"].TTMSFNCCustomListItem,(function(){this.$init=function(){pas["WEBLib.TMSFNCCustomList"].TTMSFNCCustomListItem.$init.call(this),this.FBitmap=null},this.$final=function(){this.FBitmap=void 0,pas["WEBLib.TMSFNCCustomList"].TTMSFNCCustomListItem.$final.call(this)},this.Destroy=function(){null!=this.FBitmap&&rtl.free(this,"FBitmap"),pas["WEBLib.TMSFNCCustomList"].TTMSFNCCustomListItem.Destroy.call(this)}})),rtl.createClass(this,"TTMSFNCWXThumbnailListItems",pas["WEBLib.TMSFNCCustomList"].TTMSFNCCustomListItems,(function(){this.CreateItemClass=function(){return t.TTMSFNCWXThumbnailListItem}})),rtl.createClass(this,"TTMSFNCWXCustomThumbnailList",pas["WEBLib.TMSFNCCustomList"].TTMSFNCCustomList,(function(){this.$init=function(){pas["WEBLib.TMSFNCCustomList"].TTMSFNCCustomList.$init.call(this),this.FNumPages=0,this.FOldCalculate=!1,this.FOldNotification=null,this.FOldLoaded=null,this.FOldShowPage=null,this.FOldThumbsProgress=null,this.FViewer=null},this.$final=function(){this.FOldNotification=void 0,this.FOldLoaded=void 0,this.FOldShowPage=void 0,this.FOldThumbsProgress=void 0,this.FViewer=void 0,pas["WEBLib.TMSFNCCustomList"].TTMSFNCCustomList.$final.call(this)},this.SetViewer=function(t){this.FViewer!==t&&(this.FViewer=t,null!=this.FViewer?(this.FViewer.SetThumbnailSize(150),this.FOldCalculate=this.FViewer.FCalculateThumbnails,this.FViewer.FCalculateThumbnails=!0,this.FOldNotification=this.FViewer.FOnGenerateThumbnail,this.FViewer.FOnGenerateThumbnail=rtl.createCallback(this,"DoGenerateThumbnail"),this.FOldLoaded=this.FViewer.FOnLoaded,this.FViewer.FOnLoaded=rtl.createCallback(this,"DoPDFLoaded"),this.FOldThumbsProgress=this.FViewer.FOnThumbnailProgress,this.FViewer.FOnThumbnailProgress=rtl.createCallback(this,"DoThumbnailProgress"),this.FOldShowPage=this.FViewer.FOnShowPage,this.FViewer.FOnShowPage=rtl.createCallback(this,"DoPDFNavigatePage")):(this.FOldLoaded=null,this.FOldNotification=null,this.FOldThumbsProgress=null)),this.InitializeDefault()},this.GetVersion=function(){return this.$class.GetVersionNumber(1,0,0,0)},this.CreateItemsCollection=function(){return t.TTMSFNCWXThumbnailListItems.$create("Create$3",[this])},this.GetTotalContentHeight=function(){var t=0,e=pas["WEBLib.TMSFNCCustomList"].TTMSFNCCustomListDisplayItem.$new();return t=pas["WEBLib.TMSFNCCustomScrollControl"].TTMSFNCCustomScrollControl.GetTotalContentHeight.call(this),null!=this.FDisplayList&&this.FDisplayList.GetCount()>0&&0===this.FOrientation&&(e.$assign(this.FDisplayList.GetItem(this.FDisplayList.GetCount()-1)),t=e.AbsRect.Bottom+this.FAppearance.FVerticalSpacing),t},this.GetTotalContentWidth=function(){var t=0,e=pas["WEBLib.TMSFNCCustomList"].TTMSFNCCustomListDisplayItem.$new();return t=pas["WEBLib.TMSFNCCustomScrollControl"].TTMSFNCCustomScrollControl.GetTotalContentWidth.call(this),null!=this.FDisplayList&&this.FDisplayList.GetCount()>0&&1===this.FOrientation&&(e.$assign(this.FDisplayList.GetItem(this.FDisplayList.GetCount()-1)),t=e.AbsRect.Right+this.FAppearance.FHorizontalSpacing),t},this.DoItemDrawContent=function(e,i,s){pas["WEBLib.TMSFNCCustomList"].TTMSFNCCustomList.DoItemDrawContent.apply(this,arguments),null!=rtl.as(s,t.TTMSFNCWXThumbnailListItem).FBitmap&&e.DrawBitmap$1(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(i),rtl.as(s,t.TTMSFNCWXThumbnailListItem).FBitmap,!0,!1,!0,!1)},this.DoBeforeDraw$1=function(t,e,i){pas["WEBLib.TMSFNCCustomList"].TTMSFNCCustomList.DoBeforeDraw$1.apply(this,arguments)},this.DoItemSelected=function(t){null!=this.FViewer&&t>=0&&t<=this.FItems.GetCount()-1&&this.FViewer.ShowPage(t+1),pas["WEBLib.TMSFNCCustomList"].TTMSFNCCustomList.DoItemSelected.apply(this,arguments)},this.Notification=function(t,e){pas["WEBLib.Menus"].TWebCustomControl.Notification.apply(this,arguments),1===e&&t===this.FViewer&&(this.FViewer=null)},this.DoGenerateThumbnail=function(e,i,s){var n=null;null!=this.FOldNotification&&this.FOldNotification(this,i,s),(n=rtl.as(this.FItems.GetItem$1(i-1),t.TTMSFNCWXThumbnailListItem)).FBitmap=pas["WEBLib.TMSFNCTypes"].TTMSFNCBitmap.$create("Create$3"),n.FBitmap.SetURL(s)},this.DoPDFLoaded=function(t,e){null!=this.FOldLoaded&&this.FOldLoaded(this,e),this.FNumPages=e,this.Rebuild()},this.DoPDFNavigatePage=function(t,e){null!=this.FOldShowPage&&this.FOldShowPage(t,e),this.ProcessSelection(e-1)},this.DoThumbnailProgress=function(t,e,i){e===i&&this.Invalidate()},this.Create$1=function(t){var e=0;if(pas["WEBLib.TMSFNCCustomList"].TTMSFNCCustomList.Create$1.apply(this,arguments),this.FProcessTouchScrolling=!0,this.FTouchScrolling=!0,this.SetOrientation(0),this.FAppearance.SetTextFormat("Page %d"),this.FNumPages=0,this.SetWidth(200),this.SetHeight(500),null!=t&&pas["WEBLib.Forms"].TCustomForm.isPrototypeOf(t))for(var i=0,s=t.GetComponentCount()-1;i<=s;i++)if(e=i,pas["WEBLib.TMSFNCWXPDFViewer"].TTMSFNCWXPDFViewer.isPrototypeOf(t.GetComponent(e))){this.SetViewer(rtl.as(t.GetComponent(e),pas["WEBLib.TMSFNCWXPDFViewer"].TTMSFNCWXPDFViewer));break}return this.InitializeDefault(),this},this.Rebuild=function(){var e=0,i=null;this.BeginUpdate(),this.FItems.Clear();for(var s=0,n=this.FNumPages-1;s<=n;s++)e=s,(i=rtl.as(this.FItems.Add$1(),t.TTMSFNCWXThumbnailListItem)).SetText(pas.SysUtils.Format(this.FAppearance.FTextFormat,pas.System.VarRecs(0,e+1))),i.SetVerticalTextAlign(2);4 in this.FComponentState||(0===this.FOrientation?this.SetRows(this.FNumPages):this.SetColumns(this.FNumPages),0===this.FOrientation?this.FAppearance.SetItemHeight(this.GetWidth()/this.FColumns-this.FAppearance.FHorizontalSpacing*this.FColumns):this.FAppearance.SetItemWidth(this.GetHeight()/this.FRows-this.FAppearance.FVerticalSpacing*this.FRows)),this.EndUpdate()},this.InitializeDefault=function(){null!=this.FViewer?(this.FNumPages=this.FViewer.FPageCount,this.Rebuild(),this.FViewer.GenerateThumbnails()):this.Rebuild()},rtl.addIntf(this,pas["WEBLib.TMSFNCPersistence"].ITMSFNCPersistence),rtl.addIntf(this,pas.System.IUnknown)})),rtl.createClass(this,"TTMSFNCWXPDFThumbnailList",this.TTMSFNCWXCustomThumbnailList,(function(){this.RegisterRuntimeClasses=function(){pas["WEBLib.TMSFNCCustomControl"].TTMSFNCCustomControl.RegisterRuntimeClasses.call(this),pas.Classes.RegisterClass(t.TTMSFNCWXPDFThumbnailList)},rtl.addIntf(this,pas["WEBLib.TMSFNCPersistence"].ITMSFNCPersistence),rtl.addIntf(this,pas.System.IUnknown);var e=this.$rtti;e.addProperty("AntiAliasing",2,rtl.boolean,"FAntiAliasing","SetAntiAliasing",{Default:!0}),e.addProperty("Appearance",2,pas["WEBLib.TMSFNCCustomList"].$rtti.TTMSFNCCustomListAppearance,"FAppearance","SetAppearance"),e.addProperty("Viewer",2,pas["WEBLib.TMSFNCWXPDFViewer"].$rtti.TTMSFNCWXPDFViewer,"FViewer","SetViewer"),e.addProperty("Orientation",2,pas["WEBLib.TMSFNCCustomList"].$rtti.TTMSFNCCustomListOrientation,"FOrientation","SetOrientation",{Default:pas["WEBLib.TMSFNCCustomList"].TTMSFNCCustomListOrientation.toVertical}),e.addProperty("Version",1,rtl.string,"GetVersion",""),e.addProperty("OnItemSelected",0,pas["WEBLib.TMSFNCCustomList"].$rtti.TTMSFNCCustomListItemSelected,"FOnItemSelected","FOnItemSelected"),e.addProperty("OnItemClick",0,pas["WEBLib.TMSFNCCustomList"].$rtti.TTMSFNCCustomListItemClick,"FOnItemClick","FOnItemClick"),e.addProperty("OnItemBeforeDrawBackground",0,pas["WEBLib.TMSFNCCustomList"].$rtti.TTMSFNCCustomListItemBeforeDrawBackground,"FOnItemBeforeDrawBackground","FOnItemBeforeDrawBackground"),e.addProperty("OnItemAfterDrawBackground",0,pas["WEBLib.TMSFNCCustomList"].$rtti.TTMSFNCCustomListItemAfterDrawBackground,"FOnItemAfterDrawBackground","FOnItemAfterDrawBackground"),e.addProperty("OnItemBeforeDrawContent",0,pas["WEBLib.TMSFNCCustomList"].$rtti.TTMSFNCCustomListItemBeforeDrawContent,"FOnItemBeforeDrawContent","FOnItemBeforeDrawContent"),e.addProperty("OnItemAfterDrawContent",0,pas["WEBLib.TMSFNCCustomList"].$rtti.TTMSFNCCustomListItemAfterDrawContent,"FOnItemAfterDrawContent","FOnItemAfterDrawContent"),e.addProperty("OnBeforeDraw",0,pas["WEBLib.TMSFNCCustomList"].$rtti.TTMSFNCCustomListBeforeDraw,"FOnBeforeDraw$1","FOnBeforeDraw$1"),e.addProperty("OnAfterDraw",0,pas["WEBLib.TMSFNCCustomList"].$rtti.TTMSFNCCustomListAfterDraw,"FOnAfterDraw$1","FOnAfterDraw$1"),e.addProperty("OnItemBeforeDrawText",0,pas["WEBLib.TMSFNCCustomList"].$rtti.TTMSFNCCustomListItemBeforeDrawText,"FOnItemBeforeDrawText","FOnItemBeforeDrawText"),e.addProperty("OnItemAfterDrawText",0,pas["WEBLib.TMSFNCCustomList"].$rtti.TTMSFNCCustomListItemAfterDrawText,"FOnItemAfterDrawText","FOnItemAfterDrawText"),e.attr=[pas.Classes.ComponentPlatformsAttribute,"Create$1",[0]]})),t.$implcode=function(){rtl.createClass(e,"TTMSFNCWXPDFViewerOpen",pas["WEBLib.TMSFNCWXPDFViewer"].TTMSFNCWXPDFViewer,(function(){rtl.addIntf(this,pas["WEBLib.TMSFNCPersistence"].ITMSFNCPersistence),rtl.addIntf(this,pas.System.IUnknown)}))},t.$init=function(){pas.Classes.RegisterClass(t.TTMSFNCWXPDFThumbnailList)}}),["SysUtils","WEBLib.Graphics","Math","WEBLib.Forms","WEBLib.TMSFNCUtils","WEBLib.TMSFNCStyles"]),rtl.module("WEBLib.TMSFNCGraphicsPDFEngine",["System","Classes","WEBLib.TMSFNCGraphics","WEBLib.TMSFNCGraphicsTypes","WEBLib.TMSFNCPDFLib","WEBLib.Graphics","WEBLib.TMSFNCTypes","Types"],(function(){"use strict";var t=this.$impl;rtl.createClass(this,"TTMSFNCGraphicsPDFEngine",pas["WEBLib.TMSFNCGraphics"].TTMSFNCGraphics,(function(){this.$init=function(){pas["WEBLib.TMSFNCGraphics"].TTMSFNCGraphics.$init.call(this),this.FCanvas=null,this.FPDFLib=null,this.FMatrix=pas["WEBLib.TMSFNCGraphicsTypes"].TTMSFNCGraphicsMatrix.$new()},this.$final=function(){this.FCanvas=void 0,rtl.setIntfP(this,"FPDFLib",null),this.FMatrix=void 0,pas["WEBLib.TMSFNCGraphics"].TTMSFNCGraphics.$final.call(this)},this.Create$2=function(t){var e=null;try{this.FMatrix.$assign(pas["WEBLib.TMSFNCGraphicsTypes"].MatrixIdentity()),this.FCanvas=pas["WEBLib.Graphics"].TBitmap.$create("Create$3"),this.FCanvas.SetWidth(1),this.FCanvas.SetHeight(1),pas["WEBLib.TMSFNCGraphics"].TTMSFNCGraphics.Create$1.call(this,this.FCanvas.GetCanvas(),!1),this.$class.SetDefaultGraphicColors(),rtl.setIntfP(this,"FPDFLib",t),null!=this.FPDFLib&&null!=(e=rtl.setIntfL(e,this.FPDFLib.GetPDFGraphicsLib(),!0))&&(this.FFill.Assign(e.GetFill()),this.FStroke.Assign(e.GetStroke()),this.FFont.SetName(e.GetFont().FName),this.FFont.SetSize(Math.round(e.GetFont().FSize)),this.FFont.SetStyle(rtl.refSet(e.GetFont().FStyle)),this.FFont.SetColor(e.GetFont().FColor))}finally{rtl._Release(e)}return this},this.Create$3=function(t){var e=rtl.createIntfRefs();try{this.Create$2(e.ref(1,t.PDFLib()))}finally{e.free()}return this},this.Destroy=function(){null!=this.FCanvas&&rtl.free(this,"FCanvas"),rtl.setIntfP(this,"FPDFLib",null),pas["WEBLib.TMSFNCGraphics"].TTMSFNCGraphics.Destroy.call(this)},this.SaveState=function(t){var e=null,i=rtl.createIntfRefs();try{e=null,null!=this.FPDFLib&&i.ref(1,this.FPDFLib.GetPDFGraphicsLib()).DrawSaveState()}finally{i.free()}return e},this.CalculateText=function(t,e,i,s){var n=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),r=rtl.createIntfRefs();try{if(n.$assign(e),null==this.FPDFLib)return n;""!==t?s&&(pas.System.Pos("</",t)>0||pas.System.Pos("/>",t)>0||pas.System.Pos("<BR>",pas.SysUtils.UpperCase(t))>0)?n.$assign(pas["WEBLib.TMSFNCGraphics"].TTMSFNCGraphics.CalculateText.call(this,t,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(e),i,s)):i?n.$assign(r.ref(1,this.FPDFLib.GetPDFGraphicsLib()).CalculateText$1(t,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(e))):n.$assign(r.ref(2,this.FPDFLib.GetPDFGraphicsLib()).CalculateText$1(t,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(pas["WEBLib.TMSFNCTypes"].RectF(0,0,1e4,1e4)))):(n.Bottom=n.Top,n.Right=n.Left)}finally{r.free()}return n},this.SetTextAngle=function(t,e){var i=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),s=0,n=pas["WEBLib.TMSFNCTypes"].TPointF.$new(),r=pas["WEBLib.TMSFNCGraphicsTypes"].TTMSFNCGraphicsMatrix.$new(),o=0,a=rtl.createIntfRefs();try{i.$assign(t),0!==e&&null!=this.FPDFLib&&(n.$assign(pas["WEBLib.TMSFNCTypes"].CenterPointEx(i)),s=pas.Math.DegToRad(-e),o=this.FPDFLib.GetMediaBox().Bottom-this.FPDFLib.GetMediaBox().Top-n.Y,r.$assign(pas["WEBLib.TMSFNCGraphicsTypes"].MatrixCreateTranslation(-n.X,-o)),r.$assign(pas["WEBLib.TMSFNCGraphicsTypes"].MatrixMultiply(r,pas["WEBLib.TMSFNCGraphicsTypes"].MatrixCreateRotation(s))),e>0?r.$assign(pas["WEBLib.TMSFNCGraphicsTypes"].MatrixMultiply(r,pas["WEBLib.TMSFNCGraphicsTypes"].MatrixCreateTranslation(n.X-(t.Bottom-t.Top)/2,+o))):r.$assign(pas["WEBLib.TMSFNCGraphicsTypes"].MatrixMultiply(r,pas["WEBLib.TMSFNCGraphicsTypes"].MatrixCreateTranslation(n.X,+o))),a.ref(1,this.FPDFLib.GetPDFGraphicsLib()).DrawSetTransform$1(pas["WEBLib.TMSFNCGraphicsTypes"].TTMSFNCGraphicsMatrix.$clone(r)))}finally{a.free()}return i},this.SetFill=function(t){var e=rtl.createIntfRefs();try{null!=this.FPDFLib&&e.ref(1,this.FPDFLib.GetPDFGraphicsLib()).GetFill().Assign(t)}finally{e.free()}},this.SetStroke=function(t){var e=rtl.createIntfRefs();try{null!=this.FPDFLib&&e.ref(1,this.FPDFLib.GetPDFGraphicsLib()).GetStroke().Assign(t)}finally{e.free()}},this.RestoreState=function(t,e){var i=rtl.createIntfRefs();try{null!=this.FPDFLib&&i.ref(1,this.FPDFLib.GetPDFGraphicsLib()).DrawRestoreState()}finally{i.free()}},this.SetFont=function(t){var e=rtl.createIntfRefs();try{null!=this.FPDFLib&&(e.ref(1,this.FPDFLib.GetPDFGraphicsLib()).GetFont().BeginUpdate(),e.ref(2,this.FPDFLib.GetPDFGraphicsLib()).GetFont().SetName(t.FName),e.ref(3,this.FPDFLib.GetPDFGraphicsLib()).GetFont().SetColor(t.FColor),e.ref(4,this.FPDFLib.GetPDFGraphicsLib()).GetFont().SetStyle(rtl.refSet(t.FStyle)),e.ref(5,this.FPDFLib.GetPDFGraphicsLib()).GetFont().SetSize(t.FSize),e.ref(6,this.FPDFLib.GetPDFGraphicsLib()).GetFont().EndUpdate())}finally{e.free()}},this.ClipRect=function(t){var e=rtl.createIntfRefs();try{null!=this.FPDFLib&&(e.ref(1,this.FPDFLib.GetPDFGraphicsLib()).DrawPathAddRectangle(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(t)),e.ref(2,this.FPDFLib.GetPDFGraphicsLib()).DrawPathBeginClip(),e.ref(3,this.FPDFLib.GetPDFGraphicsLib()).DrawPathBegin())}finally{e.free()}},this.DrawLine$1=function(t,e,i,s){var n=rtl.createIntfRefs();try{null!=this.FPDFLib&&-1!==this.FStroke.FColor&&0!==this.FStroke.FKind&&n.ref(1,this.FPDFLib.GetPDFGraphicsLib()).DrawLine(pas["WEBLib.TMSFNCTypes"].TPointF.$clone(t),pas["WEBLib.TMSFNCTypes"].TPointF.$clone(e))}finally{n.free()}},this.DrawEllipse=function(t,e,i,s,n){var r=rtl.createIntfRefs();try{null!=this.FPDFLib&&(-1!==this.FFill.FColor&&0!==this.FFill.FKind||3===this.FFill.FKind||-1!==this.FStroke.FColor&&0!==this.FStroke.FKind)&&r.ref(1,this.FPDFLib.GetPDFGraphicsLib()).DrawEllipse(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(pas["WEBLib.TMSFNCTypes"].RectF(t,e,i,s)))}finally{r.free()}},this.DrawRectangle=function(t,e,i,s,n){var r=rtl.createIntfRefs();try{null!=this.FPDFLib&&(-1!==this.FFill.FColor&&0!==this.FFill.FKind||3===this.FFill.FKind||-1!==this.FStroke.FColor&&0!==this.FStroke.FKind)&&r.ref(1,this.FPDFLib.GetPDFGraphicsLib()).DrawRectangle(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(pas["WEBLib.TMSFNCTypes"].RectF(t,e,i,s)))}finally{r.free()}},this.DrawRectangle$1=function(t,e,i,s,n,r){var o=rtl.createIntfRefs();try{null!=this.FPDFLib&&(-1!==this.FFill.FColor&&0!==this.FFill.FKind||3===this.FFill.FKind||-1!==this.FStroke.FColor&&0!==this.FStroke.FKind)&&o.ref(1,this.FPDFLib.GetPDFGraphicsLib()).DrawRectangle(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(pas["WEBLib.TMSFNCTypes"].RectF(t,e,i,s)))}finally{o.free()}},this.DrawBitmap=function(t,e,i,s,n,r,o,a,l){var h=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),F=null,p=rtl.createIntfRefs();try{if(null==n||null==this.FPDFLib)return;if(h.$assign(pas["WEBLib.TMSFNCTypes"].RectF(t,e,i,s)),h.$assign(this.GetBitmapDrawRectangle$1(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(h),n,r,o,a,l)),!0){F=pas["WEBLib.TMSFNCTypes"].TTMSFNCBitmap.$create("Create$3");try{F.Assign(n),p.ref(1,this.FPDFLib.GetPDFGraphicsLib()).DrawImage$2(F,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(h),o,r,0,1,a)}finally{F=rtl.freeLoc(F)}}}finally{p.free()}},this.DrawText$5=function(t,e,i,s,n,r,o,a,l,h,F,p,c,u,d,S){var C="",T=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),m=pas["WEBLib.TMSFNCTypes"].TRectF.$new(),g=0,f=0,b=rtl.createIntfRefs();try{if(C="",null==this.FPDFLib)return C;if(p>-1&&t.Bottom-t.Top<p&&(t.Bottom=t.Top+p),F>-1&&t.Right-t.Left<F&&(t.Right=t.Left+F),pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.IsHTML(e)&&c)C=pas["WEBLib.TMSFNCGraphics"].TTMSFNCGraphics.DrawText$5.apply(this,arguments);else if(!u){C="",r?T.$assign(b.ref(1,this.FPDFLib.GetPDFGraphicsLib()).DrawText$3(e,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(t),!0)):T.$assign(b.ref(2,this.FPDFLib.GetPDFGraphicsLib()).DrawText$2(e,pas["WEBLib.TMSFNCTypes"].TPointF.$clone(pas["WEBLib.TMSFNCTypes"].PointF(t.Left,t.Top)),!0)),T.Right=T.Right+2;var y=o;if(0===y){var L=a;0===L?T.$assign(pas["WEBLib.TMSFNCTypes"].RectF(t.Left+(t.Right-t.Left-(T.Right-T.Left))/2,t.Top+(t.Bottom-t.Top-(T.Bottom-T.Top))/2,t.Left+(t.Right-t.Left-(T.Right-T.Left))/2+(T.Right-T.Left),t.Top+(t.Bottom-t.Top-(T.Bottom-T.Top))/2+(T.Bottom-T.Top))):1===L?T.$assign(pas["WEBLib.TMSFNCTypes"].RectF(t.Left+(t.Right-t.Left-(T.Right-T.Left))/2,t.Top,t.Left+(t.Right-t.Left-(T.Right-T.Left))/2+(T.Right-T.Left),t.Top+(T.Bottom-T.Top))):2===L&&T.$assign(pas["WEBLib.TMSFNCTypes"].RectF(t.Left+(t.Right-t.Left-(T.Right-T.Left))/2,t.Bottom-(T.Bottom-T.Top),t.Left+(t.Right-t.Left-(T.Right-T.Left))/2+(T.Right-T.Left),t.Bottom))}else if(1===y){var M=a;0===M?T.$assign(pas["WEBLib.TMSFNCTypes"].RectF(t.Left,t.Top+(t.Bottom-t.Top-(T.Bottom-T.Top))/2,t.Left+(T.Right-T.Left),t.Top+(t.Bottom-t.Top-(T.Bottom-T.Top))/2+(T.Bottom-T.Top))):1===M?T.$assign(pas["WEBLib.TMSFNCTypes"].RectF(t.Left,t.Top,t.Left+(T.Right-T.Left),t.Top+(T.Bottom-T.Top))):2===M&&T.$assign(pas["WEBLib.TMSFNCTypes"].RectF(t.Left,t.Bottom-(T.Bottom-T.Top),t.Left+(T.Right-T.Left),t.Bottom))}else if(2===y){var E=a;0===E?T.$assign(pas["WEBLib.TMSFNCTypes"].RectF(t.Right-(T.Right-T.Left),t.Top+(t.Bottom-t.Top-(T.Bottom-T.Top))/2,t.Right,t.Top+(t.Bottom-t.Top-(T.Bottom-T.Top))/2+(T.Bottom-T.Top))):1===E?T.$assign(pas["WEBLib.TMSFNCTypes"].RectF(t.Right-(T.Right-T.Left),t.Top,t.Right,t.Top+(T.Bottom-T.Top))):2===E&&T.$assign(pas["WEBLib.TMSFNCTypes"].RectF(t.Right-(T.Right-T.Left),t.Bottom-(T.Bottom-T.Top),t.Right,t.Bottom))}b.ref(3,this.FPDFLib.GetPDFGraphicsLib()).DrawSaveState(),this.SetTextAngle(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(T),h),0===h?m.$assign(T):(g=t.Right-t.Left)>(f=t.Bottom-t.Top)?m.$assign(pas["WEBLib.TMSFNCTypes"].RectF(t.Left,t.Top+f/2-g/2,t.Right,t.Top+f/2+g/2)):m.$assign(pas["WEBLib.TMSFNCTypes"].RectF(t.Left+g/2-f/2,t.Top,t.Left+g/2+f/2,t.Bottom)),pas["WEBLib.TMSFNCTypes"].InflateRectEx(m,2,2),b.ref(4,this.FPDFLib.GetPDFGraphicsLib()).DrawPathAddRectangle(pas["WEBLib.TMSFNCTypes"].TRectF.$clone(m)),b.ref(5,this.FPDFLib.GetPDFGraphicsLib()).DrawPathBeginClip(),b.ref(6,this.FPDFLib.GetPDFGraphicsLib()).DrawPathBegin(),b.ref(7,this.FPDFLib.GetPDFGraphicsLib()).DrawText$3(e,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(T),!1),b.ref(8,this.FPDFLib.GetPDFGraphicsLib()).DrawRestoreState()}}finally{b.free()}return C}})),this.$implcode=function(){rtl.createClass(t,"TTMSFNCPDFLibOpen",pas["WEBLib.TMSFNCPDFLib"].TTMSFNCPDFLib,(function(){rtl.addIntf(this,pas["WEBLib.TMSFNCPersistence"].ITMSFNCPersistence),rtl.addIntf(this,pas.System.IUnknown)}))}}),["WEBLib.TMSFNCUtils","SysUtils","WEBLib.TMSFNCBitmapContainer","WEBLib.TMSFNCStyles","WEBLib.TMSFNCPDFCoreLibBase","WEBLib.TMSFNCPDFGraphicsLib","Math"]),rtl.module("UnitLabelName",["System","SysUtils","Classes","JS","Web","WEBLib.Graphics","WEBLib.Controls","WEBLib.Forms","WEBLib.Dialogs","WEBLib.Controls","WEBLib.StdCtrls","WEBLib.StdCtrls","WEBLib.WebCtrls"],(function(){"use strict";rtl.createClass(this,"TLabelNameForm",pas["WEBLib.Forms"].TForm,(function(){this.$init=function(){pas["WEBLib.Forms"].TForm.$init.call(this),this.divDialog=null,this.divFormLabelGroup=null,this.labelGroup=null,this.divFormLabelName=null,this.labelName=null,this.Title=null,this.WebHTMLDiv3=null,this.btnFormCancel=null,this.btnFormOK=null,this.btnFormClose=null,this.WebLabel1=null,this.edtLabelName=null,this.cmbGroupName=null,this.labelFormError=null},this.$final=function(){this.divDialog=void 0,this.divFormLabelGroup=void 0,this.labelGroup=void 0,this.divFormLabelName=void 0,this.labelName=void 0,this.Title=void 0,this.WebHTMLDiv3=void 0,this.btnFormCancel=void 0,this.btnFormOK=void 0,this.btnFormClose=void 0,this.WebLabel1=void 0,this.edtLabelName=void 0,this.cmbGroupName=void 0,this.labelFormError=void 0,pas["WEBLib.Forms"].TForm.$final.call(this)},this.btnFormOKClick=function(t){this.SetModalResult(1)},this.btnFormCancelClick=function(t){this.SetModalResult(2)},this.btnFormCloseClick=function(t){this.SetModalResult(2)},this.edtLabelNameChange=function(t){var e=!1,i="";e=!0,""===pas.SysUtils.Trim(this.edtLabelName.GetText())||""===pas.SysUtils.Trim(this.cmbGroupName.GetText())?(e=!1,i="Label Name must have a value"):"SAMPLES"===pas.SysUtils.UpperCase(pas.SysUtils.Trim(this.cmbGroupName.GetText()))&&(e=!1,i='Group Name cannot be "Samples"'),e?(this.btnFormOK.SetEnabled(!0),this.labelFormError.SetCaption("")):(this.btnFormOK.SetEnabled(!1),this.labelFormError.SetCaption(i))},this.WebFormShow=function(t){setTimeout((function(){document.getElementById("edtLabelName").select()}),100)},this.WebFormKeyDown=function(t,e,i){27===e.get()&&this.SetModalResult(2),13===e.get()&&this.btnFormOK.FEnabled&&this.SetModalResult(1)},this.LoadDFMValues=function(){pas["WEBLib.Forms"].TCustomForm.LoadDFMValues.call(this),this.divDialog=pas["WEBLib.WebCtrls"].THTMLDiv.$create("Create$2",["divDialog"]),this.Title=pas["WEBLib.StdCtrls"].TLabel.$create("Create$1",[this]),this.WebLabel1=pas["WEBLib.StdCtrls"].TLabel.$create("Create$1",[this]),this.divFormLabelGroup=pas["WEBLib.WebCtrls"].THTMLDiv.$create("Create$2",["divFormLabelGroup"]),this.labelGroup=pas["WEBLib.StdCtrls"].TLabel.$create("Create$2",["labelGroup"]),this.cmbGroupName=pas["WEBLib.StdCtrls"].TComboBox.$create("Create$2",["cmbGroupName"]),this.divFormLabelName=pas["WEBLib.WebCtrls"].THTMLDiv.$create("Create$2",["divFormLabelName"]),this.labelName=pas["WEBLib.StdCtrls"].TLabel.$create("Create$2",["labelName"]),this.edtLabelName=pas["WEBLib.StdCtrls"].TEdit.$create("Create$2",["edtLabelName"]),this.WebHTMLDiv3=pas["WEBLib.WebCtrls"].THTMLDiv.$create("Create$1",[this]),this.labelFormError=pas["WEBLib.StdCtrls"].TLabel.$create("Create$2",["labelFormError"]),this.btnFormCancel=pas["WEBLib.StdCtrls"].TButton.$create("Create$2",["btnFormCancel"]),this.btnFormOK=pas["WEBLib.StdCtrls"].TButton.$create("Create$2",["btnFormOK"]),this.btnFormClose=pas["WEBLib.StdCtrls"].TButton.$create("Create$2",["btnFormClose"]),this.divDialog.BeforeLoadDFMValues(),this.Title.BeforeLoadDFMValues(),this.WebLabel1.BeforeLoadDFMValues(),this.divFormLabelGroup.BeforeLoadDFMValues(),this.labelGroup.BeforeLoadDFMValues(),this.cmbGroupName.BeforeLoadDFMValues(),this.divFormLabelName.BeforeLoadDFMValues(),this.labelName.BeforeLoadDFMValues(),this.edtLabelName.BeforeLoadDFMValues(),this.WebHTMLDiv3.BeforeLoadDFMValues(),this.labelFormError.BeforeLoadDFMValues(),this.btnFormCancel.BeforeLoadDFMValues(),this.btnFormOK.BeforeLoadDFMValues(),this.btnFormClose.BeforeLoadDFMValues();try{this.SetName("LabelNameForm"),this.SetWidth(600),this.SetHeight(206),this.SetCaption("Label Name"),this.SetColor(-1),this.FCSSLibrary=1,this.SetElementClassName("border-0 draggable"),this.SetElementFont(1),this.SetShadow(!1),this.SetEvent(this,"OnKeyDown","WebFormKeyDown"),this.SetEvent(this,"OnShow","WebFormShow"),this.divDialog.SetParentComponent(this),this.divDialog.SetName("divDialog"),this.divDialog.SetLeft(0),this.divDialog.SetTop(0),this.divDialog.SetWidth(600),this.divDialog.SetHeight(206),this.divDialog.SetElementClassName("overflow-hidden rounded border border-3 border-success bg-dark"),this.divDialog.SetAlign(5),this.divDialog.SetChildOrderEx(2),this.divDialog.SetElementFont(1),this.divDialog.SetRole(""),this.Title.SetParentComponent(this.divDialog),this.Title.SetName("Title"),this.Title.SetLeft(0),this.Title.SetTop(0),this.Title.SetWidth(600),this.Title.SetHeight(40),this.Title.SetControlCursor(22),this.Title.SetAlign(1),this.Title.SetAlignment(2),this.Title.SetAutoSize(!1),this.Title.SetCaption("Label Name"),this.Title.SetChildOrderEx(1),this.Title.SetColorEx(32896),this.Title.SetElementClassName("border-bottom border-4 border-success"),this.Title.SetElementLabelClassName("bg-success text-white fs-6"),this.Title.SetElementFont(1),this.Title.SetHeightStyle(2),this.Title.SetHeightPercent(100),this.Title.SetLayout(1),this.Title.SetTransparent(!1),this.Title.SetWidthPercent(100),this.WebLabel1.SetParentComponent(this.divDialog),this.WebLabel1.SetName("WebLabel1"),this.WebLabel1.SetAlignWithMargins(!0),this.WebLabel1.SetLeft(10),this.WebLabel1.SetTop(45),this.WebLabel1.SetWidth(585),this.WebLabel1.SetHeight(21),this.WebLabel1.FMargins.SetLeft(10),this.WebLabel1.FMargins.SetTop(5),this.WebLabel1.FMargins.SetRight(5),this.WebLabel1.FMargins.SetBottom(5),this.WebLabel1.SetAlign(5),this.WebLabel1.SetCaption("Please select a new Group and Label Name."),this.WebLabel1.SetElementLabelClassName("text-white"),this.WebLabel1.SetElementFont(1),this.WebLabel1.SetHeightStyle(2),this.WebLabel1.SetHeightPercent(100),this.WebLabel1.SetLayout(1),this.WebLabel1.SetWidthPercent(100),this.divFormLabelGroup.SetParentComponent(this.divDialog),this.divFormLabelGroup.SetName("divFormLabelGroup"),this.divFormLabelGroup.SetAlignWithMargins(!0),this.divFormLabelGroup.SetLeft(5),this.divFormLabelGroup.SetTop(71),this.divFormLabelGroup.SetWidth(590),this.divFormLabelGroup.SetHeight(42),this.divFormLabelGroup.FMargins.SetLeft(5),this.divFormLabelGroup.FMargins.SetTop(0),this.divFormLabelGroup.FMargins.SetRight(5),this.divFormLabelGroup.FMargins.SetBottom(0),this.divFormLabelGroup.SetElementClassName("rounded border border-1 border-secondary bg-dark"),this.divFormLabelGroup.SetAlign(2),this.divFormLabelGroup.SetChildOrderEx(2),this.divFormLabelGroup.SetElementFont(1),this.divFormLabelGroup.SetRole(""),this.labelGroup.SetParentComponent(this.divFormLabelGroup),this.labelGroup.SetName("labelGroup"),this.labelGroup.SetAlignWithMargins(!0),this.labelGroup.SetLeft(3),this.labelGroup.SetTop(3),this.labelGroup.SetWidth(80),this.labelGroup.SetHeight(36),this.labelGroup.SetAlign(3),this.labelGroup.SetAlignment(2),this.labelGroup.SetAutoSize(!1),this.labelGroup.SetElementClassName("text-white bg-secondary rounded-1"),this.labelGroup.SetElementFont(1),this.labelGroup.SetHeightPercent(100),this.labelGroup.SetHTML('<div style="font-size: 12px;"  class="px-2">Group Name</div>'),this.labelGroup.SetLayout(1),this.labelGroup.SetWidthPercent(100),this.cmbGroupName.SetParentComponent(this.divFormLabelGroup),this.cmbGroupName.SetName("cmbGroupName"),this.cmbGroupName.SetAlignWithMargins(!0),this.cmbGroupName.SetLeft(86),this.cmbGroupName.SetTop(3),this.cmbGroupName.SetWidth(501),this.cmbGroupName.SetHeight(21),this.cmbGroupName.FMargins.SetLeft(0),this.cmbGroupName.SetAlign(5),this.cmbGroupName.SetElementClassName("rounded-1 border-0 ps-2"),this.cmbGroupName.SetElementFont(1),this.cmbGroupName.SetHeightPercent(100),this.cmbGroupName.SetStyle(1),this.cmbGroupName.SetTextHint("Select Group"),this.cmbGroupName.SetWidthPercent(100),this.SetEvent$1(this.cmbGroupName,this,"OnChange","edtLabelNameChange"),this.SetEvent$1(this.cmbGroupName,this,"OnKeyDown","WebFormKeyDown"),this.cmbGroupName.SetItemIndex(-1),this.cmbGroupName.FItems.BeginUpdate();try{this.cmbGroupName.FItems.Clear(),this.cmbGroupName.FItems.Add("a"),this.cmbGroupName.FItems.Add("b"),this.cmbGroupName.FItems.Add("c"),this.cmbGroupName.FItems.Add("d")}finally{this.cmbGroupName.FItems.EndUpdate()}this.divFormLabelName.SetParentComponent(this.divDialog),this.divFormLabelName.SetName("divFormLabelName"),this.divFormLabelName.SetAlignWithMargins(!0),this.divFormLabelName.SetLeft(5),this.divFormLabelName.SetTop(118),this.divFormLabelName.SetWidth(590),this.divFormLabelName.SetHeight(42),this.divFormLabelName.FMargins.SetLeft(5),this.divFormLabelName.FMargins.SetTop(5),this.divFormLabelName.FMargins.SetRight(5),this.divFormLabelName.FMargins.SetBottom(5),this.divFormLabelName.SetElementClassName("rounded border border-1 border-secondary bg-dark"),this.divFormLabelName.SetAlign(2),this.divFormLabelName.SetChildOrderEx(3),this.divFormLabelName.SetElementFont(1),this.divFormLabelName.SetRole(""),this.labelName.SetParentComponent(this.divFormLabelName),this.labelName.SetName("labelName"),this.labelName.SetAlignWithMargins(!0),this.labelName.SetLeft(3),this.labelName.SetTop(3),this.labelName.SetWidth(80),this.labelName.SetHeight(36),this.labelName.SetAlign(3),this.labelName.SetAlignment(2),this.labelName.SetAutoSize(!1),this.labelName.SetCaption("Label Name"),this.labelName.SetElementClassName("text-white bg-secondary rounded-1"),this.labelName.SetElementFont(1),this.labelName.SetHeightPercent(100),this.labelName.SetHTML('<div style="font-size: 12px;"  class="px-2">Label Name</div>'),this.labelName.SetLayout(1),this.labelName.SetWidthPercent(100),this.edtLabelName.SetParentComponent(this.divFormLabelName),this.edtLabelName.SetName("edtLabelName"),this.edtLabelName.SetAlignWithMargins(!0),this.edtLabelName.SetLeft(86),this.edtLabelName.SetTop(3),this.edtLabelName.SetWidth(501),this.edtLabelName.SetHeight(36),this.edtLabelName.FMargins.SetLeft(0),this.edtLabelName.SetAlign(5),this.edtLabelName.SetChildOrderEx(1),this.edtLabelName.SetElementClassName("ps-2 rounded-1  border-0"),this.edtLabelName.SetElementFont(1),this.edtLabelName.SetHeightPercent(100),this.edtLabelName.SetText("edtLabelName"),this.edtLabelName.SetTextHint("Enter a Label Name"),this.edtLabelName.SetWidthPercent(100),this.SetEvent$1(this.edtLabelName,this,"OnChange","edtLabelNameChange"),this.SetEvent$1(this.edtLabelName,this,"OnKeyDown","WebFormKeyDown"),this.WebHTMLDiv3.SetParentComponent(this.divDialog),this.WebHTMLDiv3.SetName("WebHTMLDiv3"),this.WebHTMLDiv3.SetLeft(0),this.WebHTMLDiv3.SetTop(165),this.WebHTMLDiv3.SetWidth(600),this.WebHTMLDiv3.SetHeight(41),this.WebHTMLDiv3.SetAlign(2),this.WebHTMLDiv3.SetChildOrderEx(4),this.WebHTMLDiv3.SetElementFont(1),this.WebHTMLDiv3.SetRole(""),this.labelFormError.SetParentComponent(this.WebHTMLDiv3),this.labelFormError.SetName("labelFormError"),this.labelFormError.SetAlignWithMargins(!0),this.labelFormError.SetLeft(10),this.labelFormError.SetTop(0),this.labelFormError.SetWidth(380),this.labelFormError.SetHeight(38),this.labelFormError.FMargins.SetLeft(10),this.labelFormError.FMargins.SetTop(0),this.labelFormError.SetAlign(5),this.labelFormError.SetAutoSize(!1),this.labelFormError.SetCaption("This is an error message"),this.labelFormError.SetElementLabelClassName("text-warning fst-italic"),this.labelFormError.SetElementFont(1),this.labelFormError.SetHeightPercent(100),this.labelFormError.SetLayout(1),this.labelFormError.SetWidthPercent(100),this.btnFormCancel.SetParentComponent(this.WebHTMLDiv3),this.btnFormCancel.SetName("btnFormCancel"),this.btnFormCancel.SetAlignWithMargins(!0),this.btnFormCancel.SetLeft(499),this.btnFormCancel.SetTop(0),this.btnFormCancel.SetWidth(96),this.btnFormCancel.SetHeight(36),this.btnFormCancel.FMargins.SetLeft(5),this.btnFormCancel.FMargins.SetTop(0),this.btnFormCancel.FMargins.SetRight(5),this.btnFormCancel.FMargins.SetBottom(5),this.btnFormCancel.SetAlign(4),this.btnFormCancel.SetCaption('<i style="color: #f99;" class="fa-solid fa-times pe-1 fa-lg"></i> Cancel'),this.btnFormCancel.SetChildOrderEx(2),this.btnFormCancel.SetElementClassName("btn btn-danger"),this.btnFormCancel.SetElementFont(1),this.btnFormCancel.SetHeightPercent(100),this.btnFormCancel.SetTabOrder(1),this.btnFormCancel.SetWidthStyle(2),this.btnFormCancel.SetWidthPercent(100),this.SetEvent$1(this.btnFormCancel,this,"OnClick","btnFormCancelClick"),this.btnFormOK.SetParentComponent(this.WebHTMLDiv3),this.btnFormOK.SetName("btnFormOK"),this.btnFormOK.SetAlignWithMargins(!0),this.btnFormOK.SetLeft(398),this.btnFormOK.SetTop(0),this.btnFormOK.SetWidth(96),this.btnFormOK.SetHeight(36),this.btnFormOK.FMargins.SetLeft(5),this.btnFormOK.FMargins.SetTop(0),this.btnFormOK.FMargins.SetRight(0),this.btnFormOK.FMargins.SetBottom(5),this.btnFormOK.SetAlign(4),this.btnFormOK.SetCaption('<i style="color:yellow;" class="fa-solid fa-check pe-1 fa-lg"></i> OK'),this.btnFormOK.SetChildOrderEx(1),this.btnFormOK.SetDefault(!0),this.btnFormOK.SetElementClassName("btn btn-success"),this.btnFormOK.SetElementFont(1),this.btnFormOK.SetHeightPercent(100),this.btnFormOK.SetWidthStyle(2),this.btnFormOK.SetWidthPercent(100),this.SetEvent$1(this.btnFormOK,this,"OnClick","btnFormOKClick"),this.btnFormClose.SetParentComponent(this.divDialog),this.btnFormClose.SetName("btnFormClose"),this.btnFormClose.SetLeft(566),this.btnFormClose.SetTop(0),this.btnFormClose.SetWidth(26),this.btnFormClose.SetHeight(26),this.btnFormClose.SetCaption('<i class="fa-solid fa-xmark"></i>'),this.btnFormClose.SetElementClassName("btn btn-success btn-sm m-0 p-0"),this.btnFormClose.SetElementFont(1),this.btnFormClose.SetHeightPercent(100),this.btnFormClose.SetWidthPercent(100),this.SetEvent$1(this.btnFormClose,this,"OnClick","btnFormCloseClick")}finally{this.divDialog.AfterLoadDFMValues(),this.Title.AfterLoadDFMValues(),this.WebLabel1.AfterLoadDFMValues(),this.divFormLabelGroup.AfterLoadDFMValues(),this.labelGroup.AfterLoadDFMValues(),this.cmbGroupName.AfterLoadDFMValues(),this.divFormLabelName.AfterLoadDFMValues(),this.labelName.AfterLoadDFMValues(),this.edtLabelName.AfterLoadDFMValues(),this.WebHTMLDiv3.AfterLoadDFMValues(),this.labelFormError.AfterLoadDFMValues(),this.btnFormCancel.AfterLoadDFMValues(),this.btnFormOK.AfterLoadDFMValues(),this.btnFormClose.AfterLoadDFMValues()}},rtl.addIntf(this,pas.System.IUnknown);var t=this.$rtti;t.addField("divDialog",pas["WEBLib.WebCtrls"].$rtti.THTMLDiv),t.addField("divFormLabelGroup",pas["WEBLib.WebCtrls"].$rtti.THTMLDiv),t.addField("labelGroup",pas["WEBLib.StdCtrls"].$rtti.TLabel),t.addField("divFormLabelName",pas["WEBLib.WebCtrls"].$rtti.THTMLDiv),t.addField("labelName",pas["WEBLib.StdCtrls"].$rtti.TLabel),t.addField("Title",pas["WEBLib.StdCtrls"].$rtti.TLabel),t.addField("WebHTMLDiv3",pas["WEBLib.WebCtrls"].$rtti.THTMLDiv),t.addField("btnFormCancel",pas["WEBLib.StdCtrls"].$rtti.TButton),t.addField("btnFormOK",pas["WEBLib.StdCtrls"].$rtti.TButton),t.addField("btnFormClose",pas["WEBLib.StdCtrls"].$rtti.TButton),t.addField("WebLabel1",pas["WEBLib.StdCtrls"].$rtti.TLabel),t.addField("edtLabelName",pas["WEBLib.StdCtrls"].$rtti.TEdit),t.addField("cmbGroupName",pas["WEBLib.StdCtrls"].$rtti.TComboBox),t.addField("labelFormError",pas["WEBLib.StdCtrls"].$rtti.TLabel),t.addMethod("btnFormOKClick",0,[["Sender",pas.System.$rtti.TObject]]),t.addMethod("btnFormCancelClick",0,[["Sender",pas.System.$rtti.TObject]]),t.addMethod("btnFormCloseClick",0,[["Sender",pas.System.$rtti.TObject]]),t.addMethod("edtLabelNameChange",0,[["Sender",pas.System.$rtti.TObject]]),t.addMethod("WebFormShow",0,[["Sender",pas.System.$rtti.TObject]]),t.addMethod("WebFormKeyDown",0,[["Sender",pas.System.$rtti.TObject],["Key",rtl.word,1],["Shift",pas.Classes.$rtti.TShiftState]])})),this.LabelNameForm=null})),rtl.module("Unit1",["System","SysUtils","Types","Classes","WEBLib.TMSFNCPDFCoreLibBase","WEBLib.TMSFNCTypes","WEBLib.TMSFNCUtils","WEBLib.Graphics","WEBLib.Controls","WEBLib.Forms","WEBLib.Dialogs","WEBLib.ExtCtrls","WEBLib.WebCtrls","WEBLib.ComCtrls","WEBLib.StdCtrls","WEBLib.DropDown","WEBLib.Crypto","JS","Web","WEBLib.Controls","WEBLib.StdCtrls","WEBLib.TMSFNCWXBarcode","WEBLib.TMSFNCCustomControl","WEBLib.TMSFNCPDFLib","WEBLib.TMSFNCGraphicsTypes","WEBLib.TMSFNCWXPDFToolbar","WEBLib.TMSFNCCustomScrollControl","WEBLib.TMSFNCCustomList","WEBLib.TMSFNCWXPDFThumbnailList","WEBLib.TMSFNCWebBrowser","WEBLib.TMSFNCCustomWEBControl","WEBLib.TMSFNCWXPDFViewer","WEBLib.TMSFNCGraphicsPDFEngine","WEBLib.TMSFNCCustomComponent","WEBLib.TMSFNCBitmapContainer"],(function(){"use strict";rtl.createClass(this,"TForm1",pas["WEBLib.Forms"].TForm,(function(){this.$init=function(){pas["WEBLib.Forms"].TForm.$init.call(this),this.divLabelsList=null,this.divMain=null,this.splitterMain=null,this.divTop=null,this.pageControl=null,this.pagePrint=null,this.pageEdit=null,this.pageData=null,this.divButtonHolder=null,this.btnPagePrint=null,this.btnPageEdit=null,this.btnPageData=null,this.divPrintButtonsHolder=null,this.labelPrintLabel=null,this.labelPrint=null,this.btnPrintDelete=null,this.btnPrintRename=null,this.btnPrintClone=null,this.btnPrintExport=null,this.divPrintingButtonsHolder=null,this.btnPrintPDF=null,this.divEditButtonsHolder=null,this.labelEdit=null,this.divPrintHolder=null,this.divPrintOptionsHolder=null,this.splitterPrint=null,this.divPrintPreviewHolder=null,this.btnDownloadPDF=null,this.btnEditRename=null,this.btnEditClone=null,this.btnEditExport=null,this.btnEditDelete=null,this.btnEditImport=null,this.btnPrintImport=null,this.divEditor=null,this.divEditPropertiesHolder=null,this.splitterEditor=null,this.divEditPreviewHolder=null,this.divEditPropertyButtons=null,this.ddPropertiesListHolder=null,this.btnEditPropertiesAdd=null,this.panelPropertiesList=null,this.labelEditLabel=null,this.divEditProperties=null,this.divEditPropertiesDetail=null,this.splitterProperties=null,this.btnEditPropertiesDelete=null,this.btnEditPreview=null,this.wxBarcode=null,this.divDatasetButtonsHolder=null,this.labelDatasetLabel=null,this.labelDataset=null,this.btnDatasetDelete=null,this.btnDatasetExport=null,this.btnDatasetImport=null,this.divDatasetsHolder=null,this.divDatasetList=null,this.divDataset=null,this.WebSplitter1=null,this.btnDatasetClone=null,this.btnDatasetRename=null,this.TMSFNCWXPDFViewer1=null,this.TMSFNCWXPDFThumbnailList1=null,this.TMSFNCWXPDFToolbar1=null,this.btnUploadPDF=null,this.WebOpenDialog1=null,this.btnGenerateLabelPDF=null,this.divTest=null,this.TMSFNCBitmapContainer1=null,this.CurrentLabelID="",this.CurrentLabelName="",this.CurrentGroupName="",this.CurrentPropertyID="",this.CurrentPropertyName="",this.CurrentPropertyGroup="",this.CurrentPropertyOptions=void 0,this.CurrentDatasetID="",this.CurrentDatasetName="",this.CurrentDatasetGroup="",this.CurrentPDFData="",this.CurrentLabel=""},this.$final=function(){this.divLabelsList=void 0,this.divMain=void 0,this.splitterMain=void 0,this.divTop=void 0,this.pageControl=void 0,this.pagePrint=void 0,this.pageEdit=void 0,this.pageData=void 0,this.divButtonHolder=void 0,this.btnPagePrint=void 0,this.btnPageEdit=void 0,this.btnPageData=void 0,this.divPrintButtonsHolder=void 0,this.labelPrintLabel=void 0,this.labelPrint=void 0,this.btnPrintDelete=void 0,this.btnPrintRename=void 0,this.btnPrintClone=void 0,this.btnPrintExport=void 0,this.divPrintingButtonsHolder=void 0,this.btnPrintPDF=void 0,this.divEditButtonsHolder=void 0,this.labelEdit=void 0,this.divPrintHolder=void 0,this.divPrintOptionsHolder=void 0,this.splitterPrint=void 0,this.divPrintPreviewHolder=void 0,this.btnDownloadPDF=void 0,this.btnEditRename=void 0,this.btnEditClone=void 0,this.btnEditExport=void 0,this.btnEditDelete=void 0,this.btnEditImport=void 0,this.btnPrintImport=void 0,this.divEditor=void 0,this.divEditPropertiesHolder=void 0,this.splitterEditor=void 0,this.divEditPreviewHolder=void 0,this.divEditPropertyButtons=void 0,this.ddPropertiesListHolder=void 0,this.btnEditPropertiesAdd=void 0,this.panelPropertiesList=void 0,this.labelEditLabel=void 0,this.divEditProperties=void 0,this.divEditPropertiesDetail=void 0,this.splitterProperties=void 0,this.btnEditPropertiesDelete=void 0,this.btnEditPreview=void 0,this.wxBarcode=void 0,this.divDatasetButtonsHolder=void 0,this.labelDatasetLabel=void 0,this.labelDataset=void 0,this.btnDatasetDelete=void 0,this.btnDatasetExport=void 0,this.btnDatasetImport=void 0,this.divDatasetsHolder=void 0,this.divDatasetList=void 0,this.divDataset=void 0,this.WebSplitter1=void 0,this.btnDatasetClone=void 0,this.btnDatasetRename=void 0,this.TMSFNCWXPDFViewer1=void 0,this.TMSFNCWXPDFThumbnailList1=void 0,this.TMSFNCWXPDFToolbar1=void 0,this.btnUploadPDF=void 0,this.WebOpenDialog1=void 0,this.btnGenerateLabelPDF=void 0,this.divTest=void 0,this.TMSFNCBitmapContainer1=void 0,pas["WEBLib.Forms"].TForm.$final.call(this)},this.WebFormCreate=function(t){this.pageControl.SetTabIndex(0);this.tabLabelsList=new Tabulator("#divLabelsList",{data:[{ID:"{FAC0C275-32DC-40C1-88EE-0082DB85CFDA}",GROUP:"Sample Labels",LABEL:"Business Card",LOCK:!0},{ID:"{33BE2A01-AADD-4C18-9B23-4E64C8E73B72}",GROUP:"Sample Labels",LABEL:"2x4 Address",LOCK:!0},{ID:"{56C689F2-9582-49CB-81E4-55094B3E1935}",GROUP:"Sample Labels",LABEL:"4x6 Shipping",LOCK:!0}],index:"ID",layout:"fitColumns",selectable:1,groupBy:"GROUP",columnCalcs:"table",headerVisible:!1,initialSort:[{column:"LABEL",dir:"asc"},{column:"GROUP",dir:"asc"}],columns:[{title:"ID",field:"ID",width:50,visible:!1},{title:"Group",field:"GROUP",visible:!1,sorter:"string"},{title:"Labels",field:"LABEL",bottomCalc:"count",headerSort:!1,sorter:"string"},{title:"Locked",field:"LOCK",visible:!1}]}),this.tabLabelsList.on("tableBuilt",(function(){var t=this.getRow("{FAC0C275-32DC-40C1-88EE-0082DB85CFDA}");t.select();var e=t.getCell("ID").getValue(),i=t.getCell("LABEL").getValue(),s=t.getCell("GROUP").getValue(),n=t.getCell("LOCK").getValue();pas.Unit1.Form1.NewLabelSelected(e,i,s,n)})),this.tabLabelsList.on("rowClick",(function(t,e){e.select();var i=e.getCell("ID").getValue(),s=e.getCell("LABEL").getValue(),n=e.getCell("GROUP").getValue(),r=e.getCell("LOCK").getValue();pas.Unit1.Form1.NewLabelSelected(i,s,n,r)}));this.tabPropertiesList=new Tabulator("#panelPropertiesList",{data:[{GROUP:"Basic",PROPERTY:"Layout",ID:"{755EFB09-7EA8-44CD-8AD6-8C560F3B9D3D}",OPTIONS:[{ID:"",PROPERTY:"Units",EDITOR:"list",VALUE:"in",LIST:["px","cm","in","mm","em"]},{ID:"",PROPERTY:"Width",EDITOR:"number",VALUE:"2"},{ID:"",PROPERTY:"Height",EDITOR:"number",VALUE:"4"},{ID:"",PROPERTY:"DPI",EDITOR:"number",VALUE:"600"}]},{GROUP:"Shapes",PROPERTY:"Rectangle",ID:"{1F5BF4A9-A5B1-48F3-BCAB-42E9CF16D871}",OPTIONS:[{ID:"",PROPERTY:"Top",EDITOR:"number",VALUE:"10px"},{ID:"",PROPERTY:"Left",EDITOR:"number",VALUE:"10px"},{ID:"",PROPERTY:"Width",EDITOR:"number",VALUE:"200px"},{ID:"",PROPERTY:"Height",EDITOR:"number",VALUE:"50px"},{ID:"",PROPERTY:"Rotation",EDITOR:"number",VALUE:"0deg"},{ID:"",PROPERTY:"Stroke",EDITOR:"text",VALUE:"2px solid black"},{ID:"",PROPERTY:"Fill",EDITOR:"text",VALUE:"gray"}]},{GROUP:"Shapes",PROPERTY:"Rounded Rectangle",ID:"{92F8EC44-3A07-4F70-8EAC-B1256E6E1788}",OPTIONS:[{ID:"",PROPERTY:"Top",EDITOR:"number",VALUE:"10px"},{ID:"",PROPERTY:"Left",EDITOR:"number",VALUE:"10px"},{ID:"",PROPERTY:"Width",EDITOR:"number",VALUE:"200px"},{ID:"",PROPERTY:"Height",EDITOR:"number",VALUE:"50px"},{ID:"",PROPERTY:"Rotation",EDITOR:"number",VALUE:"0deg"},{ID:"",PROPERTY:"Stroke",EDITOR:"text",VALUE:"2px solid black"},{ID:"",PROPERTY:"Fill",EDITOR:"text",VALUE:"gray"},{ID:"",PROPERTY:"Top-Left Rounding",EDITOR:"number",VALUE:"20px"},{ID:"",PROPERTY:"Top-Right Rounding",EDITOR:"number",VALUE:"20px"},{ID:"",PROPERTY:"Bottom-Left Rounding",EDITOR:"number",VALUE:"20px"},{ID:"",PROPERTY:"Bottom-Right Rounding",EDITOR:"number",VALUE:"20px"}]},{GROUP:"Simple Barcodes",PROPERTY:"Code39",ID:"{738A0CF6-3254-4CE1-A3AE-EC025BA910C0}",OPTIONS:[{ID:"",PROPERTY:"Top",EDITOR:"number",VALUE:"200px"},{ID:"",PROPERTY:"Left",EDITOR:"number",VALUE:"0px"},{ID:"",PROPERTY:"Width",EDITOR:"number",VALUE:"2400px"},{ID:"",PROPERTY:"Height",EDITOR:"number",VALUE:"800px"},{ID:"",PROPERTY:"Stroke",EDITOR:"text",VALUE:"none"},{ID:"",PROPERTY:"Fill",EDITOR:"text",VALUE:"none"},{ID:"",PROPERTY:"Rotation",EDITOR:"number",VALUE:"0deg"},{ID:"",PROPERTY:"Color",EDITOR:"text",VALUE:"black"},{ID:"",PROPERTY:"Data",EDITOR:"text",VALUE:"CODE-39-ONLY-UPPERCASE"},{ID:"",PROPERTY:"Scale",EDITOR:"number",VALUE:"5"}]},{GROUP:"Text",PROPERTY:"Text",ID:"{C1437744-7668-4FFE-8A55-8AE7A911DE40}",OPTIONS:[{ID:"",PROPERTY:"Text",EDITOR:"text",VALUE:"Sample Text"},{ID:"",PROPERTY:"Font Family",EDITOR:"text",VALUE:"Cairo"},{ID:"",PROPERTY:"Font Size",EDITOR:"number",VALUE:"64px"},{ID:"",PROPERTY:"Font Color",EDITOR:"number",VALUE:"blue"},{ID:"",PROPERTY:"Alignment",EDITOR:"text",VALUE:"center"},{ID:"",PROPERTY:"Top",EDITOR:"number",VALUE:"10px"},{ID:"",PROPERTY:"Left",EDITOR:"number",VALUE:"10px"},{ID:"",PROPERTY:"Width",EDITOR:"number",VALUE:"200px"},{ID:"",PROPERTY:"Height",EDITOR:"number",VALUE:"50px"},{ID:"",PROPERTY:"Rotation",EDITOR:"number",VALUE:"0deg"},{ID:"",PROPERTY:"Stroke",EDITOR:"text",VALUE:"2px solid black"},{ID:"",PROPERTY:"Fill",EDITOR:"text",VALUE:"cyan"},{ID:"",PROPERTY:"Top-Left Rounding",EDITOR:"number",VALUE:"20px"},{ID:"",PROPERTY:"Top-Right Rounding",EDITOR:"number",VALUE:"20px"},{ID:"",PROPERTY:"Bottom-Left Rounding",EDITOR:"number",VALUE:"20px"},{ID:"",PROPERTY:"Bottom-Right Rounding",EDITOR:"number",VALUE:"20px"}]}],index:"ID",layout:"fitColumns",selectable:1,groupBy:"GROUP",headerVisible:!1,columns:[{title:"ID",field:"ID",width:50,visible:!1},{title:"Group",field:"GROUP",visible:!1},{title:"Property",field:"PROPERTY",visible:!0},{title:"Options",field:"OPTIONS",visible:!1}]}),this.tabPropertiesList.on("rowClick",(function(t,e){e.select();var i=e.getCell("ID").getValue(),s=e.getCell("GROUP").getValue(),n=e.getCell("PROPERTY").getValue(),r=e.getCell("OPTIONS").getValue().slice();pas.Unit1.Form1.NewPropertySelected(i,s,n,r)}));this.tabEditProperties=new Tabulator("#divEditProperties",{index:"ID",layout:"fitColumns",selectable:1,placeholder:"No Properties Found",headerVisible:!1,dataTree:!0,dataTreeChildField:"OPTIONS",groupBy:"GROUP",dataTreeCollapseElement:'<div class="tab-arrow-down"></div>',dataTreeExpandElement:'<div class="tab-arrow-right"></div>',dataTreeBranchElement:!1,dataTreeChildIndent:54,dataTreeStartExpanded:!0,columns:[{title:"ID",field:"ID",width:50,visible:!1},{title:"Group",field:"GROUP",width:50,visible:!1},{title:"Property",field:"PROPERTY",visible:!0,resizable:!1},{title:"Options",field:"OPTIONS",visible:!1},{title:"Editor",field:"EDITOR",visible:!1},{title:"List",field:"LIST",visible:!1},{title:"Values",field:"VALUE",width:200,resizable:!1,visible:!0,editor:function(t,e,i,s,n){var r=t.getRow().getCell("EDITOR").getValue();if("number"==r)(o=document.createElement("input")).setAttribute("type","TEXT"),o.classList.add("bg-white","w-100","h-100","border-0","px-2"),o.value=t.getValue();else if("text"==r){(o=document.createElement("input")).setAttribute("type","TEXT"),o.classList.add("bg-white","w-100","h-100","border-0","px-2"),o.value=t.getValue()}else if("list"==r){var o;(o=document.createElement("select")).classList.add("bg-white","w-100","h-100","border-0","px-2"),o.innerHTML=t.getRow().getCell("LIST").getValue().map(t=>`<option value="${t}">${t}</option>`),o.value=t.getValue()}function a(){i(o.value)}return e((function(){o.focus()})),o.addEventListener("change",a),o.addEventListener("blur",a),o}}]}),this.tabEditProperties.on("rowClick",(function(t,e){e.select()})),window.draggableListener=function(t){var e=t.target,i=(parseFloat(e.getAttribute("data-x"))||0)+t.dx,s=(parseFloat(e.getAttribute("data-y"))||0)+t.dy;e.style.transform="translate("+i+"px, "+s+"px)",e.setAttribute("data-x",i),e.setAttribute("data-y",s)},interact(".draggable").draggable({listeners:{move:window.draggableListener},inertia:!0});this.tabDatasetList=new Tabulator("#divDatasetList",{data:[{ID:"{A35F371D-23DE-496F-ADFD-CA7FC9CAE7BC}",GROUP:"Sample Datasets",DATASET:"Addresses",LOCK:!0},{ID:"{712D76A9-DD2F-4A10-B312-A3BCF8C9EBD9}",GROUP:"Sample Datasets",DATASET:"Products",LOCK:!0},{ID:"{D8079D98-D61B-4C7A-9866-DDD8B52BEDE1}",GROUP:"Sample Datasets",DATASET:"Locations",LOCK:!0},{ID:"{62887781-89A3-4A8D-8C34-0A96D6F67406}",GROUP:"Sample Datasets",DATASET:"People",LOCK:!0}],index:"ID",layout:"fitColumns",selectable:1,groupBy:"GROUP",columnCalcs:"table",headerVisible:!1,initialSort:[{column:"DATASET",dir:"asc"},{column:"GROUP",dir:"asc"}],columns:[{title:"ID",field:"ID",width:50,visible:!1},{title:"Group",field:"GROUP",visible:!1,sorter:"string"},{title:"Dataset",field:"DATASET",bottomCalc:"count",headerSort:!1,sorter:"string"},{title:"Locked",field:"LOCK",visible:!1}]}),this.tabDatasetList.on("tableBuilt",(function(){var t=this.getRow("{A35F371D-23DE-496F-ADFD-CA7FC9CAE7BC}");t.select();var e=t.getCell("ID").getValue(),i=t.getCell("DATASET").getValue(),s=t.getCell("GROUP").getValue(),n=t.getCell("LOCK").getValue();pas.Unit1.Form1.NewDatasetSelected(e,i,s,n)})),this.tabDatasetList.on("rowClick",(function(t,r){r.select();var o=r.getCell("ID").getValue(),a=r.getCell("DATASET").getValue(),l=r.getCell("GROUP").getValue(),h=r.getCell("LOCK").getValue();pas.Unit1.Form1.NewDatasetSelected(o,a,l,h),"Addresses"==a?(pas.Unit1.Form1.tabDataset.clearData(),pas.Unit1.Form1.tabDataset.setData(e)):"Products"==a?(pas.Unit1.Form1.tabDataset.clearData(),pas.Unit1.Form1.tabDataset.setData(i)):"Locations"==a?(pas.Unit1.Form1.tabDataset.clearData(),pas.Unit1.Form1.tabDataset.setData(s)):"People"==a&&(pas.Unit1.Form1.tabDataset.clearData(),pas.Unit1.Form1.tabDataset.setData(n))}));var e=[{ADDRESS1:"123 Main Street",ADDRESS2:"Unit # 456",CITY:"Anytown",PROVSTATE:"British Columbia",COUNTRY:"Canada"},{ADDRESS1:"789 Water Street",CITY:"Elsewhere",PROVSTATE:"Nunavut",COUNTRY:"Canada"},{ADDRESS1:"456 Main Street",CITY:"Nowhere",PROVSTATE:"Alberta",COUNTRY:"Canada"}],i=[{"Product#":"123-456-A","Long Name":"microSD 8B","Short Name":"m8","Category 1":"Memory","Category 2":"microSD",Manufacturer:"SanDisk",Cases:"12"},{"Product#":"123-456-A","Long Name":"microSD 16GB","Short Name":"m16","Category 1":"Memory","Category 2":"microSD",Manufacturer:"SanDisk",Cases:"414"},{"Product#":"123-456-A","Long Name":"microSD 32GB","Short Name":"m32","Category 1":"Memory","Category 2":"microSD",Manufacturer:"SanDisk",Cases:"30"},{"Product#":"123-456-A","Long Name":"microSD 64GB","Short Name":"m64","Category 1":"Memory","Category 2":"microSD",Manufacturer:"SanDisk",Cases:"-1"}],s=[{Bin:"01"},{Bin:"02"},{Bin:"03"},{Bin:"04"},{Bin:"05"},{Bin:"06"},{Bin:"07"},{Bin:"08"},{Bin:"09"},{Bin:"10"},{Bin:"11"},{Bin:"12"},{Bin:"13"},{Bin:"14"},{Bin:"15"},{Bin:"16"},{Bin:"17"},{Bin:"18"},{Bin:"19"},{Bin:"20"}],n=[{FIRST:"Sneezy",LAST:"Dwarf",ROLE:"Minion"},{FIRST:"Dopey",LAST:"Dwarf",ROLE:"Minion"},{FIRST:"Happy",LAST:"Dwarf",ROLE:"Minion"},{FIRST:"Bashful",LAST:"Dwarf",ROLE:"Minion"},{FIRST:"Doc",LAST:"Dwarf",ROLE:"Minion"},{FIRST:"Grumpy",LAST:"Dwarf",ROLE:"Minion"},{FIRST:"Dopey",LAST:"Dwarf",ROLE:"Minion"}];this.tabDataset=new Tabulator("#divDataset",{data:n,layout:"fitColumns",selectable:1,autoColumns:!0}),this.tabDataset.on("rowClick",(function(t,e){e.select()}))},this.btnPagePrintClick=function(t){this.btnPagePrint.GetElementHandle().classList.replace("btn-secondary","btn-primary"),this.btnPageEdit.GetElementHandle().classList.replace("btn-primary","btn-secondary"),this.btnPageData.GetElementHandle().classList.replace("btn-primary","btn-secondary"),this.pageControl.SetTabIndex(0)},this.btnPageEditClick=function(t){this.btnPagePrint.GetElementHandle().classList.replace("btn-primary","btn-secondary"),this.btnPageEdit.GetElementHandle().classList.replace("btn-secondary","btn-primary"),this.btnPageData.GetElementHandle().classList.replace("btn-primary","btn-secondary"),this.pageControl.SetTabIndex(1)},this.btnPageDataClick=function(t){this.btnPagePrint.GetElementHandle().classList.replace("btn-primary","btn-secondary"),this.btnPageEdit.GetElementHandle().classList.replace("btn-primary","btn-secondary"),this.btnPageData.GetElementHandle().classList.replace("btn-secondary","btn-primary"),this.pageControl.SetTabIndex(2)},this.NewLabelSelected=function(t,e,i,s){this.labelPrint.SetHTML('<div style="font-size:16px;"><span style="color: white;">'+i+'</span><span style="color: gray"> / </span><span style="color: white">'+e+"</span></div>"),this.labelEdit.SetHTML(this.labelPrint.FHTML),s?(this.btnPrintRename.SetEnabled(!1),this.btnPrintDelete.SetEnabled(!1),this.btnEditRename.SetEnabled(!1),this.btnEditDelete.SetEnabled(!1)):(this.btnPrintRename.SetEnabled(!0),this.btnPrintDelete.SetEnabled(!0),this.btnEditRename.SetEnabled(!0),this.btnEditDelete.SetEnabled(!0)),this.CurrentLabelID=t,this.CurrentLabelName=e,this.CurrentGroupName=i},this.NewDatasetSelected=function(t,e,i,s){this.labelDataset.SetHTML('<div style="font-size:16px;"><span style="color: white;">'+i+'</span><span style="color: gray"> / </span><span style="color: white">'+e+"</span></div>"),s?(this.btnDatasetRename.SetEnabled(!1),this.btnDatasetDelete.SetEnabled(!1)):(this.btnDatasetRename.SetEnabled(!0),this.btnDatasetDelete.SetEnabled(!0)),this.CurrentDatasetID=t,this.CurrentDatasetName=e,this.CurrentDatasetGroup=i},this.btnPrintRenameClick=async function(t){var e,i,s="",n="",r=null,o=null,a=0;e=this.CurrentLabelID,s=this.CurrentLabelName,n=this.CurrentGroupName;var l=[],h=this.tabLabelsList.getRows();for(a=0;a<h.length;a++)l.push(h[a].getCell("GROUP").getValue());i=[...new Set(l)],(o=pas.Classes.TStringList.$create("Create$1")).FDuplicates=0,o.SetCaseSensitive(!0),o.SetSorted(!0);for(var F=0,p=rtl.length(i)-1;F<=p;F++)a=F,"SAMPLES"!==pas.SysUtils.UpperCase(pas.SysUtils.Trim(i[a]))&&o.Add(pas.SysUtils.Trim(i[a]));(r=pas.UnitLabelName.TLabelNameForm.$create("Create$1",[this])).FPopup=!0,r.FPopupOpacity=.7,await r.Load(),r.Title.SetCaption("Rename Label"),r.edtLabelName.SetText(this.CurrentLabelName),r.cmbGroupName.SetItems(o),r.cmbGroupName.SetText(this.CurrentGroupName),r.edtLabelNameChange(null),r.edtLabelName.SetFocus();try{1===await r.Execute()&&(n=pas.SysUtils.Trim(r.cmbGroupName.GetText()),s=pas.SysUtils.Trim(r.edtLabelName.GetText()),this.tabLabelsList.updateRow(e,{GROUP:n,LABEL:s}).then((function(t){t.getTable().deselectRow(),t.select(),t.getTable().setGroupBy(""),t.getTable().setSort([{column:"LABEL",dir:"asc"},{column:"GROUP",dir:"asc"}]),t.getTable().setGroupBy("GROUP");var e=t.getCell("ID").getValue(),i=t.getCell("LABEL").getValue(),s=t.getCell("GROUP").getValue(),n=t.getCell("LOCK").getValue();pas.Unit1.Form1.NewLabelSelected(e,i,s,n)})))}finally{r=rtl.freeLoc(r)}},this.btnPrintCloneClick=async function(t){var e,i,s="",n="",r=null,o=null,a=0;e=pas.SysUtils.TGuidHelper.ToString.call(pas.SysUtils.TGuidHelper.NewGuid(),!1),s="",n="";var l=[],h=this.tabLabelsList.getRows();for(a=0;a<h.length;a++)l.push(h[a].getCell("GROUP").getValue());i=[...new Set(l)],(o=pas.Classes.TStringList.$create("Create$1")).FDuplicates=0,o.SetCaseSensitive(!0),o.SetSorted(!0);for(var F=0,p=rtl.length(i)-1;F<=p;F++)a=F,"SAMPLES"!==pas.SysUtils.UpperCase(pas.SysUtils.Trim(i[a]))&&o.Add(pas.SysUtils.Trim(i[a]));(r=pas.UnitLabelName.TLabelNameForm.$create("Create$1",[this])).FPopup=!0,r.FPopupOpacity=.7,await r.Load(),r.Title.SetCaption("Clone Label"),r.edtLabelName.SetText(this.CurrentLabelName+" (copy)"),r.cmbGroupName.SetItems(o),r.cmbGroupName.SetText(this.CurrentGroupName),r.edtLabelNameChange(null),r.edtLabelName.SetFocus();try{1===await r.Execute()&&(n=pas.SysUtils.Trim(r.cmbGroupName.GetText()),s=pas.SysUtils.Trim(r.edtLabelName.GetText()),this.tabLabelsList.addRow({ID:e,GROUP:n,LABEL:s,LOCK:!1}).then((function(t){t.getTable().deselectRow(),t.select(),t.getTable().setGroupBy(""),t.getTable().setSort([{column:"LABEL",dir:"asc"},{column:"GROUP",dir:"asc"}]),t.getTable().setGroupBy("GROUP");var e=t.getCell("ID").getValue(),i=t.getCell("LABEL").getValue(),s=t.getCell("GROUP").getValue(),n=t.getCell("LOCK").getValue();pas.Unit1.Form1.NewLabelSelected(e,i,s,n)})))}catch(t){if(!pas.SysUtils.Exception.isPrototypeOf(t))throw t;var c=t;window.console.log("Excpetion: ["+c.$classname+"] "+c.fMessage)}},this.btnPrintDeleteClick=function(t){var e=this.tabLabelsList,i=e.getRow(this.CurrentLabelID);if(i.getNextRow())var s=i.getNextRow();else s=i.getPrevRow();e.deleteRow(i),e.deselectRow(),s.select(),s.getTable().setGroupBy(""),s.getTable().setSort([{column:"LABEL",dir:"asc"},{column:"GROUP",dir:"asc"}]),s.getTable().setGroupBy("GROUP");var n=s.getCell("ID").getValue(),r=s.getCell("LABEL").getValue(),o=s.getCell("GROUP").getValue(),a=s.getCell("LOCK").getValue();pas.Unit1.Form1.NewLabelSelected(n,r,o,a)},this.ddPropertiesListHolderDropDown=function(t){this.tabPropertiesList.redraw()},this.NewPropertySelected=function(t,e,i,s){this.ddPropertiesListHolder.SetText(e+" / "+i),this.CurrentPropertyID=t,this.CurrentPropertyGroup=e,this.CurrentPropertyName=i,this.CurrentPropertyOptions=s},this.btnEditPropertiesAddClick=function(t){if(""!==this.ddPropertiesListHolder.GetText()){for(var e=[],i=0;i<256;i++)e[i]=(i<16?"0":"")+i.toString(16);function s(){var t=4294967295*Math.random()|0,i=4294967295*Math.random()|0,s=4294967295*Math.random()|0,n=4294967295*Math.random()|0;return e[255&t]+e[t>>8&255]+e[t>>16&255]+e[t>>24&255]+"-"+e[255&i]+e[i>>8&255]+"-"+e[i>>16&15|64]+e[i>>24&255]+"-"+e[63&s|128]+e[s>>8&255]+"-"+e[s>>16&255]+e[s>>24&255]+e[255&n]+e[n>>8&255]+e[n>>16&255]+e[n>>24&255]}var n=JSON.parse(JSON.stringify(this.CurrentPropertyOptions));for(i=0;i<n.length;i++)n[i].ID="["+s()+"]";this.tabEditProperties.addRow({ID:"["+s()+"]",GROUP:this.CurrentPropertyGroup,PROPERTY:this.CurrentPropertyName,OPTIONS:n}),this.tabEditProperties.redraw(!0)}},this.btnEditPropertiesDeleteClick=function(t){for(var e=this.tabEditProperties.getSelectedRows(),i=0;i<e.length;i++)0==e[i].getTreeParent()?this.tabEditProperties.deleteRow(e[i]):this.tabEditProperties.deleteRow(e[i].getTreeParent());this.tabEditProperties.redraw(!0)},this.btnEditPreviewClick=function(t){var e,i,s,n="",r="",o=0,a=0,l=0,h=0;this.divEditPreviewHolder.FHTML.SetTextStr(""),r="in",o=600,a=4,l=2;for(var F=this.tabEditProperties.getRows(),p=0;p<F.length;p++)if("Layout"==F[p].getCell("PROPERTY").getValue())for(var c=F[p].getCell("OPTIONS").getValue(),u=0;u<c.length;u++)"Units"==c[u].PROPERTY?r=c[u].VALUE:"Width"==c[u].PROPERTY?a=c[u].VALUE:"Height"==c[u].PROPERTY?l=c[u].VALUE:"DPI"==c[u].PROPERTY&&(o=c[u].VALUE);"in"===r&&(a*=o,l*=o),(h=(this.divEditPreviewHolder.GetWidth()-20)/a)>(s=(this.divEditPreviewHolder.GetHeight()-20)/l)&&(h=s),e=-(l-(this.divEditPreviewHolder.GetHeight()-20))/2,i=-(a-(this.divEditPreviewHolder.GetWidth()-20))/2,n='<div id="divEditPreviewLabel" style="position:absolute; overflow:hidden; border-radius: 25px; top:'+pas.SysUtils.FloatToStr(e+10)+"px; left:"+pas.SysUtils.FloatToStr(i+10)+"px; width:"+pas.SysUtils.FloatToStr(a)+"px; height:"+pas.SysUtils.FloatToStr(l)+"px; background-color: white; transform: scale("+pas.SysUtils.FloatToStr(h)+')">';var d="0px",S="0px",C="0px",T="0px",m="none",g="none",f="";for(F=this.tabEditProperties.getRows(),p=0;p<F.length;p++)if("Rectangle"==F[p].getCell("PROPERTY").getValue()){var b=F[p].getCell("OPTIONS").getValue();for(u=0;u<b.length;u++)"Top"==b[u].PROPERTY?d=b[u].VALUE:"Left"==b[u].PROPERTY?S=b[u].VALUE:"Width"==b[u].PROPERTY?C=b[u].VALUE:"Height"==b[u].PROPERTY?T=b[u].VALUE:"Stroke"==b[u].PROPERTY?m=b[u].VALUE:"Fill"==b[u].PROPERTY&&(g=b[u].VALUE);f+='<div style="position:absolute; top:'+d+"; left:"+S+"; width:"+C+"; height:"+T+"; border:"+m+"; background:"+g+';"></div>'}n+=f;var y="0px",L="0px",M="0px",E="0px",P="none",B="none",D="",N="",v="1",O="0deg";for(F=this.tabEditProperties.getRows(),p=0;p<F.length;p++)if("Code39"==F[p].getCell("PROPERTY").getValue()){var I=F[p].getCell("OPTIONS").getValue();for(u=0;u<I.length;u++)"Top"==I[u].PROPERTY?y=I[u].VALUE:"Left"==I[u].PROPERTY?L=I[u].VALUE:"Width"==I[u].PROPERTY?M=I[u].VALUE:"Height"==I[u].PROPERTY?E=I[u].VALUE:"Stroke"==I[u].PROPERTY?P=I[u].VALUE:"Fill"==I[u].PROPERTY?B=I[u].VALUE:"Data"==I[u].PROPERTY?D=I[u].VALUE:"Scale"==I[u].PROPERTY?v=I[u].VALUE:"Rotation"==I[u].PROPERTY&&(O=I[u].VALUE);N+='<div style="position:absolute; display:flex; justify-content:center; align-items:middle; top:'+y+"; left:"+L+"; width:"+M+"; height:"+E+"; border:"+P+"; transform: rotate("+O+"); background:"+B+';"><img height=100% width=auto src='+pas.Unit1.Form1.GenerateBarcode("Code39",D,parseInt(M),parseInt(E),v)+">"}n+=N;var W="0px",A="0px",G="0px",$="0px",R="none",x="none",w="",k="",H="Cairo",U="64px",j="blue",V="0deg",z="20px",X="20px",K="20px",J="20px";for(F=this.tabEditProperties.getRows(),p=0;p<F.length;p++)if("Text"==F[p].getCell("PROPERTY").getValue()){var Y=F[p].getCell("OPTIONS").getValue();for(u=0;u<Y.length;u++)"Top"==Y[u].PROPERTY?W=Y[u].VALUE:"Left"==Y[u].PROPERTY?A=Y[u].VALUE:"Width"==Y[u].PROPERTY?G=Y[u].VALUE:"Height"==Y[u].PROPERTY?$=Y[u].VALUE:"Stroke"==Y[u].PROPERTY?R=Y[u].VALUE:"Fill"==Y[u].PROPERTY?x=Y[u].VALUE:"Text"==Y[u].PROPERTY?k=Y[u].VALUE:"Font Family"==Y[u].PROPERTY?H=Y[u].VALUE:"Font Size"==Y[u].PROPERTY?U=Y[u].VALUE:"Font Color"==Y[u].PROPERTY?j=Y[u].VALUE:"Rotation"==Y[u].PROPERTY?V=Y[u].VALUE:"Alignment"==Y[u].PROPERTY?Y[u].VALUE:"Top-Left Rounding "==Y[u].PROPERTY?z=Y[u].VALUE:"Top-Right Rounding"==Y[u].PROPERTY?X=Y[u].VALUE:"Bottom-Left Rounding"==Y[u].PROPERTY?K=Y[u].VALUE:"Bottom-Right Rounding"==Y[u].PROPERTY&&(J=Y[u].VALUE);w+='<div style="position:absolute; display:flex; justify-content:center; align-items:middle; top:'+W+"; left:"+A+"; width:"+G+"; height:"+$+"; font-family:"+H+"; font-size:"+U+"; color:"+j+"; transform: rotate("+V+"); border-top-left-radius:"+z+"; border-top-right-radius:"+X+"; border-bottom-left-radius:"+K+"; border-bottom-right-radius:"+J+"; border:"+R+"; background:"+x+';">'+k+"</div>"}n+=w,this.divEditPreviewHolder.FHTML.SetTextStr(n+"</div>"),domtoimage.toPng(document.getElementById("divEditPreviewLabel"),{width:2400,height:1200}).then((function(t){pas.Unit1.Form1.CurrentLabel=t}))},this.GenerateBarcode=function(t,e,i,s,n){return"Code39"===t&&(this.wxBarcode.SetBarcodeType(12),this.wxBarcode.SetText(pas.SysUtils.UpperCase(e))),this.wxBarcode.SetScale(n),this.wxBarcode.SetWidth(i),this.wxBarcode.SetHeight(s),this.wxBarcode.GetBarcode(e).FData},this.btnDownloadPDFClick=function(t){var e,i=null;if(e=this.CurrentPDFData,"labels.pdf",0!==this.CurrentPDFData.length){"";try{i=pas["WEBLib.Crypto"].BinaryStringToAB(window.atob(e));try{!function(t,e,i){try{var s=new Blob([t],{type:i});saveAs(s,e)}catch(e){window.open("data:"+i+","+encodeURIComponent(t),"_blank","")}}(i,"labels.pdf","application/pdf")}catch(t){t.message}}catch(t){if(!pas.SysUtils.Exception.isPrototypeOf(t))throw t}}},this.btnUploadPDFClick=async function(t){await this.WebOpenDialog1.Perform()&&(this.CurrentPDFData=await this.WebOpenDialog1.FFiles.GetItem$1(0).FileAsBase64(),this.TMSFNCWXPDFViewer1.LoadFromBase64(this.CurrentPDFData,1,1,4))},this.btnPrintPDFClick=function(t){0!==this.CurrentPDFData.length&&printJS({printable:this.CurrentPDFData,type:"pdf",base64:!0})},this.btnGenerateLabelPDFClick=async function(t){var e=null,i=null,s=null,n=rtl.createIntfRefs();try{e=pas["WEBLib.TMSFNCPDFLib"].TTMSFNCPDFLib.$create("Create$5"),pas["WEBLib.TMSFNCGraphicsPDFEngine"].TTMSFNCGraphicsPDFEngine.$create("Create$3",[e]);try{e.SetBitmapContainer(this.TMSFNCBitmapContainer1),e.BeginDocument(""),e.SetHeader(""),e.SetHeaderSize(0),e.SetFooter(""),e.SetFooterSize(0),e.SetPageSize(34),e.SetPageOrientation(0),e.NewPage(),s=pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.CreateBitmapFromBase64(this.CurrentLabel,!1),n.ref(1,e.Graphics()).DrawImage$3(s,16777215,pas["WEBLib.TMSFNCTypes"].TRectF.$clone(pas["WEBLib.TMSFNCTypes"].RectF(50,350,550,600)),!0,!0,0,1,!0),i=e.EndDocument(!1),this.CurrentPDFData=pas["WEBLib.TMSFNCUtils"].TTMSFNCUtils.SaveStreamToBase64(i,!1),this.TMSFNCWXPDFViewer1.LoadFromBase64(this.CurrentPDFData,1,1,4)}finally{e=rtl.freeLoc(e),i=rtl.freeLoc(i)}}finally{n.free()}},this.splitterEditorMove=function(t){this.btnEditPreviewClick(null)},this.LoadDFMValues=function(){pas["WEBLib.Forms"].TCustomForm.LoadDFMValues.call(this),this.divLabelsList=pas["WEBLib.WebCtrls"].THTMLDiv.$create("Create$2",["divLabelsList"]),this.TMSFNCBitmapContainer1=pas["WEBLib.TMSFNCBitmapContainer"].TTMSFNCBitmapContainer.$create("Create$1",[this]),this.divMain=pas["WEBLib.WebCtrls"].THTMLDiv.$create("Create$2",["divMain"]),this.divTop=pas["WEBLib.WebCtrls"].THTMLDiv.$create("Create$2",["divTop"]),this.divButtonHolder=pas["WEBLib.ExtCtrls"].TPanel.$create("Create$2",["divButtonHolder"]),this.btnPagePrint=pas["WEBLib.StdCtrls"].TButton.$create("Create$2",["btnPagePrint"]),this.btnPageEdit=pas["WEBLib.StdCtrls"].TButton.$create("Create$2",["btnPageEdit"]),this.btnPageData=pas["WEBLib.StdCtrls"].TButton.$create("Create$2",["btnPageEdit"]),this.pageControl=pas["WEBLib.ComCtrls"].TPageControl.$create("Create$2",["pageControl"]),this.pagePrint=pas["WEBLib.ComCtrls"].TTabSheet.$create("Create$2",["pagePrint"]),this.divPrintButtonsHolder=pas["WEBLib.WebCtrls"].THTMLDiv.$create("Create$2",["divPrintButtonsHolder"]),this.labelPrintLabel=pas["WEBLib.StdCtrls"].TLabel.$create("Create$2",["labelPrintLabel"]),this.labelPrint=pas["WEBLib.StdCtrls"].TLabel.$create("Create$2",["labelPrint"]),this.btnPrintDelete=pas["WEBLib.StdCtrls"].TButton.$create("Create$2",["btnPrintDelete"]),this.btnPrintRename=pas["WEBLib.StdCtrls"].TButton.$create("Create$2",["btnPrintRename"]),this.btnPrintClone=pas["WEBLib.StdCtrls"].TButton.$create("Create$2",["btnPrintClone"]),this.btnPrintExport=pas["WEBLib.StdCtrls"].TButton.$create("Create$2",["btnPrintExport"]),this.btnPrintImport=pas["WEBLib.StdCtrls"].TButton.$create("Create$2",["btnPrintImport"]),this.divPrintingButtonsHolder=pas["WEBLib.WebCtrls"].THTMLDiv.$create("Create$2",["divPrintingButtonsHolder"]),this.TMSFNCWXPDFToolbar1=pas["WEBLib.TMSFNCWXPDFToolbar"].TTMSFNCWXPDFToolbar.$create("Create$1",[this]),this.btnPrintPDF=pas["WEBLib.StdCtrls"].TButton.$create("Create$2",["btnPrintPDF"]),this.btnDownloadPDF=pas["WEBLib.StdCtrls"].TButton.$create("Create$2",["btnDownloadPDF"]),this.btnUploadPDF=pas["WEBLib.StdCtrls"].TButton.$create("Create$2",["btnUploadPDF"]),this.divPrintHolder=pas["WEBLib.WebCtrls"].THTMLDiv.$create("Create$2",["divPrintHolder"]),this.divPrintOptionsHolder=pas["WEBLib.WebCtrls"].THTMLDiv.$create("Create$2",["divPrintOptionsHolder"]),this.btnGenerateLabelPDF=pas["WEBLib.StdCtrls"].TButton.$create("Create$2",["btnGenerateLabelPDF"]),this.divTest=pas["WEBLib.WebCtrls"].THTMLDiv.$create("Create$2",["divTest"]),this.splitterPrint=pas["WEBLib.ExtCtrls"].TSplitter.$create("Create$2",["splitterPrint"]),this.divPrintPreviewHolder=pas["WEBLib.WebCtrls"].THTMLDiv.$create("Create$2",["divPrintPreviewHolder"]),this.TMSFNCWXPDFViewer1=pas["WEBLib.TMSFNCWXPDFViewer"].TTMSFNCWXPDFViewer.$create("Create$1",[this]),this.TMSFNCWXPDFThumbnailList1=pas["WEBLib.TMSFNCWXPDFThumbnailList"].TTMSFNCWXPDFThumbnailList.$create("Create$1",[this]),this.pageEdit=pas["WEBLib.ComCtrls"].TTabSheet.$create("Create$2",["pageEdit"]),this.divEditButtonsHolder=pas["WEBLib.WebCtrls"].THTMLDiv.$create("Create$2",["divEditButtonsHolder"]),this.labelEdit=pas["WEBLib.StdCtrls"].TLabel.$create("Create$2",["labelEdit"]),this.labelEditLabel=pas["WEBLib.StdCtrls"].TLabel.$create("Create$2",["labelEditLabel"]),this.btnEditRename=pas["WEBLib.StdCtrls"].TButton.$create("Create$2",["btnEditRename"]),this.btnEditClone=pas["WEBLib.StdCtrls"].TButton.$create("Create$2",["btnEditClone"]),this.btnEditExport=pas["WEBLib.StdCtrls"].TButton.$create("Create$2",["btnEditExport"]),this.btnEditDelete=pas["WEBLib.StdCtrls"].TButton.$create("Create$2",["btnEditDelete"]),this.btnEditImport=pas["WEBLib.StdCtrls"].TButton.$create("Create$2",["btnEditImport"]),this.divEditor=pas["WEBLib.WebCtrls"].THTMLDiv.$create("Create$2",["divEditor"]),this.divEditPropertiesHolder=pas["WEBLib.WebCtrls"].THTMLDiv.$create("Create$2",["divEditPropertiesHolder"]),this.divEditProperties=pas["WEBLib.WebCtrls"].THTMLDiv.$create("Create$2",["divEditProperties"]),this.divEditPropertiesDetail=pas["WEBLib.WebCtrls"].THTMLDiv.$create("Create$2",["divEditPropertiesDetail"]),this.splitterProperties=pas["WEBLib.ExtCtrls"].TSplitter.$create("Create$2",["splitterProperties"]),this.splitterEditor=pas["WEBLib.ExtCtrls"].TSplitter.$create("Create$2",["splitterEditor"]),this.divEditPreviewHolder=pas["WEBLib.WebCtrls"].THTMLDiv.$create("Create$2",["divEditPreviewHolder"]),this.divEditPropertyButtons=pas["WEBLib.WebCtrls"].THTMLDiv.$create("Create$2",["divEditPropertyButtons"]),this.ddPropertiesListHolder=pas["WEBLib.DropDown"].TDropDownControl.$create("Create$2",["ddPropertiesListHolder"]),this.btnEditPropertiesAdd=pas["WEBLib.StdCtrls"].TButton.$create("Create$2",["btnEditPropertiesAdd"]),this.panelPropertiesList=pas["WEBLib.ExtCtrls"].TPanel.$create("Create$2",["panelPropertiesList"]),this.btnEditPropertiesDelete=pas["WEBLib.StdCtrls"].TButton.$create("Create$2",["btnEditPropertiesDelete"]),this.btnEditPreview=pas["WEBLib.StdCtrls"].TButton.$create("Create$2",["btnEditPreview"]),this.pageData=pas["WEBLib.ComCtrls"].TTabSheet.$create("Create$2",["pageData"]),this.divDatasetButtonsHolder=pas["WEBLib.WebCtrls"].THTMLDiv.$create("Create$2",["divDatasetButtonsHolder"]),this.labelDatasetLabel=pas["WEBLib.StdCtrls"].TLabel.$create("Create$2",["labelDatasetLabel"]),this.labelDataset=pas["WEBLib.StdCtrls"].TLabel.$create("Create$2",["labelDataset"]),this.btnDatasetDelete=pas["WEBLib.StdCtrls"].TButton.$create("Create$2",["btnDatasetDelete"]),this.btnDatasetExport=pas["WEBLib.StdCtrls"].TButton.$create("Create$2",["btnDatasetExport"]),this.btnDatasetImport=pas["WEBLib.StdCtrls"].TButton.$create("Create$2",["btnDatasetImport"]),this.btnDatasetClone=pas["WEBLib.StdCtrls"].TButton.$create("Create$2",["btnDatasetClone"]),this.btnDatasetRename=pas["WEBLib.StdCtrls"].TButton.$create("Create$2",["btnDatasetRename"]),this.divDatasetsHolder=pas["WEBLib.WebCtrls"].THTMLDiv.$create("Create$2",["divDatasetsHolder"]),this.divDatasetList=pas["WEBLib.WebCtrls"].THTMLDiv.$create("Create$2",["divDatasetList"]),this.divDataset=pas["WEBLib.WebCtrls"].THTMLDiv.$create("Create$2",["divDataset"]),this.WebSplitter1=pas["WEBLib.ExtCtrls"].TSplitter.$create("Create$2",["splitterMain"]),this.splitterMain=pas["WEBLib.ExtCtrls"].TSplitter.$create("Create$2",["splitterMain"]),this.wxBarcode=pas["WEBLib.TMSFNCWXBarcode"].TTMSFNCWXBarcode.$create("Create$1",[this]),this.WebOpenDialog1=pas["WEBLib.Dialogs"].TOpenDialog.$create("Create$1",[this]),this.divLabelsList.BeforeLoadDFMValues(),this.TMSFNCBitmapContainer1.BeforeLoadDFMValues(),this.divMain.BeforeLoadDFMValues(),this.divTop.BeforeLoadDFMValues(),this.divButtonHolder.BeforeLoadDFMValues(),this.btnPagePrint.BeforeLoadDFMValues(),this.btnPageEdit.BeforeLoadDFMValues(),this.btnPageData.BeforeLoadDFMValues(),this.pageControl.BeforeLoadDFMValues(),this.pagePrint.BeforeLoadDFMValues(),this.divPrintButtonsHolder.BeforeLoadDFMValues(),this.labelPrintLabel.BeforeLoadDFMValues(),this.labelPrint.BeforeLoadDFMValues(),this.btnPrintDelete.BeforeLoadDFMValues(),this.btnPrintRename.BeforeLoadDFMValues(),this.btnPrintClone.BeforeLoadDFMValues(),this.btnPrintExport.BeforeLoadDFMValues(),this.btnPrintImport.BeforeLoadDFMValues(),this.divPrintingButtonsHolder.BeforeLoadDFMValues(),this.TMSFNCWXPDFToolbar1.BeforeLoadDFMValues(),this.btnPrintPDF.BeforeLoadDFMValues(),this.btnDownloadPDF.BeforeLoadDFMValues(),this.btnUploadPDF.BeforeLoadDFMValues(),this.divPrintHolder.BeforeLoadDFMValues(),this.divPrintOptionsHolder.BeforeLoadDFMValues(),this.btnGenerateLabelPDF.BeforeLoadDFMValues(),this.divTest.BeforeLoadDFMValues(),this.splitterPrint.BeforeLoadDFMValues(),this.divPrintPreviewHolder.BeforeLoadDFMValues(),this.TMSFNCWXPDFViewer1.BeforeLoadDFMValues(),this.TMSFNCWXPDFThumbnailList1.BeforeLoadDFMValues(),this.pageEdit.BeforeLoadDFMValues(),this.divEditButtonsHolder.BeforeLoadDFMValues(),this.labelEdit.BeforeLoadDFMValues(),this.labelEditLabel.BeforeLoadDFMValues(),this.btnEditRename.BeforeLoadDFMValues(),this.btnEditClone.BeforeLoadDFMValues(),this.btnEditExport.BeforeLoadDFMValues(),this.btnEditDelete.BeforeLoadDFMValues(),this.btnEditImport.BeforeLoadDFMValues(),this.divEditor.BeforeLoadDFMValues(),this.divEditPropertiesHolder.BeforeLoadDFMValues(),this.divEditProperties.BeforeLoadDFMValues(),this.divEditPropertiesDetail.BeforeLoadDFMValues(),this.splitterProperties.BeforeLoadDFMValues(),this.splitterEditor.BeforeLoadDFMValues(),this.divEditPreviewHolder.BeforeLoadDFMValues(),this.divEditPropertyButtons.BeforeLoadDFMValues(),this.ddPropertiesListHolder.BeforeLoadDFMValues(),this.btnEditPropertiesAdd.BeforeLoadDFMValues(),this.panelPropertiesList.BeforeLoadDFMValues(),this.btnEditPropertiesDelete.BeforeLoadDFMValues(),this.btnEditPreview.BeforeLoadDFMValues(),this.pageData.BeforeLoadDFMValues(),this.divDatasetButtonsHolder.BeforeLoadDFMValues(),this.labelDatasetLabel.BeforeLoadDFMValues(),this.labelDataset.BeforeLoadDFMValues(),this.btnDatasetDelete.BeforeLoadDFMValues(),this.btnDatasetExport.BeforeLoadDFMValues(),this.btnDatasetImport.BeforeLoadDFMValues(),this.btnDatasetClone.BeforeLoadDFMValues(),this.btnDatasetRename.BeforeLoadDFMValues(),this.divDatasetsHolder.BeforeLoadDFMValues(),this.divDatasetList.BeforeLoadDFMValues(),this.divDataset.BeforeLoadDFMValues(),this.WebSplitter1.BeforeLoadDFMValues(),this.splitterMain.BeforeLoadDFMValues(),this.wxBarcode.BeforeLoadDFMValues(),this.WebOpenDialog1.BeforeLoadDFMValues();try{this.SetName("Form1"),this.SetWidth(1161),this.SetHeight(666),this.SetCaption("LabelsExample"),this.FCSSLibrary=1,this.SetElementFont(1),this.SetEvent(this,"OnCreate","WebFormCreate"),this.divLabelsList.SetParentComponent(this),this.divLabelsList.SetName("divLabelsList"),this.divLabelsList.SetAlignWithMargins(!0),this.divLabelsList.SetLeft(5),this.divLabelsList.SetTop(5),this.divLabelsList.SetWidth(300),this.divLabelsList.SetHeight(656),this.divLabelsList.FMargins.SetLeft(5),this.divLabelsList.FMargins.SetTop(5),this.divLabelsList.FMargins.SetRight(4),this.divLabelsList.FMargins.SetBottom(5),this.divLabelsList.SetElementClassName("rounded border overflow-hidden border-secondary bg-dark"),this.divLabelsList.SetAlign(3),this.divLabelsList.SetElementFont(1),this.divLabelsList.FHTML.BeginUpdate();try{this.divLabelsList.FHTML.Clear(),this.divLabelsList.FHTML.Add('<div style="font-size:16px;">'),this.divLabelsList.FHTML.Add('  <span style="color: white">&lt;No Label Selected&gt;</span>'),this.divLabelsList.FHTML.Add("</div>")}finally{this.divLabelsList.FHTML.EndUpdate()}this.divLabelsList.SetRole(""),this.TMSFNCBitmapContainer1.SetParentComponent(this.divLabelsList),this.TMSFNCBitmapContainer1.SetName("TMSFNCBitmapContainer1"),this.TMSFNCBitmapContainer1.SetLeft(72),this.TMSFNCBitmapContainer1.SetTop(440),this.TMSFNCBitmapContainer1.SetWidth(26),this.TMSFNCBitmapContainer1.SetHeight(26),this.TMSFNCBitmapContainer1.SetVisible(!0),this.divMain.SetParentComponent(this),this.divMain.SetName("divMain"),this.divMain.SetAlignWithMargins(!0),this.divMain.SetLeft(318),this.divMain.SetTop(5),this.divMain.SetWidth(838),this.divMain.SetHeight(656),this.divMain.FMargins.SetTop(5),this.divMain.FMargins.SetRight(5),this.divMain.FMargins.SetBottom(5),this.divMain.SetAlign(5),this.divMain.SetChildOrderEx(1),this.divMain.SetElementFont(1),this.divMain.SetRole(""),this.divTop.SetParentComponent(this.divMain),this.divTop.SetName("divTop"),this.divTop.SetLeft(0),this.divTop.SetTop(0),this.divTop.SetWidth(838),this.divTop.SetHeight(40),this.divTop.SetAlign(1),this.divTop.SetChildOrderEx(1),this.divTop.SetRole(""),this.divButtonHolder.SetParentComponent(this.divTop),this.divButtonHolder.SetName("divButtonHolder"),this.divButtonHolder.SetLeft(0),this.divButtonHolder.SetTop(0),this.divButtonHolder.SetWidth(529),this.divButtonHolder.SetHeight(40),this.divButtonHolder.SetElementClassName("border border-0 bg-none"),this.divButtonHolder.SetAlign(3),this.divButtonHolder.SetBorderColor(-1),this.divButtonHolder.SetColor(16711422),this.divButtonHolder.FElementBodyClassName="btn btn-group",this.divButtonHolder.SetElementFont(1),this.btnPagePrint.SetParentComponent(this.divButtonHolder),this.btnPagePrint.SetName("btnPagePrint"),this.btnPagePrint.SetLeft(0),this.btnPagePrint.SetTop(0),this.btnPagePrint.SetWidth(96),this.btnPagePrint.SetHeight(40),this.btnPagePrint.SetAlign(3),this.btnPagePrint.SetCaption('<i class="fa-solid fa-print pe-1"></i> Print Labels'),this.btnPagePrint.SetElementClassName("btn btn-primary px-3"),this.btnPagePrint.SetElementFont(1),this.btnPagePrint.SetElementPosition(2),this.btnPagePrint.SetHeightPercent(100),this.btnPagePrint.SetWidthStyle(2),this.btnPagePrint.SetWidthPercent(100),this.SetEvent$1(this.btnPagePrint,this,"OnClick","btnPagePrintClick"),this.btnPageEdit.SetParentComponent(this.divButtonHolder),this.btnPageEdit.SetName("btnPageEdit"),this.btnPageEdit.SetLeft(96),this.btnPageEdit.SetTop(0),this.btnPageEdit.SetWidth(96),this.btnPageEdit.SetHeight(40),this.btnPageEdit.SetAlign(3),this.btnPageEdit.SetCaption('<i class="fa-solid fa-pencil pe-1"></i> Edit Labels'),this.btnPageEdit.SetChildOrderEx(1),this.btnPageEdit.SetElementClassName("btn  btn-secondary px-3"),this.btnPageEdit.SetElementFont(1),this.btnPageEdit.SetElementPosition(2),this.btnPageEdit.SetHeightPercent(100),this.btnPageEdit.SetWidthStyle(2),this.btnPageEdit.SetWidthPercent(100),this.SetEvent$1(this.btnPageEdit,this,"OnClick","btnPageEditClick"),this.btnPageData.SetParentComponent(this.divButtonHolder),this.btnPageData.SetName("btnPageData"),this.btnPageData.SetLeft(192),this.btnPageData.SetTop(0),this.btnPageData.SetWidth(96),this.btnPageData.SetHeight(40),this.btnPageData.SetAlign(3),this.btnPageData.SetCaption('<i class="fa-solid fa-table pe-1"></i> Label Data'),this.btnPageData.SetChildOrderEx(2),this.btnPageData.SetElementClassName("btn btn-secondary px-3"),this.btnPageData.SetElementFont(1),this.btnPageData.SetElementPosition(2),this.btnPageData.SetHeightPercent(100),this.btnPageData.SetWidthStyle(2),this.btnPageData.SetWidthPercent(100),this.SetEvent$1(this.btnPageData,this,"OnClick","btnPageDataClick"),this.pageControl.SetParentComponent(this.divMain),this.pageControl.SetName("pageControl"),this.pageControl.SetAlignWithMargins(!0),this.pageControl.SetLeft(1),this.pageControl.SetTop(45),this.pageControl.SetWidth(837),this.pageControl.SetHeight(610),this.pageControl.FMargins.SetLeft(1),this.pageControl.FMargins.SetTop(5),this.pageControl.FMargins.SetRight(0),this.pageControl.FMargins.SetBottom(1),this.pageControl.SetAlign(5),this.pageControl.SetChildOrderEx(1),this.pageControl.SetElementFont(1),this.pageControl.SetTabIndex(0),this.pageControl.SetShowTabs(!1),this.pageControl.SetTabOrder(1),this.pagePrint.SetParentComponent(this.pageControl),this.pagePrint.SetName("pagePrint"),this.pagePrint.SetLeft(0),this.pagePrint.SetTop(20),this.pagePrint.SetWidth(837),this.pagePrint.SetHeight(590),this.pagePrint.SetElementClassName("rounded border border-secondary bg-dark overflow-visible"),this.pagePrint.SetAlign(5),this.pagePrint.SetCaption("Print"),this.pagePrint.SetElementFont(1),this.pagePrint.SetShowCaption(!1),this.pagePrint.SetTabVisible(!1),this.divPrintButtonsHolder.SetParentComponent(this.pagePrint),this.divPrintButtonsHolder.SetName("divPrintButtonsHolder"),this.divPrintButtonsHolder.SetAlignWithMargins(!0),this.divPrintButtonsHolder.SetLeft(5),this.divPrintButtonsHolder.SetTop(5),this.divPrintButtonsHolder.SetWidth(827),this.divPrintButtonsHolder.SetHeight(42),this.divPrintButtonsHolder.FMargins.SetLeft(5),this.divPrintButtonsHolder.FMargins.SetTop(5),this.divPrintButtonsHolder.FMargins.SetRight(5),this.divPrintButtonsHolder.FMargins.SetBottom(5),this.divPrintButtonsHolder.SetElementClassName("rounded border border-secondary"),this.divPrintButtonsHolder.SetAlign(1),this.divPrintButtonsHolder.SetElementFont(1),this.divPrintButtonsHolder.SetRole(""),this.labelPrintLabel.SetParentComponent(this.divPrintButtonsHolder),this.labelPrintLabel.SetName("labelPrintLabel"),this.labelPrintLabel.SetAlignWithMargins(!0),this.labelPrintLabel.SetLeft(3),this.labelPrintLabel.SetTop(3),this.labelPrintLabel.SetWidth(220),this.labelPrintLabel.SetHeight(36),this.labelPrintLabel.SetAlign(3),this.labelPrintLabel.SetAutoSize(!1),this.labelPrintLabel.SetElementClassName("text-white bg-secondary rounded-1"),this.labelPrintLabel.SetElementFont(1),this.labelPrintLabel.SetHeightPercent(100),this.labelPrintLabel.SetHTML('<div style="font-size: 13px;" class="px-2">Selected Label</div>'),this.labelPrintLabel.SetLayout(1),this.labelPrintLabel.SetWidthStyle(2),this.labelPrintLabel.SetWidthPercent(100),this.labelPrint.SetParentComponent(this.divPrintButtonsHolder),this.labelPrint.SetName("labelPrint"),this.labelPrint.SetAlignWithMargins(!0),this.labelPrint.SetLeft(229),this.labelPrint.SetTop(3),this.labelPrint.SetWidth(329),this.labelPrint.SetHeight(36),this.labelPrint.SetAlign(5),this.labelPrint.SetChildOrderEx(1),this.labelPrint.SetElementLabelClassName("pt-1 px-2"),this.labelPrint.SetHeightPercent(100),this.labelPrint.SetWidthStyle(2),this.labelPrint.SetWidthPercent(100),this.btnPrintDelete.SetParentComponent(this.divPrintButtonsHolder),this.btnPrintDelete.SetName("btnPrintDelete"),this.btnPrintDelete.SetAlignWithMargins(!0),this.btnPrintDelete.SetLeft(773),this.btnPrintDelete.SetTop(3),this.btnPrintDelete.SetWidth(50),this.btnPrintDelete.SetHeight(36),this.btnPrintDelete.FMargins.SetLeft(0),this.btnPrintDelete.FMargins.SetRight(4),this.btnPrintDelete.SetAlign(4),this.btnPrintDelete.SetCaption('<span class="px-2" style="font-size:13px;"><i class="fa-solid fa-trash-can pe-1"></i> Delete Label</span>'),this.btnPrintDelete.SetChildOrderEx(6),this.btnPrintDelete.SetElementClassName("btn btn-sm btn-danger"),this.btnPrintDelete.SetElementFont(1),this.btnPrintDelete.SetHeightPercent(100),this.btnPrintDelete.SetWidthStyle(2),this.btnPrintDelete.SetWidthPercent(100),this.SetEvent$1(this.btnPrintDelete,this,"OnClick","btnPrintDeleteClick"),this.btnPrintRename.SetParentComponent(this.divPrintButtonsHolder),this.btnPrintRename.SetName("btnPrintRename"),this.btnPrintRename.SetAlignWithMargins(!0),this.btnPrintRename.SetLeft(561),this.btnPrintRename.SetTop(3),this.btnPrintRename.SetWidth(50),this.btnPrintRename.SetHeight(36),this.btnPrintRename.FMargins.SetLeft(0),this.btnPrintRename.SetAlign(4),this.btnPrintRename.SetCaption('<span class="px-2" style="font-size:13px;"><i class="fa-solid fa-pencil pe-1"></i> Rename Label</span>'),this.btnPrintRename.SetChildOrderEx(2),this.btnPrintRename.SetElementClassName("btn btn-sm btn-success"),this.btnPrintRename.SetElementFont(1),this.btnPrintRename.SetHeightPercent(100),this.btnPrintRename.SetWidthStyle(2),this.btnPrintRename.SetWidthPercent(100),this.SetEvent$1(this.btnPrintRename,this,"OnClick","btnPrintRenameClick"),this.btnPrintClone.SetParentComponent(this.divPrintButtonsHolder),this.btnPrintClone.SetName("btnPrintClone"),this.btnPrintClone.SetAlignWithMargins(!0),this.btnPrintClone.SetLeft(614),this.btnPrintClone.SetTop(3),this.btnPrintClone.SetWidth(50),this.btnPrintClone.SetHeight(36),this.btnPrintClone.FMargins.SetLeft(0),this.btnPrintClone.SetAlign(4),this.btnPrintClone.SetCaption('<span class="px-2" style="font-size:13px;"><i class="fa-solid fa-clone pe-1"></i> Clone</span>'),this.btnPrintClone.SetChildOrderEx(3),this.btnPrintClone.SetElementClassName("btn btn-sm btn-success"),this.btnPrintClone.SetHeightPercent(100),this.btnPrintClone.SetWidthStyle(2),this.btnPrintClone.SetWidthPercent(100),this.SetEvent$1(this.btnPrintClone,this,"OnClick","btnPrintCloneClick"),this.btnPrintExport.SetParentComponent(this.divPrintButtonsHolder),this.btnPrintExport.SetName("btnPrintExport"),this.btnPrintExport.SetAlignWithMargins(!0),this.btnPrintExport.SetLeft(667),this.btnPrintExport.SetTop(3),this.btnPrintExport.SetWidth(50),this.btnPrintExport.SetHeight(36),this.btnPrintExport.FMargins.SetLeft(0),this.btnPrintExport.SetAlign(4),this.btnPrintExport.SetCaption('<span class="px-2" style="font-size:13px;"><i class="fa-solid fa-download pe-1"></i> Export</span>'),this.btnPrintExport.SetChildOrderEx(4),this.btnPrintExport.SetElementClassName("btn btn-sm btn-success"),this.btnPrintExport.SetHeightPercent(100),this.btnPrintExport.SetWidthStyle(2),this.btnPrintExport.SetWidthPercent(100),this.btnPrintImport.SetParentComponent(this.divPrintButtonsHolder),this.btnPrintImport.SetName("btnPrintImport"),this.btnPrintImport.SetAlignWithMargins(!0),this.btnPrintImport.SetLeft(720),this.btnPrintImport.SetTop(3),this.btnPrintImport.SetWidth(50),this.btnPrintImport.SetHeight(36),this.btnPrintImport.FMargins.SetLeft(0),this.btnPrintImport.SetAlign(4),this.btnPrintImport.SetCaption('<span class="px-2" style="font-size:13px;"><i class="fa-solid fa-upload pe-1"></i> Import</span>'),this.btnPrintImport.SetChildOrderEx(5),this.btnPrintImport.SetElementClassName("btn btn-sm btn-success"),this.btnPrintImport.SetHeightPercent(100),this.btnPrintImport.SetWidthStyle(2),this.btnPrintImport.SetWidthPercent(100),this.divPrintingButtonsHolder.SetParentComponent(this.pagePrint),this.divPrintingButtonsHolder.SetName("divPrintingButtonsHolder"),this.divPrintingButtonsHolder.SetAlignWithMargins(!0),this.divPrintingButtonsHolder.SetLeft(5),this.divPrintingButtonsHolder.SetTop(543),this.divPrintingButtonsHolder.SetWidth(827),this.divPrintingButtonsHolder.SetHeight(42),this.divPrintingButtonsHolder.FMargins.SetLeft(5),this.divPrintingButtonsHolder.FMargins.SetTop(5),this.divPrintingButtonsHolder.FMargins.SetRight(5),this.divPrintingButtonsHolder.FMargins.SetBottom(5),this.divPrintingButtonsHolder.SetElementClassName("overflow-hidden rounded border border-secondary d-flex justify-content-center align-items-center"),this.divPrintingButtonsHolder.SetAlign(2),this.divPrintingButtonsHolder.SetChildOrderEx(4),this.divPrintingButtonsHolder.SetRole(""),this.TMSFNCWXPDFToolbar1.SetParentComponent(this.divPrintingButtonsHolder),this.TMSFNCWXPDFToolbar1.SetName("TMSFNCWXPDFToolbar1"),this.TMSFNCWXPDFToolbar1.SetLeft(0),this.TMSFNCWXPDFToolbar1.SetTop(0),this.TMSFNCWXPDFToolbar1.SetWidth(356),this.TMSFNCWXPDFToolbar1.SetHeight(42),this.TMSFNCWXPDFToolbar1.SetAlign(3),this.TMSFNCWXPDFToolbar1.FBevelEdges={},this.TMSFNCWXPDFToolbar1.FBevelCut=0,this.TMSFNCWXPDFToolbar1.FBevelOuter=0,this.TMSFNCWXPDFToolbar1.FParentDoubleBuffered=!1,this.TMSFNCWXPDFToolbar1.SetColor(-1),this.TMSFNCWXPDFToolbar1.FDoubleBuffered=!0,this.TMSFNCWXPDFToolbar1.SetTabOrder(2),this.TMSFNCWXPDFToolbar1.FAppearance.SetItemWidth(35),this.TMSFNCWXPDFToolbar1.FAppearance.FStroke.SetColor(0),this.TMSFNCWXPDFToolbar1.FAppearance.FStrokeHover.SetColor(10061943),this.TMSFNCWXPDFToolbar1.FAppearance.FFillHover.SetColor(13419707),this.TMSFNCWXPDFToolbar1.FAppearance.FStrokeDown.SetColor(9470064),this.TMSFNCWXPDFToolbar1.FAppearance.FFillDown.SetColor(13156536),this.TMSFNCWXPDFToolbar1.FAppearance.FStrokeSelected.SetColor(5197615),this.TMSFNCWXPDFToolbar1.FAppearance.FFillSelected.SetColor(13156536),this.TMSFNCWXPDFToolbar1.FAppearance.FStrokeDisabled.SetColor(11119017),this.TMSFNCWXPDFToolbar1.FAppearance.FFillDisabled.SetColor(12632256),this.TMSFNCWXPDFToolbar1.FAppearance.FFont.FCharset=1,this.TMSFNCWXPDFToolbar1.FAppearance.FFont.SetColor(65793),this.TMSFNCWXPDFToolbar1.FAppearance.FFont.SetHeight(-11),this.TMSFNCWXPDFToolbar1.FAppearance.FFont.SetName("Tahoma"),this.TMSFNCWXPDFToolbar1.FAppearance.FFont.SetStyle({}),this.TMSFNCWXPDFToolbar1.GetItems().Clear(),this.TMSFNCWXPDFToolbar1.GetItems().Add$2().SetVisible(!1);var t=this.TMSFNCWXPDFToolbar1.GetItems().Add$2();t.SetEnabled(!1),t.FPDFRole=1;var e=this.TMSFNCWXPDFToolbar1.GetItems().Add$2();e.SetEnabled(!1),e.FPDFRole=2;var i=this.TMSFNCWXPDFToolbar1.GetItems().Add$2();i.SetEnabled(!1),i.FPDFRole=3;var s=this.TMSFNCWXPDFToolbar1.GetItems().Add$2();s.SetEnabled(!1),s.FPDFRole=4,this.TMSFNCWXPDFToolbar1.GetItems().Add$2().FPDFRole=6,this.TMSFNCWXPDFToolbar1.GetItems().Add$2().FPDFRole=5,this.TMSFNCWXPDFToolbar1.GetItems().Add$2().FPDFRole=7,this.TMSFNCWXPDFToolbar1.GetItems().Add$2().FPDFRole=8,this.TMSFNCWXPDFToolbar1.SetViewer(this.TMSFNCWXPDFViewer1),this.btnPrintPDF.SetParentComponent(this.divPrintingButtonsHolder),this.btnPrintPDF.SetName("btnPrintPDF"),this.btnPrintPDF.SetAlignWithMargins(!0),this.btnPrintPDF.SetLeft(392),this.btnPrintPDF.SetTop(3),this.btnPrintPDF.SetWidth(96),this.btnPrintPDF.SetHeight(34),this.btnPrintPDF.FMargins.SetLeft(0),this.btnPrintPDF.FMargins.SetRight(2),this.btnPrintPDF.SetCaption('<span class="px-2 mx-2" style="font-size:13px;"><i class="fa-solid fa-print pe-1"></i>Print PDF</span>'),this.btnPrintPDF.SetChildOrderEx(2),this.btnPrintPDF.SetElementClassName("btn btn-sm btn-primary  me-1"),this.btnPrintPDF.SetElementFont(1),this.btnPrintPDF.SetElementPosition(2),this.btnPrintPDF.SetHeightPercent(100),this.btnPrintPDF.SetWidthStyle(2),this.btnPrintPDF.SetWidthPercent(100),this.SetEvent$1(this.btnPrintPDF,this,"OnClick","btnPrintPDFClick"),this.btnDownloadPDF.SetParentComponent(this.divPrintingButtonsHolder),this.btnDownloadPDF.SetName("btnDownloadPDF"),this.btnDownloadPDF.SetAlignWithMargins(!0),this.btnDownloadPDF.SetLeft(593),this.btnDownloadPDF.SetTop(3),this.btnDownloadPDF.SetWidth(96),this.btnDownloadPDF.SetHeight(34),this.btnDownloadPDF.FMargins.SetLeft(2),this.btnDownloadPDF.SetCaption('<span class="px-2 mx-2" style="font-size:13px;"><i class="fa-solid fa-download pe-1"></i>Download PDF</span>'),this.btnDownloadPDF.SetChildOrderEx(2),this.btnDownloadPDF.SetElementClassName("btn btn-sm btn-success"),this.btnDownloadPDF.SetElementFont(1),this.btnDownloadPDF.SetElementPosition(2),this.btnDownloadPDF.SetHeightPercent(100),this.btnDownloadPDF.SetWidthStyle(2),this.btnDownloadPDF.SetWidthPercent(100),this.SetEvent$1(this.btnDownloadPDF,this,"OnClick","btnDownloadPDFClick"),this.btnUploadPDF.SetParentComponent(this.divPrintingButtonsHolder),this.btnUploadPDF.SetName("btnUploadPDF"),this.btnUploadPDF.SetAlignWithMargins(!0),this.btnUploadPDF.SetLeft(492),this.btnUploadPDF.SetTop(3),this.btnUploadPDF.SetWidth(96),this.btnUploadPDF.SetHeight(34),this.btnUploadPDF.FMargins.SetLeft(2),this.btnUploadPDF.SetCaption('<span class="px-2 mx-2" style="font-size:13px;"><i class="fa-solid fa-upload pe-1"></i>Upload PDF</span>'),this.btnUploadPDF.SetChildOrderEx(2),this.btnUploadPDF.SetElementClassName("btn btn-sm btn-success me-1"),this.btnUploadPDF.SetElementFont(1),this.btnUploadPDF.SetElementPosition(2),this.btnUploadPDF.SetHeightPercent(100),this.btnUploadPDF.SetWidthStyle(2),this.btnUploadPDF.SetWidthPercent(100),this.SetEvent$1(this.btnUploadPDF,this,"OnClick","btnUploadPDFClick"),this.divPrintHolder.SetParentComponent(this.pagePrint),this.divPrintHolder.SetName("divPrintHolder"),this.divPrintHolder.SetLeft(0),this.divPrintHolder.SetTop(52),this.divPrintHolder.SetWidth(837),this.divPrintHolder.SetHeight(486),this.divPrintHolder.SetAlign(5),this.divPrintHolder.SetChildOrderEx(5),this.divPrintHolder.SetRole(""),this.divPrintOptionsHolder.SetParentComponent(this.divPrintHolder),this.divPrintOptionsHolder.SetName("divPrintOptionsHolder"),this.divPrintOptionsHolder.SetAlignWithMargins(!0),this.divPrintOptionsHolder.SetLeft(5),this.divPrintOptionsHolder.SetTop(0),this.divPrintOptionsHolder.SetWidth(827),this.divPrintOptionsHolder.SetHeight(200),this.divPrintOptionsHolder.FMargins.SetLeft(5),this.divPrintOptionsHolder.FMargins.SetTop(0),this.divPrintOptionsHolder.FMargins.SetRight(5),this.divPrintOptionsHolder.FMargins.SetBottom(4),this.divPrintOptionsHolder.SetElementClassName("rounded border border-secondary"),this.divPrintOptionsHolder.SetAlign(1),this.divPrintOptionsHolder.SetChildOrderEx(1),this.divPrintOptionsHolder.SetElementFont(1),this.divPrintOptionsHolder.SetRole(""),this.btnGenerateLabelPDF.SetParentComponent(this.divPrintOptionsHolder),this.btnGenerateLabelPDF.SetName("btnGenerateLabelPDF"),this.btnGenerateLabelPDF.SetLeft(3),this.btnGenerateLabelPDF.SetTop(3),this.btnGenerateLabelPDF.SetWidth(96),this.btnGenerateLabelPDF.SetHeight(35),this.btnGenerateLabelPDF.SetCaption("Generate Labels"),this.btnGenerateLabelPDF.SetElementClassName("btn btn-primary btn-sm"),this.btnGenerateLabelPDF.SetElementFont(1),this.btnGenerateLabelPDF.SetHeightPercent(100),this.btnGenerateLabelPDF.SetWidthStyle(2),this.btnGenerateLabelPDF.SetWidthPercent(100),this.SetEvent$1(this.btnGenerateLabelPDF,this,"OnClick","btnGenerateLabelPDFClick"),this.divTest.SetParentComponent(this.divPrintOptionsHolder),this.divTest.SetName("divTest"),this.divTest.SetLeft(280),this.divTest.SetTop(10),this.divTest.SetWidth(432),this.divTest.SetHeight(145),this.divTest.SetChildOrderEx(1),this.divTest.SetElementFont(1),this.divTest.SetRole(""),this.splitterPrint.SetParentComponent(this.divPrintHolder),this.splitterPrint.SetName("splitterPrint"),this.splitterPrint.SetAlignWithMargins(!0),this.splitterPrint.SetLeft(75),this.splitterPrint.SetTop(204),this.splitterPrint.SetWidth(687),this.splitterPrint.SetHeight(6),this.splitterPrint.SetControlCursor(15),this.splitterPrint.FMargins.SetLeft(75),this.splitterPrint.FMargins.SetTop(0),this.splitterPrint.FMargins.SetRight(75),this.splitterPrint.FMargins.SetBottom(0),this.splitterPrint.SetElementClassName("rounded"),this.splitterPrint.SetAlign(1),this.splitterPrint.SetChildOrderEx(2),this.splitterPrint.SetColor(8421504),this.splitterPrint.SetGripColor(8421504),this.divPrintPreviewHolder.SetParentComponent(this.divPrintHolder),this.divPrintPreviewHolder.SetName("divPrintPreviewHolder"),this.divPrintPreviewHolder.SetAlignWithMargins(!0),this.divPrintPreviewHolder.SetLeft(5),this.divPrintPreviewHolder.SetTop(214),this.divPrintPreviewHolder.SetWidth(827),this.divPrintPreviewHolder.SetHeight(272),this.divPrintPreviewHolder.FMargins.SetLeft(5),this.divPrintPreviewHolder.FMargins.SetTop(4),this.divPrintPreviewHolder.FMargins.SetRight(5),this.divPrintPreviewHolder.FMargins.SetBottom(0),this.divPrintPreviewHolder.SetElementClassName("overflow-hidden rounded border border-secondary"),this.divPrintPreviewHolder.SetAlign(5),this.divPrintPreviewHolder.SetChildOrderEx(3),this.divPrintPreviewHolder.SetElementFont(1),this.divPrintPreviewHolder.SetRole(""),this.TMSFNCWXPDFViewer1.SetParentComponent(this.divPrintPreviewHolder),this.TMSFNCWXPDFViewer1.SetName("TMSFNCWXPDFViewer1"),this.TMSFNCWXPDFViewer1.SetLeft(200),this.TMSFNCWXPDFViewer1.SetTop(0),this.TMSFNCWXPDFViewer1.SetWidth(627),this.TMSFNCWXPDFViewer1.SetHeight(272),this.TMSFNCWXPDFViewer1.SetAlign(5),this.TMSFNCWXPDFViewer1.FParentDoubleBuffered=!1,this.TMSFNCWXPDFViewer1.FDoubleBuffered=!0,this.TMSFNCWXPDFViewer1.SetTabOrder(0),this.TMSFNCWXPDFViewer1.FCalculateThumbnails=!0,this.TMSFNCWXPDFViewer1.SetZoom(1),this.TMSFNCWXPDFViewer1.SetThumbnailSize(150),this.TMSFNCWXPDFThumbnailList1.SetParentComponent(this.divPrintPreviewHolder),this.TMSFNCWXPDFThumbnailList1.SetName("TMSFNCWXPDFThumbnailList1"),this.TMSFNCWXPDFThumbnailList1.SetLeft(0),this.TMSFNCWXPDFThumbnailList1.SetTop(0),this.TMSFNCWXPDFThumbnailList1.SetWidth(200),this.TMSFNCWXPDFThumbnailList1.SetHeight(272),this.TMSFNCWXPDFThumbnailList1.SetAlign(3),this.TMSFNCWXPDFThumbnailList1.FParentDoubleBuffered=!1,this.TMSFNCWXPDFThumbnailList1.FDoubleBuffered=!0,this.TMSFNCWXPDFThumbnailList1.SetTabOrder(1),this.TMSFNCWXPDFThumbnailList1.FAppearance.FStroke.SetColor(11119017),this.TMSFNCWXPDFThumbnailList1.FAppearance.FStrokeHover.SetColor(10061943),this.TMSFNCWXPDFThumbnailList1.FAppearance.FFillHover.SetColor(13419707),this.TMSFNCWXPDFThumbnailList1.FAppearance.FStrokeDown.SetColor(9470064),this.TMSFNCWXPDFThumbnailList1.FAppearance.FFillDown.SetColor(13156536),this.TMSFNCWXPDFThumbnailList1.FAppearance.FStrokeSelected.SetColor(5197615),this.TMSFNCWXPDFThumbnailList1.FAppearance.FFillSelected.SetColor(13156536),this.TMSFNCWXPDFThumbnailList1.FAppearance.FStrokeDisabled.SetColor(11119017),this.TMSFNCWXPDFThumbnailList1.FAppearance.FFillDisabled.SetColor(12632256),this.TMSFNCWXPDFThumbnailList1.FAppearance.FFont.FCharset=1,this.TMSFNCWXPDFThumbnailList1.FAppearance.FFont.SetColor(65793),this.TMSFNCWXPDFThumbnailList1.FAppearance.FFont.SetHeight(-11),this.TMSFNCWXPDFThumbnailList1.FAppearance.FFont.SetName("Tahoma"),this.TMSFNCWXPDFThumbnailList1.FAppearance.FFont.SetStyle({}),this.TMSFNCWXPDFThumbnailList1.FAppearance.SetTextFormat("Page %d"),this.TMSFNCWXPDFThumbnailList1.SetViewer(this.TMSFNCWXPDFViewer1),this.pageEdit.SetParentComponent(this.pageControl),this.pageEdit.SetName("pageEdit"),this.pageEdit.SetAlignWithMargins(!0),this.pageEdit.SetLeft(0),this.pageEdit.SetTop(20),this.pageEdit.SetWidth(837),this.pageEdit.SetHeight(590),this.pageEdit.FMargins.SetLeft(0),this.pageEdit.FMargins.SetTop(0),this.pageEdit.FMargins.SetRight(0),this.pageEdit.FMargins.SetBottom(1),this.pageEdit.SetElementClassName("rounded border border-secondary bg-dark"),this.pageEdit.SetCaption("Edit"),this.pageEdit.SetChildOrderEx(1),this.pageEdit.SetElementFont(1),this.divEditButtonsHolder.SetParentComponent(this.pageEdit),this.divEditButtonsHolder.SetName("divEditButtonsHolder"),this.divEditButtonsHolder.SetAlignWithMargins(!0),this.divEditButtonsHolder.SetLeft(5),this.divEditButtonsHolder.SetTop(5),this.divEditButtonsHolder.SetWidth(827),this.divEditButtonsHolder.SetHeight(42),this.divEditButtonsHolder.FMargins.SetLeft(5),this.divEditButtonsHolder.FMargins.SetTop(5),this.divEditButtonsHolder.FMargins.SetRight(5),this.divEditButtonsHolder.FMargins.SetBottom(5),this.divEditButtonsHolder.SetElementClassName("rounded border border-secondary"),this.divEditButtonsHolder.SetAlign(1),this.divEditButtonsHolder.SetChildOrderEx(3),this.divEditButtonsHolder.SetRole(""),this.labelEdit.SetParentComponent(this.divEditButtonsHolder),this.labelEdit.SetName("labelEdit"),this.labelEdit.SetAlignWithMargins(!0),this.labelEdit.SetLeft(229),this.labelEdit.SetTop(3),this.labelEdit.SetWidth(329),this.labelEdit.SetHeight(36),this.labelEdit.SetAlign(5),this.labelEdit.SetChildOrderEx(1),this.labelEdit.SetElementLabelClassName("pt-1 px-2"),this.labelEdit.SetHeightPercent(100),this.labelEdit.SetWidthStyle(2),this.labelEdit.SetWidthPercent(100),this.labelEditLabel.SetParentComponent(this.divEditButtonsHolder),this.labelEditLabel.SetName("labelEditLabel"),this.labelEditLabel.SetAlignWithMargins(!0),this.labelEditLabel.SetLeft(3),this.labelEditLabel.SetTop(3),this.labelEditLabel.SetWidth(220),this.labelEditLabel.SetHeight(36),this.labelEditLabel.SetAlign(3),this.labelEditLabel.SetAutoSize(!1),this.labelEditLabel.SetElementClassName("text-white bg-secondary rounded-1"),this.labelEditLabel.SetElementFont(1),this.labelEditLabel.SetHeightPercent(100),this.labelEditLabel.SetHTML('<div style="font-size: 13px;" class="px-2">Selected Label</div>'),this.labelEditLabel.SetLayout(1),this.labelEditLabel.SetWidthStyle(2),this.labelEditLabel.SetWidthPercent(100),this.btnEditRename.SetParentComponent(this.divEditButtonsHolder),this.btnEditRename.SetName("btnEditRename"),this.btnEditRename.SetAlignWithMargins(!0),this.btnEditRename.SetLeft(561),this.btnEditRename.SetTop(3),this.btnEditRename.SetWidth(50),this.btnEditRename.SetHeight(36),this.btnEditRename.FMargins.SetLeft(0),this.btnEditRename.SetAlign(4),this.btnEditRename.SetCaption('<span class="px-2" style="font-size:13px;"><i class="fa-solid fa-pencil pe-1"></i> Rename Label</span>'),this.btnEditRename.SetChildOrderEx(2),this.btnEditRename.SetElementClassName("btn btn-sm btn-success"),this.btnEditRename.SetElementFont(1),this.btnEditRename.SetHeightPercent(100),this.btnEditRename.SetWidthStyle(2),this.btnEditRename.SetWidthPercent(100),this.SetEvent$1(this.btnEditRename,this,"OnClick","btnPrintRenameClick"),this.btnEditClone.SetParentComponent(this.divEditButtonsHolder),this.btnEditClone.SetName("btnEditClone"),this.btnEditClone.SetAlignWithMargins(!0),this.btnEditClone.SetLeft(614),this.btnEditClone.SetTop(3),this.btnEditClone.SetWidth(50),this.btnEditClone.SetHeight(36),this.btnEditClone.FMargins.SetLeft(0),this.btnEditClone.SetAlign(4),this.btnEditClone.SetCaption('<span class="px-2" style="font-size:13px;"><i class="fa-solid fa-clone pe-1"></i> Clone</span>'),this.btnEditClone.SetChildOrderEx(3),this.btnEditClone.SetElementClassName("btn btn-sm btn-success"),this.btnEditClone.SetElementFont(1),this.btnEditClone.SetHeightPercent(100),this.btnEditClone.SetWidthStyle(2),this.btnEditClone.SetWidthPercent(100),this.SetEvent$1(this.btnEditClone,this,"OnClick","btnPrintCloneClick"),this.btnEditExport.SetParentComponent(this.divEditButtonsHolder),this.btnEditExport.SetName("btnEditExport"),this.btnEditExport.SetAlignWithMargins(!0),this.btnEditExport.SetLeft(667),this.btnEditExport.SetTop(3),this.btnEditExport.SetWidth(50),this.btnEditExport.SetHeight(36),this.btnEditExport.FMargins.SetLeft(0),this.btnEditExport.SetAlign(4),this.btnEditExport.SetCaption('<span class="px-2" style="font-size:13px;"><i class="fa-solid fa-download pe-1"></i> Export</span>'),this.btnEditExport.SetChildOrderEx(4),this.btnEditExport.SetElementClassName("btn btn-sm btn-success"),this.btnEditExport.SetHeightPercent(100),this.btnEditExport.SetWidthStyle(2),this.btnEditExport.SetWidthPercent(100),this.btnEditDelete.SetParentComponent(this.divEditButtonsHolder),this.btnEditDelete.SetName("btnEditDelete"),this.btnEditDelete.SetAlignWithMargins(!0),this.btnEditDelete.SetLeft(773),this.btnEditDelete.SetTop(3),this.btnEditDelete.SetWidth(50),this.btnEditDelete.SetHeight(36),this.btnEditDelete.FMargins.SetLeft(0),this.btnEditDelete.FMargins.SetRight(4),this.btnEditDelete.SetAlign(4),this.btnEditDelete.SetCaption('<span class="px-2" style="font-size:13px;"><i class="fa-solid fa-trash-can pe-1"></i> Delete Label</span>'),this.btnEditDelete.SetChildOrderEx(6),this.btnEditDelete.SetElementClassName("btn btn-sm btn-danger"),this.btnEditDelete.SetElementFont(1),this.btnEditDelete.SetHeightPercent(100),this.btnEditDelete.SetWidthStyle(2),this.btnEditDelete.SetWidthPercent(100),this.btnEditImport.SetParentComponent(this.divEditButtonsHolder),this.btnEditImport.SetName("btnEditImport"),this.btnEditImport.SetAlignWithMargins(!0),this.btnEditImport.SetLeft(720),this.btnEditImport.SetTop(3),this.btnEditImport.SetWidth(50),this.btnEditImport.SetHeight(36),this.btnEditImport.FMargins.SetLeft(0),this.btnEditImport.SetAlign(4),this.btnEditImport.SetCaption('<span class="px-2" style="font-size:13px;"><i class="fa-solid fa-upload pe-1"></i> Import</span>'),this.btnEditImport.SetChildOrderEx(5),this.btnEditImport.SetElementClassName("btn btn-sm btn-success"),this.btnEditImport.SetHeightPercent(100),this.btnEditImport.SetWidthStyle(2),this.btnEditImport.SetWidthPercent(100),this.divEditor.SetParentComponent(this.pageEdit),this.divEditor.SetName("divEditor"),this.divEditor.SetLeft(0),this.divEditor.SetTop(99),this.divEditor.SetWidth(837),this.divEditor.SetHeight(491),this.divEditor.SetAlign(5),this.divEditor.SetChildOrderEx(5),this.divEditor.SetElementFont(1),this.divEditor.SetRole(""),this.divEditPropertiesHolder.SetParentComponent(this.divEditor),this.divEditPropertiesHolder.SetName("divEditPropertiesHolder"),this.divEditPropertiesHolder.SetAlignWithMargins(!0),this.divEditPropertiesHolder.SetLeft(0),this.divEditPropertiesHolder.SetTop(0),this.divEditPropertiesHolder.SetWidth(837),this.divEditPropertiesHolder.SetHeight(224),this.divEditPropertiesHolder.FMargins.SetLeft(0),this.divEditPropertiesHolder.FMargins.SetTop(0),this.divEditPropertiesHolder.FMargins.SetRight(0),this.divEditPropertiesHolder.FMargins.SetBottom(0),this.divEditPropertiesHolder.SetAlign(1),this.divEditPropertiesHolder.SetAnchors(rtl.createSet(0,1,2,3)),this.divEditPropertiesHolder.SetChildOrderEx(1),this.divEditPropertiesHolder.SetElementFont(1),this.divEditPropertiesHolder.SetRole(""),this.divEditProperties.SetParentComponent(this.divEditPropertiesHolder),this.divEditProperties.SetName("divEditProperties"),this.divEditProperties.SetAlignWithMargins(!0),this.divEditProperties.SetLeft(5),this.divEditProperties.SetTop(0),this.divEditProperties.SetWidth(514),this.divEditProperties.SetHeight(220),this.divEditProperties.FMargins.SetLeft(5),this.divEditProperties.FMargins.SetTop(0),this.divEditProperties.FMargins.SetRight(4),this.divEditProperties.FMargins.SetBottom(4),this.divEditProperties.SetElementClassName("rounded border border-secondary overflow-hidden"),this.divEditProperties.SetAlign(3),this.divEditProperties.SetAnchors(rtl.createSet(0,1,2,3)),this.divEditProperties.SetElementFont(1),this.divEditProperties.SetRole(""),this.divEditPropertiesDetail.SetParentComponent(this.divEditPropertiesHolder),this.divEditPropertiesDetail.SetName("divEditPropertiesDetail"),this.divEditPropertiesDetail.SetAlignWithMargins(!0),this.divEditPropertiesDetail.SetLeft(532),this.divEditPropertiesDetail.SetTop(0),this.divEditPropertiesDetail.SetWidth(300),this.divEditPropertiesDetail.SetHeight(220),this.divEditPropertiesDetail.FMargins.SetLeft(4),this.divEditPropertiesDetail.FMargins.SetTop(0),this.divEditPropertiesDetail.FMargins.SetRight(5),this.divEditPropertiesDetail.FMargins.SetBottom(4),this.divEditPropertiesDetail.SetElementClassName("rounded border border-secondary"),this.divEditPropertiesDetail.SetAlign(5),this.divEditPropertiesDetail.SetChildOrderEx(2),this.divEditPropertiesDetail.SetElementFont(1),this.divEditPropertiesDetail.SetRole(""),this.splitterProperties.SetParentComponent(this.divEditPropertiesHolder),this.splitterProperties.SetName("splitterProperties"),this.splitterProperties.SetAlignWithMargins(!0),this.splitterProperties.SetLeft(523),this.splitterProperties.SetTop(25),this.splitterProperties.SetWidth(5),this.splitterProperties.SetHeight(174),this.splitterProperties.SetControlCursor(14),this.splitterProperties.FMargins.SetLeft(0),this.splitterProperties.FMargins.SetTop(25),this.splitterProperties.FMargins.SetRight(0),this.splitterProperties.FMargins.SetBottom(25),this.splitterProperties.SetElementClassName("rounded"),this.splitterProperties.SetAlign(3),this.splitterProperties.SetChildOrderEx(1),this.splitterProperties.SetColor(8421504),this.splitterProperties.SetGripColor(8421504),this.splitterEditor.SetParentComponent(this.divEditor),this.splitterEditor.SetName("splitterEditor"),this.splitterEditor.SetAlignWithMargins(!0),this.splitterEditor.SetLeft(75),this.splitterEditor.SetTop(224),this.splitterEditor.SetWidth(687),this.splitterEditor.SetHeight(6),this.splitterEditor.SetControlCursor(15),this.splitterEditor.FMargins.SetLeft(75),this.splitterEditor.FMargins.SetTop(0),this.splitterEditor.FMargins.SetRight(75),this.splitterEditor.FMargins.SetBottom(0),this.splitterEditor.SetElementClassName("rounded"),this.splitterEditor.SetAlign(1),this.splitterEditor.SetChildOrderEx(2),this.splitterEditor.SetColor(8421504),this.splitterEditor.SetGripColor(8421504),this.SetEvent$1(this.splitterEditor,this,"OnMove","splitterEditorMove"),this.divEditPreviewHolder.SetParentComponent(this.divEditor),this.divEditPreviewHolder.SetName("divEditPreviewHolder"),this.divEditPreviewHolder.SetAlignWithMargins(!0),this.divEditPreviewHolder.SetLeft(5),this.divEditPreviewHolder.SetTop(234),this.divEditPreviewHolder.SetWidth(827),this.divEditPreviewHolder.SetHeight(252),this.divEditPreviewHolder.FMargins.SetLeft(5),this.divEditPreviewHolder.FMargins.SetTop(4),this.divEditPreviewHolder.FMargins.SetRight(5),this.divEditPreviewHolder.FMargins.SetBottom(5),this.divEditPreviewHolder.SetElementClassName("overflow-hidden rounded border border-secondary"),this.divEditPreviewHolder.SetAlign(5),this.divEditPreviewHolder.SetChildOrderEx(3),this.divEditPreviewHolder.SetElementFont(1),this.divEditPreviewHolder.SetRole(""),this.divEditPropertyButtons.SetParentComponent(this.pageEdit),this.divEditPropertyButtons.SetName("divEditPropertyButtons"),this.divEditPropertyButtons.SetAlignWithMargins(!0),this.divEditPropertyButtons.SetLeft(5),this.divEditPropertyButtons.SetTop(52),this.divEditPropertyButtons.SetWidth(827),this.divEditPropertyButtons.SetHeight(42),this.divEditPropertyButtons.FMargins.SetLeft(5),this.divEditPropertyButtons.FMargins.SetTop(0),this.divEditPropertyButtons.FMargins.SetRight(5),this.divEditPropertyButtons.FMargins.SetBottom(5),this.divEditPropertyButtons.SetElementClassName("rounded border border-secondary"),this.divEditPropertyButtons.SetAlign(1),this.divEditPropertyButtons.SetChildOrderEx(2),this.divEditPropertyButtons.SetElementFont(1),this.divEditPropertyButtons.SetRole(""),this.ddPropertiesListHolder.SetParentComponent(this.divEditPropertyButtons),this.ddPropertiesListHolder.SetName("ddPropertiesListHolder"),this.ddPropertiesListHolder.SetAlignWithMargins(!0),this.ddPropertiesListHolder.SetLeft(3),this.ddPropertiesListHolder.SetTop(3),this.ddPropertiesListHolder.SetWidth(300),this.ddPropertiesListHolder.SetHeight(36),this.ddPropertiesListHolder.SetElementClassName("ps-2 rounded-1 border border-0 bg-white overflow-hidden"),this.ddPropertiesListHolder.SetAlign(3),this.ddPropertiesListHolder.FAutoDropDown=!0,this.ddPropertiesListHolder.SetColor(16777215),this.ddPropertiesListHolder.FControl=this.panelPropertiesList,this.ddPropertiesListHolder.FDropDownColor=1193046,this.ddPropertiesListHolder.FDropDownHeight=500,this.ddPropertiesListHolder.FDropDownShadow=!1,this.ddPropertiesListHolder.FDropDownWidth=300,this.ddPropertiesListHolder.FElementInputClassName="ddPropertiesListInput",this.ddPropertiesListHolder.SetElementFont(1),this.ddPropertiesListHolder.SetParentColor(!1),this.ddPropertiesListHolder.SetTabOrder(0),this.ddPropertiesListHolder.SetText(""),this.SetEvent$1(this.ddPropertiesListHolder,this,"OnDropDown","ddPropertiesListHolderDropDown"),this.btnEditPropertiesAdd.SetParentComponent(this.divEditPropertyButtons),this.btnEditPropertiesAdd.SetName("btnEditPropertiesAdd"),this.btnEditPropertiesAdd.SetAlignWithMargins(!0),this.btnEditPropertiesAdd.SetLeft(306),this.btnEditPropertiesAdd.SetTop(3),this.btnEditPropertiesAdd.SetWidth(50),this.btnEditPropertiesAdd.SetHeight(36),this.btnEditPropertiesAdd.FMargins.SetLeft(0),this.btnEditPropertiesAdd.SetAlign(3),this.btnEditPropertiesAdd.SetCaption('<span class="px-2" style="font-size:13px;"><i class="fa-solid fa-plus pe-1"></i> Add Property</span>'),this.btnEditPropertiesAdd.SetChildOrderEx(2),this.btnEditPropertiesAdd.SetElementClassName("btn btn-sm btn-success"),this.btnEditPropertiesAdd.SetElementFont(1),this.btnEditPropertiesAdd.SetHeightPercent(100),this.btnEditPropertiesAdd.SetWidthStyle(2),this.btnEditPropertiesAdd.SetWidthPercent(100),this.SetEvent$1(this.btnEditPropertiesAdd,this,"OnClick","btnEditPropertiesAddClick"),this.panelPropertiesList.SetParentComponent(this.divEditPropertyButtons),this.panelPropertiesList.SetName("panelPropertiesList"),this.panelPropertiesList.SetLeft(624),this.panelPropertiesList.SetTop(10),this.panelPropertiesList.SetWidth(150),this.panelPropertiesList.SetHeight(31),this.panelPropertiesList.SetElementClassName("border border-secondary bg-none w-100 h-100 m-0 p-0 rounded-1"),this.panelPropertiesList.SetBorderColor(-1),this.panelPropertiesList.SetBorderStyle(0),this.panelPropertiesList.SetCaption("panelPropertiesList"),this.panelPropertiesList.SetChildOrderEx(3),this.panelPropertiesList.SetColor(16711422),this.panelPropertiesList.FElementBodyClassName="bg-none",this.panelPropertiesList.SetElementFont(1),this.panelPropertiesList.SetVisible(!1),this.btnEditPropertiesDelete.SetParentComponent(this.divEditPropertyButtons),this.btnEditPropertiesDelete.SetName("btnEditPropertiesDelete"),this.btnEditPropertiesDelete.SetAlignWithMargins(!0),this.btnEditPropertiesDelete.SetLeft(774),this.btnEditPropertiesDelete.SetTop(3),this.btnEditPropertiesDelete.SetWidth(50),this.btnEditPropertiesDelete.SetHeight(36),this.btnEditPropertiesDelete.FMargins.SetLeft(0),this.btnEditPropertiesDelete.SetAlign(4),this.btnEditPropertiesDelete.SetCaption('<span class="px-2" style="font-size:13px;"><i class="fa-solid fa-trash-can pe-1"></i> Delete Property</span>'),this.btnEditPropertiesDelete.SetChildOrderEx(2),this.btnEditPropertiesDelete.SetElementClassName("btn btn-sm btn-danger"),this.btnEditPropertiesDelete.SetElementFont(1),this.btnEditPropertiesDelete.SetHeightPercent(100),this.btnEditPropertiesDelete.SetWidthStyle(2),this.btnEditPropertiesDelete.SetWidthPercent(100),this.SetEvent$1(this.btnEditPropertiesDelete,this,"OnClick","btnEditPropertiesDeleteClick"),this.btnEditPreview.SetParentComponent(this.divEditPropertyButtons),this.btnEditPreview.SetName("btnEditPreview"),this.btnEditPreview.SetAlignWithMargins(!0),this.btnEditPreview.SetLeft(359),this.btnEditPreview.SetTop(3),this.btnEditPreview.SetWidth(50),this.btnEditPreview.SetHeight(36),this.btnEditPreview.FMargins.SetLeft(0),this.btnEditPreview.SetAlign(3),this.btnEditPreview.SetCaption('<span class="px-2" style="font-size:13px;"><i class="fa-solid fa-eye pe-1"></i> Preview Label</span>'),this.btnEditPreview.SetChildOrderEx(2),this.btnEditPreview.SetElementClassName("btn btn-sm btn-primary"),this.btnEditPreview.SetElementFont(1),this.btnEditPreview.SetHeightPercent(100),this.btnEditPreview.SetWidthStyle(2),this.btnEditPreview.SetWidthPercent(100),this.SetEvent$1(this.btnEditPreview,this,"OnClick","btnEditPreviewClick"),this.pageData.SetParentComponent(this.pageControl),this.pageData.SetName("pageData"),this.pageData.SetLeft(0),this.pageData.SetTop(20),this.pageData.SetWidth(837),this.pageData.SetHeight(590),this.pageData.FMargins.SetLeft(0),this.pageData.FMargins.SetTop(0),this.pageData.FMargins.SetRight(0),this.pageData.FMargins.SetBottom(1),this.pageData.SetElementClassName("rounded border border-secondary bg-dark"),this.pageData.SetCaption("Data"),this.pageData.SetChildOrderEx(2),this.pageData.SetElementFont(1),this.divDatasetButtonsHolder.SetParentComponent(this.pageData),this.divDatasetButtonsHolder.SetName("divDatasetButtonsHolder"),this.divDatasetButtonsHolder.SetAlignWithMargins(!0),this.divDatasetButtonsHolder.SetLeft(5),this.divDatasetButtonsHolder.SetTop(5),this.divDatasetButtonsHolder.SetWidth(827),this.divDatasetButtonsHolder.SetHeight(42),this.divDatasetButtonsHolder.FMargins.SetLeft(5),this.divDatasetButtonsHolder.FMargins.SetTop(5),this.divDatasetButtonsHolder.FMargins.SetRight(5),this.divDatasetButtonsHolder.FMargins.SetBottom(5),this.divDatasetButtonsHolder.SetElementClassName("rounded border border-secondary"),this.divDatasetButtonsHolder.SetAlign(1),this.divDatasetButtonsHolder.SetElementFont(1),this.divDatasetButtonsHolder.SetRole(""),this.labelDatasetLabel.SetParentComponent(this.divDatasetButtonsHolder),this.labelDatasetLabel.SetName("labelDatasetLabel"),this.labelDatasetLabel.SetAlignWithMargins(!0),this.labelDatasetLabel.SetLeft(3),this.labelDatasetLabel.SetTop(3),this.labelDatasetLabel.SetWidth(220),this.labelDatasetLabel.SetHeight(36),this.labelDatasetLabel.SetAlign(3),this.labelDatasetLabel.SetAutoSize(!1),this.labelDatasetLabel.SetElementClassName("text-white bg-secondary rounded-1"),this.labelDatasetLabel.SetElementFont(1),this.labelDatasetLabel.SetHeightPercent(100),this.labelDatasetLabel.SetHTML('<div style="font-size: 13px;" class="px-2">Selected Dataset</div>'),this.labelDatasetLabel.SetLayout(1),this.labelDatasetLabel.SetWidthStyle(2),this.labelDatasetLabel.SetWidthPercent(100),this.labelDataset.SetParentComponent(this.divDatasetButtonsHolder),this.labelDataset.SetName("labelDataset"),this.labelDataset.SetAlignWithMargins(!0),this.labelDataset.SetLeft(229),this.labelDataset.SetTop(3),this.labelDataset.SetWidth(229),this.labelDataset.SetHeight(36),this.labelDataset.SetAlign(5),this.labelDataset.SetChildOrderEx(1),this.labelDataset.SetElementLabelClassName("pt-1 px-2"),this.labelDataset.SetElementFont(1),this.labelDataset.SetHeightPercent(100),this.labelDataset.SetWidthStyle(2),this.labelDataset.SetWidthPercent(100),this.btnDatasetDelete.SetParentComponent(this.divDatasetButtonsHolder),this.btnDatasetDelete.SetName("btnDatasetDelete"),this.btnDatasetDelete.SetAlignWithMargins(!0),this.btnDatasetDelete.SetLeft(773),this.btnDatasetDelete.SetTop(3),this.btnDatasetDelete.SetWidth(50),this.btnDatasetDelete.SetHeight(36),this.btnDatasetDelete.FMargins.SetLeft(0),this.btnDatasetDelete.FMargins.SetRight(4),this.btnDatasetDelete.SetAlign(4),this.btnDatasetDelete.SetCaption('<span class="px-2" style="font-size:13px;"><i class="fa-solid fa-trash-can pe-1"></i> Delete Dataset</span>'),this.btnDatasetDelete.SetChildOrderEx(6),this.btnDatasetDelete.SetElementClassName("btn btn-sm btn-danger"),this.btnDatasetDelete.SetElementFont(1),this.btnDatasetDelete.SetHeightPercent(100),this.btnDatasetDelete.SetTabOrder(5),this.btnDatasetDelete.SetWidthStyle(2),this.btnDatasetDelete.SetWidthPercent(100),this.btnDatasetExport.SetParentComponent(this.divDatasetButtonsHolder),this.btnDatasetExport.SetName("btnDatasetExport"),this.btnDatasetExport.SetAlignWithMargins(!0),this.btnDatasetExport.SetLeft(637),this.btnDatasetExport.SetTop(3),this.btnDatasetExport.SetWidth(70),this.btnDatasetExport.SetHeight(36),this.btnDatasetExport.FMargins.SetLeft(0),this.btnDatasetExport.SetAlign(4),this.btnDatasetExport.SetCaption('<span class="px-2" style="font-size:13px;"><i class="fa-solid fa-download pe-1"></i> Export</span>'),this.btnDatasetExport.SetChildOrderEx(4),this.btnDatasetExport.SetElementClassName("btn btn-sm btn-success"),this.btnDatasetExport.SetElementFont(1),this.btnDatasetExport.SetHeightPercent(100),this.btnDatasetExport.SetTabOrder(3),this.btnDatasetExport.SetWidthStyle(2),this.btnDatasetExport.SetWidthPercent(100),this.btnDatasetImport.SetParentComponent(this.divDatasetButtonsHolder),this.btnDatasetImport.SetName("btnDatasetImport"),this.btnDatasetImport.SetAlignWithMargins(!0),this.btnDatasetImport.SetLeft(710),this.btnDatasetImport.SetTop(3),this.btnDatasetImport.SetWidth(60),this.btnDatasetImport.SetHeight(36),this.btnDatasetImport.FMargins.SetLeft(0),this.btnDatasetImport.SetAlign(4),this.btnDatasetImport.SetCaption('<span class="px-2" style="font-size:13px;"><i class="fa-solid fa-upload pe-1"></i> Import</span>'),this.btnDatasetImport.SetChildOrderEx(5),this.btnDatasetImport.SetElementClassName("btn btn-sm btn-success"),this.btnDatasetImport.SetElementFont(1),this.btnDatasetImport.SetHeightPercent(100),this.btnDatasetImport.SetTabOrder(4),this.btnDatasetImport.SetWidthStyle(2),this.btnDatasetImport.SetWidthPercent(100),this.btnDatasetClone.SetParentComponent(this.divDatasetButtonsHolder),this.btnDatasetClone.SetName("btnDatasetClone"),this.btnDatasetClone.SetAlignWithMargins(!0),this.btnDatasetClone.SetLeft(554),this.btnDatasetClone.SetTop(3),this.btnDatasetClone.SetWidth(80),this.btnDatasetClone.SetHeight(36),this.btnDatasetClone.FMargins.SetLeft(0),this.btnDatasetClone.SetAlign(4),this.btnDatasetClone.SetCaption('<span class="px-2" style="font-size:13px;"><i class="fa-solid fa-clone pe-1"></i> Clone</span>'),this.btnDatasetClone.SetChildOrderEx(2),this.btnDatasetClone.SetElementClassName("btn btn-sm btn-success"),this.btnDatasetClone.SetElementFont(1),this.btnDatasetClone.SetHeightPercent(100),this.btnDatasetClone.SetTabOrder(1),this.btnDatasetClone.SetWidthStyle(2),this.btnDatasetClone.SetWidthPercent(100),this.btnDatasetRename.SetParentComponent(this.divDatasetButtonsHolder),this.btnDatasetRename.SetName("btnDatasetRename"),this.btnDatasetRename.SetAlignWithMargins(!0),this.btnDatasetRename.SetLeft(461),this.btnDatasetRename.SetTop(3),this.btnDatasetRename.SetWidth(90),this.btnDatasetRename.SetHeight(36),this.btnDatasetRename.FMargins.SetLeft(0),this.btnDatasetRename.SetAlign(4),this.btnDatasetRename.SetCaption('<span class="px-2" style="font-size:13px;"><i class="fa-solid fa-pencil pe-1"></i> Rename Dataset</span>'),this.btnDatasetRename.SetChildOrderEx(3),this.btnDatasetRename.SetElementClassName("btn btn-sm btn-success"),this.btnDatasetRename.SetElementFont(1),this.btnDatasetRename.SetHeightPercent(100),this.btnDatasetRename.SetTabOrder(2),this.btnDatasetRename.SetWidthStyle(2),this.btnDatasetRename.SetWidthPercent(100),this.divDatasetsHolder.SetParentComponent(this.pageData),this.divDatasetsHolder.SetName("divDatasetsHolder"),this.divDatasetsHolder.SetLeft(0),this.divDatasetsHolder.SetTop(52),this.divDatasetsHolder.SetWidth(837),this.divDatasetsHolder.SetHeight(538),this.divDatasetsHolder.SetAlign(5),this.divDatasetsHolder.SetChildOrderEx(1),this.divDatasetsHolder.SetElementFont(1),this.divDatasetsHolder.SetRole(""),this.divDatasetList.SetParentComponent(this.divDatasetsHolder),this.divDatasetList.SetName("divDatasetList"),this.divDatasetList.SetAlignWithMargins(!0),this.divDatasetList.SetLeft(5),this.divDatasetList.SetTop(0),this.divDatasetList.SetWidth(250),this.divDatasetList.SetHeight(533),this.divDatasetList.FMargins.SetLeft(5),this.divDatasetList.FMargins.SetTop(0),this.divDatasetList.FMargins.SetRight(4),this.divDatasetList.FMargins.SetBottom(5),this.divDatasetList.SetElementClassName("rounded border border-secondary overflow-hidden"),this.divDatasetList.SetAlign(3),this.divDatasetList.SetElementFont(1),this.divDatasetList.SetRole(""),this.divDataset.SetParentComponent(this.divDatasetsHolder),this.divDataset.SetName("divDataset"),this.divDataset.SetAlignWithMargins(!0),this.divDataset.SetLeft(269),this.divDataset.SetTop(0),this.divDataset.SetWidth(563),this.divDataset.SetHeight(533),this.divDataset.FMargins.SetLeft(4),this.divDataset.FMargins.SetTop(0),this.divDataset.FMargins.SetRight(5),this.divDataset.FMargins.SetBottom(5),this.divDataset.SetElementClassName("rounded border border-secondary overflow-hidden"),this.divDataset.SetAlign(5),this.divDataset.SetChildOrderEx(1),this.divDataset.SetElementFont(1),this.divDataset.SetRole(""),this.WebSplitter1.SetParentComponent(this.divDatasetsHolder),this.WebSplitter1.SetName("WebSplitter1"),this.WebSplitter1.SetAlignWithMargins(!0),this.WebSplitter1.SetLeft(259),this.WebSplitter1.SetTop(75),this.WebSplitter1.SetWidth(6),this.WebSplitter1.SetHeight(388),this.WebSplitter1.SetControlCursor(14),this.WebSplitter1.FMargins.SetLeft(0),this.WebSplitter1.FMargins.SetTop(75),this.WebSplitter1.FMargins.SetRight(0),this.WebSplitter1.FMargins.SetBottom(75),this.WebSplitter1.SetElementClassName("rounded"),this.WebSplitter1.SetAlign(3),this.WebSplitter1.SetChildOrderEx(2),this.WebSplitter1.SetColor(8421504),this.WebSplitter1.SetGripColor(8421504),this.splitterMain.SetParentComponent(this),this.splitterMain.SetName("splitterMain"),this.splitterMain.SetAlignWithMargins(!0),this.splitterMain.SetLeft(309),this.splitterMain.SetTop(75),this.splitterMain.SetWidth(6),this.splitterMain.SetHeight(516),this.splitterMain.SetControlCursor(14),this.splitterMain.FMargins.SetLeft(0),this.splitterMain.FMargins.SetTop(75),this.splitterMain.FMargins.SetRight(0),this.splitterMain.FMargins.SetBottom(75),this.splitterMain.SetElementClassName("rounded"),this.splitterMain.SetAlign(3),this.splitterMain.SetChildOrderEx(2),this.splitterMain.SetColor(8421504),this.splitterMain.SetGripColor(8421504),this.wxBarcode.SetParentComponent(this),this.wxBarcode.SetName("wxBarcode"),this.wxBarcode.SetLeft(70),this.wxBarcode.SetTop(24),this.wxBarcode.SetWidth(211),this.wxBarcode.SetHeight(249),this.wxBarcode.FParentDoubleBuffered=!1,this.wxBarcode.FDoubleBuffered=!0,this.wxBarcode.FFont.FCharset=1,this.wxBarcode.FFont.SetColor(16777215),this.wxBarcode.FFont.SetHeight(-11),this.wxBarcode.FFont.SetName("Tahoma"),this.wxBarcode.FFont.SetStyle({}),this.wxBarcode.SetParentFont(!1),this.wxBarcode.SetTabOrder(3),this.wxBarcode.SetVisible(!1),this.wxBarcode.FBarcodeBorder.SetColor(-1),this.wxBarcode.SetBarcodeType(12),this.wxBarcode.SetIncludeText(!1),this.wxBarcode.SetIncludeCheck(!0),this.wxBarcode.SetScale(2),this.wxBarcode.SetText("12345"),this.wxBarcode.FSettings.SetCode39HideStars(!0),this.WebOpenDialog1.SetParentComponent(this),this.WebOpenDialog1.SetName("WebOpenDialog1"),this.WebOpenDialog1.FAccept=".pdf",this.WebOpenDialog1.SetLeft(1044),this.WebOpenDialog1.SetTop(613)}finally{this.divLabelsList.AfterLoadDFMValues(),this.TMSFNCBitmapContainer1.AfterLoadDFMValues(),this.divMain.AfterLoadDFMValues(),this.divTop.AfterLoadDFMValues(),this.divButtonHolder.AfterLoadDFMValues(),this.btnPagePrint.AfterLoadDFMValues(),this.btnPageEdit.AfterLoadDFMValues(),this.btnPageData.AfterLoadDFMValues(),this.pageControl.AfterLoadDFMValues(),this.pagePrint.AfterLoadDFMValues(),this.divPrintButtonsHolder.AfterLoadDFMValues(),this.labelPrintLabel.AfterLoadDFMValues(),this.labelPrint.AfterLoadDFMValues(),this.btnPrintDelete.AfterLoadDFMValues(),this.btnPrintRename.AfterLoadDFMValues(),this.btnPrintClone.AfterLoadDFMValues(),this.btnPrintExport.AfterLoadDFMValues(),this.btnPrintImport.AfterLoadDFMValues(),this.divPrintingButtonsHolder.AfterLoadDFMValues(),this.TMSFNCWXPDFToolbar1.AfterLoadDFMValues(),this.btnPrintPDF.AfterLoadDFMValues(),this.btnDownloadPDF.AfterLoadDFMValues(),this.btnUploadPDF.AfterLoadDFMValues(),this.divPrintHolder.AfterLoadDFMValues(),this.divPrintOptionsHolder.AfterLoadDFMValues(),this.btnGenerateLabelPDF.AfterLoadDFMValues(),this.divTest.AfterLoadDFMValues(),this.splitterPrint.AfterLoadDFMValues(),this.divPrintPreviewHolder.AfterLoadDFMValues(),this.TMSFNCWXPDFViewer1.AfterLoadDFMValues(),this.TMSFNCWXPDFThumbnailList1.AfterLoadDFMValues(),this.pageEdit.AfterLoadDFMValues(),this.divEditButtonsHolder.AfterLoadDFMValues(),this.labelEdit.AfterLoadDFMValues(),this.labelEditLabel.AfterLoadDFMValues(),this.btnEditRename.AfterLoadDFMValues(),this.btnEditClone.AfterLoadDFMValues(),this.btnEditExport.AfterLoadDFMValues(),this.btnEditDelete.AfterLoadDFMValues(),this.btnEditImport.AfterLoadDFMValues(),this.divEditor.AfterLoadDFMValues(),this.divEditPropertiesHolder.AfterLoadDFMValues(),this.divEditProperties.AfterLoadDFMValues(),this.divEditPropertiesDetail.AfterLoadDFMValues(),this.splitterProperties.AfterLoadDFMValues(),this.splitterEditor.AfterLoadDFMValues(),this.divEditPreviewHolder.AfterLoadDFMValues(),this.divEditPropertyButtons.AfterLoadDFMValues(),this.ddPropertiesListHolder.AfterLoadDFMValues(),this.btnEditPropertiesAdd.AfterLoadDFMValues(),this.panelPropertiesList.AfterLoadDFMValues(),this.btnEditPropertiesDelete.AfterLoadDFMValues(),this.btnEditPreview.AfterLoadDFMValues(),this.pageData.AfterLoadDFMValues(),this.divDatasetButtonsHolder.AfterLoadDFMValues(),this.labelDatasetLabel.AfterLoadDFMValues(),this.labelDataset.AfterLoadDFMValues(),this.btnDatasetDelete.AfterLoadDFMValues(),this.btnDatasetExport.AfterLoadDFMValues(),this.btnDatasetImport.AfterLoadDFMValues(),this.btnDatasetClone.AfterLoadDFMValues(),this.btnDatasetRename.AfterLoadDFMValues(),this.divDatasetsHolder.AfterLoadDFMValues(),this.divDatasetList.AfterLoadDFMValues(),this.divDataset.AfterLoadDFMValues(),this.WebSplitter1.AfterLoadDFMValues(),this.splitterMain.AfterLoadDFMValues(),this.wxBarcode.AfterLoadDFMValues(),this.WebOpenDialog1.AfterLoadDFMValues()}},rtl.addIntf(this,pas.System.IUnknown);var t=this.$rtti;t.addField("divLabelsList",pas["WEBLib.WebCtrls"].$rtti.THTMLDiv),t.addField("divMain",pas["WEBLib.WebCtrls"].$rtti.THTMLDiv),t.addField("splitterMain",pas["WEBLib.ExtCtrls"].$rtti.TSplitter),t.addField("divTop",pas["WEBLib.WebCtrls"].$rtti.THTMLDiv),t.addField("pageControl",pas["WEBLib.ComCtrls"].$rtti.TPageControl),t.addField("pagePrint",pas["WEBLib.ComCtrls"].$rtti.TTabSheet),t.addField("pageEdit",pas["WEBLib.ComCtrls"].$rtti.TTabSheet),t.addField("pageData",pas["WEBLib.ComCtrls"].$rtti.TTabSheet),t.addField("divButtonHolder",pas["WEBLib.ExtCtrls"].$rtti.TPanel),t.addField("btnPagePrint",pas["WEBLib.StdCtrls"].$rtti.TButton),t.addField("btnPageEdit",pas["WEBLib.StdCtrls"].$rtti.TButton),t.addField("btnPageData",pas["WEBLib.StdCtrls"].$rtti.TButton),t.addField("divPrintButtonsHolder",pas["WEBLib.WebCtrls"].$rtti.THTMLDiv),t.addField("labelPrintLabel",pas["WEBLib.StdCtrls"].$rtti.TLabel),t.addField("labelPrint",pas["WEBLib.StdCtrls"].$rtti.TLabel),t.addField("btnPrintDelete",pas["WEBLib.StdCtrls"].$rtti.TButton),t.addField("btnPrintRename",pas["WEBLib.StdCtrls"].$rtti.TButton),t.addField("btnPrintClone",pas["WEBLib.StdCtrls"].$rtti.TButton),t.addField("btnPrintExport",pas["WEBLib.StdCtrls"].$rtti.TButton),t.addField("divPrintingButtonsHolder",pas["WEBLib.WebCtrls"].$rtti.THTMLDiv),t.addField("btnPrintPDF",pas["WEBLib.StdCtrls"].$rtti.TButton),t.addField("divEditButtonsHolder",pas["WEBLib.WebCtrls"].$rtti.THTMLDiv),t.addField("labelEdit",pas["WEBLib.StdCtrls"].$rtti.TLabel),t.addField("divPrintHolder",pas["WEBLib.WebCtrls"].$rtti.THTMLDiv),t.addField("divPrintOptionsHolder",pas["WEBLib.WebCtrls"].$rtti.THTMLDiv),t.addField("splitterPrint",pas["WEBLib.ExtCtrls"].$rtti.TSplitter),t.addField("divPrintPreviewHolder",pas["WEBLib.WebCtrls"].$rtti.THTMLDiv),t.addField("btnDownloadPDF",pas["WEBLib.StdCtrls"].$rtti.TButton),t.addField("btnEditRename",pas["WEBLib.StdCtrls"].$rtti.TButton),t.addField("btnEditClone",pas["WEBLib.StdCtrls"].$rtti.TButton),t.addField("btnEditExport",pas["WEBLib.StdCtrls"].$rtti.TButton),t.addField("btnEditDelete",pas["WEBLib.StdCtrls"].$rtti.TButton),t.addField("btnEditImport",pas["WEBLib.StdCtrls"].$rtti.TButton),t.addField("btnPrintImport",pas["WEBLib.StdCtrls"].$rtti.TButton),t.addField("divEditor",pas["WEBLib.WebCtrls"].$rtti.THTMLDiv),t.addField("divEditPropertiesHolder",pas["WEBLib.WebCtrls"].$rtti.THTMLDiv),t.addField("splitterEditor",pas["WEBLib.ExtCtrls"].$rtti.TSplitter),t.addField("divEditPreviewHolder",pas["WEBLib.WebCtrls"].$rtti.THTMLDiv),t.addField("divEditPropertyButtons",pas["WEBLib.WebCtrls"].$rtti.THTMLDiv),t.addField("ddPropertiesListHolder",pas["WEBLib.DropDown"].$rtti.TDropDownControl),t.addField("btnEditPropertiesAdd",pas["WEBLib.StdCtrls"].$rtti.TButton),t.addField("panelPropertiesList",pas["WEBLib.ExtCtrls"].$rtti.TPanel),t.addField("labelEditLabel",pas["WEBLib.StdCtrls"].$rtti.TLabel),t.addField("divEditProperties",pas["WEBLib.WebCtrls"].$rtti.THTMLDiv),t.addField("divEditPropertiesDetail",pas["WEBLib.WebCtrls"].$rtti.THTMLDiv),t.addField("splitterProperties",pas["WEBLib.ExtCtrls"].$rtti.TSplitter),t.addField("btnEditPropertiesDelete",pas["WEBLib.StdCtrls"].$rtti.TButton),t.addField("btnEditPreview",pas["WEBLib.StdCtrls"].$rtti.TButton),t.addField("wxBarcode",pas["WEBLib.TMSFNCWXBarcode"].$rtti.TTMSFNCWXBarcode),t.addField("divDatasetButtonsHolder",pas["WEBLib.WebCtrls"].$rtti.THTMLDiv),t.addField("labelDatasetLabel",pas["WEBLib.StdCtrls"].$rtti.TLabel),t.addField("labelDataset",pas["WEBLib.StdCtrls"].$rtti.TLabel),t.addField("btnDatasetDelete",pas["WEBLib.StdCtrls"].$rtti.TButton),t.addField("btnDatasetExport",pas["WEBLib.StdCtrls"].$rtti.TButton),t.addField("btnDatasetImport",pas["WEBLib.StdCtrls"].$rtti.TButton),t.addField("divDatasetsHolder",pas["WEBLib.WebCtrls"].$rtti.THTMLDiv),t.addField("divDatasetList",pas["WEBLib.WebCtrls"].$rtti.THTMLDiv),t.addField("divDataset",pas["WEBLib.WebCtrls"].$rtti.THTMLDiv),t.addField("WebSplitter1",pas["WEBLib.ExtCtrls"].$rtti.TSplitter),t.addField("btnDatasetClone",pas["WEBLib.StdCtrls"].$rtti.TButton),t.addField("btnDatasetRename",pas["WEBLib.StdCtrls"].$rtti.TButton),t.addField("TMSFNCWXPDFViewer1",pas["WEBLib.TMSFNCWXPDFViewer"].$rtti.TTMSFNCWXPDFViewer),t.addField("TMSFNCWXPDFThumbnailList1",pas["WEBLib.TMSFNCWXPDFThumbnailList"].$rtti.TTMSFNCWXPDFThumbnailList),t.addField("TMSFNCWXPDFToolbar1",pas["WEBLib.TMSFNCWXPDFToolbar"].$rtti.TTMSFNCWXPDFToolbar),t.addField("btnUploadPDF",pas["WEBLib.StdCtrls"].$rtti.TButton),t.addField("WebOpenDialog1",pas["WEBLib.Dialogs"].$rtti.TOpenDialog),t.addField("btnGenerateLabelPDF",pas["WEBLib.StdCtrls"].$rtti.TButton),t.addField("divTest",pas["WEBLib.WebCtrls"].$rtti.THTMLDiv),t.addField("TMSFNCBitmapContainer1",pas["WEBLib.TMSFNCBitmapContainer"].$rtti.TTMSFNCBitmapContainer),t.addMethod("WebFormCreate",0,[["Sender",pas.System.$rtti.TObject]]),t.addMethod("btnPagePrintClick",0,[["Sender",pas.System.$rtti.TObject]]),t.addMethod("btnPageEditClick",0,[["Sender",pas.System.$rtti.TObject]]),t.addMethod("btnPageDataClick",0,[["Sender",pas.System.$rtti.TObject]]),t.addMethod("NewLabelSelected",0,[["LabelID",rtl.string],["LabelName",rtl.string],["GroupName",rtl.string],["Locked",rtl.boolean]]),t.addMethod("NewDatasetSelected",0,[["DatasetID",rtl.string],["DatasetName",rtl.string],["GroupName",rtl.string],["Locked",rtl.boolean]]),t.addMethod("btnPrintRenameClick",0,[["Sender",pas.System.$rtti.TObject]],null,16,{attr:[pas.JS.AsyncAttribute,"Create"]}),t.addMethod("btnPrintCloneClick",0,[["Sender",pas.System.$rtti.TObject]],null,16,{attr:[pas.JS.AsyncAttribute,"Create"]}),t.addMethod("btnPrintDeleteClick",0,[["Sender",pas.System.$rtti.TObject]]),t.addMethod("ddPropertiesListHolderDropDown",0,[["Sender",pas.System.$rtti.TObject]]),t.addMethod("NewPropertySelected",0,[["ID",rtl.string],["Group",rtl.string],["Name",rtl.string],["Options",rtl.jsvalue]]),t.addMethod("btnEditPropertiesAddClick",0,[["Sender",pas.System.$rtti.TObject]]),t.addMethod("btnEditPropertiesDeleteClick",0,[["Sender",pas.System.$rtti.TObject]]),t.addMethod("btnEditPreviewClick",0,[["Sender",pas.System.$rtti.TObject]]),t.addMethod("GenerateBarcode",1,[["Barcode",rtl.string],["Data",rtl.string],["BarWidth",rtl.longint],["BarHeight",rtl.longint],["BarScale",rtl.longint]],rtl.string),t.addMethod("btnDownloadPDFClick",0,[["Sender",pas.System.$rtti.TObject]]),t.addMethod("btnUploadPDFClick",0,[["Sender",pas.System.$rtti.TObject]],null,16,{attr:[pas.JS.AsyncAttribute,"Create"]}),t.addMethod("btnPrintPDFClick",0,[["Sender",pas.System.$rtti.TObject]]),t.addMethod("btnGenerateLabelPDFClick",0,[["Sender",pas.System.$rtti.TObject]],null,16,{attr:[pas.JS.AsyncAttribute,"Create"]}),t.addMethod("splitterEditorMove",0,[["Sender",pas.System.$rtti.TObject]])})),this.Form1=null}),["UnitLabelName"]),rtl.module("program",["System","WEBLib.Forms","WEBLib.Forms","Unit1","UnitLabelName"],(function(){"use strict";this.$main=function(){pas["WEBLib.Forms"].Application.Initialize(),pas["WEBLib.Forms"].Application.FMainFormOnTaskBar=!0,pas["WEBLib.Forms"].Application.CreateForm(pas.Unit1.TForm1,{p:pas.Unit1,get:function(){return this.p.Form1},set:function(t){this.p.Form1=t}}),pas["WEBLib.Forms"].Application.CreateForm(pas.UnitLabelName.TLabelNameForm,{p:pas.UnitLabelName,get:function(){return this.p.LabelNameForm},set:function(t){this.p.LabelNameForm=t}}),pas["WEBLib.Forms"].Application.Run()}}));